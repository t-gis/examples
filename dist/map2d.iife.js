/**
 *  ██████████   ████████  ██  ████████
 * ░░░░░██░░░   ██░░░░░░██░██ ██░░░░░░ 
 *     ░██     ██      ░░ ░██░██       
 *     ░██    ░██         ░██░█████████
 *     ░██    ░██    █████░██░░░░░░░░██
 *     ░██    ░░██  ░░░░██░██       ░██
 *     ░██     ░░████████ ░██ ████████ 
 *     ░░       ░░░░░░░░  ░░ ░░░░░░░░  
 * name: tgis-2d
 * version: v0.0.4
 * description: tgis map2d
 * author: tgis
 * time: 2022年11月3日 13:51:32
 */
var Map2d=function(Q){"use strict";var Ev=Object.defineProperty;var Cv=(Q,Dt,St)=>Dt in Q?Ev(Q,Dt,{enumerable:!0,configurable:!0,writable:!0,value:St}):Q[Dt]=St;var D=(Q,Dt,St)=>(Cv(Q,typeof Dt!="symbol"?Dt+"":Dt,St),St);function Dt(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}Array.prototype.chunk=function(n){let e=[];for(let t=0;t<this.length;t+=n){const i=this.slice(t,t+n);e.push(i)}return e},URLSearchParams.prototype.setObject=function(n){return Object.keys(n).forEach(e=>this.set(e,n[e])),this},String.prototype.toCamelCase=function(){let n=this,e="";if(n){let t=n.split(/[-_]/g);for(let i in t)i>0?e+=t[i].charAt(0).toUpperCase()+t[i].slice(1):e+=t[i]}else return e;return e},String.prototype.toFirstUpperCase=function(){let n=this;return n.charAt(0).toUpperCase()+n.slice(1)};var St={startsWith:function(n,e){return n.indexOf(e)==0},contains:function(n,e){return n.indexOf(e)!=-1},trim:function(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(n){for(var e=n.split("-"),t=e[0],i=1,r=e.length;i<r;i++){var s=e[i];t+=s.charAt(0).toUpperCase()+s.substring(1)}return t},format:function(n,e,t){e||(e=window);var i=function(r,s){for(var o,l=s.split(/\.+/),u=0;u<l.length;u++)u==0&&(o=e),o=o[l[u]];return typeof o=="function"&&(o=t?o.apply(null,t):o()),typeof o>"u"?"undefined":o};return n.replace(St.tokenRegEx,i)},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(n){return St.numberRegEx.test(n)},numericIf:function(n){return St.isNumeric(n)?parseFloat(n):n}},Is={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(n,e){var t=0;return e>0&&(t=parseFloat(n.toPrecision(e))),t},format:function(n,e,t,i){e=typeof e<"u"?e:0,t=typeof t<"u"?t:Is.thousandsSeparator,i=typeof i<"u"?i:Is.decimalSeparator,e!=null&&(n=parseFloat(n.toFixed(e)));var r=n.toString().split(".");r.length===1&&e==null&&(e=0);var s=r[0];if(t)for(var o=/(-?[0-9]+)([0-9]{3})/;o.test(s);)s=s.replace(o,"$1"+t+"$2");var l;if(e==0)l=s;else{var u=r.length>1?r[1]:"0";e!=null&&(u=u+new Array(e-u.length+1).join("0")),l=s+i+u}return l}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(n){return Is.limitSigDigs(this,n)});var ur={bind:function(n,e){var t=Array.prototype.slice.apply(arguments,[2]);return function(){var i=t.concat(Array.prototype.slice.apply(arguments,[0]));return n.apply(e,i)}},bindAsEventListener:function(n,e){return function(t){return n.call(e,t||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}};class Cn{constructor(){this.CLASS_NAME="SuperMap.Geometry",this.id=W.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}destroy(){this.id=null,this.bounds=null,this.SRID=null}clone(){return new Cn}setBounds(e){e&&(this.bounds=e.clone())}clearBounds(){this.bounds=null,this.parent&&this.parent.clearBounds()}extendBounds(e){var t=this.getBounds();t?this.bounds.extend(e):this.setBounds(e)}getBounds(){return this.bounds==null&&this.calculateBounds(),this.bounds}calculateBounds(){}getVertices(e){}getArea(){return 0}}const oa=function(){var n="",e="",t="pc",i,r=navigator.userAgent.toLowerCase();return r.indexOf("msie")>-1||r.indexOf("trident")>-1&&r.indexOf("rv")>-1?(n="msie",i=r.match(/msie ([\d.]+)/)||r.match(/rv:([\d.]+)/)):r.indexOf("chrome")>-1?(n="chrome",i=r.match(/chrome\/([\d.]+)/)):r.indexOf("firefox")>-1?(n="firefox",i=r.match(/firefox\/([\d.]+)/)):r.indexOf("opera")>-1?(n="opera",i=r.match(/version\/([\d.]+)/)):r.indexOf("safari")>-1&&(n="safari",i=r.match(/version\/([\d.]+)/)),e=i?i[1]:"",r.indexOf("ipad")>-1||r.indexOf("ipod")>-1||r.indexOf("iphone")>-1?t="apple":r.indexOf("android")>-1&&(i=r.match(/version\/([\d.]+)/),e=i?i[1]:"",t="android"),{name:n,version:e,device:t}}(),Jh=function(){var n=!0,e=oa;return document.createElement("canvas").getContext?(e.name==="firefox"&&parseFloat(e.version)<5&&(n=!1),e.name==="safari"&&parseFloat(e.version)<4&&(n=!1),e.name==="opera"&&parseFloat(e.version)<10&&(n=!1),e.name==="msie"&&parseFloat(e.version)<9&&(n=!1)):n=!1,n}();(function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("webkit")===-1&&n.indexOf("gecko")!==-1})();const aa=96,W={extend:function(n,e){if(n=n||{},e){for(var t in e){var i=e[t];i!==void 0&&(n[t]=i)}var r=typeof window.Event=="function"&&e instanceof window.Event;!r&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(n.toString=e.toString)}return n},copy:function(n,e){n=n||{};var t;if(e)for(var i in n)t=e[i],typeof t<"u"&&(n[i]=t)},reset:function(n){n=n||{};for(var e in n)if(n.hasOwnProperty(e)){if(typeof n[e]=="object"&&n[e]instanceof Array){for(var t in n[e])n[e][t].destroy&&n[e][t].destroy();n[e].length=0}else typeof n[e]=="object"&&n[e]instanceof Object&&n[e].destroy&&n[e].destroy();n[e]=null}},getElement:function(){for(var n=[],e=0,t=arguments.length;e<t;e++){var i=arguments[e];if(typeof i=="string"&&(i=document.getElementById(i)),arguments.length===1)return i;n.push(i)}return n},isElement:function(n){return!!(n&&n.nodeType===1)},isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"},removeItem:function(n,e){for(var t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1);return n},indexOf:function(n,e){if(n==null)return-1;if(typeof n.indexOf=="function")return n.indexOf(e);for(var t=0,i=n.length;t<i;t++)if(n[t]===e)return t;return-1},modifyDOMElement:function(n,e,t,i,r,s,o,l){e&&(n.id=e),t&&(n.style.left=t.x+"px",n.style.top=t.y+"px"),i&&(n.style.width=i.w+"px",n.style.height=i.h+"px"),r&&(n.style.position=r),s&&(n.style.border=s),o&&(n.style.overflow=o),parseFloat(l)>=0&&parseFloat(l)<1?(n.style.filter="alpha(opacity="+l*100+")",n.style.opacity=l):parseFloat(l)===1&&(n.style.filter="",n.style.opacity="")},applyDefaults:function(n,e){n=n||{};var t=typeof window.Event=="function"&&e instanceof window.Event;for(var i in e)(n[i]===void 0||!t&&e.hasOwnProperty&&e.hasOwnProperty(i)&&!n.hasOwnProperty(i))&&(n[i]=e[i]);return!t&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!n.hasOwnProperty("toString")&&(n.toString=e.toString),n},getParameterString:function(n){var e=[];for(var t in n){var i=n[t];if(i!=null&&typeof i!="function"){var r;Array.isArray(i)||i.toString()==="[object Object]"?r=encodeURIComponent(JSON.stringify(i)):r=encodeURIComponent(i),e.push(encodeURIComponent(t)+"="+r)}}return e.join("&")},urlAppend:function(n,e){var t=n;if(e){e.indexOf("?")===0&&(e=e.substring(1));var i=(n+" ").split(/[?&]/);t+=i.pop()===" "?e:i.length?"&"+e:"?"+e}return t},urlPathAppend:function(n,e){let t=n;if(!e)return t;e.indexOf("/")===0&&(e=e.substring(1));const i=n.split("?");return i[0].indexOf("/",i[0].length-1)<0&&(i[0]+="/"),t=`${i[0]}${e}${i.length>1?`?${i[1]}`:""}`,t},DEFAULT_PRECISION:14,toFloat:function(n,e){return e==null&&(e=W.DEFAULT_PRECISION),typeof n!="number"&&(n=parseFloat(n)),e===0?n:parseFloat(n.toPrecision(e))},rad:function(n){return n*Math.PI/180},getParameters:function(n){n=n==null?window.location.href:n;var e="";if(St.contains(n,"?")){var t=n.indexOf("?")+1,i=St.contains(n,"#")?n.indexOf("#"):n.length;e=n.substring(t,i)}for(var r={},s=e.split(/[&;]/),o=0,l=s.length;o<l;++o){var u=s[o].split("=");if(u[0]){var g=u[0];try{g=decodeURIComponent(g)}catch{g=unescape(g)}var p=(u[1]||"").replace(/\+/g," ");try{p=decodeURIComponent(p)}catch{p=unescape(p)}p=p.split(","),p.length==1&&(p=p[0]),r[g]=p}}return r},lastSeqID:0,createUniqueID:function(n){return n==null&&(n="id_"),W.lastSeqID+=1,n+W.lastSeqID},normalizeScale:function(n){var e=n>1?1/n:n;return e},getResolutionFromScale:function(n,e){var t;if(n){e==null&&(e="degrees");var i=W.normalizeScale(n);t=1/(i*de[e]*aa)}return t},getScaleFromResolution:function(n,e){e==null&&(e="degrees");var t=n*de[e]*aa;return t},getBrowser:function(){return oa},isSupportCanvas:Jh,supportCanvas:function(){return W.isSupportCanvas},isInTheSameDomain:function(n){if(!n)return!0;var e=n.indexOf("//"),t=document.location.toString(),i=t.indexOf("//");if(e===-1)return!0;var r,s=r=n.substring(0,e),o=t.substring(i+2);i=o.indexOf("/");var l=o.indexOf(":"),u=o.substring(0,i),g=document.location.protocol;if(l!==-1||(u+=":"+(g.toLowerCase()==="http:"?80:443)),g.toLowerCase()!==s.toLowerCase())return!1;s=n.substring(e+2);var p=s.indexOf(":");e=s.indexOf("/");var y=s.substring(0,e),w;p!==-1?w=s.substring(0,p):(w=s.substring(0,e),y+=":"+(r.toLowerCase()==="http:"?80:443));var _=document.domain;return w===_&&y===u},calculateDpi:function(n,e,t,i,r){if(!(!n||!e||!t)){var s=1e4,o=n.getWidth(),l=n.getHeight(),u=e.w,g=e.h;r=r||6378137,i=i||"degrees";var p;if(i.toLowerCase()==="degree"||i.toLowerCase()==="degrees"||i.toLowerCase()==="dd"){let y=o/u,w=l/g,_=y>w?y:w;p=.0254*s/_/t/(Math.PI*2*r/360)/s}else{let y=o/u;p=.0254*s/y/t/s}return p}},toJSON:function(n){var e=n;if(e==null)return null;switch(e.constructor){case String:return e='"'+e.replace(/(["\\])/g,"\\$1")+'"',e=e.replace(/\n/g,"\\n"),e=e.replace(/\r/g,"\\r"),e=e.replace("<","&lt;"),e=e.replace(">","&gt;"),e=e.replace(/%/g,"%25"),e=e.replace(/&/g,"%26"),e;case Array:for(var t="",i=0,r=e.length;i<r;i++)t+=W.toJSON(e[i]),i!==e.length-1&&(t+=",");return"["+t+"]";case Number:return isFinite(e)?String(e):null;case Boolean:return String(e);case Date:var s=`{'__type':"System.DateTime",'Year':`+e.getFullYear()+",'Month':"+(e.getMonth()+1)+",'Day':"+e.getDate()+",'Hour':"+e.getHours()+",'Minute':"+e.getMinutes()+",'Second':"+e.getSeconds()+",'Millisecond':"+e.getMilliseconds()+",'TimezoneOffset':"+e.getTimezoneOffset()+"}";return s;default:if(e.toJSON!=null&&typeof e.toJSON=="function")return e.toJSON();if(typeof e=="object"){if(e.length){let l=[];for(let u=0,g=e.length;u<g;u++)l.push(W.toJSON(e[u]));return"["+l.join(",")+"]"}let o=[];for(let l in e)typeof e[l]!="function"&&l!=="CLASS_NAME"&&l!=="parent"&&o.push("'"+l+"':"+W.toJSON(e[l]));return o.length>0?"{"+o.join(",")+"}":"{}"}return e.toString()}},getResolutionFromScaleDpi:function(n,e,t,i){var r=null,s=1e4;return i=i||6378137,t=t||"",n>0&&e>0?(n=W.normalizeScale(n),t.toLowerCase()==="degree"||t.toLowerCase()==="degrees"||t.toLowerCase()==="dd"?(r=.0254*s/e/n/(Math.PI*2*i/360)/s,r):(r=.0254*s/e/n/s,r)):-1},getScaleFromResolutionDpi:function(n,e,t,i){var r=null,s=1e4;return i=i||6378137,t=t||"",n>0&&e>0?t.toLowerCase()==="degree"||t.toLowerCase()==="degrees"||t.toLowerCase()==="dd"?(r=.0254*s/e/n/(Math.PI*2*i/360)/s,r):(r=.0254*s/e/n/s,r):-1},transformResult:function(n){return n.responseText&&typeof n.responseText=="string"&&(n=JSON.parse(n.responseText)),n},copyAttributes:function(n,e){if(n=n||{},e)for(var t in e){var i=e[t];i!==void 0&&t!=="CLASS_NAME"&&typeof i!="function"&&(n[t]=i)}return n},copyAttributesWithClip:function(n,e,t){if(n=n||{},e)for(var i in e){var r=!1;if(t&&t.length){for(var s=0,o=t.length;s<o;s++)if(i===t[s]){r=!0;break}}if(r!==!0){var l=e[i];l!==void 0&&i!=="CLASS_NAME"&&typeof l!="function"&&(n[i]=l)}}return n},cloneObject:function(n){if(n===null||typeof n!="object")return n;if(n instanceof Date){let t=new Date;return t.setTime(n.getTime()),t}if(n instanceof Array)return n.slice(0);if(n instanceof Object){let t={};for(var e in n)n.hasOwnProperty(e)&&(t[e]=W.cloneObject(n[e]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(n,e,t,i){var r=null,s,o,l=(i.x-t.x)*(n.y-t.y)-(i.y-t.y)*(n.x-t.x),u=(e.x-n.x)*(n.y-t.y)-(e.y-n.y)*(n.x-t.x),g=(i.y-t.y)*(e.x-n.x)-(i.x-t.x)*(e.y-n.y);if(g!=0)s=l/g,o=u/g,s>=0&&o<=1&&s<=1&&o>=0?r=new Cn.Point(n.x+s*(e.x-n.x),n.y+s*(e.y-n.y)):r="No Intersection";else if(l==0&&u==0){var p=Math.max(n.y,e.y),y=Math.min(n.y,e.y),w=Math.max(n.x,e.x),_=Math.min(n.x,e.x);(t.y>=y&&t.y<=p||i.y>=y&&i.y<=p)&&t.x>=_&&t.x<=w||i.x>=_&&i.x<=w?r="Coincident":r="Parallel"}else r="Parallel";return r},getTextBounds:function(n,e,t){document.body.appendChild(t),t.style.width="auto",t.style.height="auto",n.fontSize&&(t.style.fontSize=n.fontSize),n.fontFamily&&(t.style.fontFamily=n.fontFamily),n.fontWeight&&(t.style.fontWeight=n.fontWeight),t.style.position="relative",t.style.visibility="hidden",t.style.display="inline-block",t.innerHTML=e;var i=t.clientWidth,r=t.clientHeight;return document.body.removeChild(t),{textWidth:i,textHeight:r}},convertPath:function(n,e){return e?n.replace(/\{([\w-\.]+)\}/g,(t,i)=>{var r;return e.hasOwnProperty(i)?r=Qh(e[i]):r=t,encodeURIComponent(r)}):n}},de={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};de.in=de.inches,de.degrees=de.dd,de.nmi=1852*de.m;const ie=.0254000508001016;W.extend(de,{Inch:de.inches,Meter:1/ie,Foot:.3048006096012192/ie,IFoot:.3048/ie,ClarkeFoot:.3047972651151/ie,SearsFoot:.30479947153867626/ie,GoldCoastFoot:.3047997101815088/ie,IInch:.0254/ie,MicroInch:254e-7/ie,Mil:254e-10/ie,Centimeter:.01/ie,Kilometer:1e3/ie,Yard:.9144018288036576/ie,SearsYard:.914398414616029/ie,IndianYard:.9143985307444408/ie,IndianYd37:.91439523/ie,IndianYd62:.9143988/ie,IndianYd75:.9143985/ie,IndianFoot:.30479951/ie,IndianFt37:.30479841/ie,IndianFt62:.3047996/ie,IndianFt75:.3047995/ie,Mile:1609.3472186944373/ie,IYard:.9144/ie,IMile:1609.344/ie,NautM:1852/ie,"Lat-66":110943.31648893273/ie,"Lat-83":110946.25736872235/ie,Decimeter:.1/ie,Millimeter:.001/ie,Dekameter:10/ie,Decameter:10/ie,Hectometer:100/ie,GermanMeter:1.0000135965/ie,CaGrid:.999738/ie,ClarkeChain:20.1166194976/ie,GunterChain:20.11684023368047/ie,BenoitChain:20.116782494375872/ie,SearsChain:20.11676512155/ie,ClarkeLink:.201166194976/ie,GunterLink:.2011684023368047/ie,BenoitLink:.20116782494375873/ie,SearsLink:.2011676512155/ie,Rod:5.02921005842012/ie,IntnlChain:20.1168/ie,IntnlLink:.201168/ie,Perch:5.02921005842012/ie,Pole:5.02921005842012/ie,Furlong:201.1684023368046/ie,Rood:3.778266898/ie,CapeFoot:.3047972615/ie,Brealey:375/ie,ModAmFt:.304812252984506/ie,Fathom:1.8288/ie,"NautM-UK":1853.184/ie,"50kilometers":5e4/ie,"150kilometers":15e4/ie}),W.extend(de,{mm:de.Meter/1e3,cm:de.Meter/100,dm:de.Meter*100,km:de.Meter*1e3,kmi:de.nmi,fath:de.Fathom,ch:de.IntnlChain,link:de.IntnlLink,"us-in":de.inches,"us-ft":de.Foot,"us-yd":de.Yard,"us-ch":de.GunterChain,"us-mi":de.Mile,"ind-yd":de.IndianYd37,"ind-ft":de.IndianFt37,"ind-ch":20.11669506/ie}),de.degree=de.dd,de.meter=de.m,de.foot=de.ft,de.inch=de.inches,de.mile=de.mi,de.kilometer=de.km,de.yard=de.yd;function Qh(n){return n==null||n==null?"":n instanceof Date?n.toJSON():$h(n)?JSON.stringify(n):n.toString()}function $h(n){if(typeof n!="string"&&typeof n!="object")return!1;try{const e=n.toString();return e==="[object Object]"||e==="[object Array]"}catch{return!1}}var Bi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(n,e){(function(t,i){i()})(Bi,function(){function t(x){var T=this.constructor;return this.then(function(S){return T.resolve(x()).then(function(){return S})},function(S){return T.resolve(x()).then(function(){return T.reject(S)})})}function i(x){var T=this;return new T(function(S,b){if(!(x&&typeof x.length<"u"))return b(new TypeError(typeof x+" "+x+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var F=Array.prototype.slice.call(x);if(F.length===0)return S([]);var B=F.length;function X(j,J){if(J&&(typeof J=="object"||typeof J=="function")){var ae=J.then;if(typeof ae=="function"){ae.call(J,function(he){X(j,he)},function(he){F[j]={status:"rejected",reason:he},--B===0&&S(F)});return}}F[j]={status:"fulfilled",value:J},--B===0&&S(F)}for(var Y=0;Y<F.length;Y++)X(Y,F[Y])})}var r=setTimeout;function s(x){return Boolean(x&&typeof x.length<"u")}function o(){}function l(x,T){return function(){x.apply(T,arguments)}}function u(x){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if(typeof x!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],E(x,this)}function g(x,T){for(;x._state===3;)x=x._value;if(x._state===0){x._deferreds.push(T);return}x._handled=!0,u._immediateFn(function(){var S=x._state===1?T.onFulfilled:T.onRejected;if(S===null){(x._state===1?p:y)(T.promise,x._value);return}var b;try{b=S(x._value)}catch(F){y(T.promise,F);return}p(T.promise,b)})}function p(x,T){try{if(T===x)throw new TypeError("A promise cannot be resolved with itself.");if(T&&(typeof T=="object"||typeof T=="function")){var S=T.then;if(T instanceof u){x._state=3,x._value=T,w(x);return}else if(typeof S=="function"){E(l(S,T),x);return}}x._state=1,x._value=T,w(x)}catch(b){y(x,b)}}function y(x,T){x._state=2,x._value=T,w(x)}function w(x){x._state===2&&x._deferreds.length===0&&u._immediateFn(function(){x._handled||u._unhandledRejectionFn(x._value)});for(var T=0,S=x._deferreds.length;T<S;T++)g(x,x._deferreds[T]);x._deferreds=null}function _(x,T,S){this.onFulfilled=typeof x=="function"?x:null,this.onRejected=typeof T=="function"?T:null,this.promise=S}function E(x,T){var S=!1;try{x(function(b){S||(S=!0,p(T,b))},function(b){S||(S=!0,y(T,b))})}catch(b){if(S)return;S=!0,y(T,b)}}u.prototype.catch=function(x){return this.then(null,x)},u.prototype.then=function(x,T){var S=new this.constructor(o);return g(this,new _(x,T,S)),S},u.prototype.finally=t,u.all=function(x){return new u(function(T,S){if(!s(x))return S(new TypeError("Promise.all accepts an array"));var b=Array.prototype.slice.call(x);if(b.length===0)return T([]);var F=b.length;function B(Y,j){try{if(j&&(typeof j=="object"||typeof j=="function")){var J=j.then;if(typeof J=="function"){J.call(j,function(ae){B(Y,ae)},S);return}}b[Y]=j,--F===0&&T(b)}catch(ae){S(ae)}}for(var X=0;X<b.length;X++)B(X,b[X])})},u.allSettled=i,u.resolve=function(x){return x&&typeof x=="object"&&x.constructor===u?x:new u(function(T){T(x)})},u.reject=function(x){return new u(function(T,S){S(x)})},u.race=function(x){return new u(function(T,S){if(!s(x))return S(new TypeError("Promise.race accepts an array"));for(var b=0,F=x.length;b<F;b++)u.resolve(x[b]).then(T,S)})},u._immediateFn=typeof setImmediate=="function"&&function(x){setImmediate(x)}||function(x){r(x,0)},u._unhandledRejectionFn=function(T){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",T)};var I=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Bi<"u")return Bi;throw new Error("unable to locate global object")}();typeof I.Promise!="function"?I.Promise=u:(I.Promise.prototype.finally||(I.Promise.prototype.finally=t),I.Promise.allSettled||(I.Promise.allSettled=i))})})();var eu={exports:{}};(function(n){(function(e){if(!e.__disableNativeFetch&&e.fetch)return;function t(S){if(typeof S!="string"&&(S=String(S)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(S))throw new TypeError("Invalid character in header field name");return S.toLowerCase()}function i(S){return typeof S!="string"&&(S=String(S)),S}function r(S){this.map={},S instanceof r?S.forEach(function(b,F){this.append(F,b)},this):S&&Object.getOwnPropertyNames(S).forEach(function(b){this.append(b,S[b])},this)}r.prototype.append=function(S,b){S=t(S),b=i(b);var F=this.map[S];F||(F=[],this.map[S]=F),F.push(b)},r.prototype.delete=function(S){delete this.map[t(S)]},r.prototype.get=function(S){var b=this.map[t(S)];return b?b[0]:null},r.prototype.getAll=function(S){return this.map[t(S)]||[]},r.prototype.has=function(S){return this.map.hasOwnProperty(t(S))},r.prototype.set=function(S,b){this.map[t(S)]=[i(b)]},r.prototype.forEach=function(S,b){Object.getOwnPropertyNames(this.map).forEach(function(F){this.map[F].forEach(function(B){S.call(b,B,F,this)},this)},this)};function s(S){if(S.bodyUsed)return Promise.reject(new TypeError("Already read"));S.bodyUsed=!0}function o(S){return new Promise(function(b,F){S.onload=function(){b(S.result)},S.onerror=function(){F(S.error)}})}function l(S){var b=new FileReader;return b.readAsArrayBuffer(S),o(b)}function u(S,b){var F=new FileReader,B=b.headers.map["content-type"]?b.headers.map["content-type"].toString():"",X=/charset\=[0-9a-zA-Z\-\_]*;?/,Y=S.type.match(X)||B.match(X),j=[S];return Y&&j.push(Y[0].replace(/^charset\=/,"").replace(/;$/,"")),F.readAsText.apply(F,j),o(F)}var g={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function p(){return this.bodyUsed=!1,this._initBody=function(S,b){if(this._bodyInit=S,typeof S=="string")this._bodyText=S;else if(g.blob&&Blob.prototype.isPrototypeOf(S))this._bodyBlob=S,this._options=b;else if(g.formData&&FormData.prototype.isPrototypeOf(S))this._bodyFormData=S;else if(!S)this._bodyText="";else if(!(g.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(S)))throw new Error("unsupported BodyInit type")},g.blob?(this.blob=function(){var S=s(this);if(S)return S;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(l)},this.text=function(){var S=s(this);if(S)return S;if(this._bodyBlob)return u(this._bodyBlob,this._options);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var S=s(this);return S||Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(S){var b=S.toUpperCase();return y.indexOf(b)>-1?b:S}function _(S,b){b=b||{};var F=b.body;if(_.prototype.isPrototypeOf(S)){if(S.bodyUsed)throw new TypeError("Already read");this.url=S.url,this.credentials=S.credentials,b.headers||(this.headers=new r(S.headers)),this.method=S.method,this.mode=S.mode,F||(F=S._bodyInit,S.bodyUsed=!0)}else this.url=S;if(this.credentials=b.credentials||this.credentials||"omit",(b.headers||!this.headers)&&(this.headers=new r(b.headers)),this.method=w(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&F)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(F,b)}_.prototype.clone=function(){return new _(this)};function E(S){var b=new FormData;return S.trim().split("&").forEach(function(F){if(F){var B=F.split("="),X=B.shift().replace(/\+/g," "),Y=B.join("=").replace(/\+/g," ");b.append(decodeURIComponent(X),decodeURIComponent(Y))}}),b}function I(S){var b=new r,F=S.getAllResponseHeaders().trim().split(`
`);return F.forEach(function(B){var X=B.trim().split(":"),Y=X.shift().trim(),j=X.join(":").trim();b.append(Y,j)}),b}p.call(_.prototype);function x(S,b){b||(b={}),this._initBody(S,b),this.type="default",this.status=b.status,this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText,this.headers=b.headers instanceof r?b.headers:new r(b.headers),this.url=b.url||""}p.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},x.error=function(){var S=new x(null,{status:0,statusText:""});return S.type="error",S};var T=[301,302,303,307,308];x.redirect=function(S,b){if(T.indexOf(b)===-1)throw new RangeError("Invalid status code");return new x(null,{status:b,headers:{location:S}})},e.Headers=r,e.Request=_,e.Response=x,e.fetch=function(S,b){return new Promise(function(F,B){var X;_.prototype.isPrototypeOf(S)&&!b?X=S:X=new _(S,b);var Y=new XMLHttpRequest;function j(){if("responseURL"in Y)return Y.responseURL;if(/^X-Request-URL:/m.test(Y.getAllResponseHeaders()))return Y.getResponseHeader("X-Request-URL")}var J=!1;function ae(){if(Y.readyState===4){var he=Y.status===1223?204:Y.status;if(he<100||he>599){if(J)return;J=!0,B(new TypeError("Network request failed"));return}var fe={status:he,statusText:Y.statusText,headers:I(Y),url:j()},pe="response"in Y?Y.response:Y.responseText;J||(J=!0,F(new x(pe,fe)))}}Y.onreadystatechange=ae,Y.onload=ae,Y.onerror=function(){J||(J=!0,B(new TypeError("Network request failed")))},Y.open(X.method,X.url,!0);try{X.credentials==="include"&&("withCredentials"in Y?Y.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(he){console&&console.warn&&console.warn("set withCredentials error:"+he)}"responseType"in Y&&g.blob&&(Y.responseType="blob"),X.headers.forEach(function(he,fe){Y.setRequestHeader(fe,he)}),Y.send(typeof X._bodyInit>"u"?null:X._bodyInit)})},e.fetch.polyfill=!0,n.exports&&(n.exports=e.fetch)})(typeof self<"u"?self:Bi)})(eu);var bs={exports:{}};(function(n,e){(function(t,i){i(e,n)})(Bi,function(t,i){var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function s(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function o(g){try{delete window[g]}catch{window[g]=void 0}}function l(g){var p=document.getElementById(g);p&&document.getElementsByTagName("head")[0].removeChild(p)}function u(g){var p=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],y=g,w=p.timeout||r.timeout,_=p.jsonpCallback||r.jsonpCallback,E=void 0;return new Promise(function(I,x){var T=p.jsonpCallbackFunction||s(),S=_+"_"+T;window[T]=function(F){I({ok:!0,json:function(){return Promise.resolve(F)}}),E&&clearTimeout(E),l(S),o(T)},y+=y.indexOf("?")===-1?"?":"&";var b=document.createElement("script");b.setAttribute("src",""+y+_+"="+T),p.charset&&b.setAttribute("charset",p.charset),b.id=S,document.getElementsByTagName("head")[0].appendChild(b),E=setTimeout(function(){x(new Error("JSONP request to "+g+" timed out")),o(T),l(S),window[T]=function(){o(T)}},w),b.onerror=function(){x(new Error("JSONP request to "+g+" failed")),o(T),l(S),E&&clearTimeout(E)}})}i.exports=u})})(bs,bs.exports);const la=bs.exports;let Ts=window.fetch;var tu=function(n){Ts=n},In={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(n){var e=this;for(var t in n){e.queryKeys.push(t),typeof n[t]!="string"&&(n[t]=W.toJSON(n[t]));var i=encodeURIComponent(n[t]);e.queryValues.push(i)}},issue:function(n){for(var e=this,t=e.getUid(),i=n.url,r=[],s=new Promise(function(_){e.supermap_callbacks[t]=function(E){delete e.supermap_callbacks[t],_(E)}}),o=i,l=0,u=e.queryKeys?e.queryKeys.length:0,g=0;g<u;g++)if(o.length+e.queryKeys[g].length+2>=e.limitLength){if(l==0)return!1;r.push(o),o=i,l=0,g--}else if(o.length+e.queryKeys[g].length+2+e.queryValues[g].length>e.limitLength)for(var p=e.queryValues[g];p.length>0;){var y=e.limitLength-o.length-e.queryKeys[g].length-2;o.indexOf("?")>-1?o+="&":o+="?";var w=p.substring(0,y);w.substring(y-1,y)==="%"?(y-=1,w=p.substring(0,y)):w.substring(y-2,y-1)==="%"&&(y-=2,w=p.substring(0,y)),o+=e.queryKeys[g]+"="+w,p=p.substring(y),w.length>0&&(r.push(o),o=i,l=0)}else l++,o.indexOf("?")>-1?o+="&":o+="?",o+=e.queryKeys[g]+"="+e.queryValues[g];return r.push(o),e.send(r,"RequestJSONPPromise.supermap_callbacks["+t+"]",n&&n.proxy),s},getUid:function(){var n=new Date().getTime(),e=Math.floor(Math.random()*1e17);return n*1e3+e},send:function(n,e,t){var i=n.length;if(i>0)for(var r=new Date().getTime(),s=0;s<i;s++){var o=n[s];o.indexOf("?")>-1?o+="&":o+="?",o+="sectionCount="+i,o+="&sectionIndex="+s,o+="&jsonpUserID="+r,t&&(o=decodeURIComponent(o),o=t+encodeURIComponent(o)),la(o,{jsonpCallbackFunction:e,timeout:3e4})}},GET:function(n){var e=this;return e.queryKeys.length=0,e.queryValues.length=0,e.addQueryStrings(n.params),e.issue(n)},POST:function(n){var e=this;return e.queryKeys.length=0,e.queryValues.length=0,e.addQueryStrings({requestEntity:n.data}),e.issue(n)},PUT:function(n){var e=this;return e.queryKeys.length=0,e.queryValues.length=0,e.addQueryStrings({requestEntity:n.data}),e.issue(n)},DELETE:function(n){var e=this;return e.queryKeys.length=0,e.queryValues.length=0,e.addQueryStrings({requestEntity:n.data}),e.issue(n)}},Ps,ha,iu=function(n){Ps=n},ua=function(){return Ps!=null?Ps:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest},nu=function(n){return ha=n},As=function(){return ha||45e3},Nt={commit:function(n,e,t,i){switch(n=n&&n.toUpperCase(),n){case"GET":return this.get(e,t,i);case"POST":return this.post(e,t,i);case"PUT":return this.put(e,t,i);case"DELETE":return this.delete(e,t,i);default:return this.get(e,t,i)}},supportDirectRequest:function(n,e){return W.isInTheSameDomain(n)?!0:e.crossOrigin!=null?e.crossOrigin:ua()||e.proxy},get:function(n,e,t){t=t||{};var i="GET";if(n=W.urlAppend(n,this._getParameterString(e||{})),n=this._processUrl(n,t),!this.supportDirectRequest(n,t)){n=n.replace(".json",".jsonp");var r={url:n,data:e};return In.GET(r)}return this.urlIsLong(n)?this._postSimulatie(i,n.substring(0,n.indexOf("?")),W.getParameters(n),t):this._fetch(n,e,t,i)},delete:function(n,e,t){t=t||{};var i="DELETE";if(n=W.urlAppend(n,this._getParameterString(e||{})),n=this._processUrl(n,t),!this.supportDirectRequest(n,t)){n=n.replace(".json",".jsonp");var r={url:n+="&_method=DELETE",data:e};return In.DELETE(r)}return this.urlIsLong(n)?this._postSimulatie(i,n.substring(0,n.indexOf("?")),W.getParameters(n),t):this._fetch(n,e,t,i)},post:function(n,e,t){if(t=t||{},!this.supportDirectRequest(n,t)){n=n.replace(".json",".jsonp");var i={url:n+="&_method=POST",data:e};return In.POST(i)}return this._fetch(this._processUrl(n,t),e,t,"POST")},put:function(n,e,t){if(t=t||{},n=this._processUrl(n,t),!this.supportDirectRequest(n,t)){n=n.replace(".json",".jsonp");var i={url:n+="&_method=PUT",data:e};return In.PUT(i)}return this._fetch(n,e,t,"PUT")},urlIsLong:function(n){for(var e=0,t=null,i=0,r=n.length;i<r;i++)t=n.charCodeAt(i),t<127?e++:128<=t&&t<=2047?e+=2:2048<=t&&t<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(n,e,t,i){var r=e.indexOf("?")>-1?"&":"?";return e+=r+"_method="+n,typeof t!="string"&&(t=JSON.stringify(t)),this.post(e,t,i)},_processUrl:function(n,e){if(this._isMVTRequest(n))return n;if(n.indexOf(".json")===-1&&!e.withoutFormatSuffix)if(n.indexOf("?")<0)n+=".json";else{var t=n.split("?");t.length===2&&(n=t[0]+".json?"+t[1])}return e&&e.proxy&&(typeof e.proxy=="function"?n=e.proxy(n):(n=decodeURIComponent(n),n=e.proxy+encodeURIComponent(n))),n},_fetch:function(n,e,t,i){return t=t||{},t.headers=t.headers||{},!t.headers["Content-Type"]&&!FormData.prototype.isPrototypeOf(e)&&(t.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),t.timeout?this._timeout(t.timeout,Ts(n,{method:i,headers:t.headers,body:i==="PUT"||i==="POST"?e:void 0,credentials:this._getWithCredentials(t),mode:"cors",timeout:As()}).then(function(r){return r})):Ts(n,{method:i,body:i==="PUT"||i==="POST"?e:void 0,headers:t.headers,credentials:this._getWithCredentials(t),mode:"cors",timeout:As()}).then(function(r){return r})},_getWithCredentials:function(n){return n.withCredentials===!0?"include":n.withCredentials===!1?"omit":"same-origin"},_fetchJsonp:function(n,e){return e=e||{},la(n,{method:"GET",timeout:e.timeout}).then(function(t){return t})},_timeout:function(n,e){return new Promise(function(t,i){setTimeout(function(){i(new Error("timeout"))},n),e.then(t,i)})},_getParameterString:function(n){var e=[];for(var t in n){var i=n[t];if(i!=null&&typeof i!="function"){var r;Array.isArray(i)||i.toString()==="[object Object]"?r=encodeURIComponent(JSON.stringify(i)):r=encodeURIComponent(i),e.push(encodeURIComponent(t)+"="+r)}}return e.join("&")},_isMVTRequest:function(n){return n.indexOf(".mvt")>-1||n.indexOf(".pbf")>-1}};class Ls{constructor(e,t){this.value=e||"",this.name=t||"token",this.CLASS_NAME="SuperMap.Credential"}getUrlParameters(){return this.name+"="+this.value}getValue(){return this.value}destroy(){this.value=null,this.name=null}}Ls.CREDENTIAL=null;class Lt{static generateToken(e,t){var i=this.servers[e];if(!!i)return Nt.post(i.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(r){return r.text()})}static registerServers(e){this.servers=this.servers||{},W.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];this.servers[i.server]=i}}static registerToken(e,t){if(this.tokens=this.tokens||{},!(!e||!t)){var i=this._getTokenStorageKey(e);this.tokens[i]=t}}static registerKey(e,t){if(this.keys=this.keys||{},!(!e||e.length<1||!t)){e=W.isArray(e)?e:[e];for(var i=0;i<e.length;i++){var r=this._getUrlRestString(e[0])||e[0];this.keys[r]=t}}}static getServerInfo(e){return this.servers=this.servers||{},this.servers[e]}static getToken(e){if(!!e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}}static getKey(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]}static loginiServer(e,t,i,r){e=W.urlPathAppend(e,"services/security/login");var s={username:t&&t.toString(),password:i&&i.toString(),rememberme:r};s=JSON.stringify(s);var o={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};return Nt.post(e,s,o).then(function(l){return l.json()})}static logoutiServer(e){e=W.urlPathAppend(e,"services/security/logout");var t={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0};return Nt.get(e,"",t).then(function(){return!0}).catch(function(){return!1})}static loginOnline(e,t){var i=Lt.SSO+"/login?service="+e;this._open(i,t)}static loginiPortal(e,t,i){e=W.urlPathAppend(e,"web/login");var r={username:t&&t.toString(),password:i&&i.toString()};r=JSON.stringify(r);var s={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0};return Nt.post(e,r,s).then(function(o){return o.json()})}static logoutiPortal(e){e=W.urlPathAppend(e,"services/security/logout");var t={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0};return Nt.get(e,"",t).then(function(){return!0}).catch(function(){return!1})}static loginManager(e,t,i){if(!W.isInTheSameDomain(e)){var r=i?i.isNewTab:!0;this._open(e,r);return}var s=W.urlPathAppend(e,"icloud/security/tokens"),o=t||{},l={username:o.userName&&o.userName.toString(),password:o.password&&o.password.toString()};l=JSON.stringify(l);var u={headers:{Accept:"*/*","Content-Type":"application/json"}},g=this;return Nt.post(s,l,u).then(function(p){p.text().then(function(y){return g.imanagerToken=y,y})})}static destroyAllCredentials(){this.keys=null,this.tokens=null,this.servers=null}static destroyToken(e){if(!!e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}}static destroyKey(e){if(!!e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}}static appendCredential(e){var t=e,i=this.getToken(e),r=i?new Ls(i,"token"):null;return r||(i=this.getKey(e),r=i?new Ls(i,"key"):null),r&&(t=W.urlAppend(t,r.getUrlParameters())),t}static _open(e,t){t=t!=null?t:!0;var i=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,r=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,s="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+r+", left="+i+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",s)}static _getTokenStorageKey(e){var t=/(.*?):\/\/([^\/]+)/i,i=e.match(t);return i?i[0]:e}static _getUrlRestString(e){if(!e)return e;var t=/(http|https):\/\/(.*\/rest)/i,i=e.match(t);return i?i[0]:e}}Lt.INNER_WINDOW_WIDTH=600,Lt.INNER_WINDOW_HEIGHT=600,Lt.SSO="https://sso.supermap.com",Lt.ONLINE="https://www.supermapol.com";var Ms={GEOJSON:"GEOJSON",ISERVER:"ISERVER"},st={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},ca={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},ei={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},cr={ADD:"add",UPDATE:"update",DELETE:"delete"};class Rs{constructor(e,t){this.w=e?parseFloat(e):0,this.h=e?parseFloat(t):0,this.CLASS_NAME="SuperMap.Size"}toString(){return"w="+this.w+",h="+this.h}clone(){return new Rs(this.w,this.h)}equals(e){var t=!1;return e!=null&&(t=this.w===e.w&&this.h===e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t}destroy(){this.w=null,this.h=null}}class zi{constructor(e,t,i){this.x=e?parseFloat(e):0,this.y=t?parseFloat(t):0,this.mode=i,this.CLASS_NAME="SuperMap.Pixel"}toString(){return"x="+this.x+",y="+this.y}clone(){return new zi(this.x,this.y,this.mode)}equals(e){var t=!1;return e!=null&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}add(e,t){if(e==null||t==null)throw new TypeError("Pixel.add cannot receive null values");return new zi(this.x+e,this.y+t)}offset(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}destroy(){this.x=null,this.y=null,this.mode=null}}zi.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};class Ui{constructor(e,t){W.isArray(e)&&(t=e[1],e=e[0]),this.lon=e?W.toFloat(e):0,this.lat=t?W.toFloat(t):0,this.CLASS_NAME="SuperMap.LonLat"}toString(){return"lon="+this.lon+",lat="+this.lat}toShortString(){return this.lon+","+this.lat}clone(){return new Ui(this.lon,this.lat)}add(e,t){if(e==null||t==null)throw new TypeError("LonLat.add cannot receive null values");return new Ui(this.lon+W.toFloat(e),this.lat+W.toFloat(t))}equals(e){var t=!1;return e!=null&&(t=this.lon===e.lon&&this.lat===e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t}wrapDateLine(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t}destroy(){this.lon=null,this.lat=null}static fromString(e){var t=e.split(",");return new Ui(t[0],t[1])}static fromArray(e){var t=W.isArray(e),i=t&&e[0],r=t&&e[1];return new Ui(i,r)}}class ot{constructor(e,t,i,r){W.isArray(e)&&(r=e[3],i=e[2],t=e[1],e=e[0]),this.left=e!=null?W.toFloat(e):this.left,this.bottom=t!=null?W.toFloat(t):this.bottom,this.right=i!=null?W.toFloat(i):this.right,this.top=r!=null?W.toFloat(r):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}clone(){return new ot(this.left,this.bottom,this.right,this.top)}equals(e){var t=!1;return e!=null&&(t=this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom),t}toString(){return[this.left,this.bottom,this.right,this.top].join(",")}toArray(e){return e===!0?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}toBBOX(e,t){e==null&&(e=6);var i=Math.pow(10,e),r=Math.round(this.left*i)/i,s=Math.round(this.bottom*i)/i,o=Math.round(this.right*i)/i,l=Math.round(this.top*i)/i;return t===!0?s+","+r+","+l+","+o:r+","+s+","+o+","+l}getWidth(){return this.right-this.left}getHeight(){return this.top-this.bottom}getSize(){return new Rs(this.getWidth(),this.getHeight())}getCenterPixel(){return new zi((this.left+this.right)/2,(this.bottom+this.top)/2)}getCenterLonLat(){return this.centerLonLat||(this.centerLonLat=new Ui((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}scale(e,t){e=e||1,t==null&&(t=this.getCenterLonLat());var i,r;t.CLASS_NAME==="SuperMap.LonLat"?(i=t.lon,r=t.lat):(i=t.x,r=t.y);var s=(this.left-i)*e+i,o=(this.bottom-r)*e+r,l=(this.right-i)*e+i,u=(this.top-r)*e+r;return new ot(s,o,l,u)}add(e,t){if(e==null||t==null)throw new TypeError("Bounds.add cannot receive null values");return new ot(this.left+e,this.bottom+t,this.right+e,this.top+t)}extend(e){var t=null;if(e){switch(e.CLASS_NAME){case"SuperMap.LonLat":t=new ot(e.lon,e.lat,e.lon,e.lat);break;case"SuperMap.Geometry.Point":t=new ot(e.x,e.y,e.x,e.y);break;case"SuperMap.Bounds":t=e;break}t&&(this.centerLonLat=null,(this.left==null||t.left<this.left)&&(this.left=t.left),(this.bottom==null||t.bottom<this.bottom)&&(this.bottom=t.bottom),(this.right==null||t.right>this.right)&&(this.right=t.right),(this.top==null||t.top>this.top)&&(this.top=t.top))}}containsLonLat(e,t){typeof t=="boolean"&&(t={inclusive:t}),t=t||{};var i=this.contains(e.lon,e.lat,t.inclusive),r=t.worldBounds;if(r&&!i){var s=r.getWidth(),o=(r.left+r.right)/2,l=Math.round((e.lon-o)/s);i=this.containsLonLat({lon:e.lon-l*s,lat:e.lat},{inclusive:t.inclusive})}return i}containsPixel(e,t){return this.contains(e.x,e.y,t)}contains(e,t,i){if(i==null&&(i=!0),e==null||t==null)return!1;var r=!1;return i?r=e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:r=e>this.left&&e<this.right&&t>this.bottom&&t<this.top,r}intersectsBounds(e,t){if(typeof t=="boolean"&&(t={inclusive:t}),t=t||{},t.worldBounds){var i=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else i=this;t.inclusive==null&&(t.inclusive=!0);var r=!1,s=i.left===e.right||i.right===e.left||i.top===e.bottom||i.bottom===e.top;if(t.inclusive||!s){var o=e.bottom>=i.bottom&&e.bottom<=i.top||i.bottom>=e.bottom&&i.bottom<=e.top,l=e.top>=i.bottom&&e.top<=i.top||i.top>e.bottom&&i.top<e.top,u=e.left>=i.left&&e.left<=i.right||i.left>=e.left&&i.left<=e.right,g=e.right>=i.left&&e.right<=i.right||i.right>=e.left&&i.right<=e.right;r=(o||l)&&(u||g)}if(t.worldBounds&&!r){var p=t.worldBounds,y=p.getWidth(),w=!p.containsBounds(i),_=!p.containsBounds(e);w&&!_?(e=e.add(-y,0),r=i.intersectsBounds(e,{inclusive:t.inclusive})):_&&!w&&(i=i.add(-y,0),r=e.intersectsBounds(i,{inclusive:t.inclusive}))}return r}containsBounds(e,t,i){t==null&&(t=!1),i==null&&(i=!0);var r=this.contains(e.left,e.bottom,i),s=this.contains(e.right,e.bottom,i),o=this.contains(e.left,e.top,i),l=this.contains(e.right,e.top,i);return t?r||s||o||l:r&&s&&o&&l}determineQuadrant(e){var t="",i=this.getCenterLonLat();return t+=e.lat<i.lat?"b":"t",t+=e.lon<i.lon?"l":"r",t}wrapDateLine(e,t){t=t||{};var i=t.leftTolerance||0,r=t.rightTolerance||0,s=this.clone();if(e){for(var o=e.getWidth();s.left<e.left&&s.right-r<=e.left;)s=s.add(o,0);for(;s.left+i>=e.right&&s.right>e.right;)s=s.add(-o,0);var l=s.left+i;l<e.right&&l>e.left&&s.right-r>e.right&&(s=s.add(-o,0))}return s}toServerJSONObject(){var e={rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom};return e}destroy(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}static fromString(e,t){var i=e.split(",");return ot.fromArray(i,t)}static fromArray(e,t){return t===!0?new ot(e[1],e[0],e[3],e[2]):new ot(e[0],e[1],e[2],e[3])}static fromSize(e){return new ot(0,e.h,e.w,0)}static oppositeQuadrant(e){var t="";return t+=e.charAt(0)==="t"?"b":"t",t+=e.charAt(1)==="l"?"r":"l",t}}class Ce extends Cn{constructor(e,t,i,r){super(e,t,i,r),this.x=parseFloat(e),this.y=parseFloat(t),this.tag=r||r==0?parseFloat(r):null,this.type=i||"Point",this.CLASS_NAME="SuperMap.Geometry.Point",this.geometryType="Point"}clone(e){return e==null&&(e=new Ce(this.x,this.y)),W.applyDefaults(e,this),e}calculateBounds(){this.bounds=new ot(this.x,this.y,this.x,this.y)}equals(e){var t=!1;return e!=null&&(t=this.x===e.x&&this.y===e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}move(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()}toShortString(){return this.x+", "+this.y}destroy(){this.x=null,this.y=null,this.tag=null,super.destroy()}getVertices(){return[this]}}class Gt extends Cn{constructor(e){super(),this.components=[],this.componentTypes=null,e!=null&&this.addComponents(e),this.CLASS_NAME="SuperMap.Geometry.Collection",this.geometryType="Collection"}destroy(){this.components.length=0,this.components=null,super.destroy()}clone(){for(var e=new Gt,t=0,i=this.components.length;t<i;t++)e.addComponent(this.components[t].clone());return W.applyDefaults(e,this),e}getComponentsString(){for(var e=[],t=0,i=this.components.length;t<i;t++)e.push(this.components[t].toShortString());return e.join(",")}calculateBounds(){this.bounds=null;var e=new ot,t=this.components;if(t)for(var i=0,r=t.length;i<r;i++)e.extend(t[i].getBounds());e.left!=null&&e.bottom!=null&&e.right!=null&&e.top!=null&&this.setBounds(e)}addComponents(e){W.isArray(e)||(e=[e]);for(var t=0,i=e.length;t<i;t++)this.addComponent(e[t])}addComponent(e,t){var i=!1;if(e&&(this.componentTypes==null||W.indexOf(this.componentTypes,e.CLASS_NAME)>-1)){if(t!=null&&t<this.components.length){var r=this.components.slice(0,t),s=this.components.slice(t,this.components.length);r.push(e),this.components=r.concat(s)}else this.components.push(e);e.parent=this,this.clearBounds(),i=!0}return i}removeComponents(e){var t=!1;W.isArray(e)||(e=[e]);for(var i=e.length-1;i>=0;--i)t=this.removeComponent(e[i])||t;return t}removeComponent(e){return W.removeItem(this.components,e),this.clearBounds(),!0}getArea(){for(var e=0,t=0,i=this.components.length;t<i;t++)e+=this.components[t].getArea();return e}equals(e){var t=!0;if(!e||!e.CLASS_NAME||this.CLASS_NAME!==e.CLASS_NAME)t=!1;else if(!W.isArray(e.components)||e.components.length!==this.components.length)t=!1;else for(var i=0,r=this.components.length;i<r;++i)if(!this.components[i].equals(e.components[i])){t=!1;break}return t}getVertices(e){for(var t=[],i=0,r=this.components.length;i<r;++i)Array.prototype.push.apply(t,this.components[i].getVertices(e));return t}}class dr extends Gt{constructor(e){super(e),this.componentTypes=["SuperMap.Geometry.Point"],this.CLASS_NAME="SuperMap.Geometry.MultiPoint",this.geometryType="MultiPoint"}addPoint(e,t){this.addComponent(e,t)}removePoint(e){this.removeComponent(e)}}class ru extends dr{constructor(e){super(e),this.componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],this.CLASS_NAME="SuperMap.Geometry.Curve",this.geometryType="Curve"}}class Ue extends ru{constructor(e){super(e),this.CLASS_NAME="SuperMap.Geometry.LineString",this.geometryType="LineString"}removeComponent(e){var t=this.components&&this.components.length>2;return t&&super.removeComponent.apply(this,arguments),t}getSortedSegments(){for(var e=this.components.length-1,t=new Array(e),i,r,s=0;s<e;++s)i=this.components[s],r=this.components[s+1],i.x<r.x?t[s]={x1:i.x,y1:i.y,x2:r.x,y2:r.y}:t[s]={x1:r.x,y1:r.y,x2:i.x,y2:i.y};function o(l,u){return l.x1-u.x1}return t.sort(o)}getVertices(e){var t;return e===!0?t=[this.components[0],this.components[this.components.length-1]]:e===!1?t=this.components.slice(1,this.components.length-1):t=this.components.slice(),t}static calculateCircle(e){if(e.length<3)return e;var t={},i=e[0],r=e[1],s=e[2],o=0,l=0,u=!0,g=0,p=0,y=0,w=72,_=[],E=(s.y-i.y)/(s.x-i.x),I=s.y-E*s.x;if(s.x!=i.x&&s.y!=i.y&&r.y==E*r.x+I||s.x==i.x&&r.x==i.x||s.y==i.y&&r.y==i.y||s.x==i.x&&s.y==i.y||s.x==r.x&&s.y==r.y||i.x==r.x&&i.y==r.y)_.push(i),_.push(r),_.push(s);else{var x=(r.x*r.x+r.y*r.y-(i.x*i.x+i.y*i.y))*(2*(s.y-i.y))-(s.x*s.x+s.y*s.y-(i.x*i.x+i.y*i.y))*(2*(r.y-i.y)),T=2*(r.x-i.x)*(s.x*s.x+s.y*s.y-(i.x*i.x+i.y*i.y))-2*(s.x-i.x)*(r.x*r.x+r.y*r.y-(i.x*i.x+i.y*i.y)),S=4*((r.x-i.x)*(s.y-i.y)-(s.x-i.x)*(r.y-i.y));t.x=x/S,t.y=T/S,o=Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y));var b=(i.x-s.x)*(i.x-s.x)+(i.y-s.y)*(i.y-s.y),F=(2*o*o-b)/(2*o*o);F=F>=1?1:F,F=F<=-1?-1:F,y=Math.acos(F)*180/Math.PI,s.x==i.x?y=t.x>i.x&&r.x>i.x||t.x<i.x&&r.x<i.x?360-y:y:y=t.y>E*t.x+I&&r.y>E*r.x+I||t.y<E*t.x+I&&r.y<E*r.x+I?360-y:y,l=y/72,s.y!=i.y?s.x==i.x?s.y>i.y?r.x<i.x&&(u=!1):r.x>i.x&&(u=!1):s.x<i.x?r.y<E*r.x+I&&(u=!1):r.y>E*r.x+I&&(u=!1):s.x>i.x?r.y>i.y&&(u=!1):r.y<i.y&&(u=!1);var B=(i.y-t.y)/(i.x-t.x),X=B>=0?Math.atan(B)*180/Math.PI:Math.abs(Math.atan(B)*180/Math.PI)+90,Y=Math.abs(t.y);i.y==Y&&Y==s.y&&i.x<s.x&&(X=X+180);var j=i.y-t.y;_.push(i);for(var J=1;J<w;J++){g=l*J,p=X,u?j>=0?B>=0?p=p+g:p=180-(p-90)+g:B>0?p=p-180+g:p=90-p+g:j>=0?B>=0?p=p-g:p=180-(p-90)-g:B>=0?p=p-180-g:p=90-p-g,p=p*Math.PI/180;var ae=t.x+o*Math.cos(p),he=t.y+o*Math.sin(p);_.push(new Ce(ae,he))}_.push(s)}return _}static createLineEPS(e){var t=[],i=e.length;if(i<2)return e;for(var r=0;r<i;){var s=e[r].type;if(s=="LTypeArc"){var o=Ue.createLineArc(t,r,i,e);t=o[0],r=o[1]}else t.push(e[r]),r++}return t}static createLineArc(e,t,i,r){if(t==0){let l=Ue.addPointEPS(r,t,i,"LTypeArc");Array.prototype.push.apply(e,l[0]),t=l[1]+1}else if(t==i-1){var s=[r[t-1],r[t]],o=Ue.calculateCircle(s);Array.prototype.push.apply(e,o),t++}else{let l=Ue.addPointEPS(r,t,i,"LTypeArc");e.pop(),Array.prototype.push.apply(e,l[0]),t=l[1]+1}return[e,t]}static addPointEPS(e,t,i,r){var s=[],o=t+1;t==0?Array.prototype.push.apply(s,[e[t],e[t+1]]):t==i-1?Array.prototype.push.apply(s,[e[t-1],e[t]]):Array.prototype.push.apply(s,[e[t-1],e[t],e[t+1]]);var l;return r=="LTypeCurve"?l=Ue.calculatePointsFBZN(s):r=="LTypeArc"&&(l=Ue.calculateCircle(s)),[l,o]}}class Mt extends Ue{constructor(e){super(e),this.componentTypes=["SuperMap.Geometry.Point"],this.CLASS_NAME="SuperMap.Geometry.LinearRing",this.geometryType="LinearRing"}addComponent(e,t){var i=!1,r=this.components.pop();(t!=null||!e.equals(r))&&(i=super.addComponent.apply(this,arguments));var s=this.components[0];return super.addComponent.apply(this,[s]),i}removeComponent(e){var t=this.components&&this.components.length>3;if(t){this.components.pop(),super.removeComponent.apply(this,arguments);var i=this.components[0];super.addComponent.apply(this,[i])}return t}getArea(){var e=0;if(this.components&&this.components.length>2){for(var t=0,i=0,r=this.components.length;i<r-1;i++){var s=this.components[i],o=this.components[i+1];t+=(s.x+o.x)*(o.y-s.y)}e=-t/2}return e}getVertices(e){return e===!0?[]:this.components.slice(0,this.components.length-1)}}class fr extends Gt{constructor(e){super(e),this.componentTypes=["SuperMap.Geometry.LineString"],this.CLASS_NAME="SuperMap.Geometry.MultiLineString",this.geometryType="MultiLineString"}}class Bt extends Gt{constructor(e){super(e),this.componentTypes=["SuperMap.Geometry.LinearRing"],this.CLASS_NAME="SuperMap.Geometry.Polygon",this.geometryType="Polygon"}getArea(){var e=0;if(this.components&&this.components.length>0){e+=Math.abs(this.components[0].getArea());for(var t=1,i=this.components.length;t<i;t++)e-=Math.abs(this.components[t].getArea())}return e}}class Wi extends Gt{constructor(e){super(e),this.componentTypes=["SuperMap.Geometry.Polygon"],this.CLASS_NAME="SuperMap.Geometry.MultiPolygon",this.geometryType="MultiPolygon"}}class zt{constructor(e,t,i){this.red=!e&&e!=0?255:e,this.green=t||0,this.blue=i||0,this.CLASS_NAME="SuperMap.ServerColor"}destroy(){var e=this;e.red=null,e.green=null,e.blue=null}static fromJson(e){if(!!e){var t=new zt,i=255;e.red!==null&&(i=Number(e.red)),t.red=i;var r=0;e.green!==null&&(r=Number(e.green)),t.green=r;var s=0;return e.blue!==null&&(s=Number(e.blue)),t.blue=s,t}}}class gr{constructor(e){this.fillBackColor=new zt(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new zt(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new zt(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ServerStyle"}destroy(){var e=this;e.fillBackColor&&(e.fillBackColor.destroy(),e.fillBackColor=null),e.fillBackOpaque=null,e.fillForeColor&&(e.fillForeColor.destroy(),e.fillForeColor=null),e.fillGradientMode=null,e.fillGradientAngle=null,e.fillGradientOffsetRatioX=null,e.fillGradientOffsetRatioY=null,e.fillOpaqueRate=null,e.fillSymbolID=null,e.lineColor&&(e.lineColor.destroy(),e.lineColor=null),e.lineSymbolID=null,e.lineWidth=null,e.markerAngle=null,e.markerSize=null,e.markerSymbolID=null}toServerJSONObject(){var e={};return e=W.copyAttributes(e,this),e}static fromJson(e){if(!!e)return new gr({fillBackColor:zt.fromJson(e.fillBackColor),fillBackOpaque:e.fillBackOpaque,fillForeColor:zt.fromJson(e.fillForeColor),fillGradientMode:e.fillGradientMode,fillGradientAngle:e.fillGradientAngle,fillGradientOffsetRatioX:e.fillGradientOffsetRatioX,fillGradientOffsetRatioY:e.fillGradientOffsetRatioY,fillOpaqueRate:e.fillOpaqueRate,fillSymbolID:e.fillSymbolID,lineColor:zt.fromJson(e.lineColor),lineSymbolID:e.lineSymbolID,lineWidth:e.lineWidth,markerAngle:e.markerAngle,markerSize:e.markerSize,markerSymbolID:e.markerSymbolID})}}class pr extends Ce{constructor(e){super(e),this.measure=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.PointWithMeasure"}equals(e){var t=!1;if(e!=null){var i=this.x===e.x&&this.y===e.y&&this.measure===e.measure,r=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),s=isNaN(e.x)&&isNaN(e.y)&&isNaN(e.measure);t=i||r&&s}return t}toJson(){var e="{";return this.measure!=null&&this.measure!=null&&(e+='"measure":'+this.measure+","),e+='"x":'+this.x+",",e+='"y":'+this.y,e+="}",e}destroy(){var e=this;e.measure=null,e.x=null,e.y=null}static fromJson(e){if(!!e)return new pr({x:e.x,y:e.y,measure:e.measure})}}class vr extends Gt{constructor(e,t){super(e,t),this.id=null,this.center=null,this.style=null,this.length=null,this.maxM=null,this.minM=null,this.parts=null,this.points=null,this.type=null,this.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],t&&W.extend(this,t),this.CLASS_NAME="SuperMap.Route",this.geometryType="LINEM"}toJson(){var e="{";if(this.id!=null&&this.id!=null&&(e+='"id":'+this.id+","),this.center!=null&&this.center!=null&&(e+='"center":'+this.center+","),this.style!=null&&this.style!=null&&(e+='"style":'+this.style+","),this.length!=null&&this.length!=null&&(e+='"length":'+this.length+","),this.maxM!=null&&this.maxM!=null&&(e+='"maxM":'+this.maxM+","),this.minM!=null&&this.minM!=null&&(e+='"minM":'+this.minM+","),this.type!=null&&this.type!=null&&(e+='"type":"'+this.type+'",'),this.parts!=null&&this.parts!=null){e+='"parts":['+this.parts[0];for(var t=1;t<this.parts.length;t++)e+=","+this.parts[t];e+="],"}if(this.components!=null&&this.components.length>0){e+='"points":[';for(var i=0,r=this.components.length;i<r;i++)for(var s=0,o=this.components[i].components.length;s<o;s++)e+=this.components[i].components[s].toJson()+",";e=e.replace(/,$/g,""),e+="]"}return e=e.replace(/,$/g,""),e+="}",e}destroy(){var e=this;e.id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.type=null,e.parts=null,e.components.length=0,e.components=null,e.componentTypes=null}static fromJson(e){if(!!e){var t=e.parts||[],i=e.points||[],r=t.length,s=[];if(r>0)for(var o=0,l=0,u=[];o<r;o++){for(var g=0;g<t[o];g++)u.push(pr.fromJson(i[l+g]));l+=t[o],u[0].equals(u[t[o]-1])?s.push(new Mt(u)):s.push(new Ue(u)),u=[]}else return null;return new vr(s,{id:e.id,center:e.center,style:e.style,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type,parts:e.parts})}}}class ft{constructor(e){this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ServerGeometry"}destroy(){var e=this;e.id=null,e.style=null,e.parts=null,e.partTopo=null,e.points=null,e.type=null,e.prjCoordSys=null}toGeometry(){var e=this,t=e.type;switch(t.toUpperCase()){case st.POINT:return e.toGeoPoint();case st.LINE:return e.toGeoLine();case st.LINEM:return e.toGeoLinem();case st.REGION:return e.toGeoRegion();case st.POINTEPS:return e.toGeoPoint();case st.LINEEPS:return e.toGeoLineEPS();case st.REGIONEPS:return e.toGeoRegionEPS();case st.GEOCOMPOUND:return e.transformGeoCompound()}}toGeoPoint(){var e=this,t=e.parts||[],i=e.points||[],r=t.length;if(r>0){if(r===1)return new Ce(i[0].x,i[0].y);var s=[];for(let o=0;o<r;o++)s.push(new Ce(i[o].x,i[o].y));return new dr(s)}else return null}toGeoLine(){var e=this,t=e.parts||[],i=e.points||[],r=t.length;if(r>0)if(r===1){let s=[];for(let o=0;o<t[0];o++)s.push(new Ce(i[o].x,i[o].y));return s[0].equals(s[t[0]-1])?new Mt(s):new Ue(s)}else{let s=[];for(let o=0;o<r;o++){let l=[];for(let u=0;u<t[o];u++)l.push(new Ce(i[u].x,i[u].y));s.push(new Ue(l)),i.splice(0,t[o])}return new fr(s)}else return null}toGeoLineEPS(){var e=this,t=e.parts||[],i=e.points||[],r,s,o,l,u,g=t.length;if(g>0)if(g===1){for(r=0,o=[];r<t[0];r++)o.push(new Ce(i[r].x,i[r].y,i[r].type));return o[0].equals(o[t[0]-1])?(u=Ue.createLineEPS(o),new Mt(u)):(u=Ue.createLineEPS(o),new Ue(u))}else{for(r=0,l=[];r<g;r++){for(s=0,o=[];s<t[r];s++)o.push(new Ce(i[s].x,i[s].y));u=Ue.createLineEPS(o),l.push(new Ue(u)),i.splice(0,t[r])}return new fr(l)}else return null}toGeoLinem(){var e=this;return vr.fromJson(e)}toGeoRegion(){var e=this,t=e.parts||[],i=e.partTopo||[],r=e.points||[],s=t.length;if(s<=0)return null;var o=[],l=[];if(s==1){for(let x=0;x<r.length;x++)l.push(new Ce(r[x].x,r[x].y));return o.push(new Bt([new Mt(l)])),new Wi(o)}var u=[],g=[],p=[],y=[],w=[];for(let x=0,T=0;x<s;x++){for(let S=0;S<t[x];S++)l.push(new Ce(r[T+S].x,r[T+S].y));T+=t[x];var _=new Bt([new Mt(l)]);l=[],p.push(_),i.length===0&&y.push(_.getBounds()),w.push(1),g.push(_.getArea())}if(i.length===0){ft.bubbleSort(g,p,i,y);var E=[];for(let x=1;x<p.length;x++)for(let T=x-1;T>=0;T--)if(E[x]=-1,y[T].containsBounds(y[x])){w[x]=w[T]*-1,w[x]<0&&(E[x]=T);break}for(let x=0;x<p.length;x++)w[x]>0?o.push(p[x]):(o[E[x]].components=o[E[x]].components.concat(p[x].components),o.push(""))}else{o=new Array;for(let x=0;x<p.length;x++)if(i[x]&&i[x]==-1?u=u.concat(p[x].components):(u.length>0&&o.length>0&&(o[o.length-1].components=o[o.length-1].components.concat(u),u=[]),o.push(p[x])),x==s-1){var I=o.length;if(I)o[I-1].components=o[I-1].components.concat(u);else for(let T=0,S=u.length;T<S;T++)o.push(new Bt(u))}}return new Wi(o)}toGeoRegionEPS(){var e=this,t=e.parts||[],i=e.partTopo||[],r=e.points||[],s=t.length;if(s<=0)return null;var o=[],l=[],u;if(s==1){for(var g=0;g<r.length;g++)l.push(new Ce(r[g].x,r[g].y));return u=Ue.createLineEPS(l),o.push(new Bt([new Mt(u)])),new Wi(o)}var p=[],y=[],w=[],_=[],E=[];for(let S=0,b=0;S<s;S++){for(let F=0;F<t[S];F++)l.push(new Ce(r[b+F].x,r[b+F].y));b+=t[S],u=Ue.createLineEPS(l);var I=new Bt([new Mt(u)]);l=[],w.push(I),i.length===0&&_.push(I.getBounds()),E.push(1),y.push(I.getArea())}if(i.length===0){ft.bubbleSort(y,w,i,_);var x=[];for(let S=1;S<w.length;S++)for(let b=S-1;b>=0;b--)if(x[S]=-1,_[b].containsBounds(_[S])){E[S]=E[b]*-1,E[S]<0&&(x[S]=b);break}for(let S=0;S<w.length;S++)E[S]>0?o.push(w[S]):(o[x[S]].components=o[x[S]].components.concat(w[S].components),o.push(""))}else{o=new Array;for(let S=0;S<w.length;S++)if(i[S]&&i[S]==-1?p=p.concat(w[S].components):(p.length>0&&o.length>0&&(o[o.length-1].components=o[o.length-1].components.concat(p),p=[]),o.push(w[S])),S==s-1){var T=o.length;if(T)o[T-1].components=o[T-1].components.concat(p);else for(let b=0,F=p.length;b<F;b++)o.push(new Bt(p))}}return new Wi(o)}transformGeoCompound(){const e=this,t=e.geoParts||[],i=t.length;if(i<=0)return null;const r=[];for(let s=0;s<i;s++){const o=t[s];r.push(new ft(o).toGeometry())}return new Gt(r)}static fromJson(e){if(!!e)return new ft({id:e.id,style:gr.fromJson(e.style),parts:e.parts,partTopo:e.partTopo,points:e.points,center:e.center,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type})}static fromGeometry(e){if(!!e){var t=0,i=[],r=[],s=null,o=e.components,l=e.CLASS_NAME,u={epsgCode:e.SRID};if(isNaN(e.id)||(t=e.id),l!="SuperMap.Geometry.LinearRing"&&l!="SuperMap.Geometry.LineString"&&(e instanceof dr||e instanceof fr)){let g=o.length;for(let p=0;p<g;p++){const y=o[p].getVertices();let w=y.length;i.push(w);for(let _=0;_<w;_++)r.push(new Ce(y[_].x,y[_].y))}s=l=="SuperMap.Geometry.MultiPoint"?st.POINT:st.LINE}else if(e instanceof Wi){let g=o.length;for(let p=0;p<g;p++){let y=o[p],w=y.components,_=w.length;for(let E=0;E<_;E++){const I=w[E].getVertices(),x=I.length+1;i.push(x);for(let T=0;T<x-1;T++)r.push(new Ce(I[T].x,I[T].y));r.push(new Ce(I[0].x,I[0].y))}}s=st.REGION}else if(e instanceof Bt){let g=o.length;for(let p=0;p<g;p++){const y=o[p].getVertices();let w=y.length+1;i.push(w);for(let _=0;_<w-1;_++)r.push(new Ce(y[_].x,y[_].y));r.push(new Ce(y[0].x,y[0].y))}s=st.REGION}else{const g=e.getVertices();let p=g.length;for(let y=0;y<p;y++)r.push(new Ce(g[y].x,g[y].y));e instanceof Mt&&(r.push(new Ce(g[0].x,g[0].y)),p++),i.push(p),s=e instanceof Ce?st.POINT:st.LINE}return new ft({id:t,style:null,parts:i,points:r,type:s,prjCoordSys:u})}}static IsClockWise(e){var t=e.length;if(t<3)return 0;var i=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var r=1;r<t;r++)i+=e[r].y*(e[r-1].x-e[r+1].x);return i*.5}static bubbleSort(e,t,i,r){for(var s=0;s<e.length;s++)for(var o=0;o<e.length;o++)if(e[s]>e[o]){var l=e[o];e[o]=e[s],e[s]=l;var u=t[o];if(t[o]=t[s],t[s]=u,i&&i.length>0){var g=i[o];i[o]=i[s],i[s]=g}if(r&&r.length>0){var p=r[o];r[o]=r[s],r[s]=p}}}}class su{constructor(e,t,i){this.CLASS_NAME="SuperMap.Feature",this.layer=e,this.id=W.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=t,this.data=i!=null?i:{}}destroy(){this.id=null,this.lonlat=null,this.data=null}}const Et={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"};class bn extends su{constructor(e,t,i){super(null,null,t),this.fid=null,this.geometry=e||null,this.attributes={},t&&(this.attributes=W.extend(this.attributes,t)),this.bounds=null,this.state=null,this.style=i||null,this.url=null,this.lonlat=null,this.CLASS_NAME="SuperMap.Feature.Vector",bn.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}}}destroy(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,super.destroy()}clone(){return new bn(this.geometry?this.geometry.clone():null,this.attributes,this.style)}toState(e){if(e===Et.UPDATE)switch(this.state){case Et.UNKNOWN:case Et.DELETE:this.state=e;break}else if(e===Et.INSERT)switch(this.state){case Et.UNKNOWN:break;default:this.state=e;break}else if(e===Et.DELETE)switch(this.state){case Et.INSERT:break;case Et.DELETE:break;case Et.UNKNOWN:case Et.UPDATE:this.state=e;break}else e===Et.UNKNOWN&&(this.state=e)}}class da{constructor(e){this.data=null,this.keepData=!1,W.extend(this,e),this.options=e,this.CLASS_NAME="SuperMap.Format"}destroy(){}read(e){}write(e){}}class Fs extends da{constructor(e){super(e),this.indent="    ",this.space=" ",this.newline=`
`,this.level=0,this.pretty=!1,this.nativeJSON=function(){return!!(window.JSON&&typeof JSON.parse=="function"&&typeof JSON.stringify=="function")}(),this.CLASS_NAME="SuperMap.Format.JSON",this.serialize={object:function(t){if(t==null)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var i=["{"];this.level+=1;var r,s,o,l=!1;for(r in t)t.hasOwnProperty(r)&&(s=this.write.apply(this,[r,this.pretty]),o=this.write.apply(this,[t[r],this.pretty]),s!=null&&o!=null&&(l&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),s,":",this.writeSpace(),o),l=!0));return this.level-=1,i.push(this.writeNewline(),this.writeIndent(),"}"),i.join("")},array:function(t){var i,r=["["];this.level+=1;for(var s=0,o=t.length;s<o;++s)i=this.write.apply(this,[t[s],this.pretty]),i!=null&&(s>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),i));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(t){var i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(r,s){var o=i[s];return o||(o=s.charCodeAt(),"\\u00"+Math.floor(o/16).toString(16)+(o%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function i(r){return r<10?"0"+r:r}return'"'+t.getFullYear()+"-"+i(t.getMonth()+1)+"-"+i(t.getDate())+"T"+i(t.getHours())+":"+i(t.getMinutes())+":"+i(t.getSeconds())+'"'}}}read(e,t){var i;if(this.nativeJSON)try{i=JSON.parse(e,t)}catch{return{data:e}}return this.keepData&&(this.data=i),i}write(e,t){this.pretty=!!t;var i=null,r=typeof e;if(this.serialize[r])try{i=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[r].apply(this,[e])}catch{}return i}writeIndent(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")}writeNewline(){return this.pretty?this.newline:""}writeSpace(){return this.pretty?this.space:""}}class mr extends Fs{constructor(e){super(e),this.ignoreExtraDims=!0,this.CLASS_NAME="SuperMap.Format.GeoJSON",this.parseCoords={point:function(t){if(this.ignoreExtraDims===!1&&t.length!=2)throw"Only 2D points are supported: "+t;return new Ce(t[0],t[1])},multipoint:function(t){for(var i=[],r=null,s=0,o=t.length;s<o;++s){try{r=this.parseCoords.point.apply(this,[t[s]])}catch(l){throw l}i.push(r)}return new dr(i)},linestring:function(t){for(var i=[],r=null,s=0,o=t.length;s<o;++s){try{r=this.parseCoords.point.apply(this,[t[s]])}catch(l){throw l}i.push(r)}return new Ue(i)},multilinestring:function(t){for(var i=[],r=null,s=0,o=t.length;s<o;++s){try{r=this.parseCoords.linestring.apply(this,[t[s]])}catch(l){throw l}i.push(r)}return new fr(i)},polygon:function(t){for(var i=[],r,s,o=0,l=t.length;o<l;++o){try{s=this.parseCoords.linestring.apply(this,[t[o]])}catch(u){throw u}r=new Mt(s.components),i.push(r)}return new Bt(i)},multipolygon:function(t){for(var i=[],r=null,s=0,o=t.length;s<o;++s){try{r=this.parseCoords.polygon.apply(this,[t[s]])}catch(l){throw l}i.push(r)}return new Wi(i)},box:function(t){if(t.length!=2)throw"GeoJSON box coordinates must have 2 elements";return new Bt([new Mt([new Ce(t[0][0],t[0][1]),new Ce(t[1][0],t[0][1]),new Ce(t[1][0],t[1][1]),new Ce(t[0][0],t[1][1]),new Ce(t[0][0],t[0][1])])])}},this.extract={feature:function(t){var i=this.extract.geometry.apply(this,[t.geometry]),r={type:"Feature",properties:this.createAttributes(t),geometry:i};return t.geometry&&t.geometry.type==="TEXT"&&(r.properties.texts=t.geometry.texts,r.properties.textStyle=t.geometry.textStyle),t.fid&&(r.id=t.fid),t.ID&&(r.id=t.ID),r},geometry:function(t){if(t==null)return null;!t.parts&&t.points&&(t.parts=[t.points.length]);var i=t.hasOwnProperty("geometryType")?t:new ft(t).toGeometry()||t,r=i.geometryType||i.type,s;r==="LinearRing"&&(r="LineString"),r==="LINEM"&&(r="MultiLineString"),s=this.extract[r.toLowerCase()].apply(this,[i]),r=r==="TEXT"?"Point":r;var o;return r==="Collection"?o={type:"GeometryCollection",geometries:s}:o={type:r,coordinates:s},o},point:function(t){var i=[t.x,t.y];for(var r in t)r!=="x"&&r!=="y"&&t[r]!==null&&!isNaN(t[r])&&i.push(t[r]);return i},text:function(t){return[t.points[0].x,t.points[0].y]},multipoint:function(t){for(var i=[],r=0,s=t.components.length;r<s;++r)i.push(this.extract.point.apply(this,[t.components[r]]));return i},linestring:function(t){for(var i=[],r=0,s=t.components.length;r<s;++r)i.push(this.extract.point.apply(this,[t.components[r]]));return i},multilinestring:function(t){for(var i=[],r=0,s=t.components.length;r<s;++r)i.push(this.extract.linestring.apply(this,[t.components[r]]));return i},polygon:function(t){for(var i=[],r=0,s=t.components.length;r<s;++r)i.push(this.extract.linestring.apply(this,[t.components[r]]));return i},multipolygon:function(t){for(var i=[],r=0,s=t.components.length;r<s;++r)i.push(this.extract.polygon.apply(this,[t.components[r]]));return i},collection:function(t){for(var i=t.components.length,r=new Array(i),s=0;s<i;++s)r[s]=this.extract.geometry.apply(this,[t.components[s]]);return r}}}read(e,t,i){t=t||"FeatureCollection";var r=null,s=null;if(typeof e=="string"?s=super.read(e,i):s=e,s){if(typeof s.type=="string"){if(this.isValidType(s,t))switch(t){case"Geometry":try{r=this.parseGeometry(s)}catch{}break;case"Feature":try{r=this.parseFeature(s),r.type="Feature"}catch{}break;case"FeatureCollection":switch(r=[],s.type){case"Feature":try{r.push(this.parseFeature(s))}catch{r=null}break;case"FeatureCollection":for(var o=0,l=s.features.length;o<l;++o)try{r.push(this.parseFeature(s.features[o]))}catch{r=null}break;default:try{var u=this.parseGeometry(s);r.push(new bn(u))}catch{r=null}}break}}}return r}write(e,t){return super.write(this.toGeoJSON(e),t)}fromGeoJSON(e,t,i){let r=this.read(e,t,i);return W.isArray(r)?r.map(s=>this._toiSevrerFeature(s)):this._toiSevrerFeature(r)}toGeoJSON(e){var t={type:null};if(W.isArray(e)){t.type="FeatureCollection";var i=e.length;t.features=new Array(i);for(var r=0;r<i;++r){var s=e[r];if(o(s)){let l={};l.geometry=s,t.features[r]=this.extract.feature.apply(this,[l])}else t.features[r]=this.extract.feature.apply(this,[s])}}else if(o(e)){let l={};l.geometry=e,t=this.extract.feature.apply(this,[l])}else t=this.extract.feature.apply(this,[e]);function o(l){return l.hasOwnProperty("parts")&&l.hasOwnProperty("points")||l.hasOwnProperty("geoParts")}return t}isValidType(e,t){var i=!1;switch(t){case"Geometry":W.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)==-1||(i=!0);break;case"FeatureCollection":i=!0;break;default:e.type==t&&(i=!0)}return i}parseFeature(e){var t,i,r,s;r=e.properties?e.properties:{},s=e.geometry&&e.geometry.bbox||e.bbox;try{i=this.parseGeometry(e.geometry)}catch(o){throw o}return t=new bn(i,r),s&&(t.bounds=ot.fromArray(s)),e.id&&(t.geometry.id=e.id,t.fid=e.id),t}parseGeometry(e){if(e==null)return null;var t;if(e.type=="GeometryCollection"){if(!W.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var i=e.geometries.length,r=new Array(i),s=0;s<i;++s)r[s]=this.parseGeometry.apply(this,[e.geometries[s]]);t=new Gt(r)}else{if(!W.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(o){throw o}}return t}createCRSObject(e){var t=e.layer.projection.toString(),i={};if(t.match(/epsg:/i)){var r=parseInt(t.substring(t.indexOf(":")+1));r==4326?i={type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:i={type:"name",properties:{name:"EPSG:"+r}}}return i}_toiSevrerFeature(e){const t=e.attributes,i=[],r=[];for(var s in t)i.push(s),r.push(t[s]);const o={fieldNames:i,fieldValues:r,geometry:ft.fromGeometry(e.geometry)};return o.geometry.id=e.fid,o}createAttributes(e){if(!e)return null;var t={};s(e,t);var i=["fieldNames","fieldValues","geometry","stringID","ID"];for(var r in e)i.indexOf(r)>-1||(t[r]=e[r]);function s(o,l){if(!!(o.hasOwnProperty("fieldNames")&&o.hasOwnProperty("fieldValues"))){var u=o.fieldNames,g=o.fieldValues;for(var p in u)l[u[p]]=g[p]}}return t}}var Tn=function(n){var e=6378137,t;if(n===ei.METER)t=1;else if(n===ei.DEGREE)t=Math.PI*2*e/360;else if(n===ei.KILOMETER)t=.001;else if(n===ei.INCH)t=1/.025399999918;else if(n===ei.FOOT)t=.3048;else return t;return t};function ou(n,e=!0,t=!0,i=[-180,180]){var r=i[1],s=i[0],o=r-s;if(n===r&&e||n===s&&t)return n;var l=((n-s)%o+o)%o;return l===0&&e?r:((n-s)%o+o)%o+s}function au(n){const e=parseInt(n);let t=parseInt((n-e)*60),i=parseInt(((n-e)*60-t)*60);return t=parseInt(t/10)===0?`0${t}`:t,i=parseInt(i/10)===0?`0${i}`:i,`${e}\xB0${t}'${i}`}function fa(n,e,t,i,r=22){var s=[];if(n&&n.length>0)for(let o=0;o<n.length;o++)s.push(pa(n[o],t,i));else{const o=Math.abs(e.left-e.right)/256;for(let l=0;l<r;l++)s.push(o/Math.pow(2,l))}return s.sort(function(o,l){return l-o})}function ga(n,e){let t=0,i;for(let r=0;r<e.length;r++)r===0&&(i=Math.abs(n-e[r])),i>Math.abs(n-e[r])&&(i=Math.abs(n-e[r]),t=r);return t}function pa(n,e,t){const i=39.37007874015748,r=Tn(t);return 1/(n*e*i*r)}function se(){throw new Error("Unimplemented abstract method.")}let lu=0;function Me(n){return n.ol_uid||(n.ol_uid=String(++lu))}const Os="7.1.0",hu=Object.freeze(Object.defineProperty({__proto__:null,abstract:se,getUid:Me,VERSION:Os},Symbol.toStringTag,{value:"Module"}));class uu{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const yi=uu,va={PROPERTYCHANGE:"propertychange"};class cu{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const du=cu;function fu(n,e,t){let i,r;t=t||Vi;let s=0,o=n.length,l=!1;for(;s<o;)i=s+(o-s>>1),r=+t(n[i],e),r<0?s=i+1:(o=i,l=!r);return l?s:~s}function Vi(n,e){return n>e?1:n<e?-1:0}function ma(n,e,t){const i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;{let r;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return typeof t=="function"?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}}function gu(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Ut(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function qi(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function pu(n,e,t){const i=e||Vi;return n.every(function(r,s){if(s===0)return!0;const o=i(n[s-1],r);return!(o>0||t&&o===0)})}function vu(){return!0}function yr(){}function mu(n){let e=!1,t,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!qi(s,i))&&(e=!0,r=this,i=s,t=n.apply(this,arguments)),t}}function ks(n){for(const e in n)delete n[e]}function Yi(n){let e;for(e in n)return!1;return!e}class yu extends du{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new yi(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,l[i]=0),++o[i];let u;for(let g=0,p=r.length;g<p;++g)if("handleEvent"in r[g]?u=r[g].handleEvent(s):u=r[g].call(this,s),u===!1||s.propagationStopped){u=!1;break}if(--o[i]===0){let g=l[i];for(delete l[i];g--;)this.removeEventListener(i,yr);delete o[i]}return u}disposeInternal(){this.listeners_&&ks(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=yr,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}}const wr=yu,We={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function yt(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function _r(n,e,t,i){return yt(n,e,t,i,!0)}function gt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),ks(n))}class xr extends wr{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(We.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=yt(this,e[s],t);return r}else return yt(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=_r(this,e[s],t)}else i=_r(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)wu(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}xr.prototype.on,xr.prototype.once,xr.prototype.un;function wu(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)gt(n[e]);else gt(n)}const Ds=xr;class ya extends yi{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class _u extends Ds{constructor(e){super(),this.on,this.once,this.un,Me(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new ya(i,e,t)),i=va.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new ya(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Yi(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const wi=_u,ti=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"";ti.includes("firefox"),ti.includes("safari")&&!ti.includes("chrom")&&(ti.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ti)),ti.includes("webkit")&&ti.includes("edge"),ti.includes("macintosh");const Ns=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,xu=typeof Image<"u"&&Image.prototype.decode;(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})();const Su={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class Eu extends Error{constructor(e){const t=Su[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const wa=Eu;function Ae(n,e){if(!n)throw new wa(e)}new Array(6);function ii(){return[1,0,0,1,0,0]}function Cu(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=n[4],l=n[5],u=e[0],g=e[1],p=e[2],y=e[3],w=e[4],_=e[5];return n[0]=t*u+r*g,n[1]=i*u+s*g,n[2]=t*p+r*y,n[3]=i*p+s*y,n[4]=t*w+r*_+o,n[5]=i*w+s*_+l,n}function Iu(n,e,t,i,r,s,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n}function bu(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function at(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function Tu(n,e,t){return Iu(n,e,0,0,t,0,0)}function Pn(n,e,t,i,r,s,o,l){const u=Math.sin(s),g=Math.cos(s);return n[0]=i*g,n[1]=r*u,n[2]=-i*u,n[3]=r*g,n[4]=o*i*g-l*i*u+e,n[5]=o*r*u+l*r*g+t,n}function Pu(n,e){const t=Au(e);Ae(t!==0,32);const i=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*u-o*l)/t,n[5]=-(i*u-r*l)/t,n}function Au(n){return n[0]*n[3]-n[1]*n[2]}let _a;function Lu(n){const e="matrix("+n.join(", ")+")";if(Ns)return e;const t=_a||(_a=document.createElement("div"));return t.style.transform=e,t.style.transform}const Ye={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function xa(n){const e=Ct();for(let t=0,i=n.length;t<i;++t)An(e,n[t]);return e}function Gs(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function Mu(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function _i(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function Bs(n,e){return zs(n,e[0],e[1])}function xi(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function zs(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function Us(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=e[0],l=e[1];let u=Ye.UNKNOWN;return o<t?u=u|Ye.LEFT:o>r&&(u=u|Ye.RIGHT),l<i?u=u|Ye.BELOW:l>s&&(u=u|Ye.ABOVE),u===Ye.UNKNOWN&&(u=Ye.INTERSECTING),u}function Ct(){return[1/0,1/0,-1/0,-1/0]}function ni(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Sr(n){return ni(1/0,1/0,-1/0,-1/0,n)}function Ru(n,e){const t=n[0],i=n[1];return ni(t,i,t,i,e)}function Sa(n,e,t,i,r){const s=Sr(r);return Ca(s,n,e,t,i)}function Ws(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function Ea(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function An(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function Ca(n,e,t,i,r){for(;t<i;t+=r)Fu(n,e[t],e[t+1]);return n}function Fu(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function Ia(n,e){let t;return t=e(Er(n)),t||(t=e(Cr(n)),t)||(t=e(br(n)),t)||(t=e(Hi(n)),t)?t:!1}function Vs(n){let e=0;return ku(n)||(e=Oe(n)*ri(n)),e}function Er(n){return[n[0],n[1]]}function Cr(n){return[n[2],n[1]]}function Xi(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function Ou(n,e){let t;return e==="bottom-left"?t=Er(n):e==="bottom-right"?t=Cr(n):e==="top-left"?t=Hi(n):e==="top-right"?t=br(n):Ae(!1,13),t}function ri(n){return n[3]-n[1]}function Ir(n,e,t){const i=t||Ct();return pt(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Sr(i),i}function Hi(n){return[n[0],n[3]]}function br(n){return[n[2],n[3]]}function Oe(n){return n[2]-n[0]}function pt(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function ku(n){return n[2]<n[0]||n[3]<n[1]}function Du(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function Nu(n,e){const t=(n[2]-n[0])/2*(e-1),i=(n[3]-n[1])/2*(e-1);n[0]-=t,n[2]+=t,n[1]-=i,n[3]+=i}function Gu(n,e,t){let i=!1;const r=Us(n,e),s=Us(n,t);if(r===Ye.INTERSECTING||s===Ye.INTERSECTING)i=!0;else{const o=n[0],l=n[1],u=n[2],g=n[3],p=e[0],y=e[1],w=t[0],_=t[1],E=(_-y)/(w-p);let I,x;!!(s&Ye.ABOVE)&&!(r&Ye.ABOVE)&&(I=w-(_-g)/E,i=I>=o&&I<=u),!i&&!!(s&Ye.RIGHT)&&!(r&Ye.RIGHT)&&(x=_-(w-u)*E,i=x>=l&&x<=g),!i&&!!(s&Ye.BELOW)&&!(r&Ye.BELOW)&&(I=w-(_-l)/E,i=I>=o&&I<=u),!i&&!!(s&Ye.LEFT)&&!(r&Ye.LEFT)&&(x=_-(w-o)*E,i=x>=l&&x<=g)}return i}function ba(n,e){const t=e.getExtent(),i=Xi(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=Oe(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}function Bu(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];ba(n,e);const i=Oe(t);if(Oe(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}const Tr={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class zu{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Tr[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const qs=zu,Ln=6378137,ji=Math.PI*Ln,Uu=[-ji,-ji,ji,ji],Wu=[-180,-85,180,85],Pr=Ln*Math.log(Math.tan(Math.PI/2));class Zi extends qs{constructor(e){super({code:e,units:"m",extent:Uu,global:!0,worldExtent:Wu,getPointResolution:function(t,i){return t/Math.cosh(i[1]/Ln)}})}}const Ta=[new Zi("EPSG:3857"),new Zi("EPSG:102100"),new Zi("EPSG:102113"),new Zi("EPSG:900913"),new Zi("http://www.opengis.net/def/crs/EPSG/0/3857"),new Zi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Vu(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t){e[r]=ji*n[r]/180;let s=Ln*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>Pr?s=Pr:s<-Pr&&(s=-Pr),e[r+1]=s}return e}function qu(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t)e[r]=180*n[r]/ji,e[r+1]=360*Math.atan(Math.exp(n[r+1]/Ln))/Math.PI-90;return e}const Yu=6378137,Pa=[-180,-90,180,90],Xu=Math.PI*Yu/180;class Si extends qs{constructor(e,t){super({code:e,units:"degrees",extent:Pa,axisOrientation:t,global:!0,metersPerUnit:Xu,worldExtent:Pa})}}const Aa=[new Si("CRS:84"),new Si("EPSG:4326","neu"),new Si("urn:ogc:def:crs:OGC:1.3:CRS84"),new Si("urn:ogc:def:crs:OGC:2:84"),new Si("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Si("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Si("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Ys={};function Hu(n){return Ys[n]||Ys[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function ju(n,e){Ys[n]=e}let Ki={};function Ar(n,e,t){const i=n.getCode(),r=e.getCode();i in Ki||(Ki[i]={}),Ki[i][r]=t}function Zu(n,e){let t;return n in Ki&&e in Ki[n]&&(t=Ki[n][e]),t}function Rt(n,e,t){return Math.min(Math.max(n,e),t)}function Ku(n,e,t,i,r,s){const o=r-t,l=s-i;if(o!==0||l!==0){const u=((n-t)*o+(e-i)*l)/(o*o+l*l);u>1?(t=r,i=s):u>0&&(t+=o*u,i+=l*u)}return Ei(n,e,t,i)}function Ei(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function Ju(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let l=i+1;l<e;l++){const u=Math.abs(n[l][i]);u>s&&(s=u,r=l)}if(s===0)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let l=i+1;l<e;l++){const u=-n[l][i]/n[i][i];for(let g=i;g<e+1;g++)i==g?n[l][g]=0:n[l][g]+=u*n[i][g]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function Xs(n){return n*Math.PI/180}function Lr(n,e){const t=n%e;return t*e<0?t+e:t}function Wt(n,e,t){return n+t*(e-n)}function La(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Mr(n,e){return Math.floor(La(n,e))}function Rr(n,e){return Math.ceil(La(n,e))}function Qu(n,e){if(e.canWrapX()){const t=Oe(e.getExtent()),i=$u(n,e,t);i&&(n[0]-=i*t)}return n}function $u(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||Oe(i),r=Math.floor((n[0]-i[0])/t)),r}const ec=63710088e-1;function Ma(n,e,t){t=t||ec;const i=Xs(n[1]),r=Xs(e[1]),s=(r-i)/2,o=Xs(e[0]-n[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function Hs(n,e,t){if(e!==void 0){for(let i=0,r=n.length;i<r;++i)e[i]=n[i];e=e}else e=n.slice();return e}function Ra(n,e,t){if(e!==void 0&&n!==e){for(let i=0,r=n.length;i<r;++i)e[i]=n[i];n=e}return n}function tc(n){ju(n.getCode(),n),Ar(n,n,Hs)}function ic(n){n.forEach(tc)}function Xe(n){return typeof n=="string"?Hu(n):n||null}function Fa(n,e,t,i){n=Xe(n);let r;const s=n.getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/Tr[i])}}else{const o=n.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{const l=js(n,Xe("EPSG:4326"));if(l===Ra&&o!=="degrees")r=e*n.getMetersPerUnit();else{let g=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];g=l(g,g,2);const p=Ma(g.slice(0,2),g.slice(2,4)),y=Ma(g.slice(4,6),g.slice(6,8));r=(p+y)/2}const u=i?Tr[i]:n.getMetersPerUnit();u!==void 0&&(r/=u)}}return r}function Oa(n){ic(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Ar(e,t,Hs)})})}function nc(n,e,t,i){n.forEach(function(r){e.forEach(function(s){Ar(r,s,t),Ar(s,r,i)})})}function Vt(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||js(n,e)===Hs)&&t}function js(n,e){const t=n.getCode(),i=e.getCode();let r=Zu(t,i);return r||(r=Ra),r}function Fr(n,e){const t=Xe(n),i=Xe(e);return js(t,i)}function rc(n,e,t){return Fr(e,t)(n,void 0,n.length)}function sc(n,e){return n}function oc(n,e){return n}function ac(){Oa(Ta),Oa(Aa),nc(Aa,Ta,Vu,qu)}ac();function Ci(n,e,t,i,r,s){s=s||[];let o=0;for(let l=e;l<t;l+=i){const u=n[l],g=n[l+1];s[o++]=r[0]*u+r[2]*g+r[4],s[o++]=r[1]*u+r[3]*g+r[5]}return s&&s.length!=o&&(s.length=o),s}function ka(n,e,t,i,r,s,o){o=o||[];const l=Math.cos(r),u=Math.sin(r),g=s[0],p=s[1];let y=0;for(let w=e;w<t;w+=i){const _=n[w]-g,E=n[w+1]-p;o[y++]=g+_*l-E*u,o[y++]=p+_*u+E*l;for(let I=w+2;I<w+i;++I)o[y++]=n[I]}return o&&o.length!=y&&(o.length=y),o}function lc(n,e,t,i,r,s,o,l){l=l||[];const u=o[0],g=o[1];let p=0;for(let y=e;y<t;y+=i){const w=n[y]-u,_=n[y+1]-g;l[p++]=u+r*w,l[p++]=g+s*_;for(let E=y+2;E<y+i;++E)l[p++]=n[E]}return l&&l.length!=p&&(l.length=p),l}function hc(n,e,t,i,r,s,o){o=o||[];let l=0;for(let u=e;u<t;u+=i){o[l++]=n[u]+r,o[l++]=n[u+1]+s;for(let g=u+2;g<u+i;++g)o[l++]=n[g]}return o&&o.length!=l&&(o.length=l),o}const Da=ii();class uc extends wi{constructor(){super(),this.extent_=Ct(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=mu(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return se()}closestPointXY(e,t,i,r){return se()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return se()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Sr(t),this.extentRevision_=this.getRevision()}return Du(this.extent_,e)}rotate(e,t){se()}scale(e,t,i){se()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return se()}getType(){return se()}applyTransform(e){se()}intersectsExtent(e){return se()}translate(e,t){se()}transform(e,t){const i=Xe(e),r=i.getUnits()=="tile-pixels"?function(s,o,l){const u=i.getExtent(),g=i.getWorldExtent(),p=ri(g)/ri(u);return Pn(Da,g[0],g[3],p,-p,0,0,0),Ci(s,0,s.length,l,Da,o),Fr(i,t)(s,o,l)}:Fr(i,t);return this.applyTransform(r),this}}const Or=uc;class cc{drawCustom(e,t,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const Na=cc,dc=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,fc=/^([a-z]*)$|^hsla?\(.*\)$/i;function Ga(n){return typeof n=="string"?n:za(n)}function gc(n){const e=document.createElement("div");if(e.style.color=n,e.style.color!==""){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}else return""}const pc=function(){const e={};let t=0;return function(i){let r;if(e.hasOwnProperty(i))r=e[i];else{if(t>=1024){let s=0;for(const o in e)(s++&3)===0&&(delete e[o],--t)}r=vc(i),e[i]=r,++t}return r}}();function kr(n){return Array.isArray(n)?n:pc(n)}function vc(n){let e,t,i,r,s;if(fc.exec(n)&&(n=gc(n)),dc.exec(n)){const o=n.length-1;let l;o<=4?l=1:l=2;const u=o===4||o===8;e=parseInt(n.substr(1+0*l,l),16),t=parseInt(n.substr(1+1*l,l),16),i=parseInt(n.substr(1+2*l,l),16),u?r=parseInt(n.substr(1+3*l,l),16):r=255,l==1&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,u&&(r=(r<<4)+r)),s=[e,t,i,r/255]}else n.startsWith("rgba(")?(s=n.slice(5,-1).split(",").map(Number),Ba(s)):n.startsWith("rgb(")?(s=n.slice(4,-1).split(",").map(Number),s.push(1),Ba(s)):Ae(!1,14);return s}function Ba(n){return n[0]=Rt(n[0]+.5|0,0,255),n[1]=Rt(n[1]+.5|0,0,255),n[2]=Rt(n[2]+.5|0,0,255),n[3]=Rt(n[3],0,1),n}function za(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+e+","+t+","+i+","+r+")"}function Ft(n){return Array.isArray(n)?za(n):n}function vt(n,e,t,i){let r;return t&&t.length?r=t.shift():Ns?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function Ua(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}const mc=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Wa=["style","variant","weight","size","lineHeight","family"],Va=function(n){const e=n.match(mc);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Wa.length;i<r;++i){const s=e[i+1];s!==void 0&&(t[Wa[i]]=s)}return t.families=t.family.split(/,\s?/),t},qa="10px sans-serif",qt="#000",Dr="round",Mn=[],Rn=0,Ji="round",Fn=10,On="#000",kn="center",Nr="middle",Ii=[0,0,0,0],Dn=1,si=new wi;let Qi=null,Zs;const Ks={},yc=function(){const e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uF013";let s,o;function l(g,p,y){let w=!0;for(let _=0;_<i;++_){const E=t[_];if(o=Gr(g+" "+p+" "+e+E,r),y!=E){const I=Gr(g+" "+p+" "+e+y+","+E,r);w=w&&I!=o}}return!!w}function u(){let g=!0;const p=si.getKeys();for(let y=0,w=p.length;y<w;++y){const _=p[y];si.get(_)<100&&(l.apply(this,_.split(`
`))?(ks(Ks),Qi=null,Zs=void 0,si.set(_,100)):(si.set(_,si.get(_)+1,!0),g=!1))}g&&(clearInterval(s),s=void 0)}return function(g){const p=Va(g);if(!p)return;const y=p.families;for(let w=0,_=y.length;w<_;++w){const E=y[w],I=p.style+`
`+p.weight+`
`+E;si.get(I)===void 0&&(si.set(I,100,!0),l(p.style,p.weight,E)||(si.set(I,0,!0),s===void 0&&(s=setInterval(u,32))))}}}(),wc=function(){let n;return function(e){let t=Ks[e];if(t==null){if(Ns){const i=Va(e),r=Ya(e,"\u017Dg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);Ks[e]=t}return t}}();function Ya(n,e){return Qi||(Qi=vt(1,1)),n!=Zs&&(Qi.font=n,Zs=Qi.font),Qi.measureText(e)}function Gr(n,e){return Ya(n,e).width}function Xa(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,Gr(n,s)),0);return t[e]=i,i}function _c(n,e){const t=[],i=[],r=[];let s=0,o=0,l=0,u=0;for(let g=0,p=e.length;g<=p;g+=2){const y=e[g];if(y===`
`||g===p){s=Math.max(s,o),r.push(o),o=0,l+=u;continue}const w=e[g+1]||n.font,_=Gr(w,y);t.push(_),o+=_;const E=wc(w);i.push(E),u=Math.max(u,E)}return{width:s,height:l,widths:t,heights:i,lineWidths:r}}function xc(n,e,t,i,r,s,o,l,u,g,p){n.save(),t!==1&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(u,g),n.scale(p[0],p[1]),Sc(i,n)):p[0]<0||p[1]<0?(n.translate(u,g),n.scale(p[0],p[1]),n.drawImage(i,r,s,o,l,0,0,o,l)):n.drawImage(i,r,s,o,l,u,g,o*p[0],l*p[1]),n.restore()}function Sc(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class Ec extends Or{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return Sa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return se()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Ha(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){se()}setLayout(e,t,i){let r;if(e)r=Ha(e);else{for(let s=0;s<i;++s)if(t.length===0){this.layout="XY",this.stride=2;return}else t=t[0];r=t.length,e=Cc(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();ka(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Xi(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();lc(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();hc(i,0,i.length,r,e,t,i),this.changed()}}}function Cc(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function Ha(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function Ic(n,e,t){const i=n.getFlatCoordinates();if(i){const r=n.getStride();return Ci(i,0,i.length,r,e,t)}else return null}const bi=Ec;class bc extends Na{constructor(e,t,i,r,s,o,l){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ii()}drawImages_(e,t,i,r){if(!this.image_)return;const s=Ci(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,l=this.tmpLocalTransform_,u=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=u*this.imageOpacity_);let g=this.imageRotation_;this.imageRotateWithView_&&(g+=this.viewRotation_);for(let p=0,y=s.length;p<y;p+=2){const w=s[p]-this.imageAnchorX_,_=s[p+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const E=w+this.imageAnchorX_,I=_+this.imageAnchorY_;Pn(l,E,I,1,1,g,-E,-I),o.setTransform.apply(o,l),o.translate(E,I),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,w,_,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=u)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Ci(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let l=this.textRotation_;for(this.textRotateWithView_&&(l+=this.viewRotation_);t<i;t+=r){const u=s[t]+this.textOffsetX_,g=s[t+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(u-this.textOffsetX_,g-this.textOffsetY_),o.rotate(l),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,u,g),this.textFillState_&&o.fillText(this.text_,u,g))}}moveToLineTo_(e,t,i,r,s){const o=this.context_,l=Ci(e,t,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(l[0],l[1]);let u=l.length;s&&(u-=2);for(let g=2;g<u;g+=2)o.lineTo(l[g],l[g+1]);return s&&o.closePath(),i}drawRings_(e,t,i,r){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(!!pt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=Ic(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);!i||!pt(this.extent_,i.getExtent())||(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!pt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(!!pt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),l=e.getStride();i.beginPath();for(let u=0,g=o.length;u<g;++u)s=this.moveToLineTo_(r,s,o[u],l,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!pt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!pt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let l=0,u=s.length;l<u;++l){const g=s[l];r=this.drawRings_(i,r,g,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),qi(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:kn;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Ft(i||qt)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),l=t.getLineJoin(),u=t.getWidth(),g=t.getMiterLimit(),p=s||Mn;this.strokeState_={lineCap:r!==void 0?r:Dr,lineDash:this.pixelRatio_===1?p:p.map(y=>y*this.pixelRatio_),lineDashOffset:(o||Rn)*this.pixelRatio_,lineJoin:l!==void 0?l:Ji,lineWidth:(u!==void 0?u:Dn)*this.pixelRatio_,miterLimit:g!==void 0?g:Fn,strokeStyle:Ft(i||On)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const _=t.getColor();this.textFillState_={fillStyle:Ft(_||qt)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const _=i.getColor(),E=i.getLineCap(),I=i.getLineDash(),x=i.getLineDashOffset(),T=i.getLineJoin(),S=i.getWidth(),b=i.getMiterLimit();this.textStrokeState_={lineCap:E!==void 0?E:Dr,lineDash:I||Mn,lineDashOffset:x||Rn,lineJoin:T!==void 0?T:Ji,lineWidth:S!==void 0?S:Dn,miterLimit:b!==void 0?b:Fn,strokeStyle:Ft(_||On)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),l=e.getRotateWithView(),u=e.getRotation(),g=e.getScaleArray(),p=e.getText(),y=e.getTextAlign(),w=e.getTextBaseline();this.textState_={font:r!==void 0?r:qa,textAlign:y!==void 0?y:kn,textBaseline:w!==void 0?w:Nr},this.text_=p!==void 0?Array.isArray(p)?p.reduce((_,E,I)=>_+=I%2?" ":E,""):p:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=u!==void 0?u:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const ja=bc,ve={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Tc=.5,Za={Point:kc,LineString:Rc,Polygon:Nc,MultiPoint:Dc,MultiLineString:Fc,MultiPolygon:Oc,GeometryCollection:Mc,Circle:Ac};function Pc(n,e){return parseInt(Me(n),10)-parseInt(Me(e),10)}function Ka(n,e){const t=Js(n,e);return t*t}function Js(n,e){return Tc*n/e}function Ac(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const u=n.getBuilder(t.getZIndex(),"Circle");u.setFillStrokeStyle(s,o),u.drawCircle(e,i)}const l=t.getText();if(l&&l.getText()){const u=(r||n).getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(e,i)}}function Ja(n,e,t,i,r,s,o){let l=!1;const u=t.getImage();if(u){const g=u.getImageState();g==ve.LOADED||g==ve.ERROR?u.unlistenImageChange(r):(g==ve.IDLE&&u.load(),u.listenImageChange(r),l=!0)}return Lc(n,e,t,i,s,o),l}function Lc(n,e,t,i,r,s){const o=t.getGeometryFunction()(e);if(!o)return;const l=o.simplifyTransformed(i,r);if(t.getRenderer())Qa(n,l,t,e);else{const g=Za[l.getType()];g(n,l,t,e,s)}}function Qa(n,e,t,i){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let o=0,l=s.length;o<l;++o)Qa(n,s[o],t,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer())}function Mc(n,e,t,i,r){const s=e.getGeometriesArray();let o,l;for(o=0,l=s.length;o<l;++o){const u=Za[s[o].getType()];u(n,s[o],t,i,r)}}function Rc(n,e,t,i,r){const s=t.getStroke();if(s){const l=n.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,i)}}function Fc(n,e,t,i,r){const s=t.getStroke();if(s){const l=n.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,i)}}function Oc(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(o||s){const u=n.getBuilder(t.getZIndex(),"Polygon");u.setFillStrokeStyle(s,o),u.drawMultiPolygon(e,i)}const l=t.getText();if(l&&l.getText()){const u=(r||n).getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(e,i)}}function kc(n,e,t,i,r){const s=t.getImage(),o=t.getText();let l;if(s){if(s.getImageState()!=ve.LOADED)return;let u=n;if(r){const p=s.getDeclutterMode();if(p!=="none")if(u=r,p==="obstacle"){const y=n.getBuilder(t.getZIndex(),"Image");y.setImageStyle(s,l),y.drawPoint(e,i)}else o&&o.getText()&&(l={})}const g=u.getBuilder(t.getZIndex(),"Image");g.setImageStyle(s,l),g.drawPoint(e,i)}if(o&&o.getText()){let u=n;r&&(u=r);const g=u.getBuilder(t.getZIndex(),"Text");g.setTextStyle(o,l),g.drawText(e,i)}}function Dc(n,e,t,i,r){const s=t.getImage(),o=t.getText();let l;if(s){if(s.getImageState()!=ve.LOADED)return;let u=n;if(r){const p=s.getDeclutterMode();if(p!=="none")if(u=r,p==="obstacle"){const y=n.getBuilder(t.getZIndex(),"Image");y.setImageStyle(s,l),y.drawMultiPoint(e,i)}else o&&o.getText()&&(l={})}const g=u.getBuilder(t.getZIndex(),"Image");g.setImageStyle(s,l),g.drawMultiPoint(e,i)}if(o&&o.getText()){let u=n;r&&(u=r);const g=u.getBuilder(t.getZIndex(),"Text");g.setTextStyle(o,l),g.drawText(e,i)}}function Nc(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const u=n.getBuilder(t.getZIndex(),"Polygon");u.setFillStrokeStyle(s,o),u.drawPolygon(e,i)}const l=t.getText();if(l&&l.getText()){const u=(r||n).getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(e,i)}}function Gc(n){if(!(n.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=n.inversePixelTransform[0],t=n.frameState,i=Cu(n.inversePixelTransform.slice(),t.coordinateToPixelTransform),r=Ka(t.viewState.resolution,e);let s;return new ja(n.context,e,t.extent,i,t.viewState.rotation,r,s)}const $i={ADD:"add",REMOVE:"remove"},$a={LENGTH:"length"};class Br extends yi{constructor(e,t,i){super(e),this.element=t,this.index=i}}class Bc extends wi{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get($a.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Br($i.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Br($i.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Br($i.REMOVE,r,e)),this.dispatchEvent(new Br($i.ADD,t,e))}updateLength_(){this.set($a.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new wa(58)}}const zc=Bc;function Uc(n,e,t,i,r){el(n,e,t||0,i||n.length-1,r||Wc)}function el(n,e,t,i,r){for(;i>t;){if(i-t>600){var s=i-t+1,o=e-t+1,l=Math.log(s),u=.5*Math.exp(2*l/3),g=.5*Math.sqrt(l*u*(s-u)/s)*(o-s/2<0?-1:1),p=Math.max(t,Math.floor(e-o*u/s+g)),y=Math.min(i,Math.floor(e+(s-o)*u/s+g));el(n,e,p,y,r)}var w=n[e],_=t,E=i;for(Nn(n,t,e),r(n[i],w)>0&&Nn(n,t,i);_<E;){for(Nn(n,_,E),_++,E--;r(n[_],w)<0;)_++;for(;r(n[E],w)>0;)E--}r(n[t],w)===0?Nn(n,t,E):(E++,Nn(n,E,i)),E<=e&&(t=E+1),e<=E&&(i=E-1)}}function Nn(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function Wc(n,e){return n<e?-1:n>e?1:0}class tl{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Ur(e,t))return i;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const l=t.children[o],u=t.leaf?r(l):l;Ur(e,u)&&(t.leaf?i.push(l):$s(e,u)?this._all(l,i):s.push(l))}t=s.pop()}return i}collides(e){let t=this.data;if(!Ur(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(Ur(e,o)){if(t.leaf||$s(e,o))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=tn([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let l,u,g;for(;i||s.length;){if(i||(i=s.pop(),u=s[s.length-1],l=o.pop(),g=!0),i.leaf){const p=Vc(e,i.children,t);if(p!==-1)return i.children.splice(p,1),s.push(i),this._condense(s),this}!g&&!i.leaf&&$s(i,r)?(s.push(i),o.push(l),l=0,u=i,i=i.children[0]):u?(l++,i=u.children[l],g=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const s=i-t+1;let o=this._maxEntries,l;if(s<=o)return l=tn(e.slice(t,i+1)),en(l,this.toBBox),l;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),l=tn([]),l.leaf=!1,l.height=r;const u=Math.ceil(s/o),g=u*Math.ceil(Math.sqrt(o));il(e,t,i,g,this.compareMinX);for(let p=t;p<=i;p+=g){const y=Math.min(p+g-1,i);il(e,p,y,u,this.compareMinY);for(let w=p;w<=y;w+=u){const _=Math.min(w+u-1,y);l.children.push(this._build(e,w,_,r-1))}}return en(l,this.toBBox),l}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let s=1/0,o=1/0,l;for(let u=0;u<t.children.length;u++){const g=t.children[u],p=Qs(g),y=Xc(e,g)-p;y<o?(o=y,s=p<s?p:s,l=g):y===o&&p<s&&(s=p,l=g)}t=l||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),Bn(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),l=tn(i.children.splice(o,i.children.length-o));l.height=i.height,l.leaf=i.leaf,en(i,this.toBBox),en(l,this.toBBox),t?e[t-1].children.push(l):this._splitRoot(i,l)}_splitRoot(e,t){this.data=tn([e,t]),this.data.height=e.height+1,this.data.leaf=!1,en(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,s=1/0,o=1/0;for(let l=t;l<=i-t;l++){const u=Gn(e,0,l,this.toBBox),g=Gn(e,l,i,this.toBBox),p=Hc(u,g),y=Qs(u)+Qs(g);p<s?(s=p,r=l,o=y<o?y:o):p===s&&y<o&&(o=y,r=l)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:qc,s=e.leaf?this.compareMinY:Yc,o=this._allDistMargin(e,t,i,r),l=this._allDistMargin(e,t,i,s);o<l&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const s=this.toBBox,o=Gn(e,0,t,s),l=Gn(e,i-t,i,s);let u=zr(o)+zr(l);for(let g=t;g<i-t;g++){const p=e.children[g];Bn(o,e.leaf?s(p):p),u+=zr(o)}for(let g=i-t-1;g>=t;g--){const p=e.children[g];Bn(l,e.leaf?s(p):p),u+=zr(l)}return u}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)Bn(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():en(e[t],this.toBBox)}}function Vc(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function en(n,e){Gn(n,0,n.children.length,e,n)}function Gn(n,e,t,i,r){r||(r=tn(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=n.children[s];Bn(r,n.leaf?i(o):o)}return r}function Bn(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function qc(n,e){return n.minX-e.minX}function Yc(n,e){return n.minY-e.minY}function Qs(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function zr(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Xc(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Hc(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-i)}function $s(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Ur(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function tn(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function il(n,e,t,i,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;Uc(n,o,e,t,r),s.push(e,o,o,t)}}class jc{constructor(e){this.rbush_=new tl(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Me(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],l=t[r],u={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:l};i[r]=u,this.items_[Me(l)]=u}this.rbush_.load(i)}remove(e){const t=Me(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Me(t)],r=[i.minX,i.minY,i.maxX,i.maxY];Ws(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return Yi(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return ni(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}const nl=jc;class Zc extends wi{constructor(e){super(),this.projection=Xe(e.projection),this.attributions_=rl(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return se()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=rl(e),this.changed()}setState(e){this.state_=e,this.changed()}}function rl(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}const eo=Zc,It={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Kc(n,e){return[[-1/0,-1/0,1/0,1/0]]}let Jc=!1;function Qc(n,e,t,i,r,s,o){const l=new XMLHttpRequest;l.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=Jc,l.onload=function(u){if(!l.status||l.status>=200&&l.status<300){const g=e.getType();let p;g=="json"||g=="text"?p=l.responseText:g=="xml"?(p=l.responseXML,p||(p=new DOMParser().parseFromString(l.responseText,"application/xml"))):g=="arraybuffer"&&(p=l.response),p?s(e.readFeatures(p,{extent:t,featureProjection:r}),e.readProjection(p)):o()}else o()},l.onerror=o,l.send()}function sl(n,e){return function(t,i,r,s,o){const l=this;Qc(n,e,t,i,r,function(u,g){l.addFeatures(u),s!==void 0&&s(u)},o||yr)}}class oi extends yi{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class $c extends eo{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=yr,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Ae(this.format_,7),this.loader_=sl(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Kc;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new nl:null,this.loadedExtentsRtree_=new nl,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new zc(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Me(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new oi(It.ADDFEATURE,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[yt(t,We.CHANGE,this.handleFeatureChange_,this),yt(t,va.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const r=t.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=t),i&&(Ae(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const l=e[s],u=Me(l);this.addToIndex_(u,l)&&i.push(l)}for(let s=0,o=i.length;s<o;s++){const l=i[s],u=Me(l);this.setupChangeEvents_(u,l);const g=l.getGeometry();if(g){const p=g.getExtent();t.push(p),r.push(l)}else this.nullGeometryFeatures_[u]=l}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(It.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new oi(It.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(It.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(It.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener($i.ADD,function(i){t||(t=!0,this.addFeature(i.element),t=!1)}.bind(this)),e.addEventListener($i.REMOVE,function(i){t||(t=!0,this.removeFeature(i.element),t=!1)}.bind(this)),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(gt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=function(r){this.removeFeatureInternal(r)}.bind(this);this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new oi(It.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Yi(this.nullGeometryFeatures_)||Ut(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=Bu(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let l=1/0;const u=[-1/0,-1/0,1/0,1/0];return t=t||vu,this.featuresRtree_.forEachInExtent(u,function(g){if(t(g)){const p=g.getGeometry(),y=l;if(l=p.closestPointXY(i,r,o,l),l<y){s=g;const w=Math.sqrt(l);u[0]=i-w,u[1]=r-w,u[2]=i+w,u[3]=r+w}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Me(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new oi(It.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Me(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Yi(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,l=s.length;o<l;++o){const u=s[o];r.forEachInExtent(u,function(p){return xi(p.extent,u)})||(++this.loadingExtentsCount_,this.dispatchEvent(new oi(It.FEATURESLOADSTART)),this.loader_.call(this,u,t,i,function(p){--this.loadingExtentsCount_,this.dispatchEvent(new oi(It.FEATURESLOADEND,void 0,p))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new oi(It.FEATURESLOADERROR))}.bind(this)),r.insert(u,{extent:u.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(r){if(Ws(r.extent,e))return i=r,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=Me(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Me(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(gt),delete this.featureChangeKeys_[t];const r=e.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new oi(It.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){Ae(this.format_,7),this.url_=e,this.setLoader(sl(e,this.format_))}}const al=$c,Ee={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class ed extends wi{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ee.OPACITY]=e.opacity!==void 0?e.opacity:1,Ae(typeof t[Ee.OPACITY]=="number",64),t[Ee.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ee.Z_INDEX]=e.zIndex,t[Ee.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ee.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ee.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ee.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Rt(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return se()}getLayerStatesArray(e){return se()}getExtent(){return this.get(Ee.EXTENT)}getMaxResolution(){return this.get(Ee.MAX_RESOLUTION)}getMinResolution(){return this.get(Ee.MIN_RESOLUTION)}getMinZoom(){return this.get(Ee.MIN_ZOOM)}getMaxZoom(){return this.get(Ee.MAX_ZOOM)}getOpacity(){return this.get(Ee.OPACITY)}getSourceState(){return se()}getVisible(){return this.get(Ee.VISIBLE)}getZIndex(){return this.get(Ee.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ee.EXTENT,e)}setMaxResolution(e){this.set(Ee.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ee.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ee.MAX_ZOOM,e)}setMinZoom(e){this.set(Ee.MIN_ZOOM,e)}setOpacity(e){Ae(typeof e=="number",64),this.set(Ee.OPACITY,e)}setVisible(e){this.set(Ee.VISIBLE,e)}setZIndex(e){this.set(Ee.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const td=ed,to={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class id extends td{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ee.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ee.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(gt(this.sourceChangeKey_),this.sourceChangeKey_=null);const e=this.getSource();e&&(this.sourceChangeKey_=yt(e,We.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(t=>t([]))}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}render(e,t){const i=this.getRenderer();if(i.prepareFrame(e))return this.rendered=!0,i.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(Ee.MAP,e)}getMapInternal(){return this.get(Ee.MAP)}setMap(e){this.mapPrecomposeKey_&&(gt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(gt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=yt(e,to.PRECOMPOSE,function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);Ae(!r.some(function(o){return o.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=yt(this,We.CHANGE,e.render,e),this.changed())}setSource(e){this.set(Ee.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}const nd=id;function rd(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function mt(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class io{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=mt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new io({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return se()}getImage(e){return se()}getHitDetectionImage(){return se()}getPixelRatio(e){return 1}getImageState(){return se()}getImageSize(){return se()}getOrigin(){return se()}getSize(){return se()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=mt(e)}listenImageChange(e){se()}load(){se()}unlistenImageChange(e){se()}}const ll=io;class no extends ll{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new no({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,r=vt(i.size*e,i.size*e);this.draw_(i,r,e),t=r.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return ve.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const X=r;r=s,s=X}const o=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/o,u=s*Math.sin(l),g=Math.sqrt(s*s-u*u),p=r-g,y=Math.sqrt(u*u+p*p),w=y/u;if(e==="miter"&&w<=i)return w*t;const _=t/2/w,E=t/2*(p/y),x=Math.sqrt((r+_)*(r+_)+E*E)-r;if(this.radius2_===void 0||e==="bevel")return x*2;const T=r*Math.sin(l),S=Math.sqrt(r*r-T*T),b=s-S,B=Math.sqrt(T*T+b*b)/T;if(B<=i){const X=B*t/2-s-r;return 2*Math.max(x,X)}return x*2}createRenderOptions(){let e=Ji,t=0,i=null,r=0,s,o=0;this.stroke_&&(s=this.stroke_.getColor(),s===null&&(s=On),s=Ft(s),o=this.stroke_.getWidth(),o===void 0&&(o=Dn),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=Ji),t=this.stroke_.getMiterLimit(),t===void 0&&(t=Fn));const l=this.calculateLineJoinSize_(e,o,t),u=Math.max(this.radius_,this.radius2_||0),g=Math.ceil(2*u+l);return{strokeStyle:s,strokeWidth:o,size:g,lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=qt),t.fillStyle=Ft(r),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if(typeof t=="string"&&(t=kr(t)),t===null?i=1:Array.isArray(t)&&(i=t.length===4?t[3]:1),i===0){const r=vt(e.size,e.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(e,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let l=0;l<t;l++){const u=s+l*o,g=l%2===0?i:r;e.lineTo(g*Math.cos(u),g*Math.sin(u))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=qt,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}const hl=no;class ro extends hl{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new ro({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const ul=ro;class so{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new so({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const Wr=so;class oo{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new oo({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const cl=oo;class Vr{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=dl,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Vr({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=dl,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function sd(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Ae(typeof n.getZIndex=="function",41),t=[n]),e=function(){return t}}return e}let ao=null;function od(n,e){if(!ao){const t=new Wr({color:"rgba(255,255,255,0.4)"}),i=new cl({color:"#3399CC",width:1.25});ao=[new Vr({image:new ul({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return ao}function dl(n){return n.getGeometry()}const qr=Vr;class ad{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const r=fl(e,t,i);return r in this.cache_?this.cache_[r]:null}set(e,t,i,r){const s=fl(e,t,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function fl(n,e,t){const i=t?Ga(t):"null";return e+":"+n+":"+i}const gl=new ad;class ld extends wr{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=r}changed(){this.dispatchEvent(We.CHANGE)}getExtent(){return this.extent}getImage(){return se()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){se()}}const pl=ld;function vl(n,e,t){const i=n;let r=!0,s=!1,o=!1;const l=[_r(i,We.LOAD,function(){o=!0,s||e()})];return i.src&&xu?(s=!0,i.decode().then(function(){r&&e()}).catch(function(u){r&&(o?e():t())})):l.push(_r(i,We.ERROR,t)),function(){r=!1,l.forEach(gt)}}let zn=null;class hd extends wr{constructor(e,t,i,r,s,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ve.LOADED){zn||(zn=vt(1,1)),zn.drawImage(this.image_,0,0);try{zn.getImageData(0,0,1,1),this.tainted_=!1}catch{zn=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(We.CHANGE)}handleImageError_(){this.imageState_=ve.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ve.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=vt(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ve.IDLE){this.image_||this.initializeImage_(),this.imageState_=ve.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=vl(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ve.LOADED)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=Ga(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function ud(n,e,t,i,r,s){let o=gl.get(e,i,s);return o||(o=new hd(n,e,t,i,r,s),gl.set(e,i,s,o)),o}class lo extends ll{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;this.imgSize_=e.imgSize;let l=e.src;Ae(!(l!==void 0&&o),4),Ae(!o||o&&this.imgSize_,5),(l===void 0||l.length===0)&&o&&(l=o.src||Me(o)),Ae(l!==void 0&&l.length>0,6);const u=e.src!==void 0?ve.IDLE:ve.LOADED;this.color_=e.color!==void 0?kr(e.color):null,this.iconImage_=ud(o,l,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,u,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null}clone(){const e=this.getScale();return new lo({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(e)?e.slice():e,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(e){this.iconImage_.addEventListener(We.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(We.CHANGE,e)}}const ml=lo,cd="#333";class ho{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=mt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Wr({color:cd}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new ho({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=mt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const dd=ho;function yl(n){return new qr({fill:Un(n,""),stroke:Wn(n,""),text:fd(n),image:gd(n)})}function Un(n,e){const t=n[e+"fill-color"];if(!!t)return new Wr({color:t})}function Wn(n,e){const t=n[e+"stroke-width"],i=n[e+"stroke-color"];if(!(!t&&!i))return new cl({width:t,color:i,lineCap:n[e+"stroke-line-cap"],lineJoin:n[e+"stroke-line-join"],lineDash:n[e+"stroke-line-dash"],lineDashOffset:n[e+"stroke-line-dash-offset"],miterLimit:n[e+"stroke-miter-limit"]})}function fd(n){const e=n["text-value"];return e?new dd({text:e,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:Un(n,"text-"),backgroundFill:Un(n,"text-background-"),stroke:Wn(n,"text-"),backgroundStroke:Wn(n,"text-background-")}):void 0}function gd(n){const e=n["icon-src"],t=n["icon-img"];if(e||t)return new ml({src:e,img:t,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const i=n["shape-points"];if(i){const s="shape-";return new hl({points:i,fill:Un(n,s),stroke:Wn(n,s),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const r=n["circle-radius"];if(r){const s="circle-";return new ul({radius:r,fill:Un(n,s),stroke:Wn(n,s),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const wl={RENDER_ORDER:"renderOrder"};class pd extends nd{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(wl.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new tl(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(wl.RENDER_ORDER,e)}setStyle(e){let t;if(e===void 0)t=od;else if(e===null)t=null;else if(typeof e=="function")t=e;else if(e instanceof qr)t=e;else if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s){const o=e[s];o instanceof qr?r[s]=o:r[s]=yl(o)}t=r}else t=yl(e);this.style_=t,this.styleFunction_=e===null?void 0:sd(this.style_),this.changed()}}const vd=pd,Vn={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Yr=[Vn.FILL],ai=[Vn.STROKE],Ti=[Vn.BEGIN_PATH],_l=[Vn.CLOSE_PATH],oe=Vn;function li(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function qn(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,l=t.length;o<l;++o){const u=t[o];r[s++]=li(n,e,u,i,r[s]),e=u}return r.length=s,r}function uo(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,l=t.length;o<l;++o){const u=t[o];r[s++]=u.length===1&&u[0]===e?[]:qn(n,e,u,i,r[s]),e=u[u.length-1]}return r.length=s,r}class md extends Na{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let l=0,u=e.length;l<u;l+=t)r[0]=e[l],r[1]=e[l+1],Bs(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,i,r,s,o){const l=this.coordinates;let u=l.length;const g=this.getBufferedMaxExtent();o&&(t+=r);let p=e[t],y=e[t+1];const w=this.tmpCoordinate_;let _=!0,E,I,x;for(E=t+r;E<i;E+=r)w[0]=e[E],w[1]=e[E+1],x=Us(g,w),x!==I?(_&&(l[u++]=p,l[u++]=y,_=!1),l[u++]=w[0],l[u++]=w[1]):x===Ye.INTERSECTING?(l[u++]=w[0],l[u++]=w[1],_=!1):_=!0,p=w[0],y=w[1],I=x;return(s&&_||E===t+r)&&(l[u++]=p,l[u++]=y),u}drawCustomCoordinates_(e,t,i,r,s){for(let o=0,l=i.length;o<l;++o){const u=i[o],g=this.appendFlatLineCoordinates(e,t,u,r,!1,!1);s.push(g),t=u}return t}drawCustom(e,t,i,r){this.beginGeometry(e,t);const s=e.getType(),o=e.getStride(),l=this.coordinates.length;let u,g,p,y,w;switch(s){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),y=[];const _=e.getEndss();w=0;for(let E=0,I=_.length;E<I;++E){const x=[];w=this.drawCustomCoordinates_(u,w,_[E],o,x),y.push(x)}this.instructions.push([oe.CUSTOM,l,y,e,i,uo]),this.hitDetectionInstructions.push([oe.CUSTOM,l,y,e,r||i,uo]);break;case"Polygon":case"MultiLineString":p=[],u=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),w=this.drawCustomCoordinates_(u,0,e.getEnds(),o,p),this.instructions.push([oe.CUSTOM,l,p,e,i,qn]),this.hitDetectionInstructions.push([oe.CUSTOM,l,p,e,r||i,qn]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),g=this.appendFlatLineCoordinates(u,0,u.length,o,!1,!1),this.instructions.push([oe.CUSTOM,l,g,e,i,li]),this.hitDetectionInstructions.push([oe.CUSTOM,l,g,e,r||i,li]);break;case"MultiPoint":u=e.getFlatCoordinates(),g=this.appendFlatPointCoordinates(u,o),g>l&&(this.instructions.push([oe.CUSTOM,l,g,e,i,li]),this.hitDetectionInstructions.push([oe.CUSTOM,l,g,e,r||i,li]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),g=this.coordinates.length,this.instructions.push([oe.CUSTOM,l,g,e,i]),this.hitDetectionInstructions.push([oe.CUSTOM,l,g,e,r||i]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[oe.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[oe.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,s,o=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==oe.END_GEOMETRY?o=t:s==oe.BEGIN_GEOMETRY&&(r[2]=t,gu(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const r=e.getColor();i.fillStyle=Ft(r||qt)}else i.fillStyle=void 0;if(t){const r=t.getColor();i.strokeStyle=Ft(r||On);const s=t.getLineCap();i.lineCap=s!==void 0?s:Dr;const o=t.getLineDash();i.lineDash=o?o.slice():Mn;const l=t.getLineDashOffset();i.lineDashOffset=l||Rn;const u=t.getLineJoin();i.lineJoin=u!==void 0?u:Ji;const g=t.getWidth();i.lineWidth=g!==void 0?g:Dn;const p=t.getMiterLimit();i.miterLimit=p!==void 0?p:Fn,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[oe.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[oe.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,l=e.lineJoin,u=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!qi(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=l||e.currentLineWidth!=u||e.currentMiterLimit!=g)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=l,e.currentLineWidth=u,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[oe.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Mu(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Gs(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const Yn=md;class yd extends Yn{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([oe.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([oe.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([oe.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([oe.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const wd=yd;class _d extends Yn{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),l=[oe.MOVE_TO_LINE_TO,s,o];return this.instructions.push(l),this.hitDetectionInstructions.push(l),i}drawLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([oe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Mn,Rn],Ti);const o=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(ai),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([oe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Ti);const o=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let g=0;for(let p=0,y=o.length;p<y;++p)g=this.drawFlatCoordinates_(l,g,o[p],u);this.hitDetectionInstructions.push(ai),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(ai),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(ai),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Ti)}}const xd=_d;function co(n,e,t,i,r,s,o){const l=(t-e)/i;if(l<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}const u=new Array(l);u[0]=1,u[l-1]=1;const g=[e,t-i];let p=0;for(;g.length>0;){const y=g.pop(),w=g.pop();let _=0;const E=n[w],I=n[w+1],x=n[y],T=n[y+1];for(let S=w+i;S<y;S+=i){const b=n[S],F=n[S+1],B=Ku(b,F,E,I,x,T);B>_&&(p=S,_=B)}_>r&&(u[(p-e)/i]=1,w+i<p&&g.push(w,p),p+i<y&&g.push(p,y))}for(let y=0;y<l;++y)u[y]&&(s[o++]=n[e+y*i],s[o++]=n[e+y*i+1]);return o}function Sd(n,e,t,i,r,s,o,l){for(let u=0,g=t.length;u<g;++u){const p=t[u];o=co(n,e,p,i,r,s,o),l.push(o),e=p}return o}function Pi(n,e){return e*Math.round(n/e)}function Ed(n,e,t,i,r,s,o){if(e==t)return o;let l=Pi(n[e],r),u=Pi(n[e+1],r);e+=i,s[o++]=l,s[o++]=u;let g,p;do if(g=Pi(n[e],r),p=Pi(n[e+1],r),e+=i,e==t)return s[o++]=g,s[o++]=p,o;while(g==l&&p==u);for(;e<t;){const y=Pi(n[e],r),w=Pi(n[e+1],r);if(e+=i,y==g&&w==p)continue;const _=g-l,E=p-u,I=y-l,x=w-u;if(_*x==E*I&&(_<0&&I<_||_==I||_>0&&I>_)&&(E<0&&x<E||E==x||E>0&&x>E)){g=y,p=w;continue}s[o++]=g,s[o++]=p,l=g,u=p,g=y,p=w}return s[o++]=g,s[o++]=p,o}function xl(n,e,t,i,r,s,o,l){for(let u=0,g=t.length;u<g;++u){const p=t[u];o=Ed(n,e,p,i,r,s,o),l.push(o),e=p}return o}function Cd(n,e,t,i,r,s,o,l){for(let u=0,g=t.length;u<g;++u){const p=t[u],y=[];o=xl(n,e,p,i,r,s,o,y),l.push(y),e=p[p.length-1]}return o}class Id extends Yn{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,o=s.fillStyle!==void 0,l=s.strokeStyle!==void 0,u=i.length;this.instructions.push(Ti),this.hitDetectionInstructions.push(Ti);for(let g=0;g<u;++g){const p=i[g],y=this.coordinates.length,w=this.appendFlatLineCoordinates(e,t,p,r,!0,!l),_=[oe.MOVE_TO_LINE_TO,y,w];this.instructions.push(_),this.hitDetectionInstructions.push(_),l&&(this.instructions.push(_l),this.hitDetectionInstructions.push(_l)),t=p}return o&&(this.instructions.push(Yr),this.hitDetectionInstructions.push(Yr)),l&&(this.instructions.push(ai),this.hitDetectionInstructions.push(ai)),t}drawCircle(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([oe.SET_FILL_STYLE,qt]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([oe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const g=[oe.CIRCLE,u];this.instructions.push(Ti,g),this.hitDetectionInstructions.push(Ti,g),i.fillStyle!==void 0&&(this.instructions.push(Yr),this.hitDetectionInstructions.push(Yr)),i.strokeStyle!==void 0&&(this.instructions.push(ai),this.hitDetectionInstructions.push(ai)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([oe.SET_FILL_STYLE,qt]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([oe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,o,u),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([oe.SET_FILL_STYLE,qt]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([oe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let g=0;for(let p=0,y=o.length;p<y;++p)g=this.drawFlatCoordinatess_(l,g,o[p],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=Pi(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}const Sl=Id;function bd(n,e,t,i,r){let s=t,o=t,l=0,u=0,g=t,p,y,w,_,E,I,x,T,S,b;for(y=t;y<i;y+=r){const F=e[y],B=e[y+1];E!==void 0&&(S=F-E,b=B-I,_=Math.sqrt(S*S+b*b),x!==void 0&&(u+=w,p=Math.acos((x*S+T*b)/(w*_)),p>n&&(u>l&&(l=u,s=g,o=y),u=0,g=y-r)),w=_,x=S,T=b),E=F,I=B}return u+=_,u>l?[g,y]:[s,o]}const Xn={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Td extends Yn{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let l=o.length;const u=e.getType();let g=null,p=e.getStride();if(s.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!pt(this.getBufferedMaxExtent(),e.getExtent()))return;let y;if(g=e.getFlatCoordinates(),u=="LineString")y=[g.length];else if(u=="MultiLineString")y=e.getEnds();else if(u=="Polygon")y=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const I=e.getEndss();y=[];for(let x=0,T=I.length;x<T;++x)y.push(I[x][0])}this.beginGeometry(e,t);const w=s.textAlign;let _=0,E;for(let I=0,x=y.length;I<x;++I){if(w==null){const S=bd(s.maxAngle,g,_,y[I],p);_=S[0],E=S[1]}else E=y[I];for(let S=_;S<E;S+=p)o.push(g[S],g[S+1]);const T=o.length;_=y[I],this.drawChars_(l,T),l=T}this.endGeometry(t)}else{let y=s.overflow?null:[];switch(u){case"Point":case"MultiPoint":g=e.getFlatCoordinates();break;case"LineString":g=e.getFlatMidpoint();break;case"Circle":g=e.getCenter();break;case"MultiLineString":g=e.getFlatMidpoints(),p=2;break;case"Polygon":g=e.getFlatInteriorPoint(),s.overflow||y.push(g[2]/this.resolution),p=3;break;case"MultiPolygon":const x=e.getFlatInteriorPoints();g=[];for(let T=0,S=x.length;T<S;T+=3)s.overflow||y.push(x[T+2]/this.resolution),g.push(x[T],x[T+1]);if(g.length===0)return;p=2;break}const w=this.appendFlatPointCoordinates(g,p);if(w===l)return;if(y&&(w-l)/2!==g.length/p){let x=l/2;y=y.filter((T,S)=>{const b=o[(x+S)*2]===g[S*p]&&o[(x+S)*2+1]===g[S*p+1];return b||--x,b})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let _=s.padding;if(_!=Ii&&(s.scale[0]<0||s.scale[1]<0)){let x=s.padding[0],T=s.padding[1],S=s.padding[2],b=s.padding[3];s.scale[0]<0&&(T=-T,b=-b),s.scale[1]<0&&(x=-x,S=-S),_=[x,T,S,b]}const E=this.pixelRatio;this.instructions.push([oe.DRAW_IMAGE,l,w,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,_==Ii?Ii:_.map(function(x){return x*E}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const I=1/E;this.hitDetectionInstructions.push([oe.DRAW_IMAGE,l,w,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[I,I],NaN,void 0,this.declutterImageWithText_,_,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||kn,justify:t.justify,textBaseline:t.textBaseline||Nr,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,l=this.fillKey_;this.saveTextStates_();const u=this.pixelRatio,g=Xn[r.textBaseline],p=this.textOffsetY_*u,y=this.text_,w=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([oe.DRAW_CHARS,e,t,g,r.overflow,l,r.maxAngle,u,p,s,w*u,y,o,1]),this.hitDetectionInstructions.push([oe.DRAW_CHARS,e,t,g,r.overflow,l,r.maxAngle,1,p,s,w,y,o,1/u])}setTextStyle(e,t){let i,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Ft(o.getColor()||qt)):(r=null,this.textFillState_=r);const l=e.getStroke();if(!l)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const E=l.getLineDash(),I=l.getLineDashOffset(),x=l.getWidth(),T=l.getMiterLimit();s.lineCap=l.getLineCap()||Dr,s.lineDash=E?E.slice():Mn,s.lineDashOffset=I===void 0?Rn:I,s.lineJoin=l.getLineJoin()||Ji,s.lineWidth=x===void 0?Dn:x,s.miterLimit=T===void 0?Fn:T,s.strokeStyle=Ft(l.getColor()||On)}i=this.textState_;const u=e.getFont()||qa;yc(u);const g=e.getScaleArray();i.overflow=e.getOverflow(),i.font=u,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||Nr,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Ii,i.scale=g===void 0?[1,1]:g;const p=e.getOffsetX(),y=e.getOffsetY(),w=e.getRotateWithView(),_=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=p===void 0?0:p,this.textOffsetY_=y===void 0?0:y,this.textRotateWithView_=w===void 0?!1:w,this.textRotation_=_===void 0?0:_,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Me(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+Me(r.fillStyle):""}this.declutterImageWithText_=t}}const Pd={Circle:Sl,Default:Yn,Image:wd,LineString:xd,Polygon:Sl,Text:Td};class Ad{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];if(s===void 0){const o=Pd[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}const El=Ad;class Ld extends Ds{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return se()}getData(e){return null}prepareFrame(e){return se()}renderFrame(e,t){return se()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return function(r,s){const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(t,r,s,o)}.bind(this)}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){e.target.getState()===ve.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ve.LOADED&&t!=ve.ERROR&&e.addEventListener(We.CHANGE,this.boundHandleImageChange_),t==ve.IDLE&&(e.load(),t=e.getState()),t==ve.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Md=Ld;class Rd extends yi{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}const Fd=Rd,Cl=[];let nn=null;function Od(){const n=document.createElement("canvas");n.width=1,n.height=1,nn=n.getContext("2d")}class kd extends Md{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=ii(),this.pixelTransform=ii(),this.inversePixelTransform=ii(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){nn||Od(),nn.clearRect(0,0,1,1);let r;try{nn.drawImage(e,t,i,1,1,0,0,1,1),r=nn.getImageData(0,0,1,1).data}catch{return nn=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&qi(kr(e.style.backgroundColor),kr(i)))){const l=e.firstElementChild;l instanceof HTMLCanvasElement&&(o=l.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=r;let l=s.style;l.position="absolute",l.width="100%",l.height="100%",o=vt();const u=o.canvas;s.appendChild(u),l=u.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=Hi(i),s=br(i),o=Cr(i),l=Er(i);at(t.coordinateToPixelTransform,r),at(t.coordinateToPixelTransform,s),at(t.coordinateToPixelTransform,o),at(t.coordinateToPixelTransform,l);const u=this.inversePixelTransform;at(u,r),at(u,s),at(u,o),at(u,l),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new Fd(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(to.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(to.POSTRENDER,e,t)}getRenderTransform(e,t,i,r,s,o,l){const u=s/2,g=o/2,p=r/t,y=-p,w=-e[0]+l,_=-e[1];return Pn(this.tempTransform,u,g,p,y,-i,w,_)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const Dd=kd;function Nd(n,e,t,i,r,s,o,l,u,g,p,y){let w=n[e],_=n[e+1],E=0,I=0,x=0,T=0;function S(){E=w,I=_,e+=i,w=n[e],_=n[e+1],T+=x,x=Math.sqrt((w-E)*(w-E)+(_-I)*(_-I))}do S();while(e<t-i&&T+x<s);let b=x===0?0:(s-T)/x;const F=Wt(E,w,b),B=Wt(I,_,b),X=e-i,Y=T,j=s+l*u(g,r,p);for(;e<t-i&&T+x<j;)S();b=x===0?0:(j-T)/x;const J=Wt(E,w,b),ae=Wt(I,_,b);let he;if(y){const le=[F,B,J,ae];ka(le,0,4,2,y,le,le),he=le[0]>le[2]}else he=F>J;const fe=Math.PI,pe=[],Ve=X+i===e;e=X,x=0,T=Y,w=n[e],_=n[e+1];let re;if(Ve){S(),re=Math.atan2(_-I,w-E),he&&(re+=re>0?-fe:fe);const le=(J+F)/2,ue=(ae+B)/2;return pe[0]=[le,ue,(j-s)/2,re,r],pe}r=r.replace(/\n/g," ");for(let le=0,ue=r.length;le<ue;){S();let ye=Math.atan2(_-I,w-E);if(he&&(ye+=ye>0?-fe:fe),re!==void 0){let je=ye-re;if(je+=je>fe?-2*fe:je<-fe?2*fe:0,Math.abs(je)>o)return null}re=ye;const qe=le;let Re=0;for(;le<ue;++le){const je=he?ue-le-1:le,et=l*u(g,r[je],p);if(e+i<t&&T+x<s+Re+et/2)break;Re+=et}if(le===qe)continue;const He=he?r.substring(ue-qe,ue-le):r.substring(qe,le);b=x===0?0:(s+Re/2-T)/x;const K=Wt(E,w,b),vn=Wt(I,_,b);pe.push([K,vn,Re/2,ye,He]),s+=Re}return pe}function Il(n,e,t,i){let r=n[e],s=n[e+1],o=0;for(let l=e+i;l<t;l+=i){const u=n[l],g=n[l+1];o+=Math.sqrt((u-r)*(u-r)+(g-s)*(g-s)),r=u,s=g}return o}const rn=Ct(),hi=[],Yt=[],Xt=[],ui=[];function bl(n){return n[3].declutterBox}const Gd=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Tl(n,e){return(e==="start"||e==="end")&&!Gd.test(n)&&(e=e==="start"?"left":"right"),Xn[e]}function Bd(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class zd{constructor(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=ii(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,l=i?this.fillStates[i]:null,u=this.textStates[t],g=this.pixelRatio,p=[u.scale[0]*g,u.scale[1]*g],y=Array.isArray(e),w=u.justify?Xn[u.justify]:Tl(Array.isArray(e)?e[0]:e,u.textAlign||kn),_=r&&o.lineWidth?o.lineWidth:0,E=y?e:e.split(`
`).reduce(Bd,[]),{width:I,height:x,widths:T,heights:S,lineWidths:b}=_c(u,E),F=I+_,B=[],X=(F+2)*p[0],Y=(x+_)*p[1],j={width:X<0?Math.floor(X):Math.ceil(X),height:Y<0?Math.floor(Y):Math.ceil(Y),contextInstructions:B};(p[0]!=1||p[1]!=1)&&B.push("scale",p),r&&(B.push("strokeStyle",o.strokeStyle),B.push("lineWidth",_),B.push("lineCap",o.lineCap),B.push("lineJoin",o.lineJoin),B.push("miterLimit",o.miterLimit),B.push("setLineDash",[o.lineDash]),B.push("lineDashOffset",o.lineDashOffset)),i&&B.push("fillStyle",l.fillStyle),B.push("textBaseline","middle"),B.push("textAlign","center");const J=.5-w;let ae=w*F+J*_;const he=[],fe=[];let pe=0,Ve=0,re=0,le=0,ue;for(let ye=0,qe=E.length;ye<qe;ye+=2){const Re=E[ye];if(Re===`
`){Ve+=pe,pe=0,ae=w*F+J*_,++le;continue}const He=E[ye+1]||u.font;He!==ue&&(r&&he.push("font",He),i&&fe.push("font",He),ue=He),pe=Math.max(pe,S[re]);const K=[Re,ae+J*T[re]+w*(T[re]-b[le]),.5*(_+pe)+Ve];ae+=T[re],r&&he.push("strokeText",K),i&&fe.push("fillText",K),++re}return Array.prototype.push.apply(B,he),Array.prototype.push.apply(B,fe),this.labels_[s]=j,j}replayTextBackground_(e,t,i,r,s,o,l){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),l&&(this.setStrokeStyle_(e,l),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,o,l,u,g,p,y,w,_,E,I,x){l*=w[0],u*=w[1];let T=i-l,S=r-u;const b=s+g>e?e-g:s,F=o+p>t?t-p:o,B=E[3]+b*w[0]+E[1],X=E[0]+F*w[1]+E[2],Y=T-E[3],j=S-E[0];(I||y!==0)&&(hi[0]=Y,ui[0]=Y,hi[1]=j,Yt[1]=j,Yt[0]=Y+B,Xt[0]=Yt[0],Xt[1]=j+X,ui[1]=Xt[1]);let J;return y!==0?(J=Pn(ii(),i,r,1,1,y,-i,-r),at(J,hi),at(J,Yt),at(J,Xt),at(J,ui),ni(Math.min(hi[0],Yt[0],Xt[0],ui[0]),Math.min(hi[1],Yt[1],Xt[1],ui[1]),Math.max(hi[0],Yt[0],Xt[0],ui[0]),Math.max(hi[1],Yt[1],Xt[1],ui[1]),rn)):ni(Math.min(Y,Y+B),Math.min(j,j+X),Math.max(Y,Y+B),Math.max(j,j+X),rn),_&&(T=Math.round(T),S=Math.round(S)),{drawImageX:T,drawImageY:S,drawImageW:b,drawImageH:F,originX:g,originY:p,declutterBox:{minX:rn[0],minY:rn[1],maxX:rn[2],maxY:rn[3],value:x},canvasTransform:J,scale:w}}replayImageOrLabel_(e,t,i,r,s,o,l){const u=!!(o||l),g=r.declutterBox,p=e.canvas,y=l?l[2]*r.scale[0]/2:0;return g.minX-y<=p.width/t&&g.maxX+y>=0&&g.minY-y<=p.height/t&&g.maxY+y>=0&&(u&&this.replayTextBackground_(e,hi,Yt,Xt,ui,o,l),xc(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=at(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],o=this.createLabel(e,t,r,i),l=this.strokeStates[i],u=this.pixelRatio,g=Tl(Array.isArray(e)?e[0]:e,s.textAlign||kn),p=Xn[s.textBaseline||Nr],y=l&&l.lineWidth?l.lineWidth:0,w=o.width/u-2*s.scale[0],_=g*w+2*(.5-g)*y,E=p*o.height/u+2*(.5-p)*y;return{label:o,anchorX:_,anchorY:E}}execute_(e,t,i,r,s,o,l,u){let g;this.pixelCoordinates_&&qi(i,this.renderedTransform_)?g=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),g=Ci(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),bu(this.renderedTransform_,i));let p=0;const y=r.length;let w=0,_,E,I,x,T,S,b,F,B,X,Y,j,J=0,ae=0,he=null,fe=null;const pe=this.coordinateCache_,Ve=this.viewRotation_,re=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,le={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ve},ue=this.instructions!=r||this.overlaps?0:200;let ye,qe,Re,He;for(;p<y;){const K=r[p];switch(K[0]){case oe.BEGIN_GEOMETRY:ye=K[1],He=K[3],ye.getGeometry()?l!==void 0&&!pt(l,He.getExtent())?p=K[2]+1:++p:p=K[2];break;case oe.BEGIN_PATH:J>ue&&(this.fill_(e),J=0),ae>ue&&(e.stroke(),ae=0),!J&&!ae&&(e.beginPath(),x=NaN,T=NaN),++p;break;case oe.CIRCLE:w=K[1];const je=g[w],et=g[w+1],mn=g[w+2],yn=g[w+3],_t=mn-je,$n=yn-et,Fi=Math.sqrt(_t*_t+$n*$n);e.moveTo(je+Fi,et),e.arc(je,et,Fi,0,2*Math.PI,!0),++p;break;case oe.CLOSE_PATH:e.closePath(),++p;break;case oe.CUSTOM:w=K[1],_=K[2];const ms=K[3],Oi=K[4],fi=K.length==6?K[5]:void 0;le.geometry=ms,le.feature=ye,p in pe||(pe[p]=[]);const ki=pe[p];fi?fi(g,w,_,2,ki):(ki[0]=g[w],ki[1]=g[w+1],ki.length=2),Oi(ki,le),++p;break;case oe.DRAW_IMAGE:w=K[1],_=K[2],F=K[3],E=K[4],I=K[5];let er=K[6];const Xo=K[7],Ho=K[8],jo=K[9],ys=K[10];let tr=K[11];const Zo=K[12];let wn=K[13];const ws=K[14],jt=K[15];if(!F&&K.length>=20){B=K[19],X=K[20],Y=K[21],j=K[22];const tt=this.drawLabelWithPointPlacement_(B,X,Y,j);F=tt.label,K[3]=F;const mi=K[23];E=(tt.anchorX-mi)*this.pixelRatio,K[4]=E;const ht=K[24];I=(tt.anchorY-ht)*this.pixelRatio,K[5]=I,er=F.height,K[6]=er,wn=F.width,K[13]=wn}let ir;K.length>25&&(ir=K[25]);let gi,_n,Be;K.length>17?(gi=K[16],_n=K[17],Be=K[18]):(gi=Ii,_n=!1,Be=!1),ys&&re?tr+=Ve:!ys&&!re&&(tr-=Ve);let Zt=0;for(;w<_;w+=2){if(ir&&ir[Zt++]<wn/this.pixelRatio)continue;const tt=this.calculateImageOrLabelDimensions_(F.width,F.height,g[w],g[w+1],wn,er,E,I,Ho,jo,tr,Zo,s,gi,_n||Be,ye),mi=[e,t,F,tt,Xo,_n?he:null,Be?fe:null];if(u){if(ws==="none")continue;if(ws==="obstacle"){u.insert(tt.declutterBox);continue}else{let ht,it;if(jt){const ze=_-w;if(!jt[ze]){jt[ze]=mi;continue}if(ht=jt[ze],delete jt[ze],it=bl(ht),u.collides(it))continue}if(u.collides(tt.declutterBox))continue;ht&&(u.insert(it),this.replayImageOrLabel_.apply(this,ht)),u.insert(tt.declutterBox)}}this.replayImageOrLabel_.apply(this,mi)}++p;break;case oe.DRAW_CHARS:const nr=K[1],_s=K[2],Kt=K[3],Ko=K[4];j=K[5];const xs=K[6],rr=K[7],pi=K[8];Y=K[9];const Di=K[10];B=K[11],X=K[12];const xn=[K[13],K[13]],sr=this.textStates[X],Ni=sr.font,Gi=[sr.scale[0]*rr,sr.scale[1]*rr];let vi;Ni in this.widths_?vi=this.widths_[Ni]:(vi={},this.widths_[Ni]=vi);const or=Il(g,nr,_s,2),Ss=Math.abs(Gi[0])*Xa(Ni,B,vi);if(Ko||Ss<=or){const tt=this.textStates[X].textAlign,mi=(or-Ss)*Xn[tt],ht=Nd(g,nr,_s,2,B,mi,xs,Math.abs(Gi[0]),Xa,Ni,vi,re?0:this.viewRotation_);e:if(ht){const it=[];let ze,Sn,Ze,Ke,nt;if(Y)for(ze=0,Sn=ht.length;ze<Sn;++ze){nt=ht[ze],Ze=nt[4],Ke=this.createLabel(Ze,X,"",Y),E=nt[2]+(Gi[0]<0?-Di:Di),I=Kt*Ke.height+(.5-Kt)*2*Di*Gi[1]/Gi[0]-pi;const _e=this.calculateImageOrLabelDimensions_(Ke.width,Ke.height,nt[0],nt[1],Ke.width,Ke.height,E,I,0,0,nt[3],xn,!1,Ii,!1,ye);if(u&&u.collides(_e.declutterBox))break e;it.push([e,t,Ke,_e,1,null,null])}if(j)for(ze=0,Sn=ht.length;ze<Sn;++ze){nt=ht[ze],Ze=nt[4],Ke=this.createLabel(Ze,X,j,""),E=nt[2],I=Kt*Ke.height-pi;const _e=this.calculateImageOrLabelDimensions_(Ke.width,Ke.height,nt[0],nt[1],Ke.width,Ke.height,E,I,0,0,nt[3],xn,!1,Ii,!1,ye);if(u&&u.collides(_e.declutterBox))break e;it.push([e,t,Ke,_e,1,null,null])}u&&u.load(it.map(bl));for(let _e=0,Jo=it.length;_e<Jo;++_e)this.replayImageOrLabel_.apply(this,it[_e])}}++p;break;case oe.END_GEOMETRY:if(o!==void 0){ye=K[1];const tt=o(ye,He);if(tt)return tt}++p;break;case oe.FILL:ue?J++:this.fill_(e),++p;break;case oe.MOVE_TO_LINE_TO:for(w=K[1],_=K[2],qe=g[w],Re=g[w+1],S=qe+.5|0,b=Re+.5|0,(S!==x||b!==T)&&(e.moveTo(qe,Re),x=S,T=b),w+=2;w<_;w+=2)qe=g[w],Re=g[w+1],S=qe+.5|0,b=Re+.5|0,(w==_-2||S!==x||b!==T)&&(e.lineTo(qe,Re),x=S,T=b);++p;break;case oe.SET_FILL_STYLE:he=K,this.alignFill_=K[2],J&&(this.fill_(e),J=0,ae&&(e.stroke(),ae=0)),e.fillStyle=K[1],++p;break;case oe.SET_STROKE_STYLE:fe=K,ae&&(e.stroke(),ae=0),this.setStrokeStyle_(e,K),++p;break;case oe.STROKE:ue?ae++:e.stroke(),++p;break;default:++p;break}}J&&this.fill_(e),ae&&e.stroke()}execute(e,t,i,r,s,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}}const Ud=zd,fo=["Polygon","Circle","LineString","Image","Text","Default"];class Wd{constructor(e,t,i,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ii(),this.createExecutors_(s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);const r=e[t];for(const s in r){const o=r[s];i[s]=new Ud(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,o){r=Math.round(r);const l=r*2+1,u=Pn(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=vt(l,l));const p=this.hitDetectionContext_;p.canvas.width!==l||p.canvas.height!==l?(p.canvas.width=l,p.canvas.height=l):g||p.clearRect(0,0,l,l);let y;this.renderBuffer_!==void 0&&(y=Ct(),An(y,e),Gs(y,t*(this.renderBuffer_+r),y));const w=Vd(r);let _;function E(B,X){const Y=p.getImageData(0,0,l,l).data;for(let j=0,J=w.length;j<J;j++)if(Y[w[j]]>0){if(!o||_!=="Image"&&_!=="Text"||o.includes(B)){const ae=(w[j]-3)/4,he=r-ae%l,fe=r-(ae/l|0),pe=s(B,X,he*he+fe*fe);if(pe)return pe}p.clearRect(0,0,l,l);break}}const I=Object.keys(this.executorsByZIndex_).map(Number);I.sort(Vi);let x,T,S,b,F;for(x=I.length-1;x>=0;--x){const B=I[x].toString();for(S=this.executorsByZIndex_[B],T=fo.length-1;T>=0;--T)if(_=fo[T],b=S[_],b!==void 0&&(F=b.executeHitDetection(p,u,i,E,y),F))return F}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],o=t[3],l=[i,r,i,o,s,o,s,r];return Ci(l,0,8,2,e,l),l}isEmpty(){return Yi(this.executorsByZIndex_)}execute(e,t,i,r,s,o,l){const u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(Vi),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||fo;let g,p,y,w,_,E;for(l&&u.reverse(),g=0,p=u.length;g<p;++g){const I=u[g].toString();for(_=this.executorsByZIndex_[I],y=0,w=o.length;y<w;++y){const x=o[y];E=_[x],E!==void 0&&E.execute(e,t,i,r,s,l)}}this.maxExtent_&&e.restore()}}const go={};function Vd(n){if(go[n]!==void 0)return go[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const l=s*s+o*o;if(l>t)break;let u=i[l];u||(u=[],i[l]=u),u.push(((n+s)*e+(n+o))*4+3),s>0&&u.push(((n-s)*e+(n+o))*4+3),o>0&&(u.push(((n+s)*e+(n-o))*4+3),s>0&&u.push(((n-s)*e+(n-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return go[n]=r,r}const Pl=Wd,Xr={ANIMATING:0,INTERACTING:1},Ot=.5;function qd(n,e,t,i,r,s,o){const l=n[0]*Ot,u=n[1]*Ot,g=vt(l,u);g.imageSmoothingEnabled=!1;const p=g.canvas,y=new ja(g,Ot,r,null,o),w=t.length,_=Math.floor((256*256*256-1)/w),E={};for(let x=1;x<=w;++x){const T=t[x-1],S=T.getStyleFunction()||i;if(!i)continue;let b=S(T,s);if(!b)continue;Array.isArray(b)||(b=[b]);const F=x*_,B="#"+("000000"+F.toString(16)).slice(-6);for(let X=0,Y=b.length;X<Y;++X){const j=b[X],J=j.getGeometryFunction()(T);if(!J||!pt(r,J.getExtent()))continue;const ae=j.clone(),he=ae.getFill();he&&he.setColor(B);const fe=ae.getStroke();fe&&(fe.setColor(B),fe.setLineDash(null)),ae.setText(void 0);const pe=j.getImage();if(pe&&pe.getOpacity()!==0){const le=pe.getImageSize();if(!le)continue;const ue=vt(le[0],le[1],void 0,{alpha:!1}),ye=ue.canvas;ue.fillStyle=B,ue.fillRect(0,0,ye.width,ye.height),ae.setImage(new ml({img:ye,imgSize:le,anchor:pe.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:pe.getOrigin(),opacity:1,size:pe.getSize(),scale:pe.getScale(),rotation:pe.getRotation(),rotateWithView:pe.getRotateWithView()}))}const Ve=ae.getZIndex()||0;let re=E[Ve];re||(re={},E[Ve]=re,re.Polygon=[],re.Circle=[],re.LineString=[],re.Point=[]),re[J.getType().replace("Multi","")].push(J,ae)}}const I=Object.keys(E).map(Number).sort(Vi);for(let x=0,T=I.length;x<T;++x){const S=E[I[x]];for(const b in S){const F=S[b];for(let B=0,X=F.length;B<X;B+=2){y.setStyle(F[B+1]);for(let Y=0,j=e.length;Y<j;++Y)y.setTransform(e[Y]),y.drawGeometry(F[B])}}}return g.getImageData(0,0,p.width,p.height)}function Yd(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*Ot),s=Math.floor(Math.round(n[1])*Ot),o=(Rt(r,0,t.width-1)+Rt(s,0,t.height-1)*t.width)*4,l=t.data[o],u=t.data[o+1],p=t.data[o+2]+256*(u+256*l),y=Math.floor((256*256*256-1)/e.length);p&&p%y===0&&i.push(e[p/y-1])}return i}class Xd extends Dd{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ct(),this.wrappedRenderedExtent_=Ct(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,o=s.center,l=s.resolution,u=s.projection,g=s.rotation,p=u.getExtent(),y=this.getLayer().getSource(),w=t.pixelRatio,_=t.viewHints,E=!(_[Xr.ANIMATING]||_[Xr.INTERACTING]),I=this.compositionContext_,x=Math.round(t.size[0]*w),T=Math.round(t.size[1]*w),S=y.getWrapX()&&u.canWrapX(),b=S?Oe(p):null,F=S?Math.ceil((r[2]-p[2])/b)+1:1;let B=S?Math.floor((r[0]-p[0])/b):0;do{const X=this.getRenderTransform(o,l,g,w,x,T,B*b);e.execute(I,1,X,g,E,void 0,i)}while(++B<F)}setupCompositionContext_(){if(this.opacity_!==1){const e=vt(this.context.canvas.width,this.context.canvas.height,Cl);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,Ua(this.compositionContext_),Cl.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];Tu(this.pixelTransform,1/i,1/i),Pu(this.inversePixelTransform,this.pixelTransform);const s=Lu(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const o=this.context,l=o.canvas,u=this.replayGroup_,g=this.declutterExecutorGroup;if((!u||u.isEmpty())&&(!g||g.isEmpty()))return null;const p=Math.round(e.size[0]*i),y=Math.round(e.size[1]*i);l.width!=p||l.height!=y?(l.width=p,l.height=y,l.style.transform!==s&&(l.style.transform=s)):this.containerReused||o.clearRect(0,0,p,y),this.preRender(o,e);const w=e.viewState;w.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let _=!1,E=!0;if(r.extent&&this.clipping){const I=oc(r.extent);E=pt(I,e.extent),_=E&&!xi(I,e.extent),_&&this.clipUnrotated(this.compositionContext_,e,I)}return E&&this.renderWorlds(u,e),_&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==w.rotation&&(this.renderedRotation_=w.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(function(t){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];at(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,l=this.renderedProjection_,u=this.wrappedRenderedExtent_,g=this.getLayer(),p=[],y=i[0]*Ot,w=i[1]*Ot;p.push(this.getRenderTransform(r,s,o,Ot,y,w,0).slice());const _=g.getSource(),E=l.getExtent();if(_.getWrapX()&&l.canWrapX()&&!xi(E,u)){let I=u[0];const x=Oe(E);let T=0,S;for(;I<E[0];)--T,S=x*T,p.push(this.getRenderTransform(r,s,o,Ot,y,w,S).slice()),I+=x;for(T=0,I=u[2];I>E[2];)++T,S=x*T,p.push(this.getRenderTransform(r,s,o,Ot,y,w,S).slice()),I-=x}this.hitDetectionImageData_=qd(i,p,this.renderedFeatures_,g.getStyleFunction(),u,s,o)}t(Yd(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(e,t,i,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,l=t.viewState.rotation,u=this.getLayer(),g={},p=function(_,E,I){const x=Me(_),T=g[x];if(T){if(T!==!0&&I<T.distanceSq){if(I===0)return g[x]=!0,s.splice(s.lastIndexOf(T),1),r(_,u,E);T.geometry=E,T.distanceSq=I}}else{if(I===0)return g[x]=!0,r(_,u,E);s.push(g[x]={feature:_,layer:u,geometry:E,distanceSq:I,callback:r})}};let y;const w=[this.replayGroup_];return this.declutterExecutorGroup&&w.push(this.declutterExecutorGroup),w.some(_=>y=_.forEachFeatureAtCoordinate(e,o,l,i,p,_===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(E=>E.value):null)),y}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[Xr.ANIMATING],s=e.viewHints[Xr.INTERACTING],o=t.getUpdateWhileAnimating(),l=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!l&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const u=e.extent,g=e.viewState,p=g.projection,y=g.resolution,w=e.pixelRatio,_=t.getRevision(),E=t.getRenderBuffer();let I=t.getRenderOrder();I===void 0&&(I=Pc);const x=g.center.slice(),T=Gs(u,E*y),S=T.slice(),b=[T.slice()],F=p.getExtent();if(i.getWrapX()&&p.canWrapX()&&!xi(F,e.extent)){const re=Oe(F),le=Math.max(Oe(T)/2,re);T[0]=F[0]-le,T[2]=F[2]+le,Qu(x,p);const ue=ba(b[0],p);ue[0]<F[0]&&ue[2]<F[2]?b.push([ue[0]+re,ue[1],ue[2]+re,ue[3]]):ue[0]>F[0]&&ue[2]>F[2]&&b.push([ue[0]-re,ue[1],ue[2]-re,ue[3]])}if(this.ready&&this.renderedResolution_==y&&this.renderedRevision_==_&&this.renderedRenderOrder_==I&&xi(this.wrappedRenderedExtent_,T))return qi(this.renderedExtent_,S)||(this.hitDetectionImageData_=null,this.renderedExtent_=S),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const B=new El(Js(y,w),T,y,w);let X;this.getLayer().getDeclutter()&&(X=new El(Js(y,w),T,y,w));let Y;for(let re=0,le=b.length;re<le;++re)i.loadFeatures(b[re],y,p);const j=Ka(y,w);let J=!0;const ae=function(re){let le;const ue=re.getStyleFunction()||t.getStyleFunction();if(ue&&(le=ue(re,y)),le){const ye=this.renderFeature(re,j,le,B,Y,X);J=J&&!ye}}.bind(this),he=sc(T),fe=i.getFeaturesInExtent(he);I&&fe.sort(I);for(let re=0,le=fe.length;re<le;++re)ae(fe[re]);this.renderedFeatures_=fe,this.ready=J;const pe=B.finish(),Ve=new Pl(T,y,w,i.getOverlaps(),pe,t.getRenderBuffer());return X&&(this.declutterExecutorGroup=new Pl(T,y,w,i.getOverlaps(),X.finish(),t.getRenderBuffer())),this.renderedResolution_=y,this.renderedRevision_=_,this.renderedRenderOrder_=I,this.renderedExtent_=S,this.wrappedRenderedExtent_=T,this.renderedCenter_=x,this.renderedProjection_=p,this.replayGroup_=Ve,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,o){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let u=0,g=i.length;u<g;++u)l=Ja(r,e,i[u],t,this.boundHandleStyleImageChange_,s,o)||l;else l=Ja(r,e,i,t,this.boundHandleStyleImageChange_,s,o);return l}}const Hd=Xd;class jd extends vd{constructor(e){super(e)}createRenderer(){return new Hd(this)}}const Zd=jd;class po extends wi{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new po(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(gt(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=yt(e,We.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Kd(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Kd(n){if(typeof n=="function")return n;{let e;return Array.isArray(n)?e=n:(Ae(typeof n.getZIndex=="function",41),e=[n]),function(){return e}}}const Hr=po,wt={getOlVersion(){if(hu&&Os)return Os.split(".")[0];if(window&&window.ol){if(window.ol.util)return"6";if(window.ol.WebGLMap)return"5"}return"4"},toGeoJSON(n){return n?new mr().toGeoJSON(n):null},toSuperMapGeometry(n){return!n||!n.type?null:new mr().read(n,"FeatureCollection")[0].geometry},resolutionToScale(n,e,t){const i=39.37007874015748,r=Tn(t);return 1/(n*e*i*r)},toSuperMapBounds(n){return new ot(n[0],n[1],n[2],n[3])},toProcessingParam(n){if(n.length<1)return"";const e={},t=[];for(let i=0;i<n.length;i++){const r={x:n[i][0],y:n[i][1]};t.push(r)}return t.push(t[0]),e.type="REGION",e.points=t,e},scaleToResolution(n,e,t){const i=39.37007874015748,r=Tn(t);return 1/(n*e*i*r)},getMeterPerMapUnit:Tn,isArray:Jd,Csv2GeoJSON(n,e){e=e||{titles:["lon","lat"],latitudeTitle:"lat",longitudeTitle:"lon",fieldSeparator:",",lineSeparator:`
`,deleteDoubleQuotes:!0,firstLineTitles:!1};const i=[];if(typeof n=="string"){let o=e.titles;if(e.firstLineTitles){if(n=n.split(e.lineSeparator),n.length<2)return;o=n[0],n.splice(0,1),n=n.join(e.lineSeparator),o=o.trim().split(e.fieldSeparator);for(let l=0;l<o.length;l++)o[l]=r(o[l]);e.titles=o}for(let l=0;l<o.length;l++){let u=o[l].toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"_");(u===""||u==="_")&&(u=`prop-${l}`),i[l]=u}n=s(n)}return n;function r(o){return e.deleteDoubleQuotes&&(o=o.trim().replace(/^"/,"").replace(/"$/,"")),o}function s(o){const l={};l.type="FeatureCollection",l.features=[];const u=e.titles;o=o.split(e.lineSeparator);for(let g=0;g<o.length;g++){const p=o[g].trim().split(e.fieldSeparator),y=parseFloat(p[u.indexOf(e.longitudeTitle)]),w=parseFloat(p[u.indexOf(e.latitudeTitle)]),_=y<180&&y>-180&&w<90&&w>-90;if(!(p.length===u.length&&_))continue;const E={};E.type="Feature",E.geometry={},E.properties={},E.geometry.type="Point",E.geometry.coordinates=[y,w];for(let I=0;I<u.length;I++)u[I]!==e.latitudeTitle&&u[I]!==e.longitudeTitle&&(E.properties[i[I]]=r(p[I]));l.features.push(E)}return l}},createCanvasContext2D(n,e){const t=document.createElement("CANVAS");return n&&(t.width=n),e&&(t.height=e),t.getContext("2d")},supportWebGL2(){const n=document.createElement("canvas");return Boolean(n&&n.getContext("webgl2"))},isString:Al,isObject(n){return Object.prototype.toString.call(n)==="[object Object]"},trim(n=""){return n.replace(/(^\s*)|(\s*$)/g,"")},newGuid(n){let e=n||32,t="";for(let i=1;i<e;i++)t+=Math.floor(Math.random()*16).toString(16);return t},isNumber(n){if(n==="")return!1;let e=Number(n);return e===0?!0:!isNaN(e)},isMatchAdministrativeName:Ml,getHighestMatchAdministration(n,e){let t=n.filter(s=>Ml(s.properties.Name,e)),i=0,r=null;return t.forEach(s=>{let o=0;Array.from(new Set(s.properties.Name.split(""))).forEach(l=>{e.includes(l)&&o++}),o>i&&(i=o,r=s)}),r},setMask(n,e){if(!e||!((e instanceof Hr?e.getGeometry():e)instanceof Or)&&["MultiPolygon","Polygon"].indexOf(e.getType())<0)return;const i=e instanceof Hr?e:new Hr(e),r=new qr({fill:new Wr({color:"black"})}),s=new Zd({source:new al({features:[i],wrapX:!1})}),o=function(u){const g=Gc(u);u.context.globalCompositeOperation="destination-in",s.getSource().forEachFeature(function(p){g.drawFeature(p,r),u.context.globalCompositeOperation="source-over"})},l=Array.isArray(n)?n:[n];Ll(l),l.forEach(u=>{u.classNameBak_=u.className_,u.className_=`ol_mask_layer_${u.ol_uid}`,u.clipRender=o,u.extentBak_=u.getExtent(),u.setExtent(s.getSource().getExtent()),u.on("postrender",o),u.changed()})},unsetMask:Ll,getZoomByResolution(n,e){return ga(n,e)},scalesToResolutions(n,e,t,i,r,s){return fa(n,e,t,i,r)},getProjection(n,e){let t=Xe(`EPSG:${n.epsgCode}`);return n.type=="PCS_NON_EARTH"&&(t=new qs({extent:e,units:"m",code:"0"})),t||console.error(`The projection of EPSG:${n.epsgCode} is missing, please register the projection of EPSG:${n.epsgCode} first, refer to the documentation: https://iclient.supermap.io/web/introduction/leafletDevelop.html#multiProjection`),t}};function Al(n){return typeof n=="string"&&n.constructor===String}function Jd(n){return Object.prototype.toString.call(n)==="[object Array]"}function Ll(n){const e=Array.isArray(n)?n:[n];for(let t=0;t<e.length;t++){const i=e[t];!i.clipRender||(i.un("postrender",i.clipRender),i.className_=i.classNameBak_,i.setExtent(i.extentBak),delete i.classNameBak_,delete i.clipRender,delete i.extentBak_,i.changed())}}function Ml(n,e){if(Al(e)){let t=n.substr(0,2);return t==="\u5F20\u5BB6"&&(t=n.substr(0,3)),!!e.match(new RegExp(t))}return!1}const ge={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Qd(n){return Math.pow(n,3)}class $d extends wr{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(We.CHANGE)}release(){this.state===ge.ERROR&&this.setState(ge.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==ge.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==ge.LOADED){e.interimTile=null;break}else e.getState()==ge.LOADING?t=e:e.getState()==ge.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ge.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){se()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:Qd(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}const Rl=$d;class ef extends Rl{constructor(e,t,i,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ge.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ge.ERROR,this.unlistenImage_(),this.image_=tf(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ge.LOADED:this.state=ge.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ge.ERROR&&(this.state=ge.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ge.IDLE&&(this.state=ge.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=vl(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function tf(){const n=vt(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const nf=ef,Fl=.5,rf=10,Ol=.25;class sf{constructor(e,t,i,r,s,o){this.sourceProj_=e,this.targetProj_=t;let l={};const u=Fr(this.targetProj_,this.sourceProj_);this.transformInv_=function(S){const b=S[0]+"/"+S[1];return l[b]||(l[b]=u(S)),l[b]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Oe(r)==Oe(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Oe(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Oe(this.targetProj_.getExtent()):null;const g=Hi(i),p=br(i),y=Cr(i),w=Er(i),_=this.transformInv_(g),E=this.transformInv_(p),I=this.transformInv_(y),x=this.transformInv_(w),T=rf+(o?Math.max(0,Math.ceil(Math.log2(Vs(i)/(o*o*256*256)))):0);if(this.addQuad_(g,p,y,w,_,E,I,x,T),this.wrapsXInSource_){let S=1/0;this.triangles_.forEach(function(b,F,B){S=Math.min(S,b.source[0][0],b.source[1][0],b.source[2][0])}),this.triangles_.forEach(function(b){if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-S>this.sourceWorldWidth_/2){const F=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];F[0][0]-S>this.sourceWorldWidth_/2&&(F[0][0]-=this.sourceWorldWidth_),F[1][0]-S>this.sourceWorldWidth_/2&&(F[1][0]-=this.sourceWorldWidth_),F[2][0]-S>this.sourceWorldWidth_/2&&(F[2][0]-=this.sourceWorldWidth_);const B=Math.min(F[0][0],F[1][0],F[2][0]);Math.max(F[0][0],F[1][0],F[2][0])-B<this.sourceWorldWidth_/2&&(b.source=F)}}.bind(this))}l={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,l,u,g){const p=xa([s,o,l,u]),y=this.sourceWorldWidth_?Oe(p)/this.sourceWorldWidth_:null,w=this.sourceWorldWidth_,_=this.sourceProj_.canWrapX()&&y>.5&&y<1;let E=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const x=xa([e,t,i,r]);E=Oe(x)/this.targetWorldWidth_>Ol||E}!_&&this.sourceProj_.isGlobal()&&y&&(E=y>Ol||E)}if(!E&&this.maxSourceExtent_&&isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(p[3])&&!pt(p,this.maxSourceExtent_))return;let I=0;if(!E&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(u[0])||!isFinite(u[1]))){if(g>0)E=!0;else if(I=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(l[0])||!isFinite(l[1])?2:0)+(!isFinite(u[0])||!isFinite(u[1])?1:0),I!=1&&I!=2&&I!=4&&I!=8)return}if(g>0){if(!E){const x=[(e[0]+i[0])/2,(e[1]+i[1])/2],T=this.transformInv_(x);let S;_?S=(Lr(s[0],w)+Lr(l[0],w))/2-Lr(T[0],w):S=(s[0]+l[0])/2-T[0];const b=(s[1]+l[1])/2-T[1];E=S*S+b*b>this.errorThresholdSquared_}if(E){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const x=[(t[0]+i[0])/2,(t[1]+i[1])/2],T=this.transformInv_(x),S=[(r[0]+e[0])/2,(r[1]+e[1])/2],b=this.transformInv_(S);this.addQuad_(e,t,x,S,s,o,T,b,g-1),this.addQuad_(S,x,i,r,b,T,l,u,g-1)}else{const x=[(e[0]+t[0])/2,(e[1]+t[1])/2],T=this.transformInv_(x),S=[(i[0]+r[0])/2,(i[1]+r[1])/2],b=this.transformInv_(S);this.addQuad_(e,x,S,r,s,T,b,u,g-1),this.addQuad_(x,t,i,S,T,o,l,b,g-1)}return}}if(_){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(I&11)==0&&this.addTriangle_(e,i,r,s,l,u),(I&14)==0&&this.addTriangle_(e,i,t,s,l,o),I&&((I&13)==0&&this.addTriangle_(t,r,e,o,u,s),(I&7)==0&&this.addTriangle_(t,r,i,o,u,l))}calculateSourceExtent(){const e=Ct();return this.triangles_.forEach(function(t,i,r){const s=t.source;An(e,s[0]),An(e,s[1]),An(e,s[2])}),e}getTriangles(){return this.triangles_}}const kl=sf;let vo;const Dl=[];function Nl(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function mo(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-191.25)>2}function of(){if(vo===void 0){const n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Nl(n,4,5,4,0),Nl(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;vo=mo(e,0)||mo(e,4)||mo(e,8)}return vo}function yo(n,e,t,i){const r=rc(t,e,n);let s=Fa(e,i,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const l=n.getMetersPerUnit();l!==void 0&&(s/=l);const u=n.getExtent();if(!u||Bs(u,r)){const g=Fa(n,s,r)/s;isFinite(g)&&g>0&&(s/=g)}return s}function af(n,e,t,i){const r=Xi(t);let s=yo(n,e,r,i);return(!isFinite(s)||s<=0)&&Ia(t,function(o){return s=yo(n,e,o,i),isFinite(s)&&s>0}),s}function Gl(n,e,t,i,r,s,o,l,u,g,p,y){const w=vt(Math.round(t*n),Math.round(t*e),Dl);if(y||(w.imageSmoothingEnabled=!1),u.length===0)return w.canvas;w.scale(t,t);function _(F){return Math.round(F*t)/t}w.globalCompositeOperation="lighter";const E=Ct();u.forEach(function(F,B,X){Ea(E,F.extent)});const I=Oe(E),x=ri(E),T=vt(Math.round(t*I/i),Math.round(t*x/i));y||(T.imageSmoothingEnabled=!1);const S=t/i;u.forEach(function(F,B,X){const Y=F.extent[0]-E[0],j=-(F.extent[3]-E[3]),J=Oe(F.extent),ae=ri(F.extent);F.image.width>0&&F.image.height>0&&T.drawImage(F.image,g,g,F.image.width-2*g,F.image.height-2*g,Y*S,j*S,J*S,ae*S)});const b=Hi(o);return l.getTriangles().forEach(function(F,B,X){const Y=F.source,j=F.target;let J=Y[0][0],ae=Y[0][1],he=Y[1][0],fe=Y[1][1],pe=Y[2][0],Ve=Y[2][1];const re=_((j[0][0]-b[0])/s),le=_(-(j[0][1]-b[1])/s),ue=_((j[1][0]-b[0])/s),ye=_(-(j[1][1]-b[1])/s),qe=_((j[2][0]-b[0])/s),Re=_(-(j[2][1]-b[1])/s),He=J,K=ae;J=0,ae=0,he-=He,fe-=K,pe-=He,Ve-=K;const vn=[[he,fe,0,0,ue-re],[pe,Ve,0,0,qe-re],[0,0,he,fe,ye-le],[0,0,pe,Ve,Re-le]],je=Ju(vn);if(!!je){if(w.save(),w.beginPath(),of()||!y){w.moveTo(ue,ye);const et=4,mn=re-ue,yn=le-ye;for(let _t=0;_t<et;_t++)w.lineTo(ue+_((_t+1)*mn/et),ye+_(_t*yn/(et-1))),_t!=et-1&&w.lineTo(ue+_((_t+1)*mn/et),ye+_((_t+1)*yn/(et-1)));w.lineTo(qe,Re)}else w.moveTo(ue,ye),w.lineTo(re,le),w.lineTo(qe,Re);w.clip(),w.transform(je[0],je[2],je[1],je[3],re,le),w.translate(E[0]-He,E[3]-K),w.scale(i/t,-i/t),w.drawImage(T.canvas,0,0),w.restore()}}),p&&(w.save(),w.globalCompositeOperation="source-over",w.strokeStyle="black",w.lineWidth=1,l.getTriangles().forEach(function(F,B,X){const Y=F.target,j=(Y[0][0]-b[0])/s,J=-(Y[0][1]-b[1])/s,ae=(Y[1][0]-b[0])/s,he=-(Y[1][1]-b[1])/s,fe=(Y[2][0]-b[0])/s,pe=-(Y[2][1]-b[1])/s;w.beginPath(),w.moveTo(ae,he),w.lineTo(j,J),w.lineTo(fe,pe),w.closePath(),w.stroke()}),w.restore()),w.canvas}class lf extends Rl{constructor(e,t,i,r,s,o,l,u,g,p,y,w){super(s,ge.IDLE,{interpolate:!!w}),this.renderEdges_=y!==void 0?y:!1,this.pixelRatio_=l,this.gutter_=u,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const _=r.getTileCoordExtent(this.wrappedTileCoord_),E=this.targetTileGrid_.getExtent();let I=this.sourceTileGrid_.getExtent();const x=E?Ir(_,E):_;if(Vs(x)===0){this.state=ge.EMPTY;return}const T=e.getExtent();T&&(I?I=Ir(I,T):I=T);const S=r.getResolution(this.wrappedTileCoord_[0]),b=af(e,i,x,S);if(!isFinite(b)||b<=0){this.state=ge.EMPTY;return}const F=p!==void 0?p:Fl;if(this.triangulation_=new kl(e,i,x,I,b*F,S),this.triangulation_.getTriangles().length===0){this.state=ge.EMPTY;return}this.sourceZ_=t.getZForResolution(b);let B=this.triangulation_.calculateSourceExtent();if(I&&(e.canWrapX()?(B[1]=Rt(B[1],I[1],I[3]),B[3]=Rt(B[3],I[1],I[3])):B=Ir(B,I)),!Vs(B))this.state=ge.EMPTY;else{const X=t.getTileRangeForExtentAndZ(B,this.sourceZ_);for(let Y=X.minX;Y<=X.maxX;Y++)for(let j=X.minY;j<=X.maxY;j++){const J=g(this.sourceZ_,Y,j,l);J&&this.sourceTiles_.push(J)}this.sourceTiles_.length===0&&(this.state=ge.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(function(t,i,r){t&&t.getState()==ge.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,e.length===0)this.state=ge.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(t),l=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Gl(r,s,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),o,u,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ge.LOADED}this.changed()}load(){if(this.state==ge.IDLE){this.state=ge.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,i,r){const s=t.getState();if(s==ge.IDLE||s==ge.LOADING){e++;const o=yt(t,We.CHANGE,function(l){const u=t.getState();(u==ge.LOADED||u==ge.ERROR||u==ge.EMPTY)&&(gt(o),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,r){t.getState()==ge.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(gt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ua(this.canvas_.getContext("2d")),Dl.push(this.canvas_),this.canvas_=null),super.release()}}const hf=lf;class uf{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Ae(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Ae(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(!!this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ae(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}const cf=uf;function Bl(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function jr(n,e,t){return n+"/"+e+"/"+t}function zl(n){return jr(n[0],n[1],n[2])}function df(n){return n.split("/").map(Number)}function ff(n){return(n[1]<<n[0])+n[2]}function gf(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,r):!0}class pf extends cf{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=df(e)[0];this.forEach(function(r){r.tileCoord[0]!==i&&(this.remove(zl(r.tileCoord)),r.release())}.bind(this))}}const Ul=pf,wo={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Wl{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function sn(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new Wl(n,e,t,i)}const vf=Wl,mf=42,Vl=256;function ql(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function yf(n,e,t,i,r){return!Ia(r,function(o){return!Ai(n,e,t,i,o[0],o[1])})}function Ai(n,e,t,i,r,s){let o=0,l=n[t-i],u=n[t-i+1];for(;e<t;e+=i){const g=n[e],p=n[e+1];u<=s?p>s&&(g-l)*(s-u)-(r-l)*(p-u)>0&&o++:p<=s&&(g-l)*(s-u)-(r-l)*(p-u)<0&&o--,l=g,u=p}return o!==0}function _o(n,e,t,i,r,s){if(t.length===0||!Ai(n,e,t[0],i,r,s))return!1;for(let o=1,l=t.length;o<l;++o)if(Ai(n,t[o-1],t[o],i,r,s))return!1;return!0}function wf(n,e,t,i,r,s){if(t.length===0)return!1;for(let o=0,l=t.length;o<l;++o){const u=t[o];if(_o(n,e,u,i,r,s))return!0;e=u[u.length-1]}return!1}function Zr(n,e,t,i,r){const s=Ca(Ct(),n,e,t,i);return pt(r,s)?xi(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:ql(n,e,t,i,function(o,l){return Gu(r,o,l)}):!1}function _f(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){if(Zr(n,e,t[s],i,r))return!0;e=t[s]}return!1}function Yl(n,e,t,i,r){return!!(Zr(n,e,t,i,r)||Ai(n,e,t,i,r[0],r[1])||Ai(n,e,t,i,r[0],r[3])||Ai(n,e,t,i,r[2],r[1])||Ai(n,e,t,i,r[2],r[3]))}function Xl(n,e,t,i,r){if(!Yl(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(yf(n,t[s-1],t[s],i,r)&&!Zr(n,t[s-1],t[s],i,r))return!1;return!0}function xf(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const l=t[s];if(Xl(n,e,l,i,r))return!0;e=l[l.length-1]}return!1}const Sf=[0,0,0],ci=5;class Ef{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ae(pu(this.resolutions_,function(r,s){return s-r},!0),17);let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ae(this.origins_.length==this.resolutions_.length,20));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Hi(i)),Ae(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ae(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Vl,Ae(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(r,s){const o=new vf(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const l=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(l.minX,o.minX),o.maxX=Math.min(l.maxX,o.maxX),o.minY=Math.max(l.minY,o.minY),o.maxY=Math.min(l.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let l=r.minY,u=r.maxY;l<=u;++l)i([t,s,l])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,l,u=null,g=e[0]-1;for(this.zoomFactor_===2?(o=e[1],l=e[2]):u=this.getTileCoordExtent(e,r);g>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),l=Math.floor(l/2),s=sn(o,o,l,l,i)):s=this.getTileRangeForExtentAndZ(u,g,i),t(g,s))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return sn(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return sn(s,o,s,o,i);if(this.zoomFactor_){const u=Math.pow(this.zoomFactor_,t-r),g=Math.floor(s*u),p=Math.floor(o*u);if(t<r)return sn(g,g,p,p,i);const y=Math.floor(u*(s+1))-1,w=Math.floor(u*(o+1))-1;return sn(g,y,p,w,i)}const l=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,t,i)}getTileRangeExtent(e,t,i){const r=this.getOrigin(e),s=this.getResolution(e),o=mt(this.getTileSize(e),this.tmpSize_),l=r[0]+t.minX*o[0]*s,u=r[0]+(t.maxX+1)*o[0]*s,g=r[1]+t.minY*o[1]*s,p=r[1]+(t.maxY+1)*o[1]*s;return ni(l,g,u,p,i)}getTileRangeForExtentAndZ(e,t,i){const r=Sf;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,r);const s=r[1],o=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,r),sn(s,r[1],o,r[2],i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=mt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=mt(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,l=i[1]-(e[2]+1)*s[1]*r,u=o+s[0]*r,g=l+s[1]*r;return ni(o,l,u,g,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const o=this.getZForResolution(i),l=i/this.getResolution(o),u=this.getOrigin(o),g=mt(this.getTileSize(o),this.tmpSize_);let p=l*(e-u[0])/i/g[0],y=l*(u[1]-t)/i/g[1];return r?(p=Rr(p,ci)-1,y=Rr(y,ci)-1):(p=Mr(p,ci),y=Mr(y,ci)),Bl(o,p,y,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const o=this.getOrigin(i),l=this.getResolution(i),u=mt(this.getTileSize(i),this.tmpSize_);let g=(e-o[0])/l/u[0],p=(o[1]-t)/l/u[1];return r?(g=Rr(g,ci)-1,p=Rr(p,ci)-1):(g=Mr(g,ci),p=Mr(p,ci)),Bl(i,g,p,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=ma(this.resolutions_,e,t||0);return Rt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Yl(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}const Kr=Ef;function Hl(n){let e=n.getDefaultTileGrid();return e||(e=Tf(n),n.setDefaultTileGrid(e)),e}function Cf(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=Zl(t);if(Bs(s,r))return e;{const o=Oe(s),l=Math.ceil((s[0]-r[0])/o);return r[0]+=o*l,n.getTileCoordForCoordAndZ(r,i)}}function If(n,e,t,i){i=i!==void 0?i:"top-left";const r=jl(n,e,t);return new Kr({extent:n,origin:Ou(n,i),resolutions:r,tileSize:t})}function bf(n){const e=n||{},t=e.extent||Xe("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:jl(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Kr(i)}function jl(n,e,t,i){e=e!==void 0?e:mf,t=mt(t!==void 0?t:Vl);const r=ri(n),s=Oe(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const o=e+1,l=new Array(o);for(let u=0;u<o;++u)l[u]=i/Math.pow(2,u);return l}function Tf(n,e,t,i){const r=Zl(n);return If(r,e,t,i)}function Zl(n){n=Xe(n);let e=n.getExtent();if(!e){const t=180*Tr.degrees/n.getMetersPerUnit();e=ni(-t,-t,t,t)}return e}class Pf extends eo{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&mt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new Ul(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,l,u,g;for(let p=i.minX;p<=i.maxX;++p)for(let y=i.minY;y<=i.maxY;++y)u=jr(t,p,y),g=!1,s.containsKey(u)&&(l=s.get(u),g=l.getState()===ge.LOADED,g&&(g=r(l)!==!1)),g||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(e,t,i,r,s){return se()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Hl(e)}getTileCacheForProjection(e){const t=this.getProjection();return Ae(t===null||Vt(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=mt(r.getTileSize(e),this.tmpSize);return s==1?o:rd(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=Cf(i,e,t)),gf(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}}class Af extends yi{constructor(e,t){super(e),this.tile=t}}const Lf=Pf;function Mf(n,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,l,u){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const g=o[0],p=e.getFullTileRange(g);return Ae(p,55),(p.getHeight()-o[2]-1).toString()})}}function Rf(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Mf(n[r],e);return Ff(i)}function Ff(n){return n.length===1?n[0]:function(e,t,i){if(e){const r=ff(e),s=Lr(r,n.length);return n[s](e,t,i)}else return}}function Of(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}class xo extends Lf{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===xo.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Me(t),r=t.getState();let s;r==ge.LOADING?(this.tileLoadingKeys_[i]=!0,s=wo.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==ge.ERROR?wo.TILELOADERROR:r==ge.LOADED?wo.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Af(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=Of(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Rf(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=jr(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const kf=xo;class Df extends kf{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Nf,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:nf,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Vt(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!Vt(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Vt(t,e)))return this.tileGrid;{const i=Me(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Hl(e)),this.tileGridForProjection[i]}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||Vt(t,e))return this.tileCache;{const i=Me(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Ul(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(e,t,i,r,s,o){const l=[e,t,i],u=this.getTileCoordForTileUrlFunction(l,s),g=u?this.tileUrlFunction(u,r,s):void 0,p=new this.tileClass(l,g!==void 0?ge.IDLE:ge.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=o,p.addEventListener(We.CHANGE,this.handleTileChange.bind(this)),p}getTile(e,t,i,r,s){const o=this.getProjection();if(!o||!s||Vt(o,s))return this.getTileInternal(e,t,i,r,o||s);{const l=this.getTileCacheForProjection(s),u=[e,t,i];let g;const p=zl(u);l.containsKey(p)&&(g=l.get(p));const y=this.getKey();if(g&&g.key==y)return g;{const w=this.getTileGridForProjection(o),_=this.getTileGridForProjection(s),E=this.getTileCoordForTileUrlFunction(u,s),I=new hf(o,w,s,_,u,E,this.getTilePixelRatio(r),this.getGutter(),function(x,T,S,b){return this.getTileInternal(x,T,S,b,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return I.key=y,g?(I.interimTile=g,I.refreshInterimChain(),l.replace(p,I)):l.set(p,I),I}}}getTileInternal(e,t,i,r,s){let o=null;const l=jr(e,t,i),u=this.getKey();if(!this.tileCache.containsKey(l))o=this.createTile_(e,t,i,r,s,u),this.tileCache.set(l,o);else if(o=this.tileCache.get(l),o.key!=u){const g=o;o=this.createTile_(e,t,i,r,s,u),g.getState()==ge.IDLE?o.interimTile=g.interimTile:o.interimTile=g,o.refreshInterimChain(),this.tileCache.replace(l,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=Xe(e);if(i){const r=Me(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function Nf(n,e){n.getImage().src=e}const Gf=Df;class Jr extends Or{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(gt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(!!this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(yt(this.geometries_[e],We.CHANGE,this.changed,this))}clone(){const e=new Jr(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<_i(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,l=s.length;o<l;++o)r=s[o].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){Sr(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)Ea(e,t[i].getExtent());return e}getGeometries(){return Kl(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const l=i[s],u=l.getSimplifiedGeometry(e);t.push(u),u!==l&&(r=!0)}if(r){const s=new Jr(null);return s.setGeometriesArray(t),s}else return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Xi(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(Kl(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Kl(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}const Bf=Jr;class zf{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Xe(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Xe(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return se()}readFeature(e,t){return se()}readFeatures(e,t){return se()}readGeometry(e,t){return se()}readProjection(e){return se()}writeFeature(e,t){return se()}writeFeatures(e,t){return se()}writeGeometry(e,t){return se()}}function Jl(n,e,t){const i=t?Xe(t.featureProjection):null,r=t?Xe(t.dataProjection):null;let s;if(i&&r&&!Vt(i,r)?s=(e?n.clone():n).transform(e?i:r,e?r:i):s=n,e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),l=function(u){for(let g=0,p=u.length;g<p;++g)u[g]=Math.round(u[g]*o)/o;return u};s===n&&(s=n.clone()),s.applyTransform(l)}return s}class Uf extends zf{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Qr(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Qr(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return se()}readFeaturesFromObject(e,t){return se()}readGeometry(e,t){return this.readGeometryFromObject(Qr(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return se()}readProjection(e){return this.readProjectionFromObject(Qr(e))}readProjectionFromObject(e){return se()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return se()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return se()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return se()}}function Qr(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}else return n!==null?n:null}const Wf=Uf;function Ql(n,e,t,i,r,s,o){const l=n[e],u=n[e+1],g=n[t]-l,p=n[t+1]-u;let y;if(g===0&&p===0)y=e;else{const w=((r-l)*g+(s-u)*p)/(g*g+p*p);if(w>1)y=t;else if(w>0){for(let _=0;_<i;++_)o[_]=Wt(n[e+_],n[t+_],w);o.length=i;return}else y=e}for(let w=0;w<i;++w)o[w]=n[y+w];o.length=i}function So(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const l=n[e],u=n[e+1],g=Ei(s,o,l,u);g>r&&(r=g),s=l,o=u}return r}function Eo(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const l=t[s];r=So(n,e,l,i,r),e=l}return r}function Vf(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const l=t[s];r=Eo(n,e,l,i,r),e=l[l.length-1]}return r}function Co(n,e,t,i,r,s,o,l,u,g,p){if(e==t)return g;let y,w;if(r===0)if(w=Ei(o,l,n[e],n[e+1]),w<g){for(y=0;y<i;++y)u[y]=n[e+y];return u.length=i,w}else return g;p=p||[NaN,NaN];let _=e+i;for(;_<t;)if(Ql(n,_-i,_,i,o,l,p),w=Ei(o,l,p[0],p[1]),w<g){for(g=w,y=0;y<i;++y)u[y]=p[y];u.length=i,_+=i}else _+=i*Math.max((Math.sqrt(w)-Math.sqrt(g))/r|0,1);if(s&&(Ql(n,t-i,e,i,o,l,p),w=Ei(o,l,p[0],p[1]),w<g)){for(g=w,y=0;y<i;++y)u[y]=p[y];u.length=i}return g}function Io(n,e,t,i,r,s,o,l,u,g,p){p=p||[NaN,NaN];for(let y=0,w=t.length;y<w;++y){const _=t[y];g=Co(n,e,_,i,r,s,o,l,u,g,p),e=_}return g}function qf(n,e,t,i,r,s,o,l,u,g,p){p=p||[NaN,NaN];for(let y=0,w=t.length;y<w;++y){const _=t[y];g=Io(n,e,_,i,r,s,o,l,u,g,p),e=_[_.length-1]}return g}function Yf(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function $r(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let l=0;l<i;++l)n[e++]=o[l]}return e}function bo(n,e,t,i,r){r=r||[];let s=0;for(let o=0,l=t.length;o<l;++o){const u=$r(n,e,t[o],i);r[s++]=u,e=u}return r.length=s,r}function Xf(n,e,t,i,r){r=r||[];let s=0;for(let o=0,l=t.length;o<l;++o){const u=bo(n,e,t[o],i,r[s]);u.length===0&&(u[0]=e),r[s++]=u,e=u[u.length-1]}return r.length=s,r}function $l(n,e,t,i,r,s,o){let l,u;const g=(t-e)/i;if(g===1)l=e;else if(g===2)l=e,u=r;else if(g!==0){let p=n[e],y=n[e+1],w=0;const _=[0];for(let x=e+i;x<t;x+=i){const T=n[x],S=n[x+1];w+=Math.sqrt((T-p)*(T-p)+(S-y)*(S-y)),_.push(w),p=T,y=S}const E=r*w,I=fu(_,E);I<0?(u=(E-_[-I-2])/(_[-I-1]-_[-I-2]),l=e+(-I-2)*i):l=e+I*i}o=o>1?o:2,s=s||new Array(o);for(let p=0;p<o;++p)s[p]=l===void 0?NaN:u===void 0?n[l+p]:Wt(n[l+p],n[l+i+p],u);return s}function To(n,e,t,i,r,s){if(t==e)return null;let o;if(r<n[e+i-1])return s?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return s?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);let l=e/i,u=t/i;for(;l<u;){const w=l+u>>1;r<n[(w+1)*i-1]?u=w:l=w+1}const g=n[l*i-1];if(r==g)return n.slice((l-1)*i,(l-1)*i+i);const p=n[(l+1)*i-1],y=(r-g)/(p-g);o=[];for(let w=0;w<i-1;++w)o.push(Wt(n[(l-1)*i+w],n[l*i+w],y));return o.push(r),o}function Hf(n,e,t,i,r,s,o){if(o)return To(n,e,t[t.length-1],i,r,s);let l;if(r<n[i-1])return s?(l=n.slice(0,i),l[i-1]=r,l):null;if(n[n.length-1]<r)return s?(l=n.slice(n.length-i),l[i-1]=r,l):null;for(let u=0,g=t.length;u<g;++u){const p=t[u];if(e!=p){if(r<n[e+i-1])return null;if(r<=n[p-1])return To(n,e,p,i,r,!1);e=p}}return null}class es extends bi{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){this.flatCoordinates?Ut(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new es(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<_i(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(So(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Co(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return ql(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,To(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return li(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return $l(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return Il(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=co(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new es(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Zr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$r(this.flatCoordinates,0,e,this.stride),this.changed()}}const Po=es;class ts extends bi{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{let r=this.getLayout();const s=e,o=[],l=[];for(let u=0,g=s.length;u<g;++u){const p=s[u];u===0&&(r=p.getLayout()),Ut(o,p.getFlatCoordinates()),l.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=l}}appendLineString(e){this.flatCoordinates?Ut(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new ts(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<_i(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Eo(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Io(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,Hf(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return qn(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Po(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,l=t.length;o<l;++o){const u=t[o],g=new Po(e.slice(s,u),i);r.push(g),s=u}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,l=r.length;o<l;++o){const u=r[o],g=$l(t,i,u,s,.5);Ut(e,g),i=u}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=Sd(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new ts(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return _f(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=bo(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const jf=ts;class Ao extends bi{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Ao(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=Ei(e,t,s[0],s[1]);if(o<r){const l=this.stride;for(let u=0;u<l;++u)i[u]=s[u];return i.length=l,o}else return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return Ru(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return zs(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yf(this.flatCoordinates,0,e,this.stride),this.changed()}}const is=Ao;class Lo extends bi{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?Ut(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new Lo(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<_i(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let l=0,u=s.length;l<u;l+=o){const g=Ei(e,t,s[l],s[l+1]);if(g<r){r=g;for(let p=0;p<o;++p)i[p]=s[l+p];i.length=o}}return r}getCoordinates(){return li(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new is(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const l=new is(e.slice(s,s+i),t);r.push(l)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,s=t.length;r<s;r+=i){const o=t[r],l=t[r+1];if(zs(e,o,l))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$r(this.flatCoordinates,0,e,this.stride),this.changed()}}const eh=Lo;function th(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const l=n[e],u=n[e+1];r+=o*l-s*u,s=l,o=u}return r/2}function ih(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const l=t[s];r+=th(n,e,l,i),e=l}return r}function Zf(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const l=t[s];r+=ih(n,e,l,i),e=l[l.length-1]}return r}class ns extends bi{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new ns(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<_i(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(So(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Co(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return th(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return li(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=co(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new ns(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$r(this.flatCoordinates,0,e,this.stride),this.changed()}}const nh=ns;function rh(n,e,t,i,r,s,o){let l,u,g,p,y,w,_;const E=r[s+1],I=[];for(let S=0,b=t.length;S<b;++S){const F=t[S];for(p=n[F-i],w=n[F-i+1],l=e;l<F;l+=i)y=n[l],_=n[l+1],(E<=w&&_<=E||w<=E&&E<=_)&&(g=(E-w)/(_-w)*(y-p)+p,I.push(g)),p=y,w=_}let x=NaN,T=-1/0;for(I.sort(Vi),p=I[0],l=1,u=I.length;l<u;++l){y=I[l];const S=Math.abs(y-p);S>T&&(g=(p+y)/2,_o(n,e,t,i,g,E)&&(x=g,T=S)),p=y}return isNaN(x)&&(x=r[s]),o?(o.push(x,E,T),o):[x,E,T]}function Kf(n,e,t,i,r){let s=[];for(let o=0,l=t.length;o<l;++o){const u=t[o];s=rh(n,e,u,i,r,2*o,s),e=u[u.length-1]}return s}function Jf(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function sh(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const l=n[e],u=n[e+1];r+=(l-s)*(u+o),s=l,o=u}return r===0?void 0:r>0}function oh(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const l=t[s],u=sh(n,e,l,i);if(s===0){if(r&&u||!r&&!u)return!1}else if(r&&!u||!r&&u)return!1;e=l}return!0}function Qf(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const l=t[s];if(!oh(n,e,l,i,r))return!1;l.length&&(e=l[l.length-1])}return!0}function Mo(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const l=t[s],u=sh(n,e,l,i);(s===0?r&&u||!r&&!u:r&&!u||!r&&u)&&Jf(n,e,l,i),e=l}return e}function ah(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s)e=Mo(n,e,t[s],i,r);return e}class rs extends bi{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Ut(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new rs(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<_i(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Eo(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Io(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return _o(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return ih(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Mo(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,qn(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Xi(this.getExtent());this.flatInteriorPoint_=rh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new is(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new nh(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,l=i.length;o<l;++o){const u=i[o],g=new nh(t.slice(s,u),e);r.push(g),s=u}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;oh(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Mo(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=xl(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new rs(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return Xl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=bo(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const Ro=rs;function $f(n,e,t,i){const r=[];let s=Ct();for(let o=0,l=t.length;o<l;++o){const u=t[o];s=Sa(n,e,u[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=u[u.length-1]}return r}class ss extends bi{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let r=this.getLayout();const s=e,o=[],l=[];for(let u=0,g=s.length;u<g;++u){const p=s[u];u===0&&(r=p.getLayout());const y=o.length,w=p.getEnds();for(let _=0,E=w.length;_<E;++_)w[_]+=y;Ut(o,p.getFlatCoordinates()),l.push(w)}t=r,e=o,i=l}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Ut(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new ss(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<_i(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Vf(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),qf(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return wf(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Zf(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),ah(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,uo(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=$f(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Kf(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new eh(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Qf(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=ah(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=Cd(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new ss(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=t;return new Ro(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,l=i.length;o<l;++o){const u=i[o].slice(),g=u[u.length-1];if(s!==0)for(let y=0,w=u.length;y<w;++y)u[y]-=s;const p=new Ro(t.slice(s,g),e,u);r.push(p),s=g}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return xf(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=Xf(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const eg=ss;class tg extends Wf{constructor(e){e=e||{},super(),this.dataProjection=Xe(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Xe(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=Fo(i.geometry,t),s=new Hr;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let l=0,u=o.length;l<u;++l)r.push(this.readFeatureFromObject(o[l],t))}else r=[this.readFeatureFromObject(e,t)];return r}readGeometryFromObject(e,t){return Fo(e,t)}readProjectionFromObject(e){const t=e.crs;let i;return t?t.type=="name"?i=Xe(t.properties.name):t.type==="EPSG"?i=Xe("EPSG:"+t.properties.code):Ae(!1,36):i=this.dataProjection,i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=Oo(o,t),delete s[e.getGeometryName()]),Yi(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return Oo(e,this.adaptOptions(t))}}function Fo(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=ng(n);break}case"LineString":{t=rg(n);break}case"Polygon":{t=lg(n);break}case"MultiPoint":{t=og(n);break}case"MultiLineString":{t=sg(n);break}case"MultiPolygon":{t=ag(n);break}case"GeometryCollection":{t=ig(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return Jl(t,!1,e)}function ig(n,e){const t=n.geometries.map(function(i){return Fo(i,e)});return new Bf(t)}function ng(n){return new is(n.coordinates)}function rg(n){return new Po(n.coordinates)}function sg(n){return new jf(n.coordinates)}function og(n){return new eh(n.coordinates)}function ag(n){return new eg(n.coordinates)}function lg(n){return new Ro(n.coordinates)}function Oo(n,e){n=Jl(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=gg(n);break}case"LineString":{i=ug(n);break}case"Polygon":{i=pg(n,e);break}case"MultiPoint":{i=dg(n);break}case"MultiLineString":{i=cg(n);break}case"MultiPolygon":{i=fg(n,e);break}case"GeometryCollection":{i=hg(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function hg(n,e){e=Object.assign({},e),delete e.featureProjection;const t=n.getGeometriesArray().map(function(i){return Oo(i,e)});return{type:"GeometryCollection",geometries:t}}function ug(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function cg(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function dg(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function fg(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function gg(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function pg(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const os=tg;class on extends Gf{constructor(e){e=e||{},e.attributions=e.attributions||"Map Data <span>\xA9 <a href='http://support.supermap.com.cn/product/iServer.aspx' target='_blank'>SuperMap iServer</a></span> with <span>\xA9 <a href='https://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>",e.format=e.format?e.format:"png",super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:wt.getOlVersion()==="4"?e.logo:null,opaque:e.opaque,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:e.state,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:l,wrapX:e.wrapX!==void 0?e.wrapX:!1,cacheEnabled:e.cacheEnabled,layersID:e.layersID}),e.tileProxy&&(this.tileProxy=e.tileProxy),this.options=e,this._url=e.url,this.tileSetsIndex=-1,this.tempIndex=-1,this.dpi=this.options.dpi||96;var t=this,i=W.urlPathAppend(e.url,"tileImage."+e.format);function r(){var u=this,g={};return g.redirect=e.redirect!==void 0?e.redirect:!1,g.transparent=e.transparent!==void 0?e.transparent:!0,g.cacheEnabled=e.cacheEnabled!==!1,u.cacheEnabled=g.cacheEnabled,g._cache=g.cacheEnabled,this.origin&&(g.origin=JSON.stringify({x:this.origin[0],y:this.origin[1]})),e.prjCoordSys&&(g.prjCoordSys=JSON.stringify(e.prjCoordSys)),e.layersID&&(g.layersID=e.layersID.toString()),e.clipRegion instanceof Or&&(e.clipRegionEnabled=!0,e.clipRegion=wt.toSuperMapGeometry(new os().writeGeometryObject(e.clipRegion)),e.clipRegion=W.toJSON(ft.fromGeometry(e.clipRegion)),g.clipRegionEnabled=e.clipRegionEnabled,g.clipRegion=JSON.stringify(e.clipRegion)),e.overlapDisplayed?g.overlapDisplayed=!0:(g.overlapDisplayed=!1,e.overlapDisplayedOptions&&(g.overlapDisplayedOptions=u.overlapDisplayedOptions.toString())),g.cacheEnabled&&e.tileversion&&(g.tileversion=e.tileversion.toString()),e.rasterfunction&&(g.rasterfunction=JSON.stringify(e.rasterfunction)),g}function s(){return this._paramsChanged&&(this._layerUrl=o.call(this),this._paramsChanged=!1),this._layerUrl||o.call(this)}function o(){return this.requestParams=this.requestParams||r.call(this),this._layerUrl=W.urlAppend(i,W.getParameterString(this.requestParams)),this._layerUrl=Lt.appendCredential(this._layerUrl),this._layerUrl}function l(u,g,p){t.tileGrid||(e.extent?(t.tileGrid=on.createTileGrid(e.extent),t.resolutions&&(t.tileGrid.resolutions=t.resolutions)):(p.getCode()==="EPSG:3857"&&(t.tileGrid=on.createTileGrid([-200375083427892e-7,-200375083427892e-7,200375083427892e-7,200375083427892e-7]),t.extent=[-200375083427892e-7,-200375083427892e-7,200375083427892e-7,200375083427892e-7]),p.getCode()==="EPSG:4326"&&(t.tileGrid=on.createTileGrid([-180,-90,180,90]),t.extent=[-180,-90,180,90]))),t.origin=t.tileGrid.getOrigin(0);var y=u[0],w=u[1],_=["4","5"].indexOf(wt.getOlVersion())>-1?-u[2]-1:u[2],E=t.tileGrid.getResolution(y),I=t.dpi||96,x=p.getUnits()||ei.DEGREE;(x==="degrees"||x==="degree")&&(x=ei.DEGREE),(x==="m"||x==="meter")&&(x=ei.METER);var T=wt.resolutionToScale(E,I,x),S=mt(t.tileGrid.getTileSize(y,t.tmpSize)),b=s.call(t),F=b+encodeURI("&x="+w+"&y="+_+"&width="+S[0]+"&height="+S[1]+"&scale="+T);return t.tileProxy&&(F=t.tileProxy+encodeURIComponent(F)),t.cacheEnabled||(F+="&_t="+new Date().getTime()),F}}setTileSetsInfo(e){this.tileSets=e,wt.isArray(this.tileSets)&&(this.tileSets=e[0]),this.tileSets&&(this.dispatchEvent({type:"tilesetsinfoloaded",value:{tileVersions:this.tileSets.tileVersions}}),this.changeTilesVersion())}lastTilesVersion(){this.tempIndex=this.tileSetsIndex-1,this.changeTilesVersion()}nextTilesVersion(){this.tempIndex=this.tileSetsIndex+1,this.changeTilesVersion()}changeTilesVersion(){var e=this;if(e.tileSets!=null&&!(e.tempIndex===e.tileSetsIndex||this.tempIndex<0)){var t=e.tileSets.tileVersions;if(t&&e.tempIndex<t.length&&e.tempIndex>=0){var i=t[e.tempIndex].name,r=e.mergeTileVersionParam(i);r&&(e.tileSetsIndex=e.tempIndex,e.dispatchEvent({type:"tileversionschanged",value:{tileVersion:t[e.tempIndex]}}))}}}updateCurrentTileSetsIndex(e){this.tempIndex=e}mergeTileVersionParam(e){return e?(this.requestParams.tileversion=e,this._paramsChanged=!0,this.refresh(),!0):!1}static optionsFromMapJSON(e,t){var i={};i.url=e,i.crossOrigin="anonymous";var r=[t.bounds.left,t.bounds.bottom,t.bounds.right,t.bounds.top];const{visibleScales:s,bounds:o,dpi:l,coordUnit:u}=t;var g=wt.scalesToResolutions(s,o,l,u);return i.tileGrid=new Kr({extent:r,resolutions:g}),i}static createTileGrid(e,t,i,r,s){var o=bf({extent:e,maxZoom:t,minZoom:i,tileSize:r});return new Kr({extent:e,minZoom:i,origin:s,resolutions:o.getResolutions(),tileSize:o.getTileSize()})}}class ko extends Ds{constructor(e,t){super(e,t),this.options=t||{},this.url=e,this.dispatchEvent({type:"initialized",value:this})}}var De={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(n){return n.target||n.srcElement},isSingleTouch:function(n){return n.touches&&n.touches.length===1},isMultiTouch:function(n){return n.touches&&n.touches.length>1},isLeftClick:function(n){return n.which&&n.which===1||n.button&&n.button===1},isRightClick:function(n){return n.which&&n.which===3||n.button&&n.button===2},stop:function(n,e){e||(n.preventDefault?n.preventDefault():n.returnValue=!1),n.stopPropagation?n.stopPropagation():n.cancelBubble=!0},findElement:function(n,e){for(var t=De.element(n);t.parentNode&&(!t.tagName||t.tagName.toUpperCase()!=e.toUpperCase());)t=t.parentNode;return t},observe:function(n,e,t,i){var r=W.getElement(n);if(i=i||!1,e==="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||r.attachEvent)&&(e="keydown"),this.observers||(this.observers={}),!r._eventCacheID){var s="eventCacheID_";r.id&&(s=r.id+"_"+s),r._eventCacheID=W.createUniqueID(s)}var o=r._eventCacheID;this.observers[o]||(this.observers[o]=[]),this.observers[o].push({element:r,name:e,observer:t,useCapture:i}),r.addEventListener?e==="mousewheel"?r.addEventListener(e,t,{useCapture:i,passive:!1}):r.addEventListener(e,t,i):r.attachEvent&&r.attachEvent("on"+e,t)},stopObservingElement:function(n){var e=W.getElement(n),t=e._eventCacheID;this._removeElementObservers(De.observers[t])},_removeElementObservers:function(n){if(n)for(var e=n.length-1;e>=0;e--){var t=n[e],i=new Array(t.element,t.name,t.observer,t.useCapture);De.stopObserving.apply(this,i)}},stopObserving:function(n,e,t,i){i=i||!1;var r=W.getElement(n),s=r._eventCacheID;e==="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||r.detachEvent)&&(e="keydown");var o=!1,l=De.observers[s];if(l)for(var u=0;!o&&u<l.length;){var g=l[u];if(g.name===e&&g.observer===t&&g.useCapture===i){l.splice(u,1),l.length==0&&delete De.observers[s],o=!0;break}u++}return o&&(r.removeEventListener?r.removeEventListener(e,t,i):r&&r.detachEvent&&r.detachEvent("on"+e,t)),o},unloadCache:function(){if(De&&De.observers){for(var n in De.observers){var e=De.observers[n];De._removeElementObservers.apply(this,[e])}De.observers=!1}},CLASS_NAME:"SuperMap.Event"};De.observe(window,"resize",De.unloadCache,!1);class Hn{constructor(e,t,i,r,s){if(this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=e,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=r,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,W.extend(this,s),i!=null)for(var o=0,l=i.length;o<l;o++)this.addEventType(i[o]);t!=null&&this.attachToElement(t),this.CLASS_NAME="SuperMap.Events"}destroy(){for(var e in this.extensions)typeof this.extensions[e]!="boolean"&&this.extensions[e].destroy();this.extensions=null,this.element&&(De.stopObservingElement(this.element),this.element.hasScrollEvent&&De.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}addEventType(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}attachToElement(e){this.element?De.stopObservingElement(this.element):(this.eventHandler=ur.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=ur.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,i=this.BROWSER_EVENTS.length;t<i;t++){var r=this.BROWSER_EVENTS[t];this.addEventType(r),De.observe(e,r,this.eventHandler)}De.observe(e,"dragstart",De.stop)}on(e){for(var t in e)t!=="scope"&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}register(e,t,i,r){if(e in Hn&&!this.extensions[e]&&(this.extensions[e]=new Hn[e](this)),i!=null&&W.indexOf(this.eventTypes,e)!==-1){t==null&&(t=this.object);var s=this.listeners[e];s||(s=[],this.listeners[e]=s,this.extensionCount[e]=0);var o={obj:t,func:i};r?(s.splice(this.extensionCount[e],0,o),typeof r=="object"&&r.extension&&this.extensionCount[e]++):s.push(o)}}registerPriority(e,t,i){this.register(e,t,i,!0)}un(e){for(var t in e)t!=="scope"&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}unregister(e,t,i){t==null&&(t=this.object);var r=this.listeners[e];if(r!=null){for(var s=0,o=r.length;s<o;s++)if(r[s].obj===t&&r[s].func===i){r.splice(s,1);break}}}remove(e){this.listeners[e]!=null&&(this.listeners[e]=[])}triggerEvent(e,t){var i=this.listeners[e];if(!(!i||i.length==0)){t==null&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e),i=i.slice();for(var r,s=0,o=i.length;s<o;s++){var l=i[s];if(r=l.func.apply(l.obj,[t]),r!=null&&r===!1)break}return this.fallThrough||De.stop(t,!0),r}}handleBrowserEvent(e){var t=e.type,i=this.listeners[t];if(!(!i||i.length==0)){var r=e.touches;if(r&&r[0]){for(var s=0,o=0,l=r.length,u,g=0;g<l;++g)u=r[g],s+=u.clientX,o+=u.clientY;e.clientX=s/l,e.clientY=o/l}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}clearMouseCache(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&!((e.scrollTop!=0||e.scrollLeft!=0)&&navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}getMousePosition(e){if(this.includeXY?this.element.hasScrollEvent||(De.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=W.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=W.pagePosition(this.element)),new zi(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}Hn.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];class jn{constructor(e,t){let i=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.withCredentials=!1,W.isArray(e)?(i.urls=e,i.length=e.length,i.totalTimes=i.length,i.length===1?i.url=e[0]:(i.index=parseInt(Math.random()*i.length),i.url=e[i.index])):(i.totalTimes=1,i.url=e),W.isArray(e)&&!i.isServiceSupportPolling()&&(i.url=e[0],i.totalTimes=1),t=t||{},this.crossOrigin=t.crossOrigin,this.headers=t.headers,W.extend(this,t),i.isInTheSameDomain=W.isInTheSameDomain(i.url),i.events=new Hn(i,null,i.EVENT_TYPES,!0),i.eventListeners instanceof Object&&i.events.on(i.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}destroy(){let e=this;W.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.options=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}request(e){let t=this;e.url=e.url||t.url,e.proxy=e.proxy||t.proxy,e.withCredentials=e.withCredentials!=null?e.withCredentials:t.withCredentials,e.crossOrigin=e.crossOrigin!=null?e.crossOrigin:t.crossOrigin,e.headers=e.headers||t.headers,e.isInTheSameDomain=t.isInTheSameDomain,e.withoutFormatSuffix=e.scope.withoutFormatSuffix||!1,e.url=Lt.appendCredential(e.url),t.calculatePollingTimes(),t._processSuccess=e.success,t._processFailed=e.failure,e.scope=t,e.success=t.getUrlCompleted,e.failure=t.getUrlFailed,t.options=e,t._commit(t.options)}getUrlCompleted(e){this._processSuccess(e)}getUrlFailed(e){let t=this;t.totalTimes>0?(t.totalTimes--,t.ajaxPolling()):t._processFailed(e)}ajaxPolling(){let e=this,t=e.options.url,i=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],t=t.replace(i,i.exec(e.url)[0]),e.options.url=t,e.options.isInTheSameDomain=W.isInTheSameDomain(t),e._commit(e.options)}calculatePollingTimes(){let e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}isServiceSupportPolling(){let e=this;return!(e.CLASS_NAME==="SuperMap.REST.ThemeService"||e.CLASS_NAME==="SuperMap.REST.EditFeaturesService")}serviceProcessCompleted(e){e=W.transformResult(e),this.events.triggerEvent("processCompleted",{result:e})}serviceProcessFailed(e){e=W.transformResult(e);let t=e.error||e;this.events.triggerEvent("processFailed",{error:t})}_commit(e){if(e.method==="POST"||e.method==="PUT"||e.method==="PATCH")if(e.params&&(e.url=W.urlAppend(e.url,W.getParameterString(e.params||{}))),typeof e.data=="object")try{e.params=W.toJSON(e.data)}catch{console.log("\u4E0D\u662Fjson\u5BF9\u8C61")}else e.params=e.data;Nt.commit(e.method,e.url,e.params,{headers:e.headers,withoutFormatSuffix:e.withoutFormatSuffix,withCredentials:e.withCredentials,crossOrigin:e.crossOrigin,timeout:e.async?0:null,proxy:e.proxy}).then(function(t){return t.text?t.text():t.json?t.json():t}).then(function(t){let i=t;return typeof t=="string"&&(i=new Fs().read(t)),(!i||i.error||i.code>=300&&i.code!==304)&&(i&&i.error?i={error:i.error}:i={error:i}),i}).catch(function(t){return{error:t}}).then(t=>{if(t.error){var i=e.scope?ur.bind(e.failure,e.scope):e.failure;i(t)}else{t.succeed=t.succeed==null?!0:t.succeed;var r=e.scope?ur.bind(e.success,e.scope):e.success;r(t)}})}}class vg extends jn{constructor(e,t){t=t||{},t.EVENT_TYPES=["broadcastSocketConnected","broadcastSocketClosed","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketClosed","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],super(e,t),this.geometry=null,this.prjCoordSys=null,this.excludeField=null,W.extend(this,t),this.CLASS_NAME="SuperMap.DataFlowService"}initBroadcast(){var e=this;return this.broadcastWebSocket=this._connect(W.urlPathAppend(e.url,"broadcast")),this.broadcastWebSocket.onopen=function(t){e.broadcastWebSocket.isOpen=!0,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onclose=function(t){e.broadcastWebSocket&&(e.broadcastWebSocket.isOpen=!1),t.eventType="broadcastSocketClosed",e.events.triggerEvent("broadcastSocketClosed",t)},this.broadcastWebSocket.onerror=function(t){t.eventType="broadcastSocketError",e.events.triggerEvent("broadcastSocketError",t)},this}broadcast(e){if(!this.broadcastWebSocket||!this.broadcastWebSocket.isOpen){this.events.triggerEvent("broadcastFailed");return}this.broadcastWebSocket.send(JSON.stringify(e)),this.events.triggerEvent("broadcastSucceeded")}initSubscribe(){var e=this;return this.subscribeWebSocket=this._connect(W.urlPathAppend(e.url,"subscribe")),this.subscribeWebSocket.onopen=function(t){e.subscribeWebSocket.send(e._getFilterParams()),t.eventType="subscribeSocketConnected",e.events.triggerEvent("subscribeSocketConnected",t)},this.subscribeWebSocket.onclose=function(t){t.eventType="subscribeWebSocketClosed",e.events.triggerEvent("subscribeWebSocketClosed",t)},this.subscribeWebSocket.onerror=function(t){t.eventType="subscribeSocketError",e.events.triggerEvent("subscribeSocketError",t)},this.subscribeWebSocket.onmessage=function(t){e._onMessage(t)},this}setExcludeField(e){return this.excludeField=e,this.subscribeWebSocket.send(this._getFilterParams()),this}setGeometry(e){return this.geometry=e,this.subscribeWebSocket.send(this._getFilterParams()),this}unSubscribe(){!this.subscribeWebSocket||(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}unBroadcast(){!this.broadcastWebSocket||(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}destroy(){jn.prototype.destroy.apply(this,arguments);var e=this;e.geometry=null,e.prjCoordSys=null,e.excludeField=null,this.unBroadcast(),this.unSubscribe()}_getFilterParams(){var e={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return W.toJSON(e)}_onMessage(e){if(e.data&&e.data.indexOf("filterParam")>=0){var t=JSON.parse(e.data);e.filterParam=t,e.eventType="setFilterParamSucceeded",this.events.triggerEvent("setFilterParamSucceeded",e);return}var i=JSON.parse(e.data);e.featureResult=i,e.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",e)}_connect(e){if(e=Lt.appendCredential(e),"WebSocket"in window)return new WebSocket(e);if("MozWebSocket"in window){var t=window.MozWebSocket;return new t(e)}else return console.log("no WebSocket"),null}}class lh extends ko{constructor(e,t){t=t||{},t.projection&&(t.prjCoordSys=t.projection),super(e,t),this.dataFlow=new vg(e,t),this.dataFlow.events.on({broadcastSocketConnected:this._defaultEvent,broadcastSocketError:this._defaultEvent,broadcastFailed:this._defaultEvent,broadcastSucceeded:this._defaultEvent,subscribeSocketConnected:this._defaultEvent,subscribeSocketError:this._defaultEvent,messageSucceeded:this._defaultEvent,setFilterParamSucceeded:this._defaultEvent,scope:this})}initBroadcast(){return this.dataFlow.initBroadcast(),this}broadcast(e){this.dataFlow.broadcast(e)}initSubscribe(){return this.dataFlow.initSubscribe(),this}setExcludeField(e){return this.dataFlow.setExcludeField(e),this.options.excludeField=e,this}setGeometry(e){return this.dataFlow.setGeometry(e),this.options.geometry=e,this}unSubscribe(){this.dataFlow.unSubscribe()}unBroadcast(){this.dataFlow.unBroadcast()}_defaultEvent(e){this.dispatchEvent({type:e.eventType||e.type,value:e})}}class mg extends al{constructor(e){var t=e||{};super(t),this.idField=t.idField||"id",this.dataService=new lh(t.ws,{geometry:t.geometry,prjCoordSys:t.prjCoordSys,excludeField:t.excludeField}).initSubscribe();var i=this;i.dataService.on("subscribeSocketConnected",function(r){i.dispatchEvent({type:"subscribeSucceeded",value:r})}),i.dataService.on("messageSucceeded",function(r){i._onMessageSuccessed(r)}),i.dataService.on("setFilterParamSucceeded",function(r){i.dispatchEvent({type:"setFilterParamSucceeded",value:r})}),this.featureCache={}}setExcludeField(e){return this.dataService.setExcludeField(e),this.excludeField=e,this}setGeometry(e){return this.dataService.setGeometry(e),this.geometry=e,this}_onMessageSuccessed(e){var t=new os().readFeature(e.value.featureResult),i=t.get(this.idField);i!==void 0&&this.featureCache[i]?(this.featureCache[i].setGeometry(t.getGeometry()),this.featureCache[i].setProperties(t.getProperties()),this.changed()):(this.addFeature(t),this.featureCache[i]=t),this.dispatchEvent({type:"dataupdated",value:{source:this,data:t}})}}class yg{constructor(e){this.options=e||{},this.enableMassClear=this.options.enableMassClear,this._map=e.map,this.paneName=this.options.paneName||"mapPane",this.context=this.options.context||"2d",this.zIndex=this.options.zIndex||2,this.mixBlendMode=this.options.mixBlendMode||null,this.width=e.width,this.height=e.height,this.initialize()}initialize(){var e=this.canvas=document.createElement("canvas");e.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";user-select:none;",e.style.mixBlendMode=this.mixBlendMode,e.className="mapvClass";var t=typeof window>"u"?{}:window,i=this.devicePixelRatio=t.devicePixelRatio||1;e.width=parseInt(this.width)*i,e.height=parseInt(this.height)*i,this.context==="2d"&&e.getContext(this.context).scale(i,i),e.style.width=this.width+"px",e.style.height=this.height+"px",this.context==="webgl"&&this.canvas.getContext(this.context).viewport(0,0,e.width,e.height)}draw(){this.options.update&&this.options.update.call(this)}resize(e,t){var i=typeof window>"u"?{}:window,r=this.devicePixelRatio=i.devicePixelRatio||1;this.canvas.width=e*r,this.canvas.height=t*r,this.context==="2d"&&this.canvas.getContext("2d").scale(r,r),this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.context==="webgl"&&this.canvas.getContext(this.context).viewport(0,0,this.canvas.width,this.canvas.height)}getContainer(){return this.canvas}setZIndex(e){this.canvas.style.zIndex=e}getZIndex(){return this.zIndex}}var an={exports:{}};(function(n,e){(function(t,i){i(e)})(Bi,function(t){var i="2.0.62",r=function(f){f&&f.clearRect&&f.clearRect(0,0,f.canvas.width,f.canvas.height)},s=function(f){var a=window.devicePixelRatio||1;f.canvas.width=f.canvas.width*a,f.canvas.height=f.canvas.height*a,f.canvas.style.width=f.canvas.width/a+"px",f.canvas.style.height=f.canvas.height/a+"px",f.scale(a,a)};function o(){this._subscribers={}}o.prototype.on=function(f,a){var c=this._subscribers[f];c||(c=[],this._subscribers[f]=c),c.push({callback:a})},o.prototype.off=function(f,a){var c=this._subscribers[f];if(c)for(var h=0;h<c.length;h++)c[h].callback==a&&(c.splice(h,1),h--)},o.prototype._trigger=function(f,a,c){if(f=="*")throw new Error("Cannot trigger event *");var h=[];f in this._subscribers&&(h=h.concat(this._subscribers[f])),"*"in this._subscribers&&(h=h.concat(this._subscribers["*"]));for(var d=0,v=h.length;d<v;d++){var m=h[d];m.callback&&m.callback(f,a,c||null)}};var l={municipalities:[{n:"\u5317\u4EAC",g:"116.395645,39.929986|12"},{n:"\u4E0A\u6D77",g:"121.487899,31.249162|12"},{n:"\u5929\u6D25",g:"117.210813,39.14393|12"},{n:"\u91CD\u5E86",g:"106.530635,29.544606|12"}],provinces:[{n:"\u5B89\u5FBD",g:"117.216005,31.859252|8",cities:[{n:"\u5408\u80A5",g:"117.282699,31.866942|12"},{n:"\u5B89\u5E86",g:"117.058739,30.537898|13"},{n:"\u868C\u57E0",g:"117.35708,32.929499|13"},{n:"\u4EB3\u5DDE",g:"115.787928,33.871211|13"},{n:"\u5DE2\u6E56",g:"117.88049,31.608733|13"},{n:"\u6C60\u5DDE",g:"117.494477,30.660019|14"},{n:"\u6EC1\u5DDE",g:"118.32457,32.317351|13"},{n:"\u961C\u9633",g:"115.820932,32.901211|13"},{n:"\u6DEE\u5317",g:"116.791447,33.960023|13"},{n:"\u6DEE\u5357",g:"117.018639,32.642812|13"},{n:"\u9EC4\u5C71",g:"118.29357,29.734435|13"},{n:"\u516D\u5B89",g:"116.505253,31.755558|13"},{n:"\u9A6C\u978D\u5C71",g:"118.515882,31.688528|13"},{n:"\u5BBF\u5DDE",g:"116.988692,33.636772|13"},{n:"\u94DC\u9675",g:"117.819429,30.94093|14"},{n:"\u829C\u6E56",g:"118.384108,31.36602|12"},{n:"\u5BA3\u57CE",g:"118.752096,30.951642|13"}]},{n:"\u798F\u5EFA",g:"117.984943,26.050118|8",cities:[{n:"\u798F\u5DDE",g:"119.330221,26.047125|12"},{n:"\u9F99\u5CA9",g:"117.017997,25.078685|13"},{n:"\u5357\u5E73",g:"118.181883,26.643626|13"},{n:"\u5B81\u5FB7",g:"119.542082,26.656527|14"},{n:"\u8386\u7530",g:"119.077731,25.44845|13"},{n:"\u6CC9\u5DDE",g:"118.600362,24.901652|12"},{n:"\u4E09\u660E",g:"117.642194,26.270835|14"},{n:"\u53A6\u95E8",g:"118.103886,24.489231|12"},{n:"\u6F33\u5DDE",g:"117.676205,24.517065|12"}]},{n:"\u7518\u8083",g:"102.457625,38.103267|6",cities:[{n:"\u5170\u5DDE",g:"103.823305,36.064226|12"},{n:"\u767D\u94F6",g:"104.171241,36.546682|13"},{n:"\u5B9A\u897F",g:"104.626638,35.586056|13"},{n:"\u7518\u5357\u5DDE",g:"102.917442,34.992211|14"},{n:"\u5609\u5CEA\u5173",g:"98.281635,39.802397|13"},{n:"\u91D1\u660C",g:"102.208126,38.516072|13"},{n:"\u9152\u6CC9",g:"98.508415,39.741474|13"},{n:"\u4E34\u590F\u5DDE",g:"103.215249,35.598514|13"},{n:"\u9647\u5357",g:"104.934573,33.39448|14"},{n:"\u5E73\u51C9",g:"106.688911,35.55011|13"},{n:"\u5E86\u9633",g:"107.644227,35.726801|13"},{n:"\u5929\u6C34",g:"105.736932,34.584319|13"},{n:"\u6B66\u5A01",g:"102.640147,37.933172|13"},{n:"\u5F20\u6396",g:"100.459892,38.93932|13"}]},{n:"\u5E7F\u4E1C",g:"113.394818,23.408004|8",cities:[{n:"\u5E7F\u5DDE",g:"113.30765,23.120049|12"},{n:"\u6F6E\u5DDE",g:"116.630076,23.661812|13"},{n:"\u4E1C\u839E",g:"113.763434,23.043024|12"},{n:"\u4F5B\u5C71",g:"113.134026,23.035095|13"},{n:"\u6CB3\u6E90",g:"114.713721,23.757251|12"},{n:"\u60E0\u5DDE",g:"114.410658,23.11354|12"},{n:"\u6C5F\u95E8",g:"113.078125,22.575117|13"},{n:"\u63ED\u9633",g:"116.379501,23.547999|13"},{n:"\u8302\u540D",g:"110.931245,21.668226|13"},{n:"\u6885\u5DDE",g:"116.126403,24.304571|13"},{n:"\u6E05\u8FDC",g:"113.040773,23.698469|13"},{n:"\u6C55\u5934",g:"116.72865,23.383908|13"},{n:"\u6C55\u5C3E",g:"115.372924,22.778731|14"},{n:"\u97F6\u5173",g:"113.594461,24.80296|13"},{n:"\u6DF1\u5733",g:"114.025974,22.546054|12"},{n:"\u9633\u6C5F",g:"111.97701,21.871517|14"},{n:"\u4E91\u6D6E",g:"112.050946,22.937976|13"},{n:"\u6E5B\u6C5F",g:"110.365067,21.257463|13"},{n:"\u8087\u5E86",g:"112.479653,23.078663|13"},{n:"\u4E2D\u5C71",g:"113.42206,22.545178|12"},{n:"\u73E0\u6D77",g:"113.562447,22.256915|13"}]},{n:"\u5E7F\u897F",g:"108.924274,23.552255|7",cities:[{n:"\u5357\u5B81",g:"108.297234,22.806493|12"},{n:"\u767E\u8272",g:"106.631821,23.901512|13"},{n:"\u5317\u6D77",g:"109.122628,21.472718|13"},{n:"\u5D07\u5DE6",g:"107.357322,22.415455|14"},{n:"\u9632\u57CE\u6E2F",g:"108.351791,21.617398|15"},{n:"\u6842\u6797",g:"110.26092,25.262901|12"},{n:"\u8D35\u6E2F",g:"109.613708,23.103373|13"},{n:"\u6CB3\u6C60",g:"108.069948,24.699521|14"},{n:"\u8D3A\u5DDE",g:"111.552594,24.411054|14"},{n:"\u6765\u5BBE",g:"109.231817,23.741166|14"},{n:"\u67F3\u5DDE",g:"109.422402,24.329053|12"},{n:"\u94A6\u5DDE",g:"108.638798,21.97335|13"},{n:"\u68A7\u5DDE",g:"111.305472,23.485395|13"},{n:"\u7389\u6797",g:"110.151676,22.643974|14"}]},{n:"\u8D35\u5DDE",g:"106.734996,26.902826|8",cities:[{n:"\u8D35\u9633",g:"106.709177,26.629907|12"},{n:"\u5B89\u987A",g:"105.92827,26.228595|13"},{n:"\u6BD5\u8282\u5730\u533A",g:"105.300492,27.302612|14"},{n:"\u516D\u76D8\u6C34",g:"104.852087,26.591866|13"},{n:"\u94DC\u4EC1\u5730\u533A",g:"109.196161,27.726271|14"},{n:"\u9075\u4E49",g:"106.93126,27.699961|13"},{n:"\u9ED4\u897F\u5357\u5DDE",g:"104.900558,25.095148|11"},{n:"\u9ED4\u4E1C\u5357\u5DDE",g:"107.985353,26.583992|11"},{n:"\u9ED4\u5357\u5DDE",g:"107.523205,26.264536|11"}]},{n:"\u6D77\u5357",g:"109.733755,19.180501|9",cities:[{n:"\u6D77\u53E3",g:"110.330802,20.022071|13"},{n:"\u767D\u6C99",g:"109.358586,19.216056|12"},{n:"\u4FDD\u4EAD",g:"109.656113,18.597592|12"},{n:"\u660C\u6C5F",g:"109.0113,19.222483|12"},{n:"\u510B\u5DDE",g:"109.413973,19.571153|13"},{n:"\u6F84\u8FC8",g:"109.996736,19.693135|13"},{n:"\u4E1C\u65B9",g:"108.85101,18.998161|13"},{n:"\u5B9A\u5B89",g:"110.32009,19.490991|13"},{n:"\u743C\u6D77",g:"110.414359,19.21483|13"},{n:"\u743C\u4E2D",g:"109.861849,19.039771|12"},{n:"\u4E50\u4E1C",g:"109.062698,18.658614|12"},{n:"\u4E34\u9AD8",g:"109.724101,19.805922|13"},{n:"\u9675\u6C34",g:"109.948661,18.575985|12"},{n:"\u4E09\u4E9A",g:"109.522771,18.257776|12"},{n:"\u5C6F\u660C",g:"110.063364,19.347749|13"},{n:"\u4E07\u5B81",g:"110.292505,18.839886|13"},{n:"\u6587\u660C",g:"110.780909,19.750947|13"},{n:"\u4E94\u6307\u5C71",g:"109.51775,18.831306|13"}]},{n:"\u6CB3\u5317",g:"115.661434,38.61384|7",cities:[{n:"\u77F3\u5BB6\u5E84",g:"114.522082,38.048958|12"},{n:"\u4FDD\u5B9A",g:"115.49481,38.886565|13"},{n:"\u6CA7\u5DDE",g:"116.863806,38.297615|13"},{n:"\u627F\u5FB7",g:"117.933822,40.992521|14"},{n:"\u90AF\u90F8",g:"114.482694,36.609308|13"},{n:"\u8861\u6C34",g:"115.686229,37.746929|13"},{n:"\u5ECA\u574A",g:"116.703602,39.518611|13"},{n:"\u79E6\u7687\u5C9B",g:"119.604368,39.945462|12"},{n:"\u5510\u5C71",g:"118.183451,39.650531|13"},{n:"\u90A2\u53F0",g:"114.520487,37.069531|13"},{n:"\u5F20\u5BB6\u53E3",g:"114.893782,40.811188|13"}]},{n:"\u6CB3\u5357",g:"113.486804,34.157184|7",cities:[{n:"\u90D1\u5DDE",g:"113.649644,34.75661|12"},{n:"\u5B89\u9633",g:"114.351807,36.110267|12"},{n:"\u9E64\u58C1",g:"114.29777,35.755426|13"},{n:"\u7126\u4F5C",g:"113.211836,35.234608|13"},{n:"\u5F00\u5C01",g:"114.351642,34.801854|13"},{n:"\u6D1B\u9633",g:"112.447525,34.657368|12"},{n:"\u6F2F\u6CB3",g:"114.046061,33.576279|13"},{n:"\u5357\u9633",g:"112.542842,33.01142|13"},{n:"\u5E73\u9876\u5C71",g:"113.300849,33.745301|13"},{n:"\u6FEE\u9633",g:"115.026627,35.753298|12"},{n:"\u4E09\u95E8\u5CE1",g:"111.181262,34.78332|13"},{n:"\u5546\u4E18",g:"115.641886,34.438589|13"},{n:"\u65B0\u4E61",g:"113.91269,35.307258|13"},{n:"\u4FE1\u9633",g:"114.085491,32.128582|13"},{n:"\u8BB8\u660C",g:"113.835312,34.02674|13"},{n:"\u5468\u53E3",g:"114.654102,33.623741|13"},{n:"\u9A7B\u9A6C\u5E97",g:"114.049154,32.983158|13"}]},{n:"\u9ED1\u9F99\u6C5F",g:"128.047414,47.356592|6",cities:[{n:"\u54C8\u5C14\u6EE8",g:"126.657717,45.773225|12"},{n:"\u5927\u5E86",g:"125.02184,46.596709|12"},{n:"\u5927\u5174\u5B89\u5CAD\u5730\u533A",g:"124.196104,51.991789|10"},{n:"\u9E64\u5C97",g:"130.292472,47.338666|13"},{n:"\u9ED1\u6CB3",g:"127.50083,50.25069|14"},{n:"\u9E21\u897F",g:"130.941767,45.32154|13"},{n:"\u4F73\u6728\u65AF",g:"130.284735,46.81378|12"},{n:"\u7261\u4E39\u6C5F",g:"129.608035,44.588521|13"},{n:"\u4E03\u53F0\u6CB3",g:"131.019048,45.775005|14"},{n:"\u9F50\u9F50\u54C8\u5C14",g:"123.987289,47.3477|13"},{n:"\u53CC\u9E2D\u5C71",g:"131.171402,46.655102|13"},{n:"\u7EE5\u5316",g:"126.989095,46.646064|13"},{n:"\u4F0A\u6625",g:"128.910766,47.734685|14"}]},{n:"\u6E56\u5317",g:"112.410562,31.209316|8",cities:[{n:"\u6B66\u6C49",g:"114.3162,30.581084|12"},{n:"\u9102\u5DDE",g:"114.895594,30.384439|14"},{n:"\u6069\u65BD",g:"109.517433,30.308978|14"},{n:"\u9EC4\u5188",g:"114.906618,30.446109|14"},{n:"\u9EC4\u77F3",g:"115.050683,30.216127|13"},{n:"\u8346\u95E8",g:"112.21733,31.042611|13"},{n:"\u8346\u5DDE",g:"112.241866,30.332591|12"},{n:"\u6F5C\u6C5F",g:"112.768768,30.343116|13"},{n:"\u795E\u519C\u67B6\u6797\u533A",g:"110.487231,31.595768|13"},{n:"\u5341\u5830",g:"110.801229,32.636994|13"},{n:"\u968F\u5DDE",g:"113.379358,31.717858|13"},{n:"\u5929\u95E8",g:"113.12623,30.649047|13"},{n:"\u4ED9\u6843",g:"113.387448,30.293966|13"},{n:"\u54B8\u5B81",g:"114.300061,29.880657|13"},{n:"\u8944\u9633",g:"112.176326,32.094934|12"},{n:"\u5B5D\u611F",g:"113.935734,30.927955|13"},{n:"\u5B9C\u660C",g:"111.310981,30.732758|13"}]},{n:"\u6E56\u5357",g:"111.720664,27.695864|7",cities:[{n:"\u957F\u6C99",g:"112.979353,28.213478|12"},{n:"\u5E38\u5FB7",g:"111.653718,29.012149|12"},{n:"\u90F4\u5DDE",g:"113.037704,25.782264|13"},{n:"\u8861\u9633",g:"112.583819,26.898164|13"},{n:"\u6000\u5316",g:"109.986959,27.557483|13"},{n:"\u5A04\u5E95",g:"111.996396,27.741073|13"},{n:"\u90B5\u9633",g:"111.461525,27.236811|13"},{n:"\u6E58\u6F6D",g:"112.935556,27.835095|13"},{n:"\u6E58\u897F\u5DDE",g:"109.745746,28.317951|14"},{n:"\u76CA\u9633",g:"112.366547,28.588088|13"},{n:"\u6C38\u5DDE",g:"111.614648,26.435972|13"},{n:"\u5CB3\u9633",g:"113.146196,29.378007|13"},{n:"\u5F20\u5BB6\u754C",g:"110.48162,29.124889|13"},{n:"\u682A\u6D32",g:"113.131695,27.827433|13"}]},{n:"\u6C5F\u82CF",g:"119.368489,33.013797|8",cities:[{n:"\u5357\u4EAC",g:"118.778074,32.057236|12"},{n:"\u5E38\u5DDE",g:"119.981861,31.771397|12"},{n:"\u6DEE\u5B89",g:"119.030186,33.606513|12"},{n:"\u8FDE\u4E91\u6E2F",g:"119.173872,34.601549|12"},{n:"\u5357\u901A",g:"120.873801,32.014665|12"},{n:"\u82CF\u5DDE",g:"120.619907,31.317987|12"},{n:"\u5BBF\u8FC1",g:"118.296893,33.95205|13"},{n:"\u6CF0\u5DDE",g:"119.919606,32.476053|13"},{n:"\u65E0\u9521",g:"120.305456,31.570037|12"},{n:"\u5F90\u5DDE",g:"117.188107,34.271553|12"},{n:"\u76D0\u57CE",g:"120.148872,33.379862|12"},{n:"\u626C\u5DDE",g:"119.427778,32.408505|13"},{n:"\u9547\u6C5F",g:"119.455835,32.204409|13"}]},{n:"\u6C5F\u897F",g:"115.676082,27.757258|7",cities:[{n:"\u5357\u660C",g:"115.893528,28.689578|12"},{n:"\u629A\u5DDE",g:"116.360919,27.954545|13"},{n:"\u8D63\u5DDE",g:"114.935909,25.845296|13"},{n:"\u5409\u5B89",g:"114.992039,27.113848|13"},{n:"\u666F\u5FB7\u9547",g:"117.186523,29.303563|12"},{n:"\u4E5D\u6C5F",g:"115.999848,29.71964|13"},{n:"\u840D\u4E61",g:"113.859917,27.639544|13"},{n:"\u4E0A\u9976",g:"117.955464,28.457623|13"},{n:"\u65B0\u4F59",g:"114.947117,27.822322|13"},{n:"\u5B9C\u6625",g:"114.400039,27.81113|13"},{n:"\u9E70\u6F6D",g:"117.03545,28.24131|13"}]},{n:"\u5409\u6797",g:"126.262876,43.678846|7",cities:[{n:"\u957F\u6625",g:"125.313642,43.898338|12"},{n:"\u767D\u57CE",g:"122.840777,45.621086|13"},{n:"\u767D\u5C71",g:"126.435798,41.945859|13"},{n:"\u5409\u6797",g:"126.564544,43.871988|12"},{n:"\u8FBD\u6E90",g:"125.133686,42.923303|13"},{n:"\u56DB\u5E73",g:"124.391382,43.175525|12"},{n:"\u677E\u539F",g:"124.832995,45.136049|13"},{n:"\u901A\u5316",g:"125.94265,41.736397|13"},{n:"\u5EF6\u8FB9",g:"129.485902,42.896414|13"}]},{n:"\u8FBD\u5B81",g:"122.753592,41.6216|8",cities:[{n:"\u6C88\u9633",g:"123.432791,41.808645|12"},{n:"\u978D\u5C71",g:"123.007763,41.118744|13"},{n:"\u672C\u6EAA",g:"123.778062,41.325838|12"},{n:"\u671D\u9633",g:"120.446163,41.571828|13"},{n:"\u5927\u8FDE",g:"121.593478,38.94871|12"},{n:"\u4E39\u4E1C",g:"124.338543,40.129023|12"},{n:"\u629A\u987A",g:"123.92982,41.877304|12"},{n:"\u961C\u65B0",g:"121.660822,42.01925|14"},{n:"\u846B\u82A6\u5C9B",g:"120.860758,40.74303|13"},{n:"\u9526\u5DDE",g:"121.147749,41.130879|13"},{n:"\u8FBD\u9633",g:"123.172451,41.273339|14"},{n:"\u76D8\u9526",g:"122.073228,41.141248|13"},{n:"\u94C1\u5CAD",g:"123.85485,42.299757|13"},{n:"\u8425\u53E3",g:"122.233391,40.668651|13"}]},{n:"\u5185\u8499\u53E4",g:"114.415868,43.468238|5",cities:[{n:"\u547C\u548C\u6D69\u7279",g:"111.660351,40.828319|12"},{n:"\u963F\u62C9\u5584\u76DF",g:"105.695683,38.843075|14"},{n:"\u5305\u5934",g:"109.846239,40.647119|12"},{n:"\u5DF4\u5F66\u6DD6\u5C14",g:"107.423807,40.76918|12"},{n:"\u8D64\u5CF0",g:"118.930761,42.297112|12"},{n:"\u9102\u5C14\u591A\u65AF",g:"109.993706,39.81649|12"},{n:"\u547C\u4F26\u8D1D\u5C14",g:"119.760822,49.201636|12"},{n:"\u901A\u8FBD",g:"122.260363,43.633756|12"},{n:"\u4E4C\u6D77",g:"106.831999,39.683177|13"},{n:"\u4E4C\u5170\u5BDF\u5E03",g:"113.112846,41.022363|12"},{n:"\u9521\u6797\u90ED\u52D2\u76DF",g:"116.02734,43.939705|11"},{n:"\u5174\u5B89\u76DF",g:"122.048167,46.083757|11"}]},{n:"\u5B81\u590F",g:"106.155481,37.321323|8",cities:[{n:"\u94F6\u5DDD",g:"106.206479,38.502621|12"},{n:"\u56FA\u539F",g:"106.285268,36.021523|13"},{n:"\u77F3\u5634\u5C71",g:"106.379337,39.020223|13"},{n:"\u5434\u5FE0",g:"106.208254,37.993561|14"},{n:"\u4E2D\u536B",g:"105.196754,37.521124|14"}]},{n:"\u9752\u6D77",g:"96.202544,35.499761|7",cities:[{n:"\u897F\u5B81",g:"101.767921,36.640739|12"},{n:"\u679C\u6D1B\u5DDE",g:"100.223723,34.480485|11"},{n:"\u6D77\u4E1C\u5730\u533A",g:"102.085207,36.51761|11"},{n:"\u6D77\u5317\u5DDE",g:"100.879802,36.960654|11"},{n:"\u6D77\u5357\u5DDE",g:"100.624066,36.284364|11"},{n:"\u6D77\u897F\u5DDE",g:"97.342625,37.373799|11"},{n:"\u9EC4\u5357\u5DDE",g:"102.0076,35.522852|11"},{n:"\u7389\u6811\u5DDE",g:"97.013316,33.00624|14"}]},{n:"\u5C71\u4E1C",g:"118.527663,36.09929|8",cities:[{n:"\u6D4E\u5357",g:"117.024967,36.682785|12"},{n:"\u6EE8\u5DDE",g:"117.968292,37.405314|12"},{n:"\u4E1C\u8425",g:"118.583926,37.487121|12"},{n:"\u5FB7\u5DDE",g:"116.328161,37.460826|12"},{n:"\u83CF\u6CFD",g:"115.46336,35.26244|13"},{n:"\u6D4E\u5B81",g:"116.600798,35.402122|13"},{n:"\u83B1\u829C",g:"117.684667,36.233654|13"},{n:"\u804A\u57CE",g:"115.986869,36.455829|12"},{n:"\u4E34\u6C82",g:"118.340768,35.072409|12"},{n:"\u9752\u5C9B",g:"120.384428,36.105215|12"},{n:"\u65E5\u7167",g:"119.50718,35.420225|12"},{n:"\u6CF0\u5B89",g:"117.089415,36.188078|13"},{n:"\u5A01\u6D77",g:"122.093958,37.528787|13"},{n:"\u6F4D\u574A",g:"119.142634,36.716115|12"},{n:"\u70DF\u53F0",g:"121.309555,37.536562|12"},{n:"\u67A3\u5E84",g:"117.279305,34.807883|13"},{n:"\u6DC4\u535A",g:"118.059134,36.804685|12"}]},{n:"\u5C71\u897F",g:"112.515496,37.866566|7",cities:[{n:"\u592A\u539F",g:"112.550864,37.890277|12"},{n:"\u957F\u6CBB",g:"113.120292,36.201664|12"},{n:"\u5927\u540C",g:"113.290509,40.113744|12"},{n:"\u664B\u57CE",g:"112.867333,35.499834|13"},{n:"\u664B\u4E2D",g:"112.738514,37.693362|13"},{n:"\u4E34\u6C7E",g:"111.538788,36.099745|13"},{n:"\u5415\u6881",g:"111.143157,37.527316|14"},{n:"\u6714\u5DDE",g:"112.479928,39.337672|13"},{n:"\u5FFB\u5DDE",g:"112.727939,38.461031|12"},{n:"\u9633\u6CC9",g:"113.569238,37.869529|13"},{n:"\u8FD0\u57CE",g:"111.006854,35.038859|13"}]},{n:"\u9655\u897F",g:"109.503789,35.860026|7",cities:[{n:"\u897F\u5B89",g:"108.953098,34.2778|12"},{n:"\u5B89\u5EB7",g:"109.038045,32.70437|13"},{n:"\u5B9D\u9E21",g:"107.170645,34.364081|12"},{n:"\u6C49\u4E2D",g:"107.045478,33.081569|13"},{n:"\u5546\u6D1B",g:"109.934208,33.873907|13"},{n:"\u94DC\u5DDD",g:"108.968067,34.908368|13"},{n:"\u6E2D\u5357",g:"109.483933,34.502358|13"},{n:"\u54B8\u9633",g:"108.707509,34.345373|13"},{n:"\u5EF6\u5B89",g:"109.50051,36.60332|13"},{n:"\u6986\u6797",g:"109.745926,38.279439|12"}]},{n:"\u56DB\u5DDD",g:"102.89916,30.367481|7",cities:[{n:"\u6210\u90FD",g:"104.067923,30.679943|12"},{n:"\u963F\u575D\u5DDE",g:"102.228565,31.905763|15"},{n:"\u5DF4\u4E2D",g:"106.757916,31.869189|14"},{n:"\u8FBE\u5DDE",g:"107.494973,31.214199|14"},{n:"\u5FB7\u9633",g:"104.402398,31.13114|13"},{n:"\u7518\u5B5C\u5DDE",g:"101.969232,30.055144|15"},{n:"\u5E7F\u5B89",g:"106.63572,30.463984|13"},{n:"\u5E7F\u5143",g:"105.819687,32.44104|13"},{n:"\u4E50\u5C71",g:"103.760824,29.600958|13"},{n:"\u51C9\u5C71\u5DDE",g:"102.259591,27.892393|14"},{n:"\u6CF8\u5DDE",g:"105.44397,28.89593|14"},{n:"\u5357\u5145",g:"106.105554,30.800965|13"},{n:"\u7709\u5C71",g:"103.84143,30.061115|13"},{n:"\u7EF5\u9633",g:"104.705519,31.504701|12"},{n:"\u5185\u6C5F",g:"105.073056,29.599462|13"},{n:"\u6500\u679D\u82B1",g:"101.722423,26.587571|14"},{n:"\u9042\u5B81",g:"105.564888,30.557491|12"},{n:"\u96C5\u5B89",g:"103.009356,29.999716|13"},{n:"\u5B9C\u5BBE",g:"104.633019,28.769675|13"},{n:"\u8D44\u9633",g:"104.63593,30.132191|13"},{n:"\u81EA\u8D21",g:"104.776071,29.359157|13"}]},{n:"\u897F\u85CF",g:"89.137982,31.367315|6",cities:[{n:"\u62C9\u8428",g:"91.111891,29.662557|13"},{n:"\u963F\u91CC\u5730\u533A",g:"81.107669,30.404557|11"},{n:"\u660C\u90FD\u5730\u533A",g:"97.185582,31.140576|15"},{n:"\u6797\u829D\u5730\u533A",g:"94.349985,29.666941|11"},{n:"\u90A3\u66F2\u5730\u533A",g:"92.067018,31.48068|14"},{n:"\u65E5\u5580\u5219\u5730\u533A",g:"88.891486,29.269023|14"},{n:"\u5C71\u5357\u5730\u533A",g:"91.750644,29.229027|11"}]},{n:"\u65B0\u7586",g:"85.614899,42.127001|6",cities:[{n:"\u4E4C\u9C81\u6728\u9F50",g:"87.564988,43.84038|12"},{n:"\u963F\u62C9\u5C14",g:"81.291737,40.61568|13"},{n:"\u963F\u514B\u82CF\u5730\u533A",g:"80.269846,41.171731|12"},{n:"\u963F\u52D2\u6CF0\u5730\u533A",g:"88.137915,47.839744|13"},{n:"\u5DF4\u97F3\u90ED\u695E",g:"86.121688,41.771362|12"},{n:"\u535A\u5C14\u5854\u62C9\u5DDE",g:"82.052436,44.913651|11"},{n:"\u660C\u5409\u5DDE",g:"87.296038,44.007058|13"},{n:"\u54C8\u5BC6\u5730\u533A",g:"93.528355,42.858596|13"},{n:"\u548C\u7530\u5730\u533A",g:"79.930239,37.116774|13"},{n:"\u5580\u4EC0\u5730\u533A",g:"75.992973,39.470627|12"},{n:"\u514B\u62C9\u739B\u4F9D",g:"84.88118,45.594331|13"},{n:"\u514B\u5B5C\u52D2\u82CF\u5DDE",g:"76.137564,39.750346|11"},{n:"\u77F3\u6CB3\u5B50",g:"86.041865,44.308259|13"},{n:"\u5854\u57CE\u5730\u533A",g:"82.974881,46.758684|12"},{n:"\u56FE\u6728\u8212\u514B",g:"79.198155,39.889223|13"},{n:"\u5410\u9C81\u756A\u5730\u533A",g:"89.181595,42.96047|13"},{n:"\u4E94\u5BB6\u6E20",g:"87.565449,44.368899|13"},{n:"\u4F0A\u7281\u5DDE",g:"81.297854,43.922248|11"}]},{n:"\u4E91\u5357",g:"101.592952,24.864213|7",cities:[{n:"\u6606\u660E",g:"102.714601,25.049153|12"},{n:"\u4FDD\u5C71",g:"99.177996,25.120489|13"},{n:"\u695A\u96C4\u5DDE",g:"101.529382,25.066356|13"},{n:"\u5927\u7406\u5DDE",g:"100.223675,25.5969|14"},{n:"\u5FB7\u5B8F\u5DDE",g:"98.589434,24.44124|14"},{n:"\u8FEA\u5E86\u5DDE",g:"99.713682,27.831029|14"},{n:"\u7EA2\u6CB3\u5DDE",g:"103.384065,23.367718|11"},{n:"\u4E3D\u6C5F",g:"100.229628,26.875351|13"},{n:"\u4E34\u6CA7",g:"100.092613,23.887806|14"},{n:"\u6012\u6C5F\u5DDE",g:"98.859932,25.860677|14"},{n:"\u666E\u6D31",g:"100.980058,22.788778|14"},{n:"\u66F2\u9756",g:"103.782539,25.520758|12"},{n:"\u662D\u901A",g:"103.725021,27.340633|13"},{n:"\u6587\u5C71",g:"104.089112,23.401781|14"},{n:"\u897F\u53CC\u7248\u7EB3",g:"100.803038,22.009433|13"},{n:"\u7389\u6EAA",g:"102.545068,24.370447|13"}]},{n:"\u6D59\u6C5F",g:"119.957202,29.159494|8",cities:[{n:"\u676D\u5DDE",g:"120.219375,30.259244|12"},{n:"\u6E56\u5DDE",g:"120.137243,30.877925|12"},{n:"\u5609\u5174",g:"120.760428,30.773992|13"},{n:"\u91D1\u534E",g:"119.652576,29.102899|12"},{n:"\u4E3D\u6C34",g:"119.929576,28.4563|13"},{n:"\u5B81\u6CE2",g:"121.579006,29.885259|12"},{n:"\u8862\u5DDE",g:"118.875842,28.95691|12"},{n:"\u7ECD\u5174",g:"120.592467,30.002365|13"},{n:"\u53F0\u5DDE",g:"121.440613,28.668283|13"},{n:"\u6E29\u5DDE",g:"120.690635,28.002838|12"},{n:"\u821F\u5C71",g:"122.169872,30.03601|13"}]}],other:[{n:"\u9999\u6E2F",g:"114.186124,22.293586|11"},{n:"\u6FB3\u95E8",g:"113.557519,22.204118|13"},{n:"\u53F0\u6E7E",g:"120.961454,23.80406|8"}]};function u(f){var a=f.split("|");return a[0]=a[0].split(","),{lng:parseFloat(a[0][0]),lat:parseFloat(a[0][1])}}var g={getProvinceNameByCityName:function(a){for(var c=l.provinces,h=0;h<c.length;h++)for(var d=c[h].n,v=c[h].cities,m=0;m<v.length;m++)if(v[m].n==a)return d;return null},getCenterByCityName:function(a){a=a.replace("\u5E02","");for(var c=0;c<l.municipalities.length;c++)if(l.municipalities[c].n==a)return u(l.municipalities[c].g);for(var c=0;c<l.other.length;c++)if(l.other[c].n==a)return u(l.other[c].g);for(var h=l.provinces,c=0;c<h.length;c++){if(h[c].n==a)return u(h[c].g);for(var d=h[c].cities,v=0;v<d.length;v++)if(d[v].n==a)return u(d[v].g)}return null}},p=function(f,a){if(!(f instanceof a))throw new TypeError("Cannot call a class as a function")},y=function(){function f(a,c){for(var h=0;h<c.length;h++){var d=c[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(a,c,h){return c&&f(a.prototype,c),h&&f(a,h),a}}(),w=function f(a,c,h){a===null&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,c);if(d===void 0){var v=Object.getPrototypeOf(a);return v===null?void 0:f(v,c,h)}else{if("value"in d)return d.value;var m=d.get;return m===void 0?void 0:m.call(h)}},_=function(f,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);f.prototype=Object.create(a&&a.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(f,a):f.__proto__=a)},E=function(f,a){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:f},I=function(){function f(a,c){var h=[],d=!0,v=!1,m=void 0;try{for(var C=a[Symbol.iterator](),A;!(d=(A=C.next()).done)&&(h.push(A.value),!(c&&h.length===c));d=!0);}catch(M){v=!0,m=M}finally{try{!d&&C.return&&C.return()}finally{if(v)throw m}}return h}return function(a,c){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return f(a,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function x(f,a){o.bind(this)(),this._options=a||{},this._data=[],f&&this.add(f)}x.prototype=Object.create(o.prototype),x.prototype.add=function(f,a){if(Array.isArray(f)){for(var c=0,h=f.length;c<h;c++)if(f[c]){if(f[c].time&&f[c].time.length==14&&f[c].time.substr(0,2)=="20"){var d=f[c].time;f[c].time=new Date(d.substr(0,4)+"-"+d.substr(4,2)+"-"+d.substr(6,2)+" "+d.substr(8,2)+":"+d.substr(10,2)+":"+d.substr(12,2)).getTime()}this._data.push(f[c])}}else if(f instanceof Object)this._data.push(f);else throw new Error("Unknown dataType");this._dataCache=JSON.parse(JSON.stringify(this._data))},x.prototype.reset=function(){this._data=JSON.parse(JSON.stringify(this._dataCache))},x.prototype.get=function(f){f=f||{};var a=this._data;if(f.filter){for(var c=[],h=0;h<a.length;h++)f.filter(a[h])&&c.push(a[h]);a=c}return f.transferCoordinate&&(a=this.transferCoordinate(a,f.transferCoordinate,f.fromColumn,f.toColumn)),a},x.prototype.set=function(f){this._set(f),this._trigger("change")},x.prototype._set=function(f){this.clear(),this.add(f)},x.prototype.clear=function(f){this._data=[]},x.prototype.remove=function(f){},x.prototype.update=function(f,a){for(var c=this._data,h=0;h<c.length;h++)if(a){var d=!0;for(var v in a)c[h][v]!=a[v]&&(d=!1);d&&f&&f(c[h])}else f&&f(c[h]);this._dataCache=JSON.parse(JSON.stringify(this._data)),this._trigger("change")},x.prototype.transferCoordinate=function(f,a,c,h){h=h||"_coordinates",c=c||"coordinates";for(var d=0;d<f.length;d++){var v=f[d].geometry,m=v[c];switch(v.type){case"Point":v[h]=a(m);break;case"LineString":for(var A=[],C=0;C<m.length;C++)A.push(a(m[C]));v[h]=A;break;case"MultiLineString":case"Polygon":var A=R(m);v[h]=A;break;case"MultiPolygon":for(var A=[],M=0;M<m.length;M++){var O=m[M],O=R(O);A.push(O)}v[h]=A;break}}function R(N){for(var k=[],z=0;z<N.length;z++){for(var U=N[z],H=[],Z=0;Z<U.length;Z++)H.push(a(U[Z]));k.push(H)}return k}return f},x.prototype.initGeometry=function(f){f?this._data.forEach(function(a){a.geometry=f(a)}):this._data.forEach(function(a){if(!a.geometry){if(a.lng&&a.lat)a.geometry={type:"Point",coordinates:[a.lng,a.lat]};else if(a.city){var c=g.getCenterByCityName(a.city);c&&(a.geometry={type:"Point",coordinates:[c.lng,c.lat]})}}})},x.prototype.getMax=function(f){var a=this._data;if(!(!a||a.length<=0)){for(var c=parseFloat(a[0][f]),h=1;h<a.length;h++){var d=parseFloat(a[h][f]);d>c&&(c=d)}return c}},x.prototype.getSum=function(f){var a=this._data;if(!(!a||a.length<=0)){for(var c=0,h=0;h<a.length;h++)a[h][f]&&(c+=parseFloat(a[h][f]));return c}},x.prototype.getMin=function(f){var a=this._data;if(!(!a||a.length<=0)){for(var c=parseFloat(a[0][f]),h=1;h<a.length;h++){var d=parseFloat(a[h][f]);d<c&&(c=d)}return c}},x.prototype.getUnique=function(f){var h=this._data;if(!(!h||h.length<=0)){for(var a={},c=1;c<h.length;c++)a[h[c][f]]=!0;var h=[];for(var d in a)h.push(d);return h}};function T(f,a,c){var h=60*c+30,d=Math.PI/180*h;return[f.x+a*Math.cos(d),f.y+a*Math.sin(d)]}function S(f,a,c,h){for(var d=0;d<6;d++){var v=T({x:a,y:c},h,d);f.lineTo(v[0],v[1])}}var b={drawDataSet:function(a,c,h){for(var d=c instanceof x?c.get():c,v=0,m=d.length;v<m;v++){var C=d[v];this.draw(a,C,h)}},draw:function(a,c,h){var d=c.geometry.type,v=c.geometry._coordinates||c.geometry.coordinates,m=c.symbol||h.symbol||"circle";switch(d){case"Point":var C=c._size||c.size||h._size||h.size||5;m==="circle"?(h.bigData==="Point"&&a.moveTo(v[0],v[1]),a.arc(v[0],v[1],C,0,Math.PI*2)):m==="rect"?a.rect(v[0]-C/2,v[1]-C/2,C,C):m==="honeycomb"&&S(a,v[0],v[1],C);break;case"LineString":this.drawLineString(a,v);break;case"MultiLineString":for(var A=0;A<v.length;A++){var M=v[A];this.drawLineString(a,M)}break;case"Polygon":this.drawPolygon(a,v);break;case"MultiPolygon":for(var A=0;A<v.length;A++){var O=v[A];if(this.drawPolygon(a,O),h.multiPolygonDraw){var R=h.multiPolygonDraw();if(R)return R}}break;default:console.error("type"+d+"is not support now!");break}},drawLineString:function(a,c){for(var h=0;h<c.length;h++){var d=c[h][0],v=c[h][1];h==0?a.moveTo(d,v):a.lineTo(d,v)}},drawPolygon:function(a,c){a.beginPath();for(var h=0;h<c.length;h++){var d=c[h];a.moveTo(d[0][0],d[0][1]);for(var v=1;v<d.length;v++)a.lineTo(d[v][0],d[v][1]);a.lineTo(d[0][0],d[0][1]),a.closePath()}}},F={draw:function(a,c,h){var d=c instanceof x?c.get():c;a.save();for(var v in h)a[v]=h[v];if(h.bigData){a.save(),a.beginPath();for(var m=0,C=d.length;m<C;m++){var A=d[m];b.draw(a,A,h)}var M=h.bigData;M=="Point"||M=="Polygon"||M=="MultiPolygon"?(a.fill(),a.lineDash&&a.setLineDash(a.lineDash),A.lineDash&&a.setLineDash(A.lineDash),(A.strokeStyle||h.strokeStyle)&&h.lineWidth&&a.stroke()):(M=="LineString"||M=="MultiLineString")&&a.stroke(),a.restore()}else for(var m=0,C=d.length;m<C;m++){var A=d[m];a.save(),(A.fillStyle||A._fillStyle)&&(a.fillStyle=A.fillStyle||A._fillStyle),(A.strokeStyle||A._strokeStyle)&&(a.strokeStyle=A.strokeStyle||A._strokeStyle),a.lineDash&&a.setLineDash(a.lineDash),A.lineDash&&a.setLineDash(A.lineDash);var M=A.geometry.type;a.beginPath(),h.multiPolygonDraw=function(){a.fill(),(A.strokeStyle||h.strokeStyle)&&h.lineWidth&&a.stroke()},b.draw(a,A,h),M=="Point"||M=="Polygon"||M=="MultiPolygon"?(a.fill(),(A.strokeStyle||h.strokeStyle)&&h.lineWidth&&a.stroke()):(M=="LineString"||M=="MultiLineString")&&((A.lineWidth||A._lineWidth)&&(a.lineWidth=A.lineWidth||A._lineWidth),a.stroke()),a.restore()}a.restore()}};function B(f,a){var c;if(!(typeof document>"u")){var c=document.createElement("canvas");f&&(c.width=f),a&&(c.height=a)}return c}function X(f){f=f||{},this.gradient=f.gradient||{.25:"rgba(0, 0, 255, 1)",.55:"rgba(0, 255, 0, 1)",.85:"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"},this.maxSize=f.maxSize||35,this.minSize=f.minSize||0,this.max=f.max||100,this.min=f.min||0,this.initPalette()}X.prototype.setMax=function(f){this.max=f||100},X.prototype.setMin=function(f){this.min=f||0},X.prototype.setMaxSize=function(f){this.maxSize=f||35},X.prototype.setMinSize=function(f){this.minSize=f||0},X.prototype.initPalette=function(){var f=this.gradient,a=new B(256,1),c=this.paletteCtx=a.getContext("2d"),h=c.createLinearGradient(0,0,256,1);for(var d in f)h.addColorStop(parseFloat(d),f[d]);c.fillStyle=h,c.fillRect(0,0,256,1)},X.prototype.getColor=function(f){var a=this.getImageData(f);return"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]/256+")"},X.prototype.getImageData=function(f){var a=this.paletteCtx.getImageData(0,0,256,1).data;if(f===void 0)return a;var c=this.max,h=this.min;f>c&&(f=c),f<h&&(f=h);var d=Math.floor((f-h)/(c-h)*(256-1))*4;return[a[d],a[d+1],a[d+2],a[d+3]]},X.prototype.getSize=function(f){var a=0,c=this.max,h=this.min,d=this.maxSize,v=this.minSize;if(f>c&&(f=c),f<h&&(f=h),c>h)a=v+(f-h)/(c-h)*(d-v);else return d;return a},X.prototype.getLegend=function(f){var a=this.gradient,c=f.width||20,h=f.height||180,d=new B(c,h),v=d.getContext("2d"),m=v.createLinearGradient(0,h,0,0);for(var C in a)m.addColorStop(parseFloat(C),a[C]);return v.fillStyle=m,v.fillRect(0,0,c,h),d};var Y=typeof window>"u"?{}:window,j=Y.devicePixelRatio||1;function J(f){var a=f/2,c=f+a,h=1e4,d=new B(c*2,c*2),v=d.getContext("2d");return v.shadowBlur=a,v.shadowColor="black",v.shadowOffsetX=v.shadowOffsetY=h,v.beginPath(),v.arc(c-h,c-h,f,0,Math.PI*2,!0),v.closePath(),v.fill(),d}function ae(f,a,c){var h=he(c),d=fe(c),v=h-d,O=c.range||null,m=0,C=1024;O&&O.length===2&&(m=(O[0]-d)/v*1024),O&&O.length===2&&(C=(O[1]-d)/v*1024);for(var A=c.maxOpacity||.8,M=c.minOpacity||0,O=c.range,R=3,N=f.length,k;R<N;R+=4)k=f[R]*4,f[R]/256>A&&(f[R]=256*A),f[R]/256<M&&(f[R]=256*M),k&&k>=m&&k<=C?(f[R-3]=a[k],f[R-2]=a[k+1],f[R-1]=a[k+2]):f[R]=0}function he(f){var a=f.max||100;return a}function fe(f){var a=f.min||0;return a}function pe(f,a,c){var h=he(c),d=fe(c),v=c._size;v==null&&(v=c.size,v==null&&(v=13));var m=new X({gradient:c.gradient,max:h,min:d}),C=J(v),A=C.width/2,M=C.height/2,O=a,R={};O.forEach(function(z,U){var H=z.count===void 0?1:z.count,Z=Math.min(1,H/h).toFixed(2);R[Z]=R[Z]||[],R[Z].push(z)});for(var N in R)if(!isNaN(N)){var k=R[N];f.beginPath(),c.withoutAlpha||(f.globalAlpha=N),f.strokeStyle=m.getColor(N*h),k.forEach(function(z,U){if(!!z.geometry){var H=z.geometry._coordinates||z.geometry.coordinates,Z=z.geometry.type;if(Z==="Point"){var ee=z.count===void 0?1:z.count;f.globalAlpha=ee/h,f.drawImage(C,H[0]-A,H[1]-M)}else if(Z==="LineString"){var ee=z.count===void 0?1:z.count;f.globalAlpha=ee/h,f.beginPath(),b.draw(f,z,c),f.stroke()}}})}}function Ve(f,a,c){if(!(f.canvas.width<=0||f.canvas.height<=0)){var h=c.strength||.3;f.strokeStyle="rgba(0,0,0,"+h+")";var d=new B(f.canvas.width,f.canvas.height),v=d.getContext("2d");v.scale(j,j),c=c||{};var m=a instanceof x?a.get():a;f.save();var C=new X({gradient:c.gradient});if(pe(v,m,c),!c.absolute){var A=v.getImageData(0,0,f.canvas.width,f.canvas.height);ae(A.data,C.getImageData(),c),f.putImageData(A,0,0),f.restore()}C=null,d=null}}var re={draw:Ve},le={draw:function(a,c,h){a.save();var d=c instanceof x?c.get():c,v={},m=h._size||h.size||50,C="enableCluster"in h?h.enableCluster:!0,A=h.offset||{x:0,y:0},M=new X({min:h.min||0,max:h.max||100,gradient:h.gradient});if(C){for(var z=0;z<d.length;z++){var R=d[z].geometry._coordinates||d[z].geometry.coordinates,N=Math.floor((R[0]-A.x)/m)+","+Math.floor((R[1]-A.y)/m);v[N]||(v[N]=0),v[N]+=~~(d[z].count||1)}for(var U in v)U=U.split(","),a.beginPath(),a.rect(U[0]*m+.5+A.x,U[1]*m+.5+A.y,m,m),a.fillStyle=M.getColor(v[U]),a.fill(),h.strokeStyle&&h.lineWidth&&a.stroke()}else{for(var O=0;O<d.length;O++){var R=d[O].geometry._coordinates||d[O].geometry.coordinates,N=R.join(",");v[N]=d[O].count||1}for(var k in v)k=k.split(","),a.beginPath(),a.rect(+k[0]-m/2,+k[1]-m/2,m,m),a.fillStyle=M.getColor(v[k]),a.fill(),h.strokeStyle&&h.lineWidth&&a.stroke()}if(h.label&&h.label.show!==!1){a.fillStyle=h.label.fillStyle||"white",h.label.font&&(a.font=h.label.font),h.label.shadowColor&&(a.shadowColor=h.label.shadowColor),h.label.shadowBlur&&(a.shadowBlur=h.label.shadowBlur);for(var N in v){N=N.split(",");var H=v[N],Z=a.measureText(H).width;C?a.fillText(H,N[0]*m+.5+A.x+m/2-Z/2,N[1]*m+.5+A.y+m/2+5):a.fillText(H,+N[0]-Z/2,+N[1]+5)}}a.restore()}};function ue(f,a,c){var h=60*c+30,d=Math.PI/180*h;return[f.x+a*Math.cos(d),f.y+a*Math.sin(d)]}var ye={draw:function(a,c,h){a.save();var d=c instanceof x?c.get():c;for(var v in h)a[v]=h[v];var m=h.offset||{x:10,y:10},C=h._size||h.size||40;C=C/2/Math.sin(Math.PI/3);for(var A=C*2*Math.sin(Math.PI/3),M=C*1.5,O={},R=0;R<d.length;R++){var N=d[R].geometry._coordinates||d[R].geometry.coordinates,k=(N[1]-m.y)/M,z=Math.round(k),U=(N[0]-m.x)/A-(z&1?.5:0),H=Math.round(U),Z=k-z;if(Math.abs(Z)*3>1){var ee=U-H,me=H+(U<H?-1:1)/2,te=z+(k<z?-1:1),ne=U-me,Ie=k-te;ee*ee+Z*Z>ne*ne+Ie*Ie&&(H=me+(z&1?1:-1)/2,z=te)}var Fe=H+"-"+z,Se=O[Fe];Se?Se.push(d[R]):(Se=O[Fe]=[d[R]],Se.i=H,Se.j=z,Se.x=(H+(z&1?1/2:0))*A,Se.y=z*M)}var we=new X({max:h.max||100,maxSize:C,gradient:h.gradient});for(var v in O){var $e=O[v];a.beginPath();for(var ke=0;ke<6;ke++){var Je=ue({x:$e.x+m.x,y:$e.y+m.y},C,ke);a.lineTo(Je[0],Je[1])}a.closePath();for(var ct=0,R=0;R<$e.length;R++)ct+=$e[R].count||1;$e.count=ct,a.fillStyle=we.getColor(ct),a.fill(),h.strokeStyle&&h.lineWidth&&a.stroke()}if(h.label&&h.label.show!==!1){a.fillStyle=h.label.fillStyle||"white",h.label.font&&(a.font=h.label.font),h.label.shadowColor&&(a.shadowColor=h.label.shadowColor),h.label.shadowBlur&&(a.shadowBlur=h.label.shadowBlur);for(var v in O){var $e=O[v],dt=$e.count;dt<0?dt=dt.toFixed(2):dt=~~dt;var hr=a.measureText(dt).width;a.fillText(dt,$e.x+m.x-hr/2,$e.y+m.y+5)}}a.restore()}};function qe(f,a,c){var h=f.createShader(c);return f.shaderSource(h,a),f.compileShader(h),h}function Re(f,a,c){var h=qe(f,a,f.VERTEX_SHADER),d=qe(f,c,f.FRAGMENT_SHADER),v=f.createProgram();return f.attachShader(v,h),f.attachShader(v,d),f.linkProgram(v),f.useProgram(v),v}function He(f){var a=document.createElement("canvas"),c=a.getContext("2d");return a.width=1,a.height=1,c.fillStyle=f,c.fillRect(0,0,1,1),c.getImageData(0,0,1,1).data}var K=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),vn=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join("");function je(f,a,c){if(!!a){var h=Re(f,K,vn);f.enable(f.BLEND),f.blendFunc(f.SRC_ALPHA,f.ONE),f.clear(f.COLOR_BUFFER_BIT);var d=f.canvas.width/2,v=f.canvas.height/2,m=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,m);var C=f.getAttribLocation(h,"a_Position");f.vertexAttribPointer(C,2,f.FLOAT,!1,0,0),f.enableVertexAttribArray(C);var A=f.getUniformLocation(h,"u_FragColor"),M=He(c.strokeStyle||"red");f.uniform4f(A,M[0]/255,M[1]/255,M[2]/255,M[3]/255),f.lineWidth(c.lineWidth||1);for(var O=0,R=a.length;O<R;O++){for(var N=a[O].geometry._coordinates,k=[],z=0;z<N.length;z++){var U=N[z],H=(U[0]-d)/d,Z=(v-U[1])/v;k.push(H,Z)}var ee=new Float32Array(k);f.bufferData(f.ARRAY_BUFFER,ee,f.STATIC_DRAW),f.drawArrays(f.LINE_STRIP,0,N.length)}}}var et={draw:je},mn=["attribute vec4 a_Position;","attribute float a_PointSize;","void main() {","gl_Position = a_Position;","gl_PointSize = a_PointSize;","}"].join(""),yn=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join("");function _t(f,a,c){if(!!a){var h=Re(f,mn,yn),d=f.getAttribLocation(h,"a_Position"),v=f.getAttribLocation(h,"a_PointSize"),m=f.getUniformLocation(h,"u_FragColor");f.clear(f.COLOR_BUFFER_BIT);for(var C=f.canvas.width/2,A=f.canvas.height/2,M=[],O=0,R=0;R<a.length;R++){var N=a[R].geometry._coordinates,k=(N[0]-C)/C,z=(A-N[1])/A;k<-1||k>1||z<-1||z>1||(M.push(k,z),O++)}var U=new Float32Array(M),H=O,Z=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,Z),f.bufferData(f.ARRAY_BUFFER,U,f.STATIC_DRAW),f.vertexAttribPointer(d,2,f.FLOAT,!1,0,0),f.enableVertexAttribArray(d),f.vertexAttrib1f(v,c._size);var ee=He(c.fillStyle||"red");f.uniform4f(m,ee[0]/255,ee[1]/255,ee[2]/255,ee[3]/255),f.drawArrays(f.POINTS,0,H)}}var $n={draw:_t};function Fi(f,a,c){c=c||2;var h=a&&a.length,d=h?a[0]*c:f.length,v=ms(f,0,d,c,!0),m=[];if(!v)return m;var C,A,M,O,R,N,k;if(h&&(v=jo(f,a,v,c)),f.length>80*c){C=M=f[0],A=O=f[1];for(var z=c;z<d;z+=c)R=f[z],N=f[z+1],R<C&&(C=R),N<A&&(A=N),R>M&&(M=R),N>O&&(O=N);k=Math.max(M-C,O-A)}return fi(v,m,c,C,A,k),m}function ms(f,a,c,h,d){var v,m;if(d===xn(f,a,c,h)>0)for(v=a;v<c;v+=h)m=rr(v,f[v],f[v+1],m);else for(v=c-h;v>=a;v-=h)m=rr(v,f[v],f[v+1],m);return m&&Zt(m,m.next)&&(pi(m),m=m.next),m}function Oi(f,a){if(!f)return f;a||(a=f);var c=f,h;do if(h=!1,!c.steiner&&(Zt(c,c.next)||Be(c.prev,c,c.next)===0)){if(pi(c),c=a=c.prev,c===c.next)return null;h=!0}else c=c.next;while(h||c!==a);return a}function fi(f,a,c,h,d,v,m){if(!!f){!m&&v&&wn(f,h,d,v);for(var C=f,A,M;f.prev!==f.next;){if(A=f.prev,M=f.next,v?er(f,h,d,v):ki(f)){a.push(A.i/c),a.push(f.i/c),a.push(M.i/c),pi(f),f=M.next,C=M.next;continue}if(f=M,f===C){m?m===1?(f=Xo(f,a,c),fi(f,a,c,h,d,v,2)):m===2&&Ho(f,a,c,h,d,v):fi(Oi(f),a,c,h,d,v,1);break}}}}function ki(f){var a=f.prev,c=f,h=f.next;if(Be(a,c,h)>=0)return!1;for(var d=f.next.next;d!==f.prev;){if(gi(a.x,a.y,c.x,c.y,h.x,h.y,d.x,d.y)&&Be(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function er(f,a,c,h){var d=f.prev,v=f,m=f.next;if(Be(d,v,m)>=0)return!1;for(var C=d.x<v.x?d.x<m.x?d.x:m.x:v.x<m.x?v.x:m.x,A=d.y<v.y?d.y<m.y?d.y:m.y:v.y<m.y?v.y:m.y,M=d.x>v.x?d.x>m.x?d.x:m.x:v.x>m.x?v.x:m.x,O=d.y>v.y?d.y>m.y?d.y:m.y:v.y>m.y?v.y:m.y,R=jt(C,A,a,c,h),N=jt(M,O,a,c,h),k=f.nextZ;k&&k.z<=N;){if(k!==f.prev&&k!==f.next&&gi(d.x,d.y,v.x,v.y,m.x,m.y,k.x,k.y)&&Be(k.prev,k,k.next)>=0)return!1;k=k.nextZ}for(k=f.prevZ;k&&k.z>=R;){if(k!==f.prev&&k!==f.next&&gi(d.x,d.y,v.x,v.y,m.x,m.y,k.x,k.y)&&Be(k.prev,k,k.next)>=0)return!1;k=k.prevZ}return!0}function Xo(f,a,c){var h=f;do{var d=h.prev,v=h.next.next;!Zt(d,v)&&nr(d,h,h.next,v)&&Kt(d,v)&&Kt(v,d)&&(a.push(d.i/c),a.push(h.i/c),a.push(v.i/c),pi(h),pi(h.next),h=f=v),h=h.next}while(h!==f);return h}function Ho(f,a,c,h,d,v){var m=f;do{for(var C=m.next.next;C!==m.prev;){if(m.i!==C.i&&_n(m,C)){var A=xs(m,C);m=Oi(m,m.next),A=Oi(A,A.next),fi(m,a,c,h,d,v),fi(A,a,c,h,d,v);return}C=C.next}m=m.next}while(m!==f)}function jo(f,a,c,h){var d=[],v,m,C,A,M;for(v=0,m=a.length;v<m;v++)C=a[v]*h,A=v<m-1?a[v+1]*h:f.length,M=ms(f,C,A,h,!1),M===M.next&&(M.steiner=!0),d.push(ir(M));for(d.sort(ys),v=0;v<d.length;v++)tr(d[v],c),c=Oi(c,c.next);return c}function ys(f,a){return f.x-a.x}function tr(f,a){if(a=Zo(f,a),a){var c=xs(a,f);Oi(c,c.next)}}function Zo(f,a){var c=a,h=f.x,d=f.y,v=-1/0,m;do{if(d<=c.y&&d>=c.next.y){var C=c.x+(d-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(C<=h&&C>v){if(v=C,C===h){if(d===c.y)return c;if(d===c.next.y)return c.next}m=c.x<c.next.x?c:c.next}}c=c.next}while(c!==a);if(!m)return null;if(h===v)return m.prev;var A=m,M=m.x,O=m.y,R=1/0,N;for(c=m.next;c!==A;)h>=c.x&&c.x>=M&&gi(d<O?h:v,d,M,O,d<O?v:h,d,c.x,c.y)&&(N=Math.abs(d-c.y)/(h-c.x),(N<R||N===R&&c.x>m.x)&&Kt(c,f)&&(m=c,R=N)),c=c.next;return m}function wn(f,a,c,h){var d=f;do d.z===null&&(d.z=jt(d.x,d.y,a,c,h)),d.prevZ=d.prev,d.nextZ=d.next,d=d.next;while(d!==f);d.prevZ.nextZ=null,d.prevZ=null,ws(d)}function ws(f){var a,c,h,d,v,m,C,A,M=1;do{for(c=f,f=null,v=null,m=0;c;){for(m++,h=c,C=0,a=0;a<M&&(C++,h=h.nextZ,!!h);a++);for(A=M;C>0||A>0&&h;)C===0?(d=h,h=h.nextZ,A--):A===0||!h||c.z<=h.z?(d=c,c=c.nextZ,C--):(d=h,h=h.nextZ,A--),v?v.nextZ=d:f=d,d.prevZ=v,v=d;c=h}v.nextZ=null,M*=2}while(m>1);return f}function jt(f,a,c,h,d){return f=32767*(f-c)/d,a=32767*(a-h)/d,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,f|a<<1}function ir(f){var a=f,c=f;do a.x<c.x&&(c=a),a=a.next;while(a!==f);return c}function gi(f,a,c,h,d,v,m,C){return(d-m)*(a-C)-(f-m)*(v-C)>=0&&(f-m)*(h-C)-(c-m)*(a-C)>=0&&(c-m)*(v-C)-(d-m)*(h-C)>=0}function _n(f,a){return f.next.i!==a.i&&f.prev.i!==a.i&&!_s(f,a)&&Kt(f,a)&&Kt(a,f)&&Ko(f,a)}function Be(f,a,c){return(a.y-f.y)*(c.x-a.x)-(a.x-f.x)*(c.y-a.y)}function Zt(f,a){return f.x===a.x&&f.y===a.y}function nr(f,a,c,h){return Zt(f,a)&&Zt(c,h)||Zt(f,h)&&Zt(c,a)?!0:Be(f,a,c)>0!=Be(f,a,h)>0&&Be(c,h,f)>0!=Be(c,h,a)>0}function _s(f,a){var c=f;do{if(c.i!==f.i&&c.next.i!==f.i&&c.i!==a.i&&c.next.i!==a.i&&nr(c,c.next,f,a))return!0;c=c.next}while(c!==f);return!1}function Kt(f,a){return Be(f.prev,f,f.next)<0?Be(f,a,f.next)>=0&&Be(f,f.prev,a)>=0:Be(f,a,f.prev)<0||Be(f,f.next,a)<0}function Ko(f,a){var c=f,h=!1,d=(f.x+a.x)/2,v=(f.y+a.y)/2;do c.y>v!=c.next.y>v&&d<(c.next.x-c.x)*(v-c.y)/(c.next.y-c.y)+c.x&&(h=!h),c=c.next;while(c!==f);return h}function xs(f,a){var c=new Di(f.i,f.x,f.y),h=new Di(a.i,a.x,a.y),d=f.next,v=a.prev;return f.next=a,a.prev=f,c.next=d,d.prev=c,h.next=c,c.prev=h,v.next=h,h.prev=v,h}function rr(f,a,c,h){var d=new Di(f,a,c);return h?(d.next=h.next,d.prev=h,h.next.prev=d,h.next=d):(d.prev=d,d.next=d),d}function pi(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Di(f,a,c){this.i=f,this.x=a,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Fi.deviation=function(f,a,c,h){var d=a&&a.length,v=d?a[0]*c:f.length,m=Math.abs(xn(f,0,v,c));if(d)for(var C=0,A=a.length;C<A;C++){var M=a[C]*c,O=C<A-1?a[C+1]*c:f.length;m-=Math.abs(xn(f,M,O,c))}var R=0;for(C=0;C<h.length;C+=3){var N=h[C]*c,k=h[C+1]*c,z=h[C+2]*c;R+=Math.abs((f[N]-f[z])*(f[k+1]-f[N+1])-(f[N]-f[k])*(f[z+1]-f[N+1]))}return m===0&&R===0?0:Math.abs((R-m)/m)};function xn(f,a,c,h){for(var d=0,v=a,m=c-h;v<c;v+=h)d+=(f[m]-f[v])*(f[v+1]+f[m+1]),m=v;return d}Fi.flatten=function(f){for(var a=f[0][0].length,c={vertices:[],holes:[],dimensions:a},h=0,d=0;d<f.length;d++){for(var v=0;v<f[d].length;v++)for(var m=0;m<a;m++)c.vertices.push(f[d][v][m]);d>0&&(h+=f[d-1].length,c.holes.push(h))}return c};var sr=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),Ni=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join("");function Gi(f,a,c){if(!!a){f.clear(f.COLOR_BUFFER_BIT),f.viewport(0,0,f.canvas.width,f.canvas.height);var h=Re(f,sr,Ni);f.enable(f.BLEND),f.blendFunc(f.SRC_ALPHA,f.ONE);var d=f.canvas.width/2,v=f.canvas.height/2;f.bindBuffer(f.ARRAY_BUFFER,f.createBuffer()),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,f.createBuffer());var m=f.getAttribLocation(h,"a_Position");f.vertexAttribPointer(m,2,f.FLOAT,!1,0,0),f.enableVertexAttribArray(m);var C=f.getUniformLocation(h,"u_FragColor"),A=He(c.fillStyle||"red");f.uniform4f(C,A[0]/255,A[1]/255,A[2]/255,A[3]/255),f.lineWidth(c.lineWidth||1);for(var M=[],O=[],R=65536,N=0,k=0,z=a.length;k<z;k++){var U=Fi.flatten(a[k].geometry._coordinates||a[k].geometry.coordinates),H=U.vertices;N=M.length/2;for(var Z=0;Z<H.length;Z+=2)H[Z]=(H[Z]-d)/d,H[Z+1]=(v-H[Z+1])/v;(M.length+H.length)/2>R&&(f.bufferData(f.ARRAY_BUFFER,new Float32Array(M),f.STATIC_DRAW),f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array(O),f.STATIC_DRAW),f.drawElements(f.TRIANGLES,O.length,f.UNSIGNED_SHORT,0),M.length=0,O.length=0,N=0);for(var Z=0;Z<H.length;Z++)M.push(H[Z]);for(var ee=Fi(H,U.holes,U.dimensions),Z=0;Z<ee.length;Z++)O.push(ee[Z]+N)}f.bufferData(f.ARRAY_BUFFER,new Float32Array(M),f.STATIC_DRAW),f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array(O),f.STATIC_DRAW),f.drawElements(f.TRIANGLES,O.length,f.UNSIGNED_SHORT,0),f.bindBuffer(f.ARRAY_BUFFER,null),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,null)}}var vi={draw:Gi},or={draw:function(a,c,h){var d=c instanceof x?c.get():c;d.length>0&&(d[0].geometry.type=="LineString"?et.draw(a,d,h):d[0].geometry.type=="Polygon"||d[0].geometry.type=="MultiPolygon"?vi.draw(a,d,h):$n.draw(a,d,h))}};function Ss(f,a){a=a||{};for(var c=[],h=0;h<f.length-1;h++){var d=tt(f[h],f[h+1],a.count);d&&d.length>0&&(c=c.concat(d))}return c}function tt(f,a,C){if(!f||!a)return null;var h=function(we){return 1-2*we+we*we},d=function(we){return 2*we-2*we*we},v=function(we){return we*we},m=[],C=C||40,A,M,O,R,N,k,z=0,U=0;if(typeof a>"u"){typeof m<"u"&&(m=[]);return}var H=parseFloat(f.lat),Z=parseFloat(a.lat),ee=parseFloat(f.lng),me=parseFloat(a.lng);for(me>ee&&parseFloat(me-ee)>180&&ee<0&&(ee=parseFloat(360+ee),me=parseFloat(360+me)),k=0,Z==H?(A=0,M=ee-me):me==ee?(A=Math.PI/2,M=H-Z):(A=Math.atan((Z-H)/(me-ee)),M=(Z-H)/Math.sin(A)),k==0&&(k=A+Math.PI/5),O=M/2,N=O*Math.cos(k)+ee,R=O*Math.sin(k)+H,z=0;z<C+1;z++){var te=ee*h(U)+N*d(U)+me*v(U),ne=H*h(U)+R*d(U)+Z*v(U),Ie=f.lng,Fe=a.lng;m.push([Ie<0&&Fe>0?te-360:te,ne]),U=U+1/C}return m}var mi={getPoints:Ss},ht=function(){var a={},c=[],h=[],d=[],v=.1,m=.1,C=1,A=2,M=6,O=70,R=.6666667,N=.6,k=1e-8;function z(G,V){return G.x*V.x+G.y*V.y}function U(G){return{x:a[G.target].x-a[G.source].x,y:a[G.target].y-a[G.source].y}}function H(G){return Math.sqrt(Math.pow(a[G.source].x-a[G.target].x,2)+Math.pow(a[G.source].y-a[G.target].y,2))}function Z(G){return Math.sqrt(Math.pow(G.source.x-G.target.x,2)+Math.pow(G.source.y-G.target.y,2))}function ee(G){var V=(a[G.source].x+a[G.target].x)/2,ce=(a[G.source].y+a[G.target].y)/2;return{x:V,y:ce}}function me(G){for(var V=0,ce=1;ce<d[G].length;ce++){var xe=te(d[G][ce],d[G][ce-1]);V+=xe}return V}function te(G,V){return Math.sqrt(Math.pow(G.x-V.x,2)+Math.pow(G.y-V.y,2))}function ne(G,V){var ce=Math.sqrt((V.target.x-V.source.x)*(V.target.x-V.source.x)+(V.target.y-V.source.y)*(V.target.y-V.source.y)),xe=((V.source.y-G.y)*(V.source.y-V.target.y)-(V.source.x-G.x)*(V.target.x-V.source.x))/(ce*ce);return{x:V.source.x+xe*(V.target.x-V.source.x),y:V.source.y+xe*(V.target.y-V.source.y)}}function Ie(){for(var G=0;G<c.length;G++)d[G]=[]}function Fe(){for(var G=0;G<c.length;G++)h[G]=[]}function Se(G){for(var V=[],ce=0;ce<G.length;ce++)a[G[ce].source].x!=a[G[ce].target].x&&a[G[ce].source].y!=a[G[ce].target].y&&V.push(G[ce]);return V}function we(G,V,ce){var xe=d[G][V-1],Le=d[G][V+1],Te=d[G][V],be=xe.x-Te.x+Le.x-Te.x,Qe=xe.y-Te.y+Le.y-Te.y;return be*=ce,Qe*=ce,{x:be,y:Qe}}function $e(G,V,ce){for(var xe={x:0,y:0},Le=h[G],Te=0;Te<Le.length;Te++){var be={x:d[Le[Te]][V].x-d[G][V].x,y:d[Le[Te]][V].y-d[G][V].y};if(Math.abs(be.x)>k||Math.abs(be.y)>k){var Qe=1/Math.pow(Z({source:d[Le[Te]][V],target:d[G][V]}),1);xe.x+=be.x*Qe,xe.y+=be.y*Qe}}return xe}function ke(G,V,ce){for(var xe=v/(H(c[G])*(V+1)),Le=[{x:0,y:0}],Te=1;Te<V+1;Te++){var be={x:0,y:0},Qe=we(G,Te,xe),xt=$e(G,Te);be.x=ce*(Qe.x+xt.x),be.y=ce*(Qe.y+xt.y),Le.push(be)}return Le.push({x:0,y:0}),Le}function Je(G){for(var V=0;V<c.length;V++)if(G==1)d[V].push(a[c[V].source]),d[V].push(ee(c[V])),d[V].push(a[c[V].target]);else{var ce=me(V),xe=ce/(G+1),Le=xe,Te=[];Te.push(a[c[V].source]);for(var be=1;be<d[V].length;be++){for(var Qe=te(d[V][be],d[V][be-1]);Qe>Le;){var xt=Le/Qe,$t=d[V][be-1].x,Kh=d[V][be-1].y;$t+=xt*(d[V][be].x-d[V][be-1].x),Kh+=xt*(d[V][be].y-d[V][be-1].y),Te.push({x:$t,y:Kh}),Qe-=Le,Le=xe}Le-=Qe}Te.push(a[c[V].target]),d[V]=Te}}function ct(G,V){var ce=Math.abs(z(U(G),U(V))/(H(G)*H(V)));return ce}function dt(G,V){var ce=(H(G)+H(V))/2,xe=2/(ce/Math.min(H(G),H(V))+Math.max(H(G),H(V))/ce);return xe}function hr(G,V){var ce=(H(G)+H(V))/2,xe={x:(a[G.source].x+a[G.target].x)/2,y:(a[G.source].y+a[G.target].y)/2},Le={x:(a[V.source].x+a[V.target].x)/2,y:(a[V.source].y+a[V.target].y)/2},Te=ce/(ce+te(xe,Le));return Te}function En(G,V){var ce=ne(a[V.source],{source:a[G.source],target:a[G.target]}),xe=ne(a[V.target],{source:a[G.source],target:a[G.target]}),Le={x:(ce.x+xe.x)/2,y:(ce.y+xe.y)/2},Te={x:(a[G.source].x+a[G.target].x)/2,y:(a[G.source].y+a[G.target].y)/2},be=Math.max(0,1-2*te(Te,Le)/te(ce,xe));return be}function wv(G,V){return Math.min(En(G,V),En(V,G))}function _v(G,V){var ce=ct(G,V)*dt(G,V)*hr(G,V)*wv(G,V);return ce}function xv(G,V){return _v(G,V)>=N}function Sv(){for(var G=0;G<c.length-1;G++)for(var V=G+1;V<c.length;V++)G!=V&&xv(c[G],c[V])&&(h[G].push(V),h[V].push(G))}var Ne=function(){var V=m,ce=O,xe=C;Ie(),Fe(),Je(xe),Sv();for(var Le=0;Le<M;Le++){for(var Te=0;Te<ce;Te++){for(var be=[],Qe=0;Qe<c.length;Qe++)be[Qe]=ke(Qe,xe,V);for(var xt=0;xt<c.length;xt++)for(var $t=0;$t<xe+1;$t++)d[xt][$t].x+=be[xt][$t].x,d[xt][$t].y+=be[xt][$t].y}V=V/2,xe=xe*2,ce=R*ce,Je(xe)}return d};return Ne.nodes=function(G){return arguments.length==0?a:(a=G,Ne)},Ne.edges=function(G){return arguments.length==0?c:(c=Se(G),Ne)},Ne.bundling_stiffness=function(G){return arguments.length==0?v:(v=G,Ne)},Ne.step_size=function(G){return arguments.length==0?m:(m=G,Ne)},Ne.cycles=function(G){return arguments.length==0?M:(M=G,Ne)},Ne.iterations=function(G){return arguments.length==0?O:(O=G,Ne)},Ne.iterations_rate=function(G){return arguments.length==0?R:(R=G,Ne)},Ne.subdivision_points_seed=function(G){return arguments.length==0?P:(P=G,Ne)},Ne.subdivision_rate=function(G){return arguments.length==0?A:(A=G,Ne)},Ne.compatbility_threshold=function(G){return arguments.length==0?compatbility_threshold:(N=G,Ne)},Ne};function it(f){this.splitList=f||{other:1}}it.prototype.get=function(f){var a=this.splitList,c=a.other;for(var h in a)if(f==h){c=a[h];break}return c},it.prototype.generateByDataSet=function(f,a){var c=a||["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],h=f.get();this.splitList={};for(var d=0,v=0;v<h.length&&(this.splitList[h[v].count]===void 0&&(this.splitList[h[v].count]=c[d],d++),!(d>=c.length-1));v++);this.splitList.other=c[c.length-1]},it.prototype.getLegend=function(f){var a=this.splitList,c=document.createElement("div");c.style.cssText="background:#fff; padding: 5px; border: 1px solid #ccc;";var h="";for(var d in a)h+='<div style="line-height: 19px;" value="'+d+'"><span style="vertical-align: -2px; display: inline-block; width: 30px;height: 19px;background:'+a[d]+';"></span><span style="margin-left: 3px;">'+d+"<span></div>";return c.innerHTML=h,c};function ze(f){this.splitList=f||[{start:0,value:"red"}]}ze.prototype.get=function(f){for(var a=this.splitList,c=!1,h=0;h<a.length;h++)if((a[h].start===void 0||a[h].start!==void 0&&f>=a[h].start)&&(a[h].end===void 0||a[h].end!==void 0&&f<a[h].end)){c=a[h].value;break}return c},ze.prototype.generateByDataSet=function(f){var a=f.getMin("count"),c=f.getMax("count");this.generateByMinMax(a,c)},ze.prototype.generateByMinMax=function(f,a){var c=["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],h=Number((a-f)/7);a=Number(a);var d=Number(f);this.splitList=[];for(var v=0;d<a;)this.splitList.push({start:d,end:d+h,value:c[v]}),v++,d+=h},ze.prototype.getLegend=function(f){this.splitList};var Sn=function(){function f(a,c,h){if(p(this,f),!a||!c)return console.warn("id \u548C type \u4E3A\u5FC5\u586B\u9879"),!1;if(c=="baidu"){if(!BMap)return console.warn("\u8BF7\u5148\u5F15\u5165\u767E\u5EA6\u5730\u56FEJS API"),!1}else console.warn("\u6682\u4E0D\u652F\u6301\u4F60\u7684\u5730\u56FE\u7C7B\u578B");this.type=c;var d=h&&h.center?h.center:[106.962497,38.208726],v=h&&h.zoom?h.zoom:5,m=this.map=new BMap.Map(a,{enableMapClick:!1});m.centerAndZoom(new BMap.Point(d[0],d[1]),v),m.enableScrollWheelZoom(!0),m.setMapStyle({style:"light"})}return y(f,[{key:"addLayer",value:function(c,h){if(this.type=="baidu")return new mapv.baiduMapLayer(this.map,dataSet,h)}},{key:"getMap",value:function(){return this.map}}]),f}();function Ze(f){this.options=f||{},this.paneName=this.options.paneName||"mapPane",this.context=this.options.context||"2d",this.zIndex=this.options.zIndex||0,this.mixBlendMode=this.options.mixBlendMode||null,this.enableMassClear=this.options.enableMassClear,this._map=f.map,this._lastDrawTime=null,this.show()}var Ke=typeof window>"u"?{}:window,nt=Ke.BMap||Ke.BMapGL;nt&&(Ze.prototype=new nt.Overlay,Ze.prototype.initialize=function(f){this._map=f;var a=this.canvas=document.createElement("canvas");a.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";user-select:none;",a.style.mixBlendMode=this.mixBlendMode,this.adjustSize();var c=f.getPanes()[this.paneName];c||(c=f.getPanes().floatShadow),c.appendChild(a);var h=this;return f.addEventListener("resize",function(){h.adjustSize(),h._draw()}),f.addEventListener("update",function(){h._draw()}),this.options.updateImmediate&&setTimeout(function(){h._draw()},100),this.canvas},Ze.prototype.adjustSize=function(){var f=this._map.getSize(),a=this.canvas,c=this.devicePixelRatio=Ke.devicePixelRatio||1;a.width=f.width*c,a.height=f.height*c,this.context=="2d"&&a.getContext(this.context).scale(c,c),a.style.width=f.width+"px",a.style.height=f.height+"px"},Ze.prototype.draw=function(){var f=this;this.options.updateImmediate?f._draw():(clearTimeout(f.timeoutID),f.timeoutID=setTimeout(function(){f._draw()},15))},Ze.prototype._draw=function(){var f=this._map,a=f.getSize(),c=f.getCenter();if(c){var h=f.pointToOverlayPixel(c);this.canvas.style.left=h.x-a.width/2+"px",this.canvas.style.top=h.y-a.height/2+"px",this.dispatchEvent("draw"),this.options.update&&this.options.update.call(this)}},Ze.prototype.getContainer=function(){return this.canvas},Ze.prototype.show=function(){this.canvas||this._map.addOverlay(this),this.canvas.style.display="block"},Ze.prototype.hide=function(){this.canvas.style.display="none"},Ze.prototype.setZIndex=function(f){this.zIndex=f,this.canvas.style.zIndex=this.zIndex},Ze.prototype.getZIndex=function(){return this.zIndex});var _e=_e||function(){var f=[];return{getAll:function(){return f},removeAll:function(){f=[]},add:function(c){f.push(c)},remove:function(c){var h=f.indexOf(c);h!==-1&&f.splice(h,1)},update:function(c,h){if(f.length===0)return!1;var d=0;for(c=c!==void 0?c:_e.now();d<f.length;)f[d].update(c)||h?d++:f.splice(d,1);return!0}}}();typeof window>"u"&&typeof process<"u"?_e.now=function(){var f=process.hrtime();return f[0]*1e3+f[1]/1e6}:typeof window<"u"&&window.performance!==void 0&&window.performance.now!==void 0?_e.now=window.performance.now.bind(window.performance):Date.now!==void 0?_e.now=Date.now:_e.now=function(){return new Date().getTime()},_e.Tween=function(f){var a=f,c={},h={},d={},v=1e3,m=0,C,A=!1,M=!1,O=0,R=null,N=_e.Easing.Linear.None,k=_e.Interpolation.Linear,z=[],U=null,H=!1,Z=null,ee=null,me=null;this.to=function(te,ne){return h=te,ne!==void 0&&(v=ne),this},this.start=function(te){_e.add(this),M=!0,H=!1,R=te!==void 0?te:_e.now(),R+=O;for(var ne in h){if(h[ne]instanceof Array){if(h[ne].length===0)continue;h[ne]=[a[ne]].concat(h[ne])}a[ne]!==void 0&&(c[ne]=a[ne],c[ne]instanceof Array||(c[ne]*=1),d[ne]=c[ne]||0)}return this},this.stop=function(){return M?(_e.remove(this),M=!1,me!==null&&me.call(a,a),this.stopChainedTweens(),this):this},this.end=function(){return this.update(R+v),this},this.stopChainedTweens=function(){for(var te=0,ne=z.length;te<ne;te++)z[te].stop()},this.delay=function(te){return O=te,this},this.repeat=function(te){return m=te,this},this.repeatDelay=function(te){return C=te,this},this.yoyo=function(te){return A=te,this},this.easing=function(te){return N=te,this},this.interpolation=function(te){return k=te,this},this.chain=function(){return z=arguments,this},this.onStart=function(te){return U=te,this},this.onUpdate=function(te){return Z=te,this},this.onComplete=function(te){return ee=te,this},this.onStop=function(te){return me=te,this},this.update=function(te){var ne,Ie,Fe;if(te<R)return!0;H===!1&&(U!==null&&U.call(a,a),H=!0),Ie=(te-R)/v,Ie=Ie>1?1:Ie,Fe=N(Ie);for(ne in h)if(c[ne]!==void 0){var Se=c[ne]||0,we=h[ne];we instanceof Array?a[ne]=k(we,Fe):(typeof we=="string"&&(we.charAt(0)==="+"||we.charAt(0)==="-"?we=Se+parseFloat(we):we=parseFloat(we)),typeof we=="number"&&(a[ne]=Se+(we-Se)*Fe))}if(Z!==null&&Z.call(a,Fe),Ie===1)if(m>0){isFinite(m)&&m--;for(ne in d){if(typeof h[ne]=="string"&&(d[ne]=d[ne]+parseFloat(h[ne])),A){var $e=d[ne];d[ne]=h[ne],h[ne]=$e}c[ne]=d[ne]}return C!==void 0?R=te+C:R=te+O,!0}else{ee!==null&&ee.call(a,a);for(var ke=0,Je=z.length;ke<Je;ke++)z[ke].start(R+v);return!1}return!0}},_e.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return--a*a*a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return .5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return a===0?0:Math.pow(1024,a-1)},Out:function(a){return a===1?1:1-Math.pow(2,-10*a)},InOut:function(a){return a===0?0:a===1?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){return a===0?0:a===1?1:-Math.pow(2,10*(a-1))*Math.sin((a-1.1)*5*Math.PI)},Out:function(a){return a===0?0:a===1?1:Math.pow(2,-10*a)*Math.sin((a-.1)*5*Math.PI)+1},InOut:function(a){return a===0?0:a===1?1:(a*=2,a<1?-.5*Math.pow(2,10*(a-1))*Math.sin((a-1.1)*5*Math.PI):.5*Math.pow(2,-10*(a-1))*Math.sin((a-1.1)*5*Math.PI)+1)}},Back:{In:function(a){var c=1.70158;return a*a*((c+1)*a-c)},Out:function(a){var c=1.70158;return--a*a*((c+1)*a+c)+1},InOut:function(a){var c=2.5949095;return(a*=2)<1?.5*(a*a*((c+1)*a-c)):.5*((a-=2)*a*((c+1)*a+c)+2)}},Bounce:{In:function(a){return 1-_e.Easing.Bounce.Out(1-a)},Out:function(a){return a<.36363636363636365?7.5625*a*a:a<.7272727272727273?7.5625*(a-=.5454545454545454)*a+.75:a<.9090909090909091?7.5625*(a-=.8181818181818182)*a+.9375:7.5625*(a-=.9545454545454546)*a+.984375},InOut:function(a){return a<.5?_e.Easing.Bounce.In(a*2)*.5:_e.Easing.Bounce.Out(a*2-1)*.5+.5}}},_e.Interpolation={Linear:function(a,c){var h=a.length-1,d=h*c,v=Math.floor(d),m=_e.Interpolation.Utils.Linear;return c<0?m(a[0],a[1],d):c>1?m(a[h],a[h-1],h-d):m(a[v],a[v+1>h?h:v+1],d-v)},Bezier:function(a,c){for(var h=0,d=a.length-1,v=Math.pow,m=_e.Interpolation.Utils.Bernstein,C=0;C<=d;C++)h+=v(1-c,d-C)*v(c,C)*a[C]*m(d,C);return h},CatmullRom:function(a,c){var h=a.length-1,d=h*c,v=Math.floor(d),m=_e.Interpolation.Utils.CatmullRom;return a[0]===a[h]?(c<0&&(v=Math.floor(d=h*(1+c))),m(a[(v-1+h)%h],a[v],a[(v+1)%h],a[(v+2)%h],d-v)):c<0?a[0]-(m(a[0],a[0],a[1],a[1],-d)-a[0]):c>1?a[h]-(m(a[h],a[h],a[h-1],a[h-1],d-h)-a[h]):m(a[v?v-1:0],a[v],a[h<v+1?h:v+1],a[h<v+2?h:v+2],d-v)},Utils:{Linear:function(a,c,h){return(c-a)*h+a},Bernstein:function(a,c){var h=_e.Interpolation.Utils.Factorial;return h(a)/h(c)/h(a-c)},Factorial:function(){var f=[1];return function(a){var c=1;if(f[a])return f[a];for(var h=a;h>1;h--)c*=h;return f[a]=c,c}}(),CatmullRom:function(a,c,h,d,v){var m=(h-a)*.5,C=(d-c)*.5,A=v*v,M=v*A;return(2*c-2*h+m+C)*M+(-3*c+3*h-2*m-C)*A+m*v+c}}};function Jo(f,a){var c=a[0]-f[0],h=a[1]-f[1],d=360*Math.atan(h/c)/(2*Math.PI);return a[0]<f[0]&&(d=d+180),d}var Es={},Nh={draw:function(a,c,h){var d="http://huiyan.baidu.com/github/tools/gis-drawing/static/images/direction.png";h.arrow&&h.arrow.url&&(d=h.arrow.url),Es[d]||(Es[d]=null);var v=Es[d];if(!v){var m=Array.prototype.slice.call(arguments),C=new Image;C.onload=function(){Es[d]=C,Nh.draw.apply(null,m)},C.src=d;return}var A=c instanceof x?c.get():c;a.save();for(var M in h)a[M]=h[M];for(var O=null,R=0,N=A.length;R<N;R++){var k=A[R];a.save(),(k.fillStyle||k._fillStyle)&&(a.fillStyle=k.fillStyle||k._fillStyle),(k.strokeStyle||k._strokeStyle)&&(a.strokeStyle=k.strokeStyle||k._strokeStyle);var z=k.geometry.type;if(a.beginPath(),z==="LineString"){for(var U=k.geometry._coordinates||k.geometry.coordinates,H=h.arrow.interval!==void 0?h.arrow.interval:1,Z=0;Z<U.length;Z+=H)if(U[Z]&&U[Z+1]){var ee=U[Z];if(O&&Dp(ee,O)<30)continue;a.save();var me=Jo(U[Z],U[Z+1]);a.translate(ee[0],ee[1]),a.rotate(me*Math.PI/180),a.drawImage(v,-v.width/2/2,-v.height/2/2,v.width/2,v.height/2),a.restore(),O=ee}}a.restore()}a.restore()}};function Dp(f,a){return Math.sqrt(Math.pow(f[0]-a[0],2)+Math.pow(f[1]-a[1],2))}var Np={draw:function(a,c,h){var d=c instanceof x?c.get():c;a.save(),a.fillStyle=h.fillStyle||"rgba(0, 0, 0, 0.5)",a.fillRect(0,0,a.canvas.width,a.canvas.height),h.multiPolygonDraw=function(){a.save(),a.clip(),r(a),a.restore()};for(var v=0,m=d.length;v<m;v++)a.beginPath(),b.drawDataSet(a,[d[v]],h),a.save(),a.clip(),r(a),a.restore();a.restore()}},Qo={},Jt={},Gp={draw:function(a,c,h){a.save();for(var d=c instanceof x?c.get():c,v=0;v<d.length;v++){var m=d[v],C=m.geometry._coordinates||m.geometry.coordinates;if(a.beginPath(),m.properties&&m.properties.cluster){if(a.arc(C[0],C[1],m.size,0,Math.PI*2),a.fillStyle=m.fillStyle,a.fill(),h.label&&h.label.show!==!1){a.fillStyle=h.label.fillStyle||"white",h.label.font&&(a.font=h.label.font),h.label.shadowColor&&(a.shadowColor=h.label.shadowColor),h.label.shadowBlur&&(a.shadowBlur=h.label.shadowBlur);var A=m.properties.point_count,M=a.measureText(A).width;a.fillText(A,C[0]+.5-M/2,C[1]+.5+3)}}else this.drawIcon(m,h,a)}a.restore()},drawIcon:function(a,c,h){var d=a.geometry._coordinates||a.geometry.coordinates,v=I(d,2),m=v[0],C=v[1],A=Object.assign({},c.iconOptions,a.iconOptions),M=function(){h.beginPath(),h.arc(m,C,c.size||5,0,Math.PI*2),h.fillStyle=c.fillStyle||"red",h.fill()};if(!A.url){M();return}var O=A.width,R=A.height,N=A.offset||{x:0,y:0};m=m-~~O/2+N.x,C=C-~~R/2+N.y;var k=window.encodeURIComponent(A.url),z=Qo[k];z?z==="error"?M():O&&R?h.drawImage(z,m,C,O,R):h.drawImage(z,m,C):(Jt[k]||(Jt[k]=[],Bp(k,function(U,H){Jt[H]&&Jt[H].forEach(function(Z){return Z(U)}),Jt[H]=null,Qo[H]=U},function(U){Jt[U]&&Jt[U].forEach(function(H){return H("error",U)}),Jt[U]=null,Qo[U]="error",M()})),Jt[k].push(function(U,H,Z,ee){return function(me){me==="error"?M():Z&&ee?h.drawImage(me,U,H,Z,ee):h.drawImage(me,U,H)}}(m,C,O,R)))}};function Bp(f,a,c){var h=new Image;h.onload=function(){a&&a(h,f)},h.onerror=function(){c&&c(f)},h.src=window.decodeURIComponent(f)}var zp={draw:function(a,c,h){var d=c instanceof x?c.get():c;a.save();for(var v in h)a[v]=h[v];var m=[],C=h._size||h.size;C?a.font="bold "+C+"px Arial":C=12;var A=h.textKey||"text";if(h.textAlign||(a.textAlign="center"),h.textBaseline||(a.textBaseline="middle"),h.avoid)for(var M=0,O=d.length;M<O;M++){var R=d[M].offset||h.offset||{x:0,y:0},N=d[M].geometry._coordinates||d[M].geometry.coordinates,k=N[0]+R.x,z=N[1]+R.y,U=d[M][A],H=a.measureText(U).width,Z=k-H/2,ee=z-C/2,me={sw:{x:Z,y:ee+C},ne:{x:Z+H,y:ee}};Up(m,me)||(m.push(me),Z=Z+H/2,ee=ee+C/2,a.fillText(U,Z,ee))}else for(var M=0,O=d.length;M<O;M++){var R=d[M].offset||h.offset||{x:0,y:0},N=d[M].geometry._coordinates||d[M].geometry.coordinates,k=N[0]+R.x,z=N[1]+R.y,U=d[M][A];a.fillText(U,k,z)}a.restore()}};function Up(f,a){for(var c=0;c<f.length;c++)if(Wp(f[c],a))return!0;return!1}function Wp(f,a){var c=Math.min(f.ne.x,a.ne.x),h=Math.min(f.sw.y,a.sw.y),d=Math.max(f.sw.x,a.sw.x),v=Math.max(f.ne.y,a.ne.y);return c>d&&h>v}var $o={},Qt={},Vp={draw:function(a,c,h){for(var d=c instanceof x?c.get():c,v=function(){var O=d[m];if(O.geometry)if(A=O.icon||h.icon,typeof A=="string"){var R=window.encodeURIComponent(A),N=$o[R];N?ea(N,h,a,O):(Qt[R]||(Qt[R]=[],qp(R,function(k,z){Qt[z]&&Qt[z].forEach(function(U){return U(k)}),Qt[z]=null,$o[z]=k},function(k){Qt[k]&&Qt[k].forEach(function(z){return z("error")}),Qt[k]=null,$o[k]="error"})),Qt[R].push(function(k){ea(k,h,a,O)}))}else ea(A,h,a,O)},m=0,C=d.length;m<C;m++){var A;v()}}};function ea(f,a,c,h){c.save();var d=h.geometry._coordinates||h.geometry.coordinates,v=d[0],m=d[1],C=a.offset||{x:0,y:0},A=h.width||a._width||a.width,M=h.height||a._height||a.height;if(v=v-~~A/2+C.x,m=m-~~M/2+C.y,typeof f=="string"){c.beginPath(),c.arc(v,m,a.size||5,0,Math.PI*2),c.fillStyle=a.fillStyle||"red",c.fill();return}var O=h.deg||a.deg;O&&(c.translate(v,m),c.rotate(O*Math.PI/180),c.translate(-v,-m)),a.sx&&a.sy&&a.swidth&&a.sheight&&a.width&&a.height?c.drawImage(f,a.sx,a.sy,a.swidth,a.sheight,v,m,A,M):A&&M?c.drawImage(f,v,m,A,M):c.drawImage(f,v,m),c.restore()}function qp(f,a,c){var h=new Image;h.onload=function(){a&&a(h,f)},h.onerror=function(){c&&c(f)},h.src=window.decodeURIComponent(f)}function ta(f,a,c,h,d,v){if(!(d-h<=c)){var m=h+d>>1;Gh(f,a,m,h,d,v%2),ta(f,a,c,h,m-1,v+1),ta(f,a,c,m+1,d,v+1)}}function Gh(f,a,c,h,d,v){for(;d>h;){if(d-h>600){var m=d-h+1,C=c-h+1,A=Math.log(m),M=.5*Math.exp(2*A/3),O=.5*Math.sqrt(A*M*(m-M)/m)*(C-m/2<0?-1:1),R=Math.max(h,Math.floor(c-C*M/m+O)),N=Math.min(d,Math.floor(c+(m-C)*M/m+O));Gh(f,a,c,R,N,v)}var k=a[2*c+v],z=h,U=d;for(ar(f,a,h,c),a[2*d+v]>k&&ar(f,a,h,d);z<U;){for(ar(f,a,z,U),z++,U--;a[2*z+v]<k;)z++;for(;a[2*U+v]>k;)U--}a[2*h+v]===k?ar(f,a,h,U):(U++,ar(f,a,U,d)),U<=c&&(h=U+1),c<=U&&(d=U-1)}}function ar(f,a,c,h){ia(f,c,h),ia(a,2*c,2*h),ia(a,2*c+1,2*h+1)}function ia(f,a,c){var h=f[a];f[a]=f[c],f[c]=h}function Yp(f,a,c,h,d,v,m){for(var C=[0,f.length-1,0],A=[],M,O;C.length;){var R=C.pop(),N=C.pop(),k=C.pop();if(N-k<=m){for(var z=k;z<=N;z++)M=a[2*z],O=a[2*z+1],M>=c&&M<=d&&O>=h&&O<=v&&A.push(f[z]);continue}var U=Math.floor((k+N)/2);M=a[2*U],O=a[2*U+1],M>=c&&M<=d&&O>=h&&O<=v&&A.push(f[U]);var H=(R+1)%2;(R===0?c<=M:h<=O)&&(C.push(k),C.push(U-1),C.push(H)),(R===0?d>=M:v>=O)&&(C.push(U+1),C.push(N),C.push(H))}return A}function Xp(f,a,c,h,d,v){for(var m=[0,f.length-1,0],C=[],A=d*d;m.length;){var M=m.pop(),O=m.pop(),R=m.pop();if(O-R<=v){for(var N=R;N<=O;N++)Bh(a[2*N],a[2*N+1],c,h)<=A&&C.push(f[N]);continue}var k=Math.floor((R+O)/2),z=a[2*k],U=a[2*k+1];Bh(z,U,c,h)<=A&&C.push(f[k]);var H=(M+1)%2;(M===0?c-d<=z:h-d<=U)&&(m.push(R),m.push(k-1),m.push(H)),(M===0?c+d>=z:h+d>=U)&&(m.push(k+1),m.push(O),m.push(H))}return C}function Bh(f,a,c,h){var d=f-c,v=a-h;return d*d+v*v}var Hp=function(a){return a[0]},jp=function(a){return a[1]},Cs=function(a,c,h,d,v){c===void 0&&(c=Hp),h===void 0&&(h=jp),d===void 0&&(d=64),v===void 0&&(v=Float64Array),this.nodeSize=d,this.points=a;for(var m=a.length<65536?Uint16Array:Uint32Array,C=this.ids=new m(a.length),A=this.coords=new v(a.length*2),M=0;M<a.length;M++)C[M]=M,A[2*M]=c(a[M]),A[2*M+1]=h(a[M]);ta(C,A,d,0,C.length-1,0)};Cs.prototype.range=function(a,c,h,d){return Yp(this.ids,this.coords,a,c,h,d,this.nodeSize)},Cs.prototype.within=function(a,c,h){return Xp(this.ids,this.coords,a,c,h,this.nodeSize)};var Zp={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(a){return a}},ut=function(a){this.options=lr(Object.create(Zp),a),this.trees=new Array(this.options.maxZoom+1)};ut.prototype.load=function(a){var c=this.options;c.log;var h=c.minZoom,d=c.maxZoom,v=c.nodeSize;""+a.length,this.points=a;for(var m=[],C=0;C<a.length;C++)!a[C].geometry||m.push(Jp(a[C],C));this.trees[d+1]=new Cs(m,Wh,Vh,v,Float32Array);for(var A=d;A>=h;A--)m=this._cluster(m,A),this.trees[A]=new Cs(m,Wh,Vh,v,Float32Array);return this},ut.prototype.getClusters=function(a,c){var h=((a[0]+180)%360+360)%360-180,d=Math.max(-90,Math.min(90,a[1])),v=a[2]===180?180:((a[2]+180)%360+360)%360-180,m=Math.max(-90,Math.min(90,a[3]));if(a[2]-a[0]>=360)h=-180,v=180;else if(h>v){var C=this.getClusters([h,d,180,m],c),A=this.getClusters([-180,d,v,m],c);return C.concat(A)}for(var M=this.trees[this._limitZoom(c)],O=M.range(na(h),ra(m),na(v),ra(d)),R=[],N=0,k=O;N<k.length;N+=1){var z=k[N],U=M.points[z];R.push(U.numPoints?zh(U):this.points[U.index])}return R},ut.prototype.getChildren=function(a){var c=this._getOriginId(a),h=this._getOriginZoom(a),d="No cluster with the specified id.",v=this.trees[h];if(!v)throw new Error(d);var m=v.points[c];if(!m)throw new Error(d);for(var C=this.options.radius/(this.options.extent*Math.pow(2,h-1)),A=v.within(m.x,m.y,C),M=[],O=0,R=A;O<R.length;O+=1){var N=R[O],k=v.points[N];k.parentId===a&&M.push(k.numPoints?zh(k):this.points[k.index])}if(M.length===0)throw new Error(d);return M},ut.prototype.getLeaves=function(a,c,h){c=c||10,h=h||0;var d=[];return this._appendLeaves(d,a,c,h,0),d},ut.prototype.getTile=function(a,c,h){var d=this.trees[this._limitZoom(a)],v=Math.pow(2,a),m=this.options,C=m.extent,A=m.radius,M=A/C,O=(h-M)/v,R=(h+1+M)/v,N={features:[]};return this._addTileFeatures(d.range((c-M)/v,O,(c+1+M)/v,R),d.points,c,h,v,N),c===0&&this._addTileFeatures(d.range(1-M/v,O,1,R),d.points,v,h,v,N),c===v-1&&this._addTileFeatures(d.range(0,O,M/v,R),d.points,-1,h,v,N),N.features.length?N:null},ut.prototype.getClusterExpansionZoom=function(a){for(var c=this._getOriginZoom(a)-1;c<=this.options.maxZoom;){var h=this.getChildren(a);if(c++,h.length!==1)break;a=h[0].properties.cluster_id}return c},ut.prototype._appendLeaves=function(a,c,h,d,v){for(var m=this.getChildren(c),C=0,A=m;C<A.length;C+=1){var M=A[C],O=M.properties;if(O&&O.cluster?v+O.point_count<=d?v+=O.point_count:v=this._appendLeaves(a,O.cluster_id,h,d,v):v<d?v++:a.push(M),a.length===h)break}return v},ut.prototype._addTileFeatures=function(a,c,h,d,v,m){for(var C=0,A=a;C<A.length;C+=1){var M=A[C],O=c[M],R=O.numPoints,N={type:1,geometry:[[Math.round(this.options.extent*(O.x*v-h)),Math.round(this.options.extent*(O.y*v-d))]],tags:R?Uh(O):this.points[O.index].properties},k=void 0;R?k=O.id:this.options.generateId?k=O.index:this.points[O.index].id&&(k=this.points[O.index].id),k!==void 0&&(N.id=k),m.features.push(N)}},ut.prototype._limitZoom=function(a){return Math.max(this.options.minZoom,Math.min(+a,this.options.maxZoom+1))},ut.prototype._cluster=function(a,c){for(var h=[],d=this.options,v=d.radius,m=d.extent,C=d.reduce,A=d.minPoints,M=v/(m*Math.pow(2,c)),O=0;O<a.length;O++){var R=a[O];if(!(R.zoom<=c)){R.zoom=c;for(var N=this.trees[c+1],k=N.within(R.x,R.y,M),z=R.numPoints||1,U=z,H=0,Z=k;H<Z.length;H+=1){var ee=Z[H],me=N.points[ee];me.zoom>c&&(U+=me.numPoints||1)}if(U>=A){for(var te=R.x*z,ne=R.y*z,Ie=C&&z>1?this._map(R,!0):null,Fe=(O<<5)+(c+1)+this.points.length,Se=0,we=k;Se<we.length;Se+=1){var $e=we[Se],ke=N.points[$e];if(!(ke.zoom<=c)){ke.zoom=c;var Je=ke.numPoints||1;te+=ke.x*Je,ne+=ke.y*Je,ke.parentId=Fe,C&&(Ie||(Ie=this._map(R,!0)),C(Ie,this._map(ke)))}}R.parentId=Fe,h.push(Kp(te/U,ne/U,Fe,U,Ie))}else if(h.push(R),U>1)for(var ct=0,dt=k;ct<dt.length;ct+=1){var hr=dt[ct],En=N.points[hr];En.zoom<=c||(En.zoom=c,h.push(En))}}}return h},ut.prototype._getOriginId=function(a){return a-this.points.length>>5},ut.prototype._getOriginZoom=function(a){return(a-this.points.length)%32},ut.prototype._map=function(a,c){if(a.numPoints)return c?lr({},a.properties):a.properties;var h=this.points[a.index].properties,d=this.options.map(h);return c&&d===h?lr({},d):d};function Kp(f,a,c,h,d){return{x:f,y:a,zoom:1/0,id:c,parentId:-1,numPoints:h,properties:d}}function Jp(f,a){var c=f.geometry.coordinates,h=c[0],d=c[1];return{x:na(h),y:ra(d),zoom:1/0,index:a,parentId:-1}}function zh(f){return{type:"Feature",id:f.id,properties:Uh(f),geometry:{type:"Point",coordinates:[Qp(f.x),$p(f.y)]}}}function Uh(f){var a=f.numPoints,c=a>=1e4?Math.round(a/1e3)+"k":a>=1e3?Math.round(a/100)/10+"k":a;return lr(lr({},f.properties),{cluster:!0,cluster_id:f.id,point_count:a,point_count_abbreviated:c})}function na(f){return f/360+.5}function ra(f){var a=Math.sin(f*Math.PI/180),c=.5-.25*Math.log((1+a)/(1-a))/Math.PI;return c<0?0:c>1?1:c}function Qp(f){return(f-.5)*360}function $p(f){var a=(180-f*360)*Math.PI/180;return 360*Math.atan(Math.exp(a))/Math.PI-90}function lr(f,a){for(var c in a)f[c]=a[c];return f}function Wh(f){return f.x}function Vh(f){return f.y}typeof window<"u"&&requestAnimationFrame(qh);function qh(f){requestAnimationFrame(qh),_e.update(f)}var kt=function(){function f(a,c,h){p(this,f),c instanceof x||(c=new x(c)),this.dataSet=c,this.map=a,h.draw==="cluster"&&this.refreshCluster(h)}return y(f,[{key:"refreshCluster",value:function(c){c=c||this.options,this.supercluster=new ut({maxZoom:c.maxZoom||19,radius:c.clusterRadius||100,minPoints:c.minPoints||2,extent:c.extent||512}),this.supercluster.load(this.dataSet.get()),this.supercluster.trees.forEach(function(h){var d=0,v=1/0;h.points.forEach(function(m){d=Math.max(m.numPoints||0,d),v=Math.min(m.numPoints||1/0,v)}),h.max=d,h.min=v}),this.clusterDataSet=new x}},{key:"getDefaultContextConfig",value:function(){return{globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0,strokeStyle:"#000000",fillStyle:"#000000",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)",lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,lineDashOffset:0,font:"10px sans-serif",textAlign:"start",textBaseline:"alphabetic"}}},{key:"initDataRange",value:function(c){var h=this;if(h.intensity=new X({maxSize:h.options.maxSize,minSize:h.options.minSize,gradient:h.options.gradient,max:h.options.max||this.dataSet.getMax("count")}),h.category=new it(h.options.splitList),h.choropleth=new ze(h.options.splitList),h.options.splitList===void 0&&h.category.generateByDataSet(this.dataSet,h.options.color),h.options.splitList===void 0){var d=h.options.min||this.dataSet.getMin("count"),v=h.options.max||this.dataSet.getMax("count");h.choropleth.generateByMinMax(d,v)}}},{key:"getLegend",value:function(c){this.options.draw;var h=this;if(h.options.draw=="intensity"||h.options.draw=="heatmap")return this.intensity.getLegend(c);if(h.options.draw=="category")return this.category.getLegend(c)}},{key:"processData",value:function(c){var h=this,d=h.options.draw;if(d=="bubble"||d=="intensity"||d=="category"||d=="choropleth"||d=="simple")for(var v=0;v<c.length;v++){var m=c[v];h.options.draw=="bubble"?c[v]._size=h.intensity.getSize(m.count):c[v]._size=void 0;var C="_fillStyle";(c[v].geometry.type==="LineString"||h.options.styleType==="stroke")&&(C="_strokeStyle"),h.options.draw=="intensity"?c[v][C]=h.intensity.getColor(m.count):h.options.draw=="category"?c[v][C]=h.category.get(m.count):h.options.draw=="choropleth"&&(c[v][C]=h.choropleth.get(m.count))}}},{key:"isEnabledTime",value:function(){var c=this.options.animation,h=c&&c.enabled!==!1;return h}},{key:"argCheck",value:function(c){c.draw=="heatmap"&&c.strokeStyle&&console.warn("[heatmap] options.strokeStyle is discard, pleause use options.strength [eg: options.strength = 0.1]")}},{key:"drawContext",value:function(c,h,d,v){var m=this;switch(m.options.draw){case"heatmap":re.draw(c,h,m.options);break;case"grid":case"cluster":case"honeycomb":m.options.offset={x:v.x,y:v.y},m.options.draw==="grid"?le.draw(c,h,m.options):m.options.draw==="cluster"?Gp.draw(c,h,m.options):ye.draw(c,h,m.options);break;case"text":zp.draw(c,h,m.options);break;case"icon":Vp.draw(c,h,m.options);break;case"clip":Np.draw(c,h,m.options);break;default:m.options.context=="webgl"?or.draw(m.canvasLayer.canvas.getContext("webgl"),h,m.options):F.draw(c,h,m.options)}m.options.arrow&&m.options.arrow.show!==!1&&Nh.draw(c,h,m.options)}},{key:"isPointInPath",value:function(d,h){var d=this.canvasLayer.canvas.getContext(this.context),v;this.options.draw==="cluster"&&(!this.options.maxClusterZoom||this.options.maxClusterZoom>=this.getZoom())?v=this.clusterDataSet.get():v=this.dataSet.get();for(var m=0;m<v.length;m++){d.beginPath();var C=this.options,A=h.x*this.canvasLayer.devicePixelRatio,M=h.y*this.canvasLayer.devicePixelRatio;C.multiPolygonDraw=function(){if(d.isPointInPath(A,M))return v[m]},b.draw(d,v[m],C);var O=v[m].geometry&&v[m].geometry.type;if(O.indexOf("LineString")>-1){if(d.isPointInStroke&&d.isPointInStroke(A,M))return v[m]}else if(d.isPointInPath(A,M))return v[m]}}},{key:"getClusterPoints",value:function(c){var h=this;if(c.type!=="Feature")return[];var d=this.supercluster.getChildren(c.id);return d.map(function(v){return v.type==="Feature"?h.getClusterPoints(v):v}).flat()}},{key:"clickEvent",value:function(c,h){if(!!this.options.methods){var d=this.isPointInPath(this.getContext(),c);if(d){if(this.options.draw==="cluster"){var v=this.getClusterPoints(d);d.children=v}this.options.methods.click(d,h)}else this.options.methods.click(null,h)}}},{key:"mousemoveEvent",value:function(c,h){if(!!this.options.methods){var d=this.isPointInPath(this.getContext(),c);if(d){if(this.options.draw==="cluster"){var v=this.getClusterPoints(d);d.children=v}this.options.methods.mousemove(d,h)}else this.options.methods.mousemove(null,h)}}},{key:"tapEvent",value:function(c,h){if(!!this.options.methods){var d=this.isPointInPath(this.getContext(),c);if(d){if(this.options.draw==="cluster"){var v=this.getClusterPoints(d);d.children=v}this.options.methods.tap(d,h)}else this.options.methods.tap(null,h)}}},{key:"update",value:function(c,h){var d=this,v=c.options,m=d.options;for(var C in v)m[C]=v[C];d.init(m),h!==!1&&d.draw()}},{key:"setOptions",value:function(c){var h=this;h.dataSet.reset(),h.init(c),h.draw()}},{key:"set",value:function(c){var h=this,d=this.getContext(),v=this.getDefaultContextConfig();for(var m in v)d[m]=v[m];h.init(c.options),h.draw()}},{key:"destroy",value:function(){this.unbindEvent(),this.hide()}},{key:"initAnimator",value:function(){var c=this,h=c.options.animation;if(c.options.draw=="time"||c.isEnabledTime()){h.stepsRange||(h.stepsRange={start:this.dataSet.getMin("time")||0,end:this.dataSet.getMax("time")||0}),this.steps={step:h.stepsRange.start},c.animator=new _e.Tween(this.steps).onUpdate(function(){c._canvasUpdate(this.step)}).repeat(1/0),this.addAnimatorEvent();var d=h.duration*1e3||5e3;c.animator.to({step:h.stepsRange.end},d),c.animator.start()}else c.animator&&c.animator.stop()}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var c=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=c.stepsRange.start,this.animator.stop())}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator&&this.animator.start()}}]),f}(),Yh=typeof window>"u"?{}:window,ev=Yh.BMap||Yh.BMapGL,tv=function(f){_(a,f);function a(c,h,d){p(this,a);var v=E(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,h,d));v.map=c,v.options=d||{},v.dataSet=h;var m=new Ze({map:c,zIndex:v.options.zIndex,update:v._canvasUpdate.bind(v)});v.init(v.options),v.canvasLayer=m,v.transferToMercator();var C=v;return h.on("change",function(){C.transferToMercator(),m.draw()}),v.ctx=m.canvas.getContext("2d"),v.start(),v}return y(a,[{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"init",value:function(h){var d=this;d.options=h,this.initDataRange(h),this.context=d.options.context||"2d",d.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(d.options.zIndex),d.options.max&&this.intensity.setMax(d.options.max),d.options.min&&this.intensity.setMin(d.options.min),this.initAnimator()}},{key:"transferToMercator",value:function(){var h=this.map,d=h.getMapType(),v;if(d.getProjection?v=d.getProjection():v={lngLatToPoint:function(A){var M=h.lnglatToMercator(A.lng,A.lat);return{x:M[0],y:M[1]}}},this.options.coordType!=="bd09mc"){var m=this.dataSet.get();m=this.dataSet.transferCoordinate(m,function(C){var A=v.lngLatToPoint({lng:C[0],lat:C[1]});return[A.x,A.y]},"coordinates","coordinates_mercator"),this.dataSet._set(m)}}},{key:"_canvasUpdate",value:function(){var h=this.ctx;if(!!h){var d=this.map,v,m;d.getMapType().getProjection?(v=d.getMapType().getProjection(),m=v.lngLatToPoint(d.getCenter())):(m={x:d.getCenter().lng,y:d.getCenter().lat},m.x>-180&&m.x<180&&(m=d.lnglatToMercator(m.x,m.y),m={x:m[0],y:m[1]}),v={lngLatToPoint:function(R){var N=d.lnglatToMercator(R.lng,R.lat);return{x:N[0],y:N[1]}}});var C;v.getZoomUnits?C=v.getZoomUnits(d.getZoom()):C=Math.pow(2,18-d.getZoom());var A=new ev.Pixel(m.x-d.getSize().width/2*C,m.y+d.getSize().height/2*C);r(h);var M={fromColumn:this.options.coordType=="bd09mc"?"coordinates":"coordinates_mercator",transferCoordinate:function(R){if(!!R){var N=(R[0]-A.x)/C,k=(A.y-R[1])/C;return[N,k]}}};this.data=this.dataSet.get(M),this.processData(this.data),this.drawAnimation()}}},{key:"drawAnimation",value:function(){var h=this.ctx,d=this.data;if(!!d){h.save(),h.globalCompositeOperation="destination-out",h.fillStyle="rgba(0, 0, 0, .1)",h.fillRect(0,0,h.canvas.width,h.canvas.height),h.restore(),h.save(),this.options.shadowColor&&(h.shadowColor=this.options.shadowColor),this.options.shadowBlur&&(h.shadowBlur=this.options.shadowBlur),this.options.globalAlpha&&(h.globalAlpha=this.options.globalAlpha),this.options.globalCompositeOperation&&(h.globalCompositeOperation=this.options.globalCompositeOperation);for(var v=this.options,m=0;m<d.length;m++)if(d[m].geometry.type==="Point"){h.beginPath();var C=d[m].size||this.options.size,A=d[m].minSize||this.options.minSize||0;d[m]._size===void 0&&(d[m]._size=A),h.arc(d[m].geometry._coordinates[0],d[m].geometry._coordinates[1],d[m]._size,0,Math.PI*2,!0),h.closePath(),d[m]._size++,d[m]._size>C&&(d[m]._size=A),h.lineWidth=1,h.strokeStyle=d[m].strokeStyle||d[m]._strokeStyle||v.strokeStyle||"yellow",h.stroke();var M=d[m].fillStyle||d[m]._fillStyle||v.fillStyle;M&&(h.fillStyle=M,h.fill())}else if(d[m].geometry.type==="LineString"){h.beginPath();var O=d[m].size||this.options.size||5,A=d[m].minSize||this.options.minSize||0;d[m]._index===void 0&&(d[m]._index=0);var R=d[m]._index;h.arc(d[m].geometry._coordinates[R][0],d[m].geometry._coordinates[R][1],O,0,Math.PI*2,!0),h.closePath(),d[m]._index++,d[m]._index>=d[m].geometry._coordinates.length&&(d[m]._index=0);var N=d[m].strokeStyle||v.strokeStyle,M=d[m].fillStyle||v.fillStyle||"yellow";h.fillStyle=M,h.fill(),N&&v.lineWidth&&(h.lineWidth=v.lineWidth||1,h.strokeStyle=N,h.stroke())}h.restore()}}},{key:"animate",value:function(){this.drawAnimation();var h=this.options.animateTime||100;this.timeout=setTimeout(this.animate.bind(this),h)}},{key:"start",value:function(){this.stop(),this.animate()}},{key:"stop",value:function(){clearTimeout(this.timeout)}},{key:"unbindEvent",value:function(){}},{key:"hide",value:function(){this.canvasLayer.hide(),this.stop()}},{key:"show",value:function(){this.start()}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"destroy",value:function(){this.stop(),this.unbindEvent(),this.clearData(),this.map.removeOverlay(this.canvasLayer),this.canvasLayer=null}}]),a}(kt),Xh=typeof window>"u"?{}:window,Hh=Xh.BMap||Xh.BMapGL,iv=function(f){_(a,f);function a(c,h,d){p(this,a);var v=E(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,h,d)),m=v;d=d||{},v.clickEvent=v.clickEvent.bind(v),v.mousemoveEvent=v.mousemoveEvent.bind(v),v.tapEvent=v.tapEvent.bind(v),m.init(d),m.argCheck(d),m.transferToMercator();var C=v.canvasLayer=new Ze({map:c,context:v.context,updateImmediate:d.updateImmediate,paneName:d.paneName,mixBlendMode:d.mixBlendMode,enableMassClear:d.enableMassClear,zIndex:d.zIndex,update:function(){m._canvasUpdate()}});return h.on("change",function(){m.transferToMercator(),d.draw==="cluster"&&m.refreshCluster(),C.draw()}),v}return y(a,[{key:"clickEvent",value:function(h){var d=h.pixel;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"clickEvent",this).call(this,d,h)}},{key:"mousemoveEvent",value:function(h){var d=h.pixel;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"mousemoveEvent",this).call(this,d,h)}},{key:"tapEvent",value:function(h){var d=h.pixel;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"tapEvent",this).call(this,d,h)}},{key:"bindEvent",value:function(h){this.unbindEvent();var d=this.map,v=0,m=this;this.options.methods&&(this.options.methods.click&&(d.setDefaultCursor("default"),d.addEventListener("click",this.clickEvent)),this.options.methods.mousemove&&d.addEventListener("mousemove",this.mousemoveEvent),"ontouchend"in window.document&&this.options.methods.tap&&(d.addEventListener("touchstart",function(C){v=new Date}),d.addEventListener("touchend",function(C){new Date-v<300&&m.tapEvent(C)})))}},{key:"unbindEvent",value:function(h){var d=this.map;this.options.methods&&(this.options.methods.click&&d.removeEventListener("click",this.clickEvent),this.options.methods.mousemove&&d.removeEventListener("mousemove",this.mousemoveEvent))}},{key:"transferToMercator",value:function(h){h||(h=this.dataSet);var d=this.map,v=d.getMapType(),m;if(v.getProjection?m=v.getProjection():m={lngLatToPoint:function(M){var O=d.lnglatToMercator(M.lng,M.lat);return{x:O[0],y:O[1]}}},this.options.coordType!=="bd09mc"){var C=h.get();C=h.transferCoordinate(C,function(A){if(A[0]<-180||A[0]>180||A[1]<-90||A[1]>90)return A;var M=m.lngLatToPoint({lng:A[0],lat:A[1]});return[M.x,M.y]},"coordinates","coordinates_mercator"),h._set(C)}}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(h){if(!!this.canvasLayer){var d=this,v=this.options.animation,m=this.canvasLayer._map,C,A;m.getMapType().getProjection?(C=m.getMapType().getProjection(),A=C.lngLatToPoint(m.getCenter())):(A={x:m.getCenter().lng,y:m.getCenter().lat},A.x>-180&&A.x<180&&(A=m.lnglatToMercator(A.x,A.y),A={x:A[0],y:A[1]}),C={lngLatToPoint:function(Je){var ct=m.lnglatToMercator(Je.lng,Je.lat);return{x:ct[0],y:ct[1]}}});var M;C.getZoomUnits?M=C.getZoomUnits(m.getZoom()):M=Math.pow(2,18-m.getZoom());var O=new Hh.Pixel(A.x-m.getSize().width/2*M,A.y+m.getSize().height/2*M),R=this.getContext();if(this.isEnabledTime()){if(h===void 0){r(R);return}this.context=="2d"&&(R.save(),R.globalCompositeOperation="destination-out",R.fillStyle="rgba(0, 0, 0, .1)",R.fillRect(0,0,R.canvas.width,R.canvas.height),R.restore())}else r(R);if(this.context=="2d")for(var N in this.options)R[N]=this.options[N];else R.clear(R.COLOR_BUFFER_BIT);if(!(this.options.minZoom&&m.getZoom()<this.options.minZoom||this.options.maxZoom&&m.getZoom()>this.options.maxZoom)){var k=1;this.context!="2d"&&(k=this.canvasLayer.devicePixelRatio);var z={fromColumn:this.options.coordType=="bd09mc"?"coordinates":"coordinates_mercator",transferCoordinate:function(Je){var ct=(Je[0]-O.x)/M*k,dt=(O.y-Je[1])/M*k;return[ct,dt]}};h!==void 0&&(z.filter=function(ke){var Je=v.trails||10;return!!(h&&ke.time>h-Je&&ke.time<h)});var U,H=this.getZoom();if(this.options.draw==="cluster"&&(!this.options.maxClusterZoom||this.options.maxClusterZoom>=H)){var Z=this.map.getBounds(),ee=Z.getNorthEast(),me=Z.getSouthWest(),te=this.supercluster.getClusters([me.lng,me.lat,ee.lng,ee.lat],H);this.pointCountMax=this.supercluster.trees[H].max,this.pointCountMin=this.supercluster.trees[H].min;var ne={},Ie=null,Fe=null;this.pointCountMax===this.pointCountMin?(Ie=this.options.fillStyle,Fe=this.options.minSize||8):ne=new X({min:this.pointCountMin,max:this.pointCountMax,minSize:this.options.minSize||8,maxSize:this.options.maxSize||30,gradient:this.options.gradient});for(var Se=0;Se<te.length;Se++){var we=te[Se];we.properties&&we.properties.cluster_id?(te[Se].size=Fe||ne.getSize(we.properties.point_count),te[Se].fillStyle=Ie||ne.getColor(we.properties.point_count)):te[Se].size=d.options.size}this.clusterDataSet.set(te),this.transferToMercator(this.clusterDataSet),U=d.clusterDataSet.get(z)}else U=d.dataSet.get(z);this.processData(U);var $e=m.pointToPixel(new Hh.Point(0,0));d.options.unit=="m"?(d.options.size&&(d.options._size=d.options.size/M),d.options.width&&(d.options._width=d.options.width/M),d.options.height&&(d.options._height=d.options.height/M)):(d.options._size=d.options.size,d.options._height=d.options.height,d.options._width=d.options.width),this.drawContext(R,U,d.options,$e),d.options.updateCallback&&d.options.updateCallback(h)}}}},{key:"init",value:function(h){var d=this;d.options=h,this.initDataRange(h),this.context=d.options.context||"2d",d.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(d.options.zIndex),d.options.max&&this.intensity.setMax(d.options.max),d.options.min&&this.intensity.setMin(d.options.min),this.initAnimator(),this.bindEvent()}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"addAnimatorEvent",value:function(){this.map.addEventListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addEventListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer),this.bindEvent()}},{key:"hide",value:function(){this.unbindEvent(),this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){this.canvasLayer&&this.canvasLayer.draw()}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.map.removeOverlay(this.canvasLayer),this.canvasLayer=null}}]),a}(kt);function Pe(f){this.isAdded_=!1,this.isAnimated_=!1,this.paneName_=Pe.DEFAULT_PANE_NAME_,this.updateHandler_=null,this.resizeHandler_=null,this.topLeft_=null,this.centerListener_=null,this.resizeListener_=null,this.needsResize_=!0,this.requestAnimationFrameId_=null;var a=document.createElement("canvas");a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.pointerEvents="none",this.canvas=a,this.canvasCssWidth_=300,this.canvasCssHeight_=150,this.resolutionScale_=1;function c(h,d){return function(){d.apply(h)}}this.repositionFunction_=c(this,this.repositionCanvas_),this.resizeFunction_=c(this,this.resize_),this.requestUpdateFunction_=c(this,this.update_),f&&this.setOptions(f)}var rt=typeof window>"u"?{}:window;rt.google&&rt.google.maps&&(Pe.prototype=new google.maps.OverlayView,Pe.DEFAULT_PANE_NAME_="overlayLayer",Pe.CSS_TRANSFORM_=function(){for(var f=document.createElement("div"),a=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],c=0;c<a.length;c++){var h=a[c];if(f.style[h]!==void 0)return h}return a[0]}(),Pe.prototype.requestAnimFrame_=rt.requestAnimationFrame||rt.webkitRequestAnimationFrame||rt.mozRequestAnimationFrame||rt.oRequestAnimationFrame||rt.msRequestAnimationFrame||function(f){return rt.setTimeout(f,16.666666666666668)},Pe.prototype.cancelAnimFrame_=rt.cancelAnimationFrame||rt.webkitCancelAnimationFrame||rt.mozCancelAnimationFrame||rt.oCancelAnimationFrame||rt.msCancelAnimationFrame||function(f){},Pe.prototype.setOptions=function(f){f.animate!==void 0&&this.setAnimate(f.animate),f.paneName!==void 0&&this.setPaneName(f.paneName),f.updateHandler!==void 0&&this.setUpdateHandler(f.updateHandler),f.resizeHandler!==void 0&&this.setResizeHandler(f.resizeHandler),f.resolutionScale!==void 0&&this.setResolutionScale(f.resolutionScale),f.map!==void 0&&this.setMap(f.map)},Pe.prototype.setAnimate=function(f){this.isAnimated_=!!f,this.isAnimated_&&this.scheduleUpdate()},Pe.prototype.isAnimated=function(){return this.isAnimated_},Pe.prototype.setPaneName=function(f){this.paneName_=f,this.setPane_()},Pe.prototype.getPaneName=function(){return this.paneName_},Pe.prototype.setPane_=function(){if(!!this.isAdded_){var f=this.getPanes();if(!f[this.paneName_])throw new Error('"'+this.paneName_+'" is not a valid MapPane name.');f[this.paneName_].appendChild(this.canvas)}},Pe.prototype.setResizeHandler=function(f){this.resizeHandler_=f},Pe.prototype.setResolutionScale=function(f){typeof f=="number"&&(this.resolutionScale_=f,this.resize_())},Pe.prototype.setUpdateHandler=function(f){this.updateHandler_=f},Pe.prototype.onAdd=function(){this.isAdded_||(this.isAdded_=!0,this.setPane_(),this.resizeListener_=google.maps.event.addListener(this.getMap(),"resize",this.resizeFunction_),this.centerListener_=google.maps.event.addListener(this.getMap(),"center_changed",this.repositionFunction_),this.resize_(),this.repositionCanvas_())},Pe.prototype.onRemove=function(){!this.isAdded_||(this.isAdded_=!1,this.topLeft_=null,this.canvas.parentElement.removeChild(this.canvas),this.centerListener_&&(google.maps.event.removeListener(this.centerListener_),this.centerListener_=null),this.resizeListener_&&(google.maps.event.removeListener(this.resizeListener_),this.resizeListener_=null),this.requestAnimationFrameId_&&(this.cancelAnimFrame_.call(rt,this.requestAnimationFrameId_),this.requestAnimationFrameId_=null))},Pe.prototype.resize_=function(){if(!!this.isAdded_){var f=this.getMap(),a=f.getDiv().offsetWidth,c=f.getDiv().offsetHeight,h=a*this.resolutionScale_,d=c*this.resolutionScale_,v=this.canvas.width,m=this.canvas.height;(v!==h||m!==d)&&(this.canvas.width=h,this.canvas.height=d,this.needsResize_=!0,this.scheduleUpdate()),(this.canvasCssWidth_!==a||this.canvasCssHeight_!==c)&&(this.canvasCssWidth_=a,this.canvasCssHeight_=c,this.canvas.style.width=a+"px",this.canvas.style.height=c+"px")}},Pe.prototype.draw=function(){this.repositionCanvas_()},Pe.prototype.repositionCanvas_=function(){var f=this.getMap(),a=f.getBounds().getNorthEast().lat(),c=f.getCenter(),h=Math.pow(2,f.getZoom()),d=c.lng()-this.canvasCssWidth_*180/(256*h);this.topLeft_=new google.maps.LatLng(a,d);var v=this.getProjection(),m=v.fromLatLngToDivPixel(c),C=-Math.round(this.canvasCssWidth_/2-m.x),A=-Math.round(this.canvasCssHeight_/2-m.y);this.canvas.style[Pe.CSS_TRANSFORM_]="translate("+C+"px,"+A+"px)",this.scheduleUpdate()},Pe.prototype.update_=function(){this.requestAnimationFrameId_=null,this.isAdded_&&(this.isAnimated_&&this.scheduleUpdate(),this.needsResize_&&this.resizeHandler_&&(this.needsResize_=!1,this.resizeHandler_()),this.updateHandler_&&this.updateHandler_())},Pe.prototype.getTopLeft=function(){return this.topLeft_},Pe.prototype.scheduleUpdate=function(){this.isAdded_&&!this.requestAnimationFrameId_&&(this.requestAnimationFrameId_=this.requestAnimFrame_.call(rt,this.requestUpdateFunction_))});var nv=function(f){_(a,f);function a(c,h,d){p(this,a);var v=E(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,h,d)),m=v;d=d||{},m.init(d),m.argCheck(d);var C={map:c,animate:!1,updateHandler:function(){m._canvasUpdate()},resolutionScale};return v.canvasLayer=new Pe(C),v.clickEvent=v.clickEvent.bind(v),v.mousemoveEvent=v.mousemoveEvent.bind(v),v.bindEvent(),v}return y(a,[{key:"clickEvent",value:function(h){var d=h.pixel;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"clickEvent",this).call(this,d,h)}},{key:"mousemoveEvent",value:function(h){var d=h.pixel;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"mousemoveEvent",this).call(this,d,h)}},{key:"bindEvent",value:function(h){var d=this.map;this.options.methods&&(this.options.methods.click&&(d.setDefaultCursor("default"),d.addListener("click",this.clickEvent)),this.options.methods.mousemove&&d.addListener("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(h){var d=this.map;this.options.methods&&(this.options.methods.click&&d.removeListener("click",this.clickEvent),this.options.methods.mousemove&&d.removeListener("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(h){if(!!this.canvasLayer){var d=this,v=d.options.animation,m=this.getContext();if(d.isEnabledTime()){if(h===void 0){r(m);return}this.context=="2d"&&(m.save(),m.globalCompositeOperation="destination-out",m.fillStyle="rgba(0, 0, 0, .1)",m.fillRect(0,0,m.canvas.width,m.canvas.height),m.restore())}else r(m);if(this.context=="2d")for(var C in d.options)m[C]=d.options[C];else m.clear(m.COLOR_BUFFER_BIT);if(!(d.options.minZoom&&A.getZoom()<d.options.minZoom||d.options.maxZoom&&A.getZoom()>d.options.maxZoom)){var O=1;this.context!="2d"&&(O=this.canvasLayer.devicePixelRatio);var A=this.map,M=A.getProjection(),O=Math.pow(2,A.zoom)*resolutionScale,R=M.fromLatLngToPoint(this.canvasLayer.getTopLeft()),N={transferCoordinate:function(ee){var me=new google.maps.LatLng(ee[1],ee[0]),te=M.fromLatLngToPoint(me),ne={x:(te.x-R.x)*O,y:(te.y-R.y)*O};return[ne.x,ne.y]}};h!==void 0&&(N.filter=function(Z){var ee=v.trails||10;return!!(h&&Z.time>h-ee&&Z.time<h)});var k=d.dataSet.get(N);this.processData(k);var z=new google.maps.LatLng(0,0),U=M.fromLatLngToPoint(z),H={x:(U.x-R.x)*O,y:(U.y-R.y)*O};d.options.unit=="m"&&d.options.size?d.options._size=d.options.size/zoomUnit:d.options._size=d.options.size,this.drawContext(m,new x(k),d.options,H),d.options.updateCallback&&d.options.updateCallback(h)}}}},{key:"init",value:function(h){var d=this;d.options=h,this.initDataRange(h),this.context=d.options.context||"2d",d.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(d.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.addListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){self.canvasLayer.draw()}}]),a}(kt),sa=void 0;if(typeof maptalks<"u"){sa=function(f){_(a,f);function a(c,h,d){p(this,a);var v=E(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,d));return v.options_=d,v.dataSet=h,v._initBaseLayer(d),v}return y(a,[{key:"_initBaseLayer",value:function(h){var d=this,v=this.baseLayer=new kt(null,this.dataSet,h);d.init(h),v.argCheck(h)}},{key:"clickEvent",value:function(h){if(!!this.baseLayer){var d=h.containerPoint;this.baseLayer.clickEvent(d,h.domEvent)}}},{key:"mousemoveEvent",value:function(h){if(!!this.baseLayer){var d=h.containerPoint;this.baseLayer.mousemoveEvent(d,h.domEvent)}}},{key:"getEvents",value:function(){return{click:this.clickEvent,mousemove:this.mousemoveEvent}}},{key:"init",value:function(h){var d=this.baseLayer;d.options=h,d.initDataRange(h),d.context=d.options.context||"2d",d.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.addListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addListener("moveend",this.animatorMoveendEvent.bind(this))}}]),a}(maptalks.Layer);var rv=function(f){_(a,f);function a(){return p(this,a),E(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return y(a,[{key:"needToRedraw",value:function(){var h=this.layer.baseLayer;return h.isEnabledTime()?!0:w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"needToRedraw",this).call(this)}},{key:"draw",value:function(){var h=this.layer.baseLayer;(!this.canvas||!h.isEnabledTime()||this._shouldClear)&&(this.prepareCanvas(),this._shouldClear=!1),this._update(this.gl||this.context,this._mapvFrameTime),delete this._mapvFrameTime,this.completeRender()}},{key:"drawOnInteracting",value:function(){this.draw(),this._shouldClear=!1}},{key:"onSkipDrawOnInteracting",value:function(){this._shouldClear=!0}},{key:"_canvasUpdate",value:function(h){this.setToRedraw(),this._mapvFrameTime=h}},{key:"_update",value:function(h,d){if(!!this.canvas){var v=this.layer.baseLayer,m=v.options.animation,C=this.getMap();if(v.isEnabledTime()){if(d===void 0){r(h);return}v.context=="2d"&&(h.save(),h.globalCompositeOperation="destination-out",h.fillStyle="rgba(0, 0, 0, .1)",h.fillRect(0,0,h.canvas.width,h.canvas.height),h.restore())}else r(h);if(v.context=="2d")for(var A in v.options)h[A]=v.options[A];else h.clear(h.COLOR_BUFFER_BIT);var M=1,O=new maptalks.Coordinate(0,0),R={fromColumn:v.options.coordType==="bd09mc"?"coordinates_mercator":"coordinates",transferCoordinate:function(H){O.x=H[0],O.y=H[1];var Z=C.coordToContainerPoint(O)._multi(M).toArray();return Z}};d!==void 0&&(R.filter=function(U){var H=m.trails||10;return!!(d&&U.time>d-H&&U.time<d)});var N=v.dataSet.get(R);v.processData(N),v.options.unit=="m"?(v.options.size&&(v.options._size=v.options.size/zoomUnit),v.options.width&&(v.options._width=v.options.width/zoomUnit),v.options.height&&(v.options._height=v.options.height/zoomUnit)):(v.options._size=v.options.size,v.options._height=v.options.height,v.options._width=v.options.width);var k=new maptalks.Point(0,0),z=C._pointToContainerPoint(k)._multi(M);v.drawContext(h,N,v.options,z),v.options.updateCallback&&v.options.updateCallback(d)}}},{key:"createCanvas",value:function(){if(!this.canvas){var h=this.getMap(),d=h.getSize(),v=h.getDevicePixelRatio?h.getDevicePixelRatio():maptalks.Browser.retina?2:1,m=v*d.width,C=v*d.height;this.canvas=maptalks.Canvas.createCanvas(m,C,h.CanvasClass);var A=this.layer.baseLayer.context;if(A==="2d")this.context=this.canvas.getContext("2d"),this.layer.options.globalCompositeOperation&&(this.context.globalCompositeOperation=this.layer.options.globalCompositeOperation),this.layer.baseLayer.options.draw!=="heatmap"&&v!==1&&this.context.scale(v,v);else{var M={alpha:!0,preserveDrawingBuffer:!0,antialias:!1};this.gl=this.canvas.getContext("webgl",M)}this.onCanvasCreate(),this._bindToMapv(),this.layer.fire("canvascreate",{context:this.context,gl:this.gl})}}},{key:"_bindToMapv",value:function(){var h=this.layer.baseLayer,d=this.getMap();this.devicePixelRatio=d.getDevicePixelRatio?d.getDevicePixelRatio():maptalks.Browser.retina?2:1,h.canvasLayer=this,h._canvasUpdate=this._canvasUpdate.bind(this),h.getContext=function(){var v=self.getRenderer();return v.gl||v.context}}}]),a}(maptalks.renderer.CanvasRenderer);sa.registerRenderer("canvas",rv)}var sv=sa,ov=function(a,c,h){if(typeof document<"u"){var d=document.createElement("canvas");return d.width=a,d.height=c,d}else return new h(a,c)},av=function(f){_(a,f);function a(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,h=arguments[1],d=arguments[2];p(this,a);var v=E(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,h,d));return v.options=d,v.canvasLayer={canvas:null,devicePixelRatio:window.devicePixelRatio},v.layer_=null,v.initDataRange(d),v.initAnimator(),v.onEvents(),c.on("complete",function(){this.init(c,d),this.argCheck(d)},v),v}return y(a,[{key:"init",value:function(h,d){if(h)this.map=h,this.context=this.options.context||"2d",this.getCanvasLayer();else throw new Error("not map object")}},{key:"_canvasUpdate",value:function(h){this.render(this.canvasLayer.canvas,h)}},{key:"render",value:function(h,d){if(!!h){var v=this.map,m=h.getContext(this.context),C=this.options.animation;if(this.isEnabledTime()){if(d===void 0)return r(m),this;this.context==="2d"&&(m.save(),m.globalCompositeOperation="destination-out",m.fillStyle="rgba(0, 0, 0, .1)",m.fillRect(0,0,m.canvas.width,m.canvas.height),m.restore())}else r(m);if(this.context==="2d")for(var A in this.options)m[A]=this.options[A];else m.clear(m.COLOR_BUFFER_BIT);var M={transferCoordinate:function(N){var k=v.lngLatToContainer(new AMap.LngLat(N[0],N[1]));return[k.x,k.y]}};d!==void 0&&(M.filter=function(R){var N=C.trails||10;return!!(d&&R.time>d-N&&R.time<d)});var O=this.dataSet.get(M);return this.processData(O),this.options.unit==="m"?(this.options.size&&(this.options._size=this.options.size/zoomUnit),this.options.width&&(this.options._width=this.options.width/zoomUnit),this.options.height&&(this.options._height=this.options.height/zoomUnit)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width),this.drawContext(m,new x(O),this.options,{x:0,y:0}),this.options.updateCallback&&this.options.updateCallback(d),this}}},{key:"getCanvasLayer",value:function(){if(!this.canvasLayer.canvas&&!this.layer_){var h=this.canvasFunction(),d=this.map.getBounds();this.layer_=new AMap.CanvasLayer({canvas:h,bounds:this.options.bounds||d,zooms:this.options.zooms||[0,22]}),this.layer_.setMap(this.map),this.map.on("mapmove",this.canvasFunction,this),this.map.on("zoomchange",this.canvasFunction,this)}}},{key:"canvasFunction",value:function(){var h=[this.map.getSize().width,this.map.getSize().height],d=h[0],v=h[1];if(!this.canvasLayer.canvas)this.canvasLayer.canvas=ov(d,v);else{this.canvasLayer.canvas.width=d,this.canvasLayer.canvas.height=v;var m=this.map.getBounds();this.layer_&&this.layer_.setBounds(this.options.bounds||m)}return this.render(this.canvasLayer.canvas),this.canvasLayer.canvas}},{key:"removeLayer",value:function(){!this.map||(this.unEvents(),this.map.removeLayer(this.layer_),delete this.map,delete this.layer_,delete this.canvasLayer.canvas)}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"clickEvent",value:function(h){var d=h.pixel;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"clickEvent",this).call(this,d,h)}},{key:"mousemoveEvent",value:function(h){var d=h.pixel;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"mousemoveEvent",this).call(this,d,h)}},{key:"addAnimatorEvent",value:function(){this.map.on("movestart",this.animatorMovestartEvent,this),this.map.on("moveend",this.animatorMoveendEvent,this)}},{key:"onEvents",value:function(){var h=this.map;this.unEvents(),this.options.methods&&(this.options.methods.click&&h.on("click",this.clickEvent,this),this.options.methods.mousemove&&h.on("mousemove",this.mousemoveEvent,this))}},{key:"unEvents",value:function(){var h=this.map;this.options.methods&&(this.options.methods.click&&h.off("click",this.clickEvent,this),this.options.methods.mousemove&&h.off("mousemove",this.mousemoveEvent,this))}}]),a}(kt),lv=function(a,c){if(typeof document<"u"){var h=document.createElement("canvas");return h.width=a,h.height=c,h}},hv=function(f){_(a,f);function a(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,h=arguments[1],d=arguments[2];p(this,a);var v=E(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,h,d));return v.options=d,v.canvasLayer={canvas:null,devicePixelRatio:window.devicePixelRatio},v.layer_=null,v.previousCursor_=void 0,v.init(c,d),v.argCheck(d),v}return y(a,[{key:"init",value:function(h,d){if(h&&h instanceof ol.Map)this.$Map=h,this.context=this.options.context||"2d",this.getCanvasLayer(),this.initDataRange(d),this.initAnimator(),this.onEvents();else throw new Error("not map object")}},{key:"_canvasUpdate",value:function(h){this.render(this.canvasLayer.canvas,h)}},{key:"render",value:function(h,d){var v=this.$Map,m=h.getContext(this.context),C=this.options.animation,A=this.options.hasOwnProperty("projection")?this.options.projection:"EPSG:4326",M=this.$Map.getView().getProjection().getCode();if(this.isEnabledTime()){if(d===void 0)return r(m),this;this.context==="2d"&&(m.save(),m.globalCompositeOperation="destination-out",m.fillStyle="rgba(0, 0, 0, .1)",m.fillRect(0,0,m.canvas.width,m.canvas.height),m.restore())}else r(m);if(this.context==="2d")for(var O in this.options)m[O]=this.options[O];else m.clear(m.COLOR_BUFFER_BIT);var R={};R.transferCoordinate=A===M?function(k){return v.getPixelFromCoordinate(k)}:function(k){return v.getPixelFromCoordinate(ol.proj.transform(k,A,M))},d!==void 0&&(R.filter=function(k){var z=C.trails||10;return!!(d&&k.time>d-z&&k.time<d)});var N=this.dataSet.get(R);return this.processData(N),this.options.unit==="m"?(this.options.size&&(this.options._size=this.options.size/zoomUnit),this.options.width&&(this.options._width=this.options.width/zoomUnit),this.options.height&&(this.options._height=this.options.height/zoomUnit)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width),this.drawContext(m,new x(N),this.options,{x:0,y:0}),this.options.updateCallback&&this.options.updateCallback(d),this}},{key:"getCanvasLayer",value:function(){if(!this.canvasLayer.canvas&&!this.layer_){var h=this.getMapExtent();this.layer_=new ol.layer.Image({layerName:this.options.layerName,minResolution:this.options.minResolution,maxResolution:this.options.maxResolution,zIndex:this.options.zIndex,extent:h,source:new ol.source.ImageCanvas({canvasFunction:this.canvasFunction.bind(this),projection:this.$Map.getView().getProjection().getCode(),ratio:this.options.hasOwnProperty("ratio")?this.options.ratio:1})}),this.$Map.addLayer(this.layer_),this.$Map.un("precompose",this.reRender,this),this.$Map.on("precompose",this.reRender,this)}}},{key:"reRender",value:function(){if(!!this.layer_){var h=this.getMapExtent();this.layer_.setExtent(h)}}},{key:"canvasFunction",value:function(h,d,v,m,C){return this.canvasLayer.canvas?(this.canvasLayer.canvas.width=m[0],this.canvasLayer.canvas.height=m[1]):this.canvasLayer.canvas=lv(m[0],m[1]),this.render(this.canvasLayer.canvas),this.canvasLayer.canvas}},{key:"getMapExtent",value:function(){var h=this.$Map.getSize();return this.$Map.getView().calculateExtent(h)}},{key:"addTo",value:function(h){this.init(h,this.options)}},{key:"removeLayer",value:function(){!this.$Map||(this.unEvents(),this.$Map.un("precompose",this.reRender,this),this.$Map.removeLayer(this.layer_),delete this.$Map,delete this.layer_,delete this.canvasLayer.canvas)}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"clickEvent",value:function(h){var d=h.pixel;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"clickEvent",this).call(this,{x:d[0],y:d[1]},h)}},{key:"mousemoveEvent",value:function(h){var d=h.pixel;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"mousemoveEvent",this).call(this,{x:d[0],y:d[1]},h)}},{key:"addAnimatorEvent",value:function(){this.$Map.on("movestart",this.animatorMovestartEvent,this),this.$Map.on("moveend",this.animatorMoveendEvent,this)}},{key:"onEvents",value:function(){var h=this.$Map;this.unEvents(),this.options.methods&&(this.options.methods.click&&h.on("click",this.clickEvent,this),this.options.methods.mousemove&&h.on("pointermove",this.mousemoveEvent,this))}},{key:"unEvents",value:function(){var h=this.$Map;this.options.methods&&(this.options.methods.click&&h.un("click",this.clickEvent,this),this.options.methods.pointermove&&h.un("pointermove",this.mousemoveEvent,this))}},{key:"setDefaultCursor",value:function(h,d){if(!!this.$Map){var v=this.$Map.getTargetElement();d?v.style.cursor!==h&&(this.previousCursor_=v.style.cursor,v.style.cursor=h):this.previousCursor_!==void 0&&(v.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}}},{key:"show",value:function(){this.$Map.addLayer(this.layer_)}},{key:"hide",value:function(){this.$Map.removeLayer(this.layer_)}}]),a}(kt),uv=function(f){_(a,f);function a(c,h,d,v){p(this,a);var m=E(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,d,v));if(!kt)return E(m);var C=m;return v=v||{},C.init(v),C.argCheck(v),m.canvasLayer=h,m.clickEvent=m.clickEvent.bind(m),m.mousemoveEvent=m.mousemoveEvent.bind(m),m._moveStartEvent=m.moveStartEvent.bind(m),m._moveEndEvent=m.moveEndEvent.bind(m),m._zoomStartEvent=m.zoomStartEvent.bind(m),m.bindEvent(),m}return y(a,[{key:"clickEvent",value:function(h){var d=this.map.containerPointToLayerPoint([0,0]),v=this.devicePixelRatio=this.canvasLayer.devicePixelRatio=window.devicePixelRatio,m=h.layerPoint;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"clickEvent",this).call(this,L.point((m.x-d.x)/v,(m.y-d.y)/v),h)}},{key:"mousemoveEvent",value:function(h){var d=h.layerPoint;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"mousemoveEvent",this).call(this,d,h)}},{key:"bindEvent",value:function(){var h=this.map;this.options.methods&&(this.options.methods.click&&h.on("click",this.clickEvent),this.options.methods.mousemove&&h.on("mousemove",this.mousemoveEvent)),this.map.on("movestart",this._moveStartEvent),this.map.on("moveend",this._moveEndEvent),this.map.on("zoomstart",this._zoomStartEvent)}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}},{key:"unbindEvent",value:function(){var h=this.map;this.options.methods&&(this.options.methods.click&&h.off("click",this.clickEvent),this.options.methods.mousemove&&h.off("mousemove",this.mousemoveEvent)),this.map.off("movestart",this._moveStartEvent),this.map.off("moveend",this._moveEndEvent),this.map.off("zoomstart",this._zoomStartEvent)}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"addData",value:function(h,d){var v=h;h&&h.get&&(v=h.get()),this.dataSet.add(v),this.update({options:d})}},{key:"update",value:function(h){var d=h||{},v=d.data;v&&v.get&&(v=v.get()),v!=null&&this.dataSet.set(v),w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"update",this).call(this,{options:d.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(h){if(!!this.dataSet){var d=this.dataSet.get({filter:function(m){return h!=null&&typeof h=="function"?!h(m):!0}});this.dataSet.set(d),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"_canvasUpdate",value:function(h){if(!!this.canvasLayer){var d=this,v=d.options.animation,m=this.getContext(),C=this.map;if(d.isEnabledTime()){if(h===void 0){this.clear(m);return}this.context==="2d"&&(m.save(),m.globalCompositeOperation="destination-out",m.fillStyle="rgba(0, 0, 0, .1)",m.fillRect(0,0,m.canvas.width,m.canvas.height),m.restore())}else this.clear(m);if(this.context==="2d")for(var A in d.options)m[A]=d.options[A];else m.clear(m.COLOR_BUFFER_BIT);if(!(d.options.minZoom&&C.getZoom()<d.options.minZoom||d.options.maxZoom&&C.getZoom()>d.options.maxZoom)){var M=C.getBounds(),O=M.getEast()-M.getWest(),R=M.getNorth()-M.getSouth(),N=C.getSize(),k=O/N.x,z=R/N.y,U=this.canvasLayer.getTopLeft(),H=C.latLngToContainerPoint(U),Z={transferCoordinate:function(Ie){var Fe;d.context==="2d"?Fe=C.latLngToContainerPoint(L.latLng(Ie[1],Ie[0])):Fe={x:(Ie[0]-U.lng)/k,y:(U.lat-Ie[1])/z};var Se={x:Fe.x-H.x,y:Fe.y-H.y};return[Se.x,Se.y]}};h!==void 0&&(Z.filter=function(ne){var Ie=v.trails||10;return h&&ne.time>h-Ie&&ne.time<h});var ee=d.dataSet.get(Z);this.processData(ee),d.options._size=d.options.size;var me=C.latLngToContainerPoint(L.latLng(0,0)),te={x:me.x-H.x,y:me.y-H.y};this.drawContext(m,ee,d.options,te),d.options.updateCallback&&d.options.updateCallback(h)}}}},{key:"init",value:function(h){var d=this;d.options=h,this.initDataRange(h),this.context=d.options.context||"2d",d.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(d.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){}},{key:"moveStartEvent",value:function(){var h=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=h.stepsRange.start,this._hide())}},{key:"moveEndEvent",value:function(){this.canvasLayer.draw(),this._show()}},{key:"zoomStartEvent",value:function(){this._hide()}},{key:"clear",value:function(h){h&&h.clearRect&&h.clearRect(0,0,h.canvas.width,h.canvas.height)}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}},{key:"draw",value:function(){this.canvasLayer.draw()}}]),a}(kt),jh;if(typeof L<"u"){var cv=L.Layer.extend({options:{attributionPrefix:null,attribution:""},initialize:function(a,c,h){h=h||{},this.dataSet=a||{},this.mapVOptions=c||{},this.render=this.render.bind(this),L.Util.setOptions(this,h),this.options.attributionPrefix&&(this.options.attribution=this.options.attributionPrefix+this.options.attribution),this.canvas=this._createCanvas(),L.stamp(this)},onAdd:function(a){this._map=a;var c=this.getPane(),h=this.container=L.DomUtil.create("div","leaflet-layer leaflet-zoom-animated",c);h.appendChild(this.canvas);var d=a.getSize();h.style.width=d.x+"px",h.style.height=d.y+"px",this.renderer=new uv(a,this,this.dataSet,this.mapVOptions),this.draw(),this.fire("loaded")},onRemove:function(){L.DomUtil.remove(this.container),this.renderer.destroy()},addData:function(a,c){this.renderer.addData(a,c)},update:function(a){this.renderer.update(a)},getData:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet},removeData:function(a){this.renderer&&this.renderer.removeData(a)},clearData:function(){this.renderer.clearData()},draw:function(){return this._reset()},setZIndex:function(a){this.canvas.style.zIndex=a},render:function(){this.renderer._canvasUpdate()},getCanvas:function(){return this.canvas},getContainer:function(){return this.container},getTopLeft:function(){var a=this._map,c;if(a){var h=a.getBounds();c=h.getNorthWest()}return c},_createCanvas:function(){var a=document.createElement("canvas");a.style.position="absolute",a.style.top=0+"px",a.style.left=0+"px",a.style.pointerEvents="none",a.style.zIndex=this.options.zIndex||600;var c=typeof window>"u"?{}:window,h=this.devicePixelRatio=c.devicePixelRatio;return(!this.mapVOptions.context||this.mapVOptions.context==="2d")&&a.getContext("2d").scale(h,h),a},_resize:function(){var a=this.canvas;if(!!a){var c=this._map,h=c.getSize();a.width=h.x,a.height=h.y,a.style.width=h.x+"px",a.style.height=h.y+"px";var d=c.getBounds(),v=c.latLngToLayerPoint(d.getNorthWest());L.DomUtil.setPosition(a,v)}},_reset:function(){this._resize(),this._render()},redraw:function(){this._resize(),this._render()},_render:function(){this.render()}});jh=function(a,c,h){return new cv(a,c,h)}}var dv=jh,fv=function(f){_(a,f);function a(c,h,d,v){p(this,a);var m=E(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c,h,d));return kt?(m.map=c,m.scene=c.scene,m.dataSet=h,d=d||{},m.init(d),m.argCheck(d),m.initDevicePixelRatio(),m.canvasLayer=v,m.stopAniamation=!1,m.animation=d.animation,m.clickEvent=m.clickEvent.bind(m),m.mousemoveEvent=m.mousemoveEvent.bind(m),m.bindEvent(),m):E(m)}return y(a,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"clickEvent",value:function(h){var d=h.point;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"clickEvent",this).call(this,d,h)}},{key:"mousemoveEvent",value:function(h){var d=h.point;w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"mousemoveEvent",this).call(this,d,h)}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var h=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=h.stepsRange.start)}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator}},{key:"bindEvent",value:function(){this.map,this.options.methods&&(this.options.methods.click,this.options.methods.mousemove)}},{key:"unbindEvent",value:function(){var h=this.map;this.options.methods&&(this.options.methods.click&&h.off("click",this.clickEvent),this.options.methods.mousemove&&h.off("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"init",value:function(h){this.options=h,this.initDataRange(h),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"_canvasUpdate",value:function(h){this.map;var d=this.scene;if(this.canvasLayer&&!this.stopAniamation){var v=this.options.animation,m=this.getContext();if(this.isEnabledTime()){if(h===void 0)return void this.clear(m);this.context==="2d"&&(m.save(),m.globalCompositeOperation="destination-out",m.fillStyle="rgba(0, 0, 0, .1)",m.fillRect(0,0,m.canvas.width,m.canvas.height),m.restore())}else this.clear(m);if(this.context==="2d")for(var C in this.options)m[C]=this.options[C];else m.clear(m.COLOR_BUFFER_BIT);var A={transferCoordinate:function(N){var k=Cesium.Cartesian3.fromDegrees(N[0],N[1]),z=Cesium.SceneTransforms.wgs84ToWindowCoordinates(d,k);return z==null?[-1,-1]:[z.x,z.y]}};h!==void 0&&(A.filter=function(R){var N=v.trails||10;return!!(h&&R.time>h-N&&R.time<h)});var M=this.dataSet.get(A);this.processData(M),this.options.unit=="m"&&this.options.size,this.options._size=this.options.size;var O=Cesium.SceneTransforms.wgs84ToWindowCoordinates(d,Cesium.Cartesian3.fromDegrees(0,0));this.drawContext(m,new x(M),this.options,O),this.options.updateCallback&&this.options.updateCallback(h)}}},{key:"updateData",value:function(h,d){var v=h;v&&v.get&&(v=v.get()),v!=null&&this.dataSet.set(v),w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"update",this).call(this,{options:d})}},{key:"addData",value:function(h,d){var v=h;h&&h.get&&(v=h.get()),this.dataSet.add(v),this.update({options:d})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(h){if(this.dataSet){var d=this.dataSet.get({filter:function(m){return h==null||typeof h!="function"||!h(m)}});this.dataSet.set(d),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"clear",value:function(h){h&&h.clearRect&&h.clearRect(0,0,h.canvas.width,h.canvas.height)}}]),a}(kt),Zh;if(typeof Cesium<"u"){var gv=0;Cesium;var pv=function(){function f(a,c,h,d){if(p(this,f),this.map=a,this.scene=a.scene,this.mapvBaseLayer=new fv(a,c,h,this),this.mapVOptions=h,this.initDevicePixelRatio(),this.canvas=this._createCanvas(),this.render=this.render.bind(this),d)this.container=d;else{var v=a.container.querySelector(".cesium-viewer-cesiumWidgetContainer");this.container=v||a.container}this.addInnerContainer(),this.bindEvent(),this._reset()}return y(f,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"addInnerContainer",value:function(){this.container.appendChild(this.canvas)}},{key:"bindEvent",value:function(){var c=this;this.innerMoveStart=this.moveStartEvent.bind(this),this.innerMoveEnd=this.moveEndEvent.bind(this),this.scene.camera.moveStart.addEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.addEventListener(this.innerMoveEnd,this);var h=new Cesium.ScreenSpaceEventHandler(this.scene.canvas);h.setInputAction(function(d){c.innerMoveEnd()},Cesium.ScreenSpaceEventType.LEFT_UP),h.setInputAction(function(d){c.innerMoveEnd()},Cesium.ScreenSpaceEventType.MIDDLE_UP),this.handler=h}},{key:"unbindEvent",value:function(){this.scene.camera.moveStart.removeEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.removeEventListener(this.innerMoveEnd,this),this.scene.postRender.removeEventListener(this._reset,this),this.handler&&(this.handler.destroy(),this.handler=null)}},{key:"moveStartEvent",value:function(){this.mapvBaseLayer&&(this.mapvBaseLayer.animatorMovestartEvent(),this.scene.postRender.addEventListener(this._reset,this))}},{key:"moveEndEvent",value:function(){this.mapvBaseLayer&&(this.scene.postRender.removeEventListener(this._reset,this),this.mapvBaseLayer.animatorMoveendEvent(),this._reset())}},{key:"zoomStartEvent",value:function(){this._unvisiable()}},{key:"zoomEndEvent",value:function(){this._unvisiable()}},{key:"addData",value:function(c,h){this.mapvBaseLayer!=null&&this.mapvBaseLayer.addData(c,h)}},{key:"updateData",value:function(c,h){this.mapvBaseLayer!=null&&this.mapvBaseLayer.updateData(c,h)}},{key:"getData",value:function(){return this.mapvBaseLayer&&(this.dataSet=this.mapvBaseLayer.getData()),this.dataSet}},{key:"removeData",value:function(c){this.mapvBaseLayer!=null&&this.mapvBaseLayer&&this.mapvBaseLayer.removeData(c)}},{key:"removeAllData",value:function(){this.mapvBaseLayer!=null&&this.mapvBaseLayer.clearData()}},{key:"_visiable",value:function(){return this.canvas.style.display="block",this}},{key:"_unvisiable",value:function(){return this.canvas.style.display="none",this}},{key:"_createCanvas",value:function(){var c=document.createElement("canvas");c.id=this.mapVOptions.layerid||"mapv"+gv++,c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.pointerEvents="none",c.style.zIndex=this.mapVOptions.zIndex||0,c.width=parseInt(this.map.canvas.width),c.height=parseInt(this.map.canvas.height),c.style.width=this.map.canvas.style.width,c.style.height=this.map.canvas.style.height;var h=this.devicePixelRatio;return this.mapVOptions.context=="2d"&&c.getContext(this.mapVOptions.context).scale(h,h),c}},{key:"_reset",value:function(){this.resizeCanvas(),this.fixPosition(),this.onResize(),this.render()}},{key:"draw",value:function(){this._reset()}},{key:"show",value:function(){this._visiable()}},{key:"hide",value:function(){this._unvisiable()}},{key:"destroy",value:function(){this.remove()}},{key:"remove",value:function(){this.mapvBaseLayer!=null&&(this.removeAllData(),this.mapvBaseLayer.clear(this.mapvBaseLayer.getContext()),this.mapvBaseLayer=void 0,this.canvas.parentElement.removeChild(this.canvas))}},{key:"update",value:function(c){c!=null&&this.updateData(c.data,c.options)}},{key:"resizeCanvas",value:function(){if(this.canvas!=null&&this.canvas!=null){var c=this.canvas;c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.width=parseInt(this.map.canvas.width),c.height=parseInt(this.map.canvas.height),c.style.width=this.map.canvas.style.width,c.style.height=this.map.canvas.style.height}}},{key:"fixPosition",value:function(){}},{key:"onResize",value:function(){}},{key:"render",value:function(){this.mapvBaseLayer!=null&&this.mapvBaseLayer._canvasUpdate()}}]),f}();Zh=function(a,c,h,d){return new pv(a,c,h,d)}}var vv=Zh,mv={getDataSet:function(a){var c=[],h=a.features;if(h)for(var d=0;d<h.length;d++){var v=h[d],m=v.geometry,C=v.properties,A={};for(var M in C)A[M]=C[M];A.geometry=m,c.push(A)}return new x(c)}},yv={CSVToArray:function(a,c){c=c||",";for(var h=new RegExp("(\\"+c+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+c+"\\r\\n]*))","gi"),d=[[]],v=null;v=h.exec(a);){var m=v[1];m.length&&m!==c&&d.push([]);var C;v[2]?C=v[2].replace(new RegExp('""',"g"),'"'):C=v[3],d[d.length-1].push(C)}return d},getDataSet:function(a,c){for(var h=this.CSVToArray(a,c||","),d=[],v=h[0],m=1;m<h.length-1;m++){for(var C=h[m],A={},M=0;M<C.length;M++){var O=C[M];v[M]=="geometry"&&(O=JSON.parse(O)),A[v[M]]=O}d.push(A)}return new x(d)}};t.version=i,t.canvasClear=r,t.canvasResolutionScale=s,t.canvasDrawSimple=F,t.canvasDrawHeatmap=re,t.canvasDrawGrid=le,t.canvasDrawHoneycomb=ye,t.webglDrawSimple=or,t.webglDrawPoint=$n,t.webglDrawLine=et,t.webglDrawPolygon=vi,t.utilCityCenter=g,t.utilCurve=mi,t.utilForceEdgeBundling=ht,t.utilDataRangeIntensity=X,t.utilDataRangeCategory=it,t.utilDataRangeChoropleth=ze,t.Map=Sn,t.baiduMapCanvasLayer=Ze,t.baiduMapAnimationLayer=tv,t.baiduMapLayer=iv,t.googleMapCanvasLayer=Pe,t.googleMapLayer=nv,t.MaptalksLayer=sv,t.AMapLayer=av,t.OpenlayersLayer=hv,t.leafletMapLayer=dv,t.cesiumMapLayer=vv,t.DataSet=x,t.geojson=mv,t.csv=yv,Object.defineProperty(t,"__esModule",{value:!0})})})(an,an.exports);const hh={ACTIVE:"active"};class wg extends wi{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(hh.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(hh.ACTIVE,e)}setMap(e){this.map_=e}}const _g=wg,as={SINGLECLICK:"singleclick",CLICK:We.CLICK,DBLCLICK:We.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class xg extends _g{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==as.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==as.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==as.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==as.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}const Sg=xg;var Eg=an.exports.baiduMapLayer?an.exports.baiduMapLayer.__proto__:Function;class Cg extends Eg{constructor(e,t,i,r,s,o){super(e,t,i),this.dataSet=t,this.mapWidth=r,this.mapHeight=s;var l=this;i=i||{},this.source=o,l.animator=null,l.map=e,l.init(i),l.argCheck(i),this.canvasLayer=new yg({map:e,context:this.context,paneName:i.paneName,mixBlendMode:i.mixBlendMode,enableMassClear:i.enableMassClear,zIndex:i.zIndex,width:r,height:s,update:function(){l._canvasUpdate()}}),this.clickEvent=this.clickEvent.bind(this),this.mousemoveEvent=this.mousemoveEvent.bind(this),e.on("movestart",this.moveStartEvent.bind(this)),e.on("moveend",this.moveEndEvent.bind(this)),e.getView().on("change:center",this.zoomEvent.bind(this)),e.getView().on("change:size",this.sizeEvent.bind(this)),e.on("pointerdrag",this.dragEvent.bind(this)),this.bindEvent()}init(e){var t=this;t.options=e,this.initDataRange(e),this.context=t.options.context||"2d",t.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(t.options.zIndex),this.initAnimator()}clickEvent(e){var t=e.pixel;super.clickEvent({x:t[0]+this.offset[0],y:t[1]+this.offset[1]},e)}mousemoveEvent(e){var t=e.pixel;super.mousemoveEvent({x:t[0],y:t[1]},e)}dragEvent(){this.clear(this.getContext())}zoomEvent(){this.clear(this.getContext())}sizeEvent(){this.canvasLayer.resize()}moveStartEvent(){var e=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=e.stepsRange.start)}moveEndEvent(){this.canvasLayer.draw()}bindEvent(){var e=this,t=e.map;e.options.methods&&(e.options.methods.click&&t.on("click",e.clickEvent),e.options.methods.mousemove&&(e.pointerInteraction=new Sg,e.pointerInteraction.handleMoveEvent_=function(i){e.mousemoveEvent(i)},t.addInteraction(e.pointerInteraction)))}unbindEvent(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.un("click",this.clickEvent),this.options.methods.mousemove&&e.removeInteraction(this.pointerInteraction))}addData(e,t){var i=e;e&&e.get&&(i=e.get()),this.dataSet.add(i),this.update({options:t})}update(e){var t=e||{},i=t.data;i&&i.get&&(i=i.get()),i!=null&&this.dataSet.set(i),super.update({options:t.options})}draw(){this.canvasLayer.draw()}getData(){return this.dataSet}removeData(e){if(!!this.dataSet){var t=this.dataSet.get({filter:function(i){return e!=null&&typeof e=="function"?!e(i):!0}});this.dataSet.set(t),this.update({options:null})}}clearData(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}_canvasUpdate(e){if(!this.canvasLayer)return;var t=this,i=t.options.animation,r=t.map,s=t.canvasLayer.canvas.getContext(t.context);if(t.isEnabledTime()){if(e===void 0){t.clear(s);return}(!t.context||t.context==="2d")&&(s.save(),s.globalCompositeOperation="destination-out",s.fillStyle="rgba(0, 0, 0, .1)",s.fillRect(0,0,s.canvas.width,s.canvas.height),s.restore())}else this.clear(s);if(!t.context||t.context==="2d")for(var o in t.options)s[o]=t.options[o];else s.clear(s.COLOR_BUFFER_BIT);var l=r.getView().calculateExtent(),u=r.getPixelFromCoordinate([l[0],l[3]]);t._mapCenter=r.getView().getCenter(),t._mapCenterPx=r.getPixelFromCoordinate(t._mapCenter),t._reselutions=r.getView().getResolution(),t._rotation=-r.getView().getRotation();var g=t._reselutions,p=1;if(this.context!="2d"){var y=typeof window>"u"?{}:window,w=y.devicePixelRatio||1;p=w}var _={transferCoordinate:function(T){var S=(T[0]-t._mapCenter[0])/t._reselutions,b=(t._mapCenter[1]-T[1])/t._reselutions,F=[S+t._mapCenterPx[0],b+t._mapCenterPx[1]];return F=E(F,t._mapCenterPx,1),[(F[0]+t.offset[0])*p,(F[1]+t.offset[1])*p]}};function E(T,S,b){var F=(T[0]-S[0])*b+S[0],B=(T[1]-S[1])*b+S[1];return[F,B]}e!==void 0&&(_.filter=function(T){var S=i.trails||10;return e&&T.time>e-S&&T.time<e}),t.isEnabledTime()&&!t.notFirst&&(t.canvasLayer.resize(t.mapWidth,t.mapHeight),t.notFirst=!0);var I=t.dataSet.get(_);t.processData(I),t.options.unit==="m"?(t.options.size&&(t.options._size=t.options.size/g),t.options.width&&(t.options._width=t.options.width/g),t.options.height&&(t.options._height=t.options.height/g)):(t.options._size=t.options.size,t.options._height=t.options.height,t.options._width=t.options.width);var x=r.getPixelFromCoordinate([0,0]);x=[x[0]-u[0],x[1]-u[1]],this.drawContext(s,I,t.options,{x:x[0],y:x[1]}),t.isEnabledTime()&&this.source.changed(),t.options.updateCallback&&t.options.updateCallback(e)}isEnabledTime(){var e=this.options.animation;return e&&e.enabled!==!1}argCheck(e){e.draw==="heatmap"&&e.strokeStyle&&console.warn("[heatmap] options.strokeStyle is discard, pleause use options.strength [eg: options.strength = 0.1]")}getContext(){return this.canvasLayer.canvas.getContext(this.context)}clear(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}}class Ig extends pl{constructor(e,t,i,r,s){const o=s!==void 0?ve.IDLE:ve.LOADED;super(e,t,i,o),this.loader_=s!==void 0?s:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=ve.ERROR):this.state=ve.LOADED,this.changed()}load(){this.state==ve.IDLE&&(this.state=ve.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const bg=Ig;class Tg extends pl{constructor(e,t,i,r,s,o,l){const u=e.getExtent(),g=t.getExtent(),p=g?Ir(i,g):i,y=Xi(p),w=yo(e,t,y,r),_=Fl,E=new kl(e,t,p,u,w*_,r),I=E.calculateSourceExtent(),x=o(I,w,s),T=x?ve.IDLE:ve.EMPTY,S=x?x.getPixelRatio():1;super(i,r,S,T),this.targetProj_=t,this.maxSourceExtent_=u,this.triangulation_=E,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=x,this.sourcePixelRatio_=S,this.interpolate_=l,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ve.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ve.LOADED){const t=Oe(this.targetExtent_)/this.targetResolution_,i=ri(this.targetExtent_)/this.targetResolution_;this.canvas_=Gl(t,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=e,this.changed()}load(){if(this.state==ve.IDLE){this.state=ve.LOADING,this.changed();const e=this.sourceImage_.getState();e==ve.LOADED||e==ve.ERROR?this.reproject_():(this.sourceListenerKey_=yt(this.sourceImage_,We.CHANGE,function(t){const i=this.sourceImage_.getState();(i==ve.LOADED||i==ve.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){gt(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Pg=Tg,Do={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class Ag extends yi{constructor(e,t){super(e),this.image=t}}class Lg extends eo{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}findNearestResolution(e){if(this.resolutions_){const t=ma(this.resolutions_,e,0);e=this.resolutions_[t]}return e}getImage(e,t,i,r){const s=this.getProjection();if(!s||!r||Vt(s,r))return s&&(r=s),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Vt(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&Ws(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Pg(s,r,e,t,i,function(o,l,u){return this.getImageInternal(o,l,u,s)}.bind(this),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){return se()}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case ve.LOADING:this.loading=!0,i=Do.IMAGELOADSTART;break;case ve.LOADED:this.loading=!1,i=Do.IMAGELOADEND;break;case ve.ERROR:this.loading=!1,i=Do.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new Ag(i,t))}}const Mg=Lg;class Rg extends Mg{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5}getImageInternal(e,t,i,r){t=this.findNearestResolution(t);let s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==t&&s.getPixelRatio()==i&&xi(s.getExtent(),e))return s;e=e.slice(),Nu(e,this.ratio_);const o=Oe(e)/t,l=ri(e)/t,u=[o*i,l*i],g=this.canvasFunction_.call(this,e,t,i,u,r);return g&&(s=new bg(e,t,i,g)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s}}const Fg=Rg;class uh extends Fg{constructor(e){var t=e||{};super({attributions:t.attributions||"\xA9 2018 \u767E\u5EA6 MapV with <span>\xA9 <a href='https://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>",canvasFunction:i,logo:wt.getOlVersion()==="4"?t.logo:null,projection:t.projection,ratio:t.ratio,resolutions:t.resolutions,state:t.state}),this.map=e.map,this.dataSet=e.dataSet,this.mapvOptions=e.mapvOptions;function i(r,s,o,l,u){var g=l[0]/o,p=l[1]/o,y=this.map.getSize()[0],w=this.map.getSize()[1];this.layer||(this.layer=new Cg(this.map,this.dataSet,this.mapvOptions,g,p,this)),this.layer.pixelRatio=o,this.layer.offset=[(g-y)/2,(p-w)/2],this.rotate?this.rotate!==this.map.getView().getRotation()&&(this.layer.canvasLayer.resize(g,p),this.rotate=this.map.getView().getRotation()):this.rotate=this.map.getView().getRotation();var _=this.layer.canvasLayer.canvas;this.layer.isEnabledTime()||(this.layer.canvasLayer.resize(g,p),this.layer.canvasLayer.draw()),this.context||(this.context=wt.createCanvasContext2D(g,p));var E=this.context.canvas;return this.context.clearRect(0,0,E.width,E.height),E.width=l[0],E.height=l[1],E.style.width=l[0]+"px",E.style.height=l[1]+"px",this.context.drawImage(_,0,0),(this.resolution!==s||JSON.stringify(this.extent)!==JSON.stringify(r))&&(this.resolution=s,this.extent=r),this.context.canvas}}addData(e,t){this.layer.addData(e,t)}getData(){return this.layer&&(this.dataSet=this.layer.getData()),this.dataSet}removeData(e){this.layer&&this.layer.removeData(e)}clearData(){this.layer.clearData()}update(e){this.layer.update(e),this.changed()}}class ln extends jn{constructor(e,t){super(e,t),t=t||{},this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.hasGeometry=!0,this.maxFeatures=null,this.format=Ms.GEOJSON,W.extend(this,t),this.url=W.urlPathAppend(this.url,"featureResults"),this.CLASS_NAME="SuperMap.GetFeaturesServiceBase"}destroy(){super.destroy();var e=this;e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.format=null,e.hasGeometry=null}processAsync(e){if(!!e){var t=this,i=null,r=!0;t.returnContent=e.returnContent,t.fromIndex=e.fromIndex,t.toIndex=e.toIndex,t.maxFeatures=e.maxFeatures,t.hasGeometry=e.hasGeometry,t.returnContent&&(t.url=W.urlAppend(t.url,"returnContent="+t.returnContent),r=!1);var s=t.fromIndex!=null&&t.toIndex!=null&&!isNaN(t.fromIndex)&&!isNaN(t.toIndex);s&&t.fromIndex>=0&&t.toIndex>=0&&!r&&(t.url=W.urlAppend(t.url,`fromIndex=${t.fromIndex}&toIndex=${t.toIndex}`)),e.returnCountOnly&&(t.url=W.urlAppend(t.url,"&returnCountOnly="+e.returnContent)),i=t.getJsonParameters(e),t.request({method:"POST",data:i,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}serviceProcessCompleted(e){var t=this;if(e=W.transformResult(e),t.format===Ms.GEOJSON&&e.features){var i=new mr;e.features=i.toGeoJSON(e.features)}t.events.triggerEvent("processCompleted",{result:e})}}class Zn{constructor(e){this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.FilterParameter"}destroy(){var e=this;if(e.attributeFilter=null,e.name=null,e.joinItems){for(let t=0,i=e.joinItems,r=i.length;t<r;t++)i[t].destroy();e.joinItems=null}if(e.linkItems){for(let t=0,i=e.linkItems,r=i.length;t<r;t++)i[t].destroy();e.linkItems=null}e.ids=null,e.orderBy=null,e.groupBy=null,e.fields=null}}class hn{constructor(e){this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.hasGeometry=!0,this.aggregations=null,W.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}destroy(){var e=this;e.datasetNames=null,e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.hasGeometry=null,e.maxFeatures=null,e.targetEpsgCode=null,e.targetPrj=null,e.aggregation&&(e.aggregation=null)}}class ch extends hn{constructor(e){super(e),this.getFeatureMode="ID",this.IDs=null,this.fields=null,W.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters"}destroy(){super.destroy();var e=this;if(e.IDs=null,e.getFeatureMode=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}}static toJsonParameters(e){var t,i;return t={datasetNames:e.datasetNames,getFeatureMode:"ID",ids:e.IDs},e.fields&&(i=new Zn,i.name=e.datasetNames,i.fields=e.fields,t.queryParameter=i),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),typeof e.hasGeometry=="boolean"&&(t.hasGeometry=e.hasGeometry),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),e.aggregations&&(t.aggregations=e.aggregations),W.toJSON(t)}}class dh extends ln{constructor(e,t){super(e,t),this.CLASS_NAME="SuperMap.GetFeaturesByIDsService"}destroy(){super.destroy()}getJsonParameters(e){return ch.toJsonParameters(e)}}class fh extends hn{constructor(e){super(e),this.getFeatureMode="SQL",this.queryParameter=null,W.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters"}destroy(){super.destroy();var e=this;e.getFeatureMode=null,e.queryParameter&&(e.queryParameter.destroy(),e.queryParameter=null)}static toJsonParameters(e){var t={datasetNames:e.datasetNames,getFeatureMode:"SQL",queryParameter:e.queryParameter};return e.maxFeatures&&!isNaN(e.maxFeatures)&&(t.maxFeatures=e.maxFeatures),typeof e.hasGeometry=="boolean"&&(t.hasGeometry=e.hasGeometry),e.aggregations&&(t.aggregations=e.aggregations),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),e.aggregations&&(t.aggregations=e.aggregations),W.toJSON(t)}}class gh extends ln{constructor(e,t){super(e,t),this.CLASS_NAME="SuperMap.GetFeaturesBySQLService"}destroy(){super.destroy()}getJsonParameters(e){return fh.toJsonParameters(e)}}class Li extends hn{constructor(e){super(e),this.getFeatureMode=Li.getFeatureMode.BOUNDS,this.bounds=null,this.fields=null,this.attributeFilter=null,this.spatialQueryMode=ca.CONTAIN,W.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters"}destroy(){super.destroy();var e=this;if(e.bounds&&(e.bounds.destroy(),e.bounds=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}static toJsonParameters(e){var t,i,r;return i={leftBottom:{x:e.bounds.left,y:e.bounds.bottom},rightTop:{x:e.bounds.right,y:e.bounds.top}},r={datasetNames:e.datasetNames,getFeatureMode:Li.getFeatureMode.BOUNDS,bounds:i,spatialQueryMode:e.spatialQueryMode},e.fields&&(t=new Zn,t.name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode=Li.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),typeof e.hasGeometry=="boolean"&&(r.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),e.aggregations&&(r.aggregations=e.aggregations),W.toJSON(r)}}Li.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"};class ph extends ln{constructor(e,t){super(e,t),this.CLASS_NAME="SuperMap.GetFeaturesByBoundsService"}destroy(){super.destroy()}getJsonParameters(e){return Li.toJsonParameters(e)}}class No extends hn{constructor(e){super(e),this.bufferDistance=null,this.attributeFilter=null,this.geometry=null,this.fields=null,W.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters"}destroy(){super.destroy();var e=this;if(e.bufferDistance=null,e.attributeFilter=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.geometry&&(e.geometry.destroy(),e.geometry=null)}static toJsonParameters(e){var t,i,r;return r=ft.fromGeometry(e.geometry),i={datasetNames:e.datasetNames,getFeatureMode:"BUFFER",bufferDistance:e.bufferDistance,geometry:r},e.fields&&(t=new Zn,t.name=e.datasetNames,t.fields=e.fields,i.queryParameter=t),e.attributeFilter&&(i.attributeFilter=e.attributeFilter,i.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(i.maxFeatures=e.maxFeatures),typeof e.hasGeometry=="boolean"&&(i.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(i.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(i.targetPrj=e.targetPrj),W.toJSON(i)}}class vh extends ln{constructor(e,t){super(e,t),this.CLASS_NAME="SuperMap.GetFeaturesByBufferService"}destroy(){super.destroy()}getJsonParameters(e){if(e instanceof No)return No.toJsonParameters(e)}}class mh extends hn{constructor(e){super(e),this.getFeatureMode="SPATIAL",this.geometry=null,this.fields=null,this.attributeFilter=null,this.spatialQueryMode=ca.CONTAIN,W.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters"}destroy(){super.destroy();var e=this;if(e.geometry&&(e.geometry.destroy(),e.geometry=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}static toJsonParameters(e){var t,i,r;return i=ft.fromGeometry(e.geometry),r={datasetNames:e.datasetNames,getFeatureMode:"SPATIAL",geometry:i,spatialQueryMode:e.spatialQueryMode},e.fields&&(t=new Zn,t.name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),typeof e.hasGeometry=="boolean"&&(r.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),e.aggregations&&(r.aggregations=e.aggregations),W.toJSON(r)}}class yh extends ln{constructor(e,t){super(e,t),this.CLASS_NAME="SuperMap.GetFeaturesByGeometryService"}destroy(){super.destroy()}getJsonParameters(e){return mh.toJsonParameters(e)}}class Go{constructor(e){this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=cr.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,W.extend(this,e),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}destroy(){var e=this;e.dataSourceName=null,e.dataSetName=null,e.features=null,e.editType=null,e.IDs=null,e.returnContent=null}static toJsonParameters(e){var t,i,r,s=e.editType;if(s===cr.DELETE){if(e.IDs===null)return;r={ids:e.IDs}}else if(r=[],e.features){i=e.features.length;for(var o=0;o<i;o++)t=e.features[o],t.geometry=ft.fromGeometry(t.geometry),r.push(t)}return W.toJSON(r)}}class wh extends jn{constructor(e,t){super(e,t),this.returnContent=!1,this.isUseBatch=!1,t&&W.extend(this,t),this.url=W.urlPathAppend(this.url,"features"),this.CLASS_NAME="SuperMap.EditFeaturesService"}destroy(){super.destroy();var e=this;e.returnContent=null,e.isUseBatch=null,e.fromIndex=null,e.toIndex=null}processAsync(e){if(e instanceof Go){var t=this,i="POST",r="",s=e.editType,o=null;if(t.returnContent=e.returnContent,t.isUseBatch=e.isUseBatch,o=Go.toJsonParameters(e),s===cr.DELETE){r=W.toJSON(e.IDs),o=r;var l=W.urlAppend(t.url,W.getParameterString({ids:r}));Nt.urlIsLong(l)?(t.url=W.urlAppend(t.url,W.getParameterString({_method:"DELETE"})),i="POST"):(t.url=l,i="DELETE")}else s===cr.UPDATE?i="PUT":(t.isUseBatch&&(t.url=W.urlAppend(t.url,`isUseBatch=${t.isUseBatch}`),t.returnContent=!1),t.returnContent&&(t.url=W.urlAppend(t.url,"returnContent=true"),i="POST"));t.request({method:i,data:o,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}class Og extends ko{constructor(e,t){super(e,t)}getFeaturesByIDs(e,t,i){var r=this,s=new dh(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(i)});s.processAsync(r._processParams(e))}getFeaturesByBounds(e,t,i){var r=this,s=new ph(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(i)});s.processAsync(r._processParams(e))}getFeaturesByBuffer(e,t,i){var r=this,s=new vh(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(i)});s.processAsync(r._processParams(e))}getFeaturesBySQL(e,t,i){var r=this,s=new gh(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(i)});s.processAsync(r._processParams(e))}getFeaturesByGeometry(e,t,i){var r=this,s=new yh(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(i)});s.processAsync(r._processParams(e))}editFeatures(e,t){if(!(!e||!e.dataSourceName||!e.dataSetName)){var i=this,r=i.url,s=e.dataSourceName,o=e.dataSetName;r=W.urlPathAppend(r,"datasources/"+s+"/datasets/"+o);var l=new wh(r,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,eventListeners:{processCompleted:t,processFailed:t}});l.processAsync(i._processParams(e))}}_processParams(e){if(!e)return{};var t=this;if(e.returnContent=e.returnContent==null?!0:e.returnContent,e.fromIndex=e.fromIndex?e.fromIndex:0,e.toIndex=e.toIndex?e.toIndex:-1,e.bounds&&(e.bounds=wt.toSuperMapBounds(e.bounds)),e.geometry&&(e.geometry=wt.toSuperMapGeometry(JSON.parse(new os().writeGeometry(e.geometry)))),e.editType&&(e.editType=e.editType.toLowerCase()),e.features){var i=[];wt.isArray(e.features)?e.features.map(function(r){return i.push(t._createServerFeature(r)),r}):i.push(t._createServerFeature(e.features)),e.features=i}return e}_createServerFeature(e){var t={},i=[],r=[],s=e.getProperties();for(var o in s)o!==e.getGeometryName()&&(i.push(o),r.push(s[o]));return t.fieldNames=i,t.fieldValues=r,e.getId()&&(t.id=e.getId()),t.geometry=wt.toSuperMapGeometry(new os().writeFeatureObject(e)),t}_processFormat(e){return e||Ms.GEOJSON}}window.ol&&(ol.source.Mapv=uh),ol.Overlay.prototype.destroy=function(){let n=this.getElement();n.parentElement.removeChild(n),n=null},ol.color.withAlpha=function(n,e){const[t,i,r]=ol.color.asArray(n);return ol.color.asString([t,i,r,e])};function kg(n){const e=turf.featureCollection(n.map(r=>turf.point([r.lng,r.lat]))),t=turf.envelope(e),i=t&&t.bbox;return t&&t.bbox?i.chunk(2):i}const Dg=Object.freeze(Object.defineProperty({__proto__:null,computeRectangleFromPositionArray:kg},Symbol.toStringTag,{value:"Module"})),Ht={POINT:0,ANGLE:1,POLYLINE:2,POLYGON:3,RECTANGLE:4,SQUARE:5,CIRCLE:6};class ls{constructor(){D(this,"events",new _h)}on(e,t){this.events.add(e,t)}un(e,t){this.events.remove(e,t)}fire(e,t){this.events.getByEventType(e).forEach(i=>{var r;return(r=i.callback)==null?void 0:r.call(i,t)})}clear(){this.events.removeAll()}}class Mi extends ls{constructor(t){super();D(this,"viewer");D(this,"layer");D(this,"type");D(this,"tipPopup");D(this,"resultPopup");D(this,"_result",0);D(this,"unit","km");D(this,"tempListeners",[]);D(this,"tempPopups",[]);D(this,"geometry");D(this,"drawStart",t=>{this.fire("start",{target:this}),t.feature.getGeometry().on("change",this.drawChange),this.onStart(t)});D(this,"drawEnd",t=>{const i=t.feature.getGeometry();this.geometry=i,this.fire("end",{target:this}),i.un("change",this.drawChange),this.onEnd(t),this.resultPopup&&this.resultPopup.setPosition(null)});D(this,"drawChange",t=>{this.fire("change",{target:this}),this.onChange(t)});this.viewer=t==null?void 0:t.viewer,this.layer=t==null?void 0:t.layer,this.init()}set tipText(t){this.tipPopup&&(this.tipPopup.getElement().innerText=t),this._tipText=t}get tipText(){return this._tipText}set result(t){this._result=t,this.resultPopup&&(this.resultPopup.getElement().innerText=this.getResultText())}get result(){return this._result}getResultText(){return`${this._result.toFixed(6)} ${this.unit}`}get source(){return this.layer.getSource()}init(){this.createStyle({id:"tgis-measure-tip-popup",text:'.tgis-measure-tip-popup,.tgis-measure-result-popup{pointer-events:none;font-size:12px;font-weight:300;color:white;background:rgba(0,0,0,0.4);border-radius:4px;padding:4px 8px}.tgis-measure-result-popup{position:absolute;pointer-events:auto;white-space:nowrap;transform:translate(-50%,-100%)}.tgis-measure-result-popup::before{border-top:6px solid rgba(0,0,0,0.5);border-right:6px solid transparent;border-left:6px solid transparent;content:"";position:absolute;bottom:-6px;margin-left:-7px;left:50%}.tgis-measure-result-popup.static{background:rgba(255,99,71,0.5);color:black;border:1px solid white}.tgis-measure-result-popup.static::before{border-top:6px solid rgba(255,99,71,0.5)}'}),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236",this.result=0}createPopup(t){var s,o;const i=document.createElement((s=t==null?void 0:t.tagName)!=null?s:"div");i.className=t==null?void 0:t.className,i.innerText=t==null?void 0:t.innerText;const r=new ol.Overlay({element:i,offset:(o=t==null?void 0:t.offset)!=null?o:[15,0],positioning:t==null?void 0:t.positioning,stopEvent:!1});return this.tempPopups.push(r),r}initTipPopup(t){var r,s;this.tipPopup=this.createPopup({tagName:"div",className:"tgis-measure-tip-popup",innerText:this.tipText,offset:(r=t==null?void 0:t.offset)!=null?r:[15,0],positioning:(s=t==null?void 0:t.positioning)!=null?s:"center-left"}),this.viewer._addOverlay(this.tipPopup);let i=this.viewer.map.on("pointermove",o=>{this.tipPopup.setPosition(o.coordinate)});this.tempListeners.push(i)}initResultPopup(t){var i,r;this.resultPopup=this.createPopup({tagName:"div",className:"tgis-measure-result-popup",innerText:this.getResultText(),offset:(i=t==null?void 0:t.offset)!=null?i:[15,0],positioning:(r=t==null?void 0:t.positioning)!=null?r:"center-left"}),this.viewer._addOverlay(this.resultPopup)}start(){}end(){}destroy(){this.geometry=void 0,this.fire("destroy"),this.tempListeners.length&&(this.tempListeners.forEach(t=>ol.Observable.unByKey(t)),this.tempListeners=[]),this.tempPopups.length&&this.tempPopups.forEach(t=>this.viewer._removeOverlay(t))}initTooltip(){}createStyle(t){const{id:i,text:r}=t;let s=document.getElementById(i);s||(s=document.createElement("style"),s.setAttribute("id",i),s.textContent=r,document.head.appendChild(s))}onDrawEvent(){this.draw.on("drawstart",this.drawStart),this.draw.on("drawend",this.drawEnd)}unDrawEvent(){this.draw.un("drawstart",this.drawStart),this.draw.un("drawend",this.drawEnd)}getCoordinates(){var t;return(t=this.geometry)==null?void 0:t.getCoordinates()}}class Ri{constructor(e){this.owner=e}getCoordinates(e){return e.getCoordinates()}getArea(e){return e.getArea()}getLength(e){return e.getLength()}}class Ng extends Ri{constructor(...e){super(...e)}}class Gg extends Mi{constructor(t){super(t);D(this,"type","Point");D(this,"unit","\xB0");D(this,"attr",new Ng)}start(){const{map:t}=this.viewer;this.draw=new ol.interaction.Draw({source:this.source,type:this.type}),t.addInteraction(this.draw),this.onDrawEvent(),this.initTipPopup()}end(){if(this.draw){this.unDrawEvent();const{map:t}=this.viewer;t.removeInteraction(this.draw),this.draw=null}}getResult(t){return this.attr.getCoordinates(t)}getResultText(){const t=this.result;return`${t[0].toFixed(7)}${this.unit}, ${t[1].toFixed(7)}${this.unit}`}onStart(){}onEnd(t){const i=t.feature.getGeometry();this.result=this.getResult(i);const r=this.createPopup({tagName:"div",className:"tgis-measure-result-popup static",innerText:this.getResultText(),offset:[0,-15],positioning:"bottom-center"});r.setPosition(i.getLastCoordinate()),this.viewer._addOverlay(r),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236"}getCoordinates(){let t;return this.geometry&&(t=this.attr.getCoordinates(this.geometry)),t}}class Bg extends Ri{constructor(...e){super(...e)}calculateAngle(e){const t=e[0],i=e[1],r=e[2],s=t[0]-i[0],o=t[1]-i[1],l=r[0]-i[0],u=r[1]-i[1],g=s*l+o*u,p=Math.sqrt(Math.pow(s,2)+Math.pow(o,2)),y=Math.sqrt(Math.pow(l,2)+Math.pow(u,2)),w=g/(p*y);return Math.acos(w)*180/Math.PI}getAngle(e){const t=e.getCoordinates();return t.length<3?0:this.calculateAngle(t.slice(0,3))}}class zg extends Mi{constructor(t){super(t);D(this,"type","LineString");D(this,"unit","\xB0");D(this,"attr",new Bg)}start(){const{map:t}=this.viewer;this.draw=new ol.interaction.Draw({source:this.source,type:this.type}),t.addInteraction(this.draw),this.onDrawEvent(),this.initTipPopup()}end(){if(this.draw){this.unDrawEvent();const{map:t}=this.viewer;t.removeInteraction(this.draw),this.draw=null}}getResult(t){const i=this.attr.getAngle(t);return isNaN(i)?0:i}onStart(){}onEnd(t){const i=t.feature.getGeometry(),r=this.createPopup({tagName:"div",className:"tgis-measure-result-popup static",innerText:this.getResultText(),offset:[0,-8],positioning:"bottom-center"});r.setPosition(i.getCoordinates()[1]),this.viewer._addOverlay(r),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236"}onChange(t){const i=t.target;if(i.getCoordinates().length>=4){this.draw.finishDrawing();return}this.resultPopup?this.resultPopup.setPosition(i.getCoordinates()[1]):this.initResultPopup({offset:[0,-8],positioning:"bottom-center"}),this.result=this.getResult(i),this.tipText="\u5355\u51FB\u4EE5\u7EE7\u7EED\u7ED8\u5236"}}class Ug extends Ri{constructor(...e){super(...e)}}class Wg extends Mi{constructor(t){super(t);D(this,"type","LineString");D(this,"unit","km");D(this,"attr",new Ug)}start(){const{map:t}=this.viewer;this.draw=new ol.interaction.Draw({source:this.source,type:this.type}),t.addInteraction(this.draw),this.onDrawEvent(),this.initTipPopup()}end(){if(this.draw){this.unDrawEvent();const{map:t}=this.viewer;t.removeInteraction(this.draw),this.draw=null}}getResult(t){return this.attr.getLength(t)}onStart(){}onEnd(t){const i=this.createPopup({tagName:"div",className:"tgis-measure-result-popup static",innerText:this.getResultText(),offset:[0,-8],positioning:"bottom-center"});i.setPosition(t.feature.getGeometry().getLastCoordinate()),this.viewer._addOverlay(i),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236"}onChange(t){const i=t.target;this.resultPopup?this.resultPopup.setPosition(i.getLastCoordinate()):this.initResultPopup(),this.result=this.getResult(i),this.tipText="\u5355\u51FB\u4EE5\u7EE7\u7EED\u7ED8\u5236"}}class Vg extends Ri{constructor(...e){super(...e)}}class qg extends Mi{constructor(t){super(t);D(this,"type","Polygon");D(this,"unit","km\xB2");D(this,"attr",new Vg)}start(){const{map:t}=this.viewer;this.draw=new ol.interaction.Draw({source:this.source,type:this.type}),t.addInteraction(this.draw),this.onDrawEvent(),this.initTipPopup()}end(){if(this.draw){this.unDrawEvent();const{map:t}=this.viewer;t.removeInteraction(this.draw),this.draw=null}}getResult(t){return this.attr.getArea(t)}onStart(){}onEnd(t){const i=this.createPopup({tagName:"div",className:"tgis-measure-result-popup static",innerText:this.getResultText(),offset:[0,-15],positioning:"bottom-center"});i.setPosition(t.feature.getGeometry().getInteriorPoint().getCoordinates()),this.viewer._addOverlay(i),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236"}onChange(t){const i=t.target;this.resultPopup?this.resultPopup.setPosition(i.getInteriorPoint().getCoordinates()):this.initResultPopup(),this.result=this.getResult(i),this.tipText="\u5355\u51FB\u4EE5\u7EE7\u7EED\u7ED8\u5236"}}class Yg extends Ri{constructor(...e){super(...e)}}class Xg extends Mi{constructor(t){super(t);D(this,"type","LineString");D(this,"unit","km\xB2");D(this,"attr",new Yg)}geometryFunction(t,i){i||(i=new ol.geom.Polygon([]));const r=t[0],s=t[1];return i.setCoordinates([[r,[r[0],s[1]],s,[s[0],r[1]],r]]),i}start(){const{map:t}=this.viewer;this.draw=new ol.interaction.Draw({source:this.source,type:this.type,geometryFunction:this.geometryFunction,maxPoints:2}),t.addInteraction(this.draw),this.onDrawEvent(),this.initTipPopup()}end(){if(this.draw){this.unDrawEvent();const{map:t}=this.viewer;t.removeInteraction(this.draw),this.draw=null}}getResult(t){return this.attr.getArea(t)}onStart(){}onEnd(t){const i=this.createPopup({tagName:"div",className:"tgis-measure-result-popup static",innerText:this.getResultText(),offset:[0,0],positioning:"center-center"});i.setPosition(t.feature.getGeometry().getInteriorPoint().getCoordinates()),this.viewer._addOverlay(i),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236"}onChange(t){const i=t.target;this.resultPopup?this.resultPopup.setPosition(i.getInteriorPoint().getCoordinates()):this.initResultPopup({offset:[0,0],positioning:"center-center"}),this.result=this.getResult(i),this.tipText="\u5355\u51FB\u4EE5\u505C\u6B62\u7ED8\u5236"}}class Hg extends Ri{constructor(...e){super(...e)}}class jg extends Mi{constructor(t){super(t);D(this,"type","Circle");D(this,"unit","km\xB2");D(this,"attr",new Hg)}geometryFunction(){return ol.interaction.Draw.createRegularPolygon(4)}start(){const{map:t}=this.viewer;this.draw=new ol.interaction.Draw({source:this.source,type:this.type,geometryFunction:this.geometryFunction()}),t.addInteraction(this.draw),this.onDrawEvent(),this.initTipPopup()}end(){if(this.draw){this.unDrawEvent();const{map:t}=this.viewer;t.removeInteraction(this.draw),this.draw=null}}getResult(t){return this.attr.getArea(t)}onStart(){}onEnd(t){const i=this.createPopup({tagName:"div",className:"tgis-measure-result-popup static",innerText:this.getResultText(),offset:[0,0],positioning:"center-center"});i.setPosition(t.feature.getGeometry().getInteriorPoint().getCoordinates()),this.viewer._addOverlay(i),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236"}onChange(t){const i=t.target;this.resultPopup?this.resultPopup.setPosition(i.getInteriorPoint().getCoordinates()):this.initResultPopup({offset:[0,0],positioning:"center-center"}),this.result=this.getResult(i),this.tipText="\u5355\u51FB\u4EE5\u505C\u6B62\u7ED8\u5236"}}class Zg extends Ri{constructor(...e){super(...e)}getArea(e){return Math.pow(e.getRadius(),2)*Math.PI}}class Kg extends Mi{constructor(t){super(t);D(this,"type","Circle");D(this,"unit","km\xB2");D(this,"attr",new Zg)}start(){const{map:t}=this.viewer;this.draw=new ol.interaction.Draw({source:this.source,type:this.type}),t.addInteraction(this.draw),this.onDrawEvent(),this.initTipPopup()}end(){if(this.draw){this.unDrawEvent();const{map:t}=this.viewer;t.removeInteraction(this.draw),this.draw=null}}getResult(t){return this.attr.getArea(t)}onStart(){}onEnd(t){const i=this.createPopup({tagName:"div",className:"tgis-measure-result-popup static",innerText:this.getResultText(),offset:[0,0],positioning:"center-center"});i.setPosition(t.feature.getGeometry().getCenter()),this.viewer._addOverlay(i),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236"}onChange(t){const i=t.target;this.resultPopup?this.resultPopup.setPosition(i.getCenter()):this.initResultPopup({offset:[0,0],positioning:"center-center"}),this.result=this.getResult(i),this.tipText="\u5355\u51FB\u4EE5\u505C\u6B62\u7ED8\u5236"}}class Jg{constructor(e,t){D(this,"handlers",{[Ht.POINT]:Gg,[Ht.ANGLE]:zg,[Ht.POLYLINE]:Wg,[Ht.POLYGON]:qg,[Ht.RECTANGLE]:Xg,[Ht.SQUARE]:jg,[Ht.CIRCLE]:Kg});this.viewer=e,this.layer=new ol.layer.Vector,this.source=new ol.source.Vector,this.init(t)}addHandler(e,t){this.handlers[t]}getHandler(e){var t;return(t=this.handlers[e])!=null?t:this.handlers[Ht.POINT]}destroyEvent(){this.viewer.map.un("pointermove",this.onMousemove)}init(e){const{viewer:t,layer:i,source:r}=this;this.styleOptions=this.makeStyleOptions(e==null?void 0:e.style),this.style=this.makeStyle(this.styleOptions),i.setSource(r),i.setStyle(this.style),t._addLayer(i)}makeStyleOptions(e){var t,i,r,s,o;return{markerSize:(t=e==null?void 0:e.markerSize)!=null?t:6,markerColor:(i=e==null?void 0:e.markerColor)!=null?i:"#0099ff",stroke:(r=e==null?void 0:e.stroke)!=null?r:"tomato",strokeWidth:(s=e==null?void 0:e.strokeWidth)!=null?s:2,fill:(o=e==null?void 0:e.fill)!=null?o:"rgba(255, 255, 0, 0.3)"}}makeStroke(e){const{strokeWidth:t,stroke:i}=e;return new ol.style.Stroke({width:t,color:i})}makeFill(e){const{fill:t}=e;return new ol.style.Fill({color:t})}makeImage(e){const{markerSize:t}=e;return new ol.style.Circle({radius:t,fill:this.makeFill(e),stroke:this.makeStroke(e)})}makeStyle(e){return new ol.style.Style({stroke:this.makeStroke(e),fill:this.makeFill(e),image:this.makeImage(e)})}start(e){this.end(),e!=null&&e.style&&(this.styleOptions=this.makeStyleOptions(e),this.style=this.makeStyle(this.styleOptions),this.layer.setStyle(style));const t=this.getHandler(e==null?void 0:e.type);this.ctrl=new t({viewer:this.viewer,layer:this.layer}),this.ctrl.start()}end(){this.ctrl&&this.ctrl.end()}destroy(){this.layer&&(this.ctrl.destroy(),this.viewer._removeLayer(this.layer),this.ctrl=null,this.layer=null,this.source=null,this.styleOptions=null,this.style=null)}on(e,t){this.ctrl&&this.ctrl.on(e,t)}un(e,t){this.ctrl&&this.ctrl.un(e,t)}}const Kn={POINT:0,ANGLE:1,LENGTH:2,AREA:3};class hs extends ls{constructor(t){super();D(this,"viewer");D(this,"layer");D(this,"type");D(this,"tipPopup");D(this,"resultPopup");D(this,"_result",0);D(this,"unit","km");D(this,"tempListeners",[]);D(this,"tempPopups",[]);D(this,"geometry");D(this,"drawStart",t=>{this.fire("start",{target:this}),t.feature.getGeometry().on("change",this.drawChange),this.onStart(t)});D(this,"drawEnd",t=>{const i=t.feature.getGeometry();this.geometry=i,this.fire("end",{target:this}),i.un("change",this.drawChange),this.onEnd(t),this.resultPopup&&this.resultPopup.setPosition(null)});D(this,"drawChange",t=>{this.fire("change",{target:this}),this.onChange(t)});this.viewer=t==null?void 0:t.viewer,this.layer=t==null?void 0:t.layer,this.init()}set tipText(t){this.tipPopup&&(this.tipPopup.getElement().innerText=t),this._tipText=t}get tipText(){return this._tipText}set result(t){this._result=t,this.resultPopup&&(this.resultPopup.getElement().innerText=this.getResultText())}get result(){return this._result}getResultText(){return`${this._result.toFixed(6)} ${this.unit}`}get source(){return this.layer.getSource()}init(){this.createStyle({id:"tgis-measure-tip-popup",text:'.tgis-measure-tip-popup,.tgis-measure-result-popup{pointer-events:none;font-size:12px;font-weight:300;color:white;background:rgba(0,0,0,0.4);border-radius:4px;padding:4px 8px}.tgis-measure-result-popup{position:absolute;pointer-events:auto;white-space:nowrap;transform:translate(-50%,-100%)}.tgis-measure-result-popup::before{border-top:6px solid rgba(0,0,0,0.5);border-right:6px solid transparent;border-left:6px solid transparent;content:"";position:absolute;bottom:-6px;margin-left:-7px;left:50%}.tgis-measure-result-popup.static{background:rgba(255,99,71,0.5);color:black;border:1px solid white}.tgis-measure-result-popup.static::before{border-top:6px solid rgba(255,99,71,0.5)}'}),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236",this.result=0}createPopup(t){var s,o;const i=document.createElement((s=t==null?void 0:t.tagName)!=null?s:"div");i.className=t==null?void 0:t.className,i.innerText=t==null?void 0:t.innerText;const r=new ol.Overlay({element:i,offset:(o=t==null?void 0:t.offset)!=null?o:[15,0],positioning:t==null?void 0:t.positioning,stopEvent:!1});return this.tempPopups.push(r),r}initTipPopup(t){var r,s;this.tipPopup=this.createPopup({tagName:"div",className:"tgis-measure-tip-popup",innerText:this.tipText,offset:(r=t==null?void 0:t.offset)!=null?r:[15,0],positioning:(s=t==null?void 0:t.positioning)!=null?s:"center-left"}),this.viewer._addOverlay(this.tipPopup);let i=this.viewer.map.on("pointermove",o=>{this.tipPopup.setPosition(o.coordinate)});this.tempListeners.push(i)}initResultPopup(t){var i,r;this.resultPopup=this.createPopup({tagName:"div",className:"tgis-measure-result-popup",innerText:this.getResultText(),offset:(i=t==null?void 0:t.offset)!=null?i:[15,0],positioning:(r=t==null?void 0:t.positioning)!=null?r:"center-left"}),this.viewer._addOverlay(this.resultPopup)}start(){}end(){}destroy(){this.geometry=void 0,this.fire("destroy"),this.tempListeners.length&&(this.tempListeners.forEach(t=>ol.Observable.unByKey(t)),this.tempListeners=[]),this.tempPopups.length&&this.tempPopups.forEach(t=>this.viewer._removeOverlay(t))}initTooltip(){}createStyle(t){const{id:i,text:r}=t;let s=document.getElementById(i);s||(s=document.createElement("style"),s.setAttribute("id",i),s.textContent=r,document.head.appendChild(s))}onDrawEvent(){this.draw.on("drawstart",this.drawStart),this.draw.on("drawend",this.drawEnd)}unDrawEvent(){this.draw.un("drawstart",this.drawStart),this.draw.un("drawend",this.drawEnd)}getCoordinates(){var t;return(t=this.geometry)==null?void 0:t.getCoordinates()}}class us{constructor(e){this.owner=e}getCoordinates(e){return e.getCoordinates()}getArea(e){return e.getArea()}getLength(e){return e.getLength()}}class Qg extends us{constructor(...e){super(...e)}}class $g extends hs{constructor(t){super(t);D(this,"type","Point");D(this,"unit","\xB0");D(this,"attr",new Qg)}start(){const{map:t}=this.viewer;this.draw=new ol.interaction.Draw({source:this.source,type:this.type}),t.addInteraction(this.draw),this.onDrawEvent(),this.initTipPopup()}end(){if(this.draw){this.unDrawEvent();const{map:t}=this.viewer;t.removeInteraction(this.draw),this.draw=null}}getResult(t){return this.attr.getCoordinates(t)}getResultText(){const t=this.result;return`${t[0].toFixed(7)}${this.unit}, ${t[1].toFixed(7)}${this.unit}`}onStart(){}onEnd(t){const i=t.feature.getGeometry();this.result=this.getResult(i);const r=this.createPopup({tagName:"div",className:"tgis-measure-result-popup static",innerText:this.getResultText(),offset:[0,-15],positioning:"bottom-center"});r.setPosition(i.getLastCoordinate()),this.viewer._addOverlay(r),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236"}}class ep extends us{constructor(...e){super(...e)}calculateAngle(e){const t=e[0],i=e[1],r=e[2],s=t[0]-i[0],o=t[1]-i[1],l=r[0]-i[0],u=r[1]-i[1],g=s*l+o*u,p=Math.sqrt(Math.pow(s,2)+Math.pow(o,2)),y=Math.sqrt(Math.pow(l,2)+Math.pow(u,2)),w=g/(p*y);return Math.acos(w)*180/Math.PI}getAngle(e){const t=e.getCoordinates();return t.length<3?0:this.calculateAngle(t.slice(0,3))}}class tp extends hs{constructor(t){super(t);D(this,"type","LineString");D(this,"unit","\xB0");D(this,"attr",new ep)}start(){const{map:t}=this.viewer;this.draw=new ol.interaction.Draw({source:this.source,type:this.type}),t.addInteraction(this.draw),this.onDrawEvent(),this.initTipPopup()}end(){if(this.draw){this.unDrawEvent();const{map:t}=this.viewer;t.removeInteraction(this.draw),this.draw=null}}getResult(t){const i=this.attr.getAngle(t);return isNaN(i)?0:i}onStart(){}onEnd(t){const i=t.feature.getGeometry(),r=this.createPopup({tagName:"div",className:"tgis-measure-result-popup static",innerText:this.getResultText(),offset:[0,-8],positioning:"bottom-center"});r.setPosition(i.getCoordinates()[1]),this.viewer._addOverlay(r),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236"}onChange(t){const i=t.target;if(i.getCoordinates().length>=4){this.draw.finishDrawing();return}this.resultPopup?this.resultPopup.setPosition(i.getCoordinates()[1]):this.initResultPopup({offset:[0,-8],positioning:"bottom-center"}),this.result=this.getResult(i),this.tipText="\u5355\u51FB\u4EE5\u7EE7\u7EED\u7ED8\u5236"}}class ip extends us{constructor(...e){super(...e)}}class np extends hs{constructor(t){super(t);D(this,"type","LineString");D(this,"unit","km");D(this,"attr",new ip)}start(){const{map:t}=this.viewer;this.draw=new ol.interaction.Draw({source:this.source,type:this.type}),t.addInteraction(this.draw),this.onDrawEvent(),this.initTipPopup()}end(){if(this.draw){this.unDrawEvent();const{map:t}=this.viewer;t.removeInteraction(this.draw),this.draw=null}}getResult(t){return this.attr.getLength(t)}onStart(){}onEnd(t){const i=this.createPopup({tagName:"div",className:"tgis-measure-result-popup static",innerText:this.getResultText(),offset:[0,-8],positioning:"bottom-center"});i.setPosition(t.feature.getGeometry().getLastCoordinate()),this.viewer._addOverlay(i),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236"}onChange(t){const i=t.target;this.resultPopup?this.resultPopup.setPosition(i.getLastCoordinate()):this.initResultPopup(),this.result=this.getResult(i),this.tipText="\u5355\u51FB\u4EE5\u7EE7\u7EED\u7ED8\u5236"}}class rp extends us{constructor(...e){super(...e)}}class sp extends hs{constructor(t){super(t);D(this,"type","Polygon");D(this,"unit","km\xB2");D(this,"attr",new rp)}start(){const{map:t}=this.viewer;this.draw=new ol.interaction.Draw({source:this.source,type:this.type}),t.addInteraction(this.draw),this.onDrawEvent(),this.initTipPopup()}end(){if(this.draw){this.unDrawEvent();const{map:t}=this.viewer;t.removeInteraction(this.draw),this.draw=null}}getResult(t){return this.attr.getArea(t)}onStart(){}onEnd(t){const i=this.createPopup({tagName:"div",className:"tgis-measure-result-popup static",innerText:this.getResultText(),offset:[0,-15],positioning:"bottom-center"});i.setPosition(t.feature.getGeometry().getInteriorPoint().getCoordinates()),this.viewer._addOverlay(i),this.tipText="\u5355\u51FB\u5F00\u59CB\u7ED8\u5236"}onChange(t){const i=t.target;this.resultPopup?this.resultPopup.setPosition(i.getInteriorPoint().getCoordinates()):this.initResultPopup(),this.result=this.getResult(i),this.tipText="\u5355\u51FB\u4EE5\u7EE7\u7EED\u7ED8\u5236"}}class op{constructor(e,t){D(this,"handlers",{[Kn.POINT]:$g,[Kn.ANGLE]:tp,[Kn.LENGTH]:np,[Kn.AREA]:sp});this.viewer=e,this.layer=new ol.layer.Vector,this.source=new ol.source.Vector,this.init(t)}addHandler(e,t){this.handlers[t]}getHandler(e){var t;return(t=this.handlers[e])!=null?t:this.handlers[DrawType.POINT]}destroyEvent(){this.viewer.map.un("pointermove",this.onMousemove)}init(e){const{viewer:t,layer:i,source:r}=this;this.styleOptions=this.makeStyleOptions(e==null?void 0:e.style),this.style=this.makeStyle(this.styleOptions),i.setSource(r),i.setStyle(this.style),t._addLayer(i)}makeStyleOptions(e){var t,i,r,s,o;return{markerSize:(t=e==null?void 0:e.markerSize)!=null?t:6,markerColor:(i=e==null?void 0:e.markerColor)!=null?i:"#0099ff",stroke:(r=e==null?void 0:e.stroke)!=null?r:"tomato",strokeWidth:(s=e==null?void 0:e.strokeWidth)!=null?s:2,fill:(o=e==null?void 0:e.fill)!=null?o:"rgba(255, 255, 0, 0.3)"}}makeStroke(e){const{strokeWidth:t,stroke:i}=e;return new ol.style.Stroke({width:t,color:i})}makeFill(e){const{fill:t}=e;return new ol.style.Fill({color:t})}makeImage(e){const{markerSize:t}=e;return new ol.style.Circle({radius:t,fill:this.makeFill(e),stroke:this.makeStroke(e)})}makeStyle(e){return new ol.style.Style({stroke:this.makeStroke(e),fill:this.makeFill(e),image:this.makeImage(e)})}start(e){this.end(),e!=null&&e.style&&(this.styleOptions=this.makeStyleOptions(e),this.style=this.makeStyle(this.styleOptions),this.layer.setStyle(style));const t=this.getHandler(e==null?void 0:e.type);this.ctrl=new t({viewer:this.viewer,layer:this.layer}),this.ctrl.start()}end(){this.ctrl&&this.ctrl.end()}destroy(){this.layer&&(this.ctrl.destroy(),this.viewer._removeLayer(this.layer),this.ctrl=null,this.layer=null,this.source=null,this.styleOptions=null,this.style=null)}on(e,t){this.ctrl&&this.ctrl.on(e,t)}un(e,t){this.ctrl&&this.ctrl.un(e,t)}}class cs{constructor(){this._array=[],this._hash={}}get length(){return this._array.length}get values(){return this._array}contains(e){return Ge(this._hash[e])}set(e,t){const i=this._hash[e];t!==i&&(this.remove(e),this._hash[e]=t,this._array.push(t))}get(e){return this._hash[e]}remove(e){const t=this._hash[e],i=Ge(t);if(i){const r=this._array;r.splice(r.indexOf(t),1),delete this._hash[e]}return i}removeAll(){const e=this._array;e.length&&(this._hash={},e.length=0)}}function di(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}function Ge(n){return n!=null}class Jn extends Error{constructor(e){this.name="DeveloperError",this.message=e;let t;try{throw new Error}catch(i){t=i.stack}this.stack=t}toString(){let e=`${this.name}: ${this.message}`;return Ge(this.stack)&&(e+=`
${this.stack.toString()}`),e}static throwInstantiationError(){throw new Jn("\u62BD\u8C61\u7C7B\u4E0D\u80FD\u88AB\u5B9E\u4F8B\u5316.")}}class un{constructor(){new.target===un&&Jn.throwInstantiationError()}}class ap extends un{constructor(t){t=t!=null?t:{};super();D(this,"code");D(this,"proj");this.code=t.code,this.proj=ol.proj.get(this.code)}get code(){return this.code}getProj(){return this.proj}}class cn{constructor(){D(this,"projection");D(this,"rectangle");new.target===cn&&DeveloperError.throwInstantiationError()}}class lp extends cn{constructor(e){e=e!=null?e:{},super(),this.projection=e.projection}}class ds{get id(){return this._id}constructor(e){this.callback=e,this._id=di()}static fromCallback(e){return new ds(e)}}class _h{constructor(){D(this,"events",new Map)}add(e,t){const{events:i}=this;Ge(i.get(e))||i.set(e,new cs);const r=ds.fromCallback(t);return i.get(e).set(r.id,r),r}get(e,t){const i=this.events.get(e);if(!!Ge(i))return i.values.find(r=>r.callback===t)}getByEventCallbackId(e,t){const i=this.events.get(e);if(!!Ge(i))return i.values.find(r=>r.id===t)}getByEventType(e){const t=this.events.get(e);return t?t.values:[]}remove(e,t){const i=this.events.get(e);if(!Ge(i))return;const r=this.get(e,t);return Ge(r)?i.remove(r.id):this.removeAll(),r}removeAll(){this.events.forEach(e=>e.removeAll())}}class xh extends un{constructor(){super();D(this,"code");D(this,"proj");this.code="EPSG:4326",this.proj=ol.proj.get(this.code)}get code(){return this.code}getProj(){return this.proj}}class Sh extends cn{constructor(){super(),this.projection=new xh}}function Bo(){if(ol.util&&ol.util.VERSION)return ol.util.VERSION.split(".")[0];if(window&&window.ol){if(window.ol.util)return"6";if(window.ol.WebGLMap)return"5"}return"4"}class bt{constructor(e,t){D(this,"lng",0);D(this,"lat",0);this.lng=e,this.lat=t}static lerp(e,t,i){const r=bt.multiplyByScalar(t,i),s=bt.multiplyByScalar(e,1-i);return bt.add(r,s)}static multiplyByScalar(e,t){return new bt(e.lng*t,e.lat*t)}static divideByScalar(e,t){return new bt(e.lng/t,e.lat/t)}static add(e,t){return new bt(e.lng+t.lng,e.lat+t.lat)}static subtract(e,t){return new bt(e.lng-t.lng,e.lat-t.lat)}}class Tt{constructor(e){D(this,"url");D(this,"queryParameters");D(this,"headers");D(this,"responseType");this.setOptions(e)}setOptions(e){var t,i,r,s;!e||(this.url=(t=e.url)!=null?t:this.url,this.queryParameters=(i=e.queryParameters)!=null?i:this.queryParameters,this.headers=(r=e.headers)!=null?r:this.headers,this.responseType=(s=e.responseType)!=null?s:this.responseType)}makeRequest(e){const t=e.url,i=e.requestOptions,r=e.responseType;return fetch(t,i).then(s=>s[r!=null?r:"text"]())}makeQueryURL(e,t){const i=new URL(e);if(t){const r=new URLSearchParams().setObject(t);i.search=r.toString()}return i}fetch(e){this.setOptions(e);const t=this.makeQueryURL(this.url,this.queryParameters),i=new Headers(this.headers),r={method:"GET",headers:i};return new Promise((s,o)=>{this.makeRequest({url:t,requestOptions:r,responseType:this.responseType}).then(l=>s(l)).catch(l=>o(l))})}fetchJson(e={}){return e.responseType="json",this.fetch(e)}post(e,t){this.setOptions(e);const i=this.makeQueryURL(this.url,this.queryParameters),r=new Headers(this.headers),s={method:"POST",headers:r,body:t};return new Promise((o,l)=>{this.makeRequest({url:i,requestOptions:s,responseType:this.responseType}).then(u=>o(u)).catch(u=>l(u))})}static fetch(e){return new Tt().fetch(e)}static fetchJson(e){return new Tt().fetch(e)}static fetchArrayBuffer(e){return new Tt().fetchJson(e)}static fetchFormData(e){return new Tt().fetch(e)}static fetchBlob(e){return new Tt().fetch(e)}static fetchText(e){return Tt.fetch(e)}static post(e){e=e!=null?e:{};const{data:t,...i}=e;return new Tt().post(i,t)}}const lt=Object.freeze({LEFT_DOWN:0,LEFT_UP:1,LEFT_CLICK:2,LEFT_DOUBLE_CLICK:3,RIGHT_DOWN:5,RIGHT_UP:6,RIGHT_CLICK:7,MIDDLE_DOWN:10,MIDDLE_UP:11,MIDDLE_CLICK:12,MOUSE_MOVE:15,WHEEL:16,PINCH_START:17,PINCH_END:18,PINCH_MOVE:19,MOUSE_OVER:20,MOUSE_OUT:21});lt.LEFT_DOWN+"",lt.LEFT_UP+"",lt.LEFT_CLICK+"",lt.LEFT_DOUBLE_CLICK+"",lt.RIGHT_DOWN+"",lt.RIGHT_UP+"",lt.RIGHT_CLICK+"",lt.MIDDLE_DOWN+"",lt.MIDDLE_UP+"",lt.MOUSE_MOVE+"",lt.MOUSE_OVER+"",lt.MOUSE_OUT+"",lt.WHEEL+"";class hp{constructor(e){D(this,"_inputEvents");D(this,"_canvas");this._canvas=e}setInputAction(e,t){}removeInputAction(e){}getInputAction(e){}}class Eh extends un{constructor(){super();D(this,"code");D(this,"proj");this.code="EPSG:3857",this.proj=ol.proj.get(this.code)}get code(){return this.code}getProj(){return this.proj}}class up extends cn{constructor(){super(),this.projection=new Eh}}class fs{constructor(e){D(this,"billboard");D(this,"label");D(this,"point");D(this,"renderBuffer",100);D(this,"properties");D(this,"_show",!0);this.layer=new ol.layer.Vector({renderBuffer:e.renderBuffer||this.renderBuffer}),this.source=new ol.source.Vector,this._id=e.id||di(),this._position=e.position||[0,0],this.zIndex=e.zIndex||1,this.properties=e.properties,e.billboard&&(this.billboard=this.addGraphics(Ch,e.billboard)),e.label&&(this.label=this.addGraphics(Ih,e.label)),e.point&&(this.point=this.addGraphics(bh,e.point)),this.layer.setSource(this.source),this.layer.setZIndex(this.zIndex),this.layer.set("id",this.id)}get show(){return this._show}set show(e){this.layer.setVisible(e),this._show=e}get id(){return this._id}get position(){return this._position}set position(e){this.billboard&&this.billboard.geometry.setCoordinates(e),this.label&&this.label.geometry.setCoordinates(e),this.point&&this.point.geometry.setCoordinates(e),this._position=e}addGraphics(e,t){let i=t instanceof e?t:new e(t);return i.geometry.setCoordinates(this._position),i.owner=this,(t.show===void 0||t.show)&&this.source.addFeature(i.feature),i}displayGraphics(e,t){const i=e.feature;if(t){const r=this.source.getFeatureById(i.getId()||i.get("id"));Ge(r)&&this.source.removeFeature(r),this.source.addFeature(i)}else this.source.removeFeature(i)}}class zo{constructor(e){this._id=di(),this._entities=new cs,this._owner=e}add(e){return e instanceof fs||(e=new fs(e)),this.contains(e)&&this.remove(e),this._entities.set(e.id,e),this._owner._addLayer(e.layer),e}contains(e){return this._entities.contains(e.id)}getById(e){return this._entities.get(e)}remove(e){return this._owner._removeLayer(e.layer),this._entities.remove(e.id)}removeById(e){const t=this._entities.get(e),i=Ge(t);return i&&this.remove(t),i}removeAll(){this._entities.values.forEach(e=>{this._owner._removeLayer(e.layer)}),this._entities.removeAll()}}class gs{constructor(e){D(this,"owner");D(this,"geometry");D(this,"feature");D(this,"_eventHash",{});var t;this.owner=e.owner,this._show=(t=e.show)!=null?t:!0}set show(e){this.owner&&this.owner.displayGraphics(this,e),this._show=e}get show(){return this._show}_changed(){this.feature.changed()}on(e,t){if(this.feature){const{_eventHash:i}=this;i[e]||(i[e]=[]);const r=s=>t({...s,properties:this.owner.properties,target:this.owner});this.feature.on(e,r),i[e].push({id:di(),fn:t,eFn:r})}}un(e,t){if(this.feature){const{_eventHash:i}=this,s=i[e].find(o=>o.fn===t);s&&this.feature.un(e,s.eFn)}}getExtent(){return this.geometry?this.geometry.getExtent():this.geometry}}class Ch extends gs{constructor(e){super(e),this.geometry=new ol.geom.Point([]),this.feature=new ol.Feature({geometry:this.geometry}),this.image=e.image,this.width=e.width,this.height=e.height,this._scale=e.scale||1,this.opacity=e.opacity||1,this.pixelOffset=e.pixelOffset||[.5,.5],this.style=new ol.style.Style({image:new ol.style.Icon({src:this.image,opacity:this.opacity||1,anchor:this.pixelOffset||[.5,.5]})}),this.feature.setStyle(this.style),this.feature.setId(di());const t=new Image;t.src=this.image,t.onload=()=>{this.imageWidth=t.width,this.imageHeight=t.height,this.style.getImage().setScale(this.scale)}}set scale(e){let t=this.width?this.width/this.imageWidth:1,i=this.height?this.height/this.imageHeight:1;t*=e,i*=e;const r=Bo()>=6?[t,i]:t;this.style.getImage().setScale(r),this._changed(),this._scale=e}get scale(){let e=this.width?this.width/this.imageWidth:1,t=this.height?this.height/this.imageHeight:1;return e*=this._scale,t*=this._scale,Bo()>=6?[e,t]:e}set rotation(e){this.style.getImage().setRotation(e),this._changed()}get rotation(){var e;return(e=this.style.getImage().getRotation())!=null?e:0}}class Ih extends gs{constructor(e){var t,i,r,s;super(e),this.font=e.font||"30px sans-serif",this.text=e.text,this._scale=(t=e.scale)!=null?t:1,this.rotation=(i=e.rotation)!=null?i:0,this.fillColor=e.fillColor||"#fff",this.outlineColor=e.outlineColor||"#000",this.outlineWidth=(r=e.outlineWidth)!=null?r:0,this.showBackground=e.showBackground||!1,this.backgroundColor=e.backgroundColor||"rgba(165, 165, 165, 0.8)",this.backgroundOutlineWidth=(s=e.backgroundOutlineWidth)!=null?s:0,this.backgroundOutlineColor=e.backgroundOutlineColor||"#000",this.backgroundPadding=e.backgroundPadding||[7,5,7,5],this.pixelOffset=e.pixelOffset||[0,0],this.geometry=new ol.geom.Point([]),this.feature=new ol.Feature({geometry:this.geometry}),this.styleOptions={text:new ol.style.Text({text:this.text,font:this.font,offsetX:this.pixelOffset[0],offsetY:this.pixelOffset[1],scale:this.scale,rotation:this.rotation,fill:new ol.style.Fill({color:this.fillColor}),backgroundFill:this.showBackground?new ol.style.Fill({color:this.backgroundColor}):void 0,backgroundStroke:this.backgroundOutlineWidth>0?new ol.style.Stroke({width:this.backgroundOutlineWidth,color:this.backgroundOutlineColor}):void 0,padding:this.backgroundPadding,stroke:this.outlineWidth>0?new ol.style.Stroke({width:this.outlineWidth,color:this.outlineColor}):void 0})},this.style=new ol.style.Style(this.styleOptions),this.feature.setStyle(this.style),this.feature.setId(di())}set scale(e){this.style.getText().setScale(e),this._scale=e}get scale(){return this._scale}}class bh extends gs{constructor(e){super(e),this.pixelSize=typeof e.pixelSize=="number"?e.pixelSize:10,this.color=e.color||"#fff",this.outlineColor=e.outlineColor||"#000",this.outlineWidth=e.outlineWidth||0,this.geometry=new ol.geom.Point([]),this.feature=new ol.Feature({geometry:this.geometry}),this.styleOptions={image:new ol.style.Circle({radius:this.pixelSize,fill:new ol.style.Fill({color:this.color}),stroke:this.outlineWidth>0?new ol.style.Stroke({width:this.outlineWidth,color:this.outlineColor}):void 0})},this.style=new ol.style.Style(this.styleOptions),this.feature.setStyle(this.style),this.feature.setId(di())}set scale(e){this.style.getText().setScale(e),this._scale=e}get scale(){return this._scale}}class Th extends ls{constructor(t,i){var o,l,u,g,p,y,w;super();D(this,"positions");D(this,"speed");D(this,"fraction");D(this,"speed");D(this,"color");D(this,"opacity");D(this,"width");D(this,"autoSetView");D(this,"autoFollowView");D(this,"move",t=>{var i;if(this.fraction+=this.speed/this.distance,this.fraction>=1)this.stop();else{const r=this.geometry.getCoordinateAt(this.fraction);this._updateVectorContext(ol.render.getVectorContext(t),r),this.autoFollowView&&((i=this.camera)==null||i.flyTo({destination:new bt(r[0],r[1]),duration:300})),this.fire("move",{coordinate:r,target:this,type:"move"}),this.layer.getSource().changed()}});this.camera=t,this.positions=(o=i.positions)!=null?o:[],this.speed=(l=i.speed)!=null?l:100,this.fraction=0,this.color=(u=i.color)!=null?u:"tomato",this.width=(g=i.width)!=null?g:8,this.opacity=(p=i.opacity)!=null?p:1,this.autoSetView=(y=i.autoSetView)!=null?y:!0,this.autoFollowView=(w=i.autoFollowView)!=null?w:!0;const r=this.positions.map(_=>[_.lng,_.lat]);this.geometry=new ol.geom.LineString(r),this.distance=ol.sphere.getLength(this.geometry,{projection:"EPSG:4326"}),this.style=new ol.style.Style({stroke:new ol.style.Stroke({color:ol.color.withAlpha(this.color,this.opacity),width:this.width})}),this.feature=new ol.Feature({geometry:this.geometry}),this.feature.setStyle(this.style),this.source=new ol.source.Vector({features:[this.feature]}),this.layer=new ol.layer.Vector({source:this.source});const s=this.camera.owner;this.startMarker=i.startMarker&&(i.startMarker=s.entities.add(i.startMarker)),this.startMarker&&(this.startMarker.position=r[0]),this.moveMarker=i.moveMarker&&(i.moveMarker=s.entities.add(i.moveMarker)),this.moveMarker&&(this.moveMarker.position=r[0]),this.endMarker=i.endMarker&&(i.endMarker=s.entities.add(i.endMarker)),this.endMarker&&(this.endMarker.position=r[r.length-1]),this.camera.owner._addLayer(this.layer),this.autoSetView&&this.camera.fit(r)}_updateVectorContext(t,i){Ge(this.moveMarker)?this.moveMarker.layer.getSource().getFeatures().forEach(r=>this._vectorContextDrawFeature(t,r.clone(),i)):(t.setStyle(new ol.style.Style({image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"black"}),stroke:new ol.style.Stroke({color:"white",width:2})})})),t.drawGeometry(new ol.geom.Point(i)))}_vectorContextDrawFeature(t,i,r){const s=i.getGeometry(),o=i.getStyle().clone();s.setCoordinates(r),t.drawFeature(i,o)}_updateMoveMarker({type:t}){if(!this.moveMarker)return;const i=this.geometry.getCoordinateAt(this.fraction>1?1:this.fraction);this.moveMarker.position=i;let r=1;switch(t){case"start":r=0;break;case"stop":r=1;break}this.camera.cancelAnimations(),this.moveMarker.layer.setOpacity(r)}start(){this.fraction>=1&&(this.fraction=0),this._updateMoveMarker({type:"start"});const t=this.geometry.getCoordinateAt(this.fraction);this.fire("start",{coordinate:t,target:this,type:"start"}),this.layer.on("postrender",this.move),this.layer.getSource().changed()}stop(){this._updateMoveMarker({type:"stop"});const t=this.geometry.getCoordinateAt(this.fraction);this.layer.un("postrender",this.move),this.fire("stop",{coordinate:t,target:this,type:"stop"})}destroy(){this.stop(),this.fire("destroy",{target:this,type:"destroy"}),this._clearMarker(),this._clearEvent(),this._clear()}on(...t){super.on(...t)}un(...t){super.un(...t)}_clearEvent(){super.clear()}_clearMarker(){const t=this.camera.owner;this.startMarker&&t.entities.remove(this.startMarker),this.moveMarker&&t.entities.remove(this.moveMarker),this.endMarker&&t.entities.remove(this.endMarker)}_clear(){this.fraction=0,this.camera.owner._removeLayer(this.layer)}}class Pt{constructor(){new.target===Pt&&Jn.throwInstantiationError}static calculateResolutions({projection:e,minimumLevel:t=0,maximumLevel:i=24,tileWidth:r=256}={}){const s=e.getExtent(),o=ol.extent.getWidth(s)/r,l=new Array(i-t);for(var u=0;u<l.length;u++)l[u]=o/Math.pow(2,t+u);return l}}class cp extends Pt{constructor(e){super(),this.source=new ol.source.ImageArcGISRest(e),this.layer=new ol.layer.Image({source:this.source})}}class dp extends Pt{constructor(t){var i,r,s,o,l;t=t!=null?t:{};super();D(this,"url");D(this,"format","image/jpeg");D(this,"layer");D(this,"style","default");D(this,"tileMatrixSetID");D(this,"tileMatrixLabels");D(this,"tileWidth");D(this,"tileHeight");D(this,"tilingScheme");D(this,"projection");D(this,"minimumLevel",0);D(this,"maximumLevel");this.url=t.url,this.format=t.format,this.layer=t.layer,this.style=t.style,this.tileMatrixSetID=t.tileMatrixSetID,this.tileMatrixLabels=t.tileMatrixLabels,this.tileWidth=(i=t.tileWidth)!=null?i:256,this.tileHeight=(r=t.tileHeight)!=null?r:256,this.tilingScheme=(s=t.tilingScheme)!=null?s:GeographicTilingScheme(),this.minimumLevel=(o=t.minimumLevel)!=null?o:0,this.maximumLevel=(l=t.maximumLevel)!=null?l:21,this.resolutions=Pt.calculateResolutions({projection:this.tilingScheme.projection.getProj(),zoomLevel:this.maximumLevel}),this.source=new ol.source.TileArcGISRest({url:this.url,format:this.format,layer:this.layer,projection:this.tilingScheme.projection.getProj(),tileGrid:new ol.tilegrid.WMTS({tileSize:[this.tileWidth,this.tileHeight],origin:[-180,90],resolutions:this.resolutions})}),this.layer=new ol.layer.Tile({source:this.source})}}class Uo{constructor(e){this._owner=e}get _view(){return this._owner.map.getView()}get owner(){return this._owner}computeViewRectangle(){return this._view.calculateExtent()}fit(e,t=[10,10,10,10]){const i=new ol.geom.Polygon([e]);this._view.fit(i,{padding:t})}flyTo(e){if(!Ge(e))return e;const{destination:t,duration:i,complete:r}=e;this._view.animate({center:[t.lng||0,t.lat||0],duration:i},r||(()=>{}))}setView(e){if(!Ge(e))return e;const{destination:t}=e;this._view.setCenter([t.lng||0,t.lat||0])}cancelAnimations(){this._view.cancelAnimations()}on(e,t){this._view.on(e,t)}un(e,t){this._view.un(e,t)}}class Ph{constructor(e,t){D(this,"imageryProvider");this.imageryProvider=e}}class Wo{constructor(){D(this,"_layers",[])}setMap(e){return this.map=e,this}get length(){return this._layers.length}add(e,t){var i;this._layers.splice(t,0,e),(i=this.map)==null||i.addLayer(e.imageryProvider.layer)}addImageryProvider(e,t){const i=new Ph(e);return this.add(i,t),i}remove(e,t){var r;const i=this._layers.indexOf(e);return i!==-1?(this._layers.splice(i,1),(r=this.map)==null||r.removeLayer(e.imageryProvider.layer),t&&(e=null),!0):!1}removeAll(){this._layers.forEach(e=>{var t;(t=this.map)==null||t.removeLayer(e.imageryProvider.layer)}),this._layers=[]}contains(e){return this.indexOf(e)!==-1}indexOf(e){return this._layers.indexOf(e)}get(e){return this._layers[e]}}class Ah{constructor(){this.imageryLayerCollection=new Wo}}class fp{constructor(){this.globe=new Ah}get imageryLayers(){return this.globe.imageryLayerCollection}}const gp=Object.freeze(Object.defineProperty({__proto__:null,Format:da,JSONFormat:Fs,GeoJSONFormat:mr,CommonServiceBase:jn,EditFeaturesParameters:Go,EditFeaturesService:wh,FilterParameter:Zn,GetFeaturesByBoundsParameters:Li,GetFeaturesByBoundsService:ph,GetFeaturesByBufferParameters:No,GetFeaturesByBufferService:vh,GetFeaturesByGeometryParameters:mh,GetFeaturesByGeometryService:yh,GetFeaturesByIDsParameters:ch,GetFeaturesByIDsService:dh,GetFeaturesBySQLParameters:fh,GetFeaturesBySQLService:gh,GetFeaturesParametersBase:hn,GetFeaturesServiceBase:ln,PointWithMeasure:pr,Route:vr,ServerColor:zt,ServerGeometry:ft,ServerStyle:gr,SecurityManager:Lt,setFetch:tu,RequestJSONPPromise:In,setCORS:iu,isCORS:ua,setRequestTimeout:nu,getRequestTimeout:As,FetchRequest:Nt,getMeterPerMapUnit:Tn,getWrapNum:ou,conversionDegree:au,scalesToResolutions:fa,getZoomByResolution:ga,scaleToResolution:pa,TileSuperMapRest:on,DataFlow:mg,Mapv:uh,DataFlowService:lh,FeatureService:Og,ServiceBase:ko},Symbol.toStringTag,{value:"Module"}));class pp extends Pt{constructor(e){super(),this.source=new on(e),this.layer=new ol.layer.Tile({source:this.source})}}class vp extends Pt{constructor(e){super(),e=e||{},this.source=new ol.source.XYZ(e),this.layer=new ol.layer.Tile({source:this.source})}}class mp{constructor(e){D(this,"style",{markerSize:6,markerColor:"tomato",stroke:"green",strokeWidth:2,fill:"rgba(255,255,255,0.5)"});D(this,"styles",{Point:{image:this._makeImage()},LineString:{stroke:this._makeStroke()},MultiLineString:{stroke:this._makeStroke()},MultiPoint:{image:this._makeImage()},MultiPolygon:{stroke:this._makeStroke(),fill:this._makeFill()},Polygon:{stroke:this._makeStroke(),fill:this._makeFill()},GeometryCollection:{stroke:this._makeStroke(),fill:this._makeFill(),image:this._makeImage()},Circle:{stroke:this._makeStroke(),fill:this._makeFill()}});e=e!=null?e:{},this.url=e.url,this.layerName=e.layerName,this.setStyle(e),this.createLayer(),this.requestFeatures()}_makeStroke(){const{strokeWidth:e,stroke:t}=this.style;return new ol.style.Stroke({width:e,color:t})}_makeFill(){const{fill:e}=this.style;return new ol.style.Fill({color:e})}_makeImage(){const{markerSize:e}=this.style;return new ol.style.Circle({radius:e,fill:this._makeFill(),stroke:this._makeStroke()})}setStyle(e){!e||(e.markerSize&&(this.style.markerSize=e.markerSize),e.markerColor&&(this.style.markerColor=e.markerColor),e.stroke&&(this.style.stroke=e.stroke),e.strokeWidth&&(this.style.strokeWidth=e.strokeWidth),e.fill&&(this.style.fill=e.fill))}createLayer(){this.layer=new ol.layer.Vector({style:e=>new ol.style.Style(this.styles[e.getGeometry().getType()])})}requestFeatures(){let e=this.url;e instanceof Tt||(e=new Tt({url:this.url,queryParameters:{outputFormat:"application/json",request:"GetFeature",service:"WFS",typeName:this.layerName}})),e.fetchJson().then(t=>{console.log("res:",t),this.source=new ol.source.Vector({features:new ol.format.GeoJSON().readFeatures(t)}),this.layer.setSource(this.source)}).catch(t=>{this.fire("error",t)})}}class yp extends Pt{constructor(t){var i,r,s,o,l;t=t!=null?t:{};super(t);D(this,"url");D(this,"format","image/jpeg");D(this,"layer");D(this,"style","default");D(this,"tileMatrixSetID");D(this,"tileMatrixLabels");D(this,"tileWidth");D(this,"tileHeight");D(this,"tilingScheme");D(this,"projection");D(this,"minimumLevel",0);D(this,"maximumLevel");this.url=t.url,this.format=t.format,this.layer=t.layer,this.style=t.style,this.tileMatrixSetID=t.tileMatrixSetID,this.tileMatrixLabels=t.tileMatrixLabels,this.tileWidth=(i=t.tileWidth)!=null?i:256,this.tileHeight=(r=t.tileHeight)!=null?r:256,this.tilingScheme=(s=t.tilingScheme)!=null?s:new Sh,this.minimumLevel=(o=t.minimumLevel)!=null?o:0,this.maximumLevel=(l=t.maximumLevel)!=null?l:24,this.resolutions=Pt.calculateResolutions({projection:this.tilingScheme.projection.getProj(),minimumLevel:this.minimumLevel,maximumLevel:this.maximumLevel}),this.source=new ol.source.WMTS({url:this.url,format:this.format,layer:this.layer,style:this.style,matrixSet:this.tileMatrixSetID,projection:this.tilingScheme.projection.getProj(),tileGrid:new ol.tilegrid.WMTS({tileSize:[this.tileWidth,this.tileHeight],origin:[-180,90],resolutions:this.resolutions,matrixIds:this.tileMatrixLabels})}),this.layer=new ol.layer.Tile({source:this.source})}}class Lh{constructor(e){D(this,"protocol","http");D(this,"host","10.223.178.107");D(this,"port");D(this,"url");var t,i,r;this.protocol=(t=e==null?void 0:e.protocol)!=null?t:this.protocol,this.host=(i=e==null?void 0:e.host)!=null?i:this.host,this.port=(r=e==null?void 0:e.port)!=null?r:this.port,this.makeUrl()}makeUrl(){return this.url=`${this.protocol}://${this.host}${this.port?":"+this.port:""}`,this.url}}class At extends Lh{constructor(e){super(e)}queryPOIByRegion(e){const t=`${this.url}/api/t-gis/gw/COMMON/POI/ByRegion`,{geom:i,pageNo:r=1,pageSize:s=10}=e;return new Promise((o,l)=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({geom:i,page:r,limit:s})}).then(u=>u.json()).then(u=>{var w;let{code:g,msg:p,data:y}=u;o({code:g,message:p,data:y?{pageNo:y==null?void 0:y.pageNo,pageSize:y==null?void 0:y.pageSize,total:y==null?void 0:y.total,list:(w=y==null?void 0:y.list)==null?void 0:w.map(_=>({id:_.entityId,name:_.name,typeName:_.nameLarge,typeCode:_.codeLarge,viceTypeName:_.nameMedium,viceTypeCode:_.codeMedium,subTypeName:_.nameSmall,subTypeCode:_.codeSmall,geometry:_.location}))}:null})}).catch(u=>l(u))})}static queryPOIByRegion(e,t){return new At(t).queryPOIByRegion(e)}queryPOITypesByRegion(e){const t=`${this.url}/api/t-gis/gw/COMMON/poiSearch/types`,{geom:i,pageNo:r=1,pageSize:s=10}=e;return new Promise((o,l)=>{fetch(t,{method:"GET",headers:{"Content-Type":"application/json"},body:JSON.stringify({geom:i,page:r,limit:s})}).then(u=>u.json()).then(u=>{let{code:g,msg:p,data:y}=u;o({code:g,message:p,data:y})}).catch(u=>l(u))})}static queryPOITypesByRegion(e,t){return new At(t).queryPOITypesByRegion(e)}queryPOITypesAndNumByRegion(e){const t=`${this.url}/api/t-gis/gw/COMMON/poiSearch/stat`,{geom:i,pageNo:r=1,pageSize:s=10}=e;return new Promise((o,l)=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({geom:i,page:r,limit:s})}).then(u=>u.json()).then(u=>{var w,_,E;let{code:g,msg:p,data:y}=u;o({code:g,message:p,data:y?{list:(_=(w=y==null?void 0:y.quantity)==null?void 0:w.stat)==null?void 0:_.map(I=>({name:I.label,num:I.num})),total:(E=y==null?void 0:y.quantity)==null?void 0:E.sum}:null})}).catch(u=>l(u))})}static queryPOITypesAndNumByRegion(e,t){return new At(t).queryPOITypesAndNumByRegion(e)}queryPOIListByRegion(e){const t=`${this.url}/api/t-gis/gw/COMMON/POI/ByRegion`,{geom:i,pageNo:r=1,pageSize:s=10}=e;return new Promise((o,l)=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({geom:i,page:r,limit:s})}).then(u=>u.json()).then(u=>{var w;let{code:g,msg:p,data:y}=u;o({code:g,message:p,data:y?{pageNo:y==null?void 0:y.pageNo,pageSize:y==null?void 0:y.pageSize,total:y==null?void 0:y.total,list:(w=y==null?void 0:y.list)==null?void 0:w.map(_=>({id:_.entityId,name:_.name,typeName:_.nameLarge,typeCode:_.codeLarge,viceTypeName:_.nameMedium,viceTypeCode:_.codeMedium,subTypeName:_.nameSmall,subTypeCode:_.codeSmall,geometry:_.location}))}:null})}).catch(u=>l(u))})}static queryPOIListByRegion(e,t){return new At(t).queryPOIListByRegion(e)}regeo(e){const{lng:t,lat:i,pageNo:r=1,pageSize:s=10,...o}=e!=null?e:{},l=new URLSearchParams({pageNum:r,pageSize:s,...o}).toString(),u=`${this.url}/api/t-gis/gw/COMMON/query/InvAddrMatch/${t}/${i}?${l}`;return new Promise((g,p)=>{fetch(u).then(y=>y.json()).then(y=>{const{result:w,status:_}=y;g({code:_==="ok"?200:-1,message:_==="ok"?"\u8BF7\u6C42\u6210\u529F":"\u8BF7\u6C42\u5931\u8D25",data:w})}).catch(y=>p(y))})}static regeo(e,t){return new At(t).regeo(e)}geo(e){const{address:t}=e,i=new URLSearchParams({query:encodeURIComponent(t),region:440300,ak:"ebf48ecaa1fd436fa3d40c4600aa051f"}),r=`${this.url}/api/t-gis/gw/COMMON/addrMatch?${i.toString()}`;return new Promise((s,o)=>{fetch(r).then(l=>l.json()).then(l=>{const{status:u,message:g,total:p,result:y}=l;s({code:u===0?200:-1,message:g,data:{list:y==null?void 0:y.map(w=>({id:w.std_addr_id,address:w.address,name:w.name,shortName:w.key_prefix,nickName:w.alias,code:w.adcode,...w.location})),total:p}})}).catch(l=>o(l))})}static geo(e,t){return new At(t).geo(e)}search(e){const{address:t,pageNo:i=1,pageSize:r=10}=e,s=new URLSearchParams({keyword:t,pageNum:i,pageSize:r}),o=`${this.url}/api/t-gis/gw/COMMON/search/prev?${s.toString()}`;return new Promise((l,u)=>{fetch(o).then(g=>g.json()).then(g=>{const{code:p,msg:y,data:w}=g;l({code:p,message:y,data:w==null?void 0:w.map(_=>({id:_.entityId,name:_.name,address:_.address,typeName:_.type,geometry:_.geo}))})}).catch(g=>u(g))})}static search(e,t){return new At(t).search(e)}}class Qn extends Lh{constructor(e){super({...e,port:9082})}geo(e){const t=new URLSearchParams;t.append("ds",`{"keyWord":"${e==null?void 0:e.address}"}`),t.append("tk",e==null?void 0:e.tk);const i=this.url+`/geocoder?${t.toString()}`;return new Promise((r,s)=>{fetch(i).then(o=>o.json()).then(o=>{const{location:{keyWord:l,level:u,lon:g,lat:p}}=o;r({address:l,typeName:u,lng:g,lat:p})}).catch(o=>s(o))})}regeo(e){const t=new URLSearchParams;t.append("postStr",`{'lon':${e==null?void 0:e.lng},'lat':${e==null?void 0:e.lat},'ver':1}`),t.append("type","geocode"),t.append("tk",e==null?void 0:e.tk);const i=this.url+`/geocoder?${t.toString()}`;return new Promise((r,s)=>{fetch(i).then(o=>o.json()).then(o=>{const{formatted_address:l,addressComponent:{address:u,address_distince:g,address_position:p,nation:y,province:w,city:_,county:E,road:I,poi:x}}=o.result;r({fullAddress:l,address:u,distince:g,direction:p,country:y,province:w,city:_,district:E,street:I,name:x})}).catch(o=>s(o))})}static geo(e,t){return new Qn(t).geo(e)}static regeo(e,t){return new Qn(t).regeo(e)}}const wp=Object.freeze(Object.defineProperty({__proto__:null,TGisService:At,TianDiService:Qn},Symbol.toStringTag,{value:"Module"}));function q(){this._entities=new zo(this),this._camera=new Uo(this)}q.prototype._addLayer=function(n){return this.map.addLayer(n)},q.prototype._removeLayer=function(n){return this.map.removeLayer(n)},q.prototype._getLayerById=function(n){return this.map.getLayers().getArray().find(e=>e.get("id")===n)},q.prototype._removeLayerById=function(n){const e=this._getLayerById(n),t=Ge(e);return t&&this._removeLayer(e),t},q.prototype.updateSize=function(){this.map.updateSize()},Object.defineProperties(q.prototype,{entities:{get(){return this._entities}},camera:{get(){return this._camera}}}),q.prototype.createMap=function(n){var l;n.render==null&&(n.render=!1,n.renderbeg=null,n.rndrender=null),this.id=n.id,this.legends=[],this.MorepopupList=[];const e=(l=ol.control.defaults.defaults)!=null?l:ol.control.defaults;var t=new ol.Map({target:n.id,layers:[...n.layers||[]],view:new ol.View({center:n.center,zoom:n.zoom,projection:"EPSG:4326",extent:[-180,-90,180,90],minZoom:1,maxZoom:22}),controls:e(n.controls)});this.map=t,this.popup=null,this.x_PI=52.35987755982988,this.PI=3.141592653589793,this.a=6378245,this.ee=.006693421622965943;var i=new ol.control.MousePosition({coordinateFormat:new ol.coordinate.createStringXY(2),projection:"EPSG:4326",target:document.getElementById("coordinate")});t.addControl(i),t.on("pointermove",function(u){var g=t.getEventPixel(u.originalEvent),p=t.hasFeatureAtPixel(g);t.getTargetElement().style.cursor=p?"pointer":""});var r=this;if(this.changzooms=function(){try{var u=t.getLayers();u.forEach(S=>{var b=S,F=b.getSource();if(F&&F.getFeatures){var B=F.getFeatures();if(B.length>0)for(var X=0;X<B.length;X++){var Y=B[X],j=Y.getStyle();if(j&&j instanceof ol.style.Style){var J=j.getImage();J instanceof ol.style.Icon}}}})}catch(S){console.log(S)}if(r.noclusterLayers.length>0)for(var g=0;g<r.noclusterLayers.length;g++){var p=r.noclusterLayers[g],y=p.getSource(),w=y.getFeatures(),_=1;if(w.length>0){var E=w[0],I=E.get("option");I.clusterstyle&&I.clusterstyle.cancelzoom&&(_=I.clusterstyle.cancelzoom)}var x=r.getCurrentZoomLevel();if(x<=_){p.set("cancelcluster",!1);var T=p.get("clustersource");p.setSource(T),r.noclusterLayers.splice(g,1),g--}}},t.getView().on("change:resolution",this.changzooms),n.render){if(n.renderbeg!=null)var s=t.on("precompose",function(u){n.renderbeg(),t.un(s.type,s.listener)});if(n.renderbeg!=null)var o=t.on("postrender",function(u){n.rndrender(),t.un(o.type,o.listener)})}this.wmtsobj={},this.noclusterLayers=[],this.legendCollection={},this.event_map={},_p(t)};function _p(n){let e=[];n.on("pointermove",t=>{n.hasFeatureAtPixel(t.pixel)?n.forEachFeatureAtPixel(t.pixel,i=>{e.findIndex(r=>r.get("id")===i.get("id"))<0&&(e.push(i),i.dispatchEvent({type:"mouseover",event:t}))}):e.length>0&&(e.forEach(i=>i.dispatchEvent({type:"mouseout",event:t})),e=[])}),n.on("click",t=>{n.hasFeatureAtPixel(t.pixel)&&n.forEachFeatureAtPixel(t.pixel,i=>{i&&i.dispatchEvent({type:"click",event:t})})})}q.prototype.setViewport=function(n){const e=this.map.getView(),t=ol.extent.boundingExtent(n);e.fit(t,this.map.getSize())},q.prototype.singleclick=function(){var n;return this.map.on("singleclick",function(e){console.log(e.coordinate),n=e.coordinate}),n},q.prototype.setMapCenter=function(n){this.map.getView().animate({center:n.center,zoom:9,duration:1e3})},q.prototype.gpsPositioning=function(n){this.map.getView().animate({center:n.center,zoom:15,duration:1e3})},q.prototype.addLayer2=function(n){var e;if(n.url.indexOf("iserver")!=-1)if(n.type=="WMTS"||n.type=="wmts"){for(var t=new Array(17),i=new Array(17),r=0;r<17;++r)t[r]=156543.033928041/Math.pow(2,r),i[r]=r;e=new ol.source.WMTS({url:n.url,layer:n.layer,matrixSet:n.matrixSet,format:n.format,tileGrid:new ol.tilegrid.WMTS({origin:[-20037508342787e-6,20037508342787e-6],extent:[-20037508342787e-6,-20037508342787e-6,20037508342787e-6,20037508342787e-6],tileSize:[256,256],origin:[-180,90],resolutions:t,matrixIds:i}),style:"default"})}else n.type=="WFS"||n.type=="wfs";else{var s=["EPSG:4490:0","EPSG:4490:1","EPSG:4490:2","EPSG:4490:3","EPSG:4490:4","EPSG:4490:5","EPSG:4490:6","EPSG:4490:7","EPSG:4490:8","EPSG:4490:9","EPSG:4490:10"],t=[.001373291015625,.0006866455078125,.0003433227539063,.0001716613769531,858306884766e-16,429153442383e-16,214576721191e-16,107288360596e-16,53644180298e-16,26822090149e-16,13411045074e-16];if(n.projection!=null)var o=new ol.proj.Projection(n.projection);if(n.type=="WMTS"||n.type=="wmts")e=new ol.source.WMTS({url:n.url,layer:n.layer,matrixSet:n.projection.code,format:n.format,projection:o,tileGrid:new ol.tilegrid.WMTS({tileSize:[256,256],origin:[-180,90],resolutions:t,matrixIds:s}),style:"",wrapX:!0,tileLoadFunction:function(p,y){var w=new XMLHttpRequest;w.responseType="blob",w.addEventListener("loadend",function(_){var E=this.response;E!==void 0?p.getImage().src=URL.createObjectURL(E):p.setState(ol.TileState.ERROR)}),w.addEventListener("error",function(){p.setState(ol.TileState.ERROR)}),w.open("get",y),w.setRequestHeader("szvsud-license-key","CVz440zV4BE7fCSznRZvnE6J/SCKlMDbCjGBRD9XtmwvQE2h+NK4qJI/0feODJfIrU/Cb6BQ2ZgMhkzEJUARAQ=="),w.send()}});else if(n.type=="WFS"||n.type=="wfs"){var l={service:"WFS",version:"1.0.0",request:"GetFeature",typeName:n.typename,outputFormat:"application/json"};return new Promise((p,y)=>{$.ajax({url:n.url,data:$.param(l),type:"GET",beforeSend:function(w){w.setRequestHeader("szvsud-license-key","CVz440zV4BE7fCSznRZvnE6J/SCKlMDbCjGBRD9XtmwvQE2h+NK4qJI/0feODJfIrU/Cb6BQ2ZgMhkzEJUARAQ==")},dataType:"json",success:function(w){p(w)},error:function(w){p(w)}})})}else(n.type=="MapServer"||n.type=="mapserver")&&(e=new ol.source.TileArcGISRest({url:n.url,layer:n.layer,projection:o,tileGrid:new ol.tilegrid.TileGrid({tileSize:[256,256],origin:[-180,90],resolutions:t}),wrapX:!0,tileLoadFunction:function(p,y){var w=new XMLHttpRequest;w.responseType="blob",w.addEventListener("loadend",function(_){var E=this.response;E!==void 0?p.getImage().src=URL.createObjectURL(E):p.setState(ol.TileState.ERROR)}),w.addEventListener("error",function(){p.setState(ol.TileState.ERROR)}),w.open("get",y),w.setRequestHeader("szvsud-license-key","CVz440zV4BE7fCSznRZvnE6J/SCKlMDbCjGBRD9XtmwvQE2h+NK4qJI/0feODJfIrU/Cb6BQ2ZgMhkzEJUARAQ=="),w.send()}}))}var u=new ol.layer.Tile({name:n.layer==null?n.name:n.layer,source:e});if(this.map!=null){this.map.addLayer(u);let g=new ol.View({projection:o,center:n.center,zoom:n.zoom});this.map.setView(g),this.map.on("precompose",function(p){p.context}.bind(this))}else console.log("======\u5730\u56FE\u672A\u521D\u59CB\u5316!======")},q.prototype.setlayerVisible=function(n){this.map.getLayers().getArray().forEach(function(t){if(n.name==t.get("name")){t.setVisible(n.bol);return}})},q.prototype.flyLineGraph=function(n){new MoveLine(this.map,n)},q.prototype.addlineLayer=function(n){for(var e=new Array(17),t=new Array(17),i=0;i<17;++i)e[i]=156543.033928041/Math.pow(2,i),t[i]=i;for(var r=ol.proj.get("EPSG:4326"),s=new Array(18),o=r.getExtent(),l=new Array(17),u=ol.extent.getWidth(o)/256,i=1;i<18;++i)s[i]=u/Math.pow(2,i),l[i]=i;var g=new ol.source.WMTS({url:"http://172.17.203.2:8090/iserver/services/map-TGIS/wmts100",layer:"LINK_MARS",matrixSet:"Custom_LINK_MARS",format:"image/png",tileGrid:new ol.tilegrid.WMTS({origin:[22.837045517368217,113.75014580129057],resolutions:s,matrixIds:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]}),style:"default",projection:r,wrapX:!0}),p=new ol.layer.Tile({source:g});this.map.addLayer(p)},q.prototype.zoomIn=function(){var n=this.map.getView(),e=n.getZoom();n.setZoom(e+1)},q.prototype.zoomOut=function(){var n=this.map.getView(),e=n.getZoom();n.setZoom(e-1)},q.prototype.setZoomLevel=function(n){var e=this.map.getView();n.duration?e.animate({center:n.center,zoom:n.zoom,duration:n.duration*1e3}):(e.setCenter(n.center),e.setZoom(n.zoom))},q.prototype.getCurrentZoomLevel=function(){var n=this.map.getView(),e=n.getZoom();return e},q.prototype.getmapcenter=function(){var n=this.map.getView(),e=n.getCenter();return e},q.prototype.rectification=function(n){let e=JSON.stringify({pointList:n.pointList,speed:n.speed,error:n.error});$.ajax({url:"http://139.9.191.233:8080/api/web/rectificationBatchMatch",type:"post",dataType:"json",timeout:5e6,contentType:"application/json",data:e,success:function(t){if(t.message=="\u8BF7\u6C42\u6210\u529F"){let r=[];for(var i=0;i<t.data.length;i++){const s=[],o=t.data[i].split(",");s.push(parseFloat(o[0]),parseFloat(o[1])),r.push(s)}t.message}},error:function(t){t.message,t.data}})},q.prototype.createdynamicline=function(n){var e=this,t=new ol.style.Style({stroke:new ol.style.Stroke({color:n.color,width:n.width})});const i=new ol.geom.LineString(n.pointList);var r=new ol.Feature({geometry:i,finished:!1});window.setTimeout(function(){r.set("start",new Date().getTime()),s.addFeature(r)},1500);var s=new ol.source.Vector({wrapX:!1}),o=new ol.layer.Vector({className:n.layername,source:s,style:function(y){return y.get("finished")?t:null}});this.map.addLayer(o);var l=.1;let u=y=>{let w=y.vectorContext;y.frameState,w.setStyle(t);let _=s.getFeatures();if(_.length>0){let E=_[0];if(!E.get("finished")){let I=E.getGeometry().getCoordinates();l=l+.1;let x=l;x>=I.length&&E.set("finished",!0);let T=Math.min(x,I.length),S=new ol.geom.LineString(I.slice(0,T));w.drawGeometry(S),e.map.render()}}};this.map.on("postcompose",u);var g=ol.extent.boundingExtent(n.pointList),p=ol.extent.getCenter(g);this.map.getView().animate({center:p,zoom:9,duration:1e3})},q.prototype.removedynamicline=function(n){let e=this.map.getLayers().getArray();for(var t=0;t<e.length;t++)e[t].get("className")==n.layername&&this.map.removeLayer(e[t])};var dn=null;let ps=[];var fn=null,Vo,gn;q.prototype.addPlotting=function(n){let e=this;this.map.removeInteraction(dn),this.map.removeInteraction(Vo),xp(n,e)},q.prototype.addVector=function(){gn=new ol.source.Vector({wrapX:!1});let n=new ol.layer.Vector({className:"layer1",source:gn});this.map.addLayer(n),ps.push(n)};function xp(n,e){n.layername;const t=n.circleradius||5,i=n.circlercolor||"#ffcc33",r=n.strokecolor||"#ffcc33",s=n.strokewidth||2,o=n.fillcolor||"rgba(255, 255, 255, 0.2)";n.type=="Box"?dn=new ol.interaction.Draw({source:gn,type:"Circle",freehand:!1,geometryFunction:ol.interaction.Draw.createBox(),style:new ol.style.Style({image:new ol.style.Circle({radius:t,fill:new ol.style.Fill({color:i})}),stroke:new ol.style.Stroke({color:r,width:s}),fill:new ol.style.Fill({color:o})})}):dn=new ol.interaction.Draw({source:gn,type:n.type,style:new ol.style.Style({image:new ol.style.Circle({radius:t,fill:new ol.style.Fill({color:i})}),stroke:new ol.style.Stroke({color:r,width:s}),fill:new ol.style.Fill({color:o})})}),dn!=null&&e.map.addInteraction(dn),Vo=new ol.interaction.Snap({source:gn}),e.map.addInteraction(Vo)}q.prototype.closePlotting=function(){this.map.removeInteraction(dn)},q.prototype.removePlotting=function(){for(var n=0;n<ps.length;n++){const e=ps[n];this.map.removeLayer(e)}ps=[]},q.prototype.revampPlotting=function(){fn==null&&(fn=new ol.interaction.Modify({source:gn}),this.map.addInteraction(fn))},q.prototype.removerevampPlotting=function(){fn!=null&&(this.map.removeInteraction(fn),fn=null)},q.prototype.selctFeatures=function(){let n;return this.map.getLayers().forEach(function(t){const r=t.getSource().getFeatures();n=new ol.format.GeoJSON().writeFeatures(r)}),n},q.prototype.electronicFenceGetList=function(n){var e=void 0;if(n){let r=function(s){const o=JSON.parse(s);o.code==0?e=o:console.log("\u63A5\u53E3\u5F02\u5E38\uFF1A"+o)};const t="http://192.168.3.136:6060/api/web/electronicfence/getList?current="+n.current+"&size="+n.size,i=new XMLHttpRequest;i.onreadystatechange=function(){i.readyState==4&&i.status==200&&r(i.responseText)},i.open("post",t,!1),i.send()}return e},q.prototype.electronicFenceSave=function(n){var e=void 0;if(n){let s=function(o){const l=JSON.parse(o);l.code==0?e=l:console.log("\u63A5\u53E3\u5F02\u5E38\uFF1A"+l)};const t="http://192.168.3.136:6060/api/web/electronicfence/save";let i=new FormData;const r=new XMLHttpRequest;i.append("createBy",n.createBy),i.append("id",n.id),i.append("ip",n.ip),i.append("name",n.name),i.append("vector",n.vector),r.onreadystatechange=function(){r.readyState==4&&r.status==200&&s(r.responseText)},r.open("post",t,!1),r.send(i)}return e;var e},q.prototype.electronicFenceUpdate=function(n){var e=void 0;if(n){let s=function(o){const l=JSON.parse(o);l.code==0?e=l:console.log("\u63A5\u53E3\u5F02\u5E38\uFF1A"+l)};const t="http://192.168.3.136:6060/api/web/electronicfence/update";let i=new FormData;const r=new XMLHttpRequest;i.append("createBy",n.createBy),i.append("id",n.id),i.append("ip",n.ip),i.append("name",n.name),i.append("vector",n.vector),r.onreadystatechange=function(){r.readyState==4&&r.status==200&&s(r.responseText)},r.open("post",t,!1),r.withCredentials=!0,r.send(i)}return e},q.prototype.electronicFenceDeleteId=function(n){var e=void 0;if(n){let r=function(s){const o=JSON.parse(s);o.code==0?e=o:console.log("\u63A5\u53E3\u5F02\u5E38\uFF1A"+o)};const t="http://192.168.3.136:6060/api/web/electronicfence/delete?ids="+n,i=new XMLHttpRequest;i.onreadystatechange=function(){i.readyState==4&&i.status==200&&r(i.responseText)},i.open("post",t,!1),i.send()}return e},q.prototype.addMarker=function(n){var e=this,t=new ol.Feature({type:"icon",geometry:new ol.geom.Point(n.lnglat),id:n.id,name:n.id,delimitval:n.delimitval});n.pixelOffset&&n.pixelOffset.length&&(n.pixelOffset=n.pixelOffset.map(y=>y*-1));var i;if(n.image==null)i={image:new ol.style.Circle({radius:n.radius,fill:new ol.style.Fill({color:n.color})})};else{var r={src:n.image,scale:n.scale*e.getCurrentZoomLevel()/22,anchor:n.pixelOffset,anchorXUnits:"pixels",anchorYUnits:"pixels"};i={image:new ol.style.Icon(r)},r.newscale=n.scale,t.set("iconstyle",r)}var s=new ol.style.Style(i);t.setStyle(s);var o=turf.multiPoint([n.lnglat]),l=void 0;if(n.bufferobj&&o&&n.bufferobj.bufferradius){var u={bufferradius:n.bufferobj.bufferradius,geometry:o,fillcolor:n.bufferobj.fillcolor,fillalpha:n.bufferobj.fillalpha,linecolor:n.bufferobj.linecolor,linewidth:n.bufferobj.linewidth,id:n.id,zIndex:n.zIndex-1};l=this.bufferpolygon(u)}var g=[];l&&g.push(l),g.push(t);var p=new ol.layer.Vector({id:n.id,source:new ol.source.Vector({id:n.id,name:n.id,features:g}),zIndex:n.zIndex});return p.set("customTags",{type:"marker"}),this.map.addLayer(p),p},q.prototype.removeMarker=function(n){if(n instanceof ol.layer.Vector)return this.map.removeLayer(n);this.map.getLayers().getArray().forEach(t=>{const i=t.get("id"),r=t.get("customTags");i===n.id&&r&&r.type==="marker"&&this.map.removeLayer(t)})},q.prototype.getLayerById=function(n){return this.map.getLayers().getArray().find(e=>e.get("id")===n)},q.prototype.removeLayer=function(n){return this.map.removeLayer(n)},q.prototype.removeLayerById=function(n){const e=this.getLayerById(n),t=Ge(e);return t&&this.removeLayer(e),t},q.prototype.addbatchMarkers=function(n){for(var e=n.markers,t=[],i=0;i<e.length;i++){var r=e[i].name,s=e[i].position,o=e[i].image,l=e[i].scale,u=e[i].radius||2,g=e[i].color||"#FF0000";if(e[i].clusterstyle){if(e[i].clusterstyle.cluster){var p={position:e[i].position,layerGroupid:n.layerGroupid,zIndex:n.zIndex,name:e[i].name,image:e[i].image,scale:e[i].scale,clusterstyle:e[i].clusterstyle};return this.legendCollection[n.layerGroupid]=n,this.addclusterMarker(p)}return}for(var y=0;y<s.length;y++){var w=s[y].id,_=s[y].bufferobj,E=new ol.Feature({id:w,type:"Marker",layername:n.layerGroupid,geometry:new ol.geom.Point(s[y].lnglat),delimitval:s[y].delimitval,typename:r}),I;if(o==null)I={image:new ol.style.Circle({radius:u,fill:new ol.style.Fill({color:g})})};else{var x={src:o,scale:l};I={image:new ol.style.Icon(x)},x.newscale=l,E.set("iconstyle",x)}var T=new ol.style.Style(I);E.setStyle(T);var S=turf.multiPoint([s[y].lnglat]);if(_&&S){_.geometry=S,_.id=w;var b=this.bufferpolygon(_);t.push(b)}t.push(E)}}var F=new ol.layer.Vector({id:n.layerGroupid,source:new ol.source.Vector({features:t}),zIndex:n.zIndex||1,renderBuffer:n.renderBuffer||5e3});return this.map.addLayer(F),this.legendCollection[n.layerGroupid]=n,F},q.prototype.updataMark=function(n){for(var e=0;e<n.length;e++){var t=n[e];if(t.id){var i=this.getlayerbyid(t.id);if(i){var r=this.setimagestyle(t);i.setStyle(r),t.zIndex&&i.setZIndex(t.zIndex)}}else if(t.layerGroupid){var s=this.getlayerbyid(t.layerGroupid);if(s){for(var o=t.featureids,l=0;l<o.length;l++)for(var u=o[l],g=u.id,p=this.getfeaturebyid(s,g),y=0;y<p.length;y++){var r=this.setimagestyle(u,p[y]);p[y].setStyle(r)}t.zIndex&&s.setZIndex(t.zIndex)}}}},q.prototype.setimagestyle=function(n,e){var t=n.image,i=n.scale,r=n.radius||2,s=n.color||"#FF0000",o=void 0,l=n.clusterstyle;if(t==null)o={image:new ol.style.Circle({radius:r,fill:new ol.style.Fill({color:s})})};else{var u=i*this.getCurrentZoomLevel()/22;l&&(u=i);var g={src:t,scale:u};o={image:new ol.style.Icon(g)},e&&(g.newscale=i,e.set("iconstyle",g))}var p=new ol.style.Style(o);return p},q.prototype.addclusterMarker=function(n){for(var e=[],t=n.position,i=0;i<t.length;i++){var r=t[i],s=r.id;r.bufferobj;var o=new ol.Feature({id:s,type:"Marker",layername:n.layerGroupid,geometry:new ol.geom.Point(r.lnglat),delimitval:r.delimitval,option:{clusterstyle:n.clusterstyle,image:n.image,layerGroupid:n.layerGroupid,name:n.name,scale:n.scale},typename:r.name}),l=this.setimagestyle(n,o);o.setStyle(l),turf.multiPoint([r.lnglat]),e.push(o)}const u=new ol.source.Vector({features:e}),g=new ol.source.Cluster({distance:parseInt(n.clusterstyle.distance||20),minDistance:parseInt(0),source:u,option:{name:"\u8BD5\u8BD5"}}),p={};var y=this,w=n.clusterstyle.bordercolor||"#FFF",_=w.colorRgb(n.clusterstyle.borderalpha||1),E=n.clusterstyle.fillcolor||"#00CCFF",I=E.colorRgb(n.clusterstyle.fillalpha||1);const x=new ol.layer.Vector({zIndex:n.zIndex||1,id:n.layerGroupid,source:g,cluster:!0,hsource:u,clustersource:g,style:function(T){const S=T.get("features")?T.get("features").length:0;let b=p[S];var F=T.get("features")?T.get("features")[0]:void 0;if(!F)return b;var B=F.get("option"),X=y.getCurrentZoomLevel(),Y=y.getlayerbyid(B.layerGroupid),j=Y.get("cancelcluster");if(X>B.clusterstyle.cancelzoom){if(!j){Y.set("cancelcluster",!0);var J=Y.get("hsource");Y.setSource(J),y.noclusterLayers.push(Y)}}else S==1&&!b&&(b=y.setimagestyle(B),p[S]=b),!b&&S!=1&&(b=new ol.style.Style({image:new ol.style.Circle({radius:B.clusterstyle.radius||5,stroke:new ol.style.Stroke({color:_,width:B.clusterstyle.borderwidth||1}),fill:new ol.style.Fill({color:I})}),text:new ol.style.Text({text:S.toString(),fill:new ol.style.Fill({color:B.clusterstyle.textcolor||"#FFFFFF"}),font:B.clusterstyle.textfont||""})}),p[S]=b);return b}});return this.map.addLayer(x),x},q.prototype.addhtmlpoint=function(n){for(var e=0;e<n.length;e++){var t=n[e],i=this.createDiv(t),r=new ol.Overlay({id:t.id,position:t.lnglat,positioning:"bottom-center",offset:t.offset,element:i,stopEvent:!1,autoPan:t.autoPan||!0,autoPanAnimation:{duration:250}});this.map.addOverlay(r)}},q.prototype.deletehtmlpointbyid=function(n){var e=this.map.getOverlayById(n);return e?(this.map.removeOverlay(e),!0):!1},q.prototype.addtextmark=function(n){for(var e=n.markers,t=[],i=0;i<e.length;i++){var r=e[i],s=new ol.Feature({geometry:new ol.geom.Point(r.lnglat),id:r.id,type:"text",name:"\u6587\u5B57\u6807\u6CE8",delimitval:r.delimitval,typename:r.name}),o=new ol.style.Stroke;r.textside&&(o=new ol.style.Stroke({color:r.textside.color.colorRgb(r.textside.alpha),width:r.textside.width}));var l=new ol.style.Stroke;r.backgroundside&&(l=new ol.style.Stroke({color:r.backgroundside.color.colorRgb(r.backgroundside.alpha),width:r.backgroundside.width}));var u="#FFFFFF".colorRgb(0);r.background&&(r.background.alpha||(r.background.alpha=0),r.background.color||(r.background.color="#FFFFFF"),u=r.background.color.colorRgb(r.background.alpha));var g=r.offset||[0,0],p=new ol.style.Style({text:new ol.style.Text({textAlign:"center",textBaseline:"middle",font:r.textfont||"",text:r.textname,fill:new ol.style.Fill({color:r.textcolor}),offsetX:g[0],offsetY:g[1],stroke:o,padding:r.padding||[0,0,0,0],scale:r.scale||1,backgroundFill:new ol.style.Fill({color:u}),backgroundStroke:l})});s.setStyle(p),t.push(s)}if(t.length>0){var y=new ol.layer.Vector({id:n.layerGroupid,source:new ol.source.Vector({id:n.layerGroupid,features:t}),zIndex:n.zIndex||1});this.map.addLayer(y),this.legendCollection[r.layerGroupid]=r}},q.prototype.showLayer=function(n,e){for(var t=0;t<n.length;t++){var i=n[t],r=this.getlayerbyid(i.layerGroupid),s=void 0;if(r&&i.featureids){var o=r.get("shadowinfo");if(o){for(var l=0;l<i.featureids.length;l++){var u=i.featureids[l],g=this.getlayerbyid(i.layerGroupid+u);g&&g.setVisible(e)}continue}i.featureids.length>0&&(s=this.getfeaturebyid(r,i.featureids))}if(r&&s)for(var p=0;p<s.length;p++){var y=r.get("cluster");if(!y)if(e){var w=s[p],_=w.get("originalstyle");w.setStyle(_)}else{var w=s[p],_=w.getStyle();w.set("originalstyle",_),w.setStyle(this.settransparentStyle())}}else if(r){var o=r.get("shadowinfo");if(o){this.showpolygonlayer(i.layerGroupid,e);continue}r.setVisible(e)}}var E=Rh(this.map,i);E.forEach(I=>{I.setVisible(e)})},q.prototype.showpolygonlayer=function(n,e){for(var t=this.map.getLayers(),i=0;i<t.getLength();i++){var r=t.item(i),s=r.get("id");s&&s.includes(n)&&r.setVisible(e)}},q.prototype.settransparentStyle=function(){var n=new ol.style.Style({fill:new ol.style.Fill({color:[0,0,0,0]}),stroke:new ol.style.Stroke({color:[0,0,0,0],width:.1}),text:new ol.style.Text({font:"1px Verdana,sans-serif",text:"",fill:new ol.style.Fill({color:[0,0,0,0]}),backgroundFill:new ol.style.Fill({color:[0,0,0,0]}),backgroundStroke:new ol.style.Stroke({color:[0,0,0,0],width:.1})})});return n},q.prototype.deletelayerFeature=function(n){for(var e=0;e<n.length;e++){var t=n[e],i=this.getlayerbyid(t.layerGroupid),r=void 0,s=void 0;if(i&&t.featureids){var o=i.get("shadowinfo");if(o){for(var l=0;l<t.featureids.length;l++){var u=t.featureids[l],g=this.getlayerbyid(t.layerGroupid+u);g&&(g.getSource().clear(),this.map.removeLayer(g))}continue}t.featureids.length>0&&(r=this.getfeaturebyid(i,t.featureids))}if(i&&r)for(var p=0;p<r.length;p++){var y=i.get("cluster"),s=i.get("source");if(y){var w=i.getSource();if(w){var _=w.getSource();_.removeFeature(r[p])}}else s.removeFeature(r[p])}else if(i){var o=i.get("shadowinfo");if(o){this.deltepolygonlayerbyid(t.layerGroupid);continue}i.getSource().clear(),this.map.removeLayer(i)}}},q.prototype.deltepolygonlayerbyid=function(n){var e=this.getlayerbyid(n);e&&(e.getSource().clear(),this.map.removeLayer(e),this.deltepolygonlayerbyid(n))},q.prototype.getlayerbyid=function(n){var e=void 0;if(n)for(var t=this.map.getLayers(),i=0;i<t.getLength();i++){var r=t.item(i),s=r.get("id");s&&s.includes(n)&&(e=r)}return e},q.prototype.getfeaturebyid=function(n,e){var t=n.get("cluster"),i=n.get("source"),r=n.get("id"),s=i.getFeatures(),o=[];if(t){if(e.length>0)for(var l=0;l<s.length;l++){var u=s[l],g=u.values_;if(g){var p=g.features;if(p)for(var y=0;y<p.length;y++)for(var w=p[y],_=w.get("id"),E=w.get("type"),I=0;I<e.length;I++){var x=e[I];x==_&&o.push(w),x+"bu!ffer"==_&&o.push(w),E=="polygon"&&_.includes(r)&&_.includes(x)&&o.push(w),!_&&u.option&&u.option.nameid==x&&o.push(w)}}}}else if(e.length>0)for(var l=0;l<s.length;l++)for(var u=s[l],_=u.get("id"),E=u.get("type"),I=0;I<e.length;I++){var x=e[I];x==_&&o.push(u),x+"bu!ffer"==_&&o.push(u),E=="polygon"&&_.includes(r)&&_.includes(x)&&o.push(u),!_&&u.option&&u.option.nameid==x&&o.push(u)}return o},String.prototype.colorRgb=function(n){var e=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,t=this.toLowerCase();if(t&&e.test(t)){if(t.length===4){for(var i="#",r=1;r<4;r+=1)i+=t.slice(r,r+1).concat(t.slice(r,r+1));t=i}for(var s=[],r=1;r<7;r+=2)s.push(parseInt("0x"+t.slice(r,r+2)));return s.push(n),s}else return t},q.prototype.removeTextmark=function(n){var e=this.getlayerbyid(n.id);e&&this.map.removeLayer(e)},q.prototype.deletetextmark=function(n){var e=this.map.getOverlayById(n);return e?(this.map.removeOverlay(e),!0):!1},q.prototype.createDiv=function(n){var e=document.createElement("div");return e.className=n.divclass,e.innerHTML=n.divHTMLinfo,e.setAttribute("id",n.id),e},q.prototype.updateLayerzindex=function(n){for(var e=0;e<n.length;e++){var t=n[e];if(t.layerGroupid){var i=this.getlayerbyid(t.layerGroupid);i?i.setZIndex(t.zIndex):console.log("\u65E0\u8BE5\u56FE\u5C42")}}},q.prototype.searchAdress=function(n){(!n.r||n.r==" ")&&(n.r=500),n.x&&n.y&&n.type&&n.url&&new Promise(function(e,t){const i=""+n.url+"/"+n.x+"/"+n.y+"?r="+n.r+"&type="+n.type,r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==4&&r.status==200&&s(r.responseText)},r.open("GET",i,!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("szvsud-license-key","CVz440zV4BE7fCSznRZvnE6J/SCKlMDbCjGBRD9XtmwvQE2h+NK4qJI/0feODJfIrU/Cb6BQ2ZgMhkzEJUARAQ=="),r.withCredentials=!0,r.send();function s(o){const l=JSON.parse(o);if(l.status==="ok"){console.log("\u5730\u5740\u641C\u7D22\u7ED3\u679C\uFF1A"+o);for(let u of l.result)u.setStyle(new ol.style.Style({fill:new ol.style.Fill({color:"yellow"}),text:new ol.style.Text({font:"13px Microsoft YaHei",text:u.full_name,fill:new ol.style.Fill({color:"#666"})})}))}}})},q.prototype.trackLigature=function(n,e){for(var t=n.lines,i=[],r=0;r<t.length;r++)for(var s=t[r],o=s.lnglats,l=0;l<o.length;l++){var u=o[l],g=u.id,p=u.linelnglat;if(u.startcurve){var y=turf.lineString(p),w=turf.bezierSpline(y);p=w.geometry.coordinates}var _=new ol.Feature({id:g,type:"line",name:u.name,layername:n.layerGroupid,geometry:new ol.geom.LineString(p),delimitval:u.delimitval,typename:u.name,parentsname:s.name});_.setStyle(new ol.style.Style({stroke:new ol.style.Stroke({color:s.color,width:s.width||2})})),i.push(_);var E=turf.multiLineString([p]),I=void 0;if(u.bufferobj&&E&&u.bufferobj.bufferradius){var x={bufferradius:u.bufferobj.bufferradius,geometry:E,fillcolor:u.bufferobj.fillcolor,fillalpha:u.bufferobj.fillalpha,linecolor:u.bufferobj.linecolor,linewidth:u.bufferobj.linewidth,id:g};I=this.bufferpolygon(x)}I&&i.push(I)}var T=new ol.source.Vector({features:i}),S=new ol.layer.Vector({id:n.layerGroupid,source:T,zIndex:n.zIndex||1});this.map.addLayer(S),this.legendCollection[n.layerGroupid]=n},q.prototype.addlines=function(n,e){for(var t=n.lines,i=[],r=0;r<t.length;r++)for(var s=t[r],o=s.lnglats,l=0;l<o.length;l++){var u=o[l],g=u.id,p=u.linelnglat;if(u.startcurve){var y=turf.lineString(p),w=turf.bezierSpline(y);p=w.geometry.coordinates}var _=new ol.Feature({id:g,type:"line",name:u.name,layername:n.layerGroupid,geometry:new ol.geom.LineString(p),delimitval:u.delimitval,typename:u.name,parentsname:s.name});if(_.setStyle(new ol.style.Style({stroke:new ol.style.Stroke({color:s.color,width:s.width||2})})),u.Linedot!=null){var y=turf.lineString(p),E=turf.length(y,{units:"meters"});const X=E*(u.Linedot/100),Y=new ol.format.GeoJSON;for(let j=0;j<E;j++){var I=turf.along(y,j,{units:"meters",id:g});const J=Y.readFeature(I);J.option={nameid:g},i.push(J),j+=X}}i.push(_);var x=turf.multiLineString([p]),T=void 0;if(u.bufferobj&&x&&u.bufferobj.bufferradius){var S={bufferradius:u.bufferobj.bufferradius,geometry:x,fillcolor:u.bufferobj.fillcolor,fillalpha:u.bufferobj.fillalpha,linecolor:u.bufferobj.linecolor,linewidth:u.bufferobj.linewidth,id:g};T=this.bufferpolygon(S)}T&&i.push(T)}var b=new ol.source.Vector({features:i}),F=new ol.layer.Vector({id:n.layerGroupid,source:b,zIndex:n.zIndex||1});return this.map.addLayer(F),this.legendCollection[n.layerGroupid]=n,F},q.prototype.updataline=function(n){var e=this.getlayerbyid(n.layerGroupid);if(e){n.zIndex&&e.setZIndex(n.zIndex);for(var t=n.lines,i=0;i<t.length;i++)for(var r=t[i],s=this.getfeaturebyid(e,r.id),o=0;o<s.length;o++){var l=s[o],u=l.option,g=l.get("type");!u&&g=="line"&&l.setStyle(new ol.style.Style({stroke:new ol.style.Stroke({color:r.color,width:r.width})}))}}},q.prototype.addpolygon=function(n){for(var e=n.polygons,t=0;t<e.length;t++){var i=e[t],r=n.layerGroupid+i.id,s=new ol.Feature({id:i.id,type:"polygon",name:i.name,layername:n.layerGroupid,geometry:new ol.geom.Polygon([i.lnglats]),delimitval:i.delimitval,typename:i.name});s.setStyle(new ol.style.Style({fill:new ol.style.Fill({color:i.fillcolor.colorRgb(i.fillalpha||1)}),stroke:new ol.style.Stroke({color:i.color,width:i.width})}));var o=[];i.lnglats.push(i.lnglats[0]);var l=turf.polygon([i.lnglats]),u=void 0;if(i.bufferobj&&l&&i.bufferobj.bufferradius){var g={bufferradius:i.bufferobj.bufferradius,geometry:l,fillcolor:i.bufferobj.fillcolor,fillalpha:i.bufferobj.fillalpha,linecolor:i.bufferobj.linecolor,linewidth:i.bufferobj.linewidth,id:r};u=this.bufferpolygon(g)}u&&o.push(u),o.push(s);var p=new ol.source.Vector({features:o}),y=new ol.layer.Vector({id:r,name:i.name,color:i.color,type:"polygon",source:p,shadowinfo:i.shadowinfo||!0,zIndex:n.zIndex,fillcolor:i.fillcolor});i.shadowinfo&&(y.on("precompose",w=>{if(w.target.values_.shadowinfo){var _=w.target.values_.shadowinfo;w.context.shadowBlur=_.blur,w.context.shadowColor=_.color,w.context.shadowOffsetX=_.offset[0],w.context.shadowOffsetY=_.offset[1]}}),y.on("postcompose",w=>{w.context.shadowBlur=0,w.context.shadowColor="black"})),this.map.addLayer(y)}this.legendCollection[n.layerGroupid]=n},q.prototype.updatapolygon=function(n){for(var e=n.layerGroupid==null?"":n.layerGroupid,t=n.updatestyle,i=0;i<t.length;i++){var r=Rh(this.map,[e+t[i].id]);if(r&&r.length!=0){n.zIndex&&r[0].setZIndex(n.zIndex);var s=r[0].getSource();if(s instanceof ol.source.Vector){var o=s.getFeatures();o[0].setStyle(new ol.style.Style({fill:new ol.style.Fill({color:t[i].fillcolor.colorRgb(t[i].fillalpha||1)}),stroke:new ol.style.Stroke({color:t[i].color,width:t[i].width})}));var l=r[0];t[i].shadowinfo&&(l.values_.shadowinfo&&t[i].shadowinfo&&(l.on("precompose",u=>{if(u.target.values_.shadowinfo){var g=u.target.values_.shadowinfo;u.context.shadowBlur=g.blur,u.context.shadowColor=g.color,u.context.shadowOffsetX=g.offset[0],u.context.shadowOffsetY=g.offset[1]}}),l.on("postcompose",u=>{u.context.shadowBlur=0,u.context.shadowColor="black"})),l.values_.shadowinfo=t[i].shadowinfo)}}}},q.prototype.bufferpolygon=function(n){var e=void 0;!n.linecolor||n.linecolor==""?e="#FFFFFF".colorRgb(0):e=n.linecolor.colorRgb(n.linealpha||1);var t=n.geometry,i={fill:new ol.style.Fill({color:n.fillcolor.colorRgb(n.fillalpha||1)}),stroke:new ol.style.Stroke({color:e,width:n.linewidth||0}),zIndex:-1},r=n.bufferradius/1e3,s=turf.buffer(t,r,{units:"kilometers"}),o=new ol.format.GeoJSON,l=o.readFeature(s),u=new ol.style.Style(i);return l.setStyle(u),l.set("id",n.id+"bu!ffer"),l},q.prototype.topologyanalyze=function(n){if(n.polygons){var e=n.polygons[0],t=n.polygons[n.polygons.length-1];e[0]==t[0]&&e[1]==t[1]||n.polygons.push(e)}if(n.polygons1){var e=n.polygons1[0],t=n.polygons1[n.polygons1.length-1];e[0]==t[0]&&e[1]==t[1]||n.polygons1.push(e)}var i=[],r="";for(let F in n)r+=F;var s=void 0,o=void 0,l=!1,u=!1,g=!1,p=!1,y=!1;if(r.includes("points")&&r.includes("lines"))g=!0,s=turf.point(n.points),o=turf.lineString(n.lines);else if(r.includes("points")&&r.includes("polygons"))u=!0,s=turf.point(n.points),o=turf.polygon([n.polygons]);else if(r.includes("lines")&&r.includes("polygons"))p=!0,s=turf.lineString(n.lines),o=turf.polygon([n.polygons]);else if(r.includes("points")&&r.includes("points1"))l=!0,y=!0,s=turf.point(n.points),o=turf.point(n.points);else if(r.includes("lines")&&r.includes("lines1"))l=!0,s=turf.lineString(n.lines),o=turf.lineString(n.lines1);else if(r.includes("polygons")&&r.includes("polygons1")){l=!0;let F=new ol.geom.Polygon([n.polygons]),B=new ol.geom.Polygon([n.polygons1]),X=n.polygons.some(j=>B.containsXY(j[0],j[1])),Y=n.polygons1.some(j=>F.containsXY(j[0],j[1]));var w=[["\u76F8\u79BB","polygons\u5305\u542Bpolygons1"],["polygons1\u5305\u542Bpolygons","\u76F8\u4EA4"]][+X][+Y];return w}if(s&&o){if(l&&!y){var _=turf.booleanOverlap(o,s);_&&i.push("\u91CD\u53E0")}var E=turf.booleanContains(o,s);E&&i.push("\u5305\u542B");var I=turf.booleanIntersects(o,s);if(I){var x=!0,T=i.includes("\u5305\u542B");u&&(x=!1),p&&T&&(x=!1),x&&i.push("\u76F8\u4EA4")}var S=turf.booleanDisjoint(o,s);if(S&&i.push("\u76F8\u79BB"),g){var b=turf.booleanPointOnLine(s,o);b&&i.push("\u70B9\u5728\u7EBF\u4E0A")}}return i.join()},q.prototype.registerpopup=function(n){this.popup=null,this.popup=new ol.Overlay({element:n.element,autoPan:n.autoPan,positioning:"bottom-center",stopEvent:!1,autoPanAnimation:{duration:250}}),this.map.addOverlay(this.popup),this.popup==null&&console.log("\u6CE8\u518C\u5F39\u7A97\u4E8B\u4EF6\u5931\u8D25!")},q.prototype.addpopup=function(n){if(this.popup!=null){Sp(n),this.popup.setPosition(void 0),this.popup.getPosition()==null&&(this.popup.setPosition(n.lnglat),this.popup.setOffset(n.offset||[0,0]));var e=document.getElementById("popup-closer"),t=this.popup,i=this;e.onclick=function(){return t.setPosition(void 0),e.blur(),i.repopup=!0,!1}}else console.log("\u672A\u6CE8\u518C\u5F39\u7A97\u4E8B\u4EF6!")},q.prototype.registerMorepopup=function(n){var e=document.getElementById(n.mapid),t=document.createElement("div");t.className=n.className,t.id=n.popupid,t.style.display="none",t.innerHTML=n.popupHTML,e.appendChild(t),t.style.display="initial";var i=document.getElementById(n.popupid),r=new ol.Overlay({id:"overlay"+n.popupid,element:i,offset:n.offset,autoPan:n.autoPan,positioning:"bottom-center",stopEvent:!1,autoPanAnimation:{duration:250}});r.setPosition(n.lnglat),this.map.addOverlay(r)},q.prototype.addPopup=function(n){const{id:e,html:t,position:i,offset:r}=n,s=document.createElement("div");s.className+="tgis-2d-popup-wrap",typeof t=="string"?s.insertAdjacentHTML("beforeend",`${t}`):t instanceof HTMLElement&&s.appendChild(t);const o=new ol.Overlay({element:s,position:i,offset:r,autoPan:{animation:{duration:250}}}),l=e||`tgis-2d-popup-${ol.getUid(popup)}`;return s.id=l,this.map.addOverlay(o),o},q.prototype.deletepopupbyid=function(n){var e=this.map.getOverlayById("overlay"+n);return e?(this.map.removeOverlay(e),this.repopup=!0,!0):!1},q.prototype.addEvtClick=function(n,e){var t=this.map,i=this;if(n==="mouseover"){const r=function(o){let l=t.getEventPixel(o),u=t.getFeaturesAtPixel(l),g=t.getCoordinateFromPixel(l);e({handler:{type:n,listener:r},data:u&&u.length?u[u.length-1].getProperties():void 0,coordinate:g})};t.getTargetElement().addEventListener("mouseover",r,!1)}else{let r=t.on(n,function(s){if(t.hasFeatureAtPixel(s.pixel)){var o=t.getFeaturesAtPixel(s.pixel);if(o)if(i.repopup)setTimeout(function(){i.repopup=!1},100);else{var l=o[0]?o[0].getProperties():void 0,u=l&&l.features!=null?l.features[l.features.length-1].getProperties():l;e({handler:r,data:u,coordinate:u.geometry.flatCoordinates})}}})}console.log("\u4E8B\u4EF6\u6CE8\u518C\u6210\u529F!")},q.prototype.removeEvtClick=function(n){!n||(n.type==="mouseover"?this.map.getTargetElement().removeEventListener(n.type,n.listener,!1):this.map.un(n.type,n.listener),console.log("\u4E8B\u4EF6\u79FB\u9664\u6210\u529F!"))},q.prototype.addzoomEvent=function(n){this.removezoomEvent();var e=this.map.getView(),t=this;this.zoomchange=e.on("change",function(){var i=e.getZoom();t.nowzoom!=i&&(t.nowzoom=i,n(t.nowzoom))})},q.prototype.removezoomEvent=function(n){if(this.zoomchange){var e=this.map.getView();e.un(this.zoomchange.type,this.zoomchange.listener)}},q.prototype.CreateHeatmap=function(n){var e=void 0;n.gradient&&n.gradient.length>0&&(e=n.gradient);let t=new ol.layer.Heatmap({id:n.id,source:new ol.source.Vector({wrapX:!1}),blur:parseInt(n.blur,10),radius:parseInt(n.radius,10),zIndex:999,gradient:e});for(var i=n.data,r=n.max,s=[],o=0;o<i.length;o++){var l=[parseFloat(i[o].lng),parseFloat(i[o].lat)],u=new ol.Feature({geometry:new ol.geom.Point(l),weight:parseFloat(i[o].count)/parseFloat(r),typename:l.name||""});s.push(u)}t.getSource().addFeatures(s),t.getSource().on("addfeature",function(g){var p=g.feature.get("name"),y=parseFloat(p.substr(2));g.feature.set("weight",y-5)}),this.map.addLayer(t)},q.prototype.searchPon=function(n){n.address&&n.pageNum&&n.pageSize&&n.url&&new Promise(function(e,t){const i="http://10.223.178.107/api/t-gis/gw/COMMON/addrMatch",r=new XMLHttpRequest,s={address:n.address||"",pageNum:n.pageNum||1,pageSize:n.pageSize||10};r.onreadystatechange=function(){r.readyState==4&&r.status==200&&o(r.responseText)},r.open("POST",i,!0),r.setRequestHeader("szvsud-license-key","CVz440zV4BE7fCSznRZvnE6J/SCKlMDbCjGBRD9XtmwvQE2h+NK4qJI/0feODJfIrU/Cb6BQ2ZgMhkzEJUARAQ=="),r.setRequestHeader("Content-Type","application/json"),r.withCredentials=!0,r.send(JSON.stringify(s)),r.send();function o(l){const u=JSON.parse(l);u.scuuess&&u.code==200?console.log("\u70B9\u4F4D\u641C\u7D22\u7ED3\u679C\uFF1A"+l):console.log("\u70B9\u4F4D\u641C\u7D22\u63A5\u53E3\u5F02\u5E38\uFF1A"+l)}})},q.prototype.removeHeatmap=function(n){var e=this.getlayerbyid(n.id);e&&this.map.removeLayer(e)},q.prototype.addControl=function(n){return this.map.addControl(n)},q.prototype.querywfsTosupermap=function(n){var e="",t=void 0;if(n.idVague&&(n.literalval="*"+n.literalval+"*"),n.url.includes("iserver")?t=`<wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" service="WFS" version="1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd">
				<wfs:Query typeName="${n.typeName}" xmlns:World="http://www.supermap.com/World">
		        <ogc:Filter xmlns:ogc="http://www.opengis.net/ogc"> 
				<ogc:PropertyIsLike  wildCard="*" singleChar="#" escapeChar="!" xmlns:ogc="http://www.opengis.net/ogc"> 
				<ogc:PropertyName>${n.Fieldname}</ogc:PropertyName>
				<ogc:Literal>${n.literalval}</ogc:Literal>
				</ogc:PropertyIsLike>
				</ogc:Filter>
				</wfs:Query>
				</wfs:GetFeature>`:e="\u975EIserver\u53D1\u5E03\u670D\u52A1",t){let i=function(r){var s=new ol.format.GML2,o=s.readFeatures(r);if(o.length>0)e=new ol.format.GeoJSON().writeFeaturesObject(o);else{var l=$(r).find("ServiceExceptionReport"),u=$(l).text();e=u}};$.ajax({url:n.url,type:"POST",data:t,async:!1,success:i,error:function(r){r.status==0?console.log("\u62A5\u9519\u539F\u56E0\uFF1A"+r.statusText):console.log(r.status+"\uFF1B\u62A5\u9519\u539F\u56E0\uFF1A"+r.responseText)}})}return e},q.prototype.geojsonGeometry=function(n){var e=n.geojsonobj;const t=new ol.source.Vector({id:n.id,name:n.name,features:new ol.format.GeoJSON().readFeatures(e)}),i=this.setgeometrystyle(n,e),r=new ol.layer.Vector({id:n.id,source:t,zIndex:n.zIndex||1,style:i});return this.map.addLayer(r),r},q.prototype.setgeometrystyle=function(n,e){var t=new ol.format.GeoJSON().readFeatures(e),i=t[0].getGeometry().getType(),r=void 0,s=void 0;if(n.image==null)s={image:new ol.style.Circle({radius:n.radius||2,fill:new ol.style.Fill({color:n.color})})};else{var o={offset:n.offset||[0,0],src:n.image,scale:n.scale};s={image:new ol.style.Icon(o)}}switch(i){case"MultiPoint":r=new ol.style.Style(s);break;case"MultiLineString":r=new ol.style.Style({stroke:new ol.style.Stroke({color:n.color,width:n.width||2})});break;case"Polygon":r=new ol.style.Style({fill:new ol.style.Fill({color:n.fillcolor.colorRgb(n.fillalpha||1)}),stroke:new ol.style.Stroke({color:n.color,width:n.width})});break;case"GeometryCollection":r=new ol.style.Style({stroke:new ol.style.Stroke({color:n.color,width:n.width||2}),fill:new ol.style.Fill({color:n.fillcolor.colorRgb(n.fillalpha||1)}),image:new ol.style.Circle({radius:n.radius||2,fill:null,stroke:new Stroke({color:n.linecolor||"magenta"})})});break;case"Circle":r=new ol.style.Style({stroke:new ol.style.Stroke({color:n.color,width:n.width||2}),fill:new ol.style.Fill({color:n.fillcolor.colorRgb(n.fillalpha||1)})});break}return r};var vs={};function Mh(n){for(var e in n){var t=n[e];e!="geometry"&&e!="source"&&(t instanceof Object?vs=Mh(t):vs[e]=t)}return vs}q.prototype.getpolygonbyid=function(n){for(var e=[],t=this.map.getLayers(),i=0;i<t.getLength();i++){var r=t.item(i),s=r.get("id");s&&s.includes(n)&&e.push(r)}return e},q.prototype.getobjLayersbyid=function(n){var e={},t=this.getlayerbyid(n);if(t){var i=t.getSource();if(i){var r=void 0,s=t.get("type");s=="polygon"?r=this.getpolygonbyid(n,this):r=i.getFeatures();for(var o=0;o<r.length;o++){var l=r[o],u=l.get("type"),g=l.values_;vs={};var p=Mh(g);switch(u){case"Marker":var I=l.getStyle(),y=void 0,w=void 0,_=I.getImage();if(_.iconImage_)w=_.getSrc();else{var E=_.getFill();y=E.getColor()}e[p.typename]={imgurl:w,name:p.typename,Fcolor:y,type:p.type};break;case"text":break;case"line":var I=l.getStyle(),x=I.getStroke(),T=x.getColor();e[p.parentsname]={name:p.parentsname,Fcolor:T,type:p.type};break;case"polygon":e[p.name]={name:p.name,Fcolor:p.fillcolor,type:p.type};break}}}}return e},q.prototype.createlegend=function(n){var e;n.location!=null?e=$("<div id='legend"+n.layerGroupid+"' style='bottom: "+(n.location.top+1)+"%;left: "+(n.location.Left+1)+"%;'>"):e=$("<div id='legend"+n.layerGroupid+"' style='bottom:1%;left: 1%;'>"),e.attr("class","info legend");var t=this.getobjLayersbyid(n.layerGroupid),i="width: 20px;float: left;margin-right: 8px;opacity: 0.7;",r=[];for(var s in t)t[s].type=="Marker"?t[s].imgurl?(newlegendi=i+"height: 20px;background-image: url("+t[s].imgurl+");background-size: 100% 100%;background-repeat: no-repeat;",r.push('<div><i style="'+newlegendi+'"></i><samp>'+t[s].name+"</samp></div>")):(newlegendi=i+"height: 20px;background:"+t[s].Fcolor+";border-radius:15px",r.push('<div><i style="'+newlegendi+'"></i><samp>'+t[s].name+"</samp></div>")):t[s].type=="line"?(newlegendi=i+"height: 5px;background:"+t[s].Fcolor+";margin-top: 5px;",r.push('<div><i style="'+newlegendi+'"></i><samp>'+t[s].name+"</samp></div>")):t[s].type=="polygon"&&(newlegendi=i+"height:18px;background:"+t[s].Fcolor+";",r.push('<div><i style="'+newlegendi+'"></i><samp>'+t[s].name+"</samp></div>"));e.append(r),$("body").append(e),this.legends.push("legend"+n.layerGroupid)},q.prototype.removelegend=function(n){if(this.legends.length>0){for(var e="",t=0;t<this.legends.length;t++)this.legends[t].search(n)!=-1&&(e=this.legends[t]);e!=""?$("#"+e).remove():console.log("\u4E0D\u5B58\u5728\u6B64\u56FE\u4F8B!")}},q.prototype.dataconversionbytype=function(n){if(n.wktdata){var e=new ol.format.WKT,t=e.readFeature(n.wktdata),i=this.createConvertor(n.contype),r=i.writeFeatureObject(t);return r.option=n.option,r}},q.prototype.createConvertor=function(n){var e=null;switch(n){case"GML":e=new ol.format.GML;break;case"KML":e=new ol.format.KML;break;case"GEOJSON":e=new ol.format.GeoJSON;break}return e},q.prototype.destroy=function(n){if(this.map!=null){var e=document.getElementById(n);e.innerHTML="",this.map=null}},q.prototype.bd09togcj02=function(n){var e=Number(n[0]),t=Number(n[1]),i=this.x_PI,r=e-.0065,s=t-.006,o=Math.sqrt(r*r+s*s)-2e-5*Math.sin(s*i),l=Math.atan2(s,r)-3e-6*Math.cos(r*i),u=o*Math.cos(l),g=o*Math.sin(l);return[u,g]},q.prototype.gcj02tobd09=function(n){var e=Number(n[0]),t=Number(n[1]),i=Math.sqrt(e*e+t*t)+2e-5*Math.sin(t*this.x_PI),r=Math.atan2(t,e)+3e-6*Math.cos(e*this.x_PI),s=i*Math.cos(r)+.0065,o=i*Math.sin(r)+.006;return[s,o]},q.prototype.wgs84togcj02=function(n){var e=Number(n[0]),t=Number(n[1]);if(this.out_of_china(e,t))return[e,t];var i=this.transformlat(e-105,t-35),r=this.transformlng(e-105,t-35),s=t/180*this.PI,o=Math.sin(s);o=1-this.ee*o*o;var l=Math.sqrt(o);i=i*180/(this.a*(1-this.ee)/(o*l)*this.PI),r=r*180/(this.a/l*Math.cos(s)*this.PI);var u=t+i,g=e+r;return[g,u]},q.prototype.gcj02towgs84=function(n){var e=Number(n[0]),t=Number(n[1]);if(this.out_of_china(e,t))return[e,t];var i=this.transformlat(e-105,t-35),r=this.transformlng(e-105,t-35),s=t/180*this.PI,o=Math.sin(s);o=1-this.ee*o*o;var l=Math.sqrt(o);i=i*180/(this.a*(1-this.ee)/(o*l)*this.PI),r=r*180/(this.a/l*Math.cos(s)*this.PI);var u=t+i,g=e+r;return[e*2-g,t*2-u]},q.prototype.bd02towgs84=function(n){var e=this.bd09togcj02(n),t=this.gcj02towgs84(e);return t},q.prototype.wgs84tobd02=function(n){var e=this.wgs84togcj02(n),t=this.gcj02tobd09(e);return t},q.prototype.ETocoordinate=function(n){var e=n.type,t=n.lonlats,i=new Array;switch(e){case"BTG":for(var r=0;r<t.length;r++){var s=t[r],o=this.bd09togcj02(s);i.push(o)}return i;case"GTB":for(var r=0;r<t.length;r++){var s=t[r],o=this.gcj02tobd09(s);i.push(o)}return i;case"WTG":for(var r=0;r<t.length;r++){var s=t[r],o=this.wgs84togcj02(s);i.push(o)}return i;case"GTW":for(var r=0;r<t.length;r++){var s=t[r],o=this.gcj02towgs84(s);i.push(o)}return i;case"BTW":for(var r=0;r<t.length;r++){var s=t[r],o=this.bd02towgs84(s);i.push(o)}return i;case"WTB":for(var r=0;r<t.length;r++){var s=t[r],o=this.wgs84tobd02(s);i.push(o)}return i;case"WTC":for(var l="",r=0;r<t.length;r++){var s=t[r];l+=s[0]+",",r==t.length-1?l+=s[1].toString():l+=s[1]+":"}return l!=""&&$.ajax({type:"POST",url:"http://192.168.3.184:8080/api/web/getxy",data:"str="+l,async:!1,success:function(u){for(var g=0;g<u.length;g++){var p=u[g],y=p.split(","),w=[];w.push(Number(Number(y[0]).toFixed(6))),w.push(Number(Number(y[1]).toFixed(6))),i.push(w)}},error:function(u){console.log("\u9519\u8BEF\u63D0\u793A\uFF1A"+u.status)}}),i;case"CTW":for(var l="",r=0;r<t.length;r++){var s=t[r];l+=s[0]+",",r==t.length-1?l+=s[1].toString():l+=s[1]+":"}return l!=""&&$.ajax({type:"POST",url:"http://192.168.3.184:8080/api/web/wgstocgs",data:"cm=114&str="+l,async:!1,success:function(u){for(var g=0;g<u.length;g++){var p=u[g],y=p.split(","),w=[];w.push(Number(Number(y[0]).toFixed(6))),w.push(Number(Number(y[1]).toFixed(6))),i.push(w)}},error:function(u){console.log("\u9519\u8BEF\u63D0\u793A\uFF1A"+u.status)}}),i;default:return t}},q.prototype.transformlat=function(n,e){var t=-100+2*n+3*e+.2*e*e+.1*n*e+.2*Math.sqrt(Math.abs(n));return t+=(20*Math.sin(6*n*this.PI)+20*Math.sin(2*n*this.PI))*2/3,t+=(20*Math.sin(e*this.PI)+40*Math.sin(e/3*this.PI))*2/3,t+=(160*Math.sin(e/12*this.PI)+320*Math.sin(e*this.PI/30))*2/3,t},q.prototype.transformlng=function(n,e){var t=300+n+2*e+.1*n*n+.1*n*e+.1*Math.sqrt(Math.abs(n));return t+=(20*Math.sin(6*n*this.PI)+20*Math.sin(2*n*this.PI))*2/3,t+=(20*Math.sin(n*this.PI)+40*Math.sin(n/3*this.PI))*2/3,t+=(150*Math.sin(n/12*this.PI)+300*Math.sin(n/30*this.PI))*2/3,t},q.prototype.out_of_china=function(n,e){return n<72.004||n>137.8347||e<.8293||e>55.8271||!1};function Rh(n,e){for(var t=n.getLayers(),i=new Array,r=0;r<t.getLength();r++){var s=t.item(r),o=s.get("id");if(o)for(var l=0;l<e.length;l++)o.includes(e[l])&&i.push(s)}return i}function Sp(n){var e=n.container;e.innerHTML="";var t=document.createElement("div");t.className=n.className,t.innerHTML=n.content,e.appendChild(t)}q.Mapv=window.mapv||{},q.prototype.createMapvIns=function(n,e){const{map:t}=this,{Mapv:i}=q;return new i.OpenlayersLayer(t,n,e||{draw:"simple"})},q.prototype.createMapvLayer=function(n,e){const{Mapv:t}=q,i=new t.DataSet(n);return this.createMapvIns(i,e)};class Ep{constructor(){this.dataSources=new cs,this.layer=new ol.layer.Vector}add(e){this.dataSources.add(e)}setMap(e){return this.map=e,this}}class Cp{constructor(e,t){D(this,"_map");D(this,"_view");D(this,"_entities");D(this,"_camera");D(this,"imageryLayers");D(this,"dataSources");D(this,"_addLayer",function(e){return this.map.addLayer(e)});D(this,"_removeLayer",function(e){return this.map.removeLayer(e)});D(this,"_getLayerById",function(e){return this.map.getLayers().getArray().find(t=>t.get("id")===e)});D(this,"_removeLayerById",function(e){const t=this._getLayerById(e),i=Map2D.defined(t);return i&&this._removeLayer(t),i});D(this,"_addOverlay",function(e){return this.map.addOverlay(e)});D(this,"_removeOverlay",function(e){return this.map.removeOverlay(e)});var o,l,u;const{imageryProvider:i,mapCenter:r,mapProjection:s}=t||{};if(e instanceof ol.Map)this._map=e,this._view=e.getView();else{const g=(o=ol.control.defaults.defaults)!=null?o:ol.control.defaults,p=(l=t==null?void 0:t.controls)!=null?l:[],y=s?s.epsg:"EPSG:4326",w=r!=null?r:[104.912777,34.730746];this._map=new ol.Map({target:e,controls:g({zoom:Ge(p.find(_=>_ instanceof ol.control.Zoom)),rotate:Ge(p.find(_=>_ instanceof ol.control.Rotate)),attribution:Ge(p.find(_=>_ instanceof ol.control.Attribution))}).extend(p)}),this._view=new ol.View({center:w,zoom:(u=w[2])!=null?u:11,projection:y})}this._map.setView(this._view),this._entities=new zo(this),this._camera=new Uo(this),this.imageryLayers=new Wo().setMap(this._map),this.dataSources=new Ep().setMap(this._map),Ge(i)&&(i instanceof Pt?this.imageryLayers.addImageryProvider(i):this._map.addLayer(i))}get map(){return this._map}get canvas(){return this._map.getTargetElement().querySelectorAll(".ol-layer canvas")}get entities(){return this._entities}get camera(){return this._camera}get scene(){return this._cesiumWidget.scene}}class qo extends ol.control.Control{constructor(t){const i=document.createElement("div"),{target:r}=t||{};super({element:i,target:r});D(this,"element");D(this,"style");this.element=i}get map(){return this.getMap()}get view(){return this.map.getView()}createStyle(t){const{id:i,text:r}=t;let s=document.getElementById(i);s||(s=document.createElement("style"),s.setAttribute("id",i),s.textContent=r,document.head.appendChild(s))}createElement(t,i={},r){const s=document.createElement(t);return Object.keys(i).forEach(o=>s[o]=i[o]),r&&r.appendChild(s),s}}const pn="data:image/png;base64,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";class Ip extends qo{constructor(t){super(t);D(this,"style",{id:"translate-control-style",text:`.translate-control{position:absolute;left:8px;top:8px;width:52px;height:52px;background:url(${pn}) 0 -140px no-repeat}.translate-left-btn,.translate-right-btn,.translate-bottom-btn,.translate-top-btn{position:absolute;cursor:pointer;background:url(${pn}) no-repeat}.translate-left-btn,.translate-right-btn{width:12px;height:18px;top:17px}.translate-left-btn{left:8px}.translate-left-btn:hover{background-position:-52px -110px}.translate-right-btn{left:32px}.translate-right-btn:hover{background-position:-61px -110px}.translate-bottom-btn,.translate-top-btn{width:18px;height:12px;left:17px}.translate-top-btn{top:8px}.translate-top-btn:hover{background-position:-70px -112px}.translate-bottom-btn{top:31px}.translate-bottom-btn:hover{background-position:-84px -110px}`});const{element:i}=this;i.className="translate-control ol-unselectable map-control",this.createElement("div",{className:"translate-left-btn",onclick:()=>this.translate(-1,0)},i),this.createElement("div",{className:"translate-right-btn",onclick:()=>this.translate(1,0)},i),this.createElement("div",{className:"translate-bottom-btn",onclick:()=>this.translate(0,1)},i),this.createElement("div",{className:"translate-top-btn",onclick:()=>this.translate(0,-1)},i),this.createStyle(this.style)}translate(t,i){const{map:r,view:s}=this,o=s.getCenter(),l=r.getPixelFromCoordinate(o),u=l[0]+t*400,g=l[1]+i*400;s.animate({center:r.getCoordinateFromPixel([u,g]),duration:1e3,zoom:s.getZoom()})}}const Fh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAECAYAAAB7oZQmAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAABVSURBVBiV3c2xDYNAEADBORBIxDThcv6LoCW38d+NqyBGAlnnzHIFBJ58tYERM5bW2l5K8av3rta64sCZmW+IiG/n+dpNwRxMwZWcyfZYcQxu8D+TD8P0FRFl40xpAAAAAElFTkSuQmCC";class bp extends qo{constructor(t){super(t);D(this,"style",{id:"zoom-slider-control-style",text:`.zoom-slider-control{position:absolute;left:22px;top:60px}.zoom-slider-inc_btn{width:24px;height:21px;background:url(${pn}) no-repeat;background-position:0 -217px;cursor:pointer}.zoom-slider-inc_btn:hover{background-position:0 -194px}.zoom-slider-progress{width:12px;height:147px;position:relative;left:6px;background-position:0 0;background:url(${Fh});cursor:pointer}.zoom-slider-progress:hover .zoom-slider-labels{display:block}.zoom-slider-labels{display:none;width:20px;height:100%;position:absolute}.zoom-slider-label-street,.zoom-slider-label-city,.zoom-slider-label-province,.zoom-slider-label-country{width:39px;height:31px;position:absolute;left:20px;background:url(${pn}) no-repeat}.zoom-slider-label-street{top:0;background-position:-87px -140px}.zoom-slider-label-city{top:54px;background-position:-87px -171px}.zoom-slider-label-province{top:92px;background-position:-87px -203px}.zoom-slider-label-country{top:129px;background-position:-87px -235px}.zoom-slider-cursor{position:absolute;width:24px;height:20px;top:0;left:-6px;background:url(${pn}) no-repeat;background-position:-127px -164px;cursor:pointer;z-index:10}.zoom-slider-cursor:hover{background-position:-127px -141px}.zoom-slider-mask{width:12px;height:0;position:absolute;background-position:-14px 0!important;background:url(${Fh});cursor:pointer}.zoom-slider-dec_btn{width:24px;height:21px;background:url(${pn}) no-repeat;background-position:-26px -224px;cursor:pointer}.zoom-slider-dec_btn:hover{background-position:-26px -195px}`});D(this,"calculateZoomAndHeight",(t,i)=>{let r=t-i.top;r<=0&&(r=0),r+10>=i.height&&(r=i.height);const s=(i.height-r)/(i.height/15);return{height:r,zoom:s}});D(this,"calculateHeightByZoom",(t,i)=>{t=parseInt(t),t<=1&&(t=1),t>=22&&(t=22);let r=i.height-i.height/15*t;return r<=0&&(r=0),r});const{element:i}=this;i.className="zoom-slider-control ol-unselectable map-control",this.createElement("div",{className:"zoom-slider-inc_btn",onmousedown:()=>{const _=o.getBoundingClientRect();l(_.top-10)}},i);const r=this.createElement("div",{className:"zoom-slider-progress",onmousedown:_=>l(_.clientY)},i),s=this.createElement("div",{className:"zoom-slider-mask"},r),o=this.createElement("div",{className:"zoom-slider-cursor"},r);this.createElement("div",{className:"zoom-slider-dec_btn",onmousedown:()=>{const _=o.getBoundingClientRect();l(_.top+10)}},i);const l=_=>{const E=r.getBoundingClientRect(),{zoom:I,height:x}=this.calculateZoomAndHeight(_,E);o.style.top=`${x===E.height?x-10:x}px`,s.style.height=`${x}px`,this.zoom(I)},u=_=>{_.stopPropagation(),_.preventDefault(),l(_.target.getBoundingClientRect().top+8)},g=this.createElement("div",{className:"zoom-slider-labels"},r);this.createElement("div",{className:"zoom-slider-label-street",onmousedown:u},g),this.createElement("div",{className:"zoom-slider-label-city",onmousedown:u},g),this.createElement("div",{className:"zoom-slider-label-province",onmousedown:u},g),this.createElement("div",{className:"zoom-slider-label-country",onmousedown:u},g);const p=()=>{const _=this.view.getZoom(),E=this.calculateHeightByZoom(_,r.getBoundingClientRect());o.style.top=`${E&&E+10}px`,s.style.height=`${E+10}px`};let y=!1,w=0;document.body.onclick=_=>_.target===o&&(y=!0),document.body.onmousemove=_=>y&&l(_.clientY),document.body.onmouseup=()=>y=!1,document.body.onwheel=()=>{const _=parseInt(this.view.getZoom());_!==w&&(p(),w=_)},setTimeout(()=>{(()=>{w=this.view.getZoom(),p()})()}),this.createStyle(this.style)}zoom(t){this.view.animate({zoom:t})}}class Tp extends ol.control.ScaleLine{constructor(e){super(e)}}class Pp extends ol.control.MousePosition{constructor(e){super(e)}}const Ap=Dt({__proto__:null,baiduMapLayer:an.exports.baiduMapLayer},[an.exports]);function Lp(n,e){var t,i,r,s,o,l,u,g,p,y,w=0,_=n.type==="FeatureCollection",E=n.type==="Feature",I=_?n.features.length:1;for(t=0;t<I;t++){for(l=_?n.features[t].geometry:E?n.geometry:n,g=_?n.features[t].properties:E?n.properties:{},p=_?n.features[t].bbox:E?n.bbox:void 0,y=_?n.features[t].id:E?n.id:void 0,u=l?l.type==="GeometryCollection":!1,o=u?l.geometries.length:1,r=0;r<o;r++){if(s=u?l.geometries[r]:l,s===null){if(e(null,w,g,p,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,w,g,p,y)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(e(s.geometries[i],w,g,p,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}w++}}function Mp(n,e,t){var i=t;return Lp(n,function(r,s,o,l,u){s===0&&t===void 0?i=r:i=e(i,r,s,o,l,u)}),i}var Oh=6378137;function Rp(n){return Mp(n,function(e,t){return e+Fp(t)},0)}function Fp(n){var e=0,t;switch(n.type){case"Polygon":return kh(n.coordinates);case"MultiPolygon":for(t=0;t<n.coordinates.length;t++)e+=kh(n.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function kh(n){var e=0;if(n&&n.length>0){e+=Math.abs(Dh(n[0]));for(var t=1;t<n.length;t++)e-=Math.abs(Dh(n[t]))}return e}function Dh(n){var e,t,i,r,s,o,l,u=0,g=n.length;if(g>2){for(l=0;l<g;l++)l===g-2?(r=g-2,s=g-1,o=0):l===g-1?(r=g-1,s=0,o=1):(r=l,s=l+1,o=l+2),e=n[r],t=n[s],i=n[o],u+=(Yo(i[0])-Yo(e[0]))*Math.sin(Yo(t[1]));u=u*Oh*Oh/2}return u}function Yo(n){return n*Math.PI/180}const Op={supermap:gp,mapv:Ap,turf:Object.freeze(Object.defineProperty({__proto__:null,area:Rp},Symbol.toStringTag,{value:"Module"}))};function kp(){ol.proj.addProjection(new ol.proj.Projection({code:"EPSG:4490",extent:[-180,-90,180,90],units:"degrees"}))}return kp(),window.gis={Map2D:q,Service:At,Position:bt,Entity:fs,TrackLine:Th},Q.ArcGisImageServerImageryProvider=cp,Q.ArcGisMapServerImageryProvider=dp,Q.AssociativeArray=cs,Q.BaseControl=qo,Q.BillboardGraphics=Ch,Q.Camera=Uo,Q.CustomProjection=ap,Q.CustomTilingScheme=lp,Q.DeveloperError=Jn,Q.DrawHandler=Jg,Q.DrawType=Ht,Q.Entity=fs,Q.EntityCollection=zo,Q.EventCallback=ds,Q.EventCollection=_h,Q.Events=ls,Q.GeoAnalysis=Dg,Q.GeographicProjection=xh,Q.GeographicTilingScheme=Sh,Q.Globe=Ah,Q.Graphics=gs,Q.ImageryLayer=Ph,Q.ImageryLayerCollection=Wo,Q.ImageryProvider=Pt,Q.LabelGraphics=Ih,Q.Map2D=q,Q.MapProjection=un,Q.MeasureHandler=op,Q.MeasureType=Kn,Q.MousePositionControl=Pp,Q.PointGraphics=bh,Q.Position=bt,Q.Resource=Tt,Q.SDK=Op,Q.ScaleLineControl=Tp,Q.Scene=fp,Q.ScreenSpaceEventHandler=hp,Q.ScreenSpaceEventType=lt,Q.Service=wp,Q.SuperMapImageryProvider=pp,Q.TGisService=At,Q.TianDiService=Qn,Q.TilingScheme=cn,Q.TrackLine=Th,Q.TranslateControl=Ip,Q.UrlTemplateImageryProvider=vp,Q.Viewer=Cp,Q.WebFeatureServiceImageryProvider=mp,Q.WebMapTileServiceImageryProvider=yp,Q.WebMercatorProjection=Eh,Q.WebMercatorTilingScheme=up,Q.ZoomSliderControl=bp,Q.createGuid=di,Q.defined=Ge,Q.getOlVersion=Bo,Object.defineProperties(Q,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),Q}({});
