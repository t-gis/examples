var Epe=Object.defineProperty;var Tpe=(s,e,t)=>e in s?Epe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var jn=(s,e,t)=>(Tpe(s,typeof e!="symbol"?e+"":e,t),t);function Ipe(s,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in s)){const o=Object.getOwnPropertyDescriptor(i,n);o&&Object.defineProperty(s,n,o.get?o:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();function Npe(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ye={exports:{}},YF={exports:{}};/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s,e){(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t="18.2.0",i=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),S=Symbol.iterator,x="@@iterator";function L(F){if(F===null||typeof F!="object")return null;var re=S&&F[S]||F[x];return typeof re=="function"?re:null}var k={current:null},T={transition:null},A={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},O={current:null},I={},R=null;function B(F){R=F}I.setExtraStackFrame=function(F){R=F},I.getCurrentStack=null,I.getStackAddendum=function(){var F="";R&&(F+=R);var re=I.getCurrentStack;return re&&(F+=re()||""),F};var z=!1,q=!1,te=!1,U=!1,X=!1,le={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:T,ReactCurrentOwner:O};le.ReactDebugCurrentFrame=I,le.ReactCurrentActQueue=A;function be(F){{for(var re=arguments.length,Te=new Array(re>1?re-1:0),ze=1;ze<re;ze++)Te[ze-1]=arguments[ze];ke("warn",F,Te)}}function pe(F){{for(var re=arguments.length,Te=new Array(re>1?re-1:0),ze=1;ze<re;ze++)Te[ze-1]=arguments[ze];ke("error",F,Te)}}function ke(F,re,Te){{var ze=le.ReactDebugCurrentFrame,ft=ze.getStackAddendum();ft!==""&&(re+="%s",Te=Te.concat([ft]));var di=Te.map(function(Ut){return String(Ut)});di.unshift("Warning: "+re),Function.prototype.apply.call(console[F],console,di)}}var He={};function Ge(F,re){{var Te=F.constructor,ze=Te&&(Te.displayName||Te.name)||"ReactClass",ft=ze+"."+re;if(He[ft])return;pe("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",re,ze),He[ft]=!0}}var Ue={isMounted:function(F){return!1},enqueueForceUpdate:function(F,re,Te){Ge(F,"forceUpdate")},enqueueReplaceState:function(F,re,Te,ze){Ge(F,"replaceState")},enqueueSetState:function(F,re,Te,ze){Ge(F,"setState")}},ce=Object.assign,ue={};Object.freeze(ue);function $e(F,re,Te){this.props=F,this.context=re,this.refs=ue,this.updater=Te||Ue}$e.prototype.isReactComponent={},$e.prototype.setState=function(F,re){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,re,"setState")},$e.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};{var tt={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},_e=function(F,re){Object.defineProperty($e.prototype,F,{get:function(){be("%s(...) is deprecated in plain JavaScript React classes. %s",re[0],re[1])}})};for(var Vt in tt)tt.hasOwnProperty(Vt)&&_e(Vt,tt[Vt])}function Ne(){}Ne.prototype=$e.prototype;function bt(F,re,Te){this.props=F,this.context=re,this.refs=ue,this.updater=Te||Ue}var mt=bt.prototype=new Ne;mt.constructor=bt,ce(mt,$e.prototype),mt.isPureReactComponent=!0;function qe(){var F={current:null};return Object.seal(F),F}var Fe=Array.isArray;function Wt(F){return Fe(F)}function Kt(F){{var re=typeof Symbol=="function"&&Symbol.toStringTag,Te=re&&F[Symbol.toStringTag]||F.constructor.name||"Object";return Te}}function It(F){try{return ai(F),!1}catch{return!0}}function ai(F){return""+F}function Pt(F){if(It(F))return pe("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Kt(F)),ai(F)}function Ie(F,re,Te){var ze=F.displayName;if(ze)return ze;var ft=re.displayName||re.name||"";return ft!==""?Te+"("+ft+")":Te}function Xe(F){return F.displayName||"Context"}function ee(F){if(F==null)return null;if(typeof F.tag=="number"&&pe("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof F=="function")return F.displayName||F.name||null;if(typeof F=="string")return F;switch(F){case o:return"Fragment";case n:return"Portal";case a:return"Profiler";case r:return"StrictMode";case f:return"Suspense";case g:return"SuspenseList"}if(typeof F=="object")switch(F.$$typeof){case c:var re=F;return Xe(re)+".Consumer";case l:var Te=F;return Xe(Te._context)+".Provider";case d:return Ie(F,F.render,"ForwardRef");case m:var ze=F.displayName||null;return ze!==null?ze:ee(F.type)||"Memo";case _:{var ft=F,di=ft._payload,Ut=ft._init;try{return ee(Ut(di))}catch{return null}}}return null}var ie=Object.prototype.hasOwnProperty,ne={key:!0,ref:!0,__self:!0,__source:!0},V,W,Q;Q={};function Y(F){if(ie.call(F,"ref")){var re=Object.getOwnPropertyDescriptor(F,"ref").get;if(re&&re.isReactWarning)return!1}return F.ref!==void 0}function de(F){if(ie.call(F,"key")){var re=Object.getOwnPropertyDescriptor(F,"key").get;if(re&&re.isReactWarning)return!1}return F.key!==void 0}function ve(F,re){var Te=function(){V||(V=!0,pe("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",re))};Te.isReactWarning=!0,Object.defineProperty(F,"key",{get:Te,configurable:!0})}function rt(F,re){var Te=function(){W||(W=!0,pe("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",re))};Te.isReactWarning=!0,Object.defineProperty(F,"ref",{get:Te,configurable:!0})}function lt(F){if(typeof F.ref=="string"&&O.current&&F.__self&&O.current.stateNode!==F.__self){var re=ee(O.current.type);Q[re]||(pe('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',re,F.ref),Q[re]=!0)}}var Re=function(F,re,Te,ze,ft,di,Ut){var Ci={$$typeof:i,type:F,key:re,ref:Te,props:Ut,_owner:di};return Ci._store={},Object.defineProperty(Ci._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Ci,"_self",{configurable:!1,enumerable:!1,writable:!1,value:ze}),Object.defineProperty(Ci,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ft}),Object.freeze&&(Object.freeze(Ci.props),Object.freeze(Ci)),Ci};function Ye(F,re,Te){var ze,ft={},di=null,Ut=null,Ci=null,en=null;if(re!=null){Y(re)&&(Ut=re.ref,lt(re)),de(re)&&(Pt(re.key),di=""+re.key),Ci=re.__self===void 0?null:re.__self,en=re.__source===void 0?null:re.__source;for(ze in re)ie.call(re,ze)&&!ne.hasOwnProperty(ze)&&(ft[ze]=re[ze])}var Rn=arguments.length-2;if(Rn===1)ft.children=Te;else if(Rn>1){for(var Xn=Array(Rn),Jn=0;Jn<Rn;Jn++)Xn[Jn]=arguments[Jn+2];Object.freeze&&Object.freeze(Xn),ft.children=Xn}if(F&&F.defaultProps){var _s=F.defaultProps;for(ze in _s)ft[ze]===void 0&&(ft[ze]=_s[ze])}if(di||Ut){var Vs=typeof F=="function"?F.displayName||F.name||"Unknown":F;di&&ve(ft,Vs),Ut&&rt(ft,Vs)}return Re(F,di,Ut,Ci,en,O.current,ft)}function wt(F,re){var Te=Re(F.type,re,F.ref,F._self,F._source,F._owner,F.props);return Te}function Ct(F,re,Te){if(F==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var ze,ft=ce({},F.props),di=F.key,Ut=F.ref,Ci=F._self,en=F._source,Rn=F._owner;if(re!=null){Y(re)&&(Ut=re.ref,Rn=O.current),de(re)&&(Pt(re.key),di=""+re.key);var Xn;F.type&&F.type.defaultProps&&(Xn=F.type.defaultProps);for(ze in re)ie.call(re,ze)&&!ne.hasOwnProperty(ze)&&(re[ze]===void 0&&Xn!==void 0?ft[ze]=Xn[ze]:ft[ze]=re[ze])}var Jn=arguments.length-2;if(Jn===1)ft.children=Te;else if(Jn>1){for(var _s=Array(Jn),Vs=0;Vs<Jn;Vs++)_s[Vs]=arguments[Vs+2];ft.children=_s}return Re(F.type,di,Ut,Ci,en,Rn,ft)}function Qe(F){return typeof F=="object"&&F!==null&&F.$$typeof===i}var Mt=".",Ot=":";function Mi(F){var re=/[=:]/g,Te={"=":"=0",":":"=2"},ze=F.replace(re,function(ft){return Te[ft]});return"$"+ze}var zt=!1,Fi=/\/+/g;function Wi(F){return F.replace(Fi,"$&/")}function Ti(F,re){return typeof F=="object"&&F!==null&&F.key!=null?(Pt(F.key),Mi(""+F.key)):re.toString(36)}function rs(F,re,Te,ze,ft){var di=typeof F;(di==="undefined"||di==="boolean")&&(F=null);var Ut=!1;if(F===null)Ut=!0;else switch(di){case"string":case"number":Ut=!0;break;case"object":switch(F.$$typeof){case i:case n:Ut=!0}}if(Ut){var Ci=F,en=ft(Ci),Rn=ze===""?Mt+Ti(Ci,0):ze;if(Wt(en)){var Xn="";Rn!=null&&(Xn=Wi(Rn)+"/"),rs(en,re,Xn,"",function(_2){return _2})}else en!=null&&(Qe(en)&&(en.key&&(!Ci||Ci.key!==en.key)&&Pt(en.key),en=wt(en,Te+(en.key&&(!Ci||Ci.key!==en.key)?Wi(""+en.key)+"/":"")+Rn)),re.push(en));return 1}var Jn,_s,Vs=0,yn=ze===""?Mt:ze+Ot;if(Wt(F))for(var pf=0;pf<F.length;pf++)Jn=F[pf],_s=yn+Ti(Jn,pf),Vs+=rs(Jn,re,Te,_s,ft);else{var H_=L(F);if(typeof H_=="function"){var LC=F;H_===LC.entries&&(zt||be("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),zt=!0);for(var m2=H_.call(LC),Ad,xC=0;!(Ad=m2.next()).done;)Jn=Ad.value,_s=yn+Ti(Jn,xC++),Vs+=rs(Jn,re,Te,_s,ft)}else if(di==="object"){var DC=String(F);throw new Error("Objects are not valid as a React child (found: "+(DC==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":DC)+"). If you meant to render a collection of children, use an array instead.")}}return Vs}function un(F,re,Te){if(F==null)return F;var ze=[],ft=0;return rs(F,ze,"","",function(di){return re.call(Te,di,ft++)}),ze}function Qn(F){var re=0;return un(F,function(){re++}),re}function Zs(F,re,Te){un(F,function(){re.apply(this,arguments)},Te)}function Uo(F){return un(F,function(re){return re})||[]}function ps(F){if(!Qe(F))throw new Error("React.Children.only expected to receive a single React element child.");return F}function vo(F){var re={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};re.Provider={$$typeof:l,_context:re};var Te=!1,ze=!1,ft=!1;{var di={$$typeof:c,_context:re};Object.defineProperties(di,{Provider:{get:function(){return ze||(ze=!0,pe("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),re.Provider},set:function(Ut){re.Provider=Ut}},_currentValue:{get:function(){return re._currentValue},set:function(Ut){re._currentValue=Ut}},_currentValue2:{get:function(){return re._currentValue2},set:function(Ut){re._currentValue2=Ut}},_threadCount:{get:function(){return re._threadCount},set:function(Ut){re._threadCount=Ut}},Consumer:{get:function(){return Te||(Te=!0,pe("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),re.Consumer}},displayName:{get:function(){return re.displayName},set:function(Ut){ft||(be("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",Ut),ft=!0)}}}),re.Consumer=di}return re._currentRenderer=null,re._currentRenderer2=null,re}var sr=-1,Bs=0,Bl=1,Nt=2;function H(F){if(F._status===sr){var re=F._result,Te=re();if(Te.then(function(di){if(F._status===Bs||F._status===sr){var Ut=F;Ut._status=Bl,Ut._result=di}},function(di){if(F._status===Bs||F._status===sr){var Ut=F;Ut._status=Nt,Ut._result=di}}),F._status===sr){var ze=F;ze._status=Bs,ze._result=Te}}if(F._status===Bl){var ft=F._result;return ft===void 0&&pe(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,ft),"default"in ft||pe(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,ft),ft.default}else throw F._result}function me(F){var re={_status:sr,_result:F},Te={$$typeof:_,_payload:re,_init:H};{var ze,ft;Object.defineProperties(Te,{defaultProps:{configurable:!0,get:function(){return ze},set:function(di){pe("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),ze=di,Object.defineProperty(Te,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return ft},set:function(di){pe("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),ft=di,Object.defineProperty(Te,"propTypes",{enumerable:!0})}}})}return Te}function Me(F){F!=null&&F.$$typeof===m?pe("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof F!="function"?pe("forwardRef requires a render function but was given %s.",F===null?"null":typeof F):F.length!==0&&F.length!==2&&pe("forwardRef render functions accept exactly two parameters: props and ref. %s",F.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),F!=null&&(F.defaultProps!=null||F.propTypes!=null)&&pe("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var re={$$typeof:d,render:F};{var Te;Object.defineProperty(re,"displayName",{enumerable:!1,configurable:!0,get:function(){return Te},set:function(ze){Te=ze,!F.name&&!F.displayName&&(F.displayName=ze)}})}return re}var _t;_t=Symbol.for("react.module.reference");function Jt(F){return!!(typeof F=="string"||typeof F=="function"||F===o||F===a||X||F===r||F===f||F===g||U||F===C||z||q||te||typeof F=="object"&&F!==null&&(F.$$typeof===_||F.$$typeof===m||F.$$typeof===l||F.$$typeof===c||F.$$typeof===d||F.$$typeof===_t||F.getModuleId!==void 0))}function oi(F,re){Jt(F)||pe("memo: The first argument must be a component. Instead received: %s",F===null?"null":typeof F);var Te={$$typeof:m,type:F,compare:re===void 0?null:re};{var ze;Object.defineProperty(Te,"displayName",{enumerable:!1,configurable:!0,get:function(){return ze},set:function(ft){ze=ft,!F.name&&!F.displayName&&(F.displayName=ft)}})}return Te}function Lt(){var F=k.current;return F===null&&pe(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),F}function Qt(F){var re=Lt();if(F._context!==void 0){var Te=F._context;Te.Consumer===F?pe("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):Te.Provider===F&&pe("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return re.useContext(F)}function Tn(F){var re=Lt();return re.useState(F)}function hn(F,re,Te){var ze=Lt();return ze.useReducer(F,re,Te)}function ae(F){var re=Lt();return re.useRef(F)}function xe(F,re){var Te=Lt();return Te.useEffect(F,re)}function dt(F,re){var Te=Lt();return Te.useInsertionEffect(F,re)}function Ht(F,re){var Te=Lt();return Te.useLayoutEffect(F,re)}function ji(F,re){var Te=Lt();return Te.useCallback(F,re)}function $i(F,re){var Te=Lt();return Te.useMemo(F,re)}function as(F,re,Te){var ze=Lt();return ze.useImperativeHandle(F,re,Te)}function ms(F,re){{var Te=Lt();return Te.useDebugValue(F,re)}}function Zr(){var F=Lt();return F.useTransition()}function zn(F){var re=Lt();return re.useDeferredValue(F)}function ei(){var F=Lt();return F.useId()}function $o(F,re,Te){var ze=Lt();return ze.useSyncExternalStore(F,re,Te)}var jo=0,Qs,Qr,Vl,bu,Wl,_c,af;function F_(){}F_.__reactDisabledLog=!0;function SC(){{if(jo===0){Qs=console.log,Qr=console.info,Vl=console.warn,bu=console.error,Wl=console.group,_c=console.groupCollapsed,af=console.groupEnd;var F={configurable:!0,enumerable:!0,value:F_,writable:!0};Object.defineProperties(console,{info:F,log:F,warn:F,error:F,group:F,groupCollapsed:F,groupEnd:F})}jo++}}function wn(){{if(jo--,jo===0){var F={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ce({},F,{value:Qs}),info:ce({},F,{value:Qr}),warn:ce({},F,{value:Vl}),error:ce({},F,{value:bu}),group:ce({},F,{value:Wl}),groupCollapsed:ce({},F,{value:_c}),groupEnd:ce({},F,{value:af})})}jo<0&&pe("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Ji=le.ReactCurrentDispatcher,or;function rr(F,re,Te){{if(or===void 0)try{throw Error()}catch(ft){var ze=ft.stack.trim().match(/\n( *(at )?)/);or=ze&&ze[1]||""}return`
`+or+F}}var Hl=!1,bo;{var Xr=typeof WeakMap=="function"?WeakMap:Map;bo=new Xr}function Ja(F,re){if(!F||Hl)return"";{var Te=bo.get(F);if(Te!==void 0)return Te}var ze;Hl=!0;var ft=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var di;di=Ji.current,Ji.current=null,SC();try{if(re){var Ut=function(){throw Error()};if(Object.defineProperty(Ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ut,[])}catch(yn){ze=yn}Reflect.construct(F,[],Ut)}else{try{Ut.call()}catch(yn){ze=yn}F.call(Ut.prototype)}}else{try{throw Error()}catch(yn){ze=yn}F()}}catch(yn){if(yn&&ze&&typeof yn.stack=="string"){for(var Ci=yn.stack.split(`
`),en=ze.stack.split(`
`),Rn=Ci.length-1,Xn=en.length-1;Rn>=1&&Xn>=0&&Ci[Rn]!==en[Xn];)Xn--;for(;Rn>=1&&Xn>=0;Rn--,Xn--)if(Ci[Rn]!==en[Xn]){if(Rn!==1||Xn!==1)do if(Rn--,Xn--,Xn<0||Ci[Rn]!==en[Xn]){var Jn=`
`+Ci[Rn].replace(" at new "," at ");return F.displayName&&Jn.includes("<anonymous>")&&(Jn=Jn.replace("<anonymous>",F.displayName)),typeof F=="function"&&bo.set(F,Jn),Jn}while(Rn>=1&&Xn>=0);break}}}finally{Hl=!1,Ji.current=di,wn(),Error.prepareStackTrace=ft}var _s=F?F.displayName||F.name:"",Vs=_s?rr(_s):"";return typeof F=="function"&&bo.set(F,Vs),Vs}function vc(F,re,Te){return Ja(F,!1)}function lf(F){var re=F.prototype;return!!(re&&re.isReactComponent)}function Jr(F,re,Te){if(F==null)return"";if(typeof F=="function")return Ja(F,lf(F));if(typeof F=="string")return rr(F);switch(F){case f:return rr("Suspense");case g:return rr("SuspenseList")}if(typeof F=="object")switch(F.$$typeof){case d:return vc(F.render);case m:return Jr(F.type,re,Te);case _:{var ze=F,ft=ze._payload,di=ze._init;try{return Jr(di(ft),re,Te)}catch{}}}return""}var zl={},cf=le.ReactDebugCurrentFrame;function bc(F){if(F){var re=F._owner,Te=Jr(F.type,F._source,re?re.type:null);cf.setExtraStackFrame(Te)}else cf.setExtraStackFrame(null)}function uf(F,re,Te,ze,ft){{var di=Function.call.bind(ie);for(var Ut in F)if(di(F,Ut)){var Ci=void 0;try{if(typeof F[Ut]!="function"){var en=Error((ze||"React class")+": "+Te+" type `"+Ut+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof F[Ut]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw en.name="Invariant Violation",en}Ci=F[Ut](re,Ut,ze,Te,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Rn){Ci=Rn}Ci&&!(Ci instanceof Error)&&(bc(ft),pe("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",ze||"React class",Te,Ut,typeof Ci),bc(null)),Ci instanceof Error&&!(Ci.message in zl)&&(zl[Ci.message]=!0,bc(ft),pe("Failed %s type: %s",Te,Ci.message),bc(null))}}}function Gi(F){if(F){var re=F._owner,Te=Jr(F.type,F._source,re?re.type:null);B(Te)}else B(null)}var Cu;Cu=!1;function df(){if(O.current){var F=ee(O.current.type);if(F)return`

Check the render method of \``+F+"`."}return""}function _i(F){if(F!==void 0){var re=F.fileName.replace(/^.*[\\\/]/,""),Te=F.lineNumber;return`

Check your code at `+re+":"+Te+"."}return""}function Nd(F){return F!=null?_i(F.__source):""}var Dr={};function up(F){var re=df();if(!re){var Te=typeof F=="string"?F:F.displayName||F.name;Te&&(re=`

Check the top-level render call using <`+Te+">.")}return re}function hf(F,re){if(!(!F._store||F._store.validated||F.key!=null)){F._store.validated=!0;var Te=up(re);if(!Dr[Te]){Dr[Te]=!0;var ze="";F&&F._owner&&F._owner!==O.current&&(ze=" It was passed a child from "+ee(F._owner.type)+"."),Gi(F),pe('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Te,ze),Gi(null)}}}function KL(F,re){if(typeof F=="object"){if(Wt(F))for(var Te=0;Te<F.length;Te++){var ze=F[Te];Qe(ze)&&hf(ze,re)}else if(Qe(F))F._store&&(F._store.validated=!0);else if(F){var ft=L(F);if(typeof ft=="function"&&ft!==F.entries)for(var di=ft.call(F),Ut;!(Ut=di.next()).done;)Qe(Ut.value)&&hf(Ut.value,re)}}}function Ko(F){{var re=F.type;if(re==null||typeof re=="string")return;var Te;if(typeof re=="function")Te=re.propTypes;else if(typeof re=="object"&&(re.$$typeof===d||re.$$typeof===m))Te=re.propTypes;else return;if(Te){var ze=ee(re);uf(Te,F.props,"prop",ze,F)}else if(re.PropTypes!==void 0&&!Cu){Cu=!0;var ft=ee(re);pe("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ft||"Unknown")}typeof re.getDefaultProps=="function"&&!re.getDefaultProps.isReactClassApproved&&pe("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ns(F){{for(var re=Object.keys(F.props),Te=0;Te<re.length;Te++){var ze=re[Te];if(ze!=="children"&&ze!=="key"){Gi(F),pe("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",ze),Gi(null);break}}F.ref!==null&&(Gi(F),pe("Invalid attribute `ref` supplied to `React.Fragment`."),Gi(null))}}function qL(F,re,Te){var ze=Jt(F);if(!ze){var ft="";(F===void 0||typeof F=="object"&&F!==null&&Object.keys(F).length===0)&&(ft+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var di=Nd(re);di?ft+=di:ft+=df();var Ut;F===null?Ut="null":Wt(F)?Ut="array":F!==void 0&&F.$$typeof===i?(Ut="<"+(ee(F.type)||"Unknown")+" />",ft=" Did you accidentally export a JSX literal instead of a component?"):Ut=typeof F,pe("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Ut,ft)}var Ci=Ye.apply(this,arguments);if(Ci==null)return Ci;if(ze)for(var en=2;en<arguments.length;en++)KL(arguments[en],F);return F===o?Ns(Ci):Ko(Ci),Ci}var el=!1;function La(F){var re=qL.bind(null,F);return re.type=F,el||(el=!0,be("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(re,"type",{enumerable:!1,get:function(){return be("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:F}),F}}),re}function wu(F,re,Te){for(var ze=Ct.apply(this,arguments),ft=2;ft<arguments.length;ft++)KL(arguments[ft],ze.type);return Ko(ze),ze}function g2(F,re){var Te=T.transition;T.transition={};var ze=T.transition;T.transition._updatedFibers=new Set;try{F()}finally{if(T.transition=Te,Te===null&&ze._updatedFibers){var ft=ze._updatedFibers.size;ft>10&&be("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),ze._updatedFibers.clear()}}}var B_=!1,dp=null;function GL(F){if(dp===null)try{var re=("require"+Math.random()).slice(0,7),Te=s&&s[re];dp=Te.call(s,"timers").setImmediate}catch{dp=function(ft){B_===!1&&(B_=!0,typeof MessageChannel>"u"&&pe("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var di=new MessageChannel;di.port1.onmessage=ft,di.port2.postMessage(void 0)}}return dp(F)}var ff=0,YL=!1;function p2(F){{var re=ff;ff++,A.current===null&&(A.current=[]);var Te=A.isBatchingLegacy,ze;try{if(A.isBatchingLegacy=!0,ze=F(),!Te&&A.didScheduleLegacyUpdate){var ft=A.current;ft!==null&&(A.didScheduleLegacyUpdate=!1,W_(ft))}}catch(_s){throw Rd(re),_s}finally{A.isBatchingLegacy=Te}if(ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var di=ze,Ut=!1,Ci={then:function(_s,Vs){Ut=!0,di.then(function(yn){Rd(re),ff===0?V_(yn,_s,Vs):_s(yn)},function(yn){Rd(re),Vs(yn)})}};return!YL&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){Ut||(YL=!0,pe("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),Ci}else{var en=ze;if(Rd(re),ff===0){var Rn=A.current;Rn!==null&&(W_(Rn),A.current=null);var Xn={then:function(_s,Vs){A.current===null?(A.current=[],V_(en,_s,Vs)):_s(en)}};return Xn}else{var Jn={then:function(_s,Vs){_s(en)}};return Jn}}}}function Rd(F){F!==ff-1&&pe("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),ff=F}function V_(F,re,Te){{var ze=A.current;if(ze!==null)try{W_(ze),GL(function(){ze.length===0?(A.current=null,re(F)):V_(F,re,Te)})}catch(ft){Te(ft)}else re(F)}}var gf=!1;function W_(F){if(!gf){gf=!0;var re=0;try{for(;re<F.length;re++){var Te=F[re];do Te=Te(!0);while(Te!==null)}F.length=0}catch(ze){throw F=F.slice(re+1),ze}finally{gf=!1}}}var ZL=qL,QL=wu,XL=La,JL={map:un,forEach:Zs,count:Qn,toArray:Uo,only:ps};e.Children=JL,e.Component=$e,e.Fragment=o,e.Profiler=a,e.PureComponent=bt,e.StrictMode=r,e.Suspense=f,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,e.cloneElement=QL,e.createContext=vo,e.createElement=ZL,e.createFactory=XL,e.createRef=qe,e.forwardRef=Me,e.isValidElement=Qe,e.lazy=me,e.memo=oi,e.startTransition=g2,e.unstable_act=p2,e.useCallback=ji,e.useContext=Qt,e.useDebugValue=ms,e.useDeferredValue=zn,e.useEffect=xe,e.useId=ei,e.useImperativeHandle=as,e.useInsertionEffect=dt,e.useLayoutEffect=Ht,e.useMemo=$i,e.useReducer=hn,e.useRef=ae,e.useState=Tn,e.useSyncExternalStore=$o,e.useTransition=Zr,e.version=t,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(YF,YF.exports);(function(s){s.exports=YF.exports})(ye);const Fr=Npe(ye.exports),lT=Ipe({__proto__:null,default:Fr},[ye.exports]);var ZF={},vQ={exports:{}},ul={},bQ={exports:{}},CQ={};/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=!1,t=!1,i=5;function n(Re,Ye){var wt=Re.length;Re.push(Ye),a(Re,Ye,wt)}function o(Re){return Re.length===0?null:Re[0]}function r(Re){if(Re.length===0)return null;var Ye=Re[0],wt=Re.pop();return wt!==Ye&&(Re[0]=wt,l(Re,wt,0)),Ye}function a(Re,Ye,wt){for(var Ct=wt;Ct>0;){var Qe=Ct-1>>>1,Mt=Re[Qe];if(c(Mt,Ye)>0)Re[Qe]=Ye,Re[Ct]=Mt,Ct=Qe;else return}}function l(Re,Ye,wt){for(var Ct=wt,Qe=Re.length,Mt=Qe>>>1;Ct<Mt;){var Ot=(Ct+1)*2-1,Mi=Re[Ot],zt=Ot+1,Fi=Re[zt];if(c(Mi,Ye)<0)zt<Qe&&c(Fi,Mi)<0?(Re[Ct]=Fi,Re[zt]=Ye,Ct=zt):(Re[Ct]=Mi,Re[Ot]=Ye,Ct=Ot);else if(zt<Qe&&c(Fi,Ye)<0)Re[Ct]=Fi,Re[zt]=Ye,Ct=zt;else return}}function c(Re,Ye){var wt=Re.sortIndex-Ye.sortIndex;return wt!==0?wt:Re.id-Ye.id}var d=1,f=2,g=3,m=4,_=5;function C(Re,Ye){}var S=typeof performance=="object"&&typeof performance.now=="function";if(S){var x=performance;s.unstable_now=function(){return x.now()}}else{var L=Date,k=L.now();s.unstable_now=function(){return L.now()-k}}var T=1073741823,A=-1,O=250,I=5e3,R=1e4,B=T,z=[],q=[],te=1,U=null,X=g,le=!1,be=!1,pe=!1,ke=typeof setTimeout=="function"?setTimeout:null,He=typeof clearTimeout=="function"?clearTimeout:null,Ge=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ue(Re){for(var Ye=o(q);Ye!==null;){if(Ye.callback===null)r(q);else if(Ye.startTime<=Re)r(q),Ye.sortIndex=Ye.expirationTime,n(z,Ye);else return;Ye=o(q)}}function ce(Re){if(pe=!1,Ue(Re),!be)if(o(z)!==null)be=!0,Y(ue);else{var Ye=o(q);Ye!==null&&de(ce,Ye.startTime-Re)}}function ue(Re,Ye){be=!1,pe&&(pe=!1,ve()),le=!0;var wt=X;try{var Ct;if(!t)return $e(Re,Ye)}finally{U=null,X=wt,le=!1}}function $e(Re,Ye){var wt=Ye;for(Ue(wt),U=o(z);U!==null&&!e&&!(U.expirationTime>wt&&(!Re||Xe()));){var Ct=U.callback;if(typeof Ct=="function"){U.callback=null,X=U.priorityLevel;var Qe=U.expirationTime<=wt,Mt=Ct(Qe);wt=s.unstable_now(),typeof Mt=="function"?U.callback=Mt:U===o(z)&&r(z),Ue(wt)}else r(z);U=o(z)}if(U!==null)return!0;var Ot=o(q);return Ot!==null&&de(ce,Ot.startTime-wt),!1}function tt(Re,Ye){switch(Re){case d:case f:case g:case m:case _:break;default:Re=g}var wt=X;X=Re;try{return Ye()}finally{X=wt}}function _e(Re){var Ye;switch(X){case d:case f:case g:Ye=g;break;default:Ye=X;break}var wt=X;X=Ye;try{return Re()}finally{X=wt}}function Vt(Re){var Ye=X;return function(){var wt=X;X=Ye;try{return Re.apply(this,arguments)}finally{X=wt}}}function Ne(Re,Ye,wt){var Ct=s.unstable_now(),Qe;if(typeof wt=="object"&&wt!==null){var Mt=wt.delay;typeof Mt=="number"&&Mt>0?Qe=Ct+Mt:Qe=Ct}else Qe=Ct;var Ot;switch(Re){case d:Ot=A;break;case f:Ot=O;break;case _:Ot=B;break;case m:Ot=R;break;case g:default:Ot=I;break}var Mi=Qe+Ot,zt={id:te++,callback:Ye,priorityLevel:Re,startTime:Qe,expirationTime:Mi,sortIndex:-1};return Qe>Ct?(zt.sortIndex=Qe,n(q,zt),o(z)===null&&zt===o(q)&&(pe?ve():pe=!0,de(ce,Qe-Ct))):(zt.sortIndex=Mi,n(z,zt),!be&&!le&&(be=!0,Y(ue))),zt}function bt(){}function mt(){!be&&!le&&(be=!0,Y(ue))}function qe(){return o(z)}function Fe(Re){Re.callback=null}function Wt(){return X}var Kt=!1,It=null,ai=-1,Pt=i,Ie=-1;function Xe(){var Re=s.unstable_now()-Ie;return!(Re<Pt)}function ee(){}function ie(Re){if(Re<0||Re>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}Re>0?Pt=Math.floor(1e3/Re):Pt=i}var ne=function(){if(It!==null){var Re=s.unstable_now();Ie=Re;var Ye=!0,wt=!0;try{wt=It(Ye,Re)}finally{wt?V():(Kt=!1,It=null)}}else Kt=!1},V;if(typeof Ge=="function")V=function(){Ge(ne)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Q=W.port2;W.port1.onmessage=ne,V=function(){Q.postMessage(null)}}else V=function(){ke(ne,0)};function Y(Re){It=Re,Kt||(Kt=!0,V())}function de(Re,Ye){ai=ke(function(){Re(s.unstable_now())},Ye)}function ve(){He(ai),ai=-1}var rt=ee,lt=null;s.unstable_IdlePriority=_,s.unstable_ImmediatePriority=d,s.unstable_LowPriority=m,s.unstable_NormalPriority=g,s.unstable_Profiling=lt,s.unstable_UserBlockingPriority=f,s.unstable_cancelCallback=Fe,s.unstable_continueExecution=mt,s.unstable_forceFrameRate=ie,s.unstable_getCurrentPriorityLevel=Wt,s.unstable_getFirstCallbackNode=qe,s.unstable_next=_e,s.unstable_pauseExecution=bt,s.unstable_requestPaint=rt,s.unstable_runWithPriority=tt,s.unstable_scheduleCallback=Ne,s.unstable_shouldYield=Xe,s.unstable_wrapCallback=Vt,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(CQ);(function(s){s.exports=CQ})(bQ);/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var s=ye.exports,e=bQ.exports,t=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,i=!1;function n(u){i=u}function o(u){if(!i){for(var h=arguments.length,p=new Array(h>1?h-1:0),v=1;v<h;v++)p[v-1]=arguments[v];a("warn",u,p)}}function r(u){if(!i){for(var h=arguments.length,p=new Array(h>1?h-1:0),v=1;v<h;v++)p[v-1]=arguments[v];a("error",u,p)}}function a(u,h,p){{var v=t.ReactDebugCurrentFrame,y=v.getStackAddendum();y!==""&&(h+="%s",p=p.concat([y]));var D=p.map(function(E){return String(E)});D.unshift("Warning: "+h),Function.prototype.apply.call(console[u],console,D)}}var l=0,c=1,d=2,f=3,g=4,m=5,_=6,C=7,S=8,x=9,L=10,k=11,T=12,A=13,O=14,I=15,R=16,B=17,z=18,q=19,te=21,U=22,X=23,le=24,be=25,pe=!0,ke=!1,He=!1,Ge=!1,Ue=!1,ce=!0,ue=!1,$e=!1,tt=!0,_e=!0,Vt=!0,Ne=new Set,bt={},mt={};function qe(u,h){Fe(u,h),Fe(u+"Capture",h)}function Fe(u,h){bt[u]&&r("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",u),bt[u]=h;{var p=u.toLowerCase();mt[p]=u,u==="onDoubleClick"&&(mt.ondblclick=u)}for(var v=0;v<h.length;v++)Ne.add(h[v])}var Wt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kt=Object.prototype.hasOwnProperty;function It(u){{var h=typeof Symbol=="function"&&Symbol.toStringTag,p=h&&u[Symbol.toStringTag]||u.constructor.name||"Object";return p}}function ai(u){try{return Pt(u),!1}catch{return!0}}function Pt(u){return""+u}function Ie(u,h){if(ai(u))return r("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",h,It(u)),Pt(u)}function Xe(u){if(ai(u))return r("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",It(u)),Pt(u)}function ee(u,h){if(ai(u))return r("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",h,It(u)),Pt(u)}function ie(u,h){if(ai(u))return r("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",h,It(u)),Pt(u)}function ne(u){if(ai(u))return r("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",It(u)),Pt(u)}function V(u){if(ai(u))return r("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",It(u)),Pt(u)}var W=0,Q=1,Y=2,de=3,ve=4,rt=5,lt=6,Re=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Ye=Re+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",wt=new RegExp("^["+Re+"]["+Ye+"]*$"),Ct={},Qe={};function Mt(u){return Kt.call(Qe,u)?!0:Kt.call(Ct,u)?!1:wt.test(u)?(Qe[u]=!0,!0):(Ct[u]=!0,r("Invalid attribute name: `%s`",u),!1)}function Ot(u,h,p){return h!==null?h.type===W:p?!1:u.length>2&&(u[0]==="o"||u[0]==="O")&&(u[1]==="n"||u[1]==="N")}function Mi(u,h,p,v){if(p!==null&&p.type===W)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":{if(v)return!1;if(p!==null)return!p.acceptsBooleans;var y=u.toLowerCase().slice(0,5);return y!=="data-"&&y!=="aria-"}default:return!1}}function zt(u,h,p,v){if(h===null||typeof h>"u"||Mi(u,h,p,v))return!0;if(v)return!1;if(p!==null)switch(p.type){case de:return!h;case ve:return h===!1;case rt:return isNaN(h);case lt:return isNaN(h)||h<1}return!1}function Fi(u){return Ti.hasOwnProperty(u)?Ti[u]:null}function Wi(u,h,p,v,y,D,E){this.acceptsBooleans=h===Y||h===de||h===ve,this.attributeName=v,this.attributeNamespace=y,this.mustUseProperty=p,this.propertyName=u,this.type=h,this.sanitizeURL=D,this.removeEmptyString=E}var Ti={},rs=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];rs.forEach(function(u){Ti[u]=new Wi(u,W,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var h=u[0],p=u[1];Ti[h]=new Wi(h,Q,!1,p,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){Ti[u]=new Wi(u,Y,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){Ti[u]=new Wi(u,Y,!1,u,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(u){Ti[u]=new Wi(u,de,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){Ti[u]=new Wi(u,de,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){Ti[u]=new Wi(u,ve,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){Ti[u]=new Wi(u,lt,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){Ti[u]=new Wi(u,rt,!1,u.toLowerCase(),null,!1,!1)});var un=/[\-\:]([a-z])/g,Qn=function(u){return u[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(u){var h=u.replace(un,Qn);Ti[h]=new Wi(h,Q,!1,u,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(u){var h=u.replace(un,Qn);Ti[h]=new Wi(h,Q,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var h=u.replace(un,Qn);Ti[h]=new Wi(h,Q,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){Ti[u]=new Wi(u,Q,!1,u.toLowerCase(),null,!1,!1)});var Zs="xlinkHref";Ti[Zs]=new Wi("xlinkHref",Q,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){Ti[u]=new Wi(u,Q,!1,u.toLowerCase(),null,!0,!0)});var Uo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,ps=!1;function vo(u){!ps&&Uo.test(u)&&(ps=!0,r("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(u)))}function sr(u,h,p,v){if(v.mustUseProperty){var y=v.propertyName;return u[y]}else{Ie(p,h),v.sanitizeURL&&vo(""+p);var D=v.attributeName,E=null;if(v.type===ve){if(u.hasAttribute(D)){var N=u.getAttribute(D);return N===""?!0:zt(h,p,v,!1)?N:N===""+p?p:N}}else if(u.hasAttribute(D)){if(zt(h,p,v,!1))return u.getAttribute(D);if(v.type===de)return p;E=u.getAttribute(D)}return zt(h,p,v,!1)?E===null?p:E:E===""+p?p:E}}function Bs(u,h,p,v){{if(!Mt(h))return;if(!u.hasAttribute(h))return p===void 0?void 0:null;var y=u.getAttribute(h);return Ie(p,h),y===""+p?p:y}}function Bl(u,h,p,v){var y=Fi(h);if(!Ot(h,y,v)){if(zt(h,p,y,v)&&(p=null),v||y===null){if(Mt(h)){var D=h;p===null?u.removeAttribute(D):(Ie(p,h),u.setAttribute(D,""+p))}return}var E=y.mustUseProperty;if(E){var N=y.propertyName;if(p===null){var P=y.type;u[N]=P===de?!1:""}else u[N]=p;return}var K=y.attributeName,Z=y.attributeNamespace;if(p===null)u.removeAttribute(K);else{var fe=y.type,he;fe===de||fe===ve&&p===!0?he="":(Ie(p,K),he=""+p,y.sanitizeURL&&vo(he.toString())),Z?u.setAttributeNS(Z,K,he):u.setAttribute(K,he)}}}var Nt=Symbol.for("react.element"),H=Symbol.for("react.portal"),me=Symbol.for("react.fragment"),Me=Symbol.for("react.strict_mode"),_t=Symbol.for("react.profiler"),Jt=Symbol.for("react.provider"),oi=Symbol.for("react.context"),Lt=Symbol.for("react.forward_ref"),Qt=Symbol.for("react.suspense"),Tn=Symbol.for("react.suspense_list"),hn=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),xe=Symbol.for("react.scope"),dt=Symbol.for("react.debug_trace_mode"),Ht=Symbol.for("react.offscreen"),ji=Symbol.for("react.legacy_hidden"),$i=Symbol.for("react.cache"),as=Symbol.for("react.tracing_marker"),ms=Symbol.iterator,Zr="@@iterator";function zn(u){if(u===null||typeof u!="object")return null;var h=ms&&u[ms]||u[Zr];return typeof h=="function"?h:null}var ei=Object.assign,$o=0,jo,Qs,Qr,Vl,bu,Wl,_c;function af(){}af.__reactDisabledLog=!0;function F_(){{if($o===0){jo=console.log,Qs=console.info,Qr=console.warn,Vl=console.error,bu=console.group,Wl=console.groupCollapsed,_c=console.groupEnd;var u={configurable:!0,enumerable:!0,value:af,writable:!0};Object.defineProperties(console,{info:u,log:u,warn:u,error:u,group:u,groupCollapsed:u,groupEnd:u})}$o++}}function SC(){{if($o--,$o===0){var u={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ei({},u,{value:jo}),info:ei({},u,{value:Qs}),warn:ei({},u,{value:Qr}),error:ei({},u,{value:Vl}),group:ei({},u,{value:bu}),groupCollapsed:ei({},u,{value:Wl}),groupEnd:ei({},u,{value:_c})})}$o<0&&r("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var wn=t.ReactCurrentDispatcher,Ji;function or(u,h,p){{if(Ji===void 0)try{throw Error()}catch(y){var v=y.stack.trim().match(/\n( *(at )?)/);Ji=v&&v[1]||""}return`
`+Ji+u}}var rr=!1,Hl;{var bo=typeof WeakMap=="function"?WeakMap:Map;Hl=new bo}function Xr(u,h){if(!u||rr)return"";{var p=Hl.get(u);if(p!==void 0)return p}var v;rr=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var D;D=wn.current,wn.current=null,F_();try{if(h){var E=function(){throw Error()};if(Object.defineProperty(E.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(E,[])}catch(Ee){v=Ee}Reflect.construct(u,[],E)}else{try{E.call()}catch(Ee){v=Ee}u.call(E.prototype)}}else{try{throw Error()}catch(Ee){v=Ee}u()}}catch(Ee){if(Ee&&v&&typeof Ee.stack=="string"){for(var N=Ee.stack.split(`
`),P=v.stack.split(`
`),K=N.length-1,Z=P.length-1;K>=1&&Z>=0&&N[K]!==P[Z];)Z--;for(;K>=1&&Z>=0;K--,Z--)if(N[K]!==P[Z]){if(K!==1||Z!==1)do if(K--,Z--,Z<0||N[K]!==P[Z]){var fe=`
`+N[K].replace(" at new "," at ");return u.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",u.displayName)),typeof u=="function"&&Hl.set(u,fe),fe}while(K>=1&&Z>=0);break}}}finally{rr=!1,wn.current=D,SC(),Error.prepareStackTrace=y}var he=u?u.displayName||u.name:"",De=he?or(he):"";return typeof u=="function"&&Hl.set(u,De),De}function Ja(u,h,p){return Xr(u,!0)}function vc(u,h,p){return Xr(u,!1)}function lf(u){var h=u.prototype;return!!(h&&h.isReactComponent)}function Jr(u,h,p){if(u==null)return"";if(typeof u=="function")return Xr(u,lf(u));if(typeof u=="string")return or(u);switch(u){case Qt:return or("Suspense");case Tn:return or("SuspenseList")}if(typeof u=="object")switch(u.$$typeof){case Lt:return vc(u.render);case hn:return Jr(u.type,h,p);case ae:{var v=u,y=v._payload,D=v._init;try{return Jr(D(y),h,p)}catch{}}}return""}function zl(u){switch(u._debugOwner&&u._debugOwner.type,u._debugSource,u.tag){case m:return or(u.type);case R:return or("Lazy");case A:return or("Suspense");case q:return or("SuspenseList");case l:case d:case I:return vc(u.type);case k:return vc(u.type.render);case c:return Ja(u.type);default:return""}}function cf(u){try{var h="",p=u;do h+=zl(p),p=p.return;while(p);return h}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function bc(u,h,p){var v=u.displayName;if(v)return v;var y=h.displayName||h.name||"";return y!==""?p+"("+y+")":p}function uf(u){return u.displayName||"Context"}function Gi(u){if(u==null)return null;if(typeof u.tag=="number"&&r("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case me:return"Fragment";case H:return"Portal";case _t:return"Profiler";case Me:return"StrictMode";case Qt:return"Suspense";case Tn:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case oi:var h=u;return uf(h)+".Consumer";case Jt:var p=u;return uf(p._context)+".Provider";case Lt:return bc(u,u.render,"ForwardRef");case hn:var v=u.displayName||null;return v!==null?v:Gi(u.type)||"Memo";case ae:{var y=u,D=y._payload,E=y._init;try{return Gi(E(D))}catch{return null}}}return null}function Cu(u,h,p){var v=h.displayName||h.name||"";return u.displayName||(v!==""?p+"("+v+")":p)}function df(u){return u.displayName||"Context"}function _i(u){var h=u.tag,p=u.type;switch(h){case le:return"Cache";case x:var v=p;return df(v)+".Consumer";case L:var y=p;return df(y._context)+".Provider";case z:return"DehydratedFragment";case k:return Cu(p,p.render,"ForwardRef");case C:return"Fragment";case m:return p;case g:return"Portal";case f:return"Root";case _:return"Text";case R:return Gi(p);case S:return p===Me?"StrictMode":"Mode";case U:return"Offscreen";case T:return"Profiler";case te:return"Scope";case A:return"Suspense";case q:return"SuspenseList";case be:return"TracingMarker";case c:case l:case B:case d:case O:case I:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;break}return null}var Nd=t.ReactDebugCurrentFrame,Dr=null,up=!1;function hf(){{if(Dr===null)return null;var u=Dr._debugOwner;if(u!==null&&typeof u<"u")return _i(u)}return null}function KL(){return Dr===null?"":cf(Dr)}function Ko(){Nd.getCurrentStack=null,Dr=null,up=!1}function Ns(u){Nd.getCurrentStack=u===null?null:KL,Dr=u,up=!1}function qL(){return Dr}function el(u){up=u}function La(u){return""+u}function wu(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return V(u),u;default:return""}}var g2={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function B_(u,h){g2[h.type]||h.onChange||h.onInput||h.readOnly||h.disabled||h.value==null||r("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),h.onChange||h.readOnly||h.disabled||h.checked==null||r("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function dp(u){var h=u.type,p=u.nodeName;return p&&p.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function GL(u){return u._valueTracker}function ff(u){u._valueTracker=null}function YL(u){var h="";return u&&(dp(u)?h=u.checked?"true":"false":h=u.value),h}function p2(u){var h=dp(u)?"checked":"value",p=Object.getOwnPropertyDescriptor(u.constructor.prototype,h);V(u[h]);var v=""+u[h];if(!(u.hasOwnProperty(h)||typeof p>"u"||typeof p.get!="function"||typeof p.set!="function")){var y=p.get,D=p.set;Object.defineProperty(u,h,{configurable:!0,get:function(){return y.call(this)},set:function(N){V(N),v=""+N,D.call(this,N)}}),Object.defineProperty(u,h,{enumerable:p.enumerable});var E={getValue:function(){return v},setValue:function(N){V(N),v=""+N},stopTracking:function(){ff(u),delete u[h]}};return E}}function Rd(u){GL(u)||(u._valueTracker=p2(u))}function V_(u){if(!u)return!1;var h=GL(u);if(!h)return!0;var p=h.getValue(),v=YL(u);return v!==p?(h.setValue(v),!0):!1}function gf(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var W_=!1,ZL=!1,QL=!1,XL=!1;function JL(u){var h=u.type==="checkbox"||u.type==="radio";return h?u.checked!=null:u.value!=null}function F(u,h){var p=u,v=h.checked,y=ei({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v!=null?v:p._wrapperState.initialChecked});return y}function re(u,h){B_("input",h),h.checked!==void 0&&h.defaultChecked!==void 0&&!ZL&&(r("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",hf()||"A component",h.type),ZL=!0),h.value!==void 0&&h.defaultValue!==void 0&&!W_&&(r("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",hf()||"A component",h.type),W_=!0);var p=u,v=h.defaultValue==null?"":h.defaultValue;p._wrapperState={initialChecked:h.checked!=null?h.checked:h.defaultChecked,initialValue:wu(h.value!=null?h.value:v),controlled:JL(h)}}function Te(u,h){var p=u,v=h.checked;v!=null&&Bl(p,"checked",v,!1)}function ze(u,h){var p=u;{var v=JL(h);!p._wrapperState.controlled&&v&&!XL&&(r("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),XL=!0),p._wrapperState.controlled&&!v&&!QL&&(r("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),QL=!0)}Te(u,h);var y=wu(h.value),D=h.type;if(y!=null)D==="number"?(y===0&&p.value===""||p.value!=y)&&(p.value=La(y)):p.value!==La(y)&&(p.value=La(y));else if(D==="submit"||D==="reset"){p.removeAttribute("value");return}h.hasOwnProperty("value")?Ci(p,h.type,y):h.hasOwnProperty("defaultValue")&&Ci(p,h.type,wu(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(p.defaultChecked=!!h.defaultChecked)}function ft(u,h,p){var v=u;if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var y=h.type,D=y==="submit"||y==="reset";if(D&&(h.value===void 0||h.value===null))return;var E=La(v._wrapperState.initialValue);p||E!==v.value&&(v.value=E),v.defaultValue=E}var N=v.name;N!==""&&(v.name=""),v.defaultChecked=!v.defaultChecked,v.defaultChecked=!!v._wrapperState.initialChecked,N!==""&&(v.name=N)}function di(u,h){var p=u;ze(p,h),Ut(p,h)}function Ut(u,h){var p=h.name;if(h.type==="radio"&&p!=null){for(var v=u;v.parentNode;)v=v.parentNode;Ie(p,"name");for(var y=v.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),D=0;D<y.length;D++){var E=y[D];if(!(E===u||E.form!==u.form)){var N=Vx(E);if(!N)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");V_(E),ze(E,N)}}}}function Ci(u,h,p){(h!=="number"||gf(u.ownerDocument)!==u)&&(p==null?u.defaultValue=La(u._wrapperState.initialValue):u.defaultValue!==La(p)&&(u.defaultValue=La(p)))}var en=!1,Rn=!1,Xn=!1;function Jn(u,h){h.value==null&&(typeof h.children=="object"&&h.children!==null?s.Children.forEach(h.children,function(p){p!=null&&(typeof p=="string"||typeof p=="number"||Rn||(Rn=!0,r("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):h.dangerouslySetInnerHTML!=null&&(Xn||(Xn=!0,r("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),h.selected!=null&&!en&&(r("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),en=!0)}function _s(u,h){h.value!=null&&u.setAttribute("value",La(wu(h.value)))}var Vs=Array.isArray;function yn(u){return Vs(u)}var pf;pf=!1;function H_(){var u=hf();return u?`

Check the render method of \``+u+"`.":""}var LC=["value","defaultValue"];function m2(u){{B_("select",u);for(var h=0;h<LC.length;h++){var p=LC[h];if(u[p]!=null){var v=yn(u[p]);u.multiple&&!v?r("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",p,H_()):!u.multiple&&v&&r("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",p,H_())}}}}function Ad(u,h,p,v){var y=u.options;if(h){for(var D=p,E={},N=0;N<D.length;N++)E["$"+D[N]]=!0;for(var P=0;P<y.length;P++){var K=E.hasOwnProperty("$"+y[P].value);y[P].selected!==K&&(y[P].selected=K),K&&v&&(y[P].defaultSelected=!0)}}else{for(var Z=La(wu(p)),fe=null,he=0;he<y.length;he++){if(y[he].value===Z){y[he].selected=!0,v&&(y[he].defaultSelected=!0);return}fe===null&&!y[he].disabled&&(fe=y[he])}fe!==null&&(fe.selected=!0)}}function xC(u,h){return ei({},h,{value:void 0})}function DC(u,h){var p=u;m2(h),p._wrapperState={wasMultiple:!!h.multiple},h.value!==void 0&&h.defaultValue!==void 0&&!pf&&(r("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),pf=!0)}function _2(u,h){var p=u;p.multiple=!!h.multiple;var v=h.value;v!=null?Ad(p,!!h.multiple,v,!1):h.defaultValue!=null&&Ad(p,!!h.multiple,h.defaultValue,!0)}function fre(u,h){var p=u,v=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!h.multiple;var y=h.value;y!=null?Ad(p,!!h.multiple,y,!1):v!==!!h.multiple&&(h.defaultValue!=null?Ad(p,!!h.multiple,h.defaultValue,!0):Ad(p,!!h.multiple,h.multiple?[]:"",!1))}function gre(u,h){var p=u,v=h.value;v!=null&&Ad(p,!!h.multiple,v,!1)}var sW=!1;function v2(u,h){var p=u;if(h.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var v=ei({},h,{value:void 0,defaultValue:void 0,children:La(p._wrapperState.initialValue)});return v}function oW(u,h){var p=u;B_("textarea",h),h.value!==void 0&&h.defaultValue!==void 0&&!sW&&(r("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",hf()||"A component"),sW=!0);var v=h.value;if(v==null){var y=h.children,D=h.defaultValue;if(y!=null){r("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(D!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(yn(y)){if(y.length>1)throw new Error("<textarea> can only have at most one child.");y=y[0]}D=y}}D==null&&(D=""),v=D}p._wrapperState={initialValue:wu(v)}}function rW(u,h){var p=u,v=wu(h.value),y=wu(h.defaultValue);if(v!=null){var D=La(v);D!==p.value&&(p.value=D),h.defaultValue==null&&p.defaultValue!==D&&(p.defaultValue=D)}y!=null&&(p.defaultValue=La(y))}function aW(u,h){var p=u,v=p.textContent;v===p._wrapperState.initialValue&&v!==""&&v!==null&&(p.value=v)}function pre(u,h){rW(u,h)}var Md="http://www.w3.org/1999/xhtml",mre="http://www.w3.org/1998/Math/MathML",b2="http://www.w3.org/2000/svg";function C2(u){switch(u){case"svg":return b2;case"math":return mre;default:return Md}}function w2(u,h){return u==null||u===Md?C2(h):u===b2&&h==="foreignObject"?Md:u}var _re=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,p,v,y){MSApp.execUnsafeLocalFunction(function(){return u(h,p,v,y)})}:u},ex,lW=_re(function(u,h){if(u.namespaceURI===b2&&!("innerHTML"in u)){ex=ex||document.createElement("div"),ex.innerHTML="<svg>"+h.valueOf().toString()+"</svg>";for(var p=ex.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;p.firstChild;)u.appendChild(p.firstChild);return}u.innerHTML=h}),xa=1,Od=3,io=8,Pd=9,y2=11,tx=function(u,h){if(h){var p=u.firstChild;if(p&&p===u.lastChild&&p.nodeType===Od){p.nodeValue=h;return}}u.textContent=h},vre={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},kC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function bre(u,h){return u+h.charAt(0).toUpperCase()+h.substring(1)}var Cre=["Webkit","ms","Moz","O"];Object.keys(kC).forEach(function(u){Cre.forEach(function(h){kC[bre(h,u)]=kC[u]})});function S2(u,h,p){var v=h==null||typeof h=="boolean"||h==="";return v?"":!p&&typeof h=="number"&&h!==0&&!(kC.hasOwnProperty(u)&&kC[u])?h+"px":(ie(h,u),(""+h).trim())}var wre=/([A-Z])/g,yre=/^ms-/;function Sre(u){return u.replace(wre,"-$1").toLowerCase().replace(yre,"-ms-")}var cW=function(){};{var Lre=/^(?:webkit|moz|o)[A-Z]/,xre=/^-ms-/,Dre=/-(.)/g,uW=/;\s*$/,z_={},L2={},dW=!1,hW=!1,kre=function(u){return u.replace(Dre,function(h,p){return p.toUpperCase()})},Ere=function(u){z_.hasOwnProperty(u)&&z_[u]||(z_[u]=!0,r("Unsupported style property %s. Did you mean %s?",u,kre(u.replace(xre,"ms-"))))},Tre=function(u){z_.hasOwnProperty(u)&&z_[u]||(z_[u]=!0,r("Unsupported vendor-prefixed style property %s. Did you mean %s?",u,u.charAt(0).toUpperCase()+u.slice(1)))},Ire=function(u,h){L2.hasOwnProperty(h)&&L2[h]||(L2[h]=!0,r(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,u,h.replace(uW,"")))},Nre=function(u,h){dW||(dW=!0,r("`NaN` is an invalid value for the `%s` css style property.",u))},Rre=function(u,h){hW||(hW=!0,r("`Infinity` is an invalid value for the `%s` css style property.",u))};cW=function(u,h){u.indexOf("-")>-1?Ere(u):Lre.test(u)?Tre(u):uW.test(h)&&Ire(u,h),typeof h=="number"&&(isNaN(h)?Nre(u,h):isFinite(h)||Rre(u,h))}}var Are=cW;function Mre(u){{var h="",p="";for(var v in u)if(!!u.hasOwnProperty(v)){var y=u[v];if(y!=null){var D=v.indexOf("--")===0;h+=p+(D?v:Sre(v))+":",h+=S2(v,y,D),p=";"}}return h||null}}function fW(u,h){var p=u.style;for(var v in h)if(!!h.hasOwnProperty(v)){var y=v.indexOf("--")===0;y||Are(v,h[v]);var D=S2(v,h[v],y);v==="float"&&(v="cssFloat"),y?p.setProperty(v,D):p[v]=D}}function Ore(u){return u==null||typeof u=="boolean"||u===""}function gW(u){var h={};for(var p in u)for(var v=vre[p]||[p],y=0;y<v.length;y++)h[v[y]]=p;return h}function Pre(u,h){{if(!h)return;var p=gW(u),v=gW(h),y={};for(var D in p){var E=p[D],N=v[D];if(N&&E!==N){var P=E+","+N;if(y[P])continue;y[P]=!0,r("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",Ore(u[E])?"Removing":"Updating",E,N)}}}}var Fre={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Bre=ei({menuitem:!0},Fre),Vre="__html";function x2(u,h){if(!!h){if(Bre[u]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw new Error(u+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof h.dangerouslySetInnerHTML!="object"||!(Vre in h.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!h.suppressContentEditableWarning&&h.contentEditable&&h.children!=null&&r("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),h.style!=null&&typeof h.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function hp(u,h){if(u.indexOf("-")===-1)return typeof h.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ix={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},pW={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},U_={},Wre=new RegExp("^(aria)-["+Ye+"]*$"),Hre=new RegExp("^(aria)[A-Z]["+Ye+"]*$");function zre(u,h){{if(Kt.call(U_,h)&&U_[h])return!0;if(Hre.test(h)){var p="aria-"+h.slice(4).toLowerCase(),v=pW.hasOwnProperty(p)?p:null;if(v==null)return r("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",h),U_[h]=!0,!0;if(h!==v)return r("Invalid ARIA attribute `%s`. Did you mean `%s`?",h,v),U_[h]=!0,!0}if(Wre.test(h)){var y=h.toLowerCase(),D=pW.hasOwnProperty(y)?y:null;if(D==null)return U_[h]=!0,!1;if(h!==D)return r("Unknown ARIA attribute `%s`. Did you mean `%s`?",h,D),U_[h]=!0,!0}}return!0}function Ure(u,h){{var p=[];for(var v in h){var y=zre(u,v);y||p.push(v)}var D=p.map(function(E){return"`"+E+"`"}).join(", ");p.length===1?r("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",D,u):p.length>1&&r("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",D,u)}}function $re(u,h){hp(u,h)||Ure(u,h)}var mW=!1;function jre(u,h){{if(u!=="input"&&u!=="textarea"&&u!=="select")return;h!=null&&h.value===null&&!mW&&(mW=!0,u==="select"&&h.multiple?r("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",u):r("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",u))}}var _W=function(){};{var ea={},vW=/^on./,Kre=/^on[^A-Z]/,qre=new RegExp("^(aria)-["+Ye+"]*$"),Gre=new RegExp("^(aria)[A-Z]["+Ye+"]*$");_W=function(u,h,p,v){if(Kt.call(ea,h)&&ea[h])return!0;var y=h.toLowerCase();if(y==="onfocusin"||y==="onfocusout")return r("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),ea[h]=!0,!0;if(v!=null){var D=v.registrationNameDependencies,E=v.possibleRegistrationNames;if(D.hasOwnProperty(h))return!0;var N=E.hasOwnProperty(y)?E[y]:null;if(N!=null)return r("Invalid event handler property `%s`. Did you mean `%s`?",h,N),ea[h]=!0,!0;if(vW.test(h))return r("Unknown event handler property `%s`. It will be ignored.",h),ea[h]=!0,!0}else if(vW.test(h))return Kre.test(h)&&r("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",h),ea[h]=!0,!0;if(qre.test(h)||Gre.test(h))return!0;if(y==="innerhtml")return r("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),ea[h]=!0,!0;if(y==="aria")return r("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),ea[h]=!0,!0;if(y==="is"&&p!==null&&p!==void 0&&typeof p!="string")return r("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof p),ea[h]=!0,!0;if(typeof p=="number"&&isNaN(p))return r("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",h),ea[h]=!0,!0;var P=Fi(h),K=P!==null&&P.type===W;if(ix.hasOwnProperty(y)){var Z=ix[y];if(Z!==h)return r("Invalid DOM property `%s`. Did you mean `%s`?",h,Z),ea[h]=!0,!0}else if(!K&&h!==y)return r("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",h,y),ea[h]=!0,!0;return typeof p=="boolean"&&Mi(h,p,P,!1)?(p?r('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',p,h,h,p,h):r('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',p,h,h,p,h,h,h),ea[h]=!0,!0):K?!0:Mi(h,p,P,!1)?(ea[h]=!0,!1):((p==="false"||p==="true")&&P!==null&&P.type===de&&(r("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",p,h,p==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',h,p),ea[h]=!0),!0)}}var Yre=function(u,h,p){{var v=[];for(var y in h){var D=_W(u,y,h[y],p);D||v.push(y)}var E=v.map(function(N){return"`"+N+"`"}).join(", ");v.length===1?r("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",E,u):v.length>1&&r("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",E,u)}};function Zre(u,h,p){hp(u,h)||Yre(u,h,p)}var bW=1,D2=1<<1,EC=1<<2,Qre=bW|D2|EC,TC=null;function Xre(u){TC!==null&&r("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),TC=u}function Jre(){TC===null&&r("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),TC=null}function eae(u){return u===TC}function k2(u){var h=u.target||u.srcElement||window;return h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===Od?h.parentNode:h}var E2=null,$_=null,j_=null;function CW(u){var h=Sf(u);if(!!h){if(typeof E2!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var p=h.stateNode;if(p){var v=Vx(p);E2(h.stateNode,h.type,v)}}}function tae(u){E2=u}function wW(u){$_?j_?j_.push(u):j_=[u]:$_=u}function iae(){return $_!==null||j_!==null}function yW(){if(!!$_){var u=$_,h=j_;if($_=null,j_=null,CW(u),h)for(var p=0;p<h.length;p++)CW(h[p])}}var SW=function(u,h){return u(h)},LW=function(){},T2=!1;function nae(){var u=iae();u&&(LW(),yW())}function xW(u,h,p){if(T2)return u(h,p);T2=!0;try{return SW(u,h,p)}finally{T2=!1,nae()}}function sae(u,h,p){SW=u,LW=p}function oae(u){return u==="button"||u==="input"||u==="select"||u==="textarea"}function rae(u,h,p){switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(p.disabled&&oae(h));default:return!1}}function IC(u,h){var p=u.stateNode;if(p===null)return null;var v=Vx(p);if(v===null)return null;var y=v[h];if(rae(h,u.type,v))return null;if(y&&typeof y!="function")throw new Error("Expected `"+h+"` listener to be a function, instead got a value of `"+typeof y+"` type.");return y}var I2=!1;if(Wt)try{var NC={};Object.defineProperty(NC,"passive",{get:function(){I2=!0}}),window.addEventListener("test",NC,NC),window.removeEventListener("test",NC,NC)}catch{I2=!1}function DW(u,h,p,v,y,D,E,N,P){var K=Array.prototype.slice.call(arguments,3);try{h.apply(p,K)}catch(Z){this.onError(Z)}}var kW=DW;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var N2=document.createElement("react");kW=function(h,p,v,y,D,E,N,P,K){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var Z=document.createEvent("Event"),fe=!1,he=!0,De=window.event,Ee=Object.getOwnPropertyDescriptor(window,"event");function je(){N2.removeEventListener(Ke,ii,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=De)}var Rt=Array.prototype.slice.call(arguments,3);function ii(){fe=!0,je(),p.apply(v,Rt),he=!1}var qt,sn=!1,Ki=!1;function Ce(we){if(qt=we.error,sn=!0,qt===null&&we.colno===0&&we.lineno===0&&(Ki=!0),we.defaultPrevented&&qt!=null&&typeof qt=="object")try{qt._suppressLogging=!0}catch{}}var Ke="react-"+(h||"invokeguardedcallback");if(window.addEventListener("error",Ce),N2.addEventListener(Ke,ii,!1),Z.initEvent(Ke,!1,!1),N2.dispatchEvent(Z),Ee&&Object.defineProperty(window,"event",Ee),fe&&he&&(sn?Ki&&(qt=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):qt=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(qt)),window.removeEventListener("error",Ce),!fe)return je(),DW.apply(this,arguments)}}var aae=kW,K_=!1,nx=null,sx=!1,R2=null,lae={onError:function(u){K_=!0,nx=u}};function A2(u,h,p,v,y,D,E,N,P){K_=!1,nx=null,aae.apply(lae,arguments)}function cae(u,h,p,v,y,D,E,N,P){if(A2.apply(this,arguments),K_){var K=M2();sx||(sx=!0,R2=K)}}function uae(){if(sx){var u=R2;throw sx=!1,R2=null,u}}function dae(){return K_}function M2(){if(K_){var u=nx;return K_=!1,nx=null,u}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function q_(u){return u._reactInternals}function hae(u){return u._reactInternals!==void 0}function fae(u,h){u._reactInternals=h}var li=0,G_=1,no=2,rn=4,fp=16,RC=32,O2=64,Sn=128,Fd=256,mf=512,gp=1024,Cc=2048,Bd=4096,pp=8192,ox=16384,gae=Cc|rn|O2|mf|gp|ox,pae=32767,AC=32768,ta=65536,P2=131072,EW=1048576,F2=2097152,mp=4194304,B2=8388608,Vd=16777216,rx=33554432,V2=rn|gp|0,W2=no|rn|fp|RC|mf|Bd|pp,MC=rn|O2|mf|pp,Y_=Cc|fp,Wd=mp|B2|F2,mae=t.ReactCurrentOwner;function _p(u){var h=u,p=u;if(u.alternate)for(;h.return;)h=h.return;else{var v=h;do h=v,(h.flags&(no|Bd))!==li&&(p=h.return),v=h.return;while(v)}return h.tag===f?p:null}function TW(u){if(u.tag===A){var h=u.memoizedState;if(h===null){var p=u.alternate;p!==null&&(h=p.memoizedState)}if(h!==null)return h.dehydrated}return null}function IW(u){return u.tag===f?u.stateNode.containerInfo:null}function _ae(u){return _p(u)===u}function vae(u){{var h=mae.current;if(h!==null&&h.tag===c){var p=h,v=p.stateNode;v._warnedAboutRefsInRender||r("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",_i(p)||"A component"),v._warnedAboutRefsInRender=!0}}var y=q_(u);return y?_p(y)===y:!1}function NW(u){if(_p(u)!==u)throw new Error("Unable to find node on an unmounted component.")}function RW(u){var h=u.alternate;if(!h){var p=_p(u);if(p===null)throw new Error("Unable to find node on an unmounted component.");return p!==u?null:u}for(var v=u,y=h;;){var D=v.return;if(D===null)break;var E=D.alternate;if(E===null){var N=D.return;if(N!==null){v=y=N;continue}break}if(D.child===E.child){for(var P=D.child;P;){if(P===v)return NW(D),u;if(P===y)return NW(D),h;P=P.sibling}throw new Error("Unable to find node on an unmounted component.")}if(v.return!==y.return)v=D,y=E;else{for(var K=!1,Z=D.child;Z;){if(Z===v){K=!0,v=D,y=E;break}if(Z===y){K=!0,y=D,v=E;break}Z=Z.sibling}if(!K){for(Z=E.child;Z;){if(Z===v){K=!0,v=E,y=D;break}if(Z===y){K=!0,y=E,v=D;break}Z=Z.sibling}if(!K)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(v.alternate!==y)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(v.tag!==f)throw new Error("Unable to find node on an unmounted component.");return v.stateNode.current===v?u:h}function AW(u){var h=RW(u);return h!==null?MW(h):null}function MW(u){if(u.tag===m||u.tag===_)return u;for(var h=u.child;h!==null;){var p=MW(h);if(p!==null)return p;h=h.sibling}return null}function bae(u){var h=RW(u);return h!==null?OW(h):null}function OW(u){if(u.tag===m||u.tag===_)return u;for(var h=u.child;h!==null;){if(h.tag!==g){var p=OW(h);if(p!==null)return p}h=h.sibling}return null}var PW=e.unstable_scheduleCallback,Cae=e.unstable_cancelCallback,wae=e.unstable_shouldYield,yae=e.unstable_requestPaint,qo=e.unstable_now,Sae=e.unstable_getCurrentPriorityLevel,ax=e.unstable_ImmediatePriority,H2=e.unstable_UserBlockingPriority,vp=e.unstable_NormalPriority,Lae=e.unstable_LowPriority,z2=e.unstable_IdlePriority,xae=e.unstable_yieldValue,Dae=e.unstable_setDisableYieldValue,Z_=null,kr=null,kt=null,yu=!1,wc=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function kae(u){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled)return!0;if(!h.supportsFiber)return r("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{tt&&(u=ei({},u,{getLaneLabelMap:Aae,injectProfilingHooks:Rae})),Z_=h.inject(u),kr=h}catch(p){r("React instrumentation encountered an error: %s.",p)}return!!h.checkDCE}function Eae(u,h){if(kr&&typeof kr.onScheduleFiberRoot=="function")try{kr.onScheduleFiberRoot(Z_,u,h)}catch(p){yu||(yu=!0,r("React instrumentation encountered an error: %s",p))}}function Tae(u,h){if(kr&&typeof kr.onCommitFiberRoot=="function")try{var p=(u.current.flags&Sn)===Sn;if(_e){var v;switch(h){case nl:v=ax;break;case zd:v=H2;break;case Ud:v=vp;break;case gx:v=z2;break;default:v=vp;break}kr.onCommitFiberRoot(Z_,u,v,p)}}catch(y){yu||(yu=!0,r("React instrumentation encountered an error: %s",y))}}function Iae(u){if(kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(Z_,u)}catch(h){yu||(yu=!0,r("React instrumentation encountered an error: %s",h))}}function Nae(u){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(Z_,u)}catch(h){yu||(yu=!0,r("React instrumentation encountered an error: %s",h))}}function Go(u){if(typeof xae=="function"&&(Dae(u),n(u)),kr&&typeof kr.setStrictMode=="function")try{kr.setStrictMode(Z_,u)}catch(h){yu||(yu=!0,r("React instrumentation encountered an error: %s",h))}}function Rae(u){kt=u}function Aae(){{for(var u=new Map,h=1,p=0;p<$2;p++){var v=Jae(h);u.set(h,v),h*=2}return u}}function Mae(u){kt!==null&&typeof kt.markCommitStarted=="function"&&kt.markCommitStarted(u)}function FW(){kt!==null&&typeof kt.markCommitStopped=="function"&&kt.markCommitStopped()}function OC(u){kt!==null&&typeof kt.markComponentRenderStarted=="function"&&kt.markComponentRenderStarted(u)}function Q_(){kt!==null&&typeof kt.markComponentRenderStopped=="function"&&kt.markComponentRenderStopped()}function Oae(u){kt!==null&&typeof kt.markComponentPassiveEffectMountStarted=="function"&&kt.markComponentPassiveEffectMountStarted(u)}function Pae(){kt!==null&&typeof kt.markComponentPassiveEffectMountStopped=="function"&&kt.markComponentPassiveEffectMountStopped()}function Fae(u){kt!==null&&typeof kt.markComponentPassiveEffectUnmountStarted=="function"&&kt.markComponentPassiveEffectUnmountStarted(u)}function Bae(){kt!==null&&typeof kt.markComponentPassiveEffectUnmountStopped=="function"&&kt.markComponentPassiveEffectUnmountStopped()}function Vae(u){kt!==null&&typeof kt.markComponentLayoutEffectMountStarted=="function"&&kt.markComponentLayoutEffectMountStarted(u)}function Wae(){kt!==null&&typeof kt.markComponentLayoutEffectMountStopped=="function"&&kt.markComponentLayoutEffectMountStopped()}function BW(u){kt!==null&&typeof kt.markComponentLayoutEffectUnmountStarted=="function"&&kt.markComponentLayoutEffectUnmountStarted(u)}function VW(){kt!==null&&typeof kt.markComponentLayoutEffectUnmountStopped=="function"&&kt.markComponentLayoutEffectUnmountStopped()}function Hae(u,h,p){kt!==null&&typeof kt.markComponentErrored=="function"&&kt.markComponentErrored(u,h,p)}function zae(u,h,p){kt!==null&&typeof kt.markComponentSuspended=="function"&&kt.markComponentSuspended(u,h,p)}function Uae(u){kt!==null&&typeof kt.markLayoutEffectsStarted=="function"&&kt.markLayoutEffectsStarted(u)}function $ae(){kt!==null&&typeof kt.markLayoutEffectsStopped=="function"&&kt.markLayoutEffectsStopped()}function jae(u){kt!==null&&typeof kt.markPassiveEffectsStarted=="function"&&kt.markPassiveEffectsStarted(u)}function Kae(){kt!==null&&typeof kt.markPassiveEffectsStopped=="function"&&kt.markPassiveEffectsStopped()}function WW(u){kt!==null&&typeof kt.markRenderStarted=="function"&&kt.markRenderStarted(u)}function qae(){kt!==null&&typeof kt.markRenderYielded=="function"&&kt.markRenderYielded()}function HW(){kt!==null&&typeof kt.markRenderStopped=="function"&&kt.markRenderStopped()}function Gae(u){kt!==null&&typeof kt.markRenderScheduled=="function"&&kt.markRenderScheduled(u)}function Yae(u,h){kt!==null&&typeof kt.markForceUpdateScheduled=="function"&&kt.markForceUpdateScheduled(u,h)}function U2(u,h){kt!==null&&typeof kt.markStateUpdateScheduled=="function"&&kt.markStateUpdateScheduled(u,h)}var ci=0,tn=1,An=2,so=8,Su=16,zW=Math.clz32?Math.clz32:Xae,Zae=Math.log,Qae=Math.LN2;function Xae(u){var h=u>>>0;return h===0?32:31-(Zae(h)/Qae|0)|0}var $2=31,nt=0,Yo=0,wi=1,X_=2,Hd=4,bp=8,Lu=16,PC=32,J_=4194240,FC=64,j2=128,K2=256,q2=512,G2=1024,Y2=2048,Z2=4096,Q2=8192,X2=16384,J2=32768,eA=65536,tA=131072,iA=262144,nA=524288,sA=1048576,oA=2097152,lx=130023424,ev=4194304,rA=8388608,aA=16777216,lA=33554432,cA=67108864,UW=ev,BC=134217728,$W=268435455,VC=268435456,Cp=536870912,tl=1073741824;function Jae(u){{if(u&wi)return"Sync";if(u&X_)return"InputContinuousHydration";if(u&Hd)return"InputContinuous";if(u&bp)return"DefaultHydration";if(u&Lu)return"Default";if(u&PC)return"TransitionHydration";if(u&J_)return"Transition";if(u&lx)return"Retry";if(u&BC)return"SelectiveHydration";if(u&VC)return"IdleHydration";if(u&Cp)return"Idle";if(u&tl)return"Offscreen"}}var ls=-1,cx=FC,ux=ev;function WC(u){switch(wp(u)){case wi:return wi;case X_:return X_;case Hd:return Hd;case bp:return bp;case Lu:return Lu;case PC:return PC;case FC:case j2:case K2:case q2:case G2:case Y2:case Z2:case Q2:case X2:case J2:case eA:case tA:case iA:case nA:case sA:case oA:return u&J_;case ev:case rA:case aA:case lA:case cA:return u&lx;case BC:return BC;case VC:return VC;case Cp:return Cp;case tl:return tl;default:return r("Should have found matching lanes. This is a bug in React."),u}}function dx(u,h){var p=u.pendingLanes;if(p===nt)return nt;var v=nt,y=u.suspendedLanes,D=u.pingedLanes,E=p&$W;if(E!==nt){var N=E&~y;if(N!==nt)v=WC(N);else{var P=E&D;P!==nt&&(v=WC(P))}}else{var K=p&~y;K!==nt?v=WC(K):D!==nt&&(v=WC(D))}if(v===nt)return nt;if(h!==nt&&h!==v&&(h&y)===nt){var Z=wp(v),fe=wp(h);if(Z>=fe||Z===Lu&&(fe&J_)!==nt)return h}(v&Hd)!==nt&&(v|=p&Lu);var he=u.entangledLanes;if(he!==nt)for(var De=u.entanglements,Ee=v&he;Ee>0;){var je=yp(Ee),Rt=1<<je;v|=De[je],Ee&=~Rt}return v}function ele(u,h){for(var p=u.eventTimes,v=ls;h>0;){var y=yp(h),D=1<<y,E=p[y];E>v&&(v=E),h&=~D}return v}function tle(u,h){switch(u){case wi:case X_:case Hd:return h+250;case bp:case Lu:case PC:case FC:case j2:case K2:case q2:case G2:case Y2:case Z2:case Q2:case X2:case J2:case eA:case tA:case iA:case nA:case sA:case oA:return h+5e3;case ev:case rA:case aA:case lA:case cA:return ls;case BC:case VC:case Cp:case tl:return ls;default:return r("Should have found matching lanes. This is a bug in React."),ls}}function ile(u,h){for(var p=u.pendingLanes,v=u.suspendedLanes,y=u.pingedLanes,D=u.expirationTimes,E=p;E>0;){var N=yp(E),P=1<<N,K=D[N];K===ls?((P&v)===nt||(P&y)!==nt)&&(D[N]=tle(P,h)):K<=h&&(u.expiredLanes|=P),E&=~P}}function nle(u){return WC(u.pendingLanes)}function uA(u){var h=u.pendingLanes&~tl;return h!==nt?h:h&tl?tl:nt}function sle(u){return(u&wi)!==nt}function dA(u){return(u&$W)!==nt}function jW(u){return(u&lx)===u}function ole(u){var h=wi|Hd|Lu;return(u&h)===nt}function rle(u){return(u&J_)===u}function hx(u,h){var p=X_|Hd|bp|Lu;return(h&p)!==nt}function ale(u,h){return(h&u.expiredLanes)!==nt}function KW(u){return(u&J_)!==nt}function qW(){var u=cx;return cx<<=1,(cx&J_)===nt&&(cx=FC),u}function lle(){var u=ux;return ux<<=1,(ux&lx)===nt&&(ux=ev),u}function wp(u){return u&-u}function HC(u){return wp(u)}function yp(u){return 31-zW(u)}function hA(u){return yp(u)}function il(u,h){return(u&h)!==nt}function tv(u,h){return(u&h)===h}function Hi(u,h){return u|h}function fx(u,h){return u&~h}function GW(u,h){return u&h}function HWe(u){return u}function cle(u,h){return u!==Yo&&u<h?u:h}function fA(u){for(var h=[],p=0;p<$2;p++)h.push(u);return h}function zC(u,h,p){u.pendingLanes|=h,h!==Cp&&(u.suspendedLanes=nt,u.pingedLanes=nt);var v=u.eventTimes,y=hA(h);v[y]=p}function ule(u,h){u.suspendedLanes|=h,u.pingedLanes&=~h;for(var p=u.expirationTimes,v=h;v>0;){var y=yp(v),D=1<<y;p[y]=ls,v&=~D}}function YW(u,h,p){u.pingedLanes|=u.suspendedLanes&h}function dle(u,h){var p=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=nt,u.pingedLanes=nt,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h;for(var v=u.entanglements,y=u.eventTimes,D=u.expirationTimes,E=p;E>0;){var N=yp(E),P=1<<N;v[N]=nt,y[N]=ls,D[N]=ls,E&=~P}}function gA(u,h){for(var p=u.entangledLanes|=h,v=u.entanglements,y=p;y;){var D=yp(y),E=1<<D;E&h|v[D]&h&&(v[D]|=h),y&=~E}}function hle(u,h){var p=wp(h),v;switch(p){case Hd:v=X_;break;case Lu:v=bp;break;case FC:case j2:case K2:case q2:case G2:case Y2:case Z2:case Q2:case X2:case J2:case eA:case tA:case iA:case nA:case sA:case oA:case ev:case rA:case aA:case lA:case cA:v=PC;break;case Cp:v=VC;break;default:v=Yo;break}return(v&(u.suspendedLanes|h))!==Yo?Yo:v}function ZW(u,h,p){if(!!wc)for(var v=u.pendingUpdatersLaneMap;p>0;){var y=hA(p),D=1<<y,E=v[y];E.add(h),p&=~D}}function QW(u,h){if(!!wc)for(var p=u.pendingUpdatersLaneMap,v=u.memoizedUpdaters;h>0;){var y=hA(h),D=1<<y,E=p[y];E.size>0&&(E.forEach(function(N){var P=N.alternate;(P===null||!v.has(P))&&v.add(N)}),E.clear()),h&=~D}}function XW(u,h){return null}var nl=wi,zd=Hd,Ud=Lu,gx=Cp,UC=Yo;function yc(){return UC}function Zo(u){UC=u}function fle(u,h){var p=UC;try{return UC=u,h()}finally{UC=p}}function gle(u,h){return u!==0&&u<h?u:h}function ple(u,h){return u===0||u>h?u:h}function pA(u,h){return u!==0&&u<h}function JW(u){var h=wp(u);return pA(nl,h)?pA(zd,h)?dA(h)?Ud:gx:zd:nl}function px(u){var h=u.current.memoizedState;return h.isDehydrated}var eH;function mle(u){eH=u}function _le(u){eH(u)}var mA;function vle(u){mA=u}var tH;function ble(u){tH=u}var iH;function Cle(u){iH=u}var nH;function wle(u){nH=u}var _A=!1,mx=[],_f=null,vf=null,bf=null,$C=new Map,jC=new Map,Cf=[],yle=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function Sle(u){return yle.indexOf(u)>-1}function Lle(u,h,p,v,y){return{blockedOn:u,domEventName:h,eventSystemFlags:p,nativeEvent:y,targetContainers:[v]}}function sH(u,h){switch(u){case"focusin":case"focusout":_f=null;break;case"dragenter":case"dragleave":vf=null;break;case"mouseover":case"mouseout":bf=null;break;case"pointerover":case"pointerout":{var p=h.pointerId;$C.delete(p);break}case"gotpointercapture":case"lostpointercapture":{var v=h.pointerId;jC.delete(v);break}}}function KC(u,h,p,v,y,D){if(u===null||u.nativeEvent!==D){var E=Lle(h,p,v,y,D);if(h!==null){var N=Sf(h);N!==null&&mA(N)}return E}u.eventSystemFlags|=v;var P=u.targetContainers;return y!==null&&P.indexOf(y)===-1&&P.push(y),u}function xle(u,h,p,v,y){switch(h){case"focusin":{var D=y;return _f=KC(_f,u,h,p,v,D),!0}case"dragenter":{var E=y;return vf=KC(vf,u,h,p,v,E),!0}case"mouseover":{var N=y;return bf=KC(bf,u,h,p,v,N),!0}case"pointerover":{var P=y,K=P.pointerId;return $C.set(K,KC($C.get(K)||null,u,h,p,v,P)),!0}case"gotpointercapture":{var Z=y,fe=Z.pointerId;return jC.set(fe,KC(jC.get(fe)||null,u,h,p,v,Z)),!0}}return!1}function oH(u){var h=xp(u.target);if(h!==null){var p=_p(h);if(p!==null){var v=p.tag;if(v===A){var y=TW(p);if(y!==null){u.blockedOn=y,nH(u.priority,function(){tH(p)});return}}else if(v===f){var D=p.stateNode;if(px(D)){u.blockedOn=IW(p);return}}}}u.blockedOn=null}function Dle(u){for(var h=iH(),p={blockedOn:null,target:u,priority:h},v=0;v<Cf.length&&pA(h,Cf[v].priority);v++);Cf.splice(v,0,p),v===0&&oH(p)}function _x(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;h.length>0;){var p=h[0],v=CA(u.domEventName,u.eventSystemFlags,p,u.nativeEvent);if(v===null){var y=u.nativeEvent,D=new y.constructor(y.type,y);Xre(D),y.target.dispatchEvent(D),Jre()}else{var E=Sf(v);return E!==null&&mA(E),u.blockedOn=v,!1}h.shift()}return!0}function rH(u,h,p){_x(u)&&p.delete(h)}function kle(){_A=!1,_f!==null&&_x(_f)&&(_f=null),vf!==null&&_x(vf)&&(vf=null),bf!==null&&_x(bf)&&(bf=null),$C.forEach(rH),jC.forEach(rH)}function qC(u,h){u.blockedOn===h&&(u.blockedOn=null,_A||(_A=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,kle)))}function GC(u){if(mx.length>0){qC(mx[0],u);for(var h=1;h<mx.length;h++){var p=mx[h];p.blockedOn===u&&(p.blockedOn=null)}}_f!==null&&qC(_f,u),vf!==null&&qC(vf,u),bf!==null&&qC(bf,u);var v=function(N){return qC(N,u)};$C.forEach(v),jC.forEach(v);for(var y=0;y<Cf.length;y++){var D=Cf[y];D.blockedOn===u&&(D.blockedOn=null)}for(;Cf.length>0;){var E=Cf[0];if(E.blockedOn!==null)break;oH(E),E.blockedOn===null&&Cf.shift()}}var iv=t.ReactCurrentBatchConfig,vA=!0;function aH(u){vA=!!u}function Ele(){return vA}function Tle(u,h,p){var v=lH(h),y;switch(v){case nl:y=Ile;break;case zd:y=Nle;break;case Ud:default:y=bA;break}return y.bind(null,h,p,u)}function Ile(u,h,p,v){var y=yc(),D=iv.transition;iv.transition=null;try{Zo(nl),bA(u,h,p,v)}finally{Zo(y),iv.transition=D}}function Nle(u,h,p,v){var y=yc(),D=iv.transition;iv.transition=null;try{Zo(zd),bA(u,h,p,v)}finally{Zo(y),iv.transition=D}}function bA(u,h,p,v){!vA||Rle(u,h,p,v)}function Rle(u,h,p,v){var y=CA(u,h,p,v);if(y===null){MA(u,h,v,vx,p),sH(u,v);return}if(xle(y,u,h,p,v)){v.stopPropagation();return}if(sH(u,v),h&EC&&Sle(u)){for(;y!==null;){var D=Sf(y);D!==null&&_le(D);var E=CA(u,h,p,v);if(E===null&&MA(u,h,v,vx,p),E===y)break;y=E}y!==null&&v.stopPropagation();return}MA(u,h,v,null,p)}var vx=null;function CA(u,h,p,v){vx=null;var y=k2(v),D=xp(y);if(D!==null){var E=_p(D);if(E===null)D=null;else{var N=E.tag;if(N===A){var P=TW(E);if(P!==null)return P;D=null}else if(N===f){var K=E.stateNode;if(px(K))return IW(E);D=null}else E!==D&&(D=null)}}return vx=D,null}function lH(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return nl;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return zd;case"message":{var h=Sae();switch(h){case ax:return nl;case H2:return zd;case vp:case Lae:return Ud;case z2:return gx;default:return Ud}}default:return Ud}}function Ale(u,h,p){return u.addEventListener(h,p,!1),p}function Mle(u,h,p){return u.addEventListener(h,p,!0),p}function Ole(u,h,p,v){return u.addEventListener(h,p,{capture:!0,passive:v}),p}function Ple(u,h,p,v){return u.addEventListener(h,p,{passive:v}),p}var YC=null,wA=null,ZC=null;function Fle(u){return YC=u,wA=uH(),!0}function Ble(){YC=null,wA=null,ZC=null}function cH(){if(ZC)return ZC;var u,h=wA,p=h.length,v,y=uH(),D=y.length;for(u=0;u<p&&h[u]===y[u];u++);var E=p-u;for(v=1;v<=E&&h[p-v]===y[D-v];v++);var N=v>1?1-v:void 0;return ZC=y.slice(u,N),ZC}function uH(){return"value"in YC?YC.value:YC.textContent}function bx(u){var h,p=u.keyCode;return"charCode"in u?(h=u.charCode,h===0&&p===13&&(h=13)):h=p,h===10&&(h=13),h>=32||h===13?h:0}function Cx(){return!0}function dH(){return!1}function sl(u){function h(p,v,y,D,E){this._reactName=p,this._targetInst=y,this.type=v,this.nativeEvent=D,this.target=E,this.currentTarget=null;for(var N in u)if(!!u.hasOwnProperty(N)){var P=u[N];P?this[N]=P(D):this[N]=D[N]}var K=D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1;return K?this.isDefaultPrevented=Cx:this.isDefaultPrevented=dH,this.isPropagationStopped=dH,this}return ei(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;!p||(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Cx)},stopPropagation:function(){var p=this.nativeEvent;!p||(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Cx)},persist:function(){},isPersistent:Cx}),h}var nv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yA=sl(nv),QC=ei({},nv,{view:0,detail:0}),Vle=sl(QC),SA,LA,XC;function Wle(u){u!==XC&&(XC&&u.type==="mousemove"?(SA=u.screenX-XC.screenX,LA=u.screenY-XC.screenY):(SA=0,LA=0),XC=u)}var wx=ei({},QC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DA,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(Wle(u),SA)},movementY:function(u){return"movementY"in u?u.movementY:LA}}),hH=sl(wx),Hle=ei({},wx,{dataTransfer:0}),zle=sl(Hle),Ule=ei({},QC,{relatedTarget:0}),xA=sl(Ule),$le=ei({},nv,{animationName:0,elapsedTime:0,pseudoElement:0}),jle=sl($le),Kle=ei({},nv,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),qle=sl(Kle),Gle=ei({},nv,{data:0}),fH=sl(Gle),Yle=fH,Zle={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function Xle(u){if(u.key){var h=Zle[u.key]||u.key;if(h!=="Unidentified")return h}if(u.type==="keypress"){var p=bx(u);return p===13?"Enter":String.fromCharCode(p)}return u.type==="keydown"||u.type==="keyup"?Qle[u.keyCode]||"Unidentified":""}var Jle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ece(u){var h=this,p=h.nativeEvent;if(p.getModifierState)return p.getModifierState(u);var v=Jle[u];return v?!!p[v]:!1}function DA(u){return ece}var tce=ei({},QC,{key:Xle,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DA,charCode:function(u){return u.type==="keypress"?bx(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?bx(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),ice=sl(tce),nce=ei({},wx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gH=sl(nce),sce=ei({},QC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DA}),oce=sl(sce),rce=ei({},nv,{propertyName:0,elapsedTime:0,pseudoElement:0}),ace=sl(rce),lce=ei({},wx,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),cce=sl(lce),uce=[9,13,27,32],pH=229,kA=Wt&&"CompositionEvent"in window,JC=null;Wt&&"documentMode"in document&&(JC=document.documentMode);var dce=Wt&&"TextEvent"in window&&!JC,mH=Wt&&(!kA||JC&&JC>8&&JC<=11),_H=32,vH=String.fromCharCode(_H);function hce(){qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),qe("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),qe("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),qe("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var bH=!1;function fce(u){return(u.ctrlKey||u.altKey||u.metaKey)&&!(u.ctrlKey&&u.altKey)}function gce(u){switch(u){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function pce(u,h){return u==="keydown"&&h.keyCode===pH}function CH(u,h){switch(u){case"keyup":return uce.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==pH;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wH(u){var h=u.detail;return typeof h=="object"&&"data"in h?h.data:null}function yH(u){return u.locale==="ko"}var sv=!1;function mce(u,h,p,v,y){var D,E;if(kA?D=gce(h):sv?CH(h,v)&&(D="onCompositionEnd"):pce(h,v)&&(D="onCompositionStart"),!D)return null;mH&&!yH(v)&&(!sv&&D==="onCompositionStart"?sv=Fle(y):D==="onCompositionEnd"&&sv&&(E=cH()));var N=Dx(p,D);if(N.length>0){var P=new fH(D,h,null,v,y);if(u.push({event:P,listeners:N}),E)P.data=E;else{var K=wH(v);K!==null&&(P.data=K)}}}function _ce(u,h){switch(u){case"compositionend":return wH(h);case"keypress":var p=h.which;return p!==_H?null:(bH=!0,vH);case"textInput":var v=h.data;return v===vH&&bH?null:v;default:return null}}function vce(u,h){if(sv){if(u==="compositionend"||!kA&&CH(u,h)){var p=cH();return Ble(),sv=!1,p}return null}switch(u){case"paste":return null;case"keypress":if(!fce(h)){if(h.char&&h.char.length>1)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return mH&&!yH(h)?null:h.data;default:return null}}function bce(u,h,p,v,y){var D;if(dce?D=_ce(h,v):D=vce(h,v),!D)return null;var E=Dx(p,"onBeforeInput");if(E.length>0){var N=new Yle("onBeforeInput","beforeinput",null,v,y);u.push({event:N,listeners:E}),N.data=D}}function Cce(u,h,p,v,y,D,E){mce(u,h,p,v,y),bce(u,h,p,v,y)}var wce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SH(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!wce[u.type]:h==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function yce(u){if(!Wt)return!1;var h="on"+u,p=h in document;if(!p){var v=document.createElement("div");v.setAttribute(h,"return;"),p=typeof v[h]=="function"}return p}function Sce(){qe("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function LH(u,h,p,v){wW(v);var y=Dx(h,"onChange");if(y.length>0){var D=new yA("onChange","change",null,p,v);u.push({event:D,listeners:y})}}var e1=null,t1=null;function Lce(u){var h=u.nodeName&&u.nodeName.toLowerCase();return h==="select"||h==="input"&&u.type==="file"}function xce(u){var h=[];LH(h,t1,u,k2(u)),xW(Dce,h)}function Dce(u){zH(u,0)}function yx(u){var h=uv(u);if(V_(h))return u}function kce(u,h){if(u==="change")return h}var xH=!1;Wt&&(xH=yce("input")&&(!document.documentMode||document.documentMode>9));function Ece(u,h){e1=u,t1=h,e1.attachEvent("onpropertychange",kH)}function DH(){!e1||(e1.detachEvent("onpropertychange",kH),e1=null,t1=null)}function kH(u){u.propertyName==="value"&&yx(t1)&&xce(u)}function Tce(u,h,p){u==="focusin"?(DH(),Ece(h,p)):u==="focusout"&&DH()}function Ice(u,h){if(u==="selectionchange"||u==="keyup"||u==="keydown")return yx(t1)}function Nce(u){var h=u.nodeName;return h&&h.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")}function Rce(u,h){if(u==="click")return yx(h)}function Ace(u,h){if(u==="input"||u==="change")return yx(h)}function Mce(u){var h=u._wrapperState;!h||!h.controlled||u.type!=="number"||Ci(u,"number",u.value)}function Oce(u,h,p,v,y,D,E){var N=p?uv(p):window,P,K;if(Lce(N)?P=kce:SH(N)?xH?P=Ace:(P=Ice,K=Tce):Nce(N)&&(P=Rce),P){var Z=P(h,p);if(Z){LH(u,Z,v,y);return}}K&&K(h,N,p),h==="focusout"&&Mce(N)}function Pce(){Fe("onMouseEnter",["mouseout","mouseover"]),Fe("onMouseLeave",["mouseout","mouseover"]),Fe("onPointerEnter",["pointerout","pointerover"]),Fe("onPointerLeave",["pointerout","pointerover"])}function Fce(u,h,p,v,y,D,E){var N=h==="mouseover"||h==="pointerover",P=h==="mouseout"||h==="pointerout";if(N&&!eae(v)){var K=v.relatedTarget||v.fromElement;if(K&&(xp(K)||m1(K)))return}if(!(!P&&!N)){var Z;if(y.window===y)Z=y;else{var fe=y.ownerDocument;fe?Z=fe.defaultView||fe.parentWindow:Z=window}var he,De;if(P){var Ee=v.relatedTarget||v.toElement;if(he=p,De=Ee?xp(Ee):null,De!==null){var je=_p(De);(De!==je||De.tag!==m&&De.tag!==_)&&(De=null)}}else he=null,De=p;if(he!==De){var Rt=hH,ii="onMouseLeave",qt="onMouseEnter",sn="mouse";(h==="pointerout"||h==="pointerover")&&(Rt=gH,ii="onPointerLeave",qt="onPointerEnter",sn="pointer");var Ki=he==null?Z:uv(he),Ce=De==null?Z:uv(De),Ke=new Rt(ii,sn+"leave",he,v,y);Ke.target=Ki,Ke.relatedTarget=Ce;var we=null,at=xp(y);if(at===p){var At=new Rt(qt,sn+"enter",De,v,y);At.target=Ce,At.relatedTarget=Ki,we=At}aue(u,Ke,we,he,De)}}}function Bce(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var ol=typeof Object.is=="function"?Object.is:Bce;function i1(u,h){if(ol(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var p=Object.keys(u),v=Object.keys(h);if(p.length!==v.length)return!1;for(var y=0;y<p.length;y++){var D=p[y];if(!Kt.call(h,D)||!ol(u[D],h[D]))return!1}return!0}function EH(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Vce(u){for(;u;){if(u.nextSibling)return u.nextSibling;u=u.parentNode}}function TH(u,h){for(var p=EH(u),v=0,y=0;p;){if(p.nodeType===Od){if(y=v+p.textContent.length,v<=h&&y>=h)return{node:p,offset:h-v};v=y}p=EH(Vce(p))}}function Wce(u){var h=u.ownerDocument,p=h&&h.defaultView||window,v=p.getSelection&&p.getSelection();if(!v||v.rangeCount===0)return null;var y=v.anchorNode,D=v.anchorOffset,E=v.focusNode,N=v.focusOffset;try{y.nodeType,E.nodeType}catch{return null}return Hce(u,y,D,E,N)}function Hce(u,h,p,v,y){var D=0,E=-1,N=-1,P=0,K=0,Z=u,fe=null;e:for(;;){for(var he=null;Z===h&&(p===0||Z.nodeType===Od)&&(E=D+p),Z===v&&(y===0||Z.nodeType===Od)&&(N=D+y),Z.nodeType===Od&&(D+=Z.nodeValue.length),(he=Z.firstChild)!==null;)fe=Z,Z=he;for(;;){if(Z===u)break e;if(fe===h&&++P===p&&(E=D),fe===v&&++K===y&&(N=D),(he=Z.nextSibling)!==null)break;Z=fe,fe=Z.parentNode}Z=he}return E===-1||N===-1?null:{start:E,end:N}}function zce(u,h){var p=u.ownerDocument||document,v=p&&p.defaultView||window;if(!!v.getSelection){var y=v.getSelection(),D=u.textContent.length,E=Math.min(h.start,D),N=h.end===void 0?E:Math.min(h.end,D);if(!y.extend&&E>N){var P=N;N=E,E=P}var K=TH(u,E),Z=TH(u,N);if(K&&Z){if(y.rangeCount===1&&y.anchorNode===K.node&&y.anchorOffset===K.offset&&y.focusNode===Z.node&&y.focusOffset===Z.offset)return;var fe=p.createRange();fe.setStart(K.node,K.offset),y.removeAllRanges(),E>N?(y.addRange(fe),y.extend(Z.node,Z.offset)):(fe.setEnd(Z.node,Z.offset),y.addRange(fe))}}}function IH(u){return u&&u.nodeType===Od}function NH(u,h){return!u||!h?!1:u===h?!0:IH(u)?!1:IH(h)?NH(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1}function Uce(u){return u&&u.ownerDocument&&NH(u.ownerDocument.documentElement,u)}function $ce(u){try{return typeof u.contentWindow.location.href=="string"}catch{return!1}}function RH(){for(var u=window,h=gf();h instanceof u.HTMLIFrameElement;){if($ce(h))u=h.contentWindow;else return h;h=gf(u.document)}return h}function EA(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}function jce(){var u=RH();return{focusedElem:u,selectionRange:EA(u)?qce(u):null}}function Kce(u){var h=RH(),p=u.focusedElem,v=u.selectionRange;if(h!==p&&Uce(p)){v!==null&&EA(p)&&Gce(p,v);for(var y=[],D=p;D=D.parentNode;)D.nodeType===xa&&y.push({element:D,left:D.scrollLeft,top:D.scrollTop});typeof p.focus=="function"&&p.focus();for(var E=0;E<y.length;E++){var N=y[E];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}}function qce(u){var h;return"selectionStart"in u?h={start:u.selectionStart,end:u.selectionEnd}:h=Wce(u),h||{start:0,end:0}}function Gce(u,h){var p=h.start,v=h.end;v===void 0&&(v=p),"selectionStart"in u?(u.selectionStart=p,u.selectionEnd=Math.min(v,u.value.length)):zce(u,h)}var Yce=Wt&&"documentMode"in document&&document.documentMode<=11;function Zce(){qe("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var ov=null,TA=null,n1=null,IA=!1;function Qce(u){if("selectionStart"in u&&EA(u))return{start:u.selectionStart,end:u.selectionEnd};var h=u.ownerDocument&&u.ownerDocument.defaultView||window,p=h.getSelection();return{anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}}function Xce(u){return u.window===u?u.document:u.nodeType===Pd?u:u.ownerDocument}function AH(u,h,p){var v=Xce(p);if(!(IA||ov==null||ov!==gf(v))){var y=Qce(ov);if(!n1||!i1(n1,y)){n1=y;var D=Dx(TA,"onSelect");if(D.length>0){var E=new yA("onSelect","select",null,h,p);u.push({event:E,listeners:D}),E.target=ov}}}}function Jce(u,h,p,v,y,D,E){var N=p?uv(p):window;switch(h){case"focusin":(SH(N)||N.contentEditable==="true")&&(ov=N,TA=p,n1=null);break;case"focusout":ov=null,TA=null,n1=null;break;case"mousedown":IA=!0;break;case"contextmenu":case"mouseup":case"dragend":IA=!1,AH(u,v,y);break;case"selectionchange":if(Yce)break;case"keydown":case"keyup":AH(u,v,y)}}function Sx(u,h){var p={};return p[u.toLowerCase()]=h.toLowerCase(),p["Webkit"+u]="webkit"+h,p["Moz"+u]="moz"+h,p}var rv={animationend:Sx("Animation","AnimationEnd"),animationiteration:Sx("Animation","AnimationIteration"),animationstart:Sx("Animation","AnimationStart"),transitionend:Sx("Transition","TransitionEnd")},NA={},MH={};Wt&&(MH=document.createElement("div").style,"AnimationEvent"in window||(delete rv.animationend.animation,delete rv.animationiteration.animation,delete rv.animationstart.animation),"TransitionEvent"in window||delete rv.transitionend.transition);function Lx(u){if(NA[u])return NA[u];if(!rv[u])return u;var h=rv[u];for(var p in h)if(h.hasOwnProperty(p)&&p in MH)return NA[u]=h[p];return u}var OH=Lx("animationend"),PH=Lx("animationiteration"),FH=Lx("animationstart"),BH=Lx("transitionend"),VH=new Map,WH=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function wf(u,h){VH.set(u,h),qe(h,[u])}function eue(){for(var u=0;u<WH.length;u++){var h=WH[u],p=h.toLowerCase(),v=h[0].toUpperCase()+h.slice(1);wf(p,"on"+v)}wf(OH,"onAnimationEnd"),wf(PH,"onAnimationIteration"),wf(FH,"onAnimationStart"),wf("dblclick","onDoubleClick"),wf("focusin","onFocus"),wf("focusout","onBlur"),wf(BH,"onTransitionEnd")}function tue(u,h,p,v,y,D,E){var N=VH.get(h);if(N!==void 0){var P=yA,K=h;switch(h){case"keypress":if(bx(v)===0)return;case"keydown":case"keyup":P=ice;break;case"focusin":K="focus",P=xA;break;case"focusout":K="blur",P=xA;break;case"beforeblur":case"afterblur":P=xA;break;case"click":if(v.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=hH;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=zle;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=oce;break;case OH:case PH:case FH:P=jle;break;case BH:P=ace;break;case"scroll":P=Vle;break;case"wheel":P=cce;break;case"copy":case"cut":case"paste":P=qle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=gH;break}var Z=(D&EC)!==0;{var fe=!Z&&h==="scroll",he=oue(p,N,v.type,Z,fe);if(he.length>0){var De=new P(N,K,null,v,y);u.push({event:De,listeners:he})}}}}eue(),Pce(),Sce(),Zce(),hce();function iue(u,h,p,v,y,D,E){tue(u,h,p,v,y,D);var N=(D&Qre)===0;N&&(Fce(u,h,p,v,y),Oce(u,h,p,v,y),Jce(u,h,p,v,y),Cce(u,h,p,v,y))}var s1=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],RA=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(s1));function HH(u,h,p){var v=u.type||"unknown-event";u.currentTarget=p,cae(v,h,void 0,u),u.currentTarget=null}function nue(u,h,p){var v;if(p)for(var y=h.length-1;y>=0;y--){var D=h[y],E=D.instance,N=D.currentTarget,P=D.listener;if(E!==v&&u.isPropagationStopped())return;HH(u,P,N),v=E}else for(var K=0;K<h.length;K++){var Z=h[K],fe=Z.instance,he=Z.currentTarget,De=Z.listener;if(fe!==v&&u.isPropagationStopped())return;HH(u,De,he),v=fe}}function zH(u,h){for(var p=(h&EC)!==0,v=0;v<u.length;v++){var y=u[v],D=y.event,E=y.listeners;nue(D,E,p)}uae()}function sue(u,h,p,v,y){var D=k2(p),E=[];iue(E,u,v,p,D,h),zH(E,h)}function vs(u,h){RA.has(u)||r('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',u);var p=!1,v=Mde(h),y=lue(u,p);v.has(y)||(UH(h,u,D2,p),v.add(y))}function AA(u,h,p){RA.has(u)&&!h&&r('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',u);var v=0;h&&(v|=EC),UH(p,u,v,h)}var xx="_reactListening"+Math.random().toString(36).slice(2);function o1(u){if(!u[xx]){u[xx]=!0,Ne.forEach(function(p){p!=="selectionchange"&&(RA.has(p)||AA(p,!1,u),AA(p,!0,u))});var h=u.nodeType===Pd?u:u.ownerDocument;h!==null&&(h[xx]||(h[xx]=!0,AA("selectionchange",!1,h)))}}function UH(u,h,p,v,y){var D=Tle(u,h,p),E=void 0;I2&&(h==="touchstart"||h==="touchmove"||h==="wheel")&&(E=!0),u=u,v?E!==void 0?Ole(u,h,D,E):Mle(u,h,D):E!==void 0?Ple(u,h,D,E):Ale(u,h,D)}function $H(u,h){return u===h||u.nodeType===io&&u.parentNode===h}function MA(u,h,p,v,y){var D=v;if((h&bW)===0&&(h&D2)===0){var E=y;if(v!==null){var N=v;e:for(;;){if(N===null)return;var P=N.tag;if(P===f||P===g){var K=N.stateNode.containerInfo;if($H(K,E))break;if(P===g)for(var Z=N.return;Z!==null;){var fe=Z.tag;if(fe===f||fe===g){var he=Z.stateNode.containerInfo;if($H(he,E))return}Z=Z.return}for(;K!==null;){var De=xp(K);if(De===null)return;var Ee=De.tag;if(Ee===m||Ee===_){N=D=De;continue e}K=K.parentNode}}N=N.return}}}xW(function(){return sue(u,h,p,D)})}function r1(u,h,p){return{instance:u,listener:h,currentTarget:p}}function oue(u,h,p,v,y,D){for(var E=h!==null?h+"Capture":null,N=v?E:h,P=[],K=u,Z=null;K!==null;){var fe=K,he=fe.stateNode,De=fe.tag;if(De===m&&he!==null&&(Z=he,N!==null)){var Ee=IC(K,N);Ee!=null&&P.push(r1(K,Ee,Z))}if(y)break;K=K.return}return P}function Dx(u,h){for(var p=h+"Capture",v=[],y=u;y!==null;){var D=y,E=D.stateNode,N=D.tag;if(N===m&&E!==null){var P=E,K=IC(y,p);K!=null&&v.unshift(r1(y,K,P));var Z=IC(y,h);Z!=null&&v.push(r1(y,Z,P))}y=y.return}return v}function av(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==m);return u||null}function rue(u,h){for(var p=u,v=h,y=0,D=p;D;D=av(D))y++;for(var E=0,N=v;N;N=av(N))E++;for(;y-E>0;)p=av(p),y--;for(;E-y>0;)v=av(v),E--;for(var P=y;P--;){if(p===v||v!==null&&p===v.alternate)return p;p=av(p),v=av(v)}return null}function jH(u,h,p,v,y){for(var D=h._reactName,E=[],N=p;N!==null&&N!==v;){var P=N,K=P.alternate,Z=P.stateNode,fe=P.tag;if(K!==null&&K===v)break;if(fe===m&&Z!==null){var he=Z;if(y){var De=IC(N,D);De!=null&&E.unshift(r1(N,De,he))}else if(!y){var Ee=IC(N,D);Ee!=null&&E.push(r1(N,Ee,he))}}N=N.return}E.length!==0&&u.push({event:h,listeners:E})}function aue(u,h,p,v,y){var D=v&&y?rue(v,y):null;v!==null&&jH(u,h,v,D,!1),y!==null&&p!==null&&jH(u,p,y,D,!0)}function lue(u,h){return u+"__"+(h?"capture":"bubble")}var Da=!1,a1="dangerouslySetInnerHTML",kx="suppressContentEditableWarning",yf="suppressHydrationWarning",KH="autoFocus",Sp="children",Lp="style",Ex="__html",OA,Tx,l1,qH,Ix,GH,YH;OA={dialog:!0,webview:!0},Tx=function(u,h){$re(u,h),jre(u,h),Zre(u,h,{registrationNameDependencies:bt,possibleRegistrationNames:mt})},GH=Wt&&!document.documentMode,l1=function(u,h,p){if(!Da){var v=Nx(p),y=Nx(h);y!==v&&(Da=!0,r("Prop `%s` did not match. Server: %s Client: %s",u,JSON.stringify(y),JSON.stringify(v)))}},qH=function(u){if(!Da){Da=!0;var h=[];u.forEach(function(p){h.push(p)}),r("Extra attributes from the server: %s",h)}},Ix=function(u,h){h===!1?r("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",u,u,u):r("Expected `%s` listener to be a function, instead got a value of `%s` type.",u,typeof h)},YH=function(u,h){var p=u.namespaceURI===Md?u.ownerDocument.createElement(u.tagName):u.ownerDocument.createElementNS(u.namespaceURI,u.tagName);return p.innerHTML=h,p.innerHTML};var cue=/\r\n?/g,uue=/\u0000|\uFFFD/g;function Nx(u){ne(u);var h=typeof u=="string"?u:""+u;return h.replace(cue,`
`).replace(uue,"")}function Rx(u,h,p,v){var y=Nx(h),D=Nx(u);if(D!==y&&(v&&(Da||(Da=!0,r('Text content did not match. Server: "%s" Client: "%s"',D,y))),p&&pe))throw new Error("Text content does not match server-rendered HTML.")}function ZH(u){return u.nodeType===Pd?u:u.ownerDocument}function due(){}function Ax(u){u.onclick=due}function hue(u,h,p,v,y){for(var D in v)if(!!v.hasOwnProperty(D)){var E=v[D];if(D===Lp)E&&Object.freeze(E),fW(h,E);else if(D===a1){var N=E?E[Ex]:void 0;N!=null&&lW(h,N)}else if(D===Sp)if(typeof E=="string"){var P=u!=="textarea"||E!=="";P&&tx(h,E)}else typeof E=="number"&&tx(h,""+E);else D===kx||D===yf||D===KH||(bt.hasOwnProperty(D)?E!=null&&(typeof E!="function"&&Ix(D,E),D==="onScroll"&&vs("scroll",h)):E!=null&&Bl(h,D,E,y))}}function fue(u,h,p,v){for(var y=0;y<h.length;y+=2){var D=h[y],E=h[y+1];D===Lp?fW(u,E):D===a1?lW(u,E):D===Sp?tx(u,E):Bl(u,D,E,v)}}function gue(u,h,p,v){var y,D=ZH(p),E,N=v;if(N===Md&&(N=C2(u)),N===Md){if(y=hp(u,h),!y&&u!==u.toLowerCase()&&r("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",u),u==="script"){var P=D.createElement("div");P.innerHTML="<script><\/script>";var K=P.firstChild;E=P.removeChild(K)}else if(typeof h.is=="string")E=D.createElement(u,{is:h.is});else if(E=D.createElement(u),u==="select"){var Z=E;h.multiple?Z.multiple=!0:h.size&&(Z.size=h.size)}}else E=D.createElementNS(N,u);return N===Md&&!y&&Object.prototype.toString.call(E)==="[object HTMLUnknownElement]"&&!Kt.call(OA,u)&&(OA[u]=!0,r("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",u)),E}function pue(u,h){return ZH(h).createTextNode(u)}function mue(u,h,p,v){var y=hp(h,p);Tx(h,p);var D;switch(h){case"dialog":vs("cancel",u),vs("close",u),D=p;break;case"iframe":case"object":case"embed":vs("load",u),D=p;break;case"video":case"audio":for(var E=0;E<s1.length;E++)vs(s1[E],u);D=p;break;case"source":vs("error",u),D=p;break;case"img":case"image":case"link":vs("error",u),vs("load",u),D=p;break;case"details":vs("toggle",u),D=p;break;case"input":re(u,p),D=F(u,p),vs("invalid",u);break;case"option":Jn(u,p),D=p;break;case"select":DC(u,p),D=xC(u,p),vs("invalid",u);break;case"textarea":oW(u,p),D=v2(u,p),vs("invalid",u);break;default:D=p}switch(x2(h,D),hue(h,u,v,D,y),h){case"input":Rd(u),ft(u,p,!1);break;case"textarea":Rd(u),aW(u);break;case"option":_s(u,p);break;case"select":_2(u,p);break;default:typeof D.onClick=="function"&&Ax(u);break}}function _ue(u,h,p,v,y){Tx(h,v);var D=null,E,N;switch(h){case"input":E=F(u,p),N=F(u,v),D=[];break;case"select":E=xC(u,p),N=xC(u,v),D=[];break;case"textarea":E=v2(u,p),N=v2(u,v),D=[];break;default:E=p,N=v,typeof E.onClick!="function"&&typeof N.onClick=="function"&&Ax(u);break}x2(h,N);var P,K,Z=null;for(P in E)if(!(N.hasOwnProperty(P)||!E.hasOwnProperty(P)||E[P]==null))if(P===Lp){var fe=E[P];for(K in fe)fe.hasOwnProperty(K)&&(Z||(Z={}),Z[K]="")}else P===a1||P===Sp||P===kx||P===yf||P===KH||(bt.hasOwnProperty(P)?D||(D=[]):(D=D||[]).push(P,null));for(P in N){var he=N[P],De=E!=null?E[P]:void 0;if(!(!N.hasOwnProperty(P)||he===De||he==null&&De==null))if(P===Lp)if(he&&Object.freeze(he),De){for(K in De)De.hasOwnProperty(K)&&(!he||!he.hasOwnProperty(K))&&(Z||(Z={}),Z[K]="");for(K in he)he.hasOwnProperty(K)&&De[K]!==he[K]&&(Z||(Z={}),Z[K]=he[K])}else Z||(D||(D=[]),D.push(P,Z)),Z=he;else if(P===a1){var Ee=he?he[Ex]:void 0,je=De?De[Ex]:void 0;Ee!=null&&je!==Ee&&(D=D||[]).push(P,Ee)}else P===Sp?(typeof he=="string"||typeof he=="number")&&(D=D||[]).push(P,""+he):P===kx||P===yf||(bt.hasOwnProperty(P)?(he!=null&&(typeof he!="function"&&Ix(P,he),P==="onScroll"&&vs("scroll",u)),!D&&De!==he&&(D=[])):(D=D||[]).push(P,he))}return Z&&(Pre(Z,N[Lp]),(D=D||[]).push(Lp,Z)),D}function vue(u,h,p,v,y){p==="input"&&y.type==="radio"&&y.name!=null&&Te(u,y);var D=hp(p,v),E=hp(p,y);switch(fue(u,h,D,E),p){case"input":ze(u,y);break;case"textarea":rW(u,y);break;case"select":fre(u,y);break}}function bue(u){{var h=u.toLowerCase();return ix.hasOwnProperty(h)&&ix[h]||null}}function Cue(u,h,p,v,y,D,E){var N,P;switch(N=hp(h,p),Tx(h,p),h){case"dialog":vs("cancel",u),vs("close",u);break;case"iframe":case"object":case"embed":vs("load",u);break;case"video":case"audio":for(var K=0;K<s1.length;K++)vs(s1[K],u);break;case"source":vs("error",u);break;case"img":case"image":case"link":vs("error",u),vs("load",u);break;case"details":vs("toggle",u);break;case"input":re(u,p),vs("invalid",u);break;case"option":Jn(u,p);break;case"select":DC(u,p),vs("invalid",u);break;case"textarea":oW(u,p),vs("invalid",u);break}x2(h,p);{P=new Set;for(var Z=u.attributes,fe=0;fe<Z.length;fe++){var he=Z[fe].name.toLowerCase();switch(he){case"value":break;case"checked":break;case"selected":break;default:P.add(Z[fe].name)}}}var De=null;for(var Ee in p)if(!!p.hasOwnProperty(Ee)){var je=p[Ee];if(Ee===Sp)typeof je=="string"?u.textContent!==je&&(p[yf]!==!0&&Rx(u.textContent,je,D,E),De=[Sp,je]):typeof je=="number"&&u.textContent!==""+je&&(p[yf]!==!0&&Rx(u.textContent,je,D,E),De=[Sp,""+je]);else if(bt.hasOwnProperty(Ee))je!=null&&(typeof je!="function"&&Ix(Ee,je),Ee==="onScroll"&&vs("scroll",u));else if(E&&!0&&typeof N=="boolean"){var Rt=void 0,ii=N&&ue?null:Fi(Ee);if(p[yf]!==!0){if(!(Ee===kx||Ee===yf||Ee==="value"||Ee==="checked"||Ee==="selected")){if(Ee===a1){var qt=u.innerHTML,sn=je?je[Ex]:void 0;if(sn!=null){var Ki=YH(u,sn);Ki!==qt&&l1(Ee,qt,Ki)}}else if(Ee===Lp){if(P.delete(Ee),GH){var Ce=Mre(je);Rt=u.getAttribute("style"),Ce!==Rt&&l1(Ee,Rt,Ce)}}else if(N&&!ue)P.delete(Ee.toLowerCase()),Rt=Bs(u,Ee,je),je!==Rt&&l1(Ee,Rt,je);else if(!Ot(Ee,ii,N)&&!zt(Ee,je,ii,N)){var Ke=!1;if(ii!==null)P.delete(ii.attributeName),Rt=sr(u,Ee,je,ii);else{var we=v;if(we===Md&&(we=C2(h)),we===Md)P.delete(Ee.toLowerCase());else{var at=bue(Ee);at!==null&&at!==Ee&&(Ke=!0,P.delete(at)),P.delete(Ee)}Rt=Bs(u,Ee,je)}var At=ue;!At&&je!==Rt&&!Ke&&l1(Ee,Rt,je)}}}}}switch(E&&P.size>0&&p[yf]!==!0&&qH(P),h){case"input":Rd(u),ft(u,p,!0);break;case"textarea":Rd(u),aW(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&Ax(u);break}return De}function wue(u,h,p){var v=u.nodeValue!==h;return v}function PA(u,h){{if(Da)return;Da=!0,r("Did not expect server HTML to contain a <%s> in <%s>.",h.nodeName.toLowerCase(),u.nodeName.toLowerCase())}}function FA(u,h){{if(Da)return;Da=!0,r('Did not expect server HTML to contain the text node "%s" in <%s>.',h.nodeValue,u.nodeName.toLowerCase())}}function BA(u,h,p){{if(Da)return;Da=!0,r("Expected server HTML to contain a matching <%s> in <%s>.",h,u.nodeName.toLowerCase())}}function VA(u,h){{if(h===""||Da)return;Da=!0,r('Expected server HTML to contain a matching text node for "%s" in <%s>.',h,u.nodeName.toLowerCase())}}function yue(u,h,p){switch(h){case"input":di(u,p);return;case"textarea":pre(u,p);return;case"select":gre(u,p);return}}var c1=function(){},u1=function(){};{var Sue=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],QH=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],Lue=QH.concat(["button"]),xue=["dd","dt","li","option","optgroup","p","rp","rt"],XH={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};u1=function(u,h){var p=ei({},u||XH),v={tag:h};return QH.indexOf(h)!==-1&&(p.aTagInScope=null,p.buttonTagInScope=null,p.nobrTagInScope=null),Lue.indexOf(h)!==-1&&(p.pTagInButtonScope=null),Sue.indexOf(h)!==-1&&h!=="address"&&h!=="div"&&h!=="p"&&(p.listItemTagAutoclosing=null,p.dlItemTagAutoclosing=null),p.current=v,h==="form"&&(p.formTag=v),h==="a"&&(p.aTagInScope=v),h==="button"&&(p.buttonTagInScope=v),h==="nobr"&&(p.nobrTagInScope=v),h==="p"&&(p.pTagInButtonScope=v),h==="li"&&(p.listItemTagAutoclosing=v),(h==="dd"||h==="dt")&&(p.dlItemTagAutoclosing=v),p};var Due=function(u,h){switch(h){case"select":return u==="option"||u==="optgroup"||u==="#text";case"optgroup":return u==="option"||u==="#text";case"option":return u==="#text";case"tr":return u==="th"||u==="td"||u==="style"||u==="script"||u==="template";case"tbody":case"thead":case"tfoot":return u==="tr"||u==="style"||u==="script"||u==="template";case"colgroup":return u==="col"||u==="template";case"table":return u==="caption"||u==="colgroup"||u==="tbody"||u==="tfoot"||u==="thead"||u==="style"||u==="script"||u==="template";case"head":return u==="base"||u==="basefont"||u==="bgsound"||u==="link"||u==="meta"||u==="title"||u==="noscript"||u==="noframes"||u==="style"||u==="script"||u==="template";case"html":return u==="head"||u==="body"||u==="frameset";case"frameset":return u==="frame";case"#document":return u==="html"}switch(u){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return h!=="h1"&&h!=="h2"&&h!=="h3"&&h!=="h4"&&h!=="h5"&&h!=="h6";case"rp":case"rt":return xue.indexOf(h)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return h==null}return!0},kue=function(u,h){switch(u){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return h.pTagInButtonScope;case"form":return h.formTag||h.pTagInButtonScope;case"li":return h.listItemTagAutoclosing;case"dd":case"dt":return h.dlItemTagAutoclosing;case"button":return h.buttonTagInScope;case"a":return h.aTagInScope;case"nobr":return h.nobrTagInScope}return null},JH={};c1=function(u,h,p){p=p||XH;var v=p.current,y=v&&v.tag;h!=null&&(u!=null&&r("validateDOMNesting: when childText is passed, childTag should be null"),u="#text");var D=Due(u,y)?null:v,E=D?null:kue(u,p),N=D||E;if(!!N){var P=N.tag,K=!!D+"|"+u+"|"+P;if(!JH[K]){JH[K]=!0;var Z=u,fe="";if(u==="#text"?/\S/.test(h)?Z="Text nodes":(Z="Whitespace text nodes",fe=" Make sure you don't have any extra whitespace between tags on each line of your source code."):Z="<"+u+">",D){var he="";P==="table"&&u==="tr"&&(he+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),r("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",Z,P,fe,he)}else r("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",Z,P)}}}}var Mx="suppressHydrationWarning",Ox="$",Px="/$",d1="$?",h1="$!",Eue="style",WA=null,HA=null;function Tue(u){var h,p,v=u.nodeType;switch(v){case Pd:case y2:{h=v===Pd?"#document":"#fragment";var y=u.documentElement;p=y?y.namespaceURI:w2(null,"");break}default:{var D=v===io?u.parentNode:u,E=D.namespaceURI||null;h=D.tagName,p=w2(E,h);break}}{var N=h.toLowerCase(),P=u1(null,N);return{namespace:p,ancestorInfo:P}}}function Iue(u,h,p){{var v=u,y=w2(v.namespace,h),D=u1(v.ancestorInfo,h);return{namespace:y,ancestorInfo:D}}}function zWe(u){return u}function Nue(u){WA=Ele(),HA=jce();var h=null;return aH(!1),h}function Rue(u){Kce(HA),aH(WA),WA=null,HA=null}function Aue(u,h,p,v,y){var D;{var E=v;if(c1(u,null,E.ancestorInfo),typeof h.children=="string"||typeof h.children=="number"){var N=""+h.children,P=u1(E.ancestorInfo,u);c1(null,N,P)}D=E.namespace}var K=gue(u,h,p,D);return p1(y,K),YA(K,h),K}function Mue(u,h){u.appendChild(h)}function Oue(u,h,p,v,y){switch(mue(u,h,p,v),h){case"button":case"input":case"select":case"textarea":return!!p.autoFocus;case"img":return!0;default:return!1}}function Pue(u,h,p,v,y,D){{var E=D;if(typeof v.children!=typeof p.children&&(typeof v.children=="string"||typeof v.children=="number")){var N=""+v.children,P=u1(E.ancestorInfo,h);c1(null,N,P)}}return _ue(u,h,p,v)}function zA(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}function Fue(u,h,p,v){{var y=p;c1(null,u,y.ancestorInfo)}var D=pue(u,h);return p1(v,D),D}function Bue(){var u=window.event;return u===void 0?Ud:lH(u.type)}var UA=typeof setTimeout=="function"?setTimeout:void 0,Vue=typeof clearTimeout=="function"?clearTimeout:void 0,$A=-1,ez=typeof Promise=="function"?Promise:void 0,Wue=typeof queueMicrotask=="function"?queueMicrotask:typeof ez<"u"?function(u){return ez.resolve(null).then(u).catch(Hue)}:UA;function Hue(u){setTimeout(function(){throw u})}function zue(u,h,p,v){switch(h){case"button":case"input":case"select":case"textarea":p.autoFocus&&u.focus();return;case"img":{p.src&&(u.src=p.src);return}}}function Uue(u,h,p,v,y,D){vue(u,h,p,v,y),YA(u,y)}function tz(u){tx(u,"")}function $ue(u,h,p){u.nodeValue=p}function jue(u,h){u.appendChild(h)}function Kue(u,h){var p;u.nodeType===io?(p=u.parentNode,p.insertBefore(h,u)):(p=u,p.appendChild(h));var v=u._reactRootContainer;v==null&&p.onclick===null&&Ax(p)}function que(u,h,p){u.insertBefore(h,p)}function Gue(u,h,p){u.nodeType===io?u.parentNode.insertBefore(h,p):u.insertBefore(h,p)}function Yue(u,h){u.removeChild(h)}function Zue(u,h){u.nodeType===io?u.parentNode.removeChild(h):u.removeChild(h)}function jA(u,h){var p=h,v=0;do{var y=p.nextSibling;if(u.removeChild(p),y&&y.nodeType===io){var D=y.data;if(D===Px)if(v===0){u.removeChild(y),GC(h);return}else v--;else(D===Ox||D===d1||D===h1)&&v++}p=y}while(p);GC(h)}function Que(u,h){u.nodeType===io?jA(u.parentNode,h):u.nodeType===xa&&jA(u,h),GC(u)}function Xue(u){u=u;var h=u.style;typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"}function Jue(u){u.nodeValue=""}function ede(u,h){u=u;var p=h[Eue],v=p!=null&&p.hasOwnProperty("display")?p.display:null;u.style.display=S2("display",v)}function tde(u,h){u.nodeValue=h}function ide(u){u.nodeType===xa?u.textContent="":u.nodeType===Pd&&u.documentElement&&u.removeChild(u.documentElement)}function nde(u,h,p){return u.nodeType!==xa||h.toLowerCase()!==u.nodeName.toLowerCase()?null:u}function sde(u,h){return h===""||u.nodeType!==Od?null:u}function ode(u){return u.nodeType!==io?null:u}function iz(u){return u.data===d1}function KA(u){return u.data===h1}function rde(u){var h=u.nextSibling&&u.nextSibling.dataset,p,v,y;return h&&(p=h.dgst,v=h.msg,y=h.stck),{message:v,digest:p,stack:y}}function ade(u,h){u._reactRetry=h}function Fx(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===xa||h===Od)break;if(h===io){var p=u.data;if(p===Ox||p===h1||p===d1)break;if(p===Px)return null}}return u}function f1(u){return Fx(u.nextSibling)}function lde(u){return Fx(u.firstChild)}function cde(u){return Fx(u.firstChild)}function ude(u){return Fx(u.nextSibling)}function dde(u,h,p,v,y,D,E){p1(D,u),YA(u,p);var N;{var P=y;N=P.namespace}var K=(D.mode&tn)!==ci;return Cue(u,h,p,N,v,K,E)}function hde(u,h,p,v){return p1(p,u),p.mode&tn,wue(u,h)}function fde(u,h){p1(h,u)}function gde(u){for(var h=u.nextSibling,p=0;h;){if(h.nodeType===io){var v=h.data;if(v===Px){if(p===0)return f1(h);p--}else(v===Ox||v===h1||v===d1)&&p++}h=h.nextSibling}return null}function nz(u){for(var h=u.previousSibling,p=0;h;){if(h.nodeType===io){var v=h.data;if(v===Ox||v===h1||v===d1){if(p===0)return h;p--}else v===Px&&p++}h=h.previousSibling}return null}function pde(u){GC(u)}function mde(u){GC(u)}function _de(u){return u!=="head"&&u!=="body"}function vde(u,h,p,v){var y=!0;Rx(h.nodeValue,p,v,y)}function bde(u,h,p,v,y,D){if(h[Mx]!==!0){var E=!0;Rx(v.nodeValue,y,D,E)}}function Cde(u,h){h.nodeType===xa?PA(u,h):h.nodeType===io||FA(u,h)}function wde(u,h){{var p=u.parentNode;p!==null&&(h.nodeType===xa?PA(p,h):h.nodeType===io||FA(p,h))}}function yde(u,h,p,v,y){(y||h[Mx]!==!0)&&(v.nodeType===xa?PA(p,v):v.nodeType===io||FA(p,v))}function Sde(u,h,p){BA(u,h)}function Lde(u,h){VA(u,h)}function xde(u,h,p){{var v=u.parentNode;v!==null&&BA(v,h)}}function Dde(u,h){{var p=u.parentNode;p!==null&&VA(p,h)}}function kde(u,h,p,v,y,D){(D||h[Mx]!==!0)&&BA(p,v)}function Ede(u,h,p,v,y){(y||h[Mx]!==!0)&&VA(p,v)}function Tde(u){r("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",u.nodeName.toLowerCase())}function Ide(u){o1(u)}var lv=Math.random().toString(36).slice(2),cv="__reactFiber$"+lv,qA="__reactProps$"+lv,g1="__reactContainer$"+lv,GA="__reactEvents$"+lv,Nde="__reactListeners$"+lv,Rde="__reactHandles$"+lv;function Ade(u){delete u[cv],delete u[qA],delete u[GA],delete u[Nde],delete u[Rde]}function p1(u,h){h[cv]=u}function Bx(u,h){h[g1]=u}function sz(u){u[g1]=null}function m1(u){return!!u[g1]}function xp(u){var h=u[cv];if(h)return h;for(var p=u.parentNode;p;){if(h=p[g1]||p[cv],h){var v=h.alternate;if(h.child!==null||v!==null&&v.child!==null)for(var y=nz(u);y!==null;){var D=y[cv];if(D)return D;y=nz(y)}return h}u=p,p=u.parentNode}return null}function Sf(u){var h=u[cv]||u[g1];return h&&(h.tag===m||h.tag===_||h.tag===A||h.tag===f)?h:null}function uv(u){if(u.tag===m||u.tag===_)return u.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function Vx(u){return u[qA]||null}function YA(u,h){u[qA]=h}function Mde(u){var h=u[GA];return h===void 0&&(h=u[GA]=new Set),h}var oz={},rz=t.ReactDebugCurrentFrame;function Wx(u){if(u){var h=u._owner,p=Jr(u.type,u._source,h?h.type:null);rz.setExtraStackFrame(p)}else rz.setExtraStackFrame(null)}function Sc(u,h,p,v,y){{var D=Function.call.bind(Kt);for(var E in u)if(D(u,E)){var N=void 0;try{if(typeof u[E]!="function"){var P=Error((v||"React class")+": "+p+" type `"+E+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof u[E]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw P.name="Invariant Violation",P}N=u[E](h,E,v,p,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(K){N=K}N&&!(N instanceof Error)&&(Wx(y),r("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",v||"React class",p,E,typeof N),Wx(null)),N instanceof Error&&!(N.message in oz)&&(oz[N.message]=!0,Wx(y),r("Failed %s type: %s",p,N.message),Wx(null))}}}var ZA=[],Hx;Hx=[];var $d=-1;function Lf(u){return{current:u}}function Er(u,h){if($d<0){r("Unexpected pop.");return}h!==Hx[$d]&&r("Unexpected Fiber popped."),u.current=ZA[$d],ZA[$d]=null,Hx[$d]=null,$d--}function Tr(u,h,p){$d++,ZA[$d]=u.current,Hx[$d]=p,u.current=h}var QA;QA={};var rl={};Object.freeze(rl);var jd=Lf(rl),xu=Lf(!1),XA=rl;function dv(u,h,p){return p&&Du(h)?XA:jd.current}function az(u,h,p){{var v=u.stateNode;v.__reactInternalMemoizedUnmaskedChildContext=h,v.__reactInternalMemoizedMaskedChildContext=p}}function hv(u,h){{var p=u.type,v=p.contextTypes;if(!v)return rl;var y=u.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===h)return y.__reactInternalMemoizedMaskedChildContext;var D={};for(var E in v)D[E]=h[E];{var N=_i(u)||"Unknown";Sc(v,D,"context",N)}return y&&az(u,h,D),D}}function zx(){return xu.current}function Du(u){{var h=u.childContextTypes;return h!=null}}function Ux(u){Er(xu,u),Er(jd,u)}function JA(u){Er(xu,u),Er(jd,u)}function lz(u,h,p){{if(jd.current!==rl)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");Tr(jd,h,u),Tr(xu,p,u)}}function cz(u,h,p){{var v=u.stateNode,y=h.childContextTypes;if(typeof v.getChildContext!="function"){{var D=_i(u)||"Unknown";QA[D]||(QA[D]=!0,r("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",D,D))}return p}var E=v.getChildContext();for(var N in E)if(!(N in y))throw new Error((_i(u)||"Unknown")+'.getChildContext(): key "'+N+'" is not defined in childContextTypes.');{var P=_i(u)||"Unknown";Sc(y,E,"child context",P)}return ei({},p,E)}}function $x(u){{var h=u.stateNode,p=h&&h.__reactInternalMemoizedMergedChildContext||rl;return XA=jd.current,Tr(jd,p,u),Tr(xu,xu.current,u),!0}}function uz(u,h,p){{var v=u.stateNode;if(!v)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(p){var y=cz(u,h,XA);v.__reactInternalMemoizedMergedChildContext=y,Er(xu,u),Er(jd,u),Tr(jd,y,u),Tr(xu,p,u)}else Er(xu,u),Tr(xu,p,u)}}function Ode(u){{if(!_ae(u)||u.tag!==c)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var h=u;do{switch(h.tag){case f:return h.stateNode.context;case c:{var p=h.type;if(Du(p))return h.stateNode.__reactInternalMemoizedMergedChildContext;break}}h=h.return}while(h!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var xf=0,jx=1,Kd=null,eM=!1,tM=!1;function dz(u){Kd===null?Kd=[u]:Kd.push(u)}function Pde(u){eM=!0,dz(u)}function hz(){eM&&Df()}function Df(){if(!tM&&Kd!==null){tM=!0;var u=0,h=yc();try{var p=!0,v=Kd;for(Zo(nl);u<v.length;u++){var y=v[u];do y=y(p);while(y!==null)}Kd=null,eM=!1}catch(D){throw Kd!==null&&(Kd=Kd.slice(u+1)),PW(ax,Df),D}finally{Zo(h),tM=!1}}return null}var fv=[],gv=0,Kx=null,qx=0,Ul=[],$l=0,Dp=null,qd=1,Gd="";function Fde(u){return Ep(),(u.flags&EW)!==li}function Bde(u){return Ep(),qx}function Vde(){var u=Gd,h=qd,p=h&~Wde(h);return p.toString(32)+u}function kp(u,h){Ep(),fv[gv++]=qx,fv[gv++]=Kx,Kx=u,qx=h}function fz(u,h,p){Ep(),Ul[$l++]=qd,Ul[$l++]=Gd,Ul[$l++]=Dp,Dp=u;var v=qd,y=Gd,D=Gx(v)-1,E=v&~(1<<D),N=p+1,P=Gx(h)+D;if(P>30){var K=D-D%5,Z=(1<<K)-1,fe=(E&Z).toString(32),he=E>>K,De=D-K,Ee=Gx(h)+De,je=N<<De,Rt=je|he,ii=fe+y;qd=1<<Ee|Rt,Gd=ii}else{var qt=N<<D,sn=qt|E,Ki=y;qd=1<<P|sn,Gd=Ki}}function iM(u){Ep();var h=u.return;if(h!==null){var p=1,v=0;kp(u,p),fz(u,p,v)}}function Gx(u){return 32-zW(u)}function Wde(u){return 1<<Gx(u)-1}function nM(u){for(;u===Kx;)Kx=fv[--gv],fv[gv]=null,qx=fv[--gv],fv[gv]=null;for(;u===Dp;)Dp=Ul[--$l],Ul[$l]=null,Gd=Ul[--$l],Ul[$l]=null,qd=Ul[--$l],Ul[$l]=null}function Hde(){return Ep(),Dp!==null?{id:qd,overflow:Gd}:null}function zde(u,h){Ep(),Ul[$l++]=qd,Ul[$l++]=Gd,Ul[$l++]=Dp,qd=h.id,Gd=h.overflow,Dp=u}function Ep(){lr()||r("Expected to be hydrating. This is a bug in React. Please file an issue.")}var ar=null,jl=null,Lc=!1,Tp=!1,kf=null;function Ude(){Lc&&r("We should not be hydrating here. This is a bug in React. Please file a bug.")}function gz(){Tp=!0}function $de(){return Tp}function jde(u){var h=u.stateNode.containerInfo;return jl=cde(h),ar=u,Lc=!0,kf=null,Tp=!1,!0}function Kde(u,h,p){return jl=ude(h),ar=u,Lc=!0,kf=null,Tp=!1,p!==null&&zde(u,p),!0}function pz(u,h){switch(u.tag){case f:{Cde(u.stateNode.containerInfo,h);break}case m:{var p=(u.mode&tn)!==ci;yde(u.type,u.memoizedProps,u.stateNode,h,p);break}case A:{var v=u.memoizedState;v.dehydrated!==null&&wde(v.dehydrated,h);break}}}function mz(u,h){pz(u,h);var p=Yge();p.stateNode=h,p.return=u;var v=u.deletions;v===null?(u.deletions=[p],u.flags|=fp):v.push(p)}function sM(u,h){{if(Tp)return;switch(u.tag){case f:{var p=u.stateNode.containerInfo;switch(h.tag){case m:var v=h.type;h.pendingProps,Sde(p,v);break;case _:var y=h.pendingProps;Lde(p,y);break}break}case m:{var D=u.type,E=u.memoizedProps,N=u.stateNode;switch(h.tag){case m:{var P=h.type,K=h.pendingProps,Z=(u.mode&tn)!==ci;kde(D,E,N,P,K,Z);break}case _:{var fe=h.pendingProps,he=(u.mode&tn)!==ci;Ede(D,E,N,fe,he);break}}break}case A:{var De=u.memoizedState,Ee=De.dehydrated;if(Ee!==null)switch(h.tag){case m:var je=h.type;h.pendingProps,xde(Ee,je);break;case _:var Rt=h.pendingProps;Dde(Ee,Rt);break}break}default:return}}}function _z(u,h){h.flags=h.flags&~Bd|no,sM(u,h)}function vz(u,h){switch(u.tag){case m:{var p=u.type;u.pendingProps;var v=nde(h,p);return v!==null?(u.stateNode=v,ar=u,jl=lde(v),!0):!1}case _:{var y=u.pendingProps,D=sde(h,y);return D!==null?(u.stateNode=D,ar=u,jl=null,!0):!1}case A:{var E=ode(h);if(E!==null){var N={dehydrated:E,treeContext:Hde(),retryLane:tl};u.memoizedState=N;var P=Zge(E);return P.return=u,u.child=P,ar=u,jl=null,!0}return!1}default:return!1}}function oM(u){return(u.mode&tn)!==ci&&(u.flags&Sn)===li}function rM(u){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function aM(u){if(!!Lc){var h=jl;if(!h){oM(u)&&(sM(ar,u),rM()),_z(ar,u),Lc=!1,ar=u;return}var p=h;if(!vz(u,h)){oM(u)&&(sM(ar,u),rM()),h=f1(p);var v=ar;if(!h||!vz(u,h)){_z(ar,u),Lc=!1,ar=u;return}mz(v,p)}}}function qde(u,h,p){var v=u.stateNode,y=!Tp,D=dde(v,u.type,u.memoizedProps,h,p,u,y);return u.updateQueue=D,D!==null}function Gde(u){var h=u.stateNode,p=u.memoizedProps,v=hde(h,p,u);if(v){var y=ar;if(y!==null)switch(y.tag){case f:{var D=y.stateNode.containerInfo,E=(y.mode&tn)!==ci;vde(D,h,p,E);break}case m:{var N=y.type,P=y.memoizedProps,K=y.stateNode,Z=(y.mode&tn)!==ci;bde(N,P,K,h,p,Z);break}}}return v}function Yde(u){var h=u.memoizedState,p=h!==null?h.dehydrated:null;if(!p)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");fde(p,u)}function Zde(u){var h=u.memoizedState,p=h!==null?h.dehydrated:null;if(!p)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return gde(p)}function bz(u){for(var h=u.return;h!==null&&h.tag!==m&&h.tag!==f&&h.tag!==A;)h=h.return;ar=h}function Yx(u){if(u!==ar)return!1;if(!Lc)return bz(u),Lc=!0,!1;if(u.tag!==f&&(u.tag!==m||_de(u.type)&&!zA(u.type,u.memoizedProps))){var h=jl;if(h)if(oM(u))Cz(u),rM();else for(;h;)mz(u,h),h=f1(h)}return bz(u),u.tag===A?jl=Zde(u):jl=ar?f1(u.stateNode):null,!0}function Qde(){return Lc&&jl!==null}function Cz(u){for(var h=jl;h;)pz(u,h),h=f1(h)}function pv(){ar=null,jl=null,Lc=!1,Tp=!1}function wz(){kf!==null&&(p$(kf),kf=null)}function lr(){return Lc}function lM(u){kf===null?kf=[u]:kf.push(u)}var Xde=t.ReactCurrentBatchConfig,Jde=null;function ehe(){return Xde.transition}var xc={recordUnsafeLifecycleWarnings:function(u,h){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(u,h){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var the=function(u){for(var h=null,p=u;p!==null;)p.mode&so&&(h=p),p=p.return;return h},Ip=function(u){var h=[];return u.forEach(function(p){h.push(p)}),h.sort().join(", ")},_1=[],v1=[],b1=[],C1=[],w1=[],y1=[],Np=new Set;xc.recordUnsafeLifecycleWarnings=function(u,h){Np.has(u.type)||(typeof h.componentWillMount=="function"&&h.componentWillMount.__suppressDeprecationWarning!==!0&&_1.push(u),u.mode&so&&typeof h.UNSAFE_componentWillMount=="function"&&v1.push(u),typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&b1.push(u),u.mode&so&&typeof h.UNSAFE_componentWillReceiveProps=="function"&&C1.push(u),typeof h.componentWillUpdate=="function"&&h.componentWillUpdate.__suppressDeprecationWarning!==!0&&w1.push(u),u.mode&so&&typeof h.UNSAFE_componentWillUpdate=="function"&&y1.push(u))},xc.flushPendingUnsafeLifecycleWarnings=function(){var u=new Set;_1.length>0&&(_1.forEach(function(he){u.add(_i(he)||"Component"),Np.add(he.type)}),_1=[]);var h=new Set;v1.length>0&&(v1.forEach(function(he){h.add(_i(he)||"Component"),Np.add(he.type)}),v1=[]);var p=new Set;b1.length>0&&(b1.forEach(function(he){p.add(_i(he)||"Component"),Np.add(he.type)}),b1=[]);var v=new Set;C1.length>0&&(C1.forEach(function(he){v.add(_i(he)||"Component"),Np.add(he.type)}),C1=[]);var y=new Set;w1.length>0&&(w1.forEach(function(he){y.add(_i(he)||"Component"),Np.add(he.type)}),w1=[]);var D=new Set;if(y1.length>0&&(y1.forEach(function(he){D.add(_i(he)||"Component"),Np.add(he.type)}),y1=[]),h.size>0){var E=Ip(h);r(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,E)}if(v.size>0){var N=Ip(v);r(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,N)}if(D.size>0){var P=Ip(D);r(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,P)}if(u.size>0){var K=Ip(u);o(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,K)}if(p.size>0){var Z=Ip(p);o(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,Z)}if(y.size>0){var fe=Ip(y);o(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,fe)}};var Zx=new Map,yz=new Set;xc.recordLegacyContextWarning=function(u,h){var p=the(u);if(p===null){r("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!yz.has(u.type)){var v=Zx.get(p);(u.type.contextTypes!=null||u.type.childContextTypes!=null||h!==null&&typeof h.getChildContext=="function")&&(v===void 0&&(v=[],Zx.set(p,v)),v.push(u))}},xc.flushLegacyContextWarning=function(){Zx.forEach(function(u,h){if(u.length!==0){var p=u[0],v=new Set;u.forEach(function(D){v.add(_i(D)||"Component"),yz.add(D.type)});var y=Ip(v);try{Ns(p),r(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,y)}finally{Ko()}}})},xc.discardPendingWarnings=function(){_1=[],v1=[],b1=[],C1=[],w1=[],y1=[],Zx=new Map}}function Dc(u,h){if(u&&u.defaultProps){var p=ei({},h),v=u.defaultProps;for(var y in v)p[y]===void 0&&(p[y]=v[y]);return p}return h}var cM=Lf(null),uM;uM={};var Qx=null,mv=null,dM=null,Xx=!1;function Jx(){Qx=null,mv=null,dM=null,Xx=!1}function Sz(){Xx=!0}function Lz(){Xx=!1}function xz(u,h,p){Tr(cM,h._currentValue,u),h._currentValue=p,h._currentRenderer!==void 0&&h._currentRenderer!==null&&h._currentRenderer!==uM&&r("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),h._currentRenderer=uM}function hM(u,h){var p=cM.current;Er(cM,h),u._currentValue=p}function fM(u,h,p){for(var v=u;v!==null;){var y=v.alternate;if(tv(v.childLanes,h)?y!==null&&!tv(y.childLanes,h)&&(y.childLanes=Hi(y.childLanes,h)):(v.childLanes=Hi(v.childLanes,h),y!==null&&(y.childLanes=Hi(y.childLanes,h))),v===p)break;v=v.return}v!==p&&r("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function ihe(u,h,p){nhe(u,h,p)}function nhe(u,h,p){var v=u.child;for(v!==null&&(v.return=u);v!==null;){var y=void 0,D=v.dependencies;if(D!==null){y=v.child;for(var E=D.firstContext;E!==null;){if(E.context===h){if(v.tag===c){var N=HC(p),P=Yd(ls,N);P.tag=tD;var K=v.updateQueue;if(K!==null){var Z=K.shared,fe=Z.pending;fe===null?P.next=P:(P.next=fe.next,fe.next=P),Z.pending=P}}v.lanes=Hi(v.lanes,p);var he=v.alternate;he!==null&&(he.lanes=Hi(he.lanes,p)),fM(v.return,p,u),D.lanes=Hi(D.lanes,p);break}E=E.next}}else if(v.tag===L)y=v.type===u.type?null:v.child;else if(v.tag===z){var De=v.return;if(De===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");De.lanes=Hi(De.lanes,p);var Ee=De.alternate;Ee!==null&&(Ee.lanes=Hi(Ee.lanes,p)),fM(De,p,u),y=v.sibling}else y=v.child;if(y!==null)y.return=v;else for(y=v;y!==null;){if(y===u){y=null;break}var je=y.sibling;if(je!==null){je.return=y.return,y=je;break}y=y.return}v=y}}function _v(u,h){Qx=u,mv=null,dM=null;var p=u.dependencies;if(p!==null){var v=p.firstContext;v!==null&&(il(p.lanes,h)&&P1(),p.firstContext=null)}}function oo(u){Xx&&r("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var h=u._currentValue;if(dM!==u){var p={context:u,memoizedValue:h,next:null};if(mv===null){if(Qx===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");mv=p,Qx.dependencies={lanes:nt,firstContext:p}}else mv=mv.next=p}return h}var Rp=null;function gM(u){Rp===null?Rp=[u]:Rp.push(u)}function she(){if(Rp!==null){for(var u=0;u<Rp.length;u++){var h=Rp[u],p=h.interleaved;if(p!==null){h.interleaved=null;var v=p.next,y=h.pending;if(y!==null){var D=y.next;y.next=v,p.next=D}h.pending=p}}Rp=null}}function Dz(u,h,p,v){var y=h.interleaved;return y===null?(p.next=p,gM(h)):(p.next=y.next,y.next=p),h.interleaved=p,eD(u,v)}function ohe(u,h,p,v){var y=h.interleaved;y===null?(p.next=p,gM(h)):(p.next=y.next,y.next=p),h.interleaved=p}function rhe(u,h,p,v){var y=h.interleaved;return y===null?(p.next=p,gM(h)):(p.next=y.next,y.next=p),h.interleaved=p,eD(u,v)}function ka(u,h){return eD(u,h)}var ahe=eD;function eD(u,h){u.lanes=Hi(u.lanes,h);var p=u.alternate;p!==null&&(p.lanes=Hi(p.lanes,h)),p===null&&(u.flags&(no|Bd))!==li&&k$(u);for(var v=u,y=u.return;y!==null;)y.childLanes=Hi(y.childLanes,h),p=y.alternate,p!==null?p.childLanes=Hi(p.childLanes,h):(y.flags&(no|Bd))!==li&&k$(u),v=y,y=y.return;if(v.tag===f){var D=v.stateNode;return D}else return null}var kz=0,Ez=1,tD=2,pM=3,iD=!1,mM,nD;mM=!1,nD=null;function _M(u){var h={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:nt},effects:null};u.updateQueue=h}function Tz(u,h){var p=h.updateQueue,v=u.updateQueue;if(p===v){var y={baseState:v.baseState,firstBaseUpdate:v.firstBaseUpdate,lastBaseUpdate:v.lastBaseUpdate,shared:v.shared,effects:v.effects};h.updateQueue=y}}function Yd(u,h){var p={eventTime:u,lane:h,tag:kz,payload:null,callback:null,next:null};return p}function Ef(u,h,p){var v=u.updateQueue;if(v===null)return null;var y=v.shared;if(nD===y&&!mM&&(r("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),mM=!0),age()){var D=y.pending;return D===null?h.next=h:(h.next=D.next,D.next=h),y.pending=h,ahe(u,p)}else return rhe(u,y,h,p)}function sD(u,h,p){var v=h.updateQueue;if(v!==null){var y=v.shared;if(KW(p)){var D=y.lanes;D=GW(D,u.pendingLanes);var E=Hi(D,p);y.lanes=E,gA(u,E)}}}function vM(u,h){var p=u.updateQueue,v=u.alternate;if(v!==null){var y=v.updateQueue;if(p===y){var D=null,E=null,N=p.firstBaseUpdate;if(N!==null){var P=N;do{var K={eventTime:P.eventTime,lane:P.lane,tag:P.tag,payload:P.payload,callback:P.callback,next:null};E===null?D=E=K:(E.next=K,E=K),P=P.next}while(P!==null);E===null?D=E=h:(E.next=h,E=h)}else D=E=h;p={baseState:y.baseState,firstBaseUpdate:D,lastBaseUpdate:E,shared:y.shared,effects:y.effects},u.updateQueue=p;return}}var Z=p.lastBaseUpdate;Z===null?p.firstBaseUpdate=h:Z.next=h,p.lastBaseUpdate=h}function lhe(u,h,p,v,y,D){switch(p.tag){case Ez:{var E=p.payload;if(typeof E=="function"){Sz();var N=E.call(D,v,y);{if(u.mode&so){Go(!0);try{E.call(D,v,y)}finally{Go(!1)}}Lz()}return N}return E}case pM:u.flags=u.flags&~ta|Sn;case kz:{var P=p.payload,K;if(typeof P=="function"){Sz(),K=P.call(D,v,y);{if(u.mode&so){Go(!0);try{P.call(D,v,y)}finally{Go(!1)}}Lz()}}else K=P;return K==null?v:ei({},v,K)}case tD:return iD=!0,v}return v}function oD(u,h,p,v){var y=u.updateQueue;iD=!1,nD=y.shared;var D=y.firstBaseUpdate,E=y.lastBaseUpdate,N=y.shared.pending;if(N!==null){y.shared.pending=null;var P=N,K=P.next;P.next=null,E===null?D=K:E.next=K,E=P;var Z=u.alternate;if(Z!==null){var fe=Z.updateQueue,he=fe.lastBaseUpdate;he!==E&&(he===null?fe.firstBaseUpdate=K:he.next=K,fe.lastBaseUpdate=P)}}if(D!==null){var De=y.baseState,Ee=nt,je=null,Rt=null,ii=null,qt=D;do{var sn=qt.lane,Ki=qt.eventTime;if(tv(v,sn)){if(ii!==null){var Ke={eventTime:Ki,lane:Yo,tag:qt.tag,payload:qt.payload,callback:qt.callback,next:null};ii=ii.next=Ke}De=lhe(u,y,qt,De,h,p);var we=qt.callback;if(we!==null&&qt.lane!==Yo){u.flags|=O2;var at=y.effects;at===null?y.effects=[qt]:at.push(qt)}}else{var Ce={eventTime:Ki,lane:sn,tag:qt.tag,payload:qt.payload,callback:qt.callback,next:null};ii===null?(Rt=ii=Ce,je=De):ii=ii.next=Ce,Ee=Hi(Ee,sn)}if(qt=qt.next,qt===null){if(N=y.shared.pending,N===null)break;var At=N,Dt=At.next;At.next=null,qt=Dt,y.lastBaseUpdate=At,y.shared.pending=null}}while(!0);ii===null&&(je=De),y.baseState=je,y.firstBaseUpdate=Rt,y.lastBaseUpdate=ii;var hi=y.shared.interleaved;if(hi!==null){var xi=hi;do Ee=Hi(Ee,xi.lane),xi=xi.next;while(xi!==hi)}else D===null&&(y.shared.lanes=nt);G1(Ee),u.lanes=Ee,u.memoizedState=De}nD=null}function che(u,h){if(typeof u!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+u));u.call(h)}function Iz(){iD=!1}function rD(){return iD}function Nz(u,h,p){var v=h.effects;if(h.effects=null,v!==null)for(var y=0;y<v.length;y++){var D=v[y],E=D.callback;E!==null&&(D.callback=null,che(E,p))}}var bM={},Rz=new s.Component().refs,CM,wM,yM,SM,LM,Az,aD,xM,DM,kM;{CM=new Set,wM=new Set,yM=new Set,SM=new Set,xM=new Set,LM=new Set,DM=new Set,kM=new Set;var Mz=new Set;aD=function(u,h){if(!(u===null||typeof u=="function")){var p=h+"_"+u;Mz.has(p)||(Mz.add(p),r("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",h,u))}},Az=function(u,h){if(h===void 0){var p=Gi(u)||"Component";LM.has(p)||(LM.add(p),r("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",p))}},Object.defineProperty(bM,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(bM)}function EM(u,h,p,v){var y=u.memoizedState,D=p(v,y);{if(u.mode&so){Go(!0);try{D=p(v,y)}finally{Go(!1)}}Az(h,D)}var E=D==null?y:ei({},y,D);if(u.memoizedState=E,u.lanes===nt){var N=u.updateQueue;N.baseState=E}}var TM={isMounted:vae,enqueueSetState:function(u,h,p){var v=q_(u),y=sa(),D=Pf(v),E=Yd(y,D);E.payload=h,p!=null&&(aD(p,"setState"),E.callback=p);var N=Ef(v,E,D);N!==null&&(ko(N,v,D,y),sD(N,v,D)),U2(v,D)},enqueueReplaceState:function(u,h,p){var v=q_(u),y=sa(),D=Pf(v),E=Yd(y,D);E.tag=Ez,E.payload=h,p!=null&&(aD(p,"replaceState"),E.callback=p);var N=Ef(v,E,D);N!==null&&(ko(N,v,D,y),sD(N,v,D)),U2(v,D)},enqueueForceUpdate:function(u,h){var p=q_(u),v=sa(),y=Pf(p),D=Yd(v,y);D.tag=tD,h!=null&&(aD(h,"forceUpdate"),D.callback=h);var E=Ef(p,D,y);E!==null&&(ko(E,p,y,v),sD(E,p,y)),Yae(p,y)}};function Oz(u,h,p,v,y,D,E){var N=u.stateNode;if(typeof N.shouldComponentUpdate=="function"){var P=N.shouldComponentUpdate(v,D,E);{if(u.mode&so){Go(!0);try{P=N.shouldComponentUpdate(v,D,E)}finally{Go(!1)}}P===void 0&&r("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",Gi(h)||"Component")}return P}return h.prototype&&h.prototype.isPureReactComponent?!i1(p,v)||!i1(y,D):!0}function uhe(u,h,p){var v=u.stateNode;{var y=Gi(h)||"Component",D=v.render;D||(h.prototype&&typeof h.prototype.render=="function"?r("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",y):r("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",y)),v.getInitialState&&!v.getInitialState.isReactClassApproved&&!v.state&&r("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",y),v.getDefaultProps&&!v.getDefaultProps.isReactClassApproved&&r("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",y),v.propTypes&&r("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",y),v.contextType&&r("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",y),v.contextTypes&&r("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",y),h.contextType&&h.contextTypes&&!DM.has(h)&&(DM.add(h),r("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",y)),typeof v.componentShouldUpdate=="function"&&r("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",y),h.prototype&&h.prototype.isPureReactComponent&&typeof v.shouldComponentUpdate<"u"&&r("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",Gi(h)||"A pure component"),typeof v.componentDidUnmount=="function"&&r("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",y),typeof v.componentDidReceiveProps=="function"&&r("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",y),typeof v.componentWillRecieveProps=="function"&&r("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",y),typeof v.UNSAFE_componentWillRecieveProps=="function"&&r("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",y);var E=v.props!==p;v.props!==void 0&&E&&r("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",y,y),v.defaultProps&&r("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",y,y),typeof v.getSnapshotBeforeUpdate=="function"&&typeof v.componentDidUpdate!="function"&&!yM.has(h)&&(yM.add(h),r("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",Gi(h))),typeof v.getDerivedStateFromProps=="function"&&r("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",y),typeof v.getDerivedStateFromError=="function"&&r("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",y),typeof h.getSnapshotBeforeUpdate=="function"&&r("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",y);var N=v.state;N&&(typeof N!="object"||yn(N))&&r("%s.state: must be set to an object or null",y),typeof v.getChildContext=="function"&&typeof h.childContextTypes!="object"&&r("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",y)}}function Pz(u,h){h.updater=TM,u.stateNode=h,fae(h,u),h._reactInternalInstance=bM}function Fz(u,h,p){var v=!1,y=rl,D=rl,E=h.contextType;if("contextType"in h){var N=E===null||E!==void 0&&E.$$typeof===oi&&E._context===void 0;if(!N&&!kM.has(h)){kM.add(h);var P="";E===void 0?P=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof E!="object"?P=" However, it is set to a "+typeof E+".":E.$$typeof===Jt?P=" Did you accidentally pass the Context.Provider instead?":E._context!==void 0?P=" Did you accidentally pass the Context.Consumer instead?":P=" However, it is set to an object with keys {"+Object.keys(E).join(", ")+"}.",r("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",Gi(h)||"Component",P)}}if(typeof E=="object"&&E!==null)D=oo(E);else{y=dv(u,h,!0);var K=h.contextTypes;v=K!=null,D=v?hv(u,y):rl}var Z=new h(p,D);if(u.mode&so){Go(!0);try{Z=new h(p,D)}finally{Go(!1)}}var fe=u.memoizedState=Z.state!==null&&Z.state!==void 0?Z.state:null;Pz(u,Z);{if(typeof h.getDerivedStateFromProps=="function"&&fe===null){var he=Gi(h)||"Component";wM.has(he)||(wM.add(he),r("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",he,Z.state===null?"null":"undefined",he))}if(typeof h.getDerivedStateFromProps=="function"||typeof Z.getSnapshotBeforeUpdate=="function"){var De=null,Ee=null,je=null;if(typeof Z.componentWillMount=="function"&&Z.componentWillMount.__suppressDeprecationWarning!==!0?De="componentWillMount":typeof Z.UNSAFE_componentWillMount=="function"&&(De="UNSAFE_componentWillMount"),typeof Z.componentWillReceiveProps=="function"&&Z.componentWillReceiveProps.__suppressDeprecationWarning!==!0?Ee="componentWillReceiveProps":typeof Z.UNSAFE_componentWillReceiveProps=="function"&&(Ee="UNSAFE_componentWillReceiveProps"),typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate.__suppressDeprecationWarning!==!0?je="componentWillUpdate":typeof Z.UNSAFE_componentWillUpdate=="function"&&(je="UNSAFE_componentWillUpdate"),De!==null||Ee!==null||je!==null){var Rt=Gi(h)||"Component",ii=typeof h.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";SM.has(Rt)||(SM.add(Rt),r(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,Rt,ii,De!==null?`
  `+De:"",Ee!==null?`
  `+Ee:"",je!==null?`
  `+je:""))}}}return v&&az(u,y,D),Z}function dhe(u,h){var p=h.state;typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),p!==h.state&&(r("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",_i(u)||"Component"),TM.enqueueReplaceState(h,h.state,null))}function Bz(u,h,p,v){var y=h.state;if(typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(p,v),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(p,v),h.state!==y){{var D=_i(u)||"Component";CM.has(D)||(CM.add(D),r("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",D))}TM.enqueueReplaceState(h,h.state,null)}}function IM(u,h,p,v){uhe(u,h,p);var y=u.stateNode;y.props=p,y.state=u.memoizedState,y.refs=Rz,_M(u);var D=h.contextType;if(typeof D=="object"&&D!==null)y.context=oo(D);else{var E=dv(u,h,!0);y.context=hv(u,E)}{if(y.state===p){var N=Gi(h)||"Component";xM.has(N)||(xM.add(N),r("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",N))}u.mode&so&&xc.recordLegacyContextWarning(u,y),xc.recordUnsafeLifecycleWarnings(u,y)}y.state=u.memoizedState;var P=h.getDerivedStateFromProps;if(typeof P=="function"&&(EM(u,h,P,p),y.state=u.memoizedState),typeof h.getDerivedStateFromProps!="function"&&typeof y.getSnapshotBeforeUpdate!="function"&&(typeof y.UNSAFE_componentWillMount=="function"||typeof y.componentWillMount=="function")&&(dhe(u,y),oD(u,p,y,v),y.state=u.memoizedState),typeof y.componentDidMount=="function"){var K=rn;K|=mp,(u.mode&Su)!==ci&&(K|=Vd),u.flags|=K}}function hhe(u,h,p,v){var y=u.stateNode,D=u.memoizedProps;y.props=D;var E=y.context,N=h.contextType,P=rl;if(typeof N=="object"&&N!==null)P=oo(N);else{var K=dv(u,h,!0);P=hv(u,K)}var Z=h.getDerivedStateFromProps,fe=typeof Z=="function"||typeof y.getSnapshotBeforeUpdate=="function";!fe&&(typeof y.UNSAFE_componentWillReceiveProps=="function"||typeof y.componentWillReceiveProps=="function")&&(D!==p||E!==P)&&Bz(u,y,p,P),Iz();var he=u.memoizedState,De=y.state=he;if(oD(u,p,y,v),De=u.memoizedState,D===p&&he===De&&!zx()&&!rD()){if(typeof y.componentDidMount=="function"){var Ee=rn;Ee|=mp,(u.mode&Su)!==ci&&(Ee|=Vd),u.flags|=Ee}return!1}typeof Z=="function"&&(EM(u,h,Z,p),De=u.memoizedState);var je=rD()||Oz(u,h,D,p,he,De,P);if(je){if(!fe&&(typeof y.UNSAFE_componentWillMount=="function"||typeof y.componentWillMount=="function")&&(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"){var Rt=rn;Rt|=mp,(u.mode&Su)!==ci&&(Rt|=Vd),u.flags|=Rt}}else{if(typeof y.componentDidMount=="function"){var ii=rn;ii|=mp,(u.mode&Su)!==ci&&(ii|=Vd),u.flags|=ii}u.memoizedProps=p,u.memoizedState=De}return y.props=p,y.state=De,y.context=P,je}function fhe(u,h,p,v,y){var D=h.stateNode;Tz(u,h);var E=h.memoizedProps,N=h.type===h.elementType?E:Dc(h.type,E);D.props=N;var P=h.pendingProps,K=D.context,Z=p.contextType,fe=rl;if(typeof Z=="object"&&Z!==null)fe=oo(Z);else{var he=dv(h,p,!0);fe=hv(h,he)}var De=p.getDerivedStateFromProps,Ee=typeof De=="function"||typeof D.getSnapshotBeforeUpdate=="function";!Ee&&(typeof D.UNSAFE_componentWillReceiveProps=="function"||typeof D.componentWillReceiveProps=="function")&&(E!==P||K!==fe)&&Bz(h,D,v,fe),Iz();var je=h.memoizedState,Rt=D.state=je;if(oD(h,v,D,y),Rt=h.memoizedState,E===P&&je===Rt&&!zx()&&!rD()&&!He)return typeof D.componentDidUpdate=="function"&&(E!==u.memoizedProps||je!==u.memoizedState)&&(h.flags|=rn),typeof D.getSnapshotBeforeUpdate=="function"&&(E!==u.memoizedProps||je!==u.memoizedState)&&(h.flags|=gp),!1;typeof De=="function"&&(EM(h,p,De,v),Rt=h.memoizedState);var ii=rD()||Oz(h,p,N,v,je,Rt,fe)||He;return ii?(!Ee&&(typeof D.UNSAFE_componentWillUpdate=="function"||typeof D.componentWillUpdate=="function")&&(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(v,Rt,fe),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(v,Rt,fe)),typeof D.componentDidUpdate=="function"&&(h.flags|=rn),typeof D.getSnapshotBeforeUpdate=="function"&&(h.flags|=gp)):(typeof D.componentDidUpdate=="function"&&(E!==u.memoizedProps||je!==u.memoizedState)&&(h.flags|=rn),typeof D.getSnapshotBeforeUpdate=="function"&&(E!==u.memoizedProps||je!==u.memoizedState)&&(h.flags|=gp),h.memoizedProps=v,h.memoizedState=Rt),D.props=v,D.state=Rt,D.context=fe,ii}var NM,RM,AM,MM,OM,Vz=function(u,h){};NM=!1,RM=!1,AM={},MM={},OM={},Vz=function(u,h){if(!(u===null||typeof u!="object")&&!(!u._store||u._store.validated||u.key!=null)){if(typeof u._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");u._store.validated=!0;var p=_i(h)||"Component";MM[p]||(MM[p]=!0,r('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function S1(u,h,p){var v=p.ref;if(v!==null&&typeof v!="function"&&typeof v!="object"){if((u.mode&so||$e)&&!(p._owner&&p._self&&p._owner.stateNode!==p._self)){var y=_i(u)||"Component";AM[y]||(r('A string ref, "%s", has been found within a strict mode tree. String refs are a source of potential bugs and should be avoided. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',v),AM[y]=!0)}if(p._owner){var D=p._owner,E;if(D){var N=D;if(N.tag!==c)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");E=N.stateNode}if(!E)throw new Error("Missing owner for string ref "+v+". This error is likely caused by a bug in React. Please file an issue.");var P=E;ee(v,"ref");var K=""+v;if(h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===K)return h.ref;var Z=function(fe){var he=P.refs;he===Rz&&(he=P.refs={}),fe===null?delete he[K]:he[K]=fe};return Z._stringRef=K,Z}else{if(typeof v!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!p._owner)throw new Error("Element ref was specified as a string ("+v+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return v}function lD(u,h){var p=Object.prototype.toString.call(h);throw new Error("Objects are not valid as a React child (found: "+(p==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":p)+"). If you meant to render a collection of children, use an array instead.")}function cD(u){{var h=_i(u)||"Component";if(OM[h])return;OM[h]=!0,r("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function Wz(u){var h=u._payload,p=u._init;return p(h)}function Hz(u){function h(Ce,Ke){if(!!u){var we=Ce.deletions;we===null?(Ce.deletions=[Ke],Ce.flags|=fp):we.push(Ke)}}function p(Ce,Ke){if(!u)return null;for(var we=Ke;we!==null;)h(Ce,we),we=we.sibling;return null}function v(Ce,Ke){for(var we=new Map,at=Ke;at!==null;)at.key!==null?we.set(at.key,at):we.set(at.index,at),at=at.sibling;return we}function y(Ce,Ke){var we=Wp(Ce,Ke);return we.index=0,we.sibling=null,we}function D(Ce,Ke,we){if(Ce.index=we,!u)return Ce.flags|=EW,Ke;var at=Ce.alternate;if(at!==null){var At=at.index;return At<Ke?(Ce.flags|=no,Ke):At}else return Ce.flags|=no,Ke}function E(Ce){return u&&Ce.alternate===null&&(Ce.flags|=no),Ce}function N(Ce,Ke,we,at){if(Ke===null||Ke.tag!==_){var At=lP(we,Ce.mode,at);return At.return=Ce,At}else{var Dt=y(Ke,we);return Dt.return=Ce,Dt}}function P(Ce,Ke,we,at){var At=we.type;if(At===me)return Z(Ce,Ke,we.props.children,at,we.key);if(Ke!==null&&(Ke.elementType===At||N$(Ke,we)||typeof At=="object"&&At!==null&&At.$$typeof===ae&&Wz(At)===Ke.type)){var Dt=y(Ke,we.props);return Dt.ref=S1(Ce,Ke,we),Dt.return=Ce,Dt._debugSource=we._source,Dt._debugOwner=we._owner,Dt}var hi=aP(we,Ce.mode,at);return hi.ref=S1(Ce,Ke,we),hi.return=Ce,hi}function K(Ce,Ke,we,at){if(Ke===null||Ke.tag!==g||Ke.stateNode.containerInfo!==we.containerInfo||Ke.stateNode.implementation!==we.implementation){var At=cP(we,Ce.mode,at);return At.return=Ce,At}else{var Dt=y(Ke,we.children||[]);return Dt.return=Ce,Dt}}function Z(Ce,Ke,we,at,At){if(Ke===null||Ke.tag!==C){var Dt=Bf(we,Ce.mode,at,At);return Dt.return=Ce,Dt}else{var hi=y(Ke,we);return hi.return=Ce,hi}}function fe(Ce,Ke,we){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"){var at=lP(""+Ke,Ce.mode,we);return at.return=Ce,at}if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case Nt:{var At=aP(Ke,Ce.mode,we);return At.ref=S1(Ce,null,Ke),At.return=Ce,At}case H:{var Dt=cP(Ke,Ce.mode,we);return Dt.return=Ce,Dt}case ae:{var hi=Ke._payload,xi=Ke._init;return fe(Ce,xi(hi),we)}}if(yn(Ke)||zn(Ke)){var On=Bf(Ke,Ce.mode,we,null);return On.return=Ce,On}lD(Ce,Ke)}return typeof Ke=="function"&&cD(Ce),null}function he(Ce,Ke,we,at){var At=Ke!==null?Ke.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return At!==null?null:N(Ce,Ke,""+we,at);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case Nt:return we.key===At?P(Ce,Ke,we,at):null;case H:return we.key===At?K(Ce,Ke,we,at):null;case ae:{var Dt=we._payload,hi=we._init;return he(Ce,Ke,hi(Dt),at)}}if(yn(we)||zn(we))return At!==null?null:Z(Ce,Ke,we,at,null);lD(Ce,we)}return typeof we=="function"&&cD(Ce),null}function De(Ce,Ke,we,at,At){if(typeof at=="string"&&at!==""||typeof at=="number"){var Dt=Ce.get(we)||null;return N(Ke,Dt,""+at,At)}if(typeof at=="object"&&at!==null){switch(at.$$typeof){case Nt:{var hi=Ce.get(at.key===null?we:at.key)||null;return P(Ke,hi,at,At)}case H:{var xi=Ce.get(at.key===null?we:at.key)||null;return K(Ke,xi,at,At)}case ae:var On=at._payload,fn=at._init;return De(Ce,Ke,we,fn(On),At)}if(yn(at)||zn(at)){var Xs=Ce.get(we)||null;return Z(Ke,Xs,at,At,null)}lD(Ke,at)}return typeof at=="function"&&cD(Ke),null}function Ee(Ce,Ke,we){{if(typeof Ce!="object"||Ce===null)return Ke;switch(Ce.$$typeof){case Nt:case H:Vz(Ce,we);var at=Ce.key;if(typeof at!="string")break;if(Ke===null){Ke=new Set,Ke.add(at);break}if(!Ke.has(at)){Ke.add(at);break}r("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted \u2014 the behavior is unsupported and could change in a future version.",at);break;case ae:var At=Ce._payload,Dt=Ce._init;Ee(Dt(At),Ke,we);break}}return Ke}function je(Ce,Ke,we,at){for(var At=null,Dt=0;Dt<we.length;Dt++){var hi=we[Dt];At=Ee(hi,At,Ce)}for(var xi=null,On=null,fn=Ke,Xs=0,gn=0,Ws=null;fn!==null&&gn<we.length;gn++){fn.index>gn?(Ws=fn,fn=null):Ws=fn.sibling;var Nr=he(Ce,fn,we[gn],at);if(Nr===null){fn===null&&(fn=Ws);break}u&&fn&&Nr.alternate===null&&h(Ce,fn),Xs=D(Nr,Xs,gn),On===null?xi=Nr:On.sibling=Nr,On=Nr,fn=Ws}if(gn===we.length){if(p(Ce,fn),lr()){var pr=gn;kp(Ce,pr)}return xi}if(fn===null){for(;gn<we.length;gn++){var ll=fe(Ce,we[gn],at);ll!==null&&(Xs=D(ll,Xs,gn),On===null?xi=ll:On.sibling=ll,On=ll)}if(lr()){var oa=gn;kp(Ce,oa)}return xi}for(var ra=v(Ce,fn);gn<we.length;gn++){var Rr=De(ra,Ce,gn,we[gn],at);Rr!==null&&(u&&Rr.alternate!==null&&ra.delete(Rr.key===null?gn:Rr.key),Xs=D(Rr,Xs,gn),On===null?xi=Rr:On.sibling=Rr,On=Rr)}if(u&&ra.forEach(function(Mv){return h(Ce,Mv)}),lr()){var th=gn;kp(Ce,th)}return xi}function Rt(Ce,Ke,we,at){var At=zn(we);if(typeof At!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&we[Symbol.toStringTag]==="Generator"&&(RM||r("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),RM=!0),we.entries===At&&(NM||r("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),NM=!0);var Dt=At.call(we);if(Dt)for(var hi=null,xi=Dt.next();!xi.done;xi=Dt.next()){var On=xi.value;hi=Ee(On,hi,Ce)}}var fn=At.call(we);if(fn==null)throw new Error("An iterable object provided no iterator.");for(var Xs=null,gn=null,Ws=Ke,Nr=0,pr=0,ll=null,oa=fn.next();Ws!==null&&!oa.done;pr++,oa=fn.next()){Ws.index>pr?(ll=Ws,Ws=null):ll=Ws.sibling;var ra=he(Ce,Ws,oa.value,at);if(ra===null){Ws===null&&(Ws=ll);break}u&&Ws&&ra.alternate===null&&h(Ce,Ws),Nr=D(ra,Nr,pr),gn===null?Xs=ra:gn.sibling=ra,gn=ra,Ws=ll}if(oa.done){if(p(Ce,Ws),lr()){var Rr=pr;kp(Ce,Rr)}return Xs}if(Ws===null){for(;!oa.done;pr++,oa=fn.next()){var th=fe(Ce,oa.value,at);th!==null&&(Nr=D(th,Nr,pr),gn===null?Xs=th:gn.sibling=th,gn=th)}if(lr()){var Mv=pr;kp(Ce,Mv)}return Xs}for(var J1=v(Ce,Ws);!oa.done;pr++,oa=fn.next()){var Mu=De(J1,Ce,pr,oa.value,at);Mu!==null&&(u&&Mu.alternate!==null&&J1.delete(Mu.key===null?pr:Mu.key),Nr=D(Mu,Nr,pr),gn===null?Xs=Mu:gn.sibling=Mu,gn=Mu)}if(u&&J1.forEach(function(kpe){return h(Ce,kpe)}),lr()){var Dpe=pr;kp(Ce,Dpe)}return Xs}function ii(Ce,Ke,we,at){if(Ke!==null&&Ke.tag===_){p(Ce,Ke.sibling);var At=y(Ke,we);return At.return=Ce,At}p(Ce,Ke);var Dt=lP(we,Ce.mode,at);return Dt.return=Ce,Dt}function qt(Ce,Ke,we,at){for(var At=we.key,Dt=Ke;Dt!==null;){if(Dt.key===At){var hi=we.type;if(hi===me){if(Dt.tag===C){p(Ce,Dt.sibling);var xi=y(Dt,we.props.children);return xi.return=Ce,xi._debugSource=we._source,xi._debugOwner=we._owner,xi}}else if(Dt.elementType===hi||N$(Dt,we)||typeof hi=="object"&&hi!==null&&hi.$$typeof===ae&&Wz(hi)===Dt.type){p(Ce,Dt.sibling);var On=y(Dt,we.props);return On.ref=S1(Ce,Dt,we),On.return=Ce,On._debugSource=we._source,On._debugOwner=we._owner,On}p(Ce,Dt);break}else h(Ce,Dt);Dt=Dt.sibling}if(we.type===me){var fn=Bf(we.props.children,Ce.mode,at,we.key);return fn.return=Ce,fn}else{var Xs=aP(we,Ce.mode,at);return Xs.ref=S1(Ce,Ke,we),Xs.return=Ce,Xs}}function sn(Ce,Ke,we,at){for(var At=we.key,Dt=Ke;Dt!==null;){if(Dt.key===At)if(Dt.tag===g&&Dt.stateNode.containerInfo===we.containerInfo&&Dt.stateNode.implementation===we.implementation){p(Ce,Dt.sibling);var hi=y(Dt,we.children||[]);return hi.return=Ce,hi}else{p(Ce,Dt);break}else h(Ce,Dt);Dt=Dt.sibling}var xi=cP(we,Ce.mode,at);return xi.return=Ce,xi}function Ki(Ce,Ke,we,at){var At=typeof we=="object"&&we!==null&&we.type===me&&we.key===null;if(At&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case Nt:return E(qt(Ce,Ke,we,at));case H:return E(sn(Ce,Ke,we,at));case ae:var Dt=we._payload,hi=we._init;return Ki(Ce,Ke,hi(Dt),at)}if(yn(we))return je(Ce,Ke,we,at);if(zn(we))return Rt(Ce,Ke,we,at);lD(Ce,we)}return typeof we=="string"&&we!==""||typeof we=="number"?E(ii(Ce,Ke,""+we,at)):(typeof we=="function"&&cD(Ce),p(Ce,Ke))}return Ki}var vv=Hz(!0),zz=Hz(!1);function ghe(u,h){if(u!==null&&h.child!==u.child)throw new Error("Resuming work not yet implemented.");if(h.child!==null){var p=h.child,v=Wp(p,p.pendingProps);for(h.child=v,v.return=h;p.sibling!==null;)p=p.sibling,v=v.sibling=Wp(p,p.pendingProps),v.return=h;v.sibling=null}}function phe(u,h){for(var p=u.child;p!==null;)$ge(p,h),p=p.sibling}var L1={},Tf=Lf(L1),x1=Lf(L1),uD=Lf(L1);function dD(u){if(u===L1)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return u}function Uz(){var u=dD(uD.current);return u}function PM(u,h){Tr(uD,h,u),Tr(x1,u,u),Tr(Tf,L1,u);var p=Tue(h);Er(Tf,u),Tr(Tf,p,u)}function bv(u){Er(Tf,u),Er(x1,u),Er(uD,u)}function FM(){var u=dD(Tf.current);return u}function $z(u){dD(uD.current);var h=dD(Tf.current),p=Iue(h,u.type);h!==p&&(Tr(x1,u,u),Tr(Tf,p,u))}function BM(u){x1.current===u&&(Er(Tf,u),Er(x1,u))}var mhe=0,jz=1,Kz=1,D1=2,kc=Lf(mhe);function VM(u,h){return(u&h)!==0}function Cv(u){return u&jz}function WM(u,h){return u&jz|h}function _he(u,h){return u|h}function If(u,h){Tr(kc,h,u)}function wv(u){Er(kc,u)}function vhe(u,h){var p=u.memoizedState;return p!==null?p.dehydrated!==null:(u.memoizedProps,!0)}function hD(u){for(var h=u;h!==null;){if(h.tag===A){var p=h.memoizedState;if(p!==null){var v=p.dehydrated;if(v===null||iz(v)||KA(v))return h}}else if(h.tag===q&&h.memoizedProps.revealOrder!==void 0){var y=(h.flags&Sn)!==li;if(y)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)return null;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Ea=0,Co=1,ku=2,wo=4,cr=8,HM=[];function zM(){for(var u=0;u<HM.length;u++){var h=HM[u];h._workInProgressVersionPrimary=null}HM.length=0}function bhe(u,h){var p=h._getVersion,v=p(h._source);u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[h,v]:u.mutableSourceEagerHydrationData.push(h,v)}var Et=t.ReactCurrentDispatcher,k1=t.ReactCurrentBatchConfig,UM,yv;UM=new Set;var Ap=nt,Mn=null,yo=null,So=null,fD=!1,E1=!1,T1=0,Che=0,whe=25,Ze=null,Kl=null,Nf=-1,$M=!1;function Dn(){{var u=Ze;Kl===null?Kl=[u]:Kl.push(u)}}function St(){{var u=Ze;Kl!==null&&(Nf++,Kl[Nf]!==u&&yhe(u))}}function Sv(u){u!=null&&!yn(u)&&r("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",Ze,typeof u)}function yhe(u){{var h=_i(Mn);if(!UM.has(h)&&(UM.add(h),Kl!==null)){for(var p="",v=30,y=0;y<=Nf;y++){for(var D=Kl[y],E=y===Nf?u:D,N=y+1+". "+D;N.length<v;)N+=" ";N+=E+`
`,p+=N}r(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,h,p)}}}function Ir(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function jM(u,h){if($M)return!1;if(h===null)return r("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",Ze),!1;u.length!==h.length&&r(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,Ze,"["+h.join(", ")+"]","["+u.join(", ")+"]");for(var p=0;p<h.length&&p<u.length;p++)if(!ol(u[p],h[p]))return!1;return!0}function Lv(u,h,p,v,y,D){Ap=D,Mn=h,Kl=u!==null?u._debugHookTypes:null,Nf=-1,$M=u!==null&&u.type!==h.type,h.memoizedState=null,h.updateQueue=null,h.lanes=nt,u!==null&&u.memoizedState!==null?Et.current=gU:Kl!==null?Et.current=fU:Et.current=hU;var E=p(v,y);if(E1){var N=0;do{if(E1=!1,T1=0,N>=whe)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");N+=1,$M=!1,yo=null,So=null,h.updateQueue=null,Nf=-1,Et.current=pU,E=p(v,y)}while(E1)}Et.current=DD,h._debugHookTypes=Kl;var P=yo!==null&&yo.next!==null;if(Ap=nt,Mn=null,yo=null,So=null,Ze=null,Kl=null,Nf=-1,u!==null&&(u.flags&Wd)!==(h.flags&Wd)&&(u.mode&tn)!==ci&&r("Internal React error: Expected static flag was missing. Please notify the React team."),fD=!1,P)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return E}function xv(){var u=T1!==0;return T1=0,u}function qz(u,h,p){h.updateQueue=u.updateQueue,(h.mode&Su)!==ci?h.flags&=~(rx|Vd|Cc|rn):h.flags&=~(Cc|rn),u.lanes=fx(u.lanes,p)}function Gz(){if(Et.current=DD,fD){for(var u=Mn.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}fD=!1}Ap=nt,Mn=null,yo=null,So=null,Kl=null,Nf=-1,Ze=null,aU=!1,E1=!1,T1=0}function Eu(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return So===null?Mn.memoizedState=So=u:So=So.next=u,So}function ql(){var u;if(yo===null){var h=Mn.alternate;h!==null?u=h.memoizedState:u=null}else u=yo.next;var p;if(So===null?p=Mn.memoizedState:p=So.next,p!==null)So=p,p=So.next,yo=u;else{if(u===null)throw new Error("Rendered more hooks than during the previous render.");yo=u;var v={memoizedState:yo.memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null};So===null?Mn.memoizedState=So=v:So=So.next=v}return So}function Yz(){return{lastEffect:null,stores:null}}function KM(u,h){return typeof h=="function"?h(u):h}function qM(u,h,p){var v=Eu(),y;p!==void 0?y=p(h):y=h,v.memoizedState=v.baseState=y;var D={pending:null,interleaved:null,lanes:nt,dispatch:null,lastRenderedReducer:u,lastRenderedState:y};v.queue=D;var E=D.dispatch=Dhe.bind(null,Mn,D);return[v.memoizedState,E]}function GM(u,h,p){var v=ql(),y=v.queue;if(y===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");y.lastRenderedReducer=u;var D=yo,E=D.baseQueue,N=y.pending;if(N!==null){if(E!==null){var P=E.next,K=N.next;E.next=K,N.next=P}D.baseQueue!==E&&r("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),D.baseQueue=E=N,y.pending=null}if(E!==null){var Z=E.next,fe=D.baseState,he=null,De=null,Ee=null,je=Z;do{var Rt=je.lane;if(tv(Ap,Rt)){if(Ee!==null){var qt={lane:Yo,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null};Ee=Ee.next=qt}if(je.hasEagerState)fe=je.eagerState;else{var sn=je.action;fe=u(fe,sn)}}else{var ii={lane:Rt,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null};Ee===null?(De=Ee=ii,he=fe):Ee=Ee.next=ii,Mn.lanes=Hi(Mn.lanes,Rt),G1(Rt)}je=je.next}while(je!==null&&je!==Z);Ee===null?he=fe:Ee.next=De,ol(fe,v.memoizedState)||P1(),v.memoizedState=fe,v.baseState=he,v.baseQueue=Ee,y.lastRenderedState=fe}var Ki=y.interleaved;if(Ki!==null){var Ce=Ki;do{var Ke=Ce.lane;Mn.lanes=Hi(Mn.lanes,Ke),G1(Ke),Ce=Ce.next}while(Ce!==Ki)}else E===null&&(y.lanes=nt);var we=y.dispatch;return[v.memoizedState,we]}function YM(u,h,p){var v=ql(),y=v.queue;if(y===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");y.lastRenderedReducer=u;var D=y.dispatch,E=y.pending,N=v.memoizedState;if(E!==null){y.pending=null;var P=E.next,K=P;do{var Z=K.action;N=u(N,Z),K=K.next}while(K!==P);ol(N,v.memoizedState)||P1(),v.memoizedState=N,v.baseQueue===null&&(v.baseState=N),y.lastRenderedState=N}return[N,D]}function UWe(u,h,p){}function $We(u,h,p){}function ZM(u,h,p){var v=Mn,y=Eu(),D,E=lr();if(E){if(p===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");D=p(),yv||D!==p()&&(r("The result of getServerSnapshot should be cached to avoid an infinite loop"),yv=!0)}else{if(D=h(),!yv){var N=h();ol(D,N)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),yv=!0)}var P=$D();if(P===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");hx(P,Ap)||Zz(v,h,D)}y.memoizedState=D;var K={value:D,getSnapshot:h};return y.queue=K,vD(Xz.bind(null,v,K,u),[u]),v.flags|=Cc,I1(Co|cr,Qz.bind(null,v,K,D,h),void 0,null),D}function gD(u,h,p){var v=Mn,y=ql(),D=h();if(!yv){var E=h();ol(D,E)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),yv=!0)}var N=y.memoizedState,P=!ol(N,D);P&&(y.memoizedState=D,P1());var K=y.queue;if(R1(Xz.bind(null,v,K,u),[u]),K.getSnapshot!==h||P||So!==null&&So.memoizedState.tag&Co){v.flags|=Cc,I1(Co|cr,Qz.bind(null,v,K,D,h),void 0,null);var Z=$D();if(Z===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");hx(Z,Ap)||Zz(v,h,D)}return D}function Zz(u,h,p){u.flags|=ox;var v={getSnapshot:h,value:p},y=Mn.updateQueue;if(y===null)y=Yz(),Mn.updateQueue=y,y.stores=[v];else{var D=y.stores;D===null?y.stores=[v]:D.push(v)}}function Qz(u,h,p,v){h.value=p,h.getSnapshot=v,Jz(h)&&eU(u)}function Xz(u,h,p){var v=function(){Jz(h)&&eU(u)};return p(v)}function Jz(u){var h=u.getSnapshot,p=u.value;try{var v=h();return!ol(p,v)}catch{return!0}}function eU(u){var h=ka(u,wi);h!==null&&ko(h,u,wi,ls)}function pD(u){var h=Eu();typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u;var p={pending:null,interleaved:null,lanes:nt,dispatch:null,lastRenderedReducer:KM,lastRenderedState:u};h.queue=p;var v=p.dispatch=khe.bind(null,Mn,p);return[h.memoizedState,v]}function QM(u){return GM(KM)}function XM(u){return YM(KM)}function I1(u,h,p,v){var y={tag:u,create:h,destroy:p,deps:v,next:null},D=Mn.updateQueue;if(D===null)D=Yz(),Mn.updateQueue=D,D.lastEffect=y.next=y;else{var E=D.lastEffect;if(E===null)D.lastEffect=y.next=y;else{var N=E.next;E.next=y,y.next=N,D.lastEffect=y}}return y}function JM(u){var h=Eu();{var p={current:u};return h.memoizedState=p,p}}function mD(u){var h=ql();return h.memoizedState}function N1(u,h,p,v){var y=Eu(),D=v===void 0?null:v;Mn.flags|=u,y.memoizedState=I1(Co|h,p,void 0,D)}function _D(u,h,p,v){var y=ql(),D=v===void 0?null:v,E=void 0;if(yo!==null){var N=yo.memoizedState;if(E=N.destroy,D!==null){var P=N.deps;if(jM(D,P)){y.memoizedState=I1(h,p,E,D);return}}}Mn.flags|=u,y.memoizedState=I1(Co|h,p,E,D)}function vD(u,h){return(Mn.mode&Su)!==ci?N1(rx|Cc|B2,cr,u,h):N1(Cc|B2,cr,u,h)}function R1(u,h){return _D(Cc,cr,u,h)}function eO(u,h){return N1(rn,ku,u,h)}function bD(u,h){return _D(rn,ku,u,h)}function tO(u,h){var p=rn;return p|=mp,(Mn.mode&Su)!==ci&&(p|=Vd),N1(p,wo,u,h)}function CD(u,h){return _D(rn,wo,u,h)}function tU(u,h){if(typeof h=="function"){var p=h,v=u();return p(v),function(){p(null)}}else if(h!=null){var y=h;y.hasOwnProperty("current")||r("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(y).join(", ")+"}");var D=u();return y.current=D,function(){y.current=null}}}function iO(u,h,p){typeof h!="function"&&r("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",h!==null?typeof h:"null");var v=p!=null?p.concat([u]):null,y=rn;return y|=mp,(Mn.mode&Su)!==ci&&(y|=Vd),N1(y,wo,tU.bind(null,h,u),v)}function wD(u,h,p){typeof h!="function"&&r("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",h!==null?typeof h:"null");var v=p!=null?p.concat([u]):null;return _D(rn,wo,tU.bind(null,h,u),v)}function She(u,h){}var yD=She;function nO(u,h){var p=Eu(),v=h===void 0?null:h;return p.memoizedState=[u,v],u}function SD(u,h){var p=ql(),v=h===void 0?null:h,y=p.memoizedState;if(y!==null&&v!==null){var D=y[1];if(jM(v,D))return y[0]}return p.memoizedState=[u,v],u}function sO(u,h){var p=Eu(),v=h===void 0?null:h,y=u();return p.memoizedState=[y,v],y}function LD(u,h){var p=ql(),v=h===void 0?null:h,y=p.memoizedState;if(y!==null&&v!==null){var D=y[1];if(jM(v,D))return y[0]}var E=u();return p.memoizedState=[E,v],E}function oO(u){var h=Eu();return h.memoizedState=u,u}function iU(u){var h=ql(),p=yo,v=p.memoizedState;return sU(h,v,u)}function nU(u){var h=ql();if(yo===null)return h.memoizedState=u,u;var p=yo.memoizedState;return sU(h,p,u)}function sU(u,h,p){var v=!ole(Ap);if(v){if(!ol(p,h)){var y=qW();Mn.lanes=Hi(Mn.lanes,y),G1(y),u.baseState=!0}return h}else return u.baseState&&(u.baseState=!1,P1()),u.memoizedState=p,p}function Lhe(u,h,p){var v=yc();Zo(gle(v,zd)),u(!0);var y=k1.transition;k1.transition={};var D=k1.transition;k1.transition._updatedFibers=new Set;try{u(!1),h()}finally{if(Zo(v),k1.transition=y,y===null&&D._updatedFibers){var E=D._updatedFibers.size;E>10&&o("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),D._updatedFibers.clear()}}}function rO(){var u=pD(!1),h=u[0],p=u[1],v=Lhe.bind(null,p),y=Eu();return y.memoizedState=v,[h,v]}function oU(){var u=QM(),h=u[0],p=ql(),v=p.memoizedState;return[h,v]}function rU(){var u=XM(),h=u[0],p=ql(),v=p.memoizedState;return[h,v]}var aU=!1;function xhe(){return aU}function aO(){var u=Eu(),h=$D(),p=h.identifierPrefix,v;if(lr()){var y=Vde();v=":"+p+"R"+y;var D=T1++;D>0&&(v+="H"+D.toString(32)),v+=":"}else{var E=Che++;v=":"+p+"r"+E.toString(32)+":"}return u.memoizedState=v,v}function xD(){var u=ql(),h=u.memoizedState;return h}function Dhe(u,h,p){typeof arguments[3]=="function"&&r("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var v=Pf(u),y={lane:v,action:p,hasEagerState:!1,eagerState:null,next:null};if(lU(u))cU(h,y);else{var D=Dz(u,h,y,v);if(D!==null){var E=sa();ko(D,u,v,E),uU(D,h,v)}}dU(u,v)}function khe(u,h,p){typeof arguments[3]=="function"&&r("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var v=Pf(u),y={lane:v,action:p,hasEagerState:!1,eagerState:null,next:null};if(lU(u))cU(h,y);else{var D=u.alternate;if(u.lanes===nt&&(D===null||D.lanes===nt)){var E=h.lastRenderedReducer;if(E!==null){var N;N=Et.current,Et.current=Ec;try{var P=h.lastRenderedState,K=E(P,p);if(y.hasEagerState=!0,y.eagerState=K,ol(K,P)){ohe(u,h,y,v);return}}catch{}finally{Et.current=N}}}var Z=Dz(u,h,y,v);if(Z!==null){var fe=sa();ko(Z,u,v,fe),uU(Z,h,v)}}dU(u,v)}function lU(u){var h=u.alternate;return u===Mn||h!==null&&h===Mn}function cU(u,h){E1=fD=!0;var p=u.pending;p===null?h.next=h:(h.next=p.next,p.next=h),u.pending=h}function uU(u,h,p){if(KW(p)){var v=h.lanes;v=GW(v,u.pendingLanes);var y=Hi(v,p);h.lanes=y,gA(u,y)}}function dU(u,h,p){U2(u,h)}var DD={readContext:oo,useCallback:Ir,useContext:Ir,useEffect:Ir,useImperativeHandle:Ir,useInsertionEffect:Ir,useLayoutEffect:Ir,useMemo:Ir,useReducer:Ir,useRef:Ir,useState:Ir,useDebugValue:Ir,useDeferredValue:Ir,useTransition:Ir,useMutableSource:Ir,useSyncExternalStore:Ir,useId:Ir,unstable_isNewReconciler:ke},hU=null,fU=null,gU=null,pU=null,Tu=null,Ec=null,kD=null;{var lO=function(){r("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},yi=function(){r("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};hU={readContext:function(u){return oo(u)},useCallback:function(u,h){return Ze="useCallback",Dn(),Sv(h),nO(u,h)},useContext:function(u){return Ze="useContext",Dn(),oo(u)},useEffect:function(u,h){return Ze="useEffect",Dn(),Sv(h),vD(u,h)},useImperativeHandle:function(u,h,p){return Ze="useImperativeHandle",Dn(),Sv(p),iO(u,h,p)},useInsertionEffect:function(u,h){return Ze="useInsertionEffect",Dn(),Sv(h),eO(u,h)},useLayoutEffect:function(u,h){return Ze="useLayoutEffect",Dn(),Sv(h),tO(u,h)},useMemo:function(u,h){Ze="useMemo",Dn(),Sv(h);var p=Et.current;Et.current=Tu;try{return sO(u,h)}finally{Et.current=p}},useReducer:function(u,h,p){Ze="useReducer",Dn();var v=Et.current;Et.current=Tu;try{return qM(u,h,p)}finally{Et.current=v}},useRef:function(u){return Ze="useRef",Dn(),JM(u)},useState:function(u){Ze="useState",Dn();var h=Et.current;Et.current=Tu;try{return pD(u)}finally{Et.current=h}},useDebugValue:function(u,h){return Ze="useDebugValue",Dn(),void 0},useDeferredValue:function(u){return Ze="useDeferredValue",Dn(),oO(u)},useTransition:function(){return Ze="useTransition",Dn(),rO()},useMutableSource:function(u,h,p){return Ze="useMutableSource",Dn(),void 0},useSyncExternalStore:function(u,h,p){return Ze="useSyncExternalStore",Dn(),ZM(u,h,p)},useId:function(){return Ze="useId",Dn(),aO()},unstable_isNewReconciler:ke},fU={readContext:function(u){return oo(u)},useCallback:function(u,h){return Ze="useCallback",St(),nO(u,h)},useContext:function(u){return Ze="useContext",St(),oo(u)},useEffect:function(u,h){return Ze="useEffect",St(),vD(u,h)},useImperativeHandle:function(u,h,p){return Ze="useImperativeHandle",St(),iO(u,h,p)},useInsertionEffect:function(u,h){return Ze="useInsertionEffect",St(),eO(u,h)},useLayoutEffect:function(u,h){return Ze="useLayoutEffect",St(),tO(u,h)},useMemo:function(u,h){Ze="useMemo",St();var p=Et.current;Et.current=Tu;try{return sO(u,h)}finally{Et.current=p}},useReducer:function(u,h,p){Ze="useReducer",St();var v=Et.current;Et.current=Tu;try{return qM(u,h,p)}finally{Et.current=v}},useRef:function(u){return Ze="useRef",St(),JM(u)},useState:function(u){Ze="useState",St();var h=Et.current;Et.current=Tu;try{return pD(u)}finally{Et.current=h}},useDebugValue:function(u,h){return Ze="useDebugValue",St(),void 0},useDeferredValue:function(u){return Ze="useDeferredValue",St(),oO(u)},useTransition:function(){return Ze="useTransition",St(),rO()},useMutableSource:function(u,h,p){return Ze="useMutableSource",St(),void 0},useSyncExternalStore:function(u,h,p){return Ze="useSyncExternalStore",St(),ZM(u,h,p)},useId:function(){return Ze="useId",St(),aO()},unstable_isNewReconciler:ke},gU={readContext:function(u){return oo(u)},useCallback:function(u,h){return Ze="useCallback",St(),SD(u,h)},useContext:function(u){return Ze="useContext",St(),oo(u)},useEffect:function(u,h){return Ze="useEffect",St(),R1(u,h)},useImperativeHandle:function(u,h,p){return Ze="useImperativeHandle",St(),wD(u,h,p)},useInsertionEffect:function(u,h){return Ze="useInsertionEffect",St(),bD(u,h)},useLayoutEffect:function(u,h){return Ze="useLayoutEffect",St(),CD(u,h)},useMemo:function(u,h){Ze="useMemo",St();var p=Et.current;Et.current=Ec;try{return LD(u,h)}finally{Et.current=p}},useReducer:function(u,h,p){Ze="useReducer",St();var v=Et.current;Et.current=Ec;try{return GM(u,h,p)}finally{Et.current=v}},useRef:function(u){return Ze="useRef",St(),mD()},useState:function(u){Ze="useState",St();var h=Et.current;Et.current=Ec;try{return QM(u)}finally{Et.current=h}},useDebugValue:function(u,h){return Ze="useDebugValue",St(),yD()},useDeferredValue:function(u){return Ze="useDeferredValue",St(),iU(u)},useTransition:function(){return Ze="useTransition",St(),oU()},useMutableSource:function(u,h,p){return Ze="useMutableSource",St(),void 0},useSyncExternalStore:function(u,h,p){return Ze="useSyncExternalStore",St(),gD(u,h)},useId:function(){return Ze="useId",St(),xD()},unstable_isNewReconciler:ke},pU={readContext:function(u){return oo(u)},useCallback:function(u,h){return Ze="useCallback",St(),SD(u,h)},useContext:function(u){return Ze="useContext",St(),oo(u)},useEffect:function(u,h){return Ze="useEffect",St(),R1(u,h)},useImperativeHandle:function(u,h,p){return Ze="useImperativeHandle",St(),wD(u,h,p)},useInsertionEffect:function(u,h){return Ze="useInsertionEffect",St(),bD(u,h)},useLayoutEffect:function(u,h){return Ze="useLayoutEffect",St(),CD(u,h)},useMemo:function(u,h){Ze="useMemo",St();var p=Et.current;Et.current=kD;try{return LD(u,h)}finally{Et.current=p}},useReducer:function(u,h,p){Ze="useReducer",St();var v=Et.current;Et.current=kD;try{return YM(u,h,p)}finally{Et.current=v}},useRef:function(u){return Ze="useRef",St(),mD()},useState:function(u){Ze="useState",St();var h=Et.current;Et.current=kD;try{return XM(u)}finally{Et.current=h}},useDebugValue:function(u,h){return Ze="useDebugValue",St(),yD()},useDeferredValue:function(u){return Ze="useDeferredValue",St(),nU(u)},useTransition:function(){return Ze="useTransition",St(),rU()},useMutableSource:function(u,h,p){return Ze="useMutableSource",St(),void 0},useSyncExternalStore:function(u,h,p){return Ze="useSyncExternalStore",St(),gD(u,h)},useId:function(){return Ze="useId",St(),xD()},unstable_isNewReconciler:ke},Tu={readContext:function(u){return lO(),oo(u)},useCallback:function(u,h){return Ze="useCallback",yi(),Dn(),nO(u,h)},useContext:function(u){return Ze="useContext",yi(),Dn(),oo(u)},useEffect:function(u,h){return Ze="useEffect",yi(),Dn(),vD(u,h)},useImperativeHandle:function(u,h,p){return Ze="useImperativeHandle",yi(),Dn(),iO(u,h,p)},useInsertionEffect:function(u,h){return Ze="useInsertionEffect",yi(),Dn(),eO(u,h)},useLayoutEffect:function(u,h){return Ze="useLayoutEffect",yi(),Dn(),tO(u,h)},useMemo:function(u,h){Ze="useMemo",yi(),Dn();var p=Et.current;Et.current=Tu;try{return sO(u,h)}finally{Et.current=p}},useReducer:function(u,h,p){Ze="useReducer",yi(),Dn();var v=Et.current;Et.current=Tu;try{return qM(u,h,p)}finally{Et.current=v}},useRef:function(u){return Ze="useRef",yi(),Dn(),JM(u)},useState:function(u){Ze="useState",yi(),Dn();var h=Et.current;Et.current=Tu;try{return pD(u)}finally{Et.current=h}},useDebugValue:function(u,h){return Ze="useDebugValue",yi(),Dn(),void 0},useDeferredValue:function(u){return Ze="useDeferredValue",yi(),Dn(),oO(u)},useTransition:function(){return Ze="useTransition",yi(),Dn(),rO()},useMutableSource:function(u,h,p){return Ze="useMutableSource",yi(),Dn(),void 0},useSyncExternalStore:function(u,h,p){return Ze="useSyncExternalStore",yi(),Dn(),ZM(u,h,p)},useId:function(){return Ze="useId",yi(),Dn(),aO()},unstable_isNewReconciler:ke},Ec={readContext:function(u){return lO(),oo(u)},useCallback:function(u,h){return Ze="useCallback",yi(),St(),SD(u,h)},useContext:function(u){return Ze="useContext",yi(),St(),oo(u)},useEffect:function(u,h){return Ze="useEffect",yi(),St(),R1(u,h)},useImperativeHandle:function(u,h,p){return Ze="useImperativeHandle",yi(),St(),wD(u,h,p)},useInsertionEffect:function(u,h){return Ze="useInsertionEffect",yi(),St(),bD(u,h)},useLayoutEffect:function(u,h){return Ze="useLayoutEffect",yi(),St(),CD(u,h)},useMemo:function(u,h){Ze="useMemo",yi(),St();var p=Et.current;Et.current=Ec;try{return LD(u,h)}finally{Et.current=p}},useReducer:function(u,h,p){Ze="useReducer",yi(),St();var v=Et.current;Et.current=Ec;try{return GM(u,h,p)}finally{Et.current=v}},useRef:function(u){return Ze="useRef",yi(),St(),mD()},useState:function(u){Ze="useState",yi(),St();var h=Et.current;Et.current=Ec;try{return QM(u)}finally{Et.current=h}},useDebugValue:function(u,h){return Ze="useDebugValue",yi(),St(),yD()},useDeferredValue:function(u){return Ze="useDeferredValue",yi(),St(),iU(u)},useTransition:function(){return Ze="useTransition",yi(),St(),oU()},useMutableSource:function(u,h,p){return Ze="useMutableSource",yi(),St(),void 0},useSyncExternalStore:function(u,h,p){return Ze="useSyncExternalStore",yi(),St(),gD(u,h)},useId:function(){return Ze="useId",yi(),St(),xD()},unstable_isNewReconciler:ke},kD={readContext:function(u){return lO(),oo(u)},useCallback:function(u,h){return Ze="useCallback",yi(),St(),SD(u,h)},useContext:function(u){return Ze="useContext",yi(),St(),oo(u)},useEffect:function(u,h){return Ze="useEffect",yi(),St(),R1(u,h)},useImperativeHandle:function(u,h,p){return Ze="useImperativeHandle",yi(),St(),wD(u,h,p)},useInsertionEffect:function(u,h){return Ze="useInsertionEffect",yi(),St(),bD(u,h)},useLayoutEffect:function(u,h){return Ze="useLayoutEffect",yi(),St(),CD(u,h)},useMemo:function(u,h){Ze="useMemo",yi(),St();var p=Et.current;Et.current=Ec;try{return LD(u,h)}finally{Et.current=p}},useReducer:function(u,h,p){Ze="useReducer",yi(),St();var v=Et.current;Et.current=Ec;try{return YM(u,h,p)}finally{Et.current=v}},useRef:function(u){return Ze="useRef",yi(),St(),mD()},useState:function(u){Ze="useState",yi(),St();var h=Et.current;Et.current=Ec;try{return XM(u)}finally{Et.current=h}},useDebugValue:function(u,h){return Ze="useDebugValue",yi(),St(),yD()},useDeferredValue:function(u){return Ze="useDeferredValue",yi(),St(),nU(u)},useTransition:function(){return Ze="useTransition",yi(),St(),rU()},useMutableSource:function(u,h,p){return Ze="useMutableSource",yi(),St(),void 0},useSyncExternalStore:function(u,h,p){return Ze="useSyncExternalStore",yi(),St(),gD(u,h)},useId:function(){return Ze="useId",yi(),St(),xD()},unstable_isNewReconciler:ke}}var Rf=e.unstable_now,mU=0,ED=-1,A1=-1,TD=-1,cO=!1,ID=!1;function _U(){return cO}function Ehe(){ID=!0}function The(){cO=!1,ID=!1}function Ihe(){cO=ID,ID=!1}function vU(){return mU}function bU(){mU=Rf()}function uO(u){A1=Rf(),u.actualStartTime<0&&(u.actualStartTime=Rf())}function CU(u){A1=-1}function ND(u,h){if(A1>=0){var p=Rf()-A1;u.actualDuration+=p,h&&(u.selfBaseDuration=p),A1=-1}}function Iu(u){if(ED>=0){var h=Rf()-ED;ED=-1;for(var p=u.return;p!==null;){switch(p.tag){case f:var v=p.stateNode;v.effectDuration+=h;return;case T:var y=p.stateNode;y.effectDuration+=h;return}p=p.return}}}function dO(u){if(TD>=0){var h=Rf()-TD;TD=-1;for(var p=u.return;p!==null;){switch(p.tag){case f:var v=p.stateNode;v!==null&&(v.passiveEffectDuration+=h);return;case T:var y=p.stateNode;y!==null&&(y.passiveEffectDuration+=h);return}p=p.return}}}function Nu(){ED=Rf()}function hO(){TD=Rf()}function fO(u){for(var h=u.child;h;)u.actualDuration+=h.actualDuration,h=h.sibling}function Mp(u,h){return{value:u,source:h,stack:cf(h),digest:null}}function gO(u,h,p){return{value:u,source:null,stack:p!=null?p:null,digest:h!=null?h:null}}function Nhe(u,h){return!0}function pO(u,h){try{var p=Nhe(u,h);if(p===!1)return;var v=h.value,y=h.source,D=h.stack,E=D!==null?D:"";if(v!=null&&v._suppressLogging){if(u.tag===c)return;console.error(v)}var N=y?_i(y):null,P=N?"The above error occurred in the <"+N+"> component:":"The above error occurred in one of your React components:",K;if(u.tag===f)K=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var Z=_i(u)||"Anonymous";K="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+Z+".")}var fe=P+`
`+E+`

`+(""+K);console.error(fe)}catch(he){setTimeout(function(){throw he})}}var Rhe=typeof WeakMap=="function"?WeakMap:Map;function wU(u,h,p){var v=Yd(ls,p);v.tag=pM,v.payload={element:null};var y=h.value;return v.callback=function(){Lge(y),pO(u,h)},v}function mO(u,h,p){var v=Yd(ls,p);v.tag=pM;var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var D=h.value;v.payload=function(){return y(D)},v.callback=function(){R$(u),pO(u,h)}}var E=u.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(v.callback=function(){R$(u),pO(u,h),typeof y!="function"&&yge(this);var P=h.value,K=h.stack;this.componentDidCatch(P,{componentStack:K!==null?K:""}),typeof y!="function"&&(il(u.lanes,wi)||r("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",_i(u)||"Unknown"))}),v}function yU(u,h,p){var v=u.pingCache,y;if(v===null?(v=u.pingCache=new Rhe,y=new Set,v.set(h,y)):(y=v.get(h),y===void 0&&(y=new Set,v.set(h,y))),!y.has(p)){y.add(p);var D=xge.bind(null,u,h,p);wc&&Y1(u,p),h.then(D,D)}}function Ahe(u,h,p,v){var y=u.updateQueue;if(y===null){var D=new Set;D.add(p),u.updateQueue=D}else y.add(p)}function Mhe(u,h){var p=u.tag;if((u.mode&tn)===ci&&(p===l||p===k||p===I)){var v=u.alternate;v?(u.updateQueue=v.updateQueue,u.memoizedState=v.memoizedState,u.lanes=v.lanes):(u.updateQueue=null,u.memoizedState=null)}}function SU(u){var h=u;do{if(h.tag===A&&vhe(h))return h;h=h.return}while(h!==null);return null}function LU(u,h,p,v,y){if((u.mode&tn)===ci){if(u===h)u.flags|=ta;else{if(u.flags|=Sn,p.flags|=P2,p.flags&=~(gae|AC),p.tag===c){var D=p.alternate;if(D===null)p.tag=B;else{var E=Yd(ls,wi);E.tag=tD,Ef(p,E,wi)}}p.lanes=Hi(p.lanes,wi)}return u}return u.flags|=ta,u.lanes=y,u}function Ohe(u,h,p,v,y){if(p.flags|=AC,wc&&Y1(u,y),v!==null&&typeof v=="object"&&typeof v.then=="function"){var D=v;Mhe(p),lr()&&p.mode&tn&&gz();var E=SU(h);if(E!==null){E.flags&=~Fd,LU(E,h,p,u,y),E.mode&tn&&yU(u,D,y),Ahe(E,u,D);return}else{if(!sle(y)){yU(u,D,y),YO();return}var N=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");v=N}}else if(lr()&&p.mode&tn){gz();var P=SU(h);if(P!==null){(P.flags&ta)===li&&(P.flags|=Fd),LU(P,h,p,u,y),lM(Mp(v,p));return}}v=Mp(v,p),gge(v);var K=h;do{switch(K.tag){case f:{var Z=v;K.flags|=ta;var fe=HC(y);K.lanes=Hi(K.lanes,fe);var he=wU(K,Z,fe);vM(K,he);return}case c:var De=v,Ee=K.type,je=K.stateNode;if((K.flags&Sn)===li&&(typeof Ee.getDerivedStateFromError=="function"||je!==null&&typeof je.componentDidCatch=="function"&&!S$(je))){K.flags|=ta;var Rt=HC(y);K.lanes=Hi(K.lanes,Rt);var ii=mO(K,De,Rt);vM(K,ii);return}break}K=K.return}while(K!==null)}function Phe(){return null}var M1=t.ReactCurrentOwner,Tc=!1,_O,O1,vO,bO,CO,Op,wO,RD;_O={},O1={},vO={},bO={},CO={},Op=!1,wO={},RD={};function ia(u,h,p,v){u===null?h.child=zz(h,null,p,v):h.child=vv(h,u.child,p,v)}function Fhe(u,h,p,v){h.child=vv(h,u.child,null,v),h.child=vv(h,null,p,v)}function xU(u,h,p,v,y){if(h.type!==h.elementType){var D=p.propTypes;D&&Sc(D,v,"prop",Gi(p))}var E=p.render,N=h.ref,P,K;_v(h,y),OC(h);{if(M1.current=h,el(!0),P=Lv(u,h,E,v,N,y),K=xv(),h.mode&so){Go(!0);try{P=Lv(u,h,E,v,N,y),K=xv()}finally{Go(!1)}}el(!1)}return Q_(),u!==null&&!Tc?(qz(u,h,y),Zd(u,h,y)):(lr()&&K&&iM(h),h.flags|=G_,ia(u,h,P,y),h.child)}function DU(u,h,p,v,y){if(u===null){var D=p.type;if(zge(D)&&p.compare===null&&p.defaultProps===void 0){var E=D;return E=Av(D),h.tag=I,h.type=E,LO(h,D),kU(u,h,E,v,y)}{var N=D.propTypes;N&&Sc(N,v,"prop",Gi(D))}var P=rP(p.type,null,v,h,h.mode,y);return P.ref=h.ref,P.return=h,h.child=P,P}{var K=p.type,Z=K.propTypes;Z&&Sc(Z,v,"prop",Gi(K))}var fe=u.child,he=IO(u,y);if(!he){var De=fe.memoizedProps,Ee=p.compare;if(Ee=Ee!==null?Ee:i1,Ee(De,v)&&u.ref===h.ref)return Zd(u,h,y)}h.flags|=G_;var je=Wp(fe,v);return je.ref=h.ref,je.return=h,h.child=je,je}function kU(u,h,p,v,y){if(h.type!==h.elementType){var D=h.elementType;if(D.$$typeof===ae){var E=D,N=E._payload,P=E._init;try{D=P(N)}catch{D=null}var K=D&&D.propTypes;K&&Sc(K,v,"prop",Gi(D))}}if(u!==null){var Z=u.memoizedProps;if(i1(Z,v)&&u.ref===h.ref&&h.type===u.type)if(Tc=!1,h.pendingProps=v=Z,IO(u,y))(u.flags&P2)!==li&&(Tc=!0);else return h.lanes=u.lanes,Zd(u,h,y)}return yO(u,h,p,v,y)}function EU(u,h,p){var v=h.pendingProps,y=v.children,D=u!==null?u.memoizedState:null;if(v.mode==="hidden"||Ge)if((h.mode&tn)===ci){var E={baseLanes:nt,cachePool:null,transitions:null};h.memoizedState=E,jD(h,p)}else if(il(p,tl)){var fe={baseLanes:nt,cachePool:null,transitions:null};h.memoizedState=fe;var he=D!==null?D.baseLanes:p;jD(h,he)}else{var N=null,P;if(D!==null){var K=D.baseLanes;P=Hi(K,p)}else P=p;h.lanes=h.childLanes=tl;var Z={baseLanes:P,cachePool:N,transitions:null};return h.memoizedState=Z,h.updateQueue=null,jD(h,P),null}else{var De;D!==null?(De=Hi(D.baseLanes,p),h.memoizedState=null):De=p,jD(h,De)}return ia(u,h,y,p),h.child}function Bhe(u,h,p){var v=h.pendingProps;return ia(u,h,v,p),h.child}function Vhe(u,h,p){var v=h.pendingProps.children;return ia(u,h,v,p),h.child}function Whe(u,h,p){{h.flags|=rn;{var v=h.stateNode;v.effectDuration=0,v.passiveEffectDuration=0}}var y=h.pendingProps,D=y.children;return ia(u,h,D,p),h.child}function TU(u,h){var p=h.ref;(u===null&&p!==null||u!==null&&u.ref!==p)&&(h.flags|=mf,h.flags|=F2)}function yO(u,h,p,v,y){if(h.type!==h.elementType){var D=p.propTypes;D&&Sc(D,v,"prop",Gi(p))}var E;{var N=dv(h,p,!0);E=hv(h,N)}var P,K;_v(h,y),OC(h);{if(M1.current=h,el(!0),P=Lv(u,h,p,v,E,y),K=xv(),h.mode&so){Go(!0);try{P=Lv(u,h,p,v,E,y),K=xv()}finally{Go(!1)}}el(!1)}return Q_(),u!==null&&!Tc?(qz(u,h,y),Zd(u,h,y)):(lr()&&K&&iM(h),h.flags|=G_,ia(u,h,P,y),h.child)}function IU(u,h,p,v,y){{switch(npe(h)){case!1:{var D=h.stateNode,E=h.type,N=new E(h.memoizedProps,D.context),P=N.state;D.updater.enqueueSetState(D,P,null);break}case!0:{h.flags|=Sn,h.flags|=ta;var K=new Error("Simulated error coming from DevTools"),Z=HC(y);h.lanes=Hi(h.lanes,Z);var fe=mO(h,Mp(K,h),Z);vM(h,fe);break}}if(h.type!==h.elementType){var he=p.propTypes;he&&Sc(he,v,"prop",Gi(p))}}var De;Du(p)?(De=!0,$x(h)):De=!1,_v(h,y);var Ee=h.stateNode,je;Ee===null?(MD(u,h),Fz(h,p,v),IM(h,p,v,y),je=!0):u===null?je=hhe(h,p,v,y):je=fhe(u,h,p,v,y);var Rt=SO(u,h,p,je,De,y);{var ii=h.stateNode;je&&ii.props!==v&&(Op||r("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",_i(h)||"a component"),Op=!0)}return Rt}function SO(u,h,p,v,y,D){TU(u,h);var E=(h.flags&Sn)!==li;if(!v&&!E)return y&&uz(h,p,!1),Zd(u,h,D);var N=h.stateNode;M1.current=h;var P;if(E&&typeof p.getDerivedStateFromError!="function")P=null,CU();else{OC(h);{if(el(!0),P=N.render(),h.mode&so){Go(!0);try{N.render()}finally{Go(!1)}}el(!1)}Q_()}return h.flags|=G_,u!==null&&E?Fhe(u,h,P,D):ia(u,h,P,D),h.memoizedState=N.state,y&&uz(h,p,!0),h.child}function NU(u){var h=u.stateNode;h.pendingContext?lz(u,h.pendingContext,h.pendingContext!==h.context):h.context&&lz(u,h.context,!1),PM(u,h.containerInfo)}function Hhe(u,h,p){if(NU(h),u===null)throw new Error("Should have a current fiber. This is a bug in React.");var v=h.pendingProps,y=h.memoizedState,D=y.element;Tz(u,h),oD(h,v,null,p);var E=h.memoizedState;h.stateNode;var N=E.element;if(y.isDehydrated){var P={element:N,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},K=h.updateQueue;if(K.baseState=P,h.memoizedState=P,h.flags&Fd){var Z=Mp(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),h);return RU(u,h,N,p,Z)}else if(N!==D){var fe=Mp(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),h);return RU(u,h,N,p,fe)}else{jde(h);var he=zz(h,null,N,p);h.child=he;for(var De=he;De;)De.flags=De.flags&~no|Bd,De=De.sibling}}else{if(pv(),N===D)return Zd(u,h,p);ia(u,h,N,p)}return h.child}function RU(u,h,p,v,y){return pv(),lM(y),h.flags|=Fd,ia(u,h,p,v),h.child}function zhe(u,h,p){$z(h),u===null&&aM(h);var v=h.type,y=h.pendingProps,D=u!==null?u.memoizedProps:null,E=y.children,N=zA(v,y);return N?E=null:D!==null&&zA(v,D)&&(h.flags|=RC),TU(u,h),ia(u,h,E,p),h.child}function Uhe(u,h){return u===null&&aM(h),null}function $he(u,h,p,v){MD(u,h);var y=h.pendingProps,D=p,E=D._payload,N=D._init,P=N(E);h.type=P;var K=h.tag=Uge(P),Z=Dc(P,y),fe;switch(K){case l:return LO(h,P),h.type=P=Av(P),fe=yO(null,h,P,Z,v),fe;case c:return h.type=P=eP(P),fe=IU(null,h,P,Z,v),fe;case k:return h.type=P=tP(P),fe=xU(null,h,P,Z,v),fe;case O:{if(h.type!==h.elementType){var he=P.propTypes;he&&Sc(he,Z,"prop",Gi(P))}return fe=DU(null,h,P,Dc(P.type,Z),v),fe}}var De="";throw P!==null&&typeof P=="object"&&P.$$typeof===ae&&(De=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+P+". "+("Lazy element type must resolve to a class or function."+De))}function jhe(u,h,p,v,y){MD(u,h),h.tag=c;var D;return Du(p)?(D=!0,$x(h)):D=!1,_v(h,y),Fz(h,p,v),IM(h,p,v,y),SO(null,h,p,!0,D,y)}function Khe(u,h,p,v){MD(u,h);var y=h.pendingProps,D;{var E=dv(h,p,!1);D=hv(h,E)}_v(h,v);var N,P;OC(h);{if(p.prototype&&typeof p.prototype.render=="function"){var K=Gi(p)||"Unknown";_O[K]||(r("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",K,K),_O[K]=!0)}h.mode&so&&xc.recordLegacyContextWarning(h,null),el(!0),M1.current=h,N=Lv(null,h,p,y,D,v),P=xv(),el(!1)}if(Q_(),h.flags|=G_,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0){var Z=Gi(p)||"Unknown";O1[Z]||(r("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",Z,Z,Z),O1[Z]=!0)}if(typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0){{var fe=Gi(p)||"Unknown";O1[fe]||(r("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",fe,fe,fe),O1[fe]=!0)}h.tag=c,h.memoizedState=null,h.updateQueue=null;var he=!1;return Du(p)?(he=!0,$x(h)):he=!1,h.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,_M(h),Pz(h,N),IM(h,p,y,v),SO(null,h,p,!0,he,v)}else{if(h.tag=l,h.mode&so){Go(!0);try{N=Lv(null,h,p,y,D,v),P=xv()}finally{Go(!1)}}return lr()&&P&&iM(h),ia(null,h,N,v),LO(h,p),h.child}}function LO(u,h){{if(h&&h.childContextTypes&&r("%s(...): childContextTypes cannot be defined on a function component.",h.displayName||h.name||"Component"),u.ref!==null){var p="",v=hf();v&&(p+=`

Check the render method of \``+v+"`.");var y=v||"",D=u._debugSource;D&&(y=D.fileName+":"+D.lineNumber),CO[y]||(CO[y]=!0,r("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",p))}if(typeof h.getDerivedStateFromProps=="function"){var E=Gi(h)||"Unknown";bO[E]||(r("%s: Function components do not support getDerivedStateFromProps.",E),bO[E]=!0)}if(typeof h.contextType=="object"&&h.contextType!==null){var N=Gi(h)||"Unknown";vO[N]||(r("%s: Function components do not support contextType.",N),vO[N]=!0)}}}var xO={dehydrated:null,treeContext:null,retryLane:Yo};function DO(u){return{baseLanes:u,cachePool:Phe(),transitions:null}}function qhe(u,h){var p=null;return{baseLanes:Hi(u.baseLanes,h),cachePool:p,transitions:u.transitions}}function Ghe(u,h,p,v){if(h!==null){var y=h.memoizedState;if(y===null)return!1}return VM(u,D1)}function Yhe(u,h){return fx(u.childLanes,h)}function AU(u,h,p){var v=h.pendingProps;spe(h)&&(h.flags|=Sn);var y=kc.current,D=!1,E=(h.flags&Sn)!==li;if(E||Ghe(y,u)?(D=!0,h.flags&=~Sn):(u===null||u.memoizedState!==null)&&(y=_he(y,Kz)),y=Cv(y),If(h,y),u===null){aM(h);var N=h.memoizedState;if(N!==null){var P=N.dehydrated;if(P!==null)return efe(h,P)}var K=v.children,Z=v.fallback;if(D){var fe=Zhe(h,K,Z,p),he=h.child;return he.memoizedState=DO(p),h.memoizedState=xO,fe}else return kO(h,K)}else{var De=u.memoizedState;if(De!==null){var Ee=De.dehydrated;if(Ee!==null)return tfe(u,h,E,v,Ee,De,p)}if(D){var je=v.fallback,Rt=v.children,ii=Xhe(u,h,Rt,je,p),qt=h.child,sn=u.child.memoizedState;return qt.memoizedState=sn===null?DO(p):qhe(sn,p),qt.childLanes=Yhe(u,p),h.memoizedState=xO,ii}else{var Ki=v.children,Ce=Qhe(u,h,Ki,p);return h.memoizedState=null,Ce}}}function kO(u,h,p){var v=u.mode,y={mode:"visible",children:h},D=EO(y,v);return D.return=u,u.child=D,D}function Zhe(u,h,p,v){var y=u.mode,D=u.child,E={mode:"hidden",children:h},N,P;return(y&tn)===ci&&D!==null?(N=D,N.childLanes=nt,N.pendingProps=E,u.mode&An&&(N.actualDuration=0,N.actualStartTime=-1,N.selfBaseDuration=0,N.treeBaseDuration=0),P=Bf(p,y,v,null)):(N=EO(E,y),P=Bf(p,y,v,null)),N.return=u,P.return=u,N.sibling=P,u.child=N,P}function EO(u,h,p){return M$(u,h,nt,null)}function MU(u,h){return Wp(u,h)}function Qhe(u,h,p,v){var y=u.child,D=y.sibling,E=MU(y,{mode:"visible",children:p});if((h.mode&tn)===ci&&(E.lanes=v),E.return=h,E.sibling=null,D!==null){var N=h.deletions;N===null?(h.deletions=[D],h.flags|=fp):N.push(D)}return h.child=E,E}function Xhe(u,h,p,v,y){var D=h.mode,E=u.child,N=E.sibling,P={mode:"hidden",children:p},K;if((D&tn)===ci&&h.child!==E){var Z=h.child;K=Z,K.childLanes=nt,K.pendingProps=P,h.mode&An&&(K.actualDuration=0,K.actualStartTime=-1,K.selfBaseDuration=E.selfBaseDuration,K.treeBaseDuration=E.treeBaseDuration),h.deletions=null}else K=MU(E,P),K.subtreeFlags=E.subtreeFlags&Wd;var fe;return N!==null?fe=Wp(N,v):(fe=Bf(v,D,y,null),fe.flags|=no),fe.return=h,K.return=h,K.sibling=fe,h.child=K,fe}function AD(u,h,p,v){v!==null&&lM(v),vv(h,u.child,null,p);var y=h.pendingProps,D=y.children,E=kO(h,D);return E.flags|=no,h.memoizedState=null,E}function Jhe(u,h,p,v,y){var D=h.mode,E={mode:"visible",children:p},N=EO(E,D),P=Bf(v,D,y,null);return P.flags|=no,N.return=h,P.return=h,N.sibling=P,h.child=N,(h.mode&tn)!==ci&&vv(h,u.child,null,y),P}function efe(u,h,p){return(u.mode&tn)===ci?(r("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),u.lanes=wi):KA(h)?u.lanes=bp:u.lanes=tl,null}function tfe(u,h,p,v,y,D,E){if(p)if(h.flags&Fd){h.flags&=~Fd;var Ce=gO(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return AD(u,h,E,Ce)}else{if(h.memoizedState!==null)return h.child=u.child,h.flags|=Sn,null;var Ke=v.children,we=v.fallback,at=Jhe(u,h,Ke,we,E),At=h.child;return At.memoizedState=DO(E),h.memoizedState=xO,at}else{if(Ude(),(h.mode&tn)===ci)return AD(u,h,E,null);if(KA(y)){var N,P,K;{var Z=rde(y);N=Z.digest,P=Z.message,K=Z.stack}var fe;P?fe=new Error(P):fe=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var he=gO(fe,N,K);return AD(u,h,E,he)}var De=il(E,u.childLanes);if(Tc||De){var Ee=$D();if(Ee!==null){var je=hle(Ee,E);if(je!==Yo&&je!==D.retryLane){D.retryLane=je;var Rt=ls;ka(u,je),ko(Ee,u,je,Rt)}}YO();var ii=gO(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return AD(u,h,E,ii)}else if(iz(y)){h.flags|=Sn,h.child=u.child;var qt=Dge.bind(null,u);return ade(y,qt),null}else{Kde(h,y,D.treeContext);var sn=v.children,Ki=kO(h,sn);return Ki.flags|=Bd,Ki}}}function OU(u,h,p){u.lanes=Hi(u.lanes,h);var v=u.alternate;v!==null&&(v.lanes=Hi(v.lanes,h)),fM(u.return,h,p)}function ife(u,h,p){for(var v=h;v!==null;){if(v.tag===A){var y=v.memoizedState;y!==null&&OU(v,p,u)}else if(v.tag===q)OU(v,p,u);else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)return;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}}function nfe(u){for(var h=u,p=null;h!==null;){var v=h.alternate;v!==null&&hD(v)===null&&(p=h),h=h.sibling}return p}function sfe(u){if(u!==void 0&&u!=="forwards"&&u!=="backwards"&&u!=="together"&&!wO[u])if(wO[u]=!0,typeof u=="string")switch(u.toLowerCase()){case"together":case"forwards":case"backwards":{r('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',u,u.toLowerCase());break}case"forward":case"backward":{r('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',u,u.toLowerCase());break}default:r('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',u);break}else r('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',u)}function ofe(u,h){u!==void 0&&!RD[u]&&(u!=="collapsed"&&u!=="hidden"?(RD[u]=!0,r('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',u)):h!=="forwards"&&h!=="backwards"&&(RD[u]=!0,r('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',u)))}function PU(u,h){{var p=yn(u),v=!p&&typeof zn(u)=="function";if(p||v){var y=p?"array":"iterable";return r("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",y,h,y),!1}}return!0}function rfe(u,h){if((h==="forwards"||h==="backwards")&&u!==void 0&&u!==null&&u!==!1)if(yn(u)){for(var p=0;p<u.length;p++)if(!PU(u[p],p))return}else{var v=zn(u);if(typeof v=="function"){var y=v.call(u);if(y)for(var D=y.next(),E=0;!D.done;D=y.next()){if(!PU(D.value,E))return;E++}}else r('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',h)}}function TO(u,h,p,v,y){var D=u.memoizedState;D===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:y}:(D.isBackwards=h,D.rendering=null,D.renderingStartTime=0,D.last=v,D.tail=p,D.tailMode=y)}function FU(u,h,p){var v=h.pendingProps,y=v.revealOrder,D=v.tail,E=v.children;sfe(y),ofe(D,y),rfe(E,y),ia(u,h,E,p);var N=kc.current,P=VM(N,D1);if(P)N=WM(N,D1),h.flags|=Sn;else{var K=u!==null&&(u.flags&Sn)!==li;K&&ife(h,h.child,p),N=Cv(N)}if(If(h,N),(h.mode&tn)===ci)h.memoizedState=null;else switch(y){case"forwards":{var Z=nfe(h.child),fe;Z===null?(fe=h.child,h.child=null):(fe=Z.sibling,Z.sibling=null),TO(h,!1,fe,Z,D);break}case"backwards":{var he=null,De=h.child;for(h.child=null;De!==null;){var Ee=De.alternate;if(Ee!==null&&hD(Ee)===null){h.child=De;break}var je=De.sibling;De.sibling=he,he=De,De=je}TO(h,!0,he,null,D);break}case"together":{TO(h,!1,null,null,void 0);break}default:h.memoizedState=null}return h.child}function afe(u,h,p){PM(h,h.stateNode.containerInfo);var v=h.pendingProps;return u===null?h.child=vv(h,null,v,p):ia(u,h,v,p),h.child}var BU=!1;function lfe(u,h,p){var v=h.type,y=v._context,D=h.pendingProps,E=h.memoizedProps,N=D.value;{"value"in D||BU||(BU=!0,r("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var P=h.type.propTypes;P&&Sc(P,D,"prop","Context.Provider")}if(xz(h,y,N),E!==null){var K=E.value;if(ol(K,N)){if(E.children===D.children&&!zx())return Zd(u,h,p)}else ihe(h,y,p)}var Z=D.children;return ia(u,h,Z,p),h.child}var VU=!1;function cfe(u,h,p){var v=h.type;v._context===void 0?v!==v.Consumer&&(VU||(VU=!0,r("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):v=v._context;var y=h.pendingProps,D=y.children;typeof D!="function"&&r("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),_v(h,p);var E=oo(v);OC(h);var N;return M1.current=h,el(!0),N=D(E),el(!1),Q_(),h.flags|=G_,ia(u,h,N,p),h.child}function P1(){Tc=!0}function MD(u,h){(h.mode&tn)===ci&&u!==null&&(u.alternate=null,h.alternate=null,h.flags|=no)}function Zd(u,h,p){return u!==null&&(h.dependencies=u.dependencies),CU(),G1(h.lanes),il(p,h.childLanes)?(ghe(u,h),h.child):null}function ufe(u,h,p){{var v=h.return;if(v===null)throw new Error("Cannot swap the root fiber.");if(u.alternate=null,h.alternate=null,p.index=h.index,p.sibling=h.sibling,p.return=h.return,p.ref=h.ref,h===v.child)v.child=p;else{var y=v.child;if(y===null)throw new Error("Expected parent to have a child.");for(;y.sibling!==h;)if(y=y.sibling,y===null)throw new Error("Expected to find the previous sibling.");y.sibling=p}var D=v.deletions;return D===null?(v.deletions=[u],v.flags|=fp):D.push(u),p.flags|=no,p}}function IO(u,h){var p=u.lanes;return!!il(p,h)}function dfe(u,h,p){switch(h.tag){case f:NU(h),h.stateNode,pv();break;case m:$z(h);break;case c:{var v=h.type;Du(v)&&$x(h);break}case g:PM(h,h.stateNode.containerInfo);break;case L:{var y=h.memoizedProps.value,D=h.type._context;xz(h,D,y);break}case T:{var E=il(p,h.childLanes);E&&(h.flags|=rn);{var N=h.stateNode;N.effectDuration=0,N.passiveEffectDuration=0}}break;case A:{var P=h.memoizedState;if(P!==null){if(P.dehydrated!==null)return If(h,Cv(kc.current)),h.flags|=Sn,null;var K=h.child,Z=K.childLanes;if(il(p,Z))return AU(u,h,p);If(h,Cv(kc.current));var fe=Zd(u,h,p);return fe!==null?fe.sibling:null}else If(h,Cv(kc.current));break}case q:{var he=(u.flags&Sn)!==li,De=il(p,h.childLanes);if(he){if(De)return FU(u,h,p);h.flags|=Sn}var Ee=h.memoizedState;if(Ee!==null&&(Ee.rendering=null,Ee.tail=null,Ee.lastEffect=null),If(h,kc.current),De)break;return null}case U:case X:return h.lanes=nt,EU(u,h,p)}return Zd(u,h,p)}function WU(u,h,p){if(h._debugNeedsRemount&&u!==null)return ufe(u,h,rP(h.type,h.key,h.pendingProps,h._debugOwner||null,h.mode,h.lanes));if(u!==null){var v=u.memoizedProps,y=h.pendingProps;if(v!==y||zx()||h.type!==u.type)Tc=!0;else{var D=IO(u,p);if(!D&&(h.flags&Sn)===li)return Tc=!1,dfe(u,h,p);(u.flags&P2)!==li?Tc=!0:Tc=!1}}else if(Tc=!1,lr()&&Fde(h)){var E=h.index,N=Bde();fz(h,N,E)}switch(h.lanes=nt,h.tag){case d:return Khe(u,h,h.type,p);case R:{var P=h.elementType;return $he(u,h,P,p)}case l:{var K=h.type,Z=h.pendingProps,fe=h.elementType===K?Z:Dc(K,Z);return yO(u,h,K,fe,p)}case c:{var he=h.type,De=h.pendingProps,Ee=h.elementType===he?De:Dc(he,De);return IU(u,h,he,Ee,p)}case f:return Hhe(u,h,p);case m:return zhe(u,h,p);case _:return Uhe(u,h);case A:return AU(u,h,p);case g:return afe(u,h,p);case k:{var je=h.type,Rt=h.pendingProps,ii=h.elementType===je?Rt:Dc(je,Rt);return xU(u,h,je,ii,p)}case C:return Bhe(u,h,p);case S:return Vhe(u,h,p);case T:return Whe(u,h,p);case L:return lfe(u,h,p);case x:return cfe(u,h,p);case O:{var qt=h.type,sn=h.pendingProps,Ki=Dc(qt,sn);if(h.type!==h.elementType){var Ce=qt.propTypes;Ce&&Sc(Ce,Ki,"prop",Gi(qt))}return Ki=Dc(qt.type,Ki),DU(u,h,qt,Ki,p)}case I:return kU(u,h,h.type,h.pendingProps,p);case B:{var Ke=h.type,we=h.pendingProps,at=h.elementType===Ke?we:Dc(Ke,we);return jhe(u,h,Ke,at,p)}case q:return FU(u,h,p);case te:break;case U:return EU(u,h,p)}throw new Error("Unknown unit of work tag ("+h.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function Dv(u){u.flags|=rn}function HU(u){u.flags|=mf,u.flags|=F2}var zU,NO,UU,$U;zU=function(u,h,p,v){for(var y=h.child;y!==null;){if(y.tag===m||y.tag===_)Mue(u,y.stateNode);else if(y.tag!==g){if(y.child!==null){y.child.return=y,y=y.child;continue}}if(y===h)return;for(;y.sibling===null;){if(y.return===null||y.return===h)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},NO=function(u,h){},UU=function(u,h,p,v,y){var D=u.memoizedProps;if(D!==v){var E=h.stateNode,N=FM(),P=Pue(E,p,D,v,y,N);h.updateQueue=P,P&&Dv(h)}},$U=function(u,h,p,v){p!==v&&Dv(h)};function F1(u,h){if(!lr())switch(u.tailMode){case"hidden":{for(var p=u.tail,v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?u.tail=null:v.sibling=null;break}case"collapsed":{for(var y=u.tail,D=null;y!==null;)y.alternate!==null&&(D=y),y=y.sibling;D===null?!h&&u.tail!==null?u.tail.sibling=null:u.tail=null:D.sibling=null;break}}}function ur(u){var h=u.alternate!==null&&u.alternate.child===u.child,p=nt,v=li;if(h){if((u.mode&An)!==ci){for(var P=u.selfBaseDuration,K=u.child;K!==null;)p=Hi(p,Hi(K.lanes,K.childLanes)),v|=K.subtreeFlags&Wd,v|=K.flags&Wd,P+=K.treeBaseDuration,K=K.sibling;u.treeBaseDuration=P}else for(var Z=u.child;Z!==null;)p=Hi(p,Hi(Z.lanes,Z.childLanes)),v|=Z.subtreeFlags&Wd,v|=Z.flags&Wd,Z.return=u,Z=Z.sibling;u.subtreeFlags|=v}else{if((u.mode&An)!==ci){for(var y=u.actualDuration,D=u.selfBaseDuration,E=u.child;E!==null;)p=Hi(p,Hi(E.lanes,E.childLanes)),v|=E.subtreeFlags,v|=E.flags,y+=E.actualDuration,D+=E.treeBaseDuration,E=E.sibling;u.actualDuration=y,u.treeBaseDuration=D}else for(var N=u.child;N!==null;)p=Hi(p,Hi(N.lanes,N.childLanes)),v|=N.subtreeFlags,v|=N.flags,N.return=u,N=N.sibling;u.subtreeFlags|=v}return u.childLanes=p,h}function hfe(u,h,p){if(Qde()&&(h.mode&tn)!==ci&&(h.flags&Sn)===li)return Cz(h),pv(),h.flags|=Fd|AC|ta,!1;var v=Yx(h);if(p!==null&&p.dehydrated!==null)if(u===null){if(!v)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(Yde(h),ur(h),(h.mode&An)!==ci){var y=p!==null;if(y){var D=h.child;D!==null&&(h.treeBaseDuration-=D.treeBaseDuration)}}return!1}else{if(pv(),(h.flags&Sn)===li&&(h.memoizedState=null),h.flags|=rn,ur(h),(h.mode&An)!==ci){var E=p!==null;if(E){var N=h.child;N!==null&&(h.treeBaseDuration-=N.treeBaseDuration)}}return!1}else return wz(),!0}function jU(u,h,p){var v=h.pendingProps;switch(nM(h),h.tag){case d:case R:case I:case l:case k:case C:case S:case T:case x:case O:return ur(h),null;case c:{var y=h.type;return Du(y)&&Ux(h),ur(h),null}case f:{var D=h.stateNode;if(bv(h),JA(h),zM(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),u===null||u.child===null){var E=Yx(h);if(E)Dv(h);else if(u!==null){var N=u.memoizedState;(!N.isDehydrated||(h.flags&Fd)!==li)&&(h.flags|=gp,wz())}}return NO(u,h),ur(h),null}case m:{BM(h);var P=Uz(),K=h.type;if(u!==null&&h.stateNode!=null)UU(u,h,K,v,P),u.ref!==h.ref&&HU(h);else{if(!v){if(h.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return ur(h),null}var Z=FM(),fe=Yx(h);if(fe)qde(h,P,Z)&&Dv(h);else{var he=Aue(K,v,P,Z,h);zU(he,h,!1,!1),h.stateNode=he,Oue(he,K,v,P)&&Dv(h)}h.ref!==null&&HU(h)}return ur(h),null}case _:{var De=v;if(u&&h.stateNode!=null){var Ee=u.memoizedProps;$U(u,h,Ee,De)}else{if(typeof De!="string"&&h.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var je=Uz(),Rt=FM(),ii=Yx(h);ii?Gde(h)&&Dv(h):h.stateNode=Fue(De,je,Rt,h)}return ur(h),null}case A:{wv(h);var qt=h.memoizedState;if(u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){var sn=hfe(u,h,qt);if(!sn)return h.flags&ta?h:null}if((h.flags&Sn)!==li)return h.lanes=p,(h.mode&An)!==ci&&fO(h),h;var Ki=qt!==null,Ce=u!==null&&u.memoizedState!==null;if(Ki!==Ce&&Ki){var Ke=h.child;if(Ke.flags|=pp,(h.mode&tn)!==ci){var we=u===null&&(h.memoizedProps.unstable_avoidThisFallback!==!0||!Ue);we||VM(kc.current,Kz)?fge():YO()}}var at=h.updateQueue;if(at!==null&&(h.flags|=rn),ur(h),(h.mode&An)!==ci&&Ki){var At=h.child;At!==null&&(h.treeBaseDuration-=At.treeBaseDuration)}return null}case g:return bv(h),NO(u,h),u===null&&Ide(h.stateNode.containerInfo),ur(h),null;case L:var Dt=h.type._context;return hM(Dt,h),ur(h),null;case B:{var hi=h.type;return Du(hi)&&Ux(h),ur(h),null}case q:{wv(h);var xi=h.memoizedState;if(xi===null)return ur(h),null;var On=(h.flags&Sn)!==li,fn=xi.rendering;if(fn===null)if(On)F1(xi,!1);else{var Xs=pge()&&(u===null||(u.flags&Sn)===li);if(!Xs)for(var gn=h.child;gn!==null;){var Ws=hD(gn);if(Ws!==null){On=!0,h.flags|=Sn,F1(xi,!1);var Nr=Ws.updateQueue;return Nr!==null&&(h.updateQueue=Nr,h.flags|=rn),h.subtreeFlags=li,phe(h,p),If(h,WM(kc.current,D1)),h.child}gn=gn.sibling}xi.tail!==null&&qo()>h$()&&(h.flags|=Sn,On=!0,F1(xi,!1),h.lanes=UW)}else{if(!On){var pr=hD(fn);if(pr!==null){h.flags|=Sn,On=!0;var ll=pr.updateQueue;if(ll!==null&&(h.updateQueue=ll,h.flags|=rn),F1(xi,!0),xi.tail===null&&xi.tailMode==="hidden"&&!fn.alternate&&!lr())return ur(h),null}else qo()*2-xi.renderingStartTime>h$()&&p!==tl&&(h.flags|=Sn,On=!0,F1(xi,!1),h.lanes=UW)}if(xi.isBackwards)fn.sibling=h.child,h.child=fn;else{var oa=xi.last;oa!==null?oa.sibling=fn:h.child=fn,xi.last=fn}}if(xi.tail!==null){var ra=xi.tail;xi.rendering=ra,xi.tail=ra.sibling,xi.renderingStartTime=qo(),ra.sibling=null;var Rr=kc.current;return On?Rr=WM(Rr,D1):Rr=Cv(Rr),If(h,Rr),ra}return ur(h),null}case te:break;case U:case X:{GO(h);var th=h.memoizedState,Mv=th!==null;if(u!==null){var J1=u.memoizedState,Mu=J1!==null;Mu!==Mv&&!Ge&&(h.flags|=pp)}return!Mv||(h.mode&tn)===ci?ur(h):il(Au,tl)&&(ur(h),h.subtreeFlags&(no|rn)&&(h.flags|=pp)),null}case le:return null;case be:return null}throw new Error("Unknown unit of work tag ("+h.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function ffe(u,h,p){switch(nM(h),h.tag){case c:{var v=h.type;Du(v)&&Ux(h);var y=h.flags;return y&ta?(h.flags=y&~ta|Sn,(h.mode&An)!==ci&&fO(h),h):null}case f:{h.stateNode,bv(h),JA(h),zM();var D=h.flags;return(D&ta)!==li&&(D&Sn)===li?(h.flags=D&~ta|Sn,h):null}case m:return BM(h),null;case A:{wv(h);var E=h.memoizedState;if(E!==null&&E.dehydrated!==null){if(h.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");pv()}var N=h.flags;return N&ta?(h.flags=N&~ta|Sn,(h.mode&An)!==ci&&fO(h),h):null}case q:return wv(h),null;case g:return bv(h),null;case L:var P=h.type._context;return hM(P,h),null;case U:case X:return GO(h),null;case le:return null;default:return null}}function KU(u,h,p){switch(nM(h),h.tag){case c:{var v=h.type.childContextTypes;v!=null&&Ux(h);break}case f:{h.stateNode,bv(h),JA(h),zM();break}case m:{BM(h);break}case g:bv(h);break;case A:wv(h);break;case q:wv(h);break;case L:var y=h.type._context;hM(y,h);break;case U:case X:GO(h);break}}var qU=null;qU=new Set;var OD=!1,dr=!1,gfe=typeof WeakSet=="function"?WeakSet:Set,Ft=null,kv=null,Ev=null;function pfe(u){A2(null,function(){throw u}),M2()}var mfe=function(u,h){if(h.props=u.memoizedProps,h.state=u.memoizedState,u.mode&An)try{Nu(),h.componentWillUnmount()}finally{Iu(u)}else h.componentWillUnmount()};function GU(u,h){try{Af(wo,u)}catch(p){es(u,h,p)}}function RO(u,h,p){try{mfe(u,p)}catch(v){es(u,h,v)}}function _fe(u,h,p){try{p.componentDidMount()}catch(v){es(u,h,v)}}function YU(u,h){try{QU(u)}catch(p){es(u,h,p)}}function Tv(u,h){var p=u.ref;if(p!==null)if(typeof p=="function"){var v;try{if(_e&&Vt&&u.mode&An)try{Nu(),v=p(null)}finally{Iu(u)}else v=p(null)}catch(y){es(u,h,y)}typeof v=="function"&&r("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",_i(u))}else p.current=null}function PD(u,h,p){try{p()}catch(v){es(u,h,v)}}var ZU=!1;function vfe(u,h){Nue(u.containerInfo),Ft=h,bfe();var p=ZU;return ZU=!1,p}function bfe(){for(;Ft!==null;){var u=Ft,h=u.child;(u.subtreeFlags&V2)!==li&&h!==null?(h.return=u,Ft=h):Cfe()}}function Cfe(){for(;Ft!==null;){var u=Ft;Ns(u);try{wfe(u)}catch(p){es(u,u.return,p)}Ko();var h=u.sibling;if(h!==null){h.return=u.return,Ft=h;return}Ft=u.return}}function wfe(u){var h=u.alternate,p=u.flags;if((p&gp)!==li){switch(Ns(u),u.tag){case l:case k:case I:break;case c:{if(h!==null){var v=h.memoizedProps,y=h.memoizedState,D=u.stateNode;u.type===u.elementType&&!Op&&(D.props!==u.memoizedProps&&r("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",_i(u)||"instance"),D.state!==u.memoizedState&&r("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",_i(u)||"instance"));var E=D.getSnapshotBeforeUpdate(u.elementType===u.type?v:Dc(u.type,v),y);{var N=qU;E===void 0&&!N.has(u.type)&&(N.add(u.type),r("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",_i(u)))}D.__reactInternalSnapshotBeforeUpdate=E}break}case f:{{var P=u.stateNode;ide(P.containerInfo)}break}case m:case _:case g:case B:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}Ko()}}function Ic(u,h,p){var v=h.updateQueue,y=v!==null?v.lastEffect:null;if(y!==null){var D=y.next,E=D;do{if((E.tag&u)===u){var N=E.destroy;E.destroy=void 0,N!==void 0&&((u&cr)!==Ea?Fae(h):(u&wo)!==Ea&&BW(h),(u&ku)!==Ea&&Z1(!0),PD(h,p,N),(u&ku)!==Ea&&Z1(!1),(u&cr)!==Ea?Bae():(u&wo)!==Ea&&VW())}E=E.next}while(E!==D)}}function Af(u,h){var p=h.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var y=v.next,D=y;do{if((D.tag&u)===u){(u&cr)!==Ea?Oae(h):(u&wo)!==Ea&&Vae(h);var E=D.create;(u&ku)!==Ea&&Z1(!0),D.destroy=E(),(u&ku)!==Ea&&Z1(!1),(u&cr)!==Ea?Pae():(u&wo)!==Ea&&Wae();{var N=D.destroy;if(N!==void 0&&typeof N!="function"){var P=void 0;(D.tag&wo)!==li?P="useLayoutEffect":(D.tag&ku)!==li?P="useInsertionEffect":P="useEffect";var K=void 0;N===null?K=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof N.then=="function"?K=`

It looks like you wrote `+P+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+P+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:K=" You returned: "+N,r("%s must not return anything besides a function, which is used for clean-up.%s",P,K)}}}D=D.next}while(D!==y)}}function yfe(u,h){if((h.flags&rn)!==li)switch(h.tag){case T:{var p=h.stateNode.passiveEffectDuration,v=h.memoizedProps,y=v.id,D=v.onPostCommit,E=vU(),N=h.alternate===null?"mount":"update";_U()&&(N="nested-update"),typeof D=="function"&&D(y,N,p,E);var P=h.return;e:for(;P!==null;){switch(P.tag){case f:var K=P.stateNode;K.passiveEffectDuration+=p;break e;case T:var Z=P.stateNode;Z.passiveEffectDuration+=p;break e}P=P.return}break}}}function Sfe(u,h,p,v){if((p.flags&MC)!==li)switch(p.tag){case l:case k:case I:{if(!dr)if(p.mode&An)try{Nu(),Af(wo|Co,p)}finally{Iu(p)}else Af(wo|Co,p);break}case c:{var y=p.stateNode;if(p.flags&rn&&!dr)if(h===null)if(p.type===p.elementType&&!Op&&(y.props!==p.memoizedProps&&r("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",_i(p)||"instance"),y.state!==p.memoizedState&&r("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",_i(p)||"instance")),p.mode&An)try{Nu(),y.componentDidMount()}finally{Iu(p)}else y.componentDidMount();else{var D=p.elementType===p.type?h.memoizedProps:Dc(p.type,h.memoizedProps),E=h.memoizedState;if(p.type===p.elementType&&!Op&&(y.props!==p.memoizedProps&&r("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",_i(p)||"instance"),y.state!==p.memoizedState&&r("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",_i(p)||"instance")),p.mode&An)try{Nu(),y.componentDidUpdate(D,E,y.__reactInternalSnapshotBeforeUpdate)}finally{Iu(p)}else y.componentDidUpdate(D,E,y.__reactInternalSnapshotBeforeUpdate)}var N=p.updateQueue;N!==null&&(p.type===p.elementType&&!Op&&(y.props!==p.memoizedProps&&r("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",_i(p)||"instance"),y.state!==p.memoizedState&&r("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",_i(p)||"instance")),Nz(p,N,y));break}case f:{var P=p.updateQueue;if(P!==null){var K=null;if(p.child!==null)switch(p.child.tag){case m:K=p.child.stateNode;break;case c:K=p.child.stateNode;break}Nz(p,P,K)}break}case m:{var Z=p.stateNode;if(h===null&&p.flags&rn){var fe=p.type,he=p.memoizedProps;zue(Z,fe,he)}break}case _:break;case g:break;case T:{{var De=p.memoizedProps,Ee=De.onCommit,je=De.onRender,Rt=p.stateNode.effectDuration,ii=vU(),qt=h===null?"mount":"update";_U()&&(qt="nested-update"),typeof je=="function"&&je(p.memoizedProps.id,qt,p.actualDuration,p.treeBaseDuration,p.actualStartTime,ii);{typeof Ee=="function"&&Ee(p.memoizedProps.id,qt,Rt,ii),Cge(p);var sn=p.return;e:for(;sn!==null;){switch(sn.tag){case f:var Ki=sn.stateNode;Ki.effectDuration+=Rt;break e;case T:var Ce=sn.stateNode;Ce.effectDuration+=Rt;break e}sn=sn.return}}}break}case A:{Nfe(u,p);break}case q:case B:case te:case U:case X:case be:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}dr||p.flags&mf&&QU(p)}function Lfe(u){switch(u.tag){case l:case k:case I:{if(u.mode&An)try{Nu(),GU(u,u.return)}finally{Iu(u)}else GU(u,u.return);break}case c:{var h=u.stateNode;typeof h.componentDidMount=="function"&&_fe(u,u.return,h),YU(u,u.return);break}case m:{YU(u,u.return);break}}}function xfe(u,h){for(var p=null,v=u;;){if(v.tag===m){if(p===null){p=v;try{var y=v.stateNode;h?Xue(y):ede(v.stateNode,v.memoizedProps)}catch(E){es(u,u.return,E)}}}else if(v.tag===_){if(p===null)try{var D=v.stateNode;h?Jue(D):tde(D,v.memoizedProps)}catch(E){es(u,u.return,E)}}else if(!((v.tag===U||v.tag===X)&&v.memoizedState!==null&&v!==u)){if(v.child!==null){v.child.return=v,v=v.child;continue}}if(v===u)return;for(;v.sibling===null;){if(v.return===null||v.return===u)return;p===v&&(p=null),v=v.return}p===v&&(p=null),v.sibling.return=v.return,v=v.sibling}}function QU(u){var h=u.ref;if(h!==null){var p=u.stateNode,v;switch(u.tag){case m:v=p;break;default:v=p}if(typeof h=="function"){var y;if(u.mode&An)try{Nu(),y=h(v)}finally{Iu(u)}else y=h(v);typeof y=="function"&&r("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",_i(u))}else h.hasOwnProperty("current")||r("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",_i(u)),h.current=v}}function Dfe(u){var h=u.alternate;h!==null&&(h.return=null),u.return=null}function XU(u){var h=u.alternate;h!==null&&(u.alternate=null,XU(h));{if(u.child=null,u.deletions=null,u.sibling=null,u.tag===m){var p=u.stateNode;p!==null&&Ade(p)}u.stateNode=null,u._debugOwner=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}}function kfe(u){for(var h=u.return;h!==null;){if(JU(h))return h;h=h.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function JU(u){return u.tag===m||u.tag===f||u.tag===g}function e$(u){var h=u;e:for(;;){for(;h.sibling===null;){if(h.return===null||JU(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==m&&h.tag!==_&&h.tag!==z;){if(h.flags&no||h.child===null||h.tag===g)continue e;h.child.return=h,h=h.child}if(!(h.flags&no))return h.stateNode}}function Efe(u){var h=kfe(u);switch(h.tag){case m:{var p=h.stateNode;h.flags&RC&&(tz(p),h.flags&=~RC);var v=e$(u);MO(u,v,p);break}case f:case g:{var y=h.stateNode.containerInfo,D=e$(u);AO(u,D,y);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function AO(u,h,p){var v=u.tag,y=v===m||v===_;if(y){var D=u.stateNode;h?Gue(p,D,h):Kue(p,D)}else if(v!==g){var E=u.child;if(E!==null){AO(E,h,p);for(var N=E.sibling;N!==null;)AO(N,h,p),N=N.sibling}}}function MO(u,h,p){var v=u.tag,y=v===m||v===_;if(y){var D=u.stateNode;h?que(p,D,h):jue(p,D)}else if(v!==g){var E=u.child;if(E!==null){MO(E,h,p);for(var N=E.sibling;N!==null;)MO(N,h,p),N=N.sibling}}}var hr=null,Nc=!1;function Tfe(u,h,p){{var v=h;e:for(;v!==null;){switch(v.tag){case m:{hr=v.stateNode,Nc=!1;break e}case f:{hr=v.stateNode.containerInfo,Nc=!0;break e}case g:{hr=v.stateNode.containerInfo,Nc=!0;break e}}v=v.return}if(hr===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");t$(u,h,p),hr=null,Nc=!1}Dfe(p)}function Mf(u,h,p){for(var v=p.child;v!==null;)t$(u,h,v),v=v.sibling}function t$(u,h,p){switch(Nae(p),p.tag){case m:dr||Tv(p,h);case _:{{var v=hr,y=Nc;hr=null,Mf(u,h,p),hr=v,Nc=y,hr!==null&&(Nc?Zue(hr,p.stateNode):Yue(hr,p.stateNode))}return}case z:{hr!==null&&(Nc?Que(hr,p.stateNode):jA(hr,p.stateNode));return}case g:{{var D=hr,E=Nc;hr=p.stateNode.containerInfo,Nc=!0,Mf(u,h,p),hr=D,Nc=E}return}case l:case k:case O:case I:{if(!dr){var N=p.updateQueue;if(N!==null){var P=N.lastEffect;if(P!==null){var K=P.next,Z=K;do{var fe=Z,he=fe.destroy,De=fe.tag;he!==void 0&&((De&ku)!==Ea?PD(p,h,he):(De&wo)!==Ea&&(BW(p),p.mode&An?(Nu(),PD(p,h,he),Iu(p)):PD(p,h,he),VW())),Z=Z.next}while(Z!==K)}}}Mf(u,h,p);return}case c:{if(!dr){Tv(p,h);var Ee=p.stateNode;typeof Ee.componentWillUnmount=="function"&&RO(p,h,Ee)}Mf(u,h,p);return}case te:{Mf(u,h,p);return}case U:{if(p.mode&tn){var je=dr;dr=je||p.memoizedState!==null,Mf(u,h,p),dr=je}else Mf(u,h,p);break}default:{Mf(u,h,p);return}}}function Ife(u){u.memoizedState}function Nfe(u,h){var p=h.memoizedState;if(p===null){var v=h.alternate;if(v!==null){var y=v.memoizedState;if(y!==null){var D=y.dehydrated;D!==null&&mde(D)}}}}function i$(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var p=u.stateNode;p===null&&(p=u.stateNode=new gfe),h.forEach(function(v){var y=kge.bind(null,u,v);if(!p.has(v)){if(p.add(v),wc)if(kv!==null&&Ev!==null)Y1(Ev,kv);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");v.then(y,y)}})}}function Rfe(u,h,p){kv=p,Ev=u,Ns(h),n$(h,u),Ns(h),kv=null,Ev=null}function Rc(u,h,p){var v=h.deletions;if(v!==null)for(var y=0;y<v.length;y++){var D=v[y];try{Tfe(u,h,D)}catch(P){es(D,h,P)}}var E=qL();if(h.subtreeFlags&W2)for(var N=h.child;N!==null;)Ns(N),n$(N,u),N=N.sibling;Ns(E)}function n$(u,h,p){var v=u.alternate,y=u.flags;switch(u.tag){case l:case k:case O:case I:{if(Rc(h,u),Ru(u),y&rn){try{Ic(ku|Co,u,u.return),Af(ku|Co,u)}catch(hi){es(u,u.return,hi)}if(u.mode&An){try{Nu(),Ic(wo|Co,u,u.return)}catch(hi){es(u,u.return,hi)}Iu(u)}else try{Ic(wo|Co,u,u.return)}catch(hi){es(u,u.return,hi)}}return}case c:{Rc(h,u),Ru(u),y&mf&&v!==null&&Tv(v,v.return);return}case m:{Rc(h,u),Ru(u),y&mf&&v!==null&&Tv(v,v.return);{if(u.flags&RC){var D=u.stateNode;try{tz(D)}catch(hi){es(u,u.return,hi)}}if(y&rn){var E=u.stateNode;if(E!=null){var N=u.memoizedProps,P=v!==null?v.memoizedProps:N,K=u.type,Z=u.updateQueue;if(u.updateQueue=null,Z!==null)try{Uue(E,Z,K,P,N,u)}catch(hi){es(u,u.return,hi)}}}}return}case _:{if(Rc(h,u),Ru(u),y&rn){if(u.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var fe=u.stateNode,he=u.memoizedProps,De=v!==null?v.memoizedProps:he;try{$ue(fe,De,he)}catch(hi){es(u,u.return,hi)}}return}case f:{if(Rc(h,u),Ru(u),y&rn&&v!==null){var Ee=v.memoizedState;if(Ee.isDehydrated)try{pde(h.containerInfo)}catch(hi){es(u,u.return,hi)}}return}case g:{Rc(h,u),Ru(u);return}case A:{Rc(h,u),Ru(u);var je=u.child;if(je.flags&pp){var Rt=je.stateNode,ii=je.memoizedState,qt=ii!==null;if(Rt.isHidden=qt,qt){var sn=je.alternate!==null&&je.alternate.memoizedState!==null;sn||hge()}}if(y&rn){try{Ife(u)}catch(hi){es(u,u.return,hi)}i$(u)}return}case U:{var Ki=v!==null&&v.memoizedState!==null;if(u.mode&tn){var Ce=dr;dr=Ce||Ki,Rc(h,u),dr=Ce}else Rc(h,u);if(Ru(u),y&pp){var Ke=u.stateNode,we=u.memoizedState,at=we!==null,At=u;if(Ke.isHidden=at,at&&!Ki&&(At.mode&tn)!==ci){Ft=At;for(var Dt=At.child;Dt!==null;)Ft=Dt,Mfe(Dt),Dt=Dt.sibling}xfe(At,at)}return}case q:{Rc(h,u),Ru(u),y&rn&&i$(u);return}case te:return;default:{Rc(h,u),Ru(u);return}}}function Ru(u){var h=u.flags;if(h&no){try{Efe(u)}catch(p){es(u,u.return,p)}u.flags&=~no}h&Bd&&(u.flags&=~Bd)}function Afe(u,h,p){kv=p,Ev=h,Ft=u,s$(u,h,p),kv=null,Ev=null}function s$(u,h,p){for(var v=(u.mode&tn)!==ci;Ft!==null;){var y=Ft,D=y.child;if(y.tag===U&&v){var E=y.memoizedState!==null,N=E||OD;if(N){OO(u,h,p);continue}else{var P=y.alternate,K=P!==null&&P.memoizedState!==null,Z=K||dr,fe=OD,he=dr;OD=N,dr=Z,dr&&!he&&(Ft=y,Ofe(y));for(var De=D;De!==null;)Ft=De,s$(De,h,p),De=De.sibling;Ft=y,OD=fe,dr=he,OO(u,h,p);continue}}(y.subtreeFlags&MC)!==li&&D!==null?(D.return=y,Ft=D):OO(u,h,p)}}function OO(u,h,p){for(;Ft!==null;){var v=Ft;if((v.flags&MC)!==li){var y=v.alternate;Ns(v);try{Sfe(h,y,v,p)}catch(E){es(v,v.return,E)}Ko()}if(v===u){Ft=null;return}var D=v.sibling;if(D!==null){D.return=v.return,Ft=D;return}Ft=v.return}}function Mfe(u){for(;Ft!==null;){var h=Ft,p=h.child;switch(h.tag){case l:case k:case O:case I:{if(h.mode&An)try{Nu(),Ic(wo,h,h.return)}finally{Iu(h)}else Ic(wo,h,h.return);break}case c:{Tv(h,h.return);var v=h.stateNode;typeof v.componentWillUnmount=="function"&&RO(h,h.return,v);break}case m:{Tv(h,h.return);break}case U:{var y=h.memoizedState!==null;if(y){o$(u);continue}break}}p!==null?(p.return=h,Ft=p):o$(u)}}function o$(u){for(;Ft!==null;){var h=Ft;if(h===u){Ft=null;return}var p=h.sibling;if(p!==null){p.return=h.return,Ft=p;return}Ft=h.return}}function Ofe(u){for(;Ft!==null;){var h=Ft,p=h.child;if(h.tag===U){var v=h.memoizedState!==null;if(v){r$(u);continue}}p!==null?(p.return=h,Ft=p):r$(u)}}function r$(u){for(;Ft!==null;){var h=Ft;Ns(h);try{Lfe(h)}catch(v){es(h,h.return,v)}if(Ko(),h===u){Ft=null;return}var p=h.sibling;if(p!==null){p.return=h.return,Ft=p;return}Ft=h.return}}function Pfe(u,h,p,v){Ft=h,Ffe(h,u,p,v)}function Ffe(u,h,p,v){for(;Ft!==null;){var y=Ft,D=y.child;(y.subtreeFlags&Y_)!==li&&D!==null?(D.return=y,Ft=D):Bfe(u,h,p,v)}}function Bfe(u,h,p,v){for(;Ft!==null;){var y=Ft;if((y.flags&Cc)!==li){Ns(y);try{Vfe(h,y,p,v)}catch(E){es(y,y.return,E)}Ko()}if(y===u){Ft=null;return}var D=y.sibling;if(D!==null){D.return=y.return,Ft=D;return}Ft=y.return}}function Vfe(u,h,p,v){switch(h.tag){case l:case k:case I:{if(h.mode&An){hO();try{Af(cr|Co,h)}finally{dO(h)}}else Af(cr|Co,h);break}}}function Wfe(u){Ft=u,Hfe()}function Hfe(){for(;Ft!==null;){var u=Ft,h=u.child;if((Ft.flags&fp)!==li){var p=u.deletions;if(p!==null){for(var v=0;v<p.length;v++){var y=p[v];Ft=y,$fe(y,u)}{var D=u.alternate;if(D!==null){var E=D.child;if(E!==null){D.child=null;do{var N=E.sibling;E.sibling=null,E=N}while(E!==null)}}}Ft=u}}(u.subtreeFlags&Y_)!==li&&h!==null?(h.return=u,Ft=h):zfe()}}function zfe(){for(;Ft!==null;){var u=Ft;(u.flags&Cc)!==li&&(Ns(u),Ufe(u),Ko());var h=u.sibling;if(h!==null){h.return=u.return,Ft=h;return}Ft=u.return}}function Ufe(u){switch(u.tag){case l:case k:case I:{u.mode&An?(hO(),Ic(cr|Co,u,u.return),dO(u)):Ic(cr|Co,u,u.return);break}}}function $fe(u,h){for(;Ft!==null;){var p=Ft;Ns(p),Kfe(p,h),Ko();var v=p.child;v!==null?(v.return=p,Ft=v):jfe(u)}}function jfe(u){for(;Ft!==null;){var h=Ft,p=h.sibling,v=h.return;if(XU(h),h===u){Ft=null;return}if(p!==null){p.return=v,Ft=p;return}Ft=v}}function Kfe(u,h){switch(u.tag){case l:case k:case I:{u.mode&An?(hO(),Ic(cr,u,h),dO(u)):Ic(cr,u,h);break}}}function qfe(u){switch(u.tag){case l:case k:case I:{try{Af(wo|Co,u)}catch(p){es(u,u.return,p)}break}case c:{var h=u.stateNode;try{h.componentDidMount()}catch(p){es(u,u.return,p)}break}}}function Gfe(u){switch(u.tag){case l:case k:case I:{try{Af(cr|Co,u)}catch(h){es(u,u.return,h)}break}}}function Yfe(u){switch(u.tag){case l:case k:case I:{try{Ic(wo|Co,u,u.return)}catch(p){es(u,u.return,p)}break}case c:{var h=u.stateNode;typeof h.componentWillUnmount=="function"&&RO(u,u.return,h);break}}}function Zfe(u){switch(u.tag){case l:case k:case I:try{Ic(cr|Co,u,u.return)}catch(h){es(u,u.return,h)}}}if(typeof Symbol=="function"&&Symbol.for){var B1=Symbol.for;B1("selector.component"),B1("selector.has_pseudo_class"),B1("selector.role"),B1("selector.test_id"),B1("selector.text")}var Qfe=[];function Xfe(){Qfe.forEach(function(u){return u()})}var Jfe=t.ReactCurrentActQueue;function ege(u){{var h=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,p=typeof jest<"u";return p&&h!==!1}}function a$(){{var u=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!u&&Jfe.current!==null&&r("The current testing environment is not configured to support act(...)"),u}}var tge=Math.ceil,PO=t.ReactCurrentDispatcher,FO=t.ReactCurrentOwner,fr=t.ReactCurrentBatchConfig,Ac=t.ReactCurrentActQueue,Lo=0,l$=1,gr=2,Gl=4,Qd=0,V1=1,Pp=2,FD=3,W1=4,c$=5,BO=6,nn=Lo,na=null,Rs=null,xo=nt,Au=nt,VO=Lf(nt),Do=Qd,H1=null,BD=nt,z1=nt,VD=nt,U1=null,Ta=null,WO=0,u$=500,d$=1/0,ige=500,Xd=null;function $1(){d$=qo()+ige}function h$(){return d$}var WD=!1,HO=null,Iv=null,Fp=!1,Of=null,j1=nt,zO=[],UO=null,nge=50,K1=0,$O=null,jO=!1,HD=!1,sge=50,Nv=0,zD=null,q1=ls,UD=nt,f$=!1;function $D(){return na}function sa(){return(nn&(gr|Gl))!==Lo?qo():(q1!==ls||(q1=qo()),q1)}function Pf(u){var h=u.mode;if((h&tn)===ci)return wi;if((nn&gr)!==Lo&&xo!==nt)return HC(xo);var p=ehe()!==Jde;if(p){if(fr.transition!==null){var v=fr.transition;v._updatedFibers||(v._updatedFibers=new Set),v._updatedFibers.add(u)}return UD===Yo&&(UD=qW()),UD}var y=yc();if(y!==Yo)return y;var D=Bue();return D}function oge(u){var h=u.mode;return(h&tn)===ci?wi:lle()}function ko(u,h,p,v){Tge(),f$&&r("useInsertionEffect must not schedule updates."),jO&&(HD=!0),zC(u,p,v),(nn&gr)!==nt&&u===na?Rge(h):(wc&&ZW(u,h,p),Age(h),u===na&&((nn&gr)===Lo&&(z1=Hi(z1,p)),Do===W1&&Ff(u,xo)),Ia(u,v),p===wi&&nn===Lo&&(h.mode&tn)===ci&&!Ac.isBatchingLegacy&&($1(),hz()))}function rge(u,h,p){var v=u.current;v.lanes=h,zC(u,h,p),Ia(u,p)}function age(u){return(nn&gr)!==Lo}function Ia(u,h){var p=u.callbackNode;ile(u,h);var v=dx(u,u===na?xo:nt);if(v===nt){p!==null&&T$(p),u.callbackNode=null,u.callbackPriority=Yo;return}var y=wp(v),D=u.callbackPriority;if(D===y&&!(Ac.current!==null&&p!==XO)){p==null&&D!==wi&&r("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}p!=null&&T$(p);var E;if(y===wi)u.tag===xf?(Ac.isBatchingLegacy!==null&&(Ac.didScheduleLegacyUpdate=!0),Pde(m$.bind(null,u))):dz(m$.bind(null,u)),Ac.current!==null?Ac.current.push(Df):Wue(function(){(nn&(gr|Gl))===Lo&&Df()}),E=null;else{var N;switch(JW(v)){case nl:N=ax;break;case zd:N=H2;break;case Ud:N=vp;break;case gx:N=z2;break;default:N=vp;break}E=JO(N,g$.bind(null,u))}u.callbackPriority=y,u.callbackNode=E}function g$(u,h){if(The(),q1=ls,UD=nt,(nn&(gr|Gl))!==Lo)throw new Error("Should not already be working.");var p=u.callbackNode,v=eh();if(v&&u.callbackNode!==p)return null;var y=dx(u,u===na?xo:nt);if(y===nt)return null;var D=!hx(u,y)&&!ale(u,y)&&!h,E=D?_ge(u,y):KD(u,y);if(E!==Qd){if(E===Pp){var N=uA(u);N!==nt&&(y=N,E=KO(u,N))}if(E===V1){var P=H1;throw Bp(u,nt),Ff(u,y),Ia(u,qo()),P}if(E===BO)Ff(u,y);else{var K=!hx(u,y),Z=u.current.alternate;if(K&&!cge(Z)){if(E=KD(u,y),E===Pp){var fe=uA(u);fe!==nt&&(y=fe,E=KO(u,fe))}if(E===V1){var he=H1;throw Bp(u,nt),Ff(u,y),Ia(u,qo()),he}}u.finishedWork=Z,u.finishedLanes=y,lge(u,E,y)}}return Ia(u,qo()),u.callbackNode===p?g$.bind(null,u):null}function KO(u,h){var p=U1;if(px(u)){var v=Bp(u,h);v.flags|=Fd,Tde(u.containerInfo)}var y=KD(u,h);if(y!==Pp){var D=Ta;Ta=p,D!==null&&p$(D)}return y}function p$(u){Ta===null?Ta=u:Ta.push.apply(Ta,u)}function lge(u,h,p){switch(h){case Qd:case V1:throw new Error("Root did not complete. This is a bug in React.");case Pp:{Vp(u,Ta,Xd);break}case FD:{if(Ff(u,p),jW(p)&&!I$()){var v=WO+u$-qo();if(v>10){var y=dx(u,nt);if(y!==nt)break;var D=u.suspendedLanes;if(!tv(D,p)){sa(),YW(u,D);break}u.timeoutHandle=UA(Vp.bind(null,u,Ta,Xd),v);break}}Vp(u,Ta,Xd);break}case W1:{if(Ff(u,p),rle(p))break;if(!I$()){var E=ele(u,p),N=E,P=qo()-N,K=Ege(P)-P;if(K>10){u.timeoutHandle=UA(Vp.bind(null,u,Ta,Xd),K);break}}Vp(u,Ta,Xd);break}case c$:{Vp(u,Ta,Xd);break}default:throw new Error("Unknown root exit status.")}}function cge(u){for(var h=u;;){if(h.flags&ox){var p=h.updateQueue;if(p!==null){var v=p.stores;if(v!==null)for(var y=0;y<v.length;y++){var D=v[y],E=D.getSnapshot,N=D.value;try{if(!ol(E(),N))return!1}catch{return!1}}}}var P=h.child;if(h.subtreeFlags&ox&&P!==null){P.return=h,h=P;continue}if(h===u)return!0;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}return!0}function Ff(u,h){h=fx(h,VD),h=fx(h,z1),ule(u,h)}function m$(u){if(Ihe(),(nn&(gr|Gl))!==Lo)throw new Error("Should not already be working.");eh();var h=dx(u,nt);if(!il(h,wi))return Ia(u,qo()),null;var p=KD(u,h);if(u.tag!==xf&&p===Pp){var v=uA(u);v!==nt&&(h=v,p=KO(u,v))}if(p===V1){var y=H1;throw Bp(u,nt),Ff(u,h),Ia(u,qo()),y}if(p===BO)throw new Error("Root did not complete. This is a bug in React.");var D=u.current.alternate;return u.finishedWork=D,u.finishedLanes=h,Vp(u,Ta,Xd),Ia(u,qo()),null}function uge(u,h){h!==nt&&(gA(u,Hi(h,wi)),Ia(u,qo()),(nn&(gr|Gl))===Lo&&($1(),Df()))}function qO(u,h){var p=nn;nn|=l$;try{return u(h)}finally{nn=p,nn===Lo&&!Ac.isBatchingLegacy&&($1(),hz())}}function dge(u,h,p,v,y){var D=yc(),E=fr.transition;try{return fr.transition=null,Zo(nl),u(h,p,v,y)}finally{Zo(D),fr.transition=E,nn===Lo&&$1()}}function Jd(u){Of!==null&&Of.tag===xf&&(nn&(gr|Gl))===Lo&&eh();var h=nn;nn|=l$;var p=fr.transition,v=yc();try{return fr.transition=null,Zo(nl),u?u():void 0}finally{Zo(v),fr.transition=p,nn=h,(nn&(gr|Gl))===Lo&&Df()}}function _$(){return(nn&(gr|Gl))!==Lo}function jD(u,h){Tr(VO,Au,u),Au=Hi(Au,h)}function GO(u){Au=VO.current,Er(VO,u)}function Bp(u,h){u.finishedWork=null,u.finishedLanes=nt;var p=u.timeoutHandle;if(p!==$A&&(u.timeoutHandle=$A,Vue(p)),Rs!==null)for(var v=Rs.return;v!==null;){var y=v.alternate;KU(y,v),v=v.return}na=u;var D=Wp(u.current,null);return Rs=D,xo=Au=h,Do=Qd,H1=null,BD=nt,z1=nt,VD=nt,U1=null,Ta=null,she(),xc.discardPendingWarnings(),D}function v$(u,h){do{var p=Rs;try{if(Jx(),Gz(),Ko(),FO.current=null,p===null||p.return===null){Do=V1,H1=h,Rs=null;return}if(_e&&p.mode&An&&ND(p,!0),tt)if(Q_(),h!==null&&typeof h=="object"&&typeof h.then=="function"){var v=h;zae(p,v,xo)}else Hae(p,h,xo);Ohe(u,p.return,p,h,xo),y$(p)}catch(y){h=y,Rs===p&&p!==null?(p=p.return,Rs=p):p=Rs;continue}return}while(!0)}function b$(){var u=PO.current;return PO.current=DD,u===null?DD:u}function C$(u){PO.current=u}function hge(){WO=qo()}function G1(u){BD=Hi(u,BD)}function fge(){Do===Qd&&(Do=FD)}function YO(){(Do===Qd||Do===FD||Do===Pp)&&(Do=W1),na!==null&&(dA(BD)||dA(z1))&&Ff(na,xo)}function gge(u){Do!==W1&&(Do=Pp),U1===null?U1=[u]:U1.push(u)}function pge(){return Do===Qd}function KD(u,h){var p=nn;nn|=gr;var v=b$();if(na!==u||xo!==h){if(wc){var y=u.memoizedUpdaters;y.size>0&&(Y1(u,xo),y.clear()),QW(u,h)}Xd=XW(),Bp(u,h)}WW(h);do try{mge();break}catch(D){v$(u,D)}while(!0);if(Jx(),nn=p,C$(v),Rs!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return HW(),na=null,xo=nt,Do}function mge(){for(;Rs!==null;)w$(Rs)}function _ge(u,h){var p=nn;nn|=gr;var v=b$();if(na!==u||xo!==h){if(wc){var y=u.memoizedUpdaters;y.size>0&&(Y1(u,xo),y.clear()),QW(u,h)}Xd=XW(),$1(),Bp(u,h)}WW(h);do try{vge();break}catch(D){v$(u,D)}while(!0);return Jx(),C$(v),nn=p,Rs!==null?(qae(),Qd):(HW(),na=null,xo=nt,Do)}function vge(){for(;Rs!==null&&!wae();)w$(Rs)}function w$(u){var h=u.alternate;Ns(u);var p;(u.mode&An)!==ci?(uO(u),p=ZO(h,u,Au),ND(u,!0)):p=ZO(h,u,Au),Ko(),u.memoizedProps=u.pendingProps,p===null?y$(u):Rs=p,FO.current=null}function y$(u){var h=u;do{var p=h.alternate,v=h.return;if((h.flags&AC)===li){Ns(h);var y=void 0;if((h.mode&An)===ci?y=jU(p,h,Au):(uO(h),y=jU(p,h,Au),ND(h,!1)),Ko(),y!==null){Rs=y;return}}else{var D=ffe(p,h);if(D!==null){D.flags&=pae,Rs=D;return}if((h.mode&An)!==ci){ND(h,!1);for(var E=h.actualDuration,N=h.child;N!==null;)E+=N.actualDuration,N=N.sibling;h.actualDuration=E}if(v!==null)v.flags|=AC,v.subtreeFlags=li,v.deletions=null;else{Do=BO,Rs=null;return}}var P=h.sibling;if(P!==null){Rs=P;return}h=v,Rs=h}while(h!==null);Do===Qd&&(Do=c$)}function Vp(u,h,p){var v=yc(),y=fr.transition;try{fr.transition=null,Zo(nl),bge(u,h,p,v)}finally{fr.transition=y,Zo(v)}return null}function bge(u,h,p,v){do eh();while(Of!==null);if(Ige(),(nn&(gr|Gl))!==Lo)throw new Error("Should not already be working.");var y=u.finishedWork,D=u.finishedLanes;if(Mae(D),y===null)return FW(),null;if(D===nt&&r("root.finishedLanes should not be empty during a commit. This is a bug in React."),u.finishedWork=null,u.finishedLanes=nt,y===u.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");u.callbackNode=null,u.callbackPriority=Yo;var E=Hi(y.lanes,y.childLanes);dle(u,E),u===na&&(na=null,Rs=null,xo=nt),((y.subtreeFlags&Y_)!==li||(y.flags&Y_)!==li)&&(Fp||(Fp=!0,UO=p,JO(vp,function(){return eh(),null})));var N=(y.subtreeFlags&(V2|W2|MC|Y_))!==li,P=(y.flags&(V2|W2|MC|Y_))!==li;if(N||P){var K=fr.transition;fr.transition=null;var Z=yc();Zo(nl);var fe=nn;nn|=Gl,FO.current=null,vfe(u,y),bU(),Rfe(u,y,D),Rue(u.containerInfo),u.current=y,Uae(D),Afe(y,u,D),$ae(),yae(),nn=fe,Zo(Z),fr.transition=K}else u.current=y,bU();var he=Fp;if(Fp?(Fp=!1,Of=u,j1=D):(Nv=0,zD=null),E=u.pendingLanes,E===nt&&(Iv=null),he||D$(u.current,!1),Tae(y.stateNode,v),wc&&u.memoizedUpdaters.clear(),Xfe(),Ia(u,qo()),h!==null)for(var De=u.onRecoverableError,Ee=0;Ee<h.length;Ee++){var je=h[Ee],Rt=je.stack,ii=je.digest;De(je.value,{componentStack:Rt,digest:ii})}if(WD){WD=!1;var qt=HO;throw HO=null,qt}return il(j1,wi)&&u.tag!==xf&&eh(),E=u.pendingLanes,il(E,wi)?(Ehe(),u===$O?K1++:(K1=0,$O=u)):K1=0,Df(),FW(),null}function eh(){if(Of!==null){var u=JW(j1),h=ple(Ud,u),p=fr.transition,v=yc();try{return fr.transition=null,Zo(h),wge()}finally{Zo(v),fr.transition=p}}return!1}function Cge(u){zO.push(u),Fp||(Fp=!0,JO(vp,function(){return eh(),null}))}function wge(){if(Of===null)return!1;var u=UO;UO=null;var h=Of,p=j1;if(Of=null,j1=nt,(nn&(gr|Gl))!==Lo)throw new Error("Cannot flush passive effects while already rendering.");jO=!0,HD=!1,jae(p);var v=nn;nn|=Gl,Wfe(h.current),Pfe(h,h.current,p,u);{var y=zO;zO=[];for(var D=0;D<y.length;D++){var E=y[D];yfe(h,E)}}Kae(),D$(h.current,!0),nn=v,Df(),HD?h===zD?Nv++:(Nv=0,zD=h):Nv=0,jO=!1,HD=!1,Iae(h);{var N=h.current.stateNode;N.effectDuration=0,N.passiveEffectDuration=0}return!0}function S$(u){return Iv!==null&&Iv.has(u)}function yge(u){Iv===null?Iv=new Set([u]):Iv.add(u)}function Sge(u){WD||(WD=!0,HO=u)}var Lge=Sge;function L$(u,h,p){var v=Mp(p,h),y=wU(u,v,wi),D=Ef(u,y,wi),E=sa();D!==null&&(zC(D,wi,E),Ia(D,E))}function es(u,h,p){if(pfe(p),Z1(!1),u.tag===f){L$(u,u,p);return}var v=null;for(v=h;v!==null;){if(v.tag===f){L$(v,u,p);return}else if(v.tag===c){var y=v.type,D=v.stateNode;if(typeof y.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&!S$(D)){var E=Mp(p,u),N=mO(v,E,wi),P=Ef(v,N,wi),K=sa();P!==null&&(zC(P,wi,K),Ia(P,K));return}}v=v.return}r(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,p)}function xge(u,h,p){var v=u.pingCache;v!==null&&v.delete(h);var y=sa();YW(u,p),Mge(u),na===u&&tv(xo,p)&&(Do===W1||Do===FD&&jW(xo)&&qo()-WO<u$?Bp(u,nt):VD=Hi(VD,p)),Ia(u,y)}function x$(u,h){h===Yo&&(h=oge(u));var p=sa(),v=ka(u,h);v!==null&&(zC(v,h,p),Ia(v,p))}function Dge(u){var h=u.memoizedState,p=Yo;h!==null&&(p=h.retryLane),x$(u,p)}function kge(u,h){var p=Yo,v;switch(u.tag){case A:v=u.stateNode;var y=u.memoizedState;y!==null&&(p=y.retryLane);break;case q:v=u.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}v!==null&&v.delete(h),x$(u,p)}function Ege(u){return u<120?120:u<480?480:u<1080?1080:u<1920?1920:u<3e3?3e3:u<4320?4320:tge(u/1960)*1960}function Tge(){if(K1>nge)throw K1=0,$O=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");Nv>sge&&(Nv=0,zD=null,r("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function Ige(){xc.flushLegacyContextWarning(),xc.flushPendingUnsafeLifecycleWarnings()}function D$(u,h){Ns(u),qD(u,Vd,Yfe),h&&qD(u,rx,Zfe),qD(u,Vd,qfe),h&&qD(u,rx,Gfe),Ko()}function qD(u,h,p){for(var v=u,y=null;v!==null;){var D=v.subtreeFlags&h;v!==y&&v.child!==null&&D!==li?v=v.child:((v.flags&h)!==li&&p(v),v.sibling!==null?v=v.sibling:v=y=v.return)}}var GD=null;function k$(u){{if((nn&gr)!==Lo||!(u.mode&tn))return;var h=u.tag;if(h!==d&&h!==f&&h!==c&&h!==l&&h!==k&&h!==O&&h!==I)return;var p=_i(u)||"ReactComponent";if(GD!==null){if(GD.has(p))return;GD.add(p)}else GD=new Set([p]);var v=Dr;try{Ns(u),r("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{v?Ns(u):Ko()}}}var ZO;{var Nge=null;ZO=function(u,h,p){var v=O$(Nge,h);try{return WU(u,h,p)}catch(D){if($de()||D!==null&&typeof D=="object"&&typeof D.then=="function")throw D;if(Jx(),Gz(),KU(u,h),O$(h,v),h.mode&An&&uO(h),A2(null,WU,null,u,h,p),dae()){var y=M2();typeof y=="object"&&y!==null&&y._suppressLogging&&typeof D=="object"&&D!==null&&!D._suppressLogging&&(D._suppressLogging=!0)}throw D}}}var E$=!1,QO;QO=new Set;function Rge(u){if(up&&!xhe())switch(u.tag){case l:case k:case I:{var h=Rs&&_i(Rs)||"Unknown",p=h;if(!QO.has(p)){QO.add(p);var v=_i(u)||"Unknown";r("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",v,h,h)}break}case c:{E$||(r("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),E$=!0);break}}}function Y1(u,h){if(wc){var p=u.memoizedUpdaters;p.forEach(function(v){ZW(u,v,h)})}}var XO={};function JO(u,h){{var p=Ac.current;return p!==null?(p.push(h),XO):PW(u,h)}}function T$(u){if(u!==XO)return Cae(u)}function I$(){return Ac.current!==null}function Age(u){{if(u.mode&tn){if(!a$())return}else if(!ege()||nn!==Lo||u.tag!==l&&u.tag!==k&&u.tag!==I)return;if(Ac.current===null){var h=Dr;try{Ns(u),r(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,_i(u))}finally{h?Ns(u):Ko()}}}}function Mge(u){u.tag!==xf&&a$()&&Ac.current===null&&r(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function Z1(u){f$=u}var Yl=null,Rv=null,Oge=function(u){Yl=u};function Av(u){{if(Yl===null)return u;var h=Yl(u);return h===void 0?u:h.current}}function eP(u){return Av(u)}function tP(u){{if(Yl===null)return u;var h=Yl(u);if(h===void 0){if(u!=null&&typeof u.render=="function"){var p=Av(u.render);if(u.render!==p){var v={$$typeof:Lt,render:p};return u.displayName!==void 0&&(v.displayName=u.displayName),v}}return u}return h.current}}function N$(u,h){{if(Yl===null)return!1;var p=u.elementType,v=h.type,y=!1,D=typeof v=="object"&&v!==null?v.$$typeof:null;switch(u.tag){case c:{typeof v=="function"&&(y=!0);break}case l:{(typeof v=="function"||D===ae)&&(y=!0);break}case k:{(D===Lt||D===ae)&&(y=!0);break}case O:case I:{(D===hn||D===ae)&&(y=!0);break}default:return!1}if(y){var E=Yl(p);if(E!==void 0&&E===Yl(v))return!0}return!1}}function R$(u){{if(Yl===null||typeof WeakSet!="function")return;Rv===null&&(Rv=new WeakSet),Rv.add(u)}}var Pge=function(u,h){{if(Yl===null)return;var p=h.staleFamilies,v=h.updatedFamilies;eh(),Jd(function(){iP(u.current,v,p)})}},Fge=function(u,h){{if(u.context!==rl)return;eh(),Jd(function(){Q1(h,u,null,null)})}};function iP(u,h,p){{var v=u.alternate,y=u.child,D=u.sibling,E=u.tag,N=u.type,P=null;switch(E){case l:case I:case c:P=N;break;case k:P=N.render;break}if(Yl===null)throw new Error("Expected resolveFamily to be set during hot reload.");var K=!1,Z=!1;if(P!==null){var fe=Yl(P);fe!==void 0&&(p.has(fe)?Z=!0:h.has(fe)&&(E===c?Z=!0:K=!0))}if(Rv!==null&&(Rv.has(u)||v!==null&&Rv.has(v))&&(Z=!0),Z&&(u._debugNeedsRemount=!0),Z||K){var he=ka(u,wi);he!==null&&ko(he,u,wi,ls)}y!==null&&!Z&&iP(y,h,p),D!==null&&iP(D,h,p)}}var Bge=function(u,h){{var p=new Set,v=new Set(h.map(function(y){return y.current}));return nP(u.current,v,p),p}};function nP(u,h,p){{var v=u.child,y=u.sibling,D=u.tag,E=u.type,N=null;switch(D){case l:case I:case c:N=E;break;case k:N=E.render;break}var P=!1;N!==null&&h.has(N)&&(P=!0),P?Vge(u,p):v!==null&&nP(v,h,p),y!==null&&nP(y,h,p)}}function Vge(u,h){{var p=Wge(u,h);if(p)return;for(var v=u;;){switch(v.tag){case m:h.add(v.stateNode);return;case g:h.add(v.stateNode.containerInfo);return;case f:h.add(v.stateNode.containerInfo);return}if(v.return===null)throw new Error("Expected to reach root first.");v=v.return}}}function Wge(u,h){for(var p=u,v=!1;;){if(p.tag===m)v=!0,h.add(p.stateNode);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)return v;for(;p.sibling===null;){if(p.return===null||p.return===u)return v;p=p.return}p.sibling.return=p.return,p=p.sibling}return!1}var sP;{sP=!1;try{var A$=Object.preventExtensions({})}catch{sP=!0}}function Hge(u,h,p,v){this.tag=u,this.key=p,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=h,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=v,this.flags=li,this.subtreeFlags=li,this.deletions=null,this.lanes=nt,this.childLanes=nt,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!sP&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var al=function(u,h,p,v){return new Hge(u,h,p,v)};function oP(u){var h=u.prototype;return!!(h&&h.isReactComponent)}function zge(u){return typeof u=="function"&&!oP(u)&&u.defaultProps===void 0}function Uge(u){if(typeof u=="function")return oP(u)?c:l;if(u!=null){var h=u.$$typeof;if(h===Lt)return k;if(h===hn)return O}return d}function Wp(u,h){var p=u.alternate;p===null?(p=al(u.tag,h,u.key,u.mode),p.elementType=u.elementType,p.type=u.type,p.stateNode=u.stateNode,p._debugSource=u._debugSource,p._debugOwner=u._debugOwner,p._debugHookTypes=u._debugHookTypes,p.alternate=u,u.alternate=p):(p.pendingProps=h,p.type=u.type,p.flags=li,p.subtreeFlags=li,p.deletions=null,p.actualDuration=0,p.actualStartTime=-1),p.flags=u.flags&Wd,p.childLanes=u.childLanes,p.lanes=u.lanes,p.child=u.child,p.memoizedProps=u.memoizedProps,p.memoizedState=u.memoizedState,p.updateQueue=u.updateQueue;var v=u.dependencies;switch(p.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},p.sibling=u.sibling,p.index=u.index,p.ref=u.ref,p.selfBaseDuration=u.selfBaseDuration,p.treeBaseDuration=u.treeBaseDuration,p._debugNeedsRemount=u._debugNeedsRemount,p.tag){case d:case l:case I:p.type=Av(u.type);break;case c:p.type=eP(u.type);break;case k:p.type=tP(u.type);break}return p}function $ge(u,h){u.flags&=Wd|no;var p=u.alternate;if(p===null)u.childLanes=nt,u.lanes=h,u.child=null,u.subtreeFlags=li,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null,u.selfBaseDuration=0,u.treeBaseDuration=0;else{u.childLanes=p.childLanes,u.lanes=p.lanes,u.child=p.child,u.subtreeFlags=li,u.deletions=null,u.memoizedProps=p.memoizedProps,u.memoizedState=p.memoizedState,u.updateQueue=p.updateQueue,u.type=p.type;var v=p.dependencies;u.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},u.selfBaseDuration=p.selfBaseDuration,u.treeBaseDuration=p.treeBaseDuration}return u}function jge(u,h,p){var v;return u===jx?(v=tn,h===!0&&(v|=so,v|=Su)):v=ci,wc&&(v|=An),al(f,null,null,v)}function rP(u,h,p,v,y,D){var E=d,N=u;if(typeof u=="function")oP(u)?(E=c,N=eP(N)):N=Av(N);else if(typeof u=="string")E=m;else{e:switch(u){case me:return Bf(p.children,y,D,h);case Me:E=S,y|=so,(y&tn)!==ci&&(y|=Su);break;case _t:return Kge(p,y,D,h);case Qt:return qge(p,y,D,h);case Tn:return Gge(p,y,D,h);case Ht:return M$(p,y,D,h);case ji:case xe:case $i:case as:case dt:default:{if(typeof u=="object"&&u!==null)switch(u.$$typeof){case Jt:E=L;break e;case oi:E=x;break e;case Lt:E=k,N=tP(N);break e;case hn:E=O;break e;case ae:E=R,N=null;break e}var P="";{(u===void 0||typeof u=="object"&&u!==null&&Object.keys(u).length===0)&&(P+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var K=v?_i(v):null;K&&(P+=`

Check the render method of \``+K+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(u==null?u:typeof u)+"."+P))}}}var Z=al(E,p,h,y);return Z.elementType=u,Z.type=N,Z.lanes=D,Z._debugOwner=v,Z}function aP(u,h,p){var v=null;v=u._owner;var y=u.type,D=u.key,E=u.props,N=rP(y,D,E,v,h,p);return N._debugSource=u._source,N._debugOwner=u._owner,N}function Bf(u,h,p,v){var y=al(C,u,v,h);return y.lanes=p,y}function Kge(u,h,p,v){typeof u.id!="string"&&r('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof u.id);var y=al(T,u,v,h|An);return y.elementType=_t,y.lanes=p,y.stateNode={effectDuration:0,passiveEffectDuration:0},y}function qge(u,h,p,v){var y=al(A,u,v,h);return y.elementType=Qt,y.lanes=p,y}function Gge(u,h,p,v){var y=al(q,u,v,h);return y.elementType=Tn,y.lanes=p,y}function M$(u,h,p,v){var y=al(U,u,v,h);y.elementType=Ht,y.lanes=p;var D={isHidden:!1};return y.stateNode=D,y}function lP(u,h,p){var v=al(_,u,null,h);return v.lanes=p,v}function Yge(){var u=al(m,null,null,ci);return u.elementType="DELETED",u}function Zge(u){var h=al(z,null,null,ci);return h.stateNode=u,h}function cP(u,h,p){var v=u.children!==null?u.children:[],y=al(g,v,u.key,h);return y.lanes=p,y.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},y}function O$(u,h){return u===null&&(u=al(d,null,null,ci)),u.tag=h.tag,u.key=h.key,u.elementType=h.elementType,u.type=h.type,u.stateNode=h.stateNode,u.return=h.return,u.child=h.child,u.sibling=h.sibling,u.index=h.index,u.ref=h.ref,u.pendingProps=h.pendingProps,u.memoizedProps=h.memoizedProps,u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.dependencies=h.dependencies,u.mode=h.mode,u.flags=h.flags,u.subtreeFlags=h.subtreeFlags,u.deletions=h.deletions,u.lanes=h.lanes,u.childLanes=h.childLanes,u.alternate=h.alternate,u.actualDuration=h.actualDuration,u.actualStartTime=h.actualStartTime,u.selfBaseDuration=h.selfBaseDuration,u.treeBaseDuration=h.treeBaseDuration,u._debugSource=h._debugSource,u._debugOwner=h._debugOwner,u._debugNeedsRemount=h._debugNeedsRemount,u._debugHookTypes=h._debugHookTypes,u}function Qge(u,h,p,v,y){this.tag=h,this.containerInfo=u,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=$A,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=Yo,this.eventTimes=fA(nt),this.expirationTimes=fA(ls),this.pendingLanes=nt,this.suspendedLanes=nt,this.pingedLanes=nt,this.expiredLanes=nt,this.mutableReadLanes=nt,this.finishedLanes=nt,this.entangledLanes=nt,this.entanglements=fA(nt),this.identifierPrefix=v,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var D=this.pendingUpdatersLaneMap=[],E=0;E<$2;E++)D.push(new Set)}switch(h){case jx:this._debugRootType=p?"hydrateRoot()":"createRoot()";break;case xf:this._debugRootType=p?"hydrate()":"render()";break}}function P$(u,h,p,v,y,D,E,N,P,K){var Z=new Qge(u,h,p,N,P),fe=jge(h,D);Z.current=fe,fe.stateNode=Z;{var he={element:v,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null};fe.memoizedState=he}return _M(fe),Z}var uP="18.2.0";function Xge(u,h,p){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return Xe(v),{$$typeof:H,key:v==null?null:""+v,children:u,containerInfo:h,implementation:p}}var dP,hP;dP=!1,hP={};function F$(u){if(!u)return rl;var h=q_(u),p=Ode(h);if(h.tag===c){var v=h.type;if(Du(v))return cz(h,v,p)}return p}function Jge(u,h){{var p=q_(u);if(p===void 0){if(typeof u.render=="function")throw new Error("Unable to find node on an unmounted component.");var v=Object.keys(u).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+v)}var y=AW(p);if(y===null)return null;if(y.mode&so){var D=_i(p)||"Component";if(!hP[D]){hP[D]=!0;var E=Dr;try{Ns(y),p.mode&so?r("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",h,h,D):r("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",h,h,D)}finally{E?Ns(E):Ko()}}}return y.stateNode}}function B$(u,h,p,v,y,D,E,N){var P=!1,K=null;return P$(u,h,P,K,p,v,y,D,E)}function V$(u,h,p,v,y,D,E,N,P,K){var Z=!0,fe=P$(p,v,Z,u,y,D,E,N,P);fe.context=F$(null);var he=fe.current,De=sa(),Ee=Pf(he),je=Yd(De,Ee);return je.callback=h!=null?h:null,Ef(he,je,Ee),rge(fe,Ee,De),fe}function Q1(u,h,p,v){Eae(h,u);var y=h.current,D=sa(),E=Pf(y);Gae(E);var N=F$(p);h.context===null?h.context=N:h.pendingContext=N,up&&Dr!==null&&!dP&&(dP=!0,r(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,_i(Dr)||"Unknown"));var P=Yd(D,E);P.payload={element:u},v=v===void 0?null:v,v!==null&&(typeof v!="function"&&r("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",v),P.callback=v);var K=Ef(y,P,E);return K!==null&&(ko(K,y,E,D),sD(K,y,E)),E}function YD(u){var h=u.current;if(!h.child)return null;switch(h.child.tag){case m:return h.child.stateNode;default:return h.child.stateNode}}function epe(u){switch(u.tag){case f:{var h=u.stateNode;if(px(h)){var p=nle(h);uge(h,p)}break}case A:{Jd(function(){var y=ka(u,wi);if(y!==null){var D=sa();ko(y,u,wi,D)}});var v=wi;fP(u,v);break}}}function W$(u,h){var p=u.memoizedState;p!==null&&p.dehydrated!==null&&(p.retryLane=cle(p.retryLane,h))}function fP(u,h){W$(u,h);var p=u.alternate;p&&W$(p,h)}function tpe(u){if(u.tag===A){var h=BC,p=ka(u,h);if(p!==null){var v=sa();ko(p,u,h,v)}fP(u,h)}}function ipe(u){if(u.tag===A){var h=Pf(u),p=ka(u,h);if(p!==null){var v=sa();ko(p,u,h,v)}fP(u,h)}}function H$(u){var h=bae(u);return h===null?null:h.stateNode}var z$=function(u){return null};function npe(u){return z$(u)}var U$=function(u){return!1};function spe(u){return U$(u)}var $$=null,j$=null,K$=null,q$=null,G$=null,Y$=null,Z$=null,Q$=null,X$=null;{var J$=function(u,h,p){var v=h[p],y=yn(u)?u.slice():ei({},u);return p+1===h.length?(yn(y)?y.splice(v,1):delete y[v],y):(y[v]=J$(u[v],h,p+1),y)},ej=function(u,h){return J$(u,h,0)},tj=function(u,h,p,v){var y=h[v],D=yn(u)?u.slice():ei({},u);if(v+1===h.length){var E=p[v];D[E]=D[y],yn(D)?D.splice(y,1):delete D[y]}else D[y]=tj(u[y],h,p,v+1);return D},ij=function(u,h,p){if(h.length!==p.length){o("copyWithRename() expects paths of the same length");return}else for(var v=0;v<p.length-1;v++)if(h[v]!==p[v]){o("copyWithRename() expects paths to be the same except for the deepest key");return}return tj(u,h,p,0)},nj=function(u,h,p,v){if(p>=h.length)return v;var y=h[p],D=yn(u)?u.slice():ei({},u);return D[y]=nj(u[y],h,p+1,v),D},sj=function(u,h,p){return nj(u,h,0,p)},gP=function(u,h){for(var p=u.memoizedState;p!==null&&h>0;)p=p.next,h--;return p};$$=function(u,h,p,v){var y=gP(u,h);if(y!==null){var D=sj(y.memoizedState,p,v);y.memoizedState=D,y.baseState=D,u.memoizedProps=ei({},u.memoizedProps);var E=ka(u,wi);E!==null&&ko(E,u,wi,ls)}},j$=function(u,h,p){var v=gP(u,h);if(v!==null){var y=ej(v.memoizedState,p);v.memoizedState=y,v.baseState=y,u.memoizedProps=ei({},u.memoizedProps);var D=ka(u,wi);D!==null&&ko(D,u,wi,ls)}},K$=function(u,h,p,v){var y=gP(u,h);if(y!==null){var D=ij(y.memoizedState,p,v);y.memoizedState=D,y.baseState=D,u.memoizedProps=ei({},u.memoizedProps);var E=ka(u,wi);E!==null&&ko(E,u,wi,ls)}},q$=function(u,h,p){u.pendingProps=sj(u.memoizedProps,h,p),u.alternate&&(u.alternate.pendingProps=u.pendingProps);var v=ka(u,wi);v!==null&&ko(v,u,wi,ls)},G$=function(u,h){u.pendingProps=ej(u.memoizedProps,h),u.alternate&&(u.alternate.pendingProps=u.pendingProps);var p=ka(u,wi);p!==null&&ko(p,u,wi,ls)},Y$=function(u,h,p){u.pendingProps=ij(u.memoizedProps,h,p),u.alternate&&(u.alternate.pendingProps=u.pendingProps);var v=ka(u,wi);v!==null&&ko(v,u,wi,ls)},Z$=function(u){var h=ka(u,wi);h!==null&&ko(h,u,wi,ls)},Q$=function(u){z$=u},X$=function(u){U$=u}}function ope(u){var h=AW(u);return h===null?null:h.stateNode}function rpe(u){return null}function ape(){return Dr}function lpe(u){var h=u.findFiberByHostInstance,p=t.ReactCurrentDispatcher;return kae({bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:$$,overrideHookStateDeletePath:j$,overrideHookStateRenamePath:K$,overrideProps:q$,overridePropsDeletePath:G$,overridePropsRenamePath:Y$,setErrorHandler:Q$,setSuspenseHandler:X$,scheduleUpdate:Z$,currentDispatcherRef:p,findHostInstanceByFiber:ope,findFiberByHostInstance:h||rpe,findHostInstancesForRefresh:Bge,scheduleRefresh:Pge,scheduleRoot:Fge,setRefreshHandler:Oge,getCurrentFiber:ape,reconcilerVersion:uP})}var oj=typeof reportError=="function"?reportError:function(u){console.error(u)};function pP(u){this._internalRoot=u}ZD.prototype.render=pP.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?r("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):QD(arguments[1])?r("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&r("You passed a second argument to root.render(...) but it only accepts one argument.");var p=h.containerInfo;if(p.nodeType!==io){var v=H$(h.current);v&&v.parentNode!==p&&r("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}Q1(u,h,null,null)},ZD.prototype.unmount=pP.prototype.unmount=function(){typeof arguments[0]=="function"&&r("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;_$()&&r("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),Jd(function(){Q1(null,u,null,null)}),sz(h)}};function cpe(u,h){if(!QD(u))throw new Error("createRoot(...): Target container is not a DOM element.");rj(u);var p=!1,v=!1,y="",D=oj;h!=null&&(h.hydrate?o("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof h=="object"&&h!==null&&h.$$typeof===Nt&&r(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(y=h.identifierPrefix),h.onRecoverableError!==void 0&&(D=h.onRecoverableError),h.transitionCallbacks!==void 0&&h.transitionCallbacks);var E=B$(u,jx,null,p,v,y,D);Bx(E.current,u);var N=u.nodeType===io?u.parentNode:u;return o1(N),new pP(E)}function ZD(u){this._internalRoot=u}function upe(u){u&&Dle(u)}ZD.prototype.unstable_scheduleHydration=upe;function dpe(u,h,p){if(!QD(u))throw new Error("hydrateRoot(...): Target container is not a DOM element.");rj(u),h===void 0&&r("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var v=p!=null?p:null,y=p!=null&&p.hydratedSources||null,D=!1,E=!1,N="",P=oj;p!=null&&(p.unstable_strictMode===!0&&(D=!0),p.identifierPrefix!==void 0&&(N=p.identifierPrefix),p.onRecoverableError!==void 0&&(P=p.onRecoverableError));var K=V$(h,null,u,jx,v,D,E,N,P);if(Bx(K.current,u),o1(u),y)for(var Z=0;Z<y.length;Z++){var fe=y[Z];bhe(K,fe)}return new ZD(K)}function QD(u){return!!(u&&(u.nodeType===xa||u.nodeType===Pd||u.nodeType===y2||!ce))}function X1(u){return!!(u&&(u.nodeType===xa||u.nodeType===Pd||u.nodeType===y2||u.nodeType===io&&u.nodeValue===" react-mount-point-unstable "))}function rj(u){u.nodeType===xa&&u.tagName&&u.tagName.toUpperCase()==="BODY"&&r("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),m1(u)&&(u._reactRootContainer?r("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):r("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var hpe=t.ReactCurrentOwner,aj;aj=function(u){if(u._reactRootContainer&&u.nodeType!==io){var h=H$(u._reactRootContainer.current);h&&h.parentNode!==u&&r("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var p=!!u._reactRootContainer,v=mP(u),y=!!(v&&Sf(v));y&&!p&&r("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),u.nodeType===xa&&u.tagName&&u.tagName.toUpperCase()==="BODY"&&r("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function mP(u){return u?u.nodeType===Pd?u.documentElement:u.firstChild:null}function lj(){}function fpe(u,h,p,v,y){if(y){if(typeof v=="function"){var D=v;v=function(){var he=YD(E);D.call(he)}}var E=V$(h,v,u,xf,null,!1,!1,"",lj);u._reactRootContainer=E,Bx(E.current,u);var N=u.nodeType===io?u.parentNode:u;return o1(N),Jd(),E}else{for(var P;P=u.lastChild;)u.removeChild(P);if(typeof v=="function"){var K=v;v=function(){var he=YD(Z);K.call(he)}}var Z=B$(u,xf,null,!1,!1,"",lj);u._reactRootContainer=Z,Bx(Z.current,u);var fe=u.nodeType===io?u.parentNode:u;return o1(fe),Jd(function(){Q1(h,Z,p,v)}),Z}}function gpe(u,h){u!==null&&typeof u!="function"&&r("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",h,u)}function XD(u,h,p,v,y){aj(p),gpe(y===void 0?null:y,"render");var D=p._reactRootContainer,E;if(!D)E=fpe(p,h,u,y,v);else{if(E=D,typeof y=="function"){var N=y;y=function(){var P=YD(E);N.call(P)}}Q1(h,E,u,y)}return YD(E)}function ppe(u){{var h=hpe.current;if(h!==null&&h.stateNode!==null){var p=h.stateNode._warnedAboutRefsInRender;p||r("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",Gi(h.type)||"A component"),h.stateNode._warnedAboutRefsInRender=!0}}return u==null?null:u.nodeType===xa?u:Jge(u,"findDOMNode")}function mpe(u,h,p){if(r("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!X1(h))throw new Error("Target container is not a DOM element.");{var v=m1(h)&&h._reactRootContainer===void 0;v&&r("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return XD(null,u,h,!0,p)}function _pe(u,h,p){if(r("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!X1(h))throw new Error("Target container is not a DOM element.");{var v=m1(h)&&h._reactRootContainer===void 0;v&&r("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return XD(null,u,h,!1,p)}function vpe(u,h,p,v){if(r("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!X1(p))throw new Error("Target container is not a DOM element.");if(u==null||!hae(u))throw new Error("parentComponent must be a valid React Component");return XD(u,h,p,!1,v)}function bpe(u){if(!X1(u))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var h=m1(u)&&u._reactRootContainer===void 0;h&&r("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(u._reactRootContainer){{var p=mP(u),v=p&&!Sf(p);v&&r("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return Jd(function(){XD(null,null,u,!1,function(){u._reactRootContainer=null,sz(u)})}),!0}else{{var y=mP(u),D=!!(y&&Sf(y)),E=u.nodeType===xa&&X1(u.parentNode)&&!!u.parentNode._reactRootContainer;D&&r("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",E?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}mle(epe),vle(tpe),ble(ipe),Cle(yc),wle(fle),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&r("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),tae(yue),sae(qO,dge,Jd);function Cpe(u,h){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!QD(h))throw new Error("Target container is not a DOM element.");return Xge(u,h,null,p)}function wpe(u,h,p,v){return vpe(u,h,p,v)}var _P={usingClientEntryPoint:!1,Events:[Sf,uv,Vx,wW,yW,qO]};function ype(u,h){return _P.usingClientEntryPoint||r('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),cpe(u,h)}function Spe(u,h,p){return _P.usingClientEntryPoint||r('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),dpe(u,h,p)}function Lpe(u){return _$()&&r("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),Jd(u)}var xpe=lpe({findFiberByHostInstance:xp,bundleType:1,version:uP,rendererPackageName:"react-dom"});if(!xpe&&Wt&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var cj=window.location.protocol;/^(https?|file):$/.test(cj)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(cj==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}ul.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_P,ul.createPortal=Cpe,ul.createRoot=ype,ul.findDOMNode=ppe,ul.flushSync=Lpe,ul.hydrate=mpe,ul.hydrateRoot=Spe,ul.render=_pe,ul.unmountComponentAtNode=bpe,ul.unstable_batchedUpdates=qO,ul.unstable_renderSubtreeIntoContainer=wpe,ul.version=uP,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})();(function(s){s.exports=ul})(vQ);var vP=vQ.exports;{var JD=vP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;ZF.createRoot=function(s,e){JD.usingClientEntryPoint=!0;try{return vP.createRoot(s,e)}finally{JD.usingClientEntryPoint=!1}},ZF.hydrateRoot=function(s,e,t){JD.usingClientEntryPoint=!0;try{return vP.hydrateRoot(s,e,t)}finally{JD.usingClientEntryPoint=!1}}}/**
 * @remix-run/router v1.0.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function As(){return As=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},As.apply(this,arguments)}var Io;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Io||(Io={}));const uj="popstate";function Rpe(s){s===void 0&&(s={});function e(n,o){let{pathname:r="/",search:a="",hash:l=""}=Ld(n.location.hash.substr(1));return Cm("",{pathname:r,search:a,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(n,o){let r=n.document.querySelector("base"),a="";if(r&&r.getAttribute("href")){let l=n.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof o=="string"?o:dc(o))}function i(n,o){Ape(n.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Ope(e,t,i,s)}function Ape(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Mpe(){return Math.random().toString(36).substr(2,8)}function dj(s){return{usr:s.state,key:s.key}}function Cm(s,e,t,i){return t===void 0&&(t=null),As({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?Ld(e):e,{state:t,key:e&&e.key||i||Mpe()})}function dc(s){let{pathname:e="/",search:t="",hash:i=""}=s;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ld(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substr(t),s=s.substr(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substr(i),s=s.substr(0,i)),s&&(e.pathname=s)}return e}function Ty(s){let e=typeof window<"u"&&typeof window.location<"u"&&window.location.origin!=="null"?window.location.origin:"unknown://unknown",t=typeof s=="string"?s:dc(s);return new URL(t,e)}function Ope(s,e,t,i){i===void 0&&(i={});let{window:n=document.defaultView,v5Compat:o=!1}=i,r=n.history,a=Io.Pop,l=null;function c(){a=Io.Pop,l&&l({action:a,location:g.location})}function d(m,_){a=Io.Push;let C=Cm(g.location,m,_);t&&t(C,m);let S=dj(C),x=g.createHref(C);try{r.pushState(S,"",x)}catch{n.location.assign(x)}o&&l&&l({action:a,location:g.location})}function f(m,_){a=Io.Replace;let C=Cm(g.location,m,_);t&&t(C,m);let S=dj(C),x=g.createHref(C);r.replaceState(S,"",x),o&&l&&l({action:a,location:g.location})}let g={get action(){return a},get location(){return s(n,r)},listen(m){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(uj,c),l=m,()=>{n.removeEventListener(uj,c),l=null}},createHref(m){return e(n,m)},encodeLocation(m){let _=Ty(dc(m));return As({},m,{pathname:_.pathname,search:_.search,hash:_.hash})},push:d,replace:f,go(m){return r.go(m)}};return g}var Cr;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Cr||(Cr={}));function Ppe(s){return s.index===!0}function wQ(s,e,t){return e===void 0&&(e=[]),t===void 0&&(t=new Set),s.map((i,n)=>{let o=[...e,n],r=typeof i.id=="string"?i.id:o.join("-");return Ui(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ui(!t.has(r),'Found a route id collision on id "'+r+`".  Route id's must be globally unique within Data Router usages`),t.add(r),Ppe(i)?As({},i,{id:r}):As({},i,{id:r,children:i.children?wQ(i.children,o,t):void 0})})}function Iw(s,e,t){t===void 0&&(t="/");let i=typeof e=="string"?Ld(e):e,n=SQ(i.pathname||"/",t);if(n==null)return null;let o=yQ(s);Fpe(o);let r=null;for(let a=0;r==null&&a<o.length;++a)r=Kpe(o[a],Zpe(n));return r}function yQ(s,e,t,i){return e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i=""),s.forEach((n,o)=>{let r={relativePath:n.path||"",caseSensitive:n.caseSensitive===!0,childrenIndex:o,route:n};r.relativePath.startsWith("/")&&(Ui(r.relativePath.startsWith(i),'Absolute route path "'+r.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),r.relativePath=r.relativePath.slice(i.length));let a=ld([i,r.relativePath]),l=t.concat(r);n.children&&n.children.length>0&&(Ui(n.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+a+'".')),yQ(n.children,e,l,a)),!(n.path==null&&!n.index)&&e.push({path:a,score:$pe(a,n.index),routesMeta:l})}),e}function Fpe(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:jpe(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const Bpe=/^:\w+$/,Vpe=3,Wpe=2,Hpe=1,zpe=10,Upe=-2,hj=s=>s==="*";function $pe(s,e){let t=s.split("/"),i=t.length;return t.some(hj)&&(i+=Upe),e&&(i+=Wpe),t.filter(n=>!hj(n)).reduce((n,o)=>n+(Bpe.test(o)?Vpe:o===""?Hpe:zpe),i)}function jpe(s,e){return s.length===e.length&&s.slice(0,-1).every((i,n)=>i===e[n])?s[s.length-1]-e[e.length-1]:0}function Kpe(s,e){let{routesMeta:t}=s,i={},n="/",o=[];for(let r=0;r<t.length;++r){let a=t[r],l=r===t.length-1,c=n==="/"?e:e.slice(n.length)||"/",d=Gpe({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(i,d.params);let f=a.route;o.push({params:i,pathname:ld([n,d.pathname]),pathnameBase:eme(ld([n,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(n=ld([n,d.pathnameBase]))}return o}function qpe(s,e){return e===void 0&&(e={}),s.replace(/:(\w+)/g,(t,i)=>(Ui(e[i]!=null,'Missing ":'+i+'" param'),e[i])).replace(/(\/?)\*/,(t,i,n,o)=>{const r="*";return e[r]==null?o==="/*"?"/":"":""+i+e[r]})}function Gpe(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=Ype(s.path,s.caseSensitive,s.end),n=e.match(t);if(!n)return null;let o=n[0],r=o.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:i.reduce((c,d,f)=>{if(d==="*"){let g=a[f]||"";r=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}return c[d]=Qpe(a[f]||"",d),c},{}),pathname:o,pathnameBase:r,pattern:s}}function Ype(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Tg(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let i=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(r,a)=>(i.push(a),"([^\\/]+)"));return s.endsWith("*")?(i.push("*"),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),i]}function Zpe(s){try{return decodeURI(s)}catch(e){return Tg(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function Qpe(s,e){try{return decodeURIComponent(s)}catch(t){return Tg(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+s+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),s}}function SQ(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}function Ui(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Tg(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Xpe(s,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:n=""}=typeof s=="string"?Ld(s):s;return{pathname:t?t.startsWith("/")?t:Jpe(t,e):e,search:tme(i),hash:ime(n)}}function Jpe(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function bP(s,e,t,i){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aN(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function T8(s,e,t,i){i===void 0&&(i=!1);let n;typeof s=="string"?n=Ld(s):(n=As({},s),Ui(!n.pathname||!n.pathname.includes("?"),bP("?","pathname","search",n)),Ui(!n.pathname||!n.pathname.includes("#"),bP("#","pathname","hash",n)),Ui(!n.search||!n.search.includes("#"),bP("#","search","hash",n)));let o=s===""||n.pathname==="",r=o?"/":n.pathname,a;if(i||r==null)a=t;else{let f=e.length-1;if(r.startsWith("..")){let g=r.split("/");for(;g[0]==="..";)g.shift(),f-=1;n.pathname=g.join("/")}a=f>=0?e[f]:"/"}let l=Xpe(n,a),c=r&&r!=="/"&&r.endsWith("/"),d=(o||r===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ld=s=>s.join("/").replace(/\/\/+/g,"/"),eme=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),tme=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,ime=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;class fj extends Error{}class nme{constructor(e){this.pendingKeys=new Set,this.subscriber=void 0,Ui(e&&typeof e=="object"&&!Array.isArray(e),"defer() only accepts plain objects");let t;this.abortPromise=new Promise((n,o)=>t=o),this.controller=new AbortController;let i=()=>t(new fj("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(e).reduce((n,o)=>{let[r,a]=o;return Object.assign(n,{[r]:this.trackPromise(r,a)})},{})}trackPromise(e,t){if(!(t instanceof Promise))return t;this.pendingKeys.add(e);let i=Promise.race([t,this.abortPromise]).then(n=>this.onSettle(i,e,null,n),n=>this.onSettle(i,e,n));return i.catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),i}onSettle(e,t,i,n){if(this.controller.signal.aborted&&i instanceof fj)return this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:()=>i}),Promise.reject(i);this.pendingKeys.delete(t),this.done&&this.unlistenAbortSignal();const o=this.subscriber;return i?(Object.defineProperty(e,"_error",{get:()=>i}),o&&o(!1),Promise.reject(i)):(Object.defineProperty(e,"_data",{get:()=>n}),o&&o(!1),n)}subscribe(e){this.subscriber=e}cancel(){this.controller.abort(),this.pendingKeys.forEach((t,i)=>this.pendingKeys.delete(i));let e=this.subscriber;e&&e(!0)}async resolveData(e){let t=!1;if(!this.done){let i=()=>this.cancel();e.addEventListener("abort",i),t=await new Promise(n=>{this.subscribe(o=>{e.removeEventListener("abort",i),(o||this.done)&&n(o)})})}return t}get done(){return this.pendingKeys.size===0}get unwrappedData(){return Ui(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((e,t)=>{let[i,n]=t;return Object.assign(e,{[i]:ome(n)})},{})}}function sme(s){return s instanceof Promise&&s._tracked===!0}function ome(s){if(!sme(s))return s;if(s._error)throw s._error;return s._data}class X0{constructor(e,t,i){this.status=e,this.statusText=t||"",this.data=i}}function LQ(s){return s instanceof X0}const CP={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},rme={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},ame=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lme=!ame;function cme(s){Ui(s.routes.length>0,"You must provide a non-empty routes array to createRouter");let e=wQ(s.routes),t=null,i=new Set,n=null,o=null,r=null,a=!1,l=Iw(e,s.history.location,s.basename),c=null;if(l==null){let{matches:Ie,route:Xe,error:ee}=vj(e);l=Ie,c={[Xe.id]:ee}}let d=!l.some(Ie=>Ie.route.loader)||s.hydrationData!=null,f,g={historyAction:s.history.action,location:s.history.location,matches:l,initialized:d,navigation:CP,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:s.hydrationData&&s.hydrationData.loaderData||{},actionData:s.hydrationData&&s.hydrationData.actionData||null,errors:s.hydrationData&&s.hydrationData.errors||c,fetchers:new Map},m=Io.Pop,_=!1,C,S=!1,x=!1,L=[],k=[],T=new Map,A=0,O=-1,I=new Map,R=new Set,B=new Map,z=new Map;function q(){return t=s.history.listen(Ie=>{let{action:Xe,location:ee}=Ie;return ke(Xe,ee)}),g.initialized||ke(Io.Pop,g.location),f}function te(){t&&t(),i.clear(),C&&C.abort(),g.fetchers.forEach((Ie,Xe)=>bt(Xe))}function U(Ie){return i.add(Ie),()=>i.delete(Ie)}function X(Ie){g=As({},g,Ie),i.forEach(Xe=>Xe(g))}function le(Ie,Xe){var ee;let ie=g.actionData!=null&&g.navigation.formMethod!=null&&g.navigation.state==="loading"&&((ee=g.navigation.formAction)==null?void 0:ee.split("?")[0])===Ie.pathname,ne=Xe.loaderData?{loaderData:yP(g.loaderData,Xe.loaderData,Xe.matches||[])}:{};X(As({},ie?{}:{actionData:null},Xe,ne,{historyAction:m,location:Ie,initialized:!0,navigation:CP,revalidation:"idle",restoreScrollPosition:g.navigation.formData?!1:Pt(Ie,Xe.matches||g.matches),preventScrollReset:_})),S||m===Io.Pop||(m===Io.Push?s.history.push(Ie,Ie.state):m===Io.Replace&&s.history.replace(Ie,Ie.state)),m=Io.Pop,_=!1,S=!1,x=!1,L=[],k=[]}async function be(Ie,Xe){if(typeof Ie=="number"){s.history.go(Ie);return}let{path:ee,submission:ie,error:ne}=gj(Ie,Xe),V=Cm(g.location,ee,Xe&&Xe.state);V=s.history.encodeLocation(V);let W=(Xe&&Xe.replace)===!0||ie!=null?Io.Replace:Io.Push,Q=Xe&&"preventScrollReset"in Xe?Xe.preventScrollReset===!0:void 0;return await ke(W,V,{submission:ie,pendingError:ne,preventScrollReset:Q,replace:Xe&&Xe.replace})}function pe(){if(Vt(),X({revalidation:"loading"}),g.navigation.state!=="submitting"){if(g.navigation.state==="idle"){ke(g.historyAction,g.location,{startUninterruptedRevalidation:!0});return}ke(m||g.historyAction,g.navigation.location,{overrideNavigation:g.navigation})}}async function ke(Ie,Xe,ee){C&&C.abort(),C=null,m=Ie,S=(ee&&ee.startUninterruptedRevalidation)===!0,ai(g.location,g.matches),_=(ee&&ee.preventScrollReset)===!0;let ie=ee&&ee.overrideNavigation,ne=Iw(e,Xe,s.basename);if(!ne){let{matches:rt,route:lt,error:Re}=vj(e);Kt(),le(Xe,{matches:rt,loaderData:{},errors:{[lt.id]:Re}});return}if(pme(g.location,Xe)){le(Xe,{matches:ne});return}C=new AbortController;let V=tw(Xe,C.signal,ee&&ee.submission),W,Q;if(ee&&ee.pendingError)Q={[gb(ne).route.id]:ee.pendingError};else if(ee&&ee.submission){let rt=await He(V,Xe,ee.submission,ne,{replace:ee.replace});if(rt.shortCircuited)return;W=rt.pendingActionData,Q=rt.pendingActionError,ie=As({state:"loading",location:Xe},ee.submission)}let{shortCircuited:Y,loaderData:de,errors:ve}=await Ge(V,Xe,ne,ie,ee&&ee.submission,ee&&ee.replace,W,Q);Y||(C=null,le(Xe,{matches:ne,loaderData:de,errors:ve}))}async function He(Ie,Xe,ee,ie,ne){Vt();let V=As({state:"submitting",location:Xe},ee);X({navigation:V});let W,Q=Sj(ie,Xe);if(!Q.route.action)W=bj(Xe);else if(W=await ew("action",Ie,Q,ie,f.basename),Ie.signal.aborted)return{shortCircuited:!0};if(Bb(W)){let Y=As({state:"loading",location:Cm(g.location,W.location)},ee);return await tt(W,Y,ne&&ne.replace),{shortCircuited:!0}}if(Qw(W)){let Y=gb(ie,Q.route.id);return(ne&&ne.replace)!==!0&&(m=Io.Push),{pendingActionError:{[Y.route.id]:W.error}}}if(cm(W))throw new Error("defer() is not supported in actions");return{pendingActionData:{[Q.route.id]:W.data}}}async function Ge(Ie,Xe,ee,ie,ne,V,W,Q){let Y=ie;Y||(Y={state:"loading",location:Xe,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0});let[de,ve]=pj(g,ee,ne,Xe,x,L,k,W,Q,B);if(Kt(Mt=>!(ee&&ee.some(Ot=>Ot.route.id===Mt))||de&&de.some(Ot=>Ot.route.id===Mt)),de.length===0&&ve.length===0)return le(Xe,{matches:ee,loaderData:yP(g.loaderData,{},ee),errors:Q||null,actionData:W||null}),{shortCircuited:!0};S||(ve.forEach(Mt=>{let[Ot]=Mt,Mi=g.fetchers.get(Ot),zt={state:"loading",data:Mi&&Mi.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};g.fetchers.set(Ot,zt)}),X(As({navigation:Y,actionData:W||g.actionData||null},ve.length>0?{fetchers:new Map(g.fetchers)}:{}))),O=++A,ve.forEach(Mt=>{let[Ot]=Mt;return T.set(Ot,C)});let{results:rt,loaderResults:lt,fetcherResults:Re}=await _e(g.matches,ee,de,ve,Ie);if(Ie.signal.aborted)return{shortCircuited:!0};ve.forEach(Mt=>{let[Ot]=Mt;return T.delete(Ot)});let Ye=Cj(rt);if(Ye){let Mt=wP(g,Ye);return await tt(Ye,Mt,V),{shortCircuited:!0}}let{loaderData:wt,errors:Ct}=_j(g,ee,de,lt,Q,ve,Re,z);z.forEach((Mt,Ot)=>{Mt.subscribe(Mi=>{(Mi||Mt.done)&&z.delete(Ot)})}),Fe();let Qe=Wt(O);return As({loaderData:wt,errors:Ct},Qe||ve.length>0?{fetchers:new Map(g.fetchers)}:{})}function Ue(Ie){return g.fetchers.get(Ie)||rme}function ce(Ie,Xe,ee,ie){if(lme)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");T.has(Ie)&&mt(Ie);let ne=Iw(e,ee,s.basename);if(!ne){Ne(Ie,Xe,new X0(404,"Not Found",null));return}let{path:V,submission:W}=gj(ee,ie,!0),Q=Sj(ne,V);if(W){ue(Ie,Xe,V,Q,ne,W);return}B.set(Ie,[V,Q,ne]),$e(Ie,Xe,V,Q,ne)}async function ue(Ie,Xe,ee,ie,ne,V){if(Vt(),B.delete(Ie),!ie.route.action){let{error:un}=bj(ee);Ne(Ie,Xe,un);return}let W=g.fetchers.get(Ie),Q=As({state:"submitting"},V,{data:W&&W.data});g.fetchers.set(Ie,Q),X({fetchers:new Map(g.fetchers)});let Y=new AbortController,de=tw(ee,Y.signal,V);T.set(Ie,Y);let ve=await ew("action",de,ie,ne,f.basename);if(de.signal.aborted){T.get(Ie)===Y&&T.delete(Ie);return}if(Bb(ve)){T.delete(Ie),R.add(Ie);let un=As({state:"loading"},V,{data:void 0});g.fetchers.set(Ie,un),X({fetchers:new Map(g.fetchers)});let Qn=As({state:"loading",location:Cm(g.location,ve.location)},V);await tt(ve,Qn);return}if(Qw(ve)){Ne(Ie,Xe,ve.error);return}cm(ve)&&Ui(!1,"defer() is not supported in actions");let rt=g.navigation.location||g.location,lt=tw(rt,Y.signal),Re=g.navigation.state!=="idle"?Iw(e,g.navigation.location,s.basename):g.matches;Ui(Re,"Didn't find any matches after fetcher action");let Ye=++A;I.set(Ie,Ye);let wt=As({state:"loading",data:ve.data},V);g.fetchers.set(Ie,wt);let[Ct,Qe]=pj(g,Re,V,rt,x,L,k,{[ie.route.id]:ve.data},void 0,B);Qe.filter(un=>{let[Qn]=un;return Qn!==Ie}).forEach(un=>{let[Qn]=un,Zs=g.fetchers.get(Qn),Uo={state:"loading",data:Zs&&Zs.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};g.fetchers.set(Qn,Uo),T.set(Qn,Y)}),X({fetchers:new Map(g.fetchers)});let{results:Mt,loaderResults:Ot,fetcherResults:Mi}=await _e(g.matches,Re,Ct,Qe,lt);if(Y.signal.aborted)return;I.delete(Ie),T.delete(Ie),Qe.forEach(un=>{let[Qn]=un;return T.delete(Qn)});let zt=Cj(Mt);if(zt){let un=wP(g,zt);await tt(zt,un);return}let{loaderData:Fi,errors:Wi}=_j(g,g.matches,Ct,Ot,void 0,Qe,Mi,z),Ti={state:"idle",data:ve.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};g.fetchers.set(Ie,Ti);let rs=Wt(Ye);g.navigation.state==="loading"&&Ye>O?(Ui(m,"Expected pending action"),C&&C.abort(),le(g.navigation.location,{matches:Re,loaderData:Fi,errors:Wi,fetchers:new Map(g.fetchers)})):(X(As({errors:Wi,loaderData:yP(g.loaderData,Fi,Re)},rs?{fetchers:new Map(g.fetchers)}:{})),x=!1)}async function $e(Ie,Xe,ee,ie,ne){let V=g.fetchers.get(Ie),W={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:V&&V.data};g.fetchers.set(Ie,W),X({fetchers:new Map(g.fetchers)});let Q=new AbortController,Y=tw(ee,Q.signal);T.set(Ie,Q);let de=await ew("loader",Y,ie,ne,f.basename);if(cm(de)&&(de=await EQ(de,Y.signal,!0)||de),T.get(Ie)===Q&&T.delete(Ie),Y.signal.aborted)return;if(Bb(de)){let rt=wP(g,de);await tt(de,rt);return}if(Qw(de)){let rt=gb(g.matches,Xe);g.fetchers.delete(Ie),X({fetchers:new Map(g.fetchers),errors:{[rt.route.id]:de.error}});return}Ui(!cm(de),"Unhandled fetcher deferred data");let ve={state:"idle",data:de.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};g.fetchers.set(Ie,ve),X({fetchers:new Map(g.fetchers)})}async function tt(Ie,Xe,ee){Ie.revalidate&&(x=!0),Ui(Xe.location,"Expected a location on the redirect navigation"),C=null;let ie=ee===!0?Io.Replace:Io.Push;await ke(ie,Xe.location,{overrideNavigation:Xe})}async function _e(Ie,Xe,ee,ie,ne){let V=await Promise.all([...ee.map(Y=>ew("loader",ne,Y,Xe,f.basename)),...ie.map(Y=>{let[,de,ve,rt]=Y;return ew("loader",tw(de,ne.signal),ve,rt,f.basename)})]),W=V.slice(0,ee.length),Q=V.slice(ee.length);return await Promise.all([wj(Ie,ee,W,ne.signal,!1,g.loaderData),wj(Ie,ie.map(Y=>{let[,,de]=Y;return de}),Q,ne.signal,!0)]),{results:V,loaderResults:W,fetcherResults:Q}}function Vt(){x=!0,L.push(...Kt()),B.forEach((Ie,Xe)=>{T.has(Xe)&&(k.push(Xe),mt(Xe))})}function Ne(Ie,Xe,ee){let ie=gb(g.matches,Xe);bt(Ie),X({errors:{[ie.route.id]:ee},fetchers:new Map(g.fetchers)})}function bt(Ie){T.has(Ie)&&mt(Ie),B.delete(Ie),I.delete(Ie),R.delete(Ie),g.fetchers.delete(Ie)}function mt(Ie){let Xe=T.get(Ie);Ui(Xe,"Expected fetch controller: "+Ie),Xe.abort(),T.delete(Ie)}function qe(Ie){for(let Xe of Ie){let ie={state:"idle",data:Ue(Xe).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};g.fetchers.set(Xe,ie)}}function Fe(){let Ie=[];for(let Xe of R){let ee=g.fetchers.get(Xe);Ui(ee,"Expected fetcher: "+Xe),ee.state==="loading"&&(R.delete(Xe),Ie.push(Xe))}qe(Ie)}function Wt(Ie){let Xe=[];for(let[ee,ie]of I)if(ie<Ie){let ne=g.fetchers.get(ee);Ui(ne,"Expected fetcher: "+ee),ne.state==="loading"&&(mt(ee),I.delete(ee),Xe.push(ee))}return qe(Xe),Xe.length>0}function Kt(Ie){let Xe=[];return z.forEach((ee,ie)=>{(!Ie||Ie(ie))&&(ee.cancel(),Xe.push(ie),z.delete(ie))}),Xe}function It(Ie,Xe,ee){if(n=Ie,r=Xe,o=ee||(ie=>ie.key),!a&&g.navigation===CP){a=!0;let ie=Pt(g.location,g.matches);ie!=null&&X({restoreScrollPosition:ie})}return()=>{n=null,r=null,o=null}}function ai(Ie,Xe){if(n&&o&&r){let ee=Xe.map(ne=>yj(ne,g.loaderData)),ie=o(Ie,ee)||Ie.key;n[ie]=r()}}function Pt(Ie,Xe){if(n&&o&&r){let ee=Xe.map(V=>yj(V,g.loaderData)),ie=o(Ie,ee)||Ie.key,ne=n[ie];if(typeof ne=="number")return ne}return null}return f={get basename(){return s.basename},get state(){return g},get routes(){return e},initialize:q,subscribe:U,enableScrollRestoration:It,navigate:be,fetch:ce,revalidate:pe,createHref:Ie=>s.history.createHref(Ie),getFetcher:Ue,deleteFetcher:bt,dispose:te,_internalFetchControllers:T,_internalActiveDeferreds:z},f}const ume=new Set(["POST","PUT","PATCH","DELETE"]);[...ume];function gj(s,e,t){t===void 0&&(t=!1);let i=typeof s=="string"?s:dc(s);if(!e||!("formMethod"in e)&&!("formData"in e))return{path:i};if(e.formMethod!=null&&e.formMethod!=="get")return{path:i,submission:{formMethod:e.formMethod,formAction:kQ(i),formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:e.formData}};if(!e.formData)return{path:i};let n=Ld(i);try{let o=DQ(e.formData);t&&n.search&&TQ(n.search)&&o.append("index",""),n.search="?"+o}catch{return{path:i,error:new X0(400,"Bad Request","Cannot submit binary form data using GET")}}return{path:dc(n)}}function wP(s,e){let{formMethod:t,formAction:i,formEncType:n,formData:o}=s.navigation;return{state:"loading",location:Cm(s.location,e.location),formMethod:t||void 0,formAction:i||void 0,formEncType:n||void 0,formData:o||void 0}}function dme(s,e){let t=s;if(e){let i=s.findIndex(n=>n.route.id===e);i>=0&&(t=s.slice(0,i))}return t}function pj(s,e,t,i,n,o,r,a,l,c){let d=l?Object.values(l)[0]:a?Object.values(a)[0]:null,f=l?Object.keys(l)[0]:void 0,m=dme(e,f).filter((C,S)=>C.route.loader!=null&&(hme(s.loaderData,s.matches[S],C)||o.some(x=>x===C.route.id)||mj(s.location,s.matches[S],t,i,C,n,d))),_=[];return c&&c.forEach((C,S)=>{let[x,L,k]=C;r.includes(S)?_.push([S,x,L,k]):n&&mj(x,L,t,x,L,n,d)&&_.push([S,x,L,k])}),[m,_]}function hme(s,e,t){let i=!e||t.route.id!==e.route.id,n=s[t.route.id]===void 0;return i||n}function xQ(s,e){let t=s.route.path;return s.pathname!==e.pathname||t&&t.endsWith("*")&&s.params["*"]!==e.params["*"]}function mj(s,e,t,i,n,o,r){let a=Ty(s),l=e.params,c=Ty(i),d=n.params,f=xQ(e,n)||a.toString()===c.toString()||a.search!==c.search||o;if(n.route.shouldRevalidate){let g=n.route.shouldRevalidate(As({currentUrl:a,currentParams:l,nextUrl:c,nextParams:d},t,{actionResult:r,defaultShouldRevalidate:f}));if(typeof g=="boolean")return g}return f}async function ew(s,e,t,i,n,o,r){o===void 0&&(o=!1),r===void 0&&(r=!1);let a,l,c,d=new Promise((g,m)=>c=m),f=()=>c();e.signal.addEventListener("abort",f);try{let g=t.route[s];Ui(g,"Could not find the "+s+' to run on the "'+t.route.id+'" route'),l=await Promise.race([g({request:e,params:t.params}),d])}catch(g){a=Cr.error,l=g}finally{e.signal.removeEventListener("abort",f)}if(l instanceof Response){let g=l.status;if(g>=300&&g<=399){let C=l.headers.get("Location");Ui(C,"Redirects returned/thrown from loaders/actions must have a Location header");let S=i.slice(0,i.indexOf(t)+1),x=aN(S).map(T=>T.pathnameBase),L=Ty(e.url).pathname,k=T8(C,x,L);if(Ui(dc(k),"Unable to resolve redirect location: "+l.headers.get("Location")),n){let T=k.pathname;k.pathname=T==="/"?n:ld([n,T])}if(C=dc(k),o)throw l.headers.set("Location",C),l;return{type:Cr.redirect,status:g,location:C,revalidate:l.headers.get("X-Remix-Revalidate")!==null}}if(r)throw{type:a||Cr.data,response:l};let m,_=l.headers.get("Content-Type");return _&&_.startsWith("application/json")?m=await l.json():m=await l.text(),a===Cr.error?{type:a,error:new X0(g,l.statusText,m),headers:l.headers}:{type:Cr.data,data:m,statusCode:l.status,headers:l.headers}}return a===Cr.error?{type:a,error:l}:l instanceof nme?{type:Cr.deferred,deferredData:l}:{type:Cr.data,data:l}}function tw(s,e,t){let i=Ty(kQ(s)).toString(),n={signal:e};if(t){let{formMethod:o,formEncType:r,formData:a}=t;n.method=o.toUpperCase(),n.body=r==="application/x-www-form-urlencoded"?DQ(a):a}return new Request(i,n)}function DQ(s){let e=new URLSearchParams;for(let[t,i]of s.entries())Ui(typeof i=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),e.append(t,i);return e}function fme(s,e,t,i,n){let o={},r=null,a,l=!1,c={};return t.forEach((d,f)=>{let g=e[f].route.id;if(Ui(!Bb(d),"Cannot handle redirect results in processLoaderData"),Qw(d)){let m=gb(s,g),_=d.error;i&&(_=Object.values(i)[0],i=void 0),r=Object.assign(r||{},{[m.route.id]:_}),l||(l=!0,a=LQ(d.error)?d.error.status:500),d.headers&&(c[g]=d.headers)}else cm(d)?(n&&n.set(g,d.deferredData),o[g]=d.deferredData.data):(o[g]=d.data,d.statusCode!=null&&d.statusCode!==200&&!l&&(a=d.statusCode),d.headers&&(c[g]=d.headers))}),i&&(r=i),{loaderData:o,errors:r,statusCode:a||200,loaderHeaders:c}}function _j(s,e,t,i,n,o,r,a){let{loaderData:l,errors:c}=fme(e,t,i,n,a);for(let d=0;d<o.length;d++){let[f,,g]=o[d];Ui(r!==void 0&&r[d]!==void 0,"Did not find corresponding fetcher result");let m=r[d];if(Qw(m)){let _=gb(s.matches,g.route.id);c&&c[_.route.id]||(c=As({},c,{[_.route.id]:m.error})),s.fetchers.delete(f)}else{if(Bb(m))throw new Error("Unhandled fetcher revalidation redirect");if(cm(m))throw new Error("Unhandled fetcher deferred data");{let _={state:"idle",data:m.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};s.fetchers.set(f,_)}}}return{loaderData:l,errors:c}}function yP(s,e,t){let i=As({},e);return t.forEach(n=>{let o=n.route.id;e[o]===void 0&&s[o]!==void 0&&(i[o]=s[o])}),i}function gb(s,e){return(e?s.slice(0,s.findIndex(i=>i.route.id===e)+1):[...s]).reverse().find(i=>i.route.hasErrorBoundary===!0)||s[0]}function gme(s,e,t){let i=s.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-"+e+"-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:i}],route:i,error:new X0(e,t,null)}}function vj(s){return gme(s,404,"Not Found")}function bj(s){let e=typeof s=="string"?s:dc(s);return console.warn("You're trying to submit to a route that does not have an action.  To fix this, please add an `action` function to the route for "+("["+e+"]")),{type:Cr.error,error:new X0(405,"Method Not Allowed","")}}function Cj(s){for(let e=s.length-1;e>=0;e--){let t=s[e];if(Bb(t))return t}}function kQ(s){let e=typeof s=="string"?Ld(s):s;return dc(As({},e,{hash:""}))}function pme(s,e){return s.pathname===e.pathname&&s.search===e.search&&s.hash!==e.hash}function cm(s){return s.type===Cr.deferred}function Qw(s){return s.type===Cr.error}function Bb(s){return(s&&s.type)===Cr.redirect}async function wj(s,e,t,i,n,o){for(let r=0;r<t.length;r++){let a=t[r],l=e[r],c=s.find(f=>f.route.id===l.route.id),d=c!=null&&!xQ(c,l)&&(o&&o[l.route.id])!==void 0;cm(a)&&(n||d)&&await EQ(a,i,n).then(f=>{f&&(t[r]=f||t[r])})}}async function EQ(s,e,t){if(t===void 0&&(t=!1),!await s.deferredData.resolveData(e)){if(t)try{return{type:Cr.data,data:s.deferredData.unwrappedData}}catch(n){return{type:Cr.error,error:n}}return{type:Cr.data,data:s.deferredData.data}}}function TQ(s){return new URLSearchParams(s).getAll("index").some(e=>e==="")}function yj(s,e){let{route:t,pathname:i,params:n}=s;return{id:t.id,pathname:i,params:n,data:e[t.id],handle:t.handle}}function Sj(s,e){let t=typeof e=="string"?Ld(e).search:e.search;if(s[s.length-1].route.index&&TQ(t||""))return s[s.length-1];let i=aN(s);return i[i.length-1]}var I8={exports:{}},QF={};/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var s=ye.exports,e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),_=Symbol.iterator,C="@@iterator";function S(H){if(H===null||typeof H!="object")return null;var me=_&&H[_]||H[C];return typeof me=="function"?me:null}var x=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function L(H){{for(var me=arguments.length,Me=new Array(me>1?me-1:0),_t=1;_t<me;_t++)Me[_t-1]=arguments[_t];k("error",H,Me)}}function k(H,me,Me){{var _t=x.ReactDebugCurrentFrame,Jt=_t.getStackAddendum();Jt!==""&&(me+="%s",Me=Me.concat([Jt]));var oi=Me.map(function(Lt){return String(Lt)});oi.unshift("Warning: "+me),Function.prototype.apply.call(console[H],console,oi)}}var T=!1,A=!1,O=!1,I=!1,R=!1,B;B=Symbol.for("react.module.reference");function z(H){return!!(typeof H=="string"||typeof H=="function"||H===i||H===o||R||H===n||H===c||H===d||I||H===m||T||A||O||typeof H=="object"&&H!==null&&(H.$$typeof===g||H.$$typeof===f||H.$$typeof===r||H.$$typeof===a||H.$$typeof===l||H.$$typeof===B||H.getModuleId!==void 0))}function q(H,me,Me){var _t=H.displayName;if(_t)return _t;var Jt=me.displayName||me.name||"";return Jt!==""?Me+"("+Jt+")":Me}function te(H){return H.displayName||"Context"}function U(H){if(H==null)return null;if(typeof H.tag=="number"&&L("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof H=="function")return H.displayName||H.name||null;if(typeof H=="string")return H;switch(H){case i:return"Fragment";case t:return"Portal";case o:return"Profiler";case n:return"StrictMode";case c:return"Suspense";case d:return"SuspenseList"}if(typeof H=="object")switch(H.$$typeof){case a:var me=H;return te(me)+".Consumer";case r:var Me=H;return te(Me._context)+".Provider";case l:return q(H,H.render,"ForwardRef");case f:var _t=H.displayName||null;return _t!==null?_t:U(H.type)||"Memo";case g:{var Jt=H,oi=Jt._payload,Lt=Jt._init;try{return U(Lt(oi))}catch{return null}}}return null}var X=Object.assign,le=0,be,pe,ke,He,Ge,Ue,ce;function ue(){}ue.__reactDisabledLog=!0;function $e(){{if(le===0){be=console.log,pe=console.info,ke=console.warn,He=console.error,Ge=console.group,Ue=console.groupCollapsed,ce=console.groupEnd;var H={configurable:!0,enumerable:!0,value:ue,writable:!0};Object.defineProperties(console,{info:H,log:H,warn:H,error:H,group:H,groupCollapsed:H,groupEnd:H})}le++}}function tt(){{if(le--,le===0){var H={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:X({},H,{value:be}),info:X({},H,{value:pe}),warn:X({},H,{value:ke}),error:X({},H,{value:He}),group:X({},H,{value:Ge}),groupCollapsed:X({},H,{value:Ue}),groupEnd:X({},H,{value:ce})})}le<0&&L("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var _e=x.ReactCurrentDispatcher,Vt;function Ne(H,me,Me){{if(Vt===void 0)try{throw Error()}catch(Jt){var _t=Jt.stack.trim().match(/\n( *(at )?)/);Vt=_t&&_t[1]||""}return`
`+Vt+H}}var bt=!1,mt;{var qe=typeof WeakMap=="function"?WeakMap:Map;mt=new qe}function Fe(H,me){if(!H||bt)return"";{var Me=mt.get(H);if(Me!==void 0)return Me}var _t;bt=!0;var Jt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var oi;oi=_e.current,_e.current=null,$e();try{if(me){var Lt=function(){throw Error()};if(Object.defineProperty(Lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Lt,[])}catch(ji){_t=ji}Reflect.construct(H,[],Lt)}else{try{Lt.call()}catch(ji){_t=ji}H.call(Lt.prototype)}}else{try{throw Error()}catch(ji){_t=ji}H()}}catch(ji){if(ji&&_t&&typeof ji.stack=="string"){for(var Qt=ji.stack.split(`
`),Tn=_t.stack.split(`
`),hn=Qt.length-1,ae=Tn.length-1;hn>=1&&ae>=0&&Qt[hn]!==Tn[ae];)ae--;for(;hn>=1&&ae>=0;hn--,ae--)if(Qt[hn]!==Tn[ae]){if(hn!==1||ae!==1)do if(hn--,ae--,ae<0||Qt[hn]!==Tn[ae]){var xe=`
`+Qt[hn].replace(" at new "," at ");return H.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",H.displayName)),typeof H=="function"&&mt.set(H,xe),xe}while(hn>=1&&ae>=0);break}}}finally{bt=!1,_e.current=oi,tt(),Error.prepareStackTrace=Jt}var dt=H?H.displayName||H.name:"",Ht=dt?Ne(dt):"";return typeof H=="function"&&mt.set(H,Ht),Ht}function Wt(H,me,Me){return Fe(H,!1)}function Kt(H){var me=H.prototype;return!!(me&&me.isReactComponent)}function It(H,me,Me){if(H==null)return"";if(typeof H=="function")return Fe(H,Kt(H));if(typeof H=="string")return Ne(H);switch(H){case c:return Ne("Suspense");case d:return Ne("SuspenseList")}if(typeof H=="object")switch(H.$$typeof){case l:return Wt(H.render);case f:return It(H.type,me,Me);case g:{var _t=H,Jt=_t._payload,oi=_t._init;try{return It(oi(Jt),me,Me)}catch{}}}return""}var ai=Object.prototype.hasOwnProperty,Pt={},Ie=x.ReactDebugCurrentFrame;function Xe(H){if(H){var me=H._owner,Me=It(H.type,H._source,me?me.type:null);Ie.setExtraStackFrame(Me)}else Ie.setExtraStackFrame(null)}function ee(H,me,Me,_t,Jt){{var oi=Function.call.bind(ai);for(var Lt in H)if(oi(H,Lt)){var Qt=void 0;try{if(typeof H[Lt]!="function"){var Tn=Error((_t||"React class")+": "+Me+" type `"+Lt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof H[Lt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Tn.name="Invariant Violation",Tn}Qt=H[Lt](me,Lt,_t,Me,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(hn){Qt=hn}Qt&&!(Qt instanceof Error)&&(Xe(Jt),L("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",_t||"React class",Me,Lt,typeof Qt),Xe(null)),Qt instanceof Error&&!(Qt.message in Pt)&&(Pt[Qt.message]=!0,Xe(Jt),L("Failed %s type: %s",Me,Qt.message),Xe(null))}}}var ie=Array.isArray;function ne(H){return ie(H)}function V(H){{var me=typeof Symbol=="function"&&Symbol.toStringTag,Me=me&&H[Symbol.toStringTag]||H.constructor.name||"Object";return Me}}function W(H){try{return Q(H),!1}catch{return!0}}function Q(H){return""+H}function Y(H){if(W(H))return L("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",V(H)),Q(H)}var de=x.ReactCurrentOwner,ve={key:!0,ref:!0,__self:!0,__source:!0},rt,lt,Re;Re={};function Ye(H){if(ai.call(H,"ref")){var me=Object.getOwnPropertyDescriptor(H,"ref").get;if(me&&me.isReactWarning)return!1}return H.ref!==void 0}function wt(H){if(ai.call(H,"key")){var me=Object.getOwnPropertyDescriptor(H,"key").get;if(me&&me.isReactWarning)return!1}return H.key!==void 0}function Ct(H,me){if(typeof H.ref=="string"&&de.current&&me&&de.current.stateNode!==me){var Me=U(de.current.type);Re[Me]||(L('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',U(de.current.type),H.ref),Re[Me]=!0)}}function Qe(H,me){{var Me=function(){rt||(rt=!0,L("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",me))};Me.isReactWarning=!0,Object.defineProperty(H,"key",{get:Me,configurable:!0})}}function Mt(H,me){{var Me=function(){lt||(lt=!0,L("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",me))};Me.isReactWarning=!0,Object.defineProperty(H,"ref",{get:Me,configurable:!0})}}var Ot=function(H,me,Me,_t,Jt,oi,Lt){var Qt={$$typeof:e,type:H,key:me,ref:Me,props:Lt,_owner:oi};return Qt._store={},Object.defineProperty(Qt._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Qt,"_self",{configurable:!1,enumerable:!1,writable:!1,value:_t}),Object.defineProperty(Qt,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Jt}),Object.freeze&&(Object.freeze(Qt.props),Object.freeze(Qt)),Qt};function Mi(H,me,Me,_t,Jt){{var oi,Lt={},Qt=null,Tn=null;Me!==void 0&&(Y(Me),Qt=""+Me),wt(me)&&(Y(me.key),Qt=""+me.key),Ye(me)&&(Tn=me.ref,Ct(me,Jt));for(oi in me)ai.call(me,oi)&&!ve.hasOwnProperty(oi)&&(Lt[oi]=me[oi]);if(H&&H.defaultProps){var hn=H.defaultProps;for(oi in hn)Lt[oi]===void 0&&(Lt[oi]=hn[oi])}if(Qt||Tn){var ae=typeof H=="function"?H.displayName||H.name||"Unknown":H;Qt&&Qe(Lt,ae),Tn&&Mt(Lt,ae)}return Ot(H,Qt,Tn,Jt,_t,de.current,Lt)}}var zt=x.ReactCurrentOwner,Fi=x.ReactDebugCurrentFrame;function Wi(H){if(H){var me=H._owner,Me=It(H.type,H._source,me?me.type:null);Fi.setExtraStackFrame(Me)}else Fi.setExtraStackFrame(null)}var Ti;Ti=!1;function rs(H){return typeof H=="object"&&H!==null&&H.$$typeof===e}function un(){{if(zt.current){var H=U(zt.current.type);if(H)return`

Check the render method of \``+H+"`."}return""}}function Qn(H){{if(H!==void 0){var me=H.fileName.replace(/^.*[\\\/]/,""),Me=H.lineNumber;return`

Check your code at `+me+":"+Me+"."}return""}}var Zs={};function Uo(H){{var me=un();if(!me){var Me=typeof H=="string"?H:H.displayName||H.name;Me&&(me=`

Check the top-level render call using <`+Me+">.")}return me}}function ps(H,me){{if(!H._store||H._store.validated||H.key!=null)return;H._store.validated=!0;var Me=Uo(me);if(Zs[Me])return;Zs[Me]=!0;var _t="";H&&H._owner&&H._owner!==zt.current&&(_t=" It was passed a child from "+U(H._owner.type)+"."),Wi(H),L('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Me,_t),Wi(null)}}function vo(H,me){{if(typeof H!="object")return;if(ne(H))for(var Me=0;Me<H.length;Me++){var _t=H[Me];rs(_t)&&ps(_t,me)}else if(rs(H))H._store&&(H._store.validated=!0);else if(H){var Jt=S(H);if(typeof Jt=="function"&&Jt!==H.entries)for(var oi=Jt.call(H),Lt;!(Lt=oi.next()).done;)rs(Lt.value)&&ps(Lt.value,me)}}}function sr(H){{var me=H.type;if(me==null||typeof me=="string")return;var Me;if(typeof me=="function")Me=me.propTypes;else if(typeof me=="object"&&(me.$$typeof===l||me.$$typeof===f))Me=me.propTypes;else return;if(Me){var _t=U(me);ee(Me,H.props,"prop",_t,H)}else if(me.PropTypes!==void 0&&!Ti){Ti=!0;var Jt=U(me);L("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Jt||"Unknown")}typeof me.getDefaultProps=="function"&&!me.getDefaultProps.isReactClassApproved&&L("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Bs(H){{for(var me=Object.keys(H.props),Me=0;Me<me.length;Me++){var _t=me[Me];if(_t!=="children"&&_t!=="key"){Wi(H),L("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",_t),Wi(null);break}}H.ref!==null&&(Wi(H),L("Invalid attribute `ref` supplied to `React.Fragment`."),Wi(null))}}function Bl(H,me,Me,_t,Jt,oi){{var Lt=z(H);if(!Lt){var Qt="";(H===void 0||typeof H=="object"&&H!==null&&Object.keys(H).length===0)&&(Qt+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Tn=Qn(Jt);Tn?Qt+=Tn:Qt+=un();var hn;H===null?hn="null":ne(H)?hn="array":H!==void 0&&H.$$typeof===e?(hn="<"+(U(H.type)||"Unknown")+" />",Qt=" Did you accidentally export a JSX literal instead of a component?"):hn=typeof H,L("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",hn,Qt)}var ae=Mi(H,me,Me,Jt,oi);if(ae==null)return ae;if(Lt){var xe=me.children;if(xe!==void 0)if(_t)if(ne(xe)){for(var dt=0;dt<xe.length;dt++)vo(xe[dt],H);Object.freeze&&Object.freeze(xe)}else L("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else vo(xe,H)}return H===i?Bs(ae):sr(ae),ae}}var Nt=Bl;QF.Fragment=i,QF.jsxDEV=Nt})();(function(s){s.exports=QF})(I8);const mme=I8.exports.Fragment,ut=I8.exports.jsxDEV;var uo="F:\\GitHub\\tgis-3d-vite\\examples\\node_modules\\.pnpm\\registry.npmmirror.com+react-router@6.4.3_react@18.2.0\\node_modules\\react-router\\dist\\index.js";function cT(){return cT=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},cT.apply(this,arguments)}function _me(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}const IQ=typeof Object.is=="function"?Object.is:_me,{useState:vme,useEffect:bme,useLayoutEffect:Cme,useDebugValue:wme}=lT;let Lj=!1,xj=!1;function yme(s,e,t){Lj||"startTransition"in lT&&(Lj=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));const i=e();if(!xj){const r=e();IQ(i,r)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),xj=!0)}const[{inst:n},o]=vme({inst:{value:i,getSnapshot:e}});return Cme(()=>{n.value=i,n.getSnapshot=e,SP(n)&&o({inst:n})},[s,i,e]),bme(()=>(SP(n)&&o({inst:n}),s(()=>{SP(n)&&o({inst:n})})),[s]),wme(i),i}function SP(s){const e=s.getSnapshot,t=s.value;try{const i=e();return!IQ(t,i)}catch{return!0}}function Sme(s,e,t){return e()}const Lme=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xme=!Lme,Dme=xme?Sme:yme,kme="useSyncExternalStore"in lT?(s=>s.useSyncExternalStore)(lT):Dme,NQ=ye.exports.createContext(null);NQ.displayName="DataStaticRouterContext";const lN=ye.exports.createContext(null);lN.displayName="DataRouter";const eL=ye.exports.createContext(null);eL.displayName="DataRouterState";const Eme=ye.exports.createContext(null);Eme.displayName="Await";const tL=ye.exports.createContext(null);tL.displayName="Navigation";const iL=ye.exports.createContext(null);iL.displayName="Location";const Qg=ye.exports.createContext({outlet:null,matches:[]});Qg.displayName="Route";const N8=ye.exports.createContext(null);N8.displayName="RouteError";function Tme(s,e){let{relative:t}=e===void 0?{}:e;nL()||Ui(!1,"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:n}=ye.exports.useContext(tL),{hash:o,pathname:r,search:a}=cN(s,{relative:t}),l=r;return i!=="/"&&(l=r==="/"?i:ld([i,r])),n.createHref({pathname:l,search:a,hash:o})}function nL(){return ye.exports.useContext(iL)!=null}function b_(){return nL()||Ui(!1,"useLocation() may be used only in the context of a <Router> component."),ye.exports.useContext(iL).location}function RQ(){nL()||Ui(!1,"useNavigate() may be used only in the context of a <Router> component.");let{basename:s,navigator:e}=ye.exports.useContext(tL),{matches:t}=ye.exports.useContext(Qg),{pathname:i}=b_(),n=JSON.stringify(aN(t).map(a=>a.pathnameBase)),o=ye.exports.useRef(!1);return ye.exports.useEffect(()=>{o.current=!0}),ye.exports.useCallback(function(a,l){if(l===void 0&&(l={}),Tg(o.current,"You should call navigate() in a React.useEffect(), not when your component is first rendered."),!o.current)return;if(typeof a=="number"){e.go(a);return}let c=T8(a,JSON.parse(n),i,l.relative==="path");s!=="/"&&(c.pathname=c.pathname==="/"?s:ld([s,c.pathname])),(l.replace?e.replace:e.push)(c,l.state,l)},[s,e,n,i])}const Ime=ye.exports.createContext(null);function Nme(s){let e=ye.exports.useContext(Qg).outlet;return e&&ut(Ime.Provider,{value:s,children:e},void 0,!1,{fileName:uo,lineNumber:431,columnNumber:25},this)}function cN(s,e){let{relative:t}=e===void 0?{}:e,{matches:i}=ye.exports.useContext(Qg),{pathname:n}=b_(),o=JSON.stringify(aN(i).map(r=>r.pathnameBase));return ye.exports.useMemo(()=>T8(s,JSON.parse(o),n,t==="path"),[s,o,n,t])}function Rme(s,e){nL()||Ui(!1,"useRoutes() may be used only in the context of a <Router> component.");let t=ye.exports.useContext(eL),{matches:i}=ye.exports.useContext(Qg),n=i[i.length-1],o=n?n.params:{},r=n?n.pathname:"/",a=n?n.pathnameBase:"/",l=n&&n.route;{let S=l&&l.path||"";Wme(r,!l||S.endsWith("*"),"You rendered descendant <Routes> (or called `useRoutes()`) at "+('"'+r+'" (under <Route path="'+S+'">) but the ')+`parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

`+('Please change the parent <Route path="'+S+'"> to <Route ')+('path="'+(S==="/"?"*":S+"/*")+'">.'))}let c=b_(),d;if(e){var f;let S=typeof e=="string"?Ld(e):e;a==="/"||((f=S.pathname)==null?void 0:f.startsWith(a))||Ui(!1,"When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was "+('matched by all parent routes. The current pathname base is "'+a+'" ')+('but pathname "'+S.pathname+'" was given in the `location` prop.')),d=S}else d=c;let g=d.pathname||"/",m=a==="/"?g:g.slice(a.length)||"/",_=Iw(s,{pathname:m});Tg(l||_!=null,'No routes matched location "'+d.pathname+d.search+d.hash+'" '),Tg(_==null||_[_.length-1].route.element!==void 0,'Matched leaf route at location "'+d.pathname+d.search+d.hash+'" does not have an element. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.');let C=Pme(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},o,S.params),pathname:ld([a,S.pathname]),pathnameBase:S.pathnameBase==="/"?a:ld([a,S.pathnameBase])})),i,t||void 0);return e&&C?ut(iL.Provider,{value:{location:cT({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Io.Pop},children:C},void 0,!1,{fileName:uo,lineNumber:553,columnNumber:25},this):C}function Ame(){let s=Vme(),e=LQ(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return ut(mme,{children:[ut("h2",{children:"Unhandled Thrown Error!"},void 0,!1,{fileName:uo,lineNumber:583,columnNumber:78},this),ut("h3",{style:{fontStyle:"italic"},children:e},void 0,!1,{fileName:uo,lineNumber:583,columnNumber:151},this),t?ut("pre",{style:n,children:t},void 0,!1,{fileName:uo,lineNumber:587,columnNumber:37},this):null,ut("p",{children:"\u{1F4BF} Hey developer \u{1F44B}"},void 0,!1,{fileName:uo,lineNumber:589,columnNumber:34},this),ut("p",{children:["You can provide a way better UX than this when your app throws errors by providing your own\xA0",ut("code",{style:o,children:"errorElement"},void 0,!1,{fileName:uo,lineNumber:589,columnNumber:265},this)," props on\xA0",ut("code",{style:o,children:"<Route>"},void 0,!1,{fileName:uo,lineNumber:591,columnNumber:53},this)]},void 0,!0,{fileName:uo,lineNumber:589,columnNumber:122},this)]},void 0,!0)}class Mme extends ye.exports.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?ut(N8.Provider,{value:this.state.error,children:this.props.component},void 0,!1,{fileName:uo,lineNumber:642,columnNumber:44},this):this.props.children}}function Ome(s){let{routeContext:e,match:t,children:i}=s,n=ye.exports.useContext(NQ);return n&&t.route.errorElement&&(n._deepestRenderedBoundaryId=t.route.id),ut(Qg.Provider,{value:e,children:i},void 0,!1,{fileName:uo,lineNumber:663,columnNumber:23},this)}function Pme(s,e,t){if(e===void 0&&(e=[]),s==null)if(t!=null&&t.errors)s=t.matches;else return null;let i=s,n=t==null?void 0:t.errors;if(n!=null){let o=i.findIndex(r=>r.route.id&&(n==null?void 0:n[r.route.id]));o>=0||Ui(!1,"Could not find a matching route for the current errors: "+n),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((o,r,a)=>{let l=r.route.id?n==null?void 0:n[r.route.id]:null,c=t?r.route.errorElement||ut(Ame,{},void 0,!1,{fileName:uo,lineNumber:696,columnNumber:83},this):null,d=()=>ut(Ome,{match:r,routeContext:{outlet:o,matches:e.concat(i.slice(0,a+1))},children:l?c:r.route.element!==void 0?r.route.element:o},void 0,!1,{fileName:uo,lineNumber:698,columnNumber:42},this);return t&&(r.route.errorElement||a===0)?ut(Mme,{location:t.location,component:c,error:l,children:d()},void 0,!1,{fileName:uo,lineNumber:709,columnNumber:88},this):d()},null)}var Dj;(function(s){s.UseRevalidator="useRevalidator"})(Dj||(Dj={}));var XF;(function(s){s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator"})(XF||(XF={}));function Fme(s){return s+" must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router."}function Bme(s){let e=ye.exports.useContext(eL);return e||Ui(!1,Fme(s)),e}function Vme(){var s;let e=ye.exports.useContext(N8),t=Bme(XF.UseRouteError),i=ye.exports.useContext(Qg),n=i.matches[i.matches.length-1];return e||(i||Ui(!1,"useRouteError must be used inside a RouteContext"),n.route.id||Ui(!1,'useRouteError can only be used on routes that contain a unique "id"'),(s=t.errors)==null?void 0:s[n.route.id])}const kj={};function Wme(s,e,t){!e&&!kj[s]&&(kj[s]=!0,Tg(!1,t))}function Hme(s){let{fallbackElement:e,router:t}=s,i=kme(t.subscribe,()=>t.state,()=>t.state),n=ye.exports.useMemo(()=>({createHref:t.createHref,go:r=>t.navigate(r),push:(r,a,l)=>t.navigate(r,{state:a,preventScrollReset:l==null?void 0:l.preventScrollReset}),replace:(r,a,l)=>t.navigate(r,{replace:!0,state:a,preventScrollReset:l==null?void 0:l.preventScrollReset})}),[t]),o=t.basename||"/";return ut(lN.Provider,{value:{router:t,navigator:n,static:!1,basename:o},children:ut(eL.Provider,{value:i,children:ut($me,{basename:t.basename,location:t.state.location,navigationType:t.state.historyAction,navigator:n,children:t.state.initialized?ut(jme,{},void 0,!1,{fileName:uo,lineNumber:923,columnNumber:46},this):e},void 0,!1,{fileName:uo,lineNumber:918,columnNumber:19},this)},void 0,!1,{fileName:uo,lineNumber:916,columnNumber:19},this)},void 0,!1,{fileName:uo,lineNumber:908,columnNumber:23},this)}function zme(s){return Nme(s.context)}function Ume(s){Ui(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $me(s){let{basename:e="/",children:t=null,location:i,navigationType:n=Io.Pop,navigator:o,static:r=!1}=s;nL()&&Ui(!1,"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),l=ye.exports.useMemo(()=>({basename:a,navigator:o,static:r}),[a,o,r]);typeof i=="string"&&(i=Ld(i));let{pathname:c="/",search:d="",hash:f="",state:g=null,key:m="default"}=i,_=ye.exports.useMemo(()=>{let C=SQ(c,a);return C==null?null:{pathname:C,search:d,hash:f,state:g,key:m}},[a,c,d,f,g,m]);return Tg(_!=null,'<Router basename="'+a+'"> is not able to match the URL '+('"'+c+d+f+'" because it does not start with the ')+"basename, so the <Router> won't render anything."),_==null?null:ut(tL.Provider,{value:l,children:ut(iL.Provider,{children:t,value:{location:_,navigationType:n}},void 0,!1,{fileName:uo,lineNumber:1082,columnNumber:19},this)},void 0,!1,{fileName:uo,lineNumber:1080,columnNumber:23},this)}function jme(s){let{children:e,location:t}=s,i=ye.exports.useContext(lN),n=i&&!e?i.router.routes:JF(e);return Rme(n,t)}var Ej;(function(s){s[s.pending=0]="pending",s[s.success=1]="success",s[s.error=2]="error"})(Ej||(Ej={}));new Promise(()=>{});function JF(s,e){e===void 0&&(e=[]);let t=[];return ye.exports.Children.forEach(s,(i,n)=>{if(!ye.exports.isValidElement(i))return;if(i.type===ye.exports.Fragment){t.push.apply(t,JF(i.props.children,e));return}i.type!==Ume&&Ui(!1,"["+(typeof i.type=="string"?i.type:i.type.name)+"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>"),!i.props.index||!i.props.children||Ui(!1,"An index route cannot have child routes.");let o=[...e,n],r={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,hasErrorBoundary:i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle};i.props.children&&(r.children=JF(i.props.children,o)),t.push(r)}),t}function AQ(s){return s.map(e=>{let t=cT({},e);return t.hasErrorBoundary==null&&(t.hasErrorBoundary=t.errorElement!=null),t.children&&(t.children=AQ(t.children)),t})}var uN="F:\\GitHub\\tgis-3d-vite\\examples\\node_modules\\.pnpm\\registry.npmmirror.com+react-router-dom@6.4.3_biqbaboplfbrettd7655fr4n2y\\node_modules\\react-router-dom\\dist\\index.js";function e5(){return e5=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},e5.apply(this,arguments)}function R8(s,e){if(s==null)return{};var t={},i=Object.keys(s),n,o;for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&(t[n]=s[n]);return t}const EE="get",LP="application/x-www-form-urlencoded";function dN(s){return s!=null&&typeof s.tagName=="string"}function Kme(s){return dN(s)&&s.tagName.toLowerCase()==="button"}function qme(s){return dN(s)&&s.tagName.toLowerCase()==="form"}function Gme(s){return dN(s)&&s.tagName.toLowerCase()==="input"}function Yme(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Zme(s,e){return s.button===0&&(!e||e==="_self")&&!Yme(s)}function t5(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let i=s[t];return e.concat(Array.isArray(i)?i.map(n=>[t,n]):[[t,i]])},[]))}function Qme(s,e){let t=t5(s);for(let i of e.keys())t.has(i)||e.getAll(i).forEach(n=>{t.append(i,n)});return t}function Xme(s,e,t){let i,n,o,r;if(qme(s)){let d=t.submissionTrigger;i=t.method||s.getAttribute("method")||EE,n=t.action||s.getAttribute("action")||e,o=t.encType||s.getAttribute("enctype")||LP,r=new FormData(s),d&&d.name&&r.append(d.name,d.value)}else if(Kme(s)||Gme(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');i=t.method||s.getAttribute("formmethod")||d.getAttribute("method")||EE,n=t.action||s.getAttribute("formaction")||d.getAttribute("action")||e,o=t.encType||s.getAttribute("formenctype")||d.getAttribute("enctype")||LP,r=new FormData(d),s.name&&r.append(s.name,s.value)}else{if(dN(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');if(i=t.method||EE,n=t.action||e,o=t.encType||LP,s instanceof FormData)r=s;else if(r=new FormData,s instanceof URLSearchParams)for(let[d,f]of s)r.append(d,f);else if(s!=null)for(let d of Object.keys(s))r.append(d,s[d])}let{protocol:a,host:l}=window.location;return{url:new URL(n,a+"//"+l),method:i,encType:o,formData:r}}const Jme=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],e_e=["aria-current","caseSensitive","className","end","style","to","children"],t_e=["reloadDocument","replace","method","action","onSubmit","fetcherKey","routeId","relative"];function i_e(s,e){var t;return cme({basename:e==null?void 0:e.basename,history:Rpe({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||((t=window)==null?void 0:t.__staticRouterHydrationData),routes:AQ(s)}).initialize()}const MQ=ye.exports.forwardRef(function(e,t){let{onClick:i,relative:n,reloadDocument:o,replace:r,state:a,target:l,to:c,preventScrollReset:d}=e,f=R8(e,Jme),g=Tme(c,{relative:n}),m=a_e(c,{replace:r,state:a,target:l,preventScrollReset:d,relative:n});function _(C){i&&i(C),C.defaultPrevented||m(C)}return ut("a",{...f,href:g,onClick:o?i:_,ref:t,target:l},void 0,!1,{fileName:uN,lineNumber:354,columnNumber:5},this)});MQ.displayName="Link";const n_e=ye.exports.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:n=!1,className:o="",end:r=!1,style:a,to:l,children:c}=e,d=R8(e,e_e),f=cN(l,{relative:d.relative}),g=b_(),m=ye.exports.useContext(eL),_=f.pathname,C=g.pathname,S=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(C=C.toLowerCase(),S=S?S.toLowerCase():null,_=_.toLowerCase());let x=C===_||!r&&C.startsWith(_)&&C.charAt(_.length)==="/",L=S!=null&&(S===_||!r&&S.startsWith(_)&&S.charAt(_.length)==="/"),k=x?i:void 0,T;typeof o=="function"?T=o({isActive:x,isPending:L}):T=[o,x?"active":null,L?"pending":null].filter(Boolean).join(" ");let A=typeof a=="function"?a({isActive:x,isPending:L}):a;return ut(MQ,{...d,"aria-current":k,className:T,ref:t,style:A,to:l,children:typeof c=="function"?c({isActive:x,isPending:L}):c},void 0,!1,{fileName:uN,lineNumber:421,columnNumber:23},this)});n_e.displayName="NavLink";const OQ=ye.exports.forwardRef((s,e)=>ut(s_e,{...s,ref:e},void 0,!1,{fileName:uN,lineNumber:445,columnNumber:23},globalThis));OQ.displayName="Form";const s_e=ye.exports.forwardRef((s,e)=>{let{reloadDocument:t,replace:i,method:n=EE,action:o,onSubmit:r,fetcherKey:a,routeId:l,relative:c}=s,d=R8(s,t_e),f=c_e(a,l),g=n.toLowerCase()==="get"?"get":"post",m=PQ(o,{relative:c});return ut("form",{ref:e,method:g,action:m,onSubmit:t?r:C=>{if(r&&r(C),C.defaultPrevented)return;C.preventDefault();let S=C.nativeEvent.submitter;f(S||C.currentTarget,{method:n,replace:i,relative:c})},...d},void 0,!1,{fileName:uN,lineNumber:485,columnNumber:23},globalThis)});OQ.displayName="Form";var i5;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmitImpl="useSubmitImpl",s.UseFetcher="useFetcher"})(i5||(i5={}));var Tj;(function(s){s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Tj||(Tj={}));function o_e(s){return s+" must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router."}function r_e(s){let e=ye.exports.useContext(lN);return e||Ui(!1,o_e(s)),e}function a_e(s,e){let{target:t,replace:i,state:n,preventScrollReset:o,relative:r}=e===void 0?{}:e,a=RQ(),l=b_(),c=cN(s,{relative:r});return ye.exports.useCallback(d=>{if(Zme(d,t)){d.preventDefault();let f=i!==void 0?i:dc(l)===dc(c);a(s,{replace:f,state:n,preventScrollReset:o,relative:r})}},[l,a,c,i,n,t,s,o,r])}function l_e(s){u_e(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params\n\nIf you're unsure how to load polyfills, we recommend you check out https://polyfill.io/v3/ which provides some recommendations about how to load polyfills only for users that need them, instead of for every user.");let e=ye.exports.useRef(t5(s)),t=b_(),i=ye.exports.useMemo(()=>Qme(t.search,e.current),[t.search]),n=RQ(),o=ye.exports.useCallback((r,a)=>{const l=t5(typeof r=="function"?r(i):r);n("?"+l,a)},[n,i]);return[i,o]}function c_e(s,e){let{router:t}=r_e(i5.UseSubmitImpl),i=PQ();return ye.exports.useCallback(function(n,o){if(o===void 0&&(o={}),typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.");let{method:r,encType:a,formData:l,url:c}=Xme(n,i,o),d=c.pathname+c.search,f={replace:o.replace,formData:l,formMethod:r,formEncType:a};s?(e==null&&Ui(!1,"No routeId available for useFetcher()"),t.fetch(s,e,d,f)):t.navigate(d,f)},[i,t,s,e])}function PQ(s,e){let{relative:t}=e===void 0?{}:e,{basename:i}=ye.exports.useContext(tL),n=ye.exports.useContext(Qg);n||Ui(!1,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),r=s!=null?s:".",a=e5({},cN(r,{relative:t})),l=b_();if(s==null&&(a.search=l.search,a.hash=l.hash,o.route.index)){let c=new URLSearchParams(a.search);c.delete("index"),a.search=c.toString()?"?"+c.toString():""}return(!s||s===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(a.pathname=a.pathname==="/"?i:ld([i,a.pathname])),dc(a)}function u_e(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}var C_={exports:{}},Un={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var s=typeof Symbol=="function"&&Symbol.for,e=s?Symbol.for("react.element"):60103,t=s?Symbol.for("react.portal"):60106,i=s?Symbol.for("react.fragment"):60107,n=s?Symbol.for("react.strict_mode"):60108,o=s?Symbol.for("react.profiler"):60114,r=s?Symbol.for("react.provider"):60109,a=s?Symbol.for("react.context"):60110,l=s?Symbol.for("react.async_mode"):60111,c=s?Symbol.for("react.concurrent_mode"):60111,d=s?Symbol.for("react.forward_ref"):60112,f=s?Symbol.for("react.suspense"):60113,g=s?Symbol.for("react.suspense_list"):60120,m=s?Symbol.for("react.memo"):60115,_=s?Symbol.for("react.lazy"):60116,C=s?Symbol.for("react.block"):60121,S=s?Symbol.for("react.fundamental"):60117,x=s?Symbol.for("react.responder"):60118,L=s?Symbol.for("react.scope"):60119;function k(Fe){return typeof Fe=="string"||typeof Fe=="function"||Fe===i||Fe===c||Fe===o||Fe===n||Fe===f||Fe===g||typeof Fe=="object"&&Fe!==null&&(Fe.$$typeof===_||Fe.$$typeof===m||Fe.$$typeof===r||Fe.$$typeof===a||Fe.$$typeof===d||Fe.$$typeof===S||Fe.$$typeof===x||Fe.$$typeof===L||Fe.$$typeof===C)}function T(Fe){if(typeof Fe=="object"&&Fe!==null){var Wt=Fe.$$typeof;switch(Wt){case e:var Kt=Fe.type;switch(Kt){case l:case c:case i:case o:case n:case f:return Kt;default:var It=Kt&&Kt.$$typeof;switch(It){case a:case d:case _:case m:case r:return It;default:return Wt}}case t:return Wt}}}var A=l,O=c,I=a,R=r,B=e,z=d,q=i,te=_,U=m,X=t,le=o,be=n,pe=f,ke=!1;function He(Fe){return ke||(ke=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),Ge(Fe)||T(Fe)===l}function Ge(Fe){return T(Fe)===c}function Ue(Fe){return T(Fe)===a}function ce(Fe){return T(Fe)===r}function ue(Fe){return typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===e}function $e(Fe){return T(Fe)===d}function tt(Fe){return T(Fe)===i}function _e(Fe){return T(Fe)===_}function Vt(Fe){return T(Fe)===m}function Ne(Fe){return T(Fe)===t}function bt(Fe){return T(Fe)===o}function mt(Fe){return T(Fe)===n}function qe(Fe){return T(Fe)===f}Un.AsyncMode=A,Un.ConcurrentMode=O,Un.ContextConsumer=I,Un.ContextProvider=R,Un.Element=B,Un.ForwardRef=z,Un.Fragment=q,Un.Lazy=te,Un.Memo=U,Un.Portal=X,Un.Profiler=le,Un.StrictMode=be,Un.Suspense=pe,Un.isAsyncMode=He,Un.isConcurrentMode=Ge,Un.isContextConsumer=Ue,Un.isContextProvider=ce,Un.isElement=ue,Un.isForwardRef=$e,Un.isFragment=tt,Un.isLazy=_e,Un.isMemo=Vt,Un.isPortal=Ne,Un.isProfiler=bt,Un.isStrictMode=mt,Un.isSuspense=qe,Un.isValidElementType=k,Un.typeOf=T})();(function(s){s.exports=Un})(C_);function d_e(s){function e(ce,ue,$e,tt,_e){for(var Vt=0,Ne=0,bt=0,mt=0,qe,Fe,Wt=0,Kt=0,It,ai=It=qe=0,Pt=0,Ie=0,Xe=0,ee=0,ie=$e.length,ne=ie-1,V,W="",Q="",Y="",de="",ve;Pt<ie;){if(Fe=$e.charCodeAt(Pt),Pt===ne&&Ne+mt+bt+Vt!==0&&(Ne!==0&&(Fe=Ne===47?10:47),mt=bt=Vt=0,ie++,ne++),Ne+mt+bt+Vt===0){if(Pt===ne&&(0<Ie&&(W=W.replace(g,"")),0<W.trim().length)){switch(Fe){case 32:case 9:case 59:case 13:case 10:break;default:W+=$e.charAt(Pt)}Fe=59}switch(Fe){case 123:for(W=W.trim(),qe=W.charCodeAt(0),It=1,ee=++Pt;Pt<ie;){switch(Fe=$e.charCodeAt(Pt)){case 123:It++;break;case 125:It--;break;case 47:switch(Fe=$e.charCodeAt(Pt+1)){case 42:case 47:e:{for(ai=Pt+1;ai<ne;++ai)switch($e.charCodeAt(ai)){case 47:if(Fe===42&&$e.charCodeAt(ai-1)===42&&Pt+2!==ai){Pt=ai+1;break e}break;case 10:if(Fe===47){Pt=ai+1;break e}}Pt=ai}}break;case 91:Fe++;case 40:Fe++;case 34:case 39:for(;Pt++<ne&&$e.charCodeAt(Pt)!==Fe;);}if(It===0)break;Pt++}switch(It=$e.substring(ee,Pt),qe===0&&(qe=(W=W.replace(f,"").trim()).charCodeAt(0)),qe){case 64:switch(0<Ie&&(W=W.replace(g,"")),Fe=W.charCodeAt(1),Fe){case 100:case 109:case 115:case 45:Ie=ue;break;default:Ie=be}if(It=e(ue,Ie,It,Fe,_e+1),ee=It.length,0<ke&&(Ie=t(be,W,Xe),ve=a(3,It,Ie,ue,U,te,ee,Fe,_e,tt),W=Ie.join(""),ve!==void 0&&(ee=(It=ve.trim()).length)===0&&(Fe=0,It="")),0<ee)switch(Fe){case 115:W=W.replace(O,r);case 100:case 109:case 45:It=W+"{"+It+"}";break;case 107:W=W.replace(L,"$1 $2"),It=W+"{"+It+"}",It=le===1||le===2&&o("@"+It,3)?"@-webkit-"+It+"@"+It:"@"+It;break;default:It=W+It,tt===112&&(It=(Q+=It,""))}else It="";break;default:It=e(ue,t(ue,W,Xe),It,tt,_e+1)}Y+=It,It=Xe=Ie=ai=qe=0,W="",Fe=$e.charCodeAt(++Pt);break;case 125:case 59:if(W=(0<Ie?W.replace(g,""):W).trim(),1<(ee=W.length))switch(ai===0&&(qe=W.charCodeAt(0),qe===45||96<qe&&123>qe)&&(ee=(W=W.replace(" ",":")).length),0<ke&&(ve=a(1,W,ue,ce,U,te,Q.length,tt,_e,tt))!==void 0&&(ee=(W=ve.trim()).length)===0&&(W="\0\0"),qe=W.charCodeAt(0),Fe=W.charCodeAt(1),qe){case 0:break;case 64:if(Fe===105||Fe===99){de+=W+$e.charAt(Pt);break}default:W.charCodeAt(ee-1)!==58&&(Q+=n(W,qe,Fe,W.charCodeAt(2)))}Xe=Ie=ai=qe=0,W="",Fe=$e.charCodeAt(++Pt)}}switch(Fe){case 13:case 10:Ne===47?Ne=0:1+qe===0&&tt!==107&&0<W.length&&(Ie=1,W+="\0"),0<ke*Ge&&a(0,W,ue,ce,U,te,Q.length,tt,_e,tt),te=1,U++;break;case 59:case 125:if(Ne+mt+bt+Vt===0){te++;break}default:switch(te++,V=$e.charAt(Pt),Fe){case 9:case 32:if(mt+Vt+Ne===0)switch(Wt){case 44:case 58:case 9:case 32:V="";break;default:Fe!==32&&(V=" ")}break;case 0:V="\\0";break;case 12:V="\\f";break;case 11:V="\\v";break;case 38:mt+Ne+Vt===0&&(Ie=Xe=1,V="\f"+V);break;case 108:if(mt+Ne+Vt+X===0&&0<ai)switch(Pt-ai){case 2:Wt===112&&$e.charCodeAt(Pt-3)===58&&(X=Wt);case 8:Kt===111&&(X=Kt)}break;case 58:mt+Ne+Vt===0&&(ai=Pt);break;case 44:Ne+bt+mt+Vt===0&&(Ie=1,V+="\r");break;case 34:case 39:Ne===0&&(mt=mt===Fe?0:mt===0?Fe:mt);break;case 91:mt+Ne+bt===0&&Vt++;break;case 93:mt+Ne+bt===0&&Vt--;break;case 41:mt+Ne+Vt===0&&bt--;break;case 40:if(mt+Ne+Vt===0){if(qe===0)switch(2*Wt+3*Kt){case 533:break;default:qe=1}bt++}break;case 64:Ne+bt+mt+Vt+ai+It===0&&(It=1);break;case 42:case 47:if(!(0<mt+Vt+bt))switch(Ne){case 0:switch(2*Fe+3*$e.charCodeAt(Pt+1)){case 235:Ne=47;break;case 220:ee=Pt,Ne=42}break;case 42:Fe===47&&Wt===42&&ee+2!==Pt&&($e.charCodeAt(ee+2)===33&&(Q+=$e.substring(ee,Pt+1)),V="",Ne=0)}}Ne===0&&(W+=V)}Kt=Wt,Wt=Fe,Pt++}if(ee=Q.length,0<ee){if(Ie=ue,0<ke&&(ve=a(2,Q,Ie,ce,U,te,ee,tt,_e,tt),ve!==void 0&&(Q=ve).length===0))return de+Q+Y;if(Q=Ie.join(",")+"{"+Q+"}",le*X!==0){switch(le!==2||o(Q,2)||(X=0),X){case 111:Q=Q.replace(T,":-moz-$1")+Q;break;case 112:Q=Q.replace(k,"::-webkit-input-$1")+Q.replace(k,"::-moz-$1")+Q.replace(k,":-ms-input-$1")+Q}X=0}}return de+Q+Y}function t(ce,ue,$e){var tt=ue.trim().split(S);ue=tt;var _e=tt.length,Vt=ce.length;switch(Vt){case 0:case 1:var Ne=0;for(ce=Vt===0?"":ce[0]+" ";Ne<_e;++Ne)ue[Ne]=i(ce,ue[Ne],$e).trim();break;default:var bt=Ne=0;for(ue=[];Ne<_e;++Ne)for(var mt=0;mt<Vt;++mt)ue[bt++]=i(ce[mt]+" ",tt[Ne],$e).trim()}return ue}function i(ce,ue,$e){var tt=ue.charCodeAt(0);switch(33>tt&&(tt=(ue=ue.trim()).charCodeAt(0)),tt){case 38:return ue.replace(x,"$1"+ce.trim());case 58:return ce.trim()+ue.replace(x,"$1"+ce.trim());default:if(0<1*$e&&0<ue.indexOf("\f"))return ue.replace(x,(ce.charCodeAt(0)===58?"":"$1")+ce.trim())}return ce+ue}function n(ce,ue,$e,tt){var _e=ce+";",Vt=2*ue+3*$e+4*tt;if(Vt===944){ce=_e.indexOf(":",9)+1;var Ne=_e.substring(ce,_e.length-1).trim();return Ne=_e.substring(0,ce).trim()+Ne+";",le===1||le===2&&o(Ne,1)?"-webkit-"+Ne+Ne:Ne}if(le===0||le===2&&!o(_e,1))return _e;switch(Vt){case 1015:return _e.charCodeAt(10)===97?"-webkit-"+_e+_e:_e;case 951:return _e.charCodeAt(3)===116?"-webkit-"+_e+_e:_e;case 963:return _e.charCodeAt(5)===110?"-webkit-"+_e+_e:_e;case 1009:if(_e.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+_e+_e;case 978:return"-webkit-"+_e+"-moz-"+_e+_e;case 1019:case 983:return"-webkit-"+_e+"-moz-"+_e+"-ms-"+_e+_e;case 883:if(_e.charCodeAt(8)===45)return"-webkit-"+_e+_e;if(0<_e.indexOf("image-set(",11))return _e.replace(q,"$1-webkit-$2")+_e;break;case 932:if(_e.charCodeAt(4)===45)switch(_e.charCodeAt(5)){case 103:return"-webkit-box-"+_e.replace("-grow","")+"-webkit-"+_e+"-ms-"+_e.replace("grow","positive")+_e;case 115:return"-webkit-"+_e+"-ms-"+_e.replace("shrink","negative")+_e;case 98:return"-webkit-"+_e+"-ms-"+_e.replace("basis","preferred-size")+_e}return"-webkit-"+_e+"-ms-"+_e+_e;case 964:return"-webkit-"+_e+"-ms-flex-"+_e+_e;case 1023:if(_e.charCodeAt(8)!==99)break;return Ne=_e.substring(_e.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+Ne+"-webkit-"+_e+"-ms-flex-pack"+Ne+_e;case 1005:return _.test(_e)?_e.replace(m,":-webkit-")+_e.replace(m,":-moz-")+_e:_e;case 1e3:switch(Ne=_e.substring(13).trim(),ue=Ne.indexOf("-")+1,Ne.charCodeAt(0)+Ne.charCodeAt(ue)){case 226:Ne=_e.replace(A,"tb");break;case 232:Ne=_e.replace(A,"tb-rl");break;case 220:Ne=_e.replace(A,"lr");break;default:return _e}return"-webkit-"+_e+"-ms-"+Ne+_e;case 1017:if(_e.indexOf("sticky",9)===-1)break;case 975:switch(ue=(_e=ce).length-10,Ne=(_e.charCodeAt(ue)===33?_e.substring(0,ue):_e).substring(ce.indexOf(":",7)+1).trim(),Vt=Ne.charCodeAt(0)+(Ne.charCodeAt(7)|0)){case 203:if(111>Ne.charCodeAt(8))break;case 115:_e=_e.replace(Ne,"-webkit-"+Ne)+";"+_e;break;case 207:case 102:_e=_e.replace(Ne,"-webkit-"+(102<Vt?"inline-":"")+"box")+";"+_e.replace(Ne,"-webkit-"+Ne)+";"+_e.replace(Ne,"-ms-"+Ne+"box")+";"+_e}return _e+";";case 938:if(_e.charCodeAt(5)===45)switch(_e.charCodeAt(6)){case 105:return Ne=_e.replace("-items",""),"-webkit-"+_e+"-webkit-box-"+Ne+"-ms-flex-"+Ne+_e;case 115:return"-webkit-"+_e+"-ms-flex-item-"+_e.replace(R,"")+_e;default:return"-webkit-"+_e+"-ms-flex-line-pack"+_e.replace("align-content","").replace(R,"")+_e}break;case 973:case 989:if(_e.charCodeAt(3)!==45||_e.charCodeAt(4)===122)break;case 931:case 953:if(z.test(ce)===!0)return(Ne=ce.substring(ce.indexOf(":")+1)).charCodeAt(0)===115?n(ce.replace("stretch","fill-available"),ue,$e,tt).replace(":fill-available",":stretch"):_e.replace(Ne,"-webkit-"+Ne)+_e.replace(Ne,"-moz-"+Ne.replace("fill-",""))+_e;break;case 962:if(_e="-webkit-"+_e+(_e.charCodeAt(5)===102?"-ms-"+_e:"")+_e,$e+tt===211&&_e.charCodeAt(13)===105&&0<_e.indexOf("transform",10))return _e.substring(0,_e.indexOf(";",27)+1).replace(C,"$1-webkit-$2")+_e}return _e}function o(ce,ue){var $e=ce.indexOf(ue===1?":":"{"),tt=ce.substring(0,ue!==3?$e:10);return $e=ce.substring($e+1,ce.length-1),He(ue!==2?tt:tt.replace(B,"$1"),$e,ue)}function r(ce,ue){var $e=n(ue,ue.charCodeAt(0),ue.charCodeAt(1),ue.charCodeAt(2));return $e!==ue+";"?$e.replace(I," or ($1)").substring(4):"("+ue+")"}function a(ce,ue,$e,tt,_e,Vt,Ne,bt,mt,qe){for(var Fe=0,Wt=ue,Kt;Fe<ke;++Fe)switch(Kt=pe[Fe].call(d,ce,Wt,$e,tt,_e,Vt,Ne,bt,mt,qe)){case void 0:case!1:case!0:case null:break;default:Wt=Kt}if(Wt!==ue)return Wt}function l(ce){switch(ce){case void 0:case null:ke=pe.length=0;break;default:if(typeof ce=="function")pe[ke++]=ce;else if(typeof ce=="object")for(var ue=0,$e=ce.length;ue<$e;++ue)l(ce[ue]);else Ge=!!ce|0}return l}function c(ce){return ce=ce.prefix,ce!==void 0&&(He=null,ce?typeof ce!="function"?le=1:(le=2,He=ce):le=0),c}function d(ce,ue){var $e=ce;if(33>$e.charCodeAt(0)&&($e=$e.trim()),Ue=$e,$e=[Ue],0<ke){var tt=a(-1,ue,$e,$e,U,te,0,0,0,0);tt!==void 0&&typeof tt=="string"&&(ue=tt)}var _e=e(be,$e,ue,0,0);return 0<ke&&(tt=a(-2,_e,$e,$e,U,te,_e.length,0,0,0),tt!==void 0&&(_e=tt)),Ue="",X=0,te=U=1,_e}var f=/^\0+/g,g=/[\0\r\f]/g,m=/: */g,_=/zoo|gra/,C=/([,: ])(transform)/g,S=/,\r+?/g,x=/([\t\r\n ])*\f?&/g,L=/@(k\w+)\s*(\S*)\s*/,k=/::(place)/g,T=/:(read-only)/g,A=/[svh]\w+-[tblr]{2}/,O=/\(\s*(.*)\s*\)/g,I=/([\s\S]*?);/g,R=/-self|flex-/g,B=/[^]*?(:[rp][el]a[\w-]+)[^]*/,z=/stretch|:\s*\w+\-(?:conte|avail)/,q=/([^-])(image-set\()/,te=1,U=1,X=0,le=1,be=[],pe=[],ke=0,He=null,Ge=0,Ue="";return d.use=l,d.set=c,s!==void 0&&c(s),d}var h_e={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function f_e(s){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=s(t)),e[t]}}var g_e=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ij=f_e(function(s){return g_e.test(s)||s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)<91}),A8=C_.exports,p_e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},m_e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},__e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},FQ={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},M8={};M8[A8.ForwardRef]=__e;M8[A8.Memo]=FQ;function Nj(s){return A8.isMemo(s)?FQ:M8[s.$$typeof]||p_e}var v_e=Object.defineProperty,b_e=Object.getOwnPropertyNames,Rj=Object.getOwnPropertySymbols,C_e=Object.getOwnPropertyDescriptor,w_e=Object.getPrototypeOf,Aj=Object.prototype;function BQ(s,e,t){if(typeof e!="string"){if(Aj){var i=w_e(e);i&&i!==Aj&&BQ(s,i,t)}var n=b_e(e);Rj&&(n=n.concat(Rj(e)));for(var o=Nj(s),r=Nj(e),a=0;a<n.length;++a){var l=n[a];if(!m_e[l]&&!(t&&t[l])&&!(r&&r[l])&&!(o&&o[l])){var c=C_e(e,l);try{v_e(s,l,c)}catch{}}}}return s}var y_e=BQ;function Th(){return(Th=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s}).apply(this,arguments)}var Mj=function(s,e){for(var t=[s[0]],i=0,n=e.length;i<n;i+=1)t.push(e[i],s[i+1]);return t},n5=function(s){return s!==null&&typeof s=="object"&&(s.toString?s.toString():Object.prototype.toString.call(s))==="[object Object]"&&!C_.exports.typeOf(s)},uT=Object.freeze([]),gg=Object.freeze({});function dT(s){return typeof s=="function"}function s5(s){return typeof s=="string"&&s||s.displayName||s.name||"Component"}function VQ(s){return s&&typeof s.styledComponentId=="string"}var l0=typeof process<"u"&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",O8=typeof window<"u"&&"HTMLElement"in window,S_e=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&process.env.REACT_APP_SC_DISABLE_SPEEDY!==""?process.env.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&process.env.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env.SC_DISABLE_SPEEDY!==void 0&&process.env.SC_DISABLE_SPEEDY!==""?process.env.SC_DISABLE_SPEEDY!=="false"&&process.env.SC_DISABLE_SPEEDY:!0),L_e={1:`Cannot create styled-component for component: %s.

`,2:`Can't collect styles once you've consumed a \`ServerStyleSheet\`'s styles! \`ServerStyleSheet\` is a one off instance for each server-side render cycle.

- Are you trying to reuse it across renders?
- Are you accidentally calling collectStyles twice?

`,3:`Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.

`,4:`The \`StyleSheetManager\` expects a valid target or sheet prop!

- Does this error occur on the client and is your target falsy?
- Does this error occur on the server and is the sheet falsy?

`,5:`The clone method cannot be used on the client!

- Are you running in a client-like environment on the server?
- Are you trying to run SSR on the client?

`,6:`Trying to insert a new style tag, but the given Node is unmounted!

- Are you using a custom target that isn't mounted?
- Does your document not have a valid head element?
- Have you accidentally removed a style tag manually?

`,7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:`ThemeProvider: Please make your "theme" prop an object.

`,9:"Missing document `<head>`\n\n",10:`Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021

`,11:`_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.

`,12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:`%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.

`,14:`ThemeProvider: "theme" prop is required.

`,15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:`Reached the limit of how many styled components may be created at group %s.
You may only create up to 1,073,741,824 components. If you're creating components dynamically,
as for instance in your render method then you may be running into this limitation.

`,17:`CSSStyleSheet could not be found on HTMLStyleElement.
Has styled-components' style tag been unmounted or altered by another script?
`};function x_e(){for(var s=arguments.length<=0?void 0:arguments[0],e=[],t=1,i=arguments.length;t<i;t+=1)e.push(t<0||arguments.length<=t?void 0:arguments[t]);return e.forEach(function(n){s=s.replace(/%[a-z]/,n)}),s}function J0(s){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw new Error(x_e.apply(void 0,[L_e[s]].concat(t)).trim())}var D_e=function(){function s(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}var e=s.prototype;return e.indexOfGroup=function(t){for(var i=0,n=0;n<t;n++)i+=this.groupSizes[n];return i},e.insertRules=function(t,i){if(t>=this.groupSizes.length){for(var n=this.groupSizes,o=n.length,r=o;t>=r;)(r<<=1)<0&&J0(16,""+t);this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var a=o;a<r;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(t+1),c=0,d=i.length;c<d;c++)this.tag.insertRule(l,i[c])&&(this.groupSizes[t]++,l++)},e.clearGroup=function(t){if(t<this.length){var i=this.groupSizes[t],n=this.indexOfGroup(t),o=n+i;this.groupSizes[t]=0;for(var r=n;r<o;r++)this.tag.deleteRule(n)}},e.getGroup=function(t){var i="";if(t>=this.length||this.groupSizes[t]===0)return i;for(var n=this.groupSizes[t],o=this.indexOfGroup(t),r=o+n,a=o;a<r;a++)i+=this.tag.getRule(a)+`/*!sc*/
`;return i},s}(),TE=new Map,hT=new Map,Xw=1,ek=function(s){if(TE.has(s))return TE.get(s);for(;hT.has(Xw);)Xw++;var e=Xw++;return((0|e)<0||e>1<<30)&&J0(16,""+e),TE.set(s,e),hT.set(e,s),e},k_e=function(s){return hT.get(s)},E_e=function(s,e){e>=Xw&&(Xw=e+1),TE.set(s,e),hT.set(e,s)},T_e="style["+l0+'][data-styled-version="5.3.6"]',I_e=new RegExp("^"+l0+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),N_e=function(s,e,t){for(var i,n=t.split(","),o=0,r=n.length;o<r;o++)(i=n[o])&&s.registerName(e,i)},R_e=function(s,e){for(var t=(e.textContent||"").split(`/*!sc*/
`),i=[],n=0,o=t.length;n<o;n++){var r=t[n].trim();if(r){var a=r.match(I_e);if(a){var l=0|parseInt(a[1],10),c=a[2];l!==0&&(E_e(c,l),N_e(s,c,a[3]),s.getTag().insertRules(l,i)),i.length=0}else i.push(r)}}},A_e=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},WQ=function(s){var e=document.head,t=s||e,i=document.createElement("style"),n=function(a){for(var l=a.childNodes,c=l.length;c>=0;c--){var d=l[c];if(d&&d.nodeType===1&&d.hasAttribute(l0))return d}}(t),o=n!==void 0?n.nextSibling:null;i.setAttribute(l0,"active"),i.setAttribute("data-styled-version","5.3.6");var r=A_e();return r&&i.setAttribute("nonce",r),t.insertBefore(i,o),i},M_e=function(){function s(t){var i=this.element=WQ(t);i.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var o=document.styleSheets,r=0,a=o.length;r<a;r++){var l=o[r];if(l.ownerNode===n)return l}J0(17)}(i),this.length=0}var e=s.prototype;return e.insertRule=function(t,i){try{return this.sheet.insertRule(i,t),this.length++,!0}catch{return!1}},e.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.getRule=function(t){var i=this.sheet.cssRules[t];return i!==void 0&&typeof i.cssText=="string"?i.cssText:""},s}(),O_e=function(){function s(t){var i=this.element=WQ(t);this.nodes=i.childNodes,this.length=0}var e=s.prototype;return e.insertRule=function(t,i){if(t<=this.length&&t>=0){var n=document.createTextNode(i),o=this.nodes[t];return this.element.insertBefore(n,o||null),this.length++,!0}return!1},e.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},s}(),P_e=function(){function s(t){this.rules=[],this.length=0}var e=s.prototype;return e.insertRule=function(t,i){return t<=this.length&&(this.rules.splice(t,0,i),this.length++,!0)},e.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.getRule=function(t){return t<this.length?this.rules[t]:""},s}(),Oj=O8,F_e={isServer:!O8,useCSSOMInjection:!S_e},HQ=function(){function s(t,i,n){t===void 0&&(t=gg),i===void 0&&(i={}),this.options=Th({},F_e,{},t),this.gs=i,this.names=new Map(n),this.server=!!t.isServer,!this.server&&O8&&Oj&&(Oj=!1,function(o){for(var r=document.querySelectorAll(T_e),a=0,l=r.length;a<l;a++){var c=r[a];c&&c.getAttribute(l0)!=="active"&&(R_e(o,c),c.parentNode&&c.parentNode.removeChild(c))}}(this))}s.registerId=function(t){return ek(t)};var e=s.prototype;return e.reconstructWithOptions=function(t,i){return i===void 0&&(i=!0),new s(Th({},this.options,{},t),this.gs,i&&this.names||void 0)},e.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.getTag=function(){return this.tag||(this.tag=(n=(i=this.options).isServer,o=i.useCSSOMInjection,r=i.target,t=n?new P_e(r):o?new M_e(r):new O_e(r),new D_e(t)));var t,i,n,o,r},e.hasNameForId=function(t,i){return this.names.has(t)&&this.names.get(t).has(i)},e.registerName=function(t,i){if(ek(t),this.names.has(t))this.names.get(t).add(i);else{var n=new Set;n.add(i),this.names.set(t,n)}},e.insertRules=function(t,i,n){this.registerName(t,i),this.getTag().insertRules(ek(t),n)},e.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.clearRules=function(t){this.getTag().clearGroup(ek(t)),this.clearNames(t)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(t){for(var i=t.getTag(),n=i.length,o="",r=0;r<n;r++){var a=k_e(r);if(a!==void 0){var l=t.names.get(a),c=i.getGroup(r);if(l&&c&&l.size){var d=l0+".g"+r+'[id="'+a+'"]',f="";l!==void 0&&l.forEach(function(g){g.length>0&&(f+=g+",")}),o+=""+c+d+'{content:"'+f+`"}/*!sc*/
`}}}return o}(this)},s}(),B_e=/(a)(d)/gi,Pj=function(s){return String.fromCharCode(s+(s>25?39:97))};function o5(s){var e,t="";for(e=Math.abs(s);e>52;e=e/52|0)t=Pj(e%52)+t;return(Pj(e%52)+t).replace(B_e,"$1-$2")}var Xp=function(s,e){for(var t=e.length;t;)s=33*s^e.charCodeAt(--t);return s},zQ=function(s){return Xp(5381,s)},V_e=zQ("5.3.6"),W_e=function(){function s(e,t,i){this.rules=e,this.staticRulesId="",this.isStatic=!1,this.componentId=t,this.baseHash=Xp(V_e,t),this.baseStyle=i,HQ.registerId(t)}return s.prototype.generateAndInjectStyles=function(e,t,i){var n=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(e,t,i)),this.isStatic&&!i.hash)if(this.staticRulesId&&t.hasNameForId(n,this.staticRulesId))o.push(this.staticRulesId);else{var r=c0(this.rules,e,t,i).join(""),a=o5(Xp(this.baseHash,r)>>>0);if(!t.hasNameForId(n,a)){var l=i(r,"."+a,void 0,n);t.insertRules(n,a,l)}o.push(a),this.staticRulesId=a}else{for(var c=this.rules.length,d=Xp(this.baseHash,i.hash),f="",g=0;g<c;g++){var m=this.rules[g];if(typeof m=="string")f+=m,d=Xp(d,m+g);else if(m){var _=c0(m,e,t,i),C=Array.isArray(_)?_.join(""):_;d=Xp(d,C+g),f+=C}}if(f){var S=o5(d>>>0);if(!t.hasNameForId(n,S)){var x=i(f,"."+S,void 0,n);t.insertRules(n,S,x)}o.push(S)}}return o.join(" ")},s}(),H_e=/^\s*\/\/.*$/gm,z_e=[":","[",".","#"];function U_e(s){var e,t,i,n,o=s===void 0?gg:s,r=o.options,a=r===void 0?gg:r,l=o.plugins,c=l===void 0?uT:l,d=new d_e(a),f=[],g=function(C){function S(x){if(x)try{C(x+"}")}catch{}}return function(x,L,k,T,A,O,I,R,B,z){switch(x){case 1:if(B===0&&L.charCodeAt(0)===64)return C(L+";"),"";break;case 2:if(R===0)return L+"/*|*/";break;case 3:switch(R){case 102:case 112:return C(k[0]+L),"";default:return L+(z===0?"/*|*/":"")}case-2:L.split("/*|*/}").forEach(S)}}}(function(C){f.push(C)}),m=function(C,S,x){return S===0&&z_e.indexOf(x[t.length])!==-1||x.match(n)?C:"."+e};function _(C,S,x,L){L===void 0&&(L="&");var k=C.replace(H_e,""),T=S&&x?x+" "+S+" { "+k+" }":k;return e=L,t=S,i=new RegExp("\\"+t+"\\b","g"),n=new RegExp("(\\"+t+"\\b){2,}"),d(x||!S?"":S,T)}return d.use([].concat(c,[function(C,S,x){C===2&&x.length&&x[0].lastIndexOf(t)>0&&(x[0]=x[0].replace(i,m))},g,function(C){if(C===-2){var S=f;return f=[],S}}])),_.hash=c.length?c.reduce(function(C,S){return S.name||J0(15),Xp(C,S.name)},5381).toString():"",_}var UQ=Fr.createContext();UQ.Consumer;var $Q=Fr.createContext(),$_e=($Q.Consumer,new HQ),r5=U_e();function j_e(){return ye.exports.useContext(UQ)||$_e}function K_e(){return ye.exports.useContext($Q)||r5}var q_e=function(){function s(e,t){var i=this;this.inject=function(n,o){o===void 0&&(o=r5);var r=i.name+o.hash;n.hasNameForId(i.id,r)||n.insertRules(i.id,r,o(i.rules,r,"@keyframes"))},this.toString=function(){return J0(12,String(i.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return s.prototype.getName=function(e){return e===void 0&&(e=r5),this.name+e.hash},s}(),G_e=/([A-Z])/,Y_e=/([A-Z])/g,Z_e=/^ms-/,Q_e=function(s){return"-"+s.toLowerCase()};function Fj(s){return G_e.test(s)?s.replace(Y_e,Q_e).replace(Z_e,"-ms-"):s}var Bj=function(s){return s==null||s===!1||s===""};function c0(s,e,t,i){if(Array.isArray(s)){for(var n,o=[],r=0,a=s.length;r<a;r+=1)(n=c0(s[r],e,t,i))!==""&&(Array.isArray(n)?o.push.apply(o,n):o.push(n));return o}if(Bj(s))return"";if(VQ(s))return"."+s.styledComponentId;if(dT(s)){if(typeof(c=s)!="function"||c.prototype&&c.prototype.isReactComponent||!e)return s;var l=s(e);return C_.exports.isElement(l)&&console.warn(s5(s)+" is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details."),c0(l,e,t,i)}var c;return s instanceof q_e?t?(s.inject(t,i),s.getName(i)):s:n5(s)?function d(f,g){var m,_,C=[];for(var S in f)f.hasOwnProperty(S)&&!Bj(f[S])&&(Array.isArray(f[S])&&f[S].isCss||dT(f[S])?C.push(Fj(S)+":",f[S],";"):n5(f[S])?C.push.apply(C,d(f[S],S)):C.push(Fj(S)+": "+(m=S,(_=f[S])==null||typeof _=="boolean"||_===""?"":typeof _!="number"||_===0||m in h_e?String(_).trim():_+"px")+";"));return g?[g+" {"].concat(C,["}"]):C}(s):s.toString()}var Vj=function(s){return Array.isArray(s)&&(s.isCss=!0),s};function X_e(s){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return dT(s)||n5(s)?Vj(c0(Mj(uT,[s].concat(t)))):t.length===0&&s.length===1&&typeof s[0]=="string"?s:Vj(c0(Mj(s,t)))}var Wj=/invalid hook call/i,tk=new Set,J_e=function(s,e){{var t="The component "+s+(e?' with the id of "'+e+'"':"")+` has been created dynamically.
You may see this warning because you've called styled inside another component.
To resolve this only create new StyledComponents outside of any render method and function component.`,i=console.error;try{var n=!0;console.error=function(o){if(Wj.test(o))n=!1,tk.delete(t);else{for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];i.apply(void 0,[o].concat(a))}},ye.exports.useRef(),n&&!tk.has(t)&&(console.warn(t),tk.add(t))}catch(o){Wj.test(o.message)&&tk.delete(t)}finally{console.error=i}}},eve=function(s,e,t){return t===void 0&&(t=gg),s.theme!==t.theme&&s.theme||e||t.theme},tve=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ive=/(^-|-$)/g;function xP(s){return s.replace(tve,"-").replace(ive,"")}var nve=function(s){return o5(zQ(s)>>>0)};function ik(s){return typeof s=="string"&&s.charAt(0)===s.charAt(0).toLowerCase()}var a5=function(s){return typeof s=="function"||typeof s=="object"&&s!==null&&!Array.isArray(s)},sve=function(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"};function ove(s,e,t){var i=s[t];a5(e)&&a5(i)?jQ(i,e):s[t]=e}function jQ(s){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];for(var n=0,o=t;n<o.length;n++){var r=o[n];if(a5(r))for(var a in r)sve(a)&&ove(s,r[a],a)}return s}var KQ=Fr.createContext();KQ.Consumer;var DP={};function qQ(s,e,t){var i=VQ(s),n=!ik(s),o=e.attrs,r=o===void 0?uT:o,a=e.componentId,l=a===void 0?function(L,k){var T=typeof L!="string"?"sc":xP(L);DP[T]=(DP[T]||0)+1;var A=T+"-"+nve("5.3.6"+T+DP[T]);return k?k+"-"+A:A}(e.displayName,e.parentComponentId):a,c=e.displayName,d=c===void 0?function(L){return ik(L)?"styled."+L:"Styled("+s5(L)+")"}(s):c,f=e.displayName&&e.componentId?xP(e.displayName)+"-"+e.componentId:e.componentId||l,g=i&&s.attrs?Array.prototype.concat(s.attrs,r).filter(Boolean):r,m=e.shouldForwardProp;i&&s.shouldForwardProp&&(m=e.shouldForwardProp?function(L,k,T){return s.shouldForwardProp(L,k,T)&&e.shouldForwardProp(L,k,T)}:s.shouldForwardProp);var _,C=new W_e(t,f,i?s.componentStyle:void 0),S=C.isStatic&&r.length===0,x=function(L,k){return function(T,A,O,I){var R=T.attrs,B=T.componentStyle,z=T.defaultProps,q=T.foldedComponentIds,te=T.shouldForwardProp,U=T.styledComponentId,X=T.target;ye.exports.useDebugValue(U);var le=function(tt,_e,Vt){tt===void 0&&(tt=gg);var Ne=Th({},_e,{theme:tt}),bt={};return Vt.forEach(function(mt){var qe,Fe,Wt,Kt=mt;for(qe in dT(Kt)&&(Kt=Kt(Ne)),Kt)Ne[qe]=bt[qe]=qe==="className"?(Fe=bt[qe],Wt=Kt[qe],Fe&&Wt?Fe+" "+Wt:Fe||Wt):Kt[qe]}),[Ne,bt]}(eve(A,ye.exports.useContext(KQ),z)||gg,A,R),be=le[0],pe=le[1],ke=function(tt,_e,Vt,Ne){var bt=j_e(),mt=K_e(),qe=_e?tt.generateAndInjectStyles(gg,bt,mt):tt.generateAndInjectStyles(Vt,bt,mt);return ye.exports.useDebugValue(qe),!_e&&Ne&&Ne(qe),qe}(B,I,be,T.warnTooManyClasses),He=O,Ge=pe.$as||A.$as||pe.as||A.as||X,Ue=ik(Ge),ce=pe!==A?Th({},A,{},pe):A,ue={};for(var $e in ce)$e[0]!=="$"&&$e!=="as"&&($e==="forwardedAs"?ue.as=ce[$e]:(te?te($e,Ij,Ge):!Ue||Ij($e))&&(ue[$e]=ce[$e]));return A.style&&pe.style!==A.style&&(ue.style=Th({},A.style,{},pe.style)),ue.className=Array.prototype.concat(q,U,ke!==U?ke:null,A.className,pe.className).filter(Boolean).join(" "),ue.ref=He,ye.exports.createElement(Ge,ue)}(_,L,k,S)};return x.displayName=d,(_=Fr.forwardRef(x)).attrs=g,_.componentStyle=C,_.displayName=d,_.shouldForwardProp=m,_.foldedComponentIds=i?Array.prototype.concat(s.foldedComponentIds,s.styledComponentId):uT,_.styledComponentId=f,_.target=i?s.target:s,_.withComponent=function(L){var k=e.componentId,T=function(O,I){if(O==null)return{};var R,B,z={},q=Object.keys(O);for(B=0;B<q.length;B++)R=q[B],I.indexOf(R)>=0||(z[R]=O[R]);return z}(e,["componentId"]),A=k&&k+"-"+(ik(L)?L:xP(s5(L)));return qQ(L,Th({},T,{attrs:g,componentId:A}),t)},Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(L){this._foldedDefaultProps=i?jQ({},s.defaultProps,L):L}}),J_e(d,f),_.warnTooManyClasses=function(L,k){var T={},A=!1;return function(O){if(!A&&(T[O]=!0,Object.keys(T).length>=200)){var I=k?' with the id of "'+k+'"':"";console.warn("Over 200 classes were generated for component "+L+I+`.
Consider using the attrs method, together with a style object for frequently changed styles.
Example:
  const Component = styled.div.attrs(props => ({
    style: {
      background: props.background,
    },
  }))\`width: 100%;\`

  <Component />`),A=!0,T={}}}}(d,f),_.toString=function(){return"."+_.styledComponentId},n&&y_e(_,s,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),_}var l5=function(s){return function e(t,i,n){if(n===void 0&&(n=gg),!C_.exports.isValidElementType(i))return J0(1,String(i));var o=function(){return t(i,n,X_e.apply(void 0,arguments))};return o.withConfig=function(r){return e(t,i,Th({},n,{},r))},o.attrs=function(r){return e(t,i,Th({},n,{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},o}(qQ,s)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(s){l5[s]=l5(s)});typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn(`It looks like you've imported 'styled-components' on React Native.
Perhaps you're looking to import 'styled-components/native'?
Read more about this at https://www.styled-components.com/docs/basics#react-native`),typeof window<"u"&&(window["__styled-components-init__"]=window["__styled-components-init__"]||0,window["__styled-components-init__"]===1&&console.warn(`It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.

See https://s-c.sh/2BAXzed for more info.`),window["__styled-components-init__"]+=1);const Ya=l5,rve=Ya.div`
    box-sizing: border-box;
    display: flex;
    height: 100%;
    /* overflow: hidden; */
`;var Hj="F:\\GitHub\\tgis-3d-vite\\examples\\src\\App.tsx";const ave=ye.exports.memo(()=>ut(rve,{children:ut(zme,{},void 0,!1,{fileName:Hj,lineNumber:7,columnNumber:5},void 0)},void 0,!1,{fileName:Hj,lineNumber:6,columnNumber:3},void 0)),lve=Ya.div`
    box-sizing: border-box;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
`,cve=Ya.div`
    flex: 1;
    overflow: hidden;
    display: flex;
`,uve=Ya.div`
    box-sizing: border-box;
    position: relative;
    height: 100%;
`,dve=Ya.div`
    width: 178px;
    height: 100%;
    color: #000;
    left: 0;
    top: 0;
    background-color: #302d2d;
`,hve=Ya.div`
    cursor: pointer;
    transition: .3s;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    .label {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        padding: 12px 15px;
        &:hover, &.active {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .label-title {
            display: flex;
            align-items: center;
            color: #d2d2d2;
            .title-icon {
                display: flex;
                align-items: center;
                margin-right: 4px;
            }
            .title-text {
                font-size: 14px;
                display: flex;
                align-items: center;
                font-weight: bold;
            }
        }
        .collapse-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            transition: .3s;
            color: #d2d2d2;
            .iconfont {
                font-size: 16px;
            }
            &.collapse {
                transform: rotate(90deg);
                transform-origin: center center;
            }
        }
    }
    .children {
        width: 100%;
    }
`,fve=Ya.div`
    box-sizing: border-box;
    display: flex;
    align-items: center;
    padding: 10px 0px 10px 30px;
    width: 100%;
    position: relative;
    &:hover, &.active {
        background-color: rgba(255, 255, 255, 0.1);
    }
    &:hover::before {
        content: " ";
        display: block;
        width: 3px;
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        background-color: rgba(255, 255, 255, 0.3);
    }
    .child-icon {
        width: 6px;
        height: 6px;
        border-radius: 6px;
        background-color: #fff;
        margin-right: 6px;
    }
    .child-title {
        font-weight: 300;
        font-size: 12px;
        color: #d2d2d2;
    }
`;var Or="F:\\GitHub\\tgis-3d-vite\\examples\\src\\components\\Sidebar\\index.tsx";const gve=ye.exports.memo(({title:s})=>ut(fve,{onClick:()=>{var t;(t=document.getElementById(s))==null||t.scrollIntoView({behavior:"smooth"})},children:[ut("div",{className:"child-icon"},void 0,!1,{fileName:Or,lineNumber:16,columnNumber:13},void 0),ut("div",{className:"child-title",children:s},void 0,!1,{fileName:Or,lineNumber:17,columnNumber:13},void 0)]},void 0,!0,{fileName:Or,lineNumber:15,columnNumber:9},void 0)),pve=ye.exports.memo(({title:s,icon:e,children:t})=>{const[i,n]=ye.exports.useState(!1);return ut(hve,{children:[ut("a",{className:"label",onClick:()=>{var r;(r=document.getElementById(s))==null||r.scrollIntoView({behavior:"smooth"}),n(!i)},children:[ut("div",{className:"label-title",children:[ut("div",{className:"title-icon",children:ut("span",{className:`iconfont ${e}`},void 0,!1,{fileName:Or,lineNumber:40,columnNumber:25},void 0)},void 0,!1,{fileName:Or,lineNumber:39,columnNumber:21},void 0),ut("div",{className:"title-text",children:s},void 0,!1,{fileName:Or,lineNumber:42,columnNumber:21},void 0)]},void 0,!0,{fileName:Or,lineNumber:38,columnNumber:17},void 0),ut("div",{className:`collapse-icon ${i?"collapse":void 0}`,children:ut("span",{className:"iconfont icon-arrow-right"},void 0,!1,{fileName:Or,lineNumber:45,columnNumber:21},void 0)},void 0,!1,{fileName:Or,lineNumber:44,columnNumber:17},void 0)]},void 0,!0,{fileName:Or,lineNumber:37,columnNumber:13},void 0),i&&ut("div",{className:"children",children:t&&t.length&&t.map((r,a)=>ye.exports.createElement(gve,{...r,key:a,__self:void 0,__source:{fileName:Or,lineNumber:51,columnNumber:89}}))},void 0,!1,{fileName:Or,lineNumber:50,columnNumber:21},void 0)]},void 0,!0,{fileName:Or,lineNumber:36,columnNumber:9},void 0)}),mve=ye.exports.memo(({data:s})=>ut(uve,{children:ut(dve,{children:s.map(e=>ye.exports.createElement(pve,{...e,key:e.id,__self:void 0,__source:{fileName:Or,lineNumber:67,columnNumber:35}}))},void 0,!1,{fileName:Or,lineNumber:66,columnNumber:13},void 0)},void 0,!1,{fileName:Or,lineNumber:65,columnNumber:9},void 0)),_ve="/examples/assets/create-map.1fe7f0e2.jpg",vve="/examples/assets/map-controls.7fc9c180.png",bve="/examples/assets/arcgis-blue.6e19de50.jpg",Cve="/examples/assets/arcgis-gray.9301817c.jpg",wve="/examples/assets/arcgis-warm.e3abd1a7.jpg",yve="/examples/assets/supermap-blue.31419314.jpg",Sve="/examples/assets/supermap-mvt.80e6110a.jpg",Lve="/examples/assets/supermap-warm.3cfb7d81.jpg",xve="/examples/assets/tgis-blue-4490.b750142f.jpg",Dve="/examples/assets/tgis-warm-4490.b8ecc4ca.jpg",kve="/examples/assets/tianditu-blue.bc21b556.jpg",Eve="/examples/assets/tianditu-warm.323456c5.jpg",Tve="/examples/assets/force-edge-bundling.225c40a9.gif",Ive="/examples/assets/heatmap.07170ab0.gif",Nve="/examples/assets/honeycomb.20fa3f8f.png",Rve="/examples/assets/migrate-time.2f8ff2d2.gif",Ave="/examples/assets/migrate.bbee07d2.gif",Mve="/examples/assets/polyline-time.cba5b483.gif",Ove="/examples/assets/draw.0257b6ea.gif",Pve="/examples/assets/measure.dc36f89f.gif",Fve="/examples/assets/popup.753bdf6b.png",Bve="/examples/assets/track-line.67b7629e.gif",Vve="/examples/assets/entity-billboard.a5c901e3.jpg",Wve="/examples/assets/entity-label.cade100d.jpg",Hve="/examples/assets/entity-mixin.f70fe0cd.jpg",zve="/examples/assets/entity-point.6f136460.jpg",Uve="/examples/assets/entity-polygon.f292f8eb.jpg",$ve="/examples/assets/entity-polyline.60944833.jpg",jve=Ya.div`
    box-sizing: border-box;
    flex: 1;
    padding: 40px 20px;
    height: 100%;
    overflow: auto;
`,Kve=Ya.div`
    box-sizing: border-box;
    .title {
        margin-top: 0px;
        height: 40px;
        line-height: 40px;
        margin-bottom: 0;
        margin-left: 2px;
        color: #555555;
        .iconfont {
            font-size: 18px;
            margin-right: 6px;
        }
    }
`,qve=Ya.div`
    border-top: 1px solid #e14d57;
    padding-top: 45px;
    padding-bottom: 20px;
    padding: 45px 0px 20px 0px;
    .second-title {
        font-size: 16px;
        margin: 0;
        line-height: 1;
        font-weight: 300;
        padding: 20px 0px 10px 0px;
        text-indent: 0.8em;
    }
    .second-child {
        display: flex;
        flex-wrap: wrap;
    }
`,Gve=Ya.div`
    width: 200px;
    height: 210px;
    padding: 15px 15px;
    transition: .3s;
    &:hover {
        transform: scale(1.1);
    }
    .content {
        cursor: pointer;
        height: 100%;
        border-radius: 2px;
        background: #fff;
        box-shadow: 0 0 3px rgb(150 150 150 / 50%);
        display: flex;
        flex-direction: column;
        .chart-title {
            height: 36px;
            line-height: 2.5;
            text-align: center;
            box-sizing: border-box;
            font-weight: 300;
            color: #2c3b41;
            font-size: 14px;
        }
        .chart-image {
            overflow: hidden;
            flex: 1;
            img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
        }
    }
`;var wr="F:\\GitHub\\tgis-3d-vite\\examples\\src\\components\\Content\\index.tsx";const GQ=ye.exports.createContext(null),Yve=ye.exports.memo(s=>{const{onClick:e}=ye.exports.useContext(GQ),t=ye.exports.useCallback(()=>{e==null||e(s)},[s]);return ut(Gve,{onClick:t,children:ut("div",{className:"content",children:[ut("div",{className:"chart-title",children:s.title},void 0,!1,{fileName:wr,lineNumber:32,columnNumber:17},void 0),ut("div",{className:"chart-image",children:ut("img",{src:new URL(Object.assign({"../../assets/images/basic/create-map.jpg":_ve,"../../assets/images/basic/map-controls.png":vve,"../../assets/images/layers/arcgis-blue.jpg":bve,"../../assets/images/layers/arcgis-gray.jpg":Cve,"../../assets/images/layers/arcgis-warm.jpg":wve,"../../assets/images/layers/supermap-blue.jpg":yve,"../../assets/images/layers/supermap-mvt.jpg":Sve,"../../assets/images/layers/supermap-warm.jpg":Lve,"../../assets/images/layers/tgis-blue-4490.jpg":xve,"../../assets/images/layers/tgis-warm-4490.jpg":Dve,"../../assets/images/layers/tianditu-blue.jpg":kve,"../../assets/images/layers/tianditu-warm.jpg":Eve,"../../assets/images/mapv/force-edge-bundling.gif":Tve,"../../assets/images/mapv/heatmap.gif":Ive,"../../assets/images/mapv/honeycomb.png":Nve,"../../assets/images/mapv/migrate-time.gif":Rve,"../../assets/images/mapv/migrate.gif":Ave,"../../assets/images/mapv/polyline-time.gif":Mve,"../../assets/images/scene-tools/draw.gif":Ove,"../../assets/images/scene-tools/measure.gif":Pve,"../../assets/images/scene-tools/popup.png":Fve,"../../assets/images/scene-tools/track-line.gif":Bve,"../../assets/images/vector/entity-billboard.jpg":Vve,"../../assets/images/vector/entity-label.jpg":Wve,"../../assets/images/vector/entity-mixin.jpg":Hve,"../../assets/images/vector/entity-point.jpg":zve,"../../assets/images/vector/entity-polygon.jpg":Uve,"../../assets/images/vector/entity-polyline.jpg":$ve})[`../../assets/images/${s.image}`],self.location).href,alt:""},void 0,!1,{fileName:wr,lineNumber:34,columnNumber:21},void 0)},void 0,!1,{fileName:wr,lineNumber:33,columnNumber:17},void 0)]},void 0,!0,{fileName:wr,lineNumber:31,columnNumber:13},void 0)},void 0,!1,{fileName:wr,lineNumber:30,columnNumber:9},void 0)}),Zve=ye.exports.memo(({title:s,list:e})=>ut(qve,{children:[ut("div",{className:"second-title",id:s,children:s},void 0,!1,{fileName:wr,lineNumber:44,columnNumber:13},void 0),ut("div",{className:"second-child",children:e==null?void 0:e.map((t,i)=>ye.exports.createElement(Yve,{...t,key:i,__self:void 0,__source:{fileName:wr,lineNumber:46,columnNumber:45}}))},void 0,!1,{fileName:wr,lineNumber:45,columnNumber:13},void 0)]},void 0,!0,{fileName:wr,lineNumber:43,columnNumber:9},void 0)),Qve=ye.exports.memo(({title:s,children:e,icon:t})=>ut(Kve,{children:[ut("h3",{className:"title",id:s,children:[ut("span",{className:`iconfont ${t}`},void 0,!1,{fileName:wr,lineNumber:56,columnNumber:17},void 0),s]},void 0,!0,{fileName:wr,lineNumber:55,columnNumber:13},void 0),ut("div",{className:"child",children:e==null?void 0:e.map((i,n)=>ye.exports.createElement(Zve,{...i,key:n,__self:void 0,__source:{fileName:wr,lineNumber:60,columnNumber:49}}))},void 0,!1,{fileName:wr,lineNumber:59,columnNumber:13},void 0)]},void 0,!0,{fileName:wr,lineNumber:54,columnNumber:9},void 0)),Xve=ye.exports.memo(({data:s,onClick:e})=>ut(jve,{children:ut(GQ.Provider,{value:{onClick:e},children:s.map((t,i)=>ut(Qve,{...t},i,!1,{fileName:wr,lineNumber:74,columnNumber:25},void 0))},void 0,!1,{fileName:wr,lineNumber:69,columnNumber:13},void 0)},void 0,!1,{fileName:wr,lineNumber:68,columnNumber:9},void 0)),Jve=Ya.div`
    box-sizing: border-box;
    height: 70px;
    background-color: #000;
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    .title {
        font-weight: bold;
        font-size: 20px;
    }
    .navs {
        display: flex;
        font-size: 14px;
        margin-right: 20px;
        .nav-btn {
            cursor: pointer;
            color: #fff;
            text-decoration: none;
            &:hover {
                text-decoration: underline;
            }
        }
    }
`;var nk="F:\\GitHub\\tgis-3d-vite\\examples\\src\\components\\Header\\index.tsx";const ebe=()=>ut(Jve,{children:[ut("div",{className:"title",children:"TGIS map3d \u793A\u4F8B"},void 0,!1,{fileName:nk,lineNumber:7,columnNumber:13},void 0),ut("div",{className:"navs",children:ut("a",{className:"nav-btn",href:"./doc/index.html",children:"doc"},void 0,!1,{fileName:nk,lineNumber:9,columnNumber:17},void 0)},void 0,!1,{fileName:nk,lineNumber:8,columnNumber:13},void 0)]},void 0,!0,{fileName:nk,lineNumber:6,columnNumber:9},void 0),tbe=ye.exports.memo(ebe);var iw="F:\\GitHub\\tgis-3d-vite\\examples\\src\\pages\\Home\\index.tsx";const ibe=ye.exports.memo(()=>{const[s]=ye.exports.useState([{id:1,title:"\u5FEB\u901F\u5F00\u59CB",icon:"icon-icon_fabu",children:[{title:"\u57FA\u7840\u90E8\u5206",list:[{title:"\u521B\u5EFA\u5730\u56FE",url:"./codes/basic/create-map.js",image:"basic/create-map.jpg"}]}]},{id:2,title:"\u57FA\u7840\u56FE\u5C42",icon:"icon--guoji-xianxing",children:[{title:"\u5728\u7EBF\u670D\u52A1(\u4E92\u8054\u7F51)",list:[{title:"ArcGis\u84DD\u8272\u5E95\u56FE",url:"./codes/layers/arcgis-blue.js",image:"layers/arcgis-blue.jpg"},{title:"ArcGis\u7070\u8272\u5E95\u56FE",url:"./codes/layers/arcgis-gray.js",image:"layers/arcgis-gray.jpg"},{title:"ArcGis\u767D\u8272\u5E95\u56FE",url:"./codes/layers/arcgis-warm.js",image:"layers/arcgis-warm.jpg"},{title:"\u5929\u5730\u56FE\u84DD\u8272\u5E95\u56FE",url:"./codes/layers/tianditu-blue.js",image:"layers/tianditu-blue.jpg"},{title:"\u5929\u5730\u56FE\u767D\u8272\u5E95\u56FE",url:"./codes/layers/tianditu-warm.js",image:"layers/tianditu-warm.jpg"},{title:"\u8D85\u56FE\u767D\u8272\u5E95\u56FE(\u6DF1\u5733)",url:"./codes/layers/supermap-warm.js",image:"layers/supermap-warm.jpg"},{title:"\u8D85\u56FE\u84DD\u8272\u5E95\u56FE(\u6DF1\u5733)",url:"./codes/layers/supermap-blue.js",image:"layers/supermap-blue.jpg"}]},{title:"\u4FE1\u521B\u4E91\u670D\u52A1(\u5185\u7F51)",list:[{title:"\u5929\u5730\u56FE\u84DD\u8272\u5E95\u56FE",url:"./codes/layers/tianditu-blue-1.js",image:"layers/tianditu-blue.jpg"},{title:"\u5929\u5730\u56FE\u767D\u8272\u5E95\u56FE",url:"./codes/layers/tianditu-warm-1.js",image:"layers/tianditu-warm.jpg"},{title:"\u89C4\u8D44\u84DD\u8272\u5E95\u56FE",url:"./codes/layers/tgis-blue-4490.js",image:"layers/tgis-blue-4490.jpg"},{title:"\u89C4\u8D44\u767D\u8272\u5E95\u56FE",url:"./codes/layers/tgis-warm-4490.js",image:"layers/tgis-warm-4490.jpg"},{title:"TGIS MVT\u56FE\u5C42",url:"./codes/layers/supermap-mvt.js",image:"layers/supermap-mvt.jpg"}]}]},{id:5,title:"\u77E2\u91CF\u6570\u636E",icon:"icon-guizeyinqing",children:[{title:"\u57FA\u7840\u5BF9\u8C61",list:[{title:"\u6587\u5B57",url:"./codes/vector/entity-label.js",image:"vector/entity-label.jpg"},{title:"\u56FE\u7247",url:"./codes/vector/entity-billboard.js",image:"vector/entity-billboard.jpg"},{title:"\u70B9",url:"./codes/vector/entity-point.js",image:"vector/entity-point.jpg"},{title:"\u7EBF",url:"./codes/vector/entity-polyline.js",image:"vector/entity-polyline.jpg"},{title:"\u7EBF",url:"./codes/vector/entity-polygon.js",image:"vector/entity-polygon.jpg"},{title:"\u6DF7\u5408\u77E2\u91CF",url:"./codes/vector/entity-mixin.js",image:"vector/entity-mixin.jpg"}]}]}]),e=ye.exports.useCallback(({url:t,title:i})=>{const n=window.open(`${qpe(`#/editor?r=${t}`)}`,i);n&&(n.onload=function(){n.document.title=i+" - TGis 2d \u793A\u4F8B"})},[s]);return ut(lve,{children:[ut(tbe,{},void 0,!1,{fileName:iw,lineNumber:146,columnNumber:13},void 0),ut(cve,{children:[ut(mve,{data:s},void 0,!1,{fileName:iw,lineNumber:148,columnNumber:17},void 0),ut(Xve,{onClick:e,data:s},void 0,!1,{fileName:iw,lineNumber:149,columnNumber:17},void 0)]},void 0,!0,{fileName:iw,lineNumber:147,columnNumber:13},void 0)]},void 0,!0,{fileName:iw,lineNumber:145,columnNumber:9},void 0)});function Jw(){return Jw=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},Jw.apply(this,arguments)}var kP,YQ={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/kP=YQ,function(){var s={}.hasOwnProperty;function e(){for(var t=[],i=0;i<arguments.length;i++){var n=arguments[i];if(n){var o=typeof n;if(o==="string"||o==="number")t.push(n);else if(Array.isArray(n)){if(n.length){var r=e.apply(null,n);r&&t.push(r)}}else if(o==="object")if(n.toString===Object.prototype.toString)for(var a in n)s.call(n,a)&&n[a]&&t.push(a);else t.push(n.toString())}}return t.join(" ")}kP.exports?(e.default=e,kP.exports=e):window.classNames=e}();var c5=YQ.exports,nbe=/^\s+|\s+$/g,sbe=/^[-+]0x[0-9a-f]+$/i,obe=/^0b[01]+$/i,rbe=/^0o[0-7]+$/i,abe=parseInt,lbe=Object.prototype.toString;function zj(s){var e=typeof s;return!!s&&(e=="object"||e=="function")}function EP(s){if(typeof s=="number")return s;if(function(i){return typeof i=="symbol"||function(n){return!!n&&typeof n=="object"}(i)&&lbe.call(i)=="[object Symbol]"}(s))return NaN;if(zj(s)){var e=typeof s.valueOf=="function"?s.valueOf():s;s=zj(e)?e+"":e}if(typeof s!="string")return s===0?s:+s;s=s.replace(nbe,"");var t=obe.test(s);return t||rbe.test(s)?abe(s.slice(2),t?2:8):sbe.test(s)?NaN:+s}var Pc=function(s,e,t){return t===void 0&&(t=e,e=void 0),t!==void 0&&(t=(t=EP(t))==t?t:0),e!==void 0&&(e=(e=EP(e))==e?e:0),function(i,n,o){return i==i&&(o!==void 0&&(i=i<=o?i:o),n!==void 0&&(i=i>=n?i:n)),i}(EP(s),e,t)},sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},u5={exports:{}};(function(s,e){var t="__lodash_hash_undefined__",i=9007199254740991,n="[object Arguments]",o="[object Array]",r="[object Boolean]",a="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",f="[object Number]",g="[object Object]",m="[object Promise]",_="[object RegExp]",C="[object Set]",S="[object String]",x="[object Symbol]",L="[object WeakMap]",k="[object ArrayBuffer]",T="[object DataView]",A=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[n]=I[o]=I[k]=I[r]=I[T]=I[a]=I[l]=I[c]=I[d]=I[f]=I[g]=I[_]=I[C]=I[S]=I[L]=!1;var R=typeof sg=="object"&&sg&&sg.Object===Object&&sg,B=typeof self=="object"&&self&&self.Object===Object&&self,z=R||B||Function("return this")(),q=e&&!e.nodeType&&e,te=q&&s&&!s.nodeType&&s,U=te&&te.exports===q,X=U&&R.process,le=function(){try{return X&&X.binding&&X.binding("util")}catch{}}(),be=le&&le.isTypedArray;function pe(ae,xe){for(var dt=-1,Ht=ae==null?0:ae.length;++dt<Ht;)if(xe(ae[dt],dt,ae))return!0;return!1}function ke(ae){var xe=-1,dt=Array(ae.size);return ae.forEach(function(Ht,ji){dt[++xe]=[ji,Ht]}),dt}function He(ae){var xe=-1,dt=Array(ae.size);return ae.forEach(function(Ht){dt[++xe]=Ht}),dt}var Ge,Ue,ce,ue=Array.prototype,$e=Function.prototype,tt=Object.prototype,_e=z["__core-js_shared__"],Vt=$e.toString,Ne=tt.hasOwnProperty,bt=(Ge=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||""))?"Symbol(src)_1."+Ge:"",mt=tt.toString,qe=RegExp("^"+Vt.call(Ne).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fe=U?z.Buffer:void 0,Wt=z.Symbol,Kt=z.Uint8Array,It=tt.propertyIsEnumerable,ai=ue.splice,Pt=Wt?Wt.toStringTag:void 0,Ie=Object.getOwnPropertySymbols,Xe=Fe?Fe.isBuffer:void 0,ee=(Ue=Object.keys,ce=Object,function(ae){return Ue(ce(ae))}),ie=vo(z,"DataView"),ne=vo(z,"Map"),V=vo(z,"Promise"),W=vo(z,"Set"),Q=vo(z,"WeakMap"),Y=vo(Object,"create"),de=Nt(ie),ve=Nt(ne),rt=Nt(V),lt=Nt(W),Re=Nt(Q),Ye=Wt?Wt.prototype:void 0,wt=Ye?Ye.valueOf:void 0;function Ct(ae){var xe=-1,dt=ae==null?0:ae.length;for(this.clear();++xe<dt;){var Ht=ae[xe];this.set(Ht[0],Ht[1])}}function Qe(ae){var xe=-1,dt=ae==null?0:ae.length;for(this.clear();++xe<dt;){var Ht=ae[xe];this.set(Ht[0],Ht[1])}}function Mt(ae){var xe=-1,dt=ae==null?0:ae.length;for(this.clear();++xe<dt;){var Ht=ae[xe];this.set(Ht[0],Ht[1])}}function Ot(ae){var xe=-1,dt=ae==null?0:ae.length;for(this.__data__=new Mt;++xe<dt;)this.add(ae[xe])}function Mi(ae){var xe=this.__data__=new Qe(ae);this.size=xe.size}function zt(ae,xe){var dt=Me(ae),Ht=!dt&&me(ae),ji=!dt&&!Ht&&_t(ae),$i=!dt&&!Ht&&!ji&&Tn(ae),as=dt||Ht||ji||$i,ms=as?function(ei,$o){for(var jo=-1,Qs=Array(ei);++jo<ei;)Qs[jo]=$o(jo);return Qs}(ae.length,String):[],Zr=ms.length;for(var zn in ae)!xe&&!Ne.call(ae,zn)||as&&(zn=="length"||ji&&(zn=="offset"||zn=="parent")||$i&&(zn=="buffer"||zn=="byteLength"||zn=="byteOffset")||Bl(zn,Zr))||ms.push(zn);return ms}function Fi(ae,xe){for(var dt=ae.length;dt--;)if(H(ae[dt][0],xe))return dt;return-1}function Wi(ae){return ae==null?ae===void 0?"[object Undefined]":"[object Null]":Pt&&Pt in Object(ae)?function(xe){var dt=Ne.call(xe,Pt),Ht=xe[Pt];try{xe[Pt]=void 0;var ji=!0}catch{}var $i=mt.call(xe);return ji&&(dt?xe[Pt]=Ht:delete xe[Pt]),$i}(ae):function(xe){return mt.call(xe)}(ae)}function Ti(ae){return Qt(ae)&&Wi(ae)==n}function rs(ae,xe,dt,Ht,ji){return ae===xe||(ae==null||xe==null||!Qt(ae)&&!Qt(xe)?ae!=ae&&xe!=xe:function($i,as,ms,Zr,zn,ei){var $o=Me($i),jo=Me(as),Qs=$o?o:Bs($i),Qr=jo?o:Bs(as),Vl=(Qs=Qs==n?g:Qs)==g,bu=(Qr=Qr==n?g:Qr)==g,Wl=Qs==Qr;if(Wl&&_t($i)){if(!_t(as))return!1;$o=!0,Vl=!1}if(Wl&&!Vl)return ei||(ei=new Mi),$o||Tn($i)?Zs($i,as,ms,Zr,zn,ei):function(wn,Ji,or,rr,Hl,bo,Xr){switch(or){case T:if(wn.byteLength!=Ji.byteLength||wn.byteOffset!=Ji.byteOffset)return!1;wn=wn.buffer,Ji=Ji.buffer;case k:return!(wn.byteLength!=Ji.byteLength||!bo(new Kt(wn),new Kt(Ji)));case r:case a:case f:return H(+wn,+Ji);case l:return wn.name==Ji.name&&wn.message==Ji.message;case _:case S:return wn==Ji+"";case d:var Ja=ke;case C:var vc=1&rr;if(Ja||(Ja=He),wn.size!=Ji.size&&!vc)return!1;var lf=Xr.get(wn);if(lf)return lf==Ji;rr|=2,Xr.set(wn,Ji);var Jr=Zs(Ja(wn),Ja(Ji),rr,Hl,bo,Xr);return Xr.delete(wn),Jr;case x:if(wt)return wt.call(wn)==wt.call(Ji)}return!1}($i,as,Qs,ms,Zr,zn,ei);if(!(1&ms)){var _c=Vl&&Ne.call($i,"__wrapped__"),af=bu&&Ne.call(as,"__wrapped__");if(_c||af){var F_=_c?$i.value():$i,SC=af?as.value():as;return ei||(ei=new Mi),zn(F_,SC,ms,Zr,ei)}}return Wl?(ei||(ei=new Mi),function(wn,Ji,or,rr,Hl,bo){var Xr=1&or,Ja=Uo(wn),vc=Ja.length,lf=Uo(Ji).length;if(vc!=lf&&!Xr)return!1;for(var Jr=vc;Jr--;){var zl=Ja[Jr];if(!(Xr?zl in Ji:Ne.call(Ji,zl)))return!1}var cf=bo.get(wn);if(cf&&bo.get(Ji))return cf==Ji;var bc=!0;bo.set(wn,Ji),bo.set(Ji,wn);for(var uf=Xr;++Jr<vc;){var Gi=wn[zl=Ja[Jr]],Cu=Ji[zl];if(rr)var df=Xr?rr(Cu,Gi,zl,Ji,wn,bo):rr(Gi,Cu,zl,wn,Ji,bo);if(!(df===void 0?Gi===Cu||Hl(Gi,Cu,or,rr,bo):df)){bc=!1;break}uf||(uf=zl=="constructor")}if(bc&&!uf){var _i=wn.constructor,Nd=Ji.constructor;_i==Nd||!("constructor"in wn)||!("constructor"in Ji)||typeof _i=="function"&&_i instanceof _i&&typeof Nd=="function"&&Nd instanceof Nd||(bc=!1)}return bo.delete(wn),bo.delete(Ji),bc}($i,as,ms,Zr,zn,ei)):!1}(ae,xe,dt,Ht,rs,ji))}function un(ae){return!(!Lt(ae)||function(xe){return!!bt&&bt in xe}(ae))&&(Jt(ae)?qe:A).test(Nt(ae))}function Qn(ae){if(dt=(xe=ae)&&xe.constructor,Ht=typeof dt=="function"&&dt.prototype||tt,xe!==Ht)return ee(ae);var xe,dt,Ht,ji=[];for(var $i in Object(ae))Ne.call(ae,$i)&&$i!="constructor"&&ji.push($i);return ji}function Zs(ae,xe,dt,Ht,ji,$i){var as=1&dt,ms=ae.length,Zr=xe.length;if(ms!=Zr&&!(as&&Zr>ms))return!1;var zn=$i.get(ae);if(zn&&$i.get(xe))return zn==xe;var ei=-1,$o=!0,jo=2&dt?new Ot:void 0;for($i.set(ae,xe),$i.set(xe,ae);++ei<ms;){var Qs=ae[ei],Qr=xe[ei];if(Ht)var Vl=as?Ht(Qr,Qs,ei,xe,ae,$i):Ht(Qs,Qr,ei,ae,xe,$i);if(Vl!==void 0){if(Vl)continue;$o=!1;break}if(jo){if(!pe(xe,function(bu,Wl){if(_c=Wl,!jo.has(_c)&&(Qs===bu||ji(Qs,bu,dt,Ht,$i)))return jo.push(Wl);var _c})){$o=!1;break}}else if(Qs!==Qr&&!ji(Qs,Qr,dt,Ht,$i)){$o=!1;break}}return $i.delete(ae),$i.delete(xe),$o}function Uo(ae){return function(xe,dt,Ht){var ji=dt(xe);return Me(xe)?ji:function($i,as){for(var ms=-1,Zr=as.length,zn=$i.length;++ms<Zr;)$i[zn+ms]=as[ms];return $i}(ji,Ht(xe))}(ae,hn,sr)}function ps(ae,xe){var dt,Ht,ji=ae.__data__;return((Ht=typeof(dt=xe))=="string"||Ht=="number"||Ht=="symbol"||Ht=="boolean"?dt!=="__proto__":dt===null)?ji[typeof xe=="string"?"string":"hash"]:ji.map}function vo(ae,xe){var dt=function(Ht,ji){return Ht==null?void 0:Ht[ji]}(ae,xe);return un(dt)?dt:void 0}Ct.prototype.clear=function(){this.__data__=Y?Y(null):{},this.size=0},Ct.prototype.delete=function(ae){var xe=this.has(ae)&&delete this.__data__[ae];return this.size-=xe?1:0,xe},Ct.prototype.get=function(ae){var xe=this.__data__;if(Y){var dt=xe[ae];return dt===t?void 0:dt}return Ne.call(xe,ae)?xe[ae]:void 0},Ct.prototype.has=function(ae){var xe=this.__data__;return Y?xe[ae]!==void 0:Ne.call(xe,ae)},Ct.prototype.set=function(ae,xe){var dt=this.__data__;return this.size+=this.has(ae)?0:1,dt[ae]=Y&&xe===void 0?t:xe,this},Qe.prototype.clear=function(){this.__data__=[],this.size=0},Qe.prototype.delete=function(ae){var xe=this.__data__,dt=Fi(xe,ae);return!(dt<0)&&(dt==xe.length-1?xe.pop():ai.call(xe,dt,1),--this.size,!0)},Qe.prototype.get=function(ae){var xe=this.__data__,dt=Fi(xe,ae);return dt<0?void 0:xe[dt][1]},Qe.prototype.has=function(ae){return Fi(this.__data__,ae)>-1},Qe.prototype.set=function(ae,xe){var dt=this.__data__,Ht=Fi(dt,ae);return Ht<0?(++this.size,dt.push([ae,xe])):dt[Ht][1]=xe,this},Mt.prototype.clear=function(){this.size=0,this.__data__={hash:new Ct,map:new(ne||Qe),string:new Ct}},Mt.prototype.delete=function(ae){var xe=ps(this,ae).delete(ae);return this.size-=xe?1:0,xe},Mt.prototype.get=function(ae){return ps(this,ae).get(ae)},Mt.prototype.has=function(ae){return ps(this,ae).has(ae)},Mt.prototype.set=function(ae,xe){var dt=ps(this,ae),Ht=dt.size;return dt.set(ae,xe),this.size+=dt.size==Ht?0:1,this},Ot.prototype.add=Ot.prototype.push=function(ae){return this.__data__.set(ae,t),this},Ot.prototype.has=function(ae){return this.__data__.has(ae)},Mi.prototype.clear=function(){this.__data__=new Qe,this.size=0},Mi.prototype.delete=function(ae){var xe=this.__data__,dt=xe.delete(ae);return this.size=xe.size,dt},Mi.prototype.get=function(ae){return this.__data__.get(ae)},Mi.prototype.has=function(ae){return this.__data__.has(ae)},Mi.prototype.set=function(ae,xe){var dt=this.__data__;if(dt instanceof Qe){var Ht=dt.__data__;if(!ne||Ht.length<199)return Ht.push([ae,xe]),this.size=++dt.size,this;dt=this.__data__=new Mt(Ht)}return dt.set(ae,xe),this.size=dt.size,this};var sr=Ie?function(ae){return ae==null?[]:(ae=Object(ae),function(xe,dt){for(var Ht=-1,ji=xe==null?0:xe.length,$i=0,as=[];++Ht<ji;){var ms=xe[Ht];dt(ms,Ht,xe)&&(as[$i++]=ms)}return as}(Ie(ae),function(xe){return It.call(ae,xe)}))}:function(){return[]},Bs=Wi;function Bl(ae,xe){return!!(xe=xe==null?i:xe)&&(typeof ae=="number"||O.test(ae))&&ae>-1&&ae%1==0&&ae<xe}function Nt(ae){if(ae!=null){try{return Vt.call(ae)}catch{}try{return ae+""}catch{}}return""}function H(ae,xe){return ae===xe||ae!=ae&&xe!=xe}(ie&&Bs(new ie(new ArrayBuffer(1)))!=T||ne&&Bs(new ne)!=d||V&&Bs(V.resolve())!=m||W&&Bs(new W)!=C||Q&&Bs(new Q)!=L)&&(Bs=function(ae){var xe=Wi(ae),dt=xe==g?ae.constructor:void 0,Ht=dt?Nt(dt):"";if(Ht)switch(Ht){case de:return T;case ve:return d;case rt:return m;case lt:return C;case Re:return L}return xe});var me=Ti(function(){return arguments}())?Ti:function(ae){return Qt(ae)&&Ne.call(ae,"callee")&&!It.call(ae,"callee")},Me=Array.isArray,_t=Xe||function(){return!1};function Jt(ae){if(!Lt(ae))return!1;var xe=Wi(ae);return xe==c||xe=="[object GeneratorFunction]"||xe=="[object AsyncFunction]"||xe=="[object Proxy]"}function oi(ae){return typeof ae=="number"&&ae>-1&&ae%1==0&&ae<=i}function Lt(ae){var xe=typeof ae;return ae!=null&&(xe=="object"||xe=="function")}function Qt(ae){return ae!=null&&typeof ae=="object"}var Tn=be?function(ae){return function(xe){return ae(xe)}}(be):function(ae){return Qt(ae)&&oi(ae.length)&&!!I[Wi(ae)]};function hn(ae){return(xe=ae)!=null&&oi(xe.length)&&!Jt(xe)?zt(ae):Qn(ae);var xe}s.exports=function(ae,xe){return rs(ae,xe)}})(u5,u5.exports);var cbe=u5.exports;function Uj(s,e,t){return s[e]?s[e][0]?s[e][0][t]:s[e][t]:e==="contentBoxSize"?s.contentRect[t==="inlineSize"?"width":"height"]:void 0}function ube(s){s===void 0&&(s={});var e=s.onResize,t=ye.exports.useRef(void 0);t.current=e;var i=s.round||Math.round,n=ye.exports.useRef(),o=ye.exports.useState({width:void 0,height:void 0}),r=o[0],a=o[1],l=ye.exports.useRef(!1);ye.exports.useEffect(function(){return l.current=!1,function(){l.current=!0}},[]);var c=ye.exports.useRef({width:void 0,height:void 0}),d=function(f,g){var m=ye.exports.useRef(null),_=ye.exports.useRef(null);_.current=g;var C=ye.exports.useRef(null);ye.exports.useEffect(function(){S()});var S=ye.exports.useCallback(function(){var x=C.current,L=_.current,k=x||(L?L instanceof Element?L:L.current:null);m.current&&m.current.element===k&&m.current.subscriber===f||(m.current&&m.current.cleanup&&m.current.cleanup(),m.current={element:k,subscriber:f,cleanup:k?f(k):void 0})},[f]);return ye.exports.useEffect(function(){return function(){m.current&&m.current.cleanup&&(m.current.cleanup(),m.current=null)}},[]),ye.exports.useCallback(function(x){C.current=x,S()},[S])}(ye.exports.useCallback(function(f){return n.current&&n.current.box===s.box&&n.current.round===i||(n.current={box:s.box,round:i,instance:new ResizeObserver(function(g){var m=g[0],_=s.box==="border-box"?"borderBoxSize":s.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",C=Uj(m,_,"inlineSize"),S=Uj(m,_,"blockSize"),x=C?i(C):void 0,L=S?i(S):void 0;if(c.current.width!==x||c.current.height!==L){var k={width:x,height:L};c.current.width=x,c.current.height=L,t.current?t.current(k):l.current||a(k)}})}),n.current.instance.observe(f,{box:s.box}),function(){n.current&&n.current.instance.unobserve(f)}},[s.box,i]),s.ref);return ye.exports.useMemo(function(){return{ref:d,width:r.width,height:r.height}},[d,r.width,r.height])}var dbe="allotment-module_splitView__L-yRc",hbe="allotment-module_sashContainer__fzwJF",fbe="allotment-module_splitViewContainer__rQnVa",ZQ="allotment-module_splitViewView__MGZ6O",$j="allotment-module_visible__AHq-h",gbe="allotment-module_vertical__WSwwa",pbe="allotment-module_horizontal__7doS8",mbe="allotment-module_separatorBorder__x-rDS",QQ=!1,XQ=!1,sk=void 0;typeof navigator=="object"&&(XQ=(sk=navigator.userAgent).indexOf("Macintosh")>=0,QQ=(sk.indexOf("Macintosh")>=0||sk.indexOf("iPad")>=0||sk.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);var JQ=QQ,_be=XQ;class vbe{constructor(){this._size=void 0}getSize(){return this._size}setSize(e){this._size=e}}function ok(s,e){var t=s.length,i=t-e.length;return i>=0&&s.slice(i,t)===e}var eX={exports:{}};(function(s){var e=Object.prototype.hasOwnProperty,t="~";function i(){}function n(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function o(l,c,d,f,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new n(d,f||l,g),_=t?t+c:c;return l._events[_]?l._events[_].fn?l._events[_]=[l._events[_],m]:l._events[_].push(m):(l._events[_]=m,l._eventsCount++),l}function r(l,c){--l._eventsCount==0?l._events=new i:delete l._events[c]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1)),a.prototype.eventNames=function(){var l,c,d=[];if(this._eventsCount===0)return d;for(c in l=this._events)e.call(l,c)&&d.push(t?c.slice(1):c);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(l)):d},a.prototype.listeners=function(l){var c=t?t+l:l,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,g=d.length,m=new Array(g);f<g;f++)m[f]=d[f].fn;return m},a.prototype.listenerCount=function(l){var c=t?t+l:l,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,c,d,f,g,m){var _=t?t+l:l;if(!this._events[_])return!1;var C,S,x=this._events[_],L=arguments.length;if(x.fn){switch(x.once&&this.removeListener(l,x.fn,void 0,!0),L){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,c),!0;case 3:return x.fn.call(x.context,c,d),!0;case 4:return x.fn.call(x.context,c,d,f),!0;case 5:return x.fn.call(x.context,c,d,f,g),!0;case 6:return x.fn.call(x.context,c,d,f,g,m),!0}for(S=1,C=new Array(L-1);S<L;S++)C[S-1]=arguments[S];x.fn.apply(x.context,C)}else{var k,T=x.length;for(S=0;S<T;S++)switch(x[S].once&&this.removeListener(l,x[S].fn,void 0,!0),L){case 1:x[S].fn.call(x[S].context);break;case 2:x[S].fn.call(x[S].context,c);break;case 3:x[S].fn.call(x[S].context,c,d);break;case 4:x[S].fn.call(x[S].context,c,d,f);break;default:if(!C)for(k=1,C=new Array(L-1);k<L;k++)C[k-1]=arguments[k];x[S].fn.apply(x[S].context,C)}}return!0},a.prototype.on=function(l,c,d){return o(this,l,c,d,!1)},a.prototype.once=function(l,c,d){return o(this,l,c,d,!0)},a.prototype.removeListener=function(l,c,d,f){var g=t?t+l:l;if(!this._events[g])return this;if(!c)return r(this,g),this;var m=this._events[g];if(m.fn)m.fn!==c||f&&!m.once||d&&m.context!==d||r(this,g);else{for(var _=0,C=[],S=m.length;_<S;_++)(m[_].fn!==c||f&&!m[_].once||d&&m[_].context!==d)&&C.push(m[_]);C.length?this._events[g]=C.length===1?C[0]:C:r(this,g)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=t?t+l:l,this._events[c]&&r(this,c)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,s.exports=a})(eX);var P8=eX.exports;function jj(s,e){var t=s.indexOf(e);t>-1&&(s.splice(t,1),s.unshift(e))}function TP(s,e){var t=s.indexOf(e);t>-1&&(s.splice(t,1),s.push(e))}function Zl(s,e,t){t===void 0&&(t=1);for(var i=Math.max(0,Math.ceil((e-s)/t)),n=new Array(i),o=-1;++o<i;)n[o]=s+o*t;return n}var bbe=/^\s+|\s+$/g,Cbe=/^[-+]0x[0-9a-f]+$/i,wbe=/^0b[01]+$/i,ybe=/^0o[0-7]+$/i,Sbe=parseInt,Lbe=typeof sg=="object"&&sg&&sg.Object===Object&&sg,xbe=typeof self=="object"&&self&&self.Object===Object&&self,Dbe=Lbe||xbe||Function("return this")(),kbe=Object.prototype.toString,Ebe=Math.max,Tbe=Math.min,IP=function(){return Dbe.Date.now()};function d5(s){var e=typeof s;return!!s&&(e=="object"||e=="function")}function Kj(s){if(typeof s=="number")return s;if(function(i){return typeof i=="symbol"||function(n){return!!n&&typeof n=="object"}(i)&&kbe.call(i)=="[object Symbol]"}(s))return NaN;if(d5(s)){var e=typeof s.valueOf=="function"?s.valueOf():s;s=d5(e)?e+"":e}if(typeof s!="string")return s===0?s:+s;s=s.replace(bbe,"");var t=wbe.test(s);return t||ybe.test(s)?Sbe(s.slice(2),t?2:8):Cbe.test(s)?NaN:+s}var Pa,ua,Ibe=function(s,e,t){var i,n,o,r,a,l,c=0,d=!1,f=!1,g=!0;if(typeof s!="function")throw new TypeError("Expected a function");function m(k){var T=i,A=n;return i=n=void 0,c=k,r=s.apply(A,T)}function _(k){return c=k,a=setTimeout(S,e),d?m(k):r}function C(k){var T=k-l;return l===void 0||T>=e||T<0||f&&k-c>=o}function S(){var k=IP();if(C(k))return x(k);a=setTimeout(S,function(T){var A=e-(T-l);return f?Tbe(A,o-(T-c)):A}(k))}function x(k){return a=void 0,g&&i?m(k):(i=n=void 0,r)}function L(){var k=IP(),T=C(k);if(i=arguments,n=this,l=k,T){if(a===void 0)return _(l);if(f)return a=setTimeout(S,e),m(l)}return a===void 0&&(a=setTimeout(S,e)),r}return e=Kj(e)||0,d5(t)&&(d=!!t.leading,o=(f="maxWait"in t)?Ebe(Kj(t.maxWait)||0,e):o,g="trailing"in t?!!t.trailing:g),L.cancel=function(){a!==void 0&&clearTimeout(a),c=0,i=l=n=a=void 0},L.flush=function(){return a===void 0?r:x(IP())},L},Nbe="sash-module_sash__K-9lB",Rbe="sash-module_disabled__Hm-wx",Abe="sash-module_mac__Jf6OJ",qj="sash-module_vertical__pB-rs",Mbe="sash-module_minimum__-UKxp",Obe="sash-module_maximum__TCWxD",Gj="sash-module_horizontal__kFbiw",NP="sash-module_hover__80W6I",RP="sash-module_active__bJspD";(function(s){s.Vertical="VERTICAL",s.Horizontal="HORIZONTAL"})(Pa||(Pa={})),function(s){s.Disabled="DISABLED",s.Minimum="MINIMUM",s.Maximum="MAXIMUM",s.Enabled="ENABLED"}(ua||(ua={}));var fT,AP,Uc,tX=JQ?20:8,iX=new P8;class Yj extends P8{get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle(Rbe,e===ua.Disabled),this.el.classList.toggle("dash-disabled",e===ua.Disabled),this.el.classList.toggle(Mbe,e===ua.Minimum),this.el.classList.toggle("sash-minimum",e===ua.Minimum),this.el.classList.toggle(Obe,e===ua.Maximum),this.el.classList.toggle("sash-maximum",e===ua.Maximum),this._state=e,this.emit("enablementChange",e))}constructor(e,t,i){var n;super(),this.el=void 0,this.layoutProvider=void 0,this.orientation=void 0,this.size=void 0,this.hoverDelay=300,this.hoverDelayer=Ibe(o=>o.classList.add("sash-hover",NP),this.hoverDelay),this._state=ua.Enabled,this.onPointerStart=o=>{var r=o.pageX,a=o.pageY,l={startX:r,currentX:r,startY:a,currentY:a};this.el.classList.add("sash-active",RP),this.emit("start",l),this.el.setPointerCapture(o.pointerId);var c=f=>{f.preventDefault();var g={startX:r,currentX:f.pageX,startY:a,currentY:f.pageY};this.emit("change",g)},d=f=>{f.preventDefault(),this.el.classList.remove("sash-active",RP),this.hoverDelayer.cancel(),this.emit("end"),this.el.releasePointerCapture(f.pointerId),window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",d)};window.addEventListener("pointermove",c),window.addEventListener("pointerup",d)},this.onPointerDoublePress=()=>{this.emit("reset")},this.onMouseEnter=()=>{this.el.classList.contains(RP)?(this.hoverDelayer.cancel(),this.el.classList.add("sash-hover",NP)):this.hoverDelayer(this.el)},this.onMouseLeave=()=>{this.hoverDelayer.cancel(),this.el.classList.remove("sash-hover",NP)},this.el=document.createElement("div"),this.el.classList.add("sash",Nbe),this.el.dataset.testid="sash",e.append(this.el),_be&&this.el.classList.add("sash-mac",Abe),this.el.addEventListener("pointerdown",this.onPointerStart),this.el.addEventListener("dblclick",this.onPointerDoublePress),this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave),typeof i.size=="number"?(this.size=i.size,i.orientation===Pa.Vertical?this.el.style.width=this.size+"px":this.el.style.height=this.size+"px"):(this.size=tX,iX.on("onDidChangeGlobalSize",o=>{this.size=o,this.layout()})),this.layoutProvider=t,this.orientation=(n=i.orientation)!=null?n:Pa.Vertical,this.orientation===Pa.Horizontal?(this.el.classList.add("sash-horizontal",Gj),this.el.classList.remove("sash-vertical",qj)):(this.el.classList.remove("sash-horizontal",Gj),this.el.classList.add("sash-vertical",qj)),this.layout()}layout(){if(this.orientation===Pa.Vertical){var e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{var t=this.layoutProvider;this.el.style.top=t.getHorizontalSashTop(this)-this.size/2+"px",t.getHorizontalSashLeft&&(this.el.style.left=t.getHorizontalSashLeft(this)+"px"),t.getHorizontalSashWidth&&(this.el.style.width=t.getHorizontalSashWidth(this)+"px")}}dispose(){this.el.removeEventListener("pointerdown",this.onPointerStart),this.el.removeEventListener("dblclick",this.onPointerDoublePress),this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",()=>this.onMouseLeave),this.el.remove()}}(AP=fT||(fT={})).Distribute={type:"distribute"},AP.Split=function(s){return{type:"split",index:s}},AP.Invisible=function(s){return{type:"invisible",cachedVisibleSize:s}},function(s){s.Normal="NORMAL",s.Low="LOW",s.High="HIGH"}(Uc||(Uc={}));class nX{constructor(e,t,i){this.container=void 0,this.view=void 0,this._size=void 0,this._cachedVisibleSize=void 0,this.container=e,this.view=t,this.container.classList.add("split-view-view",ZQ),this.container.dataset.testid="split-view-view",typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("split-view-view-visible",$j)):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get priority(){return this.view.priority}get snap(){return!!this.view.snap}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return this._cachedVisibleSize===void 0}setVisible(e,t){e!==this.visible&&(e?(this.size=Pc(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle($j,e),this.container.classList.toggle("split-view-view-visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e){this.layoutContainer(e),this.view.layout(this.size,e)}}class Pbe extends nX{layoutContainer(e){this.container.style.left=e+"px",this.container.style.width=this.size+"px"}}class Fbe extends nX{layoutContainer(e){this.container.style.top=e+"px",this.container.style.height=this.size+"px"}}class Bbe extends P8{get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t,i){var n,o;if(t===void 0&&(t={}),super(),this.onDidChange=void 0,this.orientation=void 0,this.sashContainer=void 0,this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.sashDragState=void 0,this.proportionalLayout=void 0,this.getSashOrthogonalSize=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onSashEnd=f=>{for(var g of(this.emit("sashchange",f),this.saveProportions(),this.viewItems))g.enabled=!0},this.orientation=(n=t.orientation)!=null?n:Pa.Vertical,this.proportionalLayout=(o=t.proportionalLayout)==null||o,this.getSashOrthogonalSize=t.getSashOrthogonalSize,i&&(this.onDidChange=i),this.sashContainer=document.createElement("div"),this.sashContainer.classList.add("sash-container",hbe),e.prepend(this.sashContainer),t.descriptor){for(var[r,a]of(this.size=t.descriptor.size,t.descriptor.views.entries())){var l=a.size,c=a.container,d=a.view;this.addView(c,d,l,r,!0)}this.contentSize=this.viewItems.reduce((f,g)=>f+g.size,0),this.saveProportions()}}addView(e,t,i,n,o){var r;n===void 0&&(n=this.viewItems.length),r=typeof i=="number"?i:i.type==="split"?this.getViewSize(i.index)/2:i.type==="invisible"?{cachedVisibleSize:i.cachedVisibleSize}:t.minimumSize;var a=this.orientation===Pa.Vertical?new Fbe(e,t,r):new Pbe(e,t,r);if(this.viewItems.splice(n,0,a),this.viewItems.length>1){var l=this.orientation===Pa.Vertical?new Yj(this.sashContainer,{getHorizontalSashTop:f=>this.getSashPosition(f),getHorizontalSashWidth:this.getSashOrthogonalSize},{orientation:Pa.Horizontal}):new Yj(this.sashContainer,{getVerticalSashLeft:f=>this.getSashPosition(f),getVerticalSashHeight:this.getSashOrthogonalSize},{orientation:Pa.Vertical}),c=this.orientation===Pa.Vertical?f=>({sash:l,start:f.startY,current:f.currentY}):f=>({sash:l,start:f.startX,current:f.currentX});l.on("start",f=>this.onSashStart(c(f))),l.on("change",f=>this.onSashChange(c(f))),l.on("end",()=>this.onSashEnd(this.sashItems.findIndex(f=>f.sash===l))),l.on("reset",()=>{var f=this.sashItems.findIndex(S=>S.sash===l),g=Zl(f,-1,-1),m=Zl(f+1,this.viewItems.length),_=this.findFirstSnapIndex(g),C=this.findFirstSnapIndex(m);(typeof _!="number"||this.viewItems[_].visible)&&(typeof C!="number"||this.viewItems[C].visible)&&this.emit("sashreset",f)});var d={sash:l};this.sashItems.splice(n-1,0,d)}o||this.relayout(),o||typeof i=="number"||i.type!=="distribute"||this.distributeViewSizes()}removeView(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");var i=this.viewItems.splice(e,1)[0].view;if(this.viewItems.length>=1){var n=Math.max(e-1,0);this.sashItems.splice(n,1)[0].sash.dispose()}return this.relayout(),t&&t.type==="distribute"&&this.distributeViewSizes(),i}moveView(e,t,i){var n=this.getViewCachedVisibleSize(t),o=n===void 0?this.getViewSize(t):fT.Invisible(n),r=this.removeView(t);this.addView(e,r,o,i)}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e){e===void 0&&(e=this.size);var t=Math.max(this.size,this.contentSize);if(this.size=e,this.proportions)for(var i=0;i<this.viewItems.length;i++){var n=this.viewItems[i];n.size=Pc(Math.round(this.proportions[i]*e),n.minimumSize,n.maximumSize)}else{var o=Zl(0,this.viewItems.length),r=o.filter(l=>this.viewItems[l].priority===Uc.Low),a=o.filter(l=>this.viewItems[l].priority===Uc.High);this.resize(this.viewItems.length-1,e-t,void 0,r,a)}this.distributeEmptySpace(),this.layoutViews()}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){var i=Zl(0,this.viewItems.length).filter(a=>a!==e),n=[...i.filter(a=>this.viewItems[a].priority===Uc.Low),e],o=i.filter(a=>this.viewItems[a].priority===Uc.High),r=this.viewItems[e];t=Math.round(t),t=Pc(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(n,o)}}resizeViews(e){for(var t=0;t<e.length;t++){var i=this.viewItems[t],n=e[t];n=Math.round(n),n=Pc(n,i.minimumSize,Math.min(i.maximumSize,this.size)),i.size=n}this.contentSize=this.viewItems.reduce((o,r)=>o+r.size,0),this.saveProportions(),this.layout(this.size)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[e].setVisible(t),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}distributeViewSizes(){var e=[],t=0;for(var i of this.viewItems)i.maximumSize-i.minimumSize>0&&(e.push(i),t+=i.size);var n=Math.floor(t/e.length);for(var o of e)o.size=Pc(n,o.minimumSize,o.maximumSize);var r=Zl(0,this.viewItems.length),a=r.filter(c=>this.viewItems[c].priority===Uc.Low),l=r.filter(c=>this.viewItems[c].priority===Uc.High);this.relayout(a,l)}dispose(){this.sashItems.forEach(e=>e.sash.dispose()),this.sashItems=[],this.sashContainer.remove()}relayout(e,t){var i=this.viewItems.reduce((n,o)=>n+o.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}onSashStart(e){var{sash:t,start:i}=e,n=this.sashItems.findIndex(o=>o.sash===t);(o=>{var r,a,l=this.viewItems.map(I=>I.size),c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,f=Zl(n,-1,-1),g=Zl(n+1,this.viewItems.length),m=f.reduce((I,R)=>I+(this.viewItems[R].minimumSize-l[R]),0),_=f.reduce((I,R)=>I+(this.viewItems[R].viewMaximumSize-l[R]),0),C=g.length===0?Number.POSITIVE_INFINITY:g.reduce((I,R)=>I+(l[R]-this.viewItems[R].minimumSize),0),S=g.length===0?Number.NEGATIVE_INFINITY:g.reduce((I,R)=>I+(l[R]-this.viewItems[R].viewMaximumSize),0);c=Math.max(m,S),d=Math.min(C,_);var x=this.findFirstSnapIndex(f),L=this.findFirstSnapIndex(g);if(typeof x=="number"){var k=this.viewItems[x],T=Math.floor(k.viewMinimumSize/2);r={index:x,limitDelta:k.visible?c-T:c+T,size:k.size}}if(typeof L=="number"){var A=this.viewItems[L],O=Math.floor(A.viewMinimumSize/2);a={index:L,limitDelta:A.visible?d+O:d-O,size:A.size}}this.sashDragState={start:o,current:o,index:n,sizes:l,minDelta:c,maxDelta:d,snapBefore:r,snapAfter:a}})(i)}onSashChange(e){var{current:t}=e,{index:i,start:n,sizes:o,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=t;var d=t-n;this.resize(i,d,o,void 0,void 0,r,a,l,c),this.distributeEmptySpace(),this.layoutViews()}getSashPosition(e){for(var t=0,i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}resize(e,t,i,n,o,r,a,l,c){if(i===void 0&&(i=this.viewItems.map(Ue=>Ue.size)),r===void 0&&(r=Number.NEGATIVE_INFINITY),a===void 0&&(a=Number.POSITIVE_INFINITY),e<0||e>=this.viewItems.length)return 0;var d=Zl(e,-1,-1),f=Zl(e+1,this.viewItems.length);if(o)for(var g of o)jj(d,g),jj(f,g);if(n)for(var m of n)TP(d,m),TP(f,m);var _=d.map(Ue=>this.viewItems[Ue]),C=d.map(Ue=>i[Ue]),S=f.map(Ue=>this.viewItems[Ue]),x=f.map(Ue=>i[Ue]),L=d.reduce((Ue,ce)=>Ue+(this.viewItems[ce].minimumSize-i[ce]),0),k=d.reduce((Ue,ce)=>Ue+(this.viewItems[ce].maximumSize-i[ce]),0),T=f.length===0?Number.POSITIVE_INFINITY:f.reduce((Ue,ce)=>Ue+(i[ce]-this.viewItems[ce].minimumSize),0),A=f.length===0?Number.NEGATIVE_INFINITY:f.reduce((Ue,ce)=>Ue+(i[ce]-this.viewItems[ce].maximumSize),0),O=Math.max(L,A,r),I=Math.min(T,k,a),R=!1;if(l){var B=this.viewItems[l.index],z=t>=l.limitDelta;R=z!==B.visible,B.setVisible(z,l.size)}if(!R&&c){var q=this.viewItems[c.index],te=t<c.limitDelta;R=te!==q.visible,q.setVisible(te,c.size)}if(R)return this.resize(e,t,i,n,o,r,a);for(var U=0,X=t=Pc(t,O,I);U<_.length;U++){var le=_[U],be=Pc(C[U]+X,le.minimumSize,le.maximumSize);X-=be-C[U],le.size=be}for(var pe=0,ke=t;pe<S.length;pe++){var He=S[pe],Ge=Pc(x[pe]-ke,He.minimumSize,He.maximumSize);ke+=Ge-x[pe],He.size=Ge}return t}distributeEmptySpace(e){var t=this.viewItems.reduce((l,c)=>l+c.size,0),i=this.size-t,n=Zl(this.viewItems.length-1,-1,-1);typeof e=="number"&&TP(n,e);for(var o=0;i!==0&&o<n.length;o++){var r=this.viewItems[n[o]],a=Pc(r.size+i,r.minimumSize,r.maximumSize);i-=a-r.size,r.size=a}}layoutViews(){var e;this.contentSize=this.viewItems.reduce((n,o)=>n+o.size,0);var t=0;for(var i of this.viewItems)i.layout(t),t+=i.size;(e=this.onDidChange)==null||e.call(this,this.viewItems.map(n=>n.size)),this.sashItems.forEach(n=>n.sash.layout()),this.updateSashEnablement()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}updateSashEnablement(){var e=!1,t=this.viewItems.map(L=>e=L.size-L.minimumSize>0||e);e=!1;var i=this.viewItems.map(L=>e=L.maximumSize-L.size>0||e),n=[...this.viewItems].reverse();e=!1;var o=n.map(L=>e=L.size-L.minimumSize>0||e).reverse();e=!1;for(var r=n.map(L=>e=L.maximumSize-L.size>0||e).reverse(),a=0,l=0;l<this.sashItems.length;l++){var{sash:c}=this.sashItems[l];a+=this.viewItems[l].size;var d=!(t[l]&&r[l+1]),f=!(i[l]&&o[l+1]);if(d&&f){var g=Zl(l,-1,-1),m=Zl(l+1,this.viewItems.length),_=this.findFirstSnapIndex(g),C=this.findFirstSnapIndex(m),S=typeof _=="number"&&!this.viewItems[_].visible,x=typeof C=="number"&&!this.viewItems[C].visible;S&&o[l]&&(a>0||this.startSnappingEnabled)?c.state=ua.Minimum:x&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=ua.Maximum:c.state=ua.Disabled}else c.state=d&&!f?ua.Minimum:!d&&f?ua.Maximum:ua.Enabled}}findFirstSnapIndex(e){for(var t of e){var i=this.viewItems[t];if(i.visible&&i.snap)return t}for(var n of e){var o=this.viewItems[n];if(o.visible&&o.maximumSize-o.minimumSize>0)return;if(!o.visible&&o.snap)return n}}}class Ov{constructor(e){this.size=void 0,this.size=e}getPreferredSize(){return this.size}}class Zj{constructor(e,t){this.proportion=void 0,this.layoutService=void 0,this.proportion=e,this.layoutService=t}getPreferredSize(){return this.proportion*this.layoutService.getSize()}}class rk{getPreferredSize(){}}class Qj{get preferredSize(){return this.layoutStrategy.getPreferredSize()}set preferredSize(e){if(typeof e=="number")this.layoutStrategy=new Ov(e);else if(typeof e=="string"){var t=e.trim();if(ok(t,"%")){var i=Number(t.slice(0,-1))/100;this.layoutStrategy=new Zj(i,this.layoutService)}else if(ok(t,"px")){var n=Number(t.slice(0,-2))/100;this.layoutStrategy=new Ov(n)}else if(typeof Number.parseFloat(t)=="number"){var o=Number.parseFloat(t);this.layoutStrategy=new Ov(o)}else this.layoutStrategy=new rk}else this.layoutStrategy=new rk}constructor(e,t){var i;if(this.minimumSize=0,this.maximumSize=Number.POSITIVE_INFINITY,this.element=void 0,this.priority=void 0,this.snap=void 0,this.layoutService=void 0,this.layoutStrategy=void 0,this.layoutService=e,this.element=t.element,this.minimumSize=typeof t.minimumSize=="number"?t.minimumSize:30,this.maximumSize=typeof t.maximumSize=="number"?t.maximumSize:Number.POSITIVE_INFINITY,typeof t.preferredSize=="number")this.layoutStrategy=new Ov(t.preferredSize);else if(typeof t.preferredSize=="string"){var n=t.preferredSize.trim();if(ok(n,"%")){var o=Number(n.slice(0,-1))/100;this.layoutStrategy=new Zj(o,this.layoutService)}else if(ok(n,"px")){var r=Number(n.slice(0,-2))/100;this.layoutStrategy=new Ov(r)}else if(typeof Number.parseFloat(n)=="number"){var a=Number.parseFloat(n);this.layoutStrategy=new Ov(a)}else this.layoutStrategy=new rk}else this.layoutStrategy=new rk;this.priority=(i=t.priority)!=null?i:Uc.Normal,this.snap=typeof t.snap=="boolean"&&t.snap}layout(e){}}function Xj(s){return s.minSize!==void 0||s.maxSize!==void 0||s.preferredSize!==void 0||s.priority!==void 0||s.visible!==void 0}var F8=ye.exports.forwardRef((s,e)=>{var{className:t,children:i}=s;return Fr.createElement("div",{ref:e,className:c5("split-view-view",ZQ,t)},i)});F8.displayName="Allotment.Pane";var sX=ye.exports.forwardRef((s,e)=>{var{children:t,className:i,maxSize:n=1/0,minSize:o=30,proportionalLayout:r=!0,separator:a=!0,sizes:l,defaultSizes:c=l,snap:d=!1,vertical:f=!1,onChange:g,onReset:m,onVisibleChange:_}=s,C=ye.exports.useRef(null),S=ye.exports.useRef([]),x=ye.exports.useRef(new Map),L=ye.exports.useRef(null),k=ye.exports.useRef(new Map),T=ye.exports.useRef(new vbe),A=ye.exports.useRef([]),[O,I]=ye.exports.useState(!1);l&&console.warn("Prop sizes is deprecated. Please use defaultSizes instead.");var R=ye.exports.useMemo(()=>Fr.Children.toArray(t).filter(Fr.isValidElement),[t]),B=ye.exports.useCallback(z=>{var q,te,U=(q=A.current)==null?void 0:q[z];return typeof(U==null?void 0:U.preferredSize)=="number"&&((te=L.current)==null||te.resizeView(z,Math.round(U.preferredSize)),!0)},[]);return ye.exports.useImperativeHandle(e,()=>({reset:()=>{if(m)m();else{var z;(z=L.current)==null||z.distributeViewSizes();for(var q=0;q<A.current.length;q++)B(q)}},resize:z=>{var q;(q=L.current)==null||q.resizeViews(z)}})),ye.exports.useLayoutEffect(()=>{var z=!0;c&&k.current.size!==c.length&&(z=!1,console.warn("Expected "+c.length+" children based on defaultSizes but found "+k.current.size)),z&&c&&(S.current=R.map(U=>U.key));var q=Jw({orientation:f?Pa.Vertical:Pa.Horizontal,proportionalLayout:r},z&&c&&{descriptor:{size:c.reduce((U,X)=>U+X,0),views:c.map((U,X)=>{var le,be,pe,ke,He=x.current.get(S.current[X]),Ge=new Qj(T.current,Jw({element:document.createElement("div"),minimumSize:(le=He==null?void 0:He.minSize)!=null?le:o,maximumSize:(be=He==null?void 0:He.maxSize)!=null?be:n,priority:(pe=He==null?void 0:He.priority)!=null?pe:Uc.Normal},(He==null?void 0:He.preferredSize)&&{preferredSize:He==null?void 0:He.preferredSize},{snap:(ke=He==null?void 0:He.snap)!=null?ke:d}));return A.current.push(Ge),{container:[...k.current.values()][X],size:U,view:Ge}})}});L.current=new Bbe(C.current,q,g),L.current.on("sashchange",U=>{if(_&&L.current)for(var X=R.map(pe=>pe.key),le=0;le<X.length;le++){var be=x.current.get(X[le]);(be==null?void 0:be.visible)!==void 0&&be.visible!==L.current.isViewVisible(le)&&_(le,L.current.isViewVisible(le))}}),L.current.on("sashreset",U=>{if(m)m();else{var X;if(B(U)||B(U+1))return;(X=L.current)==null||X.distributeViewSizes()}});var te=L.current;return()=>{te.dispose()}},[]),ye.exports.useEffect(()=>{if(O){for(var z=R.map(Ne=>Ne.key),q=[...S.current],te=z.filter(Ne=>!S.current.includes(Ne)),U=z.filter(Ne=>S.current.includes(Ne)),X=S.current.map(Ne=>!z.includes(Ne)),le=X.length-1;le>=0;le--){var be;X[le]&&((be=L.current)==null||be.removeView(le),q.splice(le,1),A.current.splice(le,1))}var pe=function(Ne){var bt,mt,qe,Fe,Wt,Kt=x.current.get(Ne),It=new Qj(T.current,Jw({element:document.createElement("div"),minimumSize:(bt=Kt==null?void 0:Kt.minSize)!=null?bt:o,maximumSize:(mt=Kt==null?void 0:Kt.maxSize)!=null?mt:n,priority:(qe=Kt==null?void 0:Kt.priority)!=null?qe:Uc.Normal},(Kt==null?void 0:Kt.preferredSize)&&{preferredSize:Kt==null?void 0:Kt.preferredSize},{snap:(Fe=Kt==null?void 0:Kt.snap)!=null?Fe:d}));(Wt=L.current)==null||Wt.addView(k.current.get(Ne),It,fT.Distribute,z.findIndex(ai=>ai===Ne)),q.splice(z.findIndex(ai=>ai===Ne),0,Ne),A.current.splice(z.findIndex(ai=>ai===Ne),0,It)};for(var ke of te)pe(ke);for(;!cbe(z,q);){var He=function(Ne,bt){var mt=q.findIndex(Wt=>Wt===bt);if(mt!==Ne){var qe;(qe=L.current)==null||qe.moveView(k.current.get(bt),mt,Ne);var Fe=q[mt];return q.splice(mt,1),q.splice(Ne,0,Fe),"break"}};for(var[Ge,Ue]of z.entries())if(He(Ge,Ue)==="break")break}var ce=function(Ne){var bt,mt=z.findIndex(Fe=>Fe===Ne),qe=A.current[mt].preferredSize;qe!==void 0&&((bt=L.current)==null||bt.resizeView(mt,qe))};for(var ue of te)ce(ue);var $e=function(Ne){var bt,mt,qe=x.current.get(Ne),Fe=z.findIndex(Wt=>Wt===Ne);qe&&Xj(qe)&&qe.visible!==void 0&&((bt=L.current)==null?void 0:bt.isViewVisible(Fe))!==qe.visible&&((mt=L.current)==null||mt.setViewVisible(Fe,qe.visible))};for(var tt of[...te,...U])$e(tt);var _e=function(Ne){var bt=x.current.get(Ne),mt=z.findIndex(Wt=>Wt===Ne);if(bt&&Xj(bt)){bt.preferredSize!==void 0&&A.current[mt].preferredSize!==bt.preferredSize&&(A.current[mt].preferredSize=bt.preferredSize);var qe,Fe=!1;bt.minSize!==void 0&&A.current[mt].minimumSize!==bt.minSize&&(A.current[mt].minimumSize=bt.minSize,Fe=!0),bt.maxSize!==void 0&&A.current[mt].maximumSize!==bt.maxSize&&(A.current[mt].maximumSize=bt.maxSize,Fe=!0),Fe&&((qe=L.current)==null||qe.layout())}};for(var Vt of U)_e(Vt);(te.length>0||X.length>0)&&(S.current=z)}},[R,O,n,o,d]),ye.exports.useEffect(()=>{L.current&&(L.current.onDidChange=g)},[g]),ube({ref:C,onResize:z=>{var q,{width:te,height:U}=z;te&&U&&((q=L.current)==null||q.layout(f?U:te),T.current.setSize(f?U:te),I(!0))}}),ye.exports.useEffect(()=>{JQ&&Vbe(20)},[]),Fr.createElement("div",{ref:C,className:c5("split-view",f?"split-view-vertical":"split-view-horizontal",{"split-view-separator-border":a},dbe,f?gbe:pbe,{[mbe]:a},i)},Fr.createElement("div",{className:c5("split-view-container",fbe)},Fr.Children.toArray(t).map(z=>{if(!Fr.isValidElement(z))return null;var q=z.key;return z.type.displayName==="Allotment.Pane"?(x.current.set(q,z.props),Fr.cloneElement(z,{key:q,ref:te=>{te?k.current.set(q,te):k.current.delete(q)}})):Fr.createElement(F8,{key:q,ref:te=>{te?k.current.set(q,te):k.current.delete(q)}},z)})))});function Vbe(s){var e=Pc(s,4,20),t=Pc(s,1,8);document.documentElement.style.setProperty("--sash-size",e+"px"),document.documentElement.style.setProperty("--sash-hover-size",t+"px"),function(i){tX=i,iX.emit("onDidChangeGlobalSize",i)}(e)}sX.displayName="Allotment";var MP=Object.assign(sX,{Pane:F8});function Wbe(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function Jj(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function eK(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Jj(Object(t),!0).forEach(function(i){Wbe(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Jj(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function Hbe(s,e){if(s==null)return{};var t={},i=Object.keys(s),n,o;for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&(t[n]=s[n]);return t}function zbe(s,e){if(s==null)return{};var t=Hbe(s,e),i,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(n=0;n<o.length;n++)i=o[n],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,i)||(t[i]=s[i]))}return t}function Ube(s,e){return $be(s)||jbe(s,e)||Kbe(s,e)||qbe()}function $be(s){if(Array.isArray(s))return s}function jbe(s,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(s)))){var t=[],i=!0,n=!1,o=void 0;try{for(var r=s[Symbol.iterator](),a;!(i=(a=r.next()).done)&&(t.push(a.value),!(e&&t.length===e));i=!0);}catch(l){n=!0,o=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(n)throw o}}return t}}function Kbe(s,e){if(!!s){if(typeof s=="string")return tK(s,e);var t=Object.prototype.toString.call(s).slice(8,-1);if(t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set")return Array.from(s);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tK(s,e)}}function tK(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=s[t];return i}function qbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gbe(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function iK(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function nK(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iK(Object(t),!0).forEach(function(i){Gbe(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):iK(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function Ybe(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return function(i){return e.reduceRight(function(n,o){return o(n)},i)}}function Nw(s){return function e(){for(var t=this,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return n.length>=s.length?s.apply(this,n):function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return e.apply(t,[].concat(n,a))}}}function gT(s){return{}.toString.call(s).includes("Object")}function Zbe(s){return!Object.keys(s).length}function Iy(s){return typeof s=="function"}function Qbe(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function Xbe(s,e){return gT(e)||pg("changeType"),Object.keys(e).some(function(t){return!Qbe(s,t)})&&pg("changeField"),e}function Jbe(s){Iy(s)||pg("selectorType")}function e0e(s){Iy(s)||gT(s)||pg("handlerType"),gT(s)&&Object.values(s).some(function(e){return!Iy(e)})&&pg("handlersType")}function t0e(s){s||pg("initialIsRequired"),gT(s)||pg("initialType"),Zbe(s)&&pg("initialContent")}function i0e(s,e){throw new Error(s[e]||s.default)}var n0e={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},pg=Nw(i0e)(n0e),ak={changes:Xbe,selector:Jbe,handler:e0e,initial:t0e};function s0e(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ak.initial(s),ak.handler(e);var t={current:s},i=Nw(a0e)(t,e),n=Nw(r0e)(t),o=Nw(ak.changes)(s),r=Nw(o0e)(t);function a(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return ak.selector(c),c(t.current)}function l(c){Ybe(i,n,o,r)(c)}return[a,l]}function o0e(s,e){return Iy(e)?e(s.current):e}function r0e(s,e){return s.current=nK(nK({},s.current),e),e}function a0e(s,e,t){return Iy(e)?e(s.current):Object.keys(t).forEach(function(i){var n;return(n=e[i])===null||n===void 0?void 0:n.call(e,s.current[i])}),t}var l0e={create:s0e},c0e={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs"}};function u0e(s){return function e(){for(var t=this,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return n.length>=s.length?s.apply(this,n):function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return e.apply(t,[].concat(n,a))}}}function d0e(s){return{}.toString.call(s).includes("Object")}function h0e(s){return s||sK("configIsRequired"),d0e(s)||sK("configType"),s.urls?(f0e(),{paths:{vs:s.urls.monacoBase}}):s}function f0e(){console.warn(oX.deprecation)}function g0e(s,e){throw new Error(s[e]||s.default)}var oX={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},sK=u0e(g0e)(oX),p0e={config:h0e},m0e=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(n){return t.reduceRight(function(o,r){return r(o)},n)}};function rX(s,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&s[t]&&Object.assign(e[t],rX(s[t],e[t]))}),eK(eK({},s),e)}var _0e={type:"cancelation",msg:"operation is manually canceled"};function OP(s){var e=!1,t=new Promise(function(i,n){s.then(function(o){return e?n(_0e):i(o)}),s.catch(n)});return t.cancel=function(){return e=!0},t}var v0e=l0e.create({config:c0e,isInitialized:!1,resolve:null,reject:null,monaco:null}),aX=Ube(v0e,2),sL=aX[0],hN=aX[1];function b0e(s){var e=p0e.config(s),t=e.monaco,i=zbe(e,["monaco"]);hN(function(n){return{config:rX(n.config,i),monaco:t}})}function C0e(){var s=sL(function(e){var t=e.monaco,i=e.isInitialized,n=e.resolve;return{monaco:t,isInitialized:i,resolve:n}});if(!s.isInitialized){if(hN({isInitialized:!0}),s.monaco)return s.resolve(s.monaco),OP(PP);if(window.monaco&&window.monaco.editor)return lX(window.monaco),s.resolve(window.monaco),OP(PP);m0e(w0e,S0e)(L0e)}return OP(PP)}function w0e(s){return document.body.appendChild(s)}function y0e(s){var e=document.createElement("script");return s&&(e.src=s),e}function S0e(s){var e=sL(function(i){var n=i.config,o=i.reject;return{config:n,reject:o}}),t=y0e("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return s()},t.onerror=e.reject,t}function L0e(){var s=sL(function(t){var i=t.config,n=t.resolve,o=t.reject;return{config:i,resolve:n,reject:o}}),e=window.require;e.config(s.config),e(["vs/editor/editor.main"],function(t){lX(t),s.resolve(t)},function(t){s.reject(t)})}function lX(s){sL().monaco||hN({monaco:s})}function x0e(){return sL(function(s){var e=s.monaco;return e})}var PP=new Promise(function(s,e){return hN({resolve:s,reject:e})}),B8={config:b0e,init:C0e,__getMonacoInstance:x0e},$t={exports:{}};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var oK=Object.getOwnPropertySymbols,D0e=Object.prototype.hasOwnProperty,k0e=Object.prototype.propertyIsEnumerable;function E0e(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function T0e(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var i=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(o){n[o]=o}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var I0e=T0e()?Object.assign:function(s,e){for(var t,i=E0e(s),n,o=1;o<arguments.length;o++){t=Object(arguments[o]);for(var r in t)D0e.call(t,r)&&(i[r]=t[r]);if(oK){n=oK(t);for(var a=0;a<n.length;a++)k0e.call(t,n[a])&&(i[n[a]]=t[n[a]])}}return i},N0e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cX=N0e,uX=Function.call.bind(Object.prototype.hasOwnProperty),h5=function(){};{var R0e=cX,f5={},A0e=uX;h5=function(s){var e="Warning: "+s;typeof console<"u"&&console.error(e);try{throw new Error(e)}catch{}}}function dX(s,e,t,i,n){for(var o in s)if(A0e(s,o)){var r;try{if(typeof s[o]!="function"){var a=Error((i||"React class")+": "+t+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof s[o]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw a.name="Invariant Violation",a}r=s[o](e,o,i,t,null,R0e)}catch(c){r=c}if(r&&!(r instanceof Error)&&h5((i||"React class")+": type specification of "+t+" `"+o+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof r+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),r instanceof Error&&!(r.message in f5)){f5[r.message]=!0;var l=n?n():"";h5("Failed "+t+" type: "+r.message+(l!=null?l:""))}}}dX.resetWarningCache=function(){f5={}};var M0e=dX,O0e=C_.exports,P0e=I0e,Pv=cX,FP=uX,rK=M0e,rb=function(){};rb=function(s){var e="Warning: "+s;typeof console<"u"&&console.error(e);try{throw new Error(e)}catch{}};function lk(){return null}var F0e=function(s,e){var t=typeof Symbol=="function"&&Symbol.iterator,i="@@iterator";function n(U){var X=U&&(t&&U[t]||U[i]);if(typeof X=="function")return X}var o="<<anonymous>>",r={array:d("array"),bigint:d("bigint"),bool:d("boolean"),func:d("function"),number:d("number"),object:d("object"),string:d("string"),symbol:d("symbol"),any:f(),arrayOf:g,element:m(),elementType:_(),instanceOf:C,node:k(),objectOf:x,oneOf:S,oneOfType:L,shape:A,exact:O};function a(U,X){return U===X?U!==0||1/U===1/X:U!==U&&X!==X}function l(U,X){this.message=U,this.data=X&&typeof X=="object"?X:{},this.stack=""}l.prototype=Error.prototype;function c(U){var X={},le=0;function be(ke,He,Ge,Ue,ce,ue,$e){if(Ue=Ue||o,ue=ue||Ge,$e!==Pv){if(e){var tt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw tt.name="Invariant Violation",tt}else if(typeof console<"u"){var _e=Ue+":"+Ge;!X[_e]&&le<3&&(rb("You are manually calling a React.PropTypes validation function for the `"+ue+"` prop on `"+Ue+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),X[_e]=!0,le++)}}return He[Ge]==null?ke?He[Ge]===null?new l("The "+ce+" `"+ue+"` is marked as required "+("in `"+Ue+"`, but its value is `null`.")):new l("The "+ce+" `"+ue+"` is marked as required in "+("`"+Ue+"`, but its value is `undefined`.")):null:U(He,Ge,Ue,ce,ue)}var pe=be.bind(null,!1);return pe.isRequired=be.bind(null,!0),pe}function d(U){function X(le,be,pe,ke,He,Ge){var Ue=le[be],ce=B(Ue);if(ce!==U){var ue=z(Ue);return new l("Invalid "+ke+" `"+He+"` of type "+("`"+ue+"` supplied to `"+pe+"`, expected ")+("`"+U+"`."),{expectedType:U})}return null}return c(X)}function f(){return c(lk)}function g(U){function X(le,be,pe,ke,He){if(typeof U!="function")return new l("Property `"+He+"` of component `"+pe+"` has invalid PropType notation inside arrayOf.");var Ge=le[be];if(!Array.isArray(Ge)){var Ue=B(Ge);return new l("Invalid "+ke+" `"+He+"` of type "+("`"+Ue+"` supplied to `"+pe+"`, expected an array."))}for(var ce=0;ce<Ge.length;ce++){var ue=U(Ge,ce,pe,ke,He+"["+ce+"]",Pv);if(ue instanceof Error)return ue}return null}return c(X)}function m(){function U(X,le,be,pe,ke){var He=X[le];if(!s(He)){var Ge=B(He);return new l("Invalid "+pe+" `"+ke+"` of type "+("`"+Ge+"` supplied to `"+be+"`, expected a single ReactElement."))}return null}return c(U)}function _(){function U(X,le,be,pe,ke){var He=X[le];if(!O0e.isValidElementType(He)){var Ge=B(He);return new l("Invalid "+pe+" `"+ke+"` of type "+("`"+Ge+"` supplied to `"+be+"`, expected a single ReactElement type."))}return null}return c(U)}function C(U){function X(le,be,pe,ke,He){if(!(le[be]instanceof U)){var Ge=U.name||o,Ue=te(le[be]);return new l("Invalid "+ke+" `"+He+"` of type "+("`"+Ue+"` supplied to `"+pe+"`, expected ")+("instance of `"+Ge+"`."))}return null}return c(X)}function S(U){if(!Array.isArray(U))return arguments.length>1?rb("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):rb("Invalid argument supplied to oneOf, expected an array."),lk;function X(le,be,pe,ke,He){for(var Ge=le[be],Ue=0;Ue<U.length;Ue++)if(a(Ge,U[Ue]))return null;var ce=JSON.stringify(U,function($e,tt){var _e=z(tt);return _e==="symbol"?String(tt):tt});return new l("Invalid "+ke+" `"+He+"` of value `"+String(Ge)+"` "+("supplied to `"+pe+"`, expected one of "+ce+"."))}return c(X)}function x(U){function X(le,be,pe,ke,He){if(typeof U!="function")return new l("Property `"+He+"` of component `"+pe+"` has invalid PropType notation inside objectOf.");var Ge=le[be],Ue=B(Ge);if(Ue!=="object")return new l("Invalid "+ke+" `"+He+"` of type "+("`"+Ue+"` supplied to `"+pe+"`, expected an object."));for(var ce in Ge)if(FP(Ge,ce)){var ue=U(Ge,ce,pe,ke,He+"."+ce,Pv);if(ue instanceof Error)return ue}return null}return c(X)}function L(U){if(!Array.isArray(U))return rb("Invalid argument supplied to oneOfType, expected an instance of array."),lk;for(var X=0;X<U.length;X++){var le=U[X];if(typeof le!="function")return rb("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+q(le)+" at index "+X+"."),lk}function be(pe,ke,He,Ge,Ue){for(var ce=[],ue=0;ue<U.length;ue++){var $e=U[ue],tt=$e(pe,ke,He,Ge,Ue,Pv);if(tt==null)return null;tt.data&&FP(tt.data,"expectedType")&&ce.push(tt.data.expectedType)}var _e=ce.length>0?", expected one of type ["+ce.join(", ")+"]":"";return new l("Invalid "+Ge+" `"+Ue+"` supplied to "+("`"+He+"`"+_e+"."))}return c(be)}function k(){function U(X,le,be,pe,ke){return I(X[le])?null:new l("Invalid "+pe+" `"+ke+"` supplied to "+("`"+be+"`, expected a ReactNode."))}return c(U)}function T(U,X,le,be,pe){return new l((U||"React class")+": "+X+" type `"+le+"."+be+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+pe+"`.")}function A(U){function X(le,be,pe,ke,He){var Ge=le[be],Ue=B(Ge);if(Ue!=="object")return new l("Invalid "+ke+" `"+He+"` of type `"+Ue+"` "+("supplied to `"+pe+"`, expected `object`."));for(var ce in U){var ue=U[ce];if(typeof ue!="function")return T(pe,ke,He,ce,z(ue));var $e=ue(Ge,ce,pe,ke,He+"."+ce,Pv);if($e)return $e}return null}return c(X)}function O(U){function X(le,be,pe,ke,He){var Ge=le[be],Ue=B(Ge);if(Ue!=="object")return new l("Invalid "+ke+" `"+He+"` of type `"+Ue+"` "+("supplied to `"+pe+"`, expected `object`."));var ce=P0e({},le[be],U);for(var ue in ce){var $e=U[ue];if(FP(U,ue)&&typeof $e!="function")return T(pe,ke,He,ue,z($e));if(!$e)return new l("Invalid "+ke+" `"+He+"` key `"+ue+"` supplied to `"+pe+"`.\nBad object: "+JSON.stringify(le[be],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(U),null,"  "));var tt=$e(Ge,ue,pe,ke,He+"."+ue,Pv);if(tt)return tt}return null}return c(X)}function I(U){switch(typeof U){case"number":case"string":case"undefined":return!0;case"boolean":return!U;case"object":if(Array.isArray(U))return U.every(I);if(U===null||s(U))return!0;var X=n(U);if(X){var le=X.call(U),be;if(X!==U.entries){for(;!(be=le.next()).done;)if(!I(be.value))return!1}else for(;!(be=le.next()).done;){var pe=be.value;if(pe&&!I(pe[1]))return!1}}else return!1;return!0;default:return!1}}function R(U,X){return U==="symbol"?!0:X?X["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&X instanceof Symbol:!1}function B(U){var X=typeof U;return Array.isArray(U)?"array":U instanceof RegExp?"object":R(X,U)?"symbol":X}function z(U){if(typeof U>"u"||U===null)return""+U;var X=B(U);if(X==="object"){if(U instanceof Date)return"date";if(U instanceof RegExp)return"regexp"}return X}function q(U){var X=z(U);switch(X){case"array":case"object":return"an "+X;case"boolean":case"date":case"regexp":return"a "+X;default:return X}}function te(U){return!U.constructor||!U.constructor.name?o:U.constructor.name}return r.checkPropTypes=rK,r.resetWarningCache=rK.resetWarningCache,r.PropTypes=r,r};{var B0e=C_.exports,V0e=!0;$t.exports=F0e(B0e.isElement,V0e)}var W0e="F:\\GitHub\\tgis-3d-vite\\examples\\node_modules\\.pnpm\\registry.npmmirror.com+@monaco-editor+react@4.4.6_6vrjaj6ridxbohi43n7zt4gn7q\\node_modules\\@monaco-editor\\react\\lib\\es\\Loading\\Loading.js";const H0e={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};function z0e({content:s}){return ut("div",{style:H0e,children:s},void 0,!1,{fileName:W0e,lineNumber:14,columnNumber:23},this)}const BP={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};var VP="F:\\GitHub\\tgis-3d-vite\\examples\\node_modules\\.pnpm\\registry.npmmirror.com+@monaco-editor+react@4.4.6_6vrjaj6ridxbohi43n7zt4gn7q\\node_modules\\@monaco-editor\\react\\lib\\es\\MonacoContainer\\MonacoContainer.js";function hX({width:s,height:e,isEditorReady:t,loading:i,_ref:n,className:o,wrapperProps:r}){return ut("section",{style:{...BP.wrapper,width:s,height:e},...r,children:[!t&&ut(z0e,{content:i},void 0,!1,{fileName:VP,lineNumber:23,columnNumber:52},this),ut("div",{ref:n,style:{...BP.fullWidth,...!t&&BP.hide},className:o},void 0,!1,{fileName:VP,lineNumber:25,columnNumber:20},this)]},void 0,!0,{fileName:VP,lineNumber:18,columnNumber:23},this)}hX.propTypes={width:$t.exports.oneOfType([$t.exports.number,$t.exports.string]).isRequired,height:$t.exports.oneOfType([$t.exports.number,$t.exports.string]).isRequired,loading:$t.exports.oneOfType([$t.exports.element,$t.exports.string]).isRequired,isEditorReady:$t.exports.bool.isRequired,className:$t.exports.string,wrapperProps:$t.exports.object};var fX=ye.exports.memo(hX);function gX(s){ye.exports.useEffect(s,[])}function $c(s,e,t=!0){const i=ye.exports.useRef(!0);ye.exports.useEffect(i.current||!t?()=>{i.current=!1}:s,e)}function ey(){}function pT(s,e,t,i){return U0e(s,i)||$0e(s,e,t,i)}function U0e(s,e){return s.editor.getModel(pX(s,e))}function $0e(s,e,t,i){return s.editor.createModel(e,t,i&&pX(s,i))}function pX(s,e){return s.Uri.parse(e)}function j0e(s){return s===void 0}var K0e="F:\\GitHub\\tgis-3d-vite\\examples\\node_modules\\.pnpm\\registry.npmmirror.com+@monaco-editor+react@4.4.6_6vrjaj6ridxbohi43n7zt4gn7q\\node_modules\\@monaco-editor\\react\\lib\\es\\DiffEditor\\DiffEditor.js";function mX({original:s,modified:e,language:t,originalLanguage:i,modifiedLanguage:n,originalModelPath:o,modifiedModelPath:r,keepCurrentOriginalModel:a,keepCurrentModifiedModel:l,theme:c,loading:d,options:f,height:g,width:m,className:_,wrapperProps:C,beforeMount:S,onMount:x}){const[L,k]=ye.exports.useState(!1),[T,A]=ye.exports.useState(!0),O=ye.exports.useRef(null),I=ye.exports.useRef(null),R=ye.exports.useRef(null),B=ye.exports.useRef(x),z=ye.exports.useRef(S);gX(()=>{const X=B8.init();return X.then(le=>(I.current=le)&&A(!1)).catch(le=>(le==null?void 0:le.type)!=="cancelation"&&console.error("Monaco initialization: error:",le)),()=>O.current?U():X.cancel()}),$c(()=>{const X=O.current.getModifiedEditor();X.getOption(I.current.editor.EditorOption.readOnly)?X.setValue(e):e!==X.getValue()&&(X.executeEdits("",[{range:X.getModel().getFullModelRange(),text:e,forceMoveMarkers:!0}]),X.pushUndoStop())},[e],L),$c(()=>{O.current.getModel().original.setValue(s)},[s],L),$c(()=>{const{original:X,modified:le}=O.current.getModel();I.current.editor.setModelLanguage(X,i||t),I.current.editor.setModelLanguage(le,n||t)},[t,i,n],L),$c(()=>{I.current.editor.setTheme(c)},[c],L),$c(()=>{O.current.updateOptions(f)},[f],L);const q=ye.exports.useCallback(()=>{z.current(I.current);const X=pT(I.current,s,i||t,o),le=pT(I.current,e,n||t,r);O.current.setModel({original:X,modified:le})},[t,e,n,s,i,o,r]),te=ye.exports.useCallback(()=>{O.current=I.current.editor.createDiffEditor(R.current,{automaticLayout:!0,...f}),q(),I.current.editor.setTheme(c),k(!0)},[f,c,q]);ye.exports.useEffect(()=>{L&&B.current(O.current,I.current)},[L]),ye.exports.useEffect(()=>{!T&&!L&&te()},[T,L,te]);function U(){const X=O.current.getModel();if(!a){var le;(le=X.original)===null||le===void 0||le.dispose()}if(!l){var be;(be=X.modified)===null||be===void 0||be.dispose()}O.current.dispose()}return ut(fX,{width:m,height:g,isEditorReady:L,loading:d,_ref:R,className:_,wrapperProps:C},void 0,!1,{fileName:K0e,lineNumber:125,columnNumber:23},this)}mX.propTypes={original:$t.exports.string,modified:$t.exports.string,language:$t.exports.string,originalLanguage:$t.exports.string,modifiedLanguage:$t.exports.string,originalModelPath:$t.exports.string,modifiedModelPath:$t.exports.string,keepCurrentOriginalModel:$t.exports.bool,keepCurrentModifiedModel:$t.exports.bool,theme:$t.exports.string,loading:$t.exports.oneOfType([$t.exports.element,$t.exports.string]),options:$t.exports.object,width:$t.exports.oneOfType([$t.exports.number,$t.exports.string]),height:$t.exports.oneOfType([$t.exports.number,$t.exports.string]),className:$t.exports.string,wrapperProps:$t.exports.object,beforeMount:$t.exports.func,onMount:$t.exports.func};mX.defaultProps={theme:"light",loading:"Loading...",options:{},keepCurrentOriginalModel:!1,keepCurrentModifiedModel:!1,width:"100%",height:"100%",wrapperProps:{},beforeMount:ey,onMount:ey};function q0e(s){const e=ye.exports.useRef();return ye.exports.useEffect(()=>{e.current=s},[s]),e.current}var G0e="F:\\GitHub\\tgis-3d-vite\\examples\\node_modules\\.pnpm\\registry.npmmirror.com+@monaco-editor+react@4.4.6_6vrjaj6ridxbohi43n7zt4gn7q\\node_modules\\@monaco-editor\\react\\lib\\es\\Editor\\Editor.js";const ck=new Map;function V8({defaultValue:s,defaultLanguage:e,defaultPath:t,value:i,language:n,path:o,theme:r,line:a,loading:l,options:c,overrideServices:d,saveViewState:f,keepCurrentModel:g,width:m,height:_,className:C,wrapperProps:S,beforeMount:x,onMount:L,onChange:k,onValidate:T}){const[A,O]=ye.exports.useState(!1),[I,R]=ye.exports.useState(!0),B=ye.exports.useRef(null),z=ye.exports.useRef(null),q=ye.exports.useRef(null),te=ye.exports.useRef(L),U=ye.exports.useRef(x),X=ye.exports.useRef(null),le=ye.exports.useRef(i),be=q0e(o),pe=ye.exports.useRef(!1);gX(()=>{const Ge=B8.init();return Ge.then(Ue=>(B.current=Ue)&&R(!1)).catch(Ue=>(Ue==null?void 0:Ue.type)!=="cancelation"&&console.error("Monaco initialization: error:",Ue)),()=>z.current?He():Ge.cancel()}),$c(()=>{const Ge=pT(B.current,s||i,e||n,o);Ge!==z.current.getModel()&&(f&&ck.set(be,z.current.saveViewState()),z.current.setModel(Ge),f&&z.current.restoreViewState(ck.get(o)))},[o],A),$c(()=>{z.current.updateOptions(c)},[c],A),$c(()=>{z.current.getOption(B.current.editor.EditorOption.readOnly)?z.current.setValue(i):i!==z.current.getValue()&&(z.current.executeEdits("",[{range:z.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),z.current.pushUndoStop())},[i],A),$c(()=>{B.current.editor.setModelLanguage(z.current.getModel(),n)},[n],A),$c(()=>{j0e(a)||z.current.revealLine(a)},[a],A),$c(()=>{B.current.editor.setTheme(r)},[r],A);const ke=ye.exports.useCallback(()=>{if(!pe.current){U.current(B.current);const Ge=o||t,Ue=pT(B.current,i||s,e||n,Ge);z.current=B.current.editor.create(q.current,{model:Ue,automaticLayout:!0,...c},d),f&&z.current.restoreViewState(ck.get(Ge)),B.current.editor.setTheme(r),O(!0),pe.current=!0}},[s,e,t,i,n,o,c,d,f,r]);ye.exports.useEffect(()=>{A&&te.current(z.current,B.current)},[A]),ye.exports.useEffect(()=>{!I&&!A&&ke()},[I,A,ke]),le.current=i,ye.exports.useEffect(()=>{if(A&&k){var Ge,Ue;(Ge=X.current)===null||Ge===void 0||Ge.dispose(),X.current=(Ue=z.current)===null||Ue===void 0?void 0:Ue.onDidChangeModelContent(ce=>{k(z.current.getValue(),ce)})}},[A,k]),ye.exports.useEffect(()=>{if(A){const Ge=B.current.editor.onDidChangeMarkers(Ue=>{var ce;const ue=(ce=z.current.getModel())===null||ce===void 0?void 0:ce.uri;if(ue&&Ue.find(tt=>tt.path===ue.path)){const tt=B.current.editor.getModelMarkers({resource:ue});T==null||T(tt)}});return()=>{Ge==null||Ge.dispose()}}},[A,T]);function He(){var Ge;if((Ge=X.current)===null||Ge===void 0||Ge.dispose(),g)f&&ck.set(o,z.current.saveViewState());else{var Ue;(Ue=z.current.getModel())===null||Ue===void 0||Ue.dispose()}z.current.dispose()}return ut(fX,{width:m,height:_,isEditorReady:A,loading:l,_ref:q,className:C,wrapperProps:S},void 0,!1,{fileName:G0e,lineNumber:174,columnNumber:23},this)}V8.propTypes={defaultValue:$t.exports.string,defaultPath:$t.exports.string,defaultLanguage:$t.exports.string,value:$t.exports.string,language:$t.exports.string,path:$t.exports.string,theme:$t.exports.string,line:$t.exports.number,loading:$t.exports.oneOfType([$t.exports.element,$t.exports.string]),options:$t.exports.object,overrideServices:$t.exports.object,saveViewState:$t.exports.bool,keepCurrentModel:$t.exports.bool,width:$t.exports.oneOfType([$t.exports.number,$t.exports.string]),height:$t.exports.oneOfType([$t.exports.number,$t.exports.string]),className:$t.exports.string,wrapperProps:$t.exports.object,beforeMount:$t.exports.func,onMount:$t.exports.func,onChange:$t.exports.func,onValidate:$t.exports.func};V8.defaultProps={theme:"light",loading:"Loading...",options:{},overrideServices:{},saveViewState:!0,keepCurrentModel:!1,width:"100%",height:"100%",wrapperProps:{},beforeMount:ey,onMount:ey,onValidate:ey};var Y0e=ye.exports.memo(V8);const Z0e=Ya.div`
    box-sizing: border-box;
    height: 100%;
    background-color: #1e1e1e;
    color: #fff;
    .source-header {
        height: 40px;
        line-height: 40px;
        padding: 0 10px;
        white-space: nowrap;
        min-width: 300px;
        text-align: center;
        background-color: #141414;
        color: #fff;
        z-index: 1000;
        position: relative;
        .sign {
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            .javascript {
                width: 24px;
                height: 24px;
                border-radius: 2px;
                background-color: #3ea6ff;
                font-size: 14px;
                font-weight: bold;
                display: flex;
                align-items: center;
                justify-content: center;
                letter-spacing: 1px;
            }
        }
        .file-tip {
            font-size: 14px;
        }
        .actions {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 0 20px;
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            .action {
                color:#1890ff;
                font-size: 14px;
                cursor: pointer;
                display: flex;
                align-items: center;
                margin-left: 15px;
                .iconfont {
                    font-size: 20px;
                }
                &:hover {
                    color: #40a9ff;
                }
            }
        }
    }
`;globalThis&&globalThis.__awaiter;let Q0e=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function X0e(s,e){let t;return e.length===0?t=s:t=s.replace(/\{(\d+)\}/g,(i,n)=>{const o=n[0],r=e[o];let a=i;return typeof r=="string"?a=r:(typeof r=="number"||typeof r=="boolean"||r===void 0||r===null)&&(a=String(r)),a}),Q0e&&(t="\uFF3B"+t.replace(/[aouei]/g,"$&$&")+"\uFF3D"),t}function b(s,e,...t){return X0e(e,t)}var WP;const Rw="en";let mT=!1,_T=!1,IE=!1,_X=!1,W8=!1,H8=!1,uk,NE=Rw,J0e,jf;const ss=typeof self=="object"?self:typeof global=="object"?global:{};let vr;typeof ss.vscode<"u"&&typeof ss.vscode.process<"u"?vr=ss.vscode.process:typeof process<"u"&&(vr=process);const eCe=typeof((WP=vr==null?void 0:vr.versions)===null||WP===void 0?void 0:WP.electron)=="string",tCe=eCe&&(vr==null?void 0:vr.type)==="renderer";if(typeof navigator=="object"&&!tCe)jf=navigator.userAgent,mT=jf.indexOf("Windows")>=0,_T=jf.indexOf("Macintosh")>=0,H8=(jf.indexOf("Macintosh")>=0||jf.indexOf("iPad")>=0||jf.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,IE=jf.indexOf("Linux")>=0,W8=!0,b({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),uk=Rw,NE=uk;else if(typeof vr=="object"){mT=vr.platform==="win32",_T=vr.platform==="darwin",IE=vr.platform==="linux",IE&&!!vr.env.SNAP&&vr.env.SNAP_REVISION,vr.env.CI||vr.env.BUILD_ARTIFACTSTAGINGDIRECTORY,uk=Rw,NE=Rw;const s=vr.env.VSCODE_NLS_CONFIG;if(s)try{const e=JSON.parse(s),t=e.availableLanguages["*"];uk=e.locale,NE=t||Rw,J0e=e._translationsConfigFile}catch{}_X=!0}else console.error("Unable to resolve platform.");const mo=mT,mi=_T,Wo=IE,tu=_X,Xg=W8,iCe=W8&&typeof ss.importScripts=="function",gd=H8,pd=jf,nCe=NE,sCe=typeof ss.postMessage=="function"&&!ss.importScripts,vX=(()=>{if(sCe){const s=[];ss.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,n=s.length;i<n;i++){const o=s[i];if(o.id===t.data.vscodeScheduleAsyncWork){s.splice(i,1),o.callback();return}}});let e=0;return t=>{const i=++e;s.push({id:i,callback:t}),ss.postMessage({vscodeScheduleAsyncWork:i},"*")}}return s=>setTimeout(s)})(),gl=_T||H8?2:mT?1:3;let aK=!0,lK=!1;function bX(){if(!lK){lK=!0;const s=new Uint8Array(2);s[0]=1,s[1]=2,aK=new Uint16Array(s.buffer)[0]===(2<<8)+1}return aK}const CX=!!(pd&&pd.indexOf("Chrome")>=0),oCe=!!(pd&&pd.indexOf("Firefox")>=0),rCe=!!(!CX&&pd&&pd.indexOf("Safari")>=0),aCe=!!(pd&&pd.indexOf("Edg/")>=0);pd&&pd.indexOf("Android")>=0;var fi;(function(s){function e(T){return T&&typeof T=="object"&&typeof T[Symbol.iterator]=="function"}s.is=e;const t=Object.freeze([]);function i(){return t}s.empty=i;function*n(T){yield T}s.single=n;function o(T){return T||t}s.from=o;function r(T){return!T||T[Symbol.iterator]().next().done===!0}s.isEmpty=r;function a(T){return T[Symbol.iterator]().next().value}s.first=a;function l(T,A){for(const O of T)if(A(O))return!0;return!1}s.some=l;function c(T,A){for(const O of T)if(A(O))return O}s.find=c;function*d(T,A){for(const O of T)A(O)&&(yield O)}s.filter=d;function*f(T,A){let O=0;for(const I of T)yield A(I,O++)}s.map=f;function*g(...T){for(const A of T)for(const O of A)yield O}s.concat=g;function*m(T){for(const A of T)for(const O of A)yield O}s.concatNested=m;function _(T,A,O){let I=O;for(const R of T)I=A(I,R);return I}s.reduce=_;function C(T,A){let O=0;for(const I of T)A(I,O++)}s.forEach=C;function*S(T,A,O=T.length){for(A<0&&(A+=T.length),O<0?O+=T.length:O>T.length&&(O=T.length);A<O;A++)yield T[A]}s.slice=S;function x(T,A=Number.POSITIVE_INFINITY){const O=[];if(A===0)return[O,T];const I=T[Symbol.iterator]();for(let R=0;R<A;R++){const B=I.next();if(B.done)return[O,s.empty()];O.push(B.value)}return[O,{[Symbol.iterator](){return I}}]}s.consume=x;function L(T){return x(T)[0]}s.collect=L;function k(T,A,O=(I,R)=>I===R){const I=T[Symbol.iterator](),R=A[Symbol.iterator]();for(;;){const B=I.next(),z=R.next();if(B.done!==z.done)return!1;if(B.done)return!0;if(!O(B.value,z.value))return!1}}s.equals=k})(fi||(fi={}));class Kn{constructor(e){this.element=e,this.next=Kn.Undefined,this.prev=Kn.Undefined}}Kn.Undefined=new Kn(void 0);class Sr{constructor(){this._first=Kn.Undefined,this._last=Kn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Kn.Undefined}clear(){let e=this._first;for(;e!==Kn.Undefined;){const t=e.next;e.prev=Kn.Undefined,e.next=Kn.Undefined,e=t}this._first=Kn.Undefined,this._last=Kn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new Kn(e);if(this._first===Kn.Undefined)this._first=i,this._last=i;else if(t){const o=this._last;this._last=i,i.prev=o,o.next=i}else{const o=this._first;this._first=i,i.next=o,o.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==Kn.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Kn.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Kn.Undefined&&e.next!==Kn.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Kn.Undefined&&e.next===Kn.Undefined?(this._first=Kn.Undefined,this._last=Kn.Undefined):e.next===Kn.Undefined?(this._last=this._last.prev,this._last.next=Kn.Undefined):e.prev===Kn.Undefined&&(this._first=this._first.next,this._first.prev=Kn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Kn.Undefined;)yield e.element,e=e.next}}const wX="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function lCe(s=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of wX)s.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const z8=lCe();function yX(s){let e=z8;if(s&&s instanceof RegExp)if(s.global)e=s;else{let t="g";s.ignoreCase&&(t+="i"),s.multiline&&(t+="m"),s.unicode&&(t+="u"),e=new RegExp(s.source,t)}return e.lastIndex=0,e}const SX=new Sr;SX.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Ny(s,e,t,i,n){if(n||(n=fi.first(SX)),t.length>n.maxLen){let c=s-n.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,s+n.maxLen/2),Ny(s,e,t,i,n)}const o=Date.now(),r=s-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-o>=n.timeBudget);c++){const d=r-n.windowSize*c;e.lastIndex=Math.max(0,d);const f=cCe(e,t,r,a);if(!f&&l||(l=f,d<=0))break;a=d}if(l){const c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function cCe(s,e,t,i){let n;for(;n=s.exec(e);){const o=n.index||0;if(o<=t&&s.lastIndex>=t)return n;if(i>0&&o>i)return null}return null}function cl(s,e=0){return s[s.length-(1+e)]}function uCe(s){if(s.length===0)throw new Error("Invalid tail call");return[s.slice(0,s.length-1),s[s.length-1]]}function $a(s,e,t=(i,n)=>i===n){if(s===e)return!0;if(!s||!e||s.length!==e.length)return!1;for(let i=0,n=s.length;i<n;i++)if(!t(s[i],e[i]))return!1;return!0}function dCe(s,e){const t=s.length-1;e<t&&(s[e]=s[t]),s.pop()}function U8(s,e,t){return hCe(s.length,i=>t(s[i],e))}function hCe(s,e){let t=0,i=s-1;for(;t<=i;){const n=(t+i)/2|0,o=e(n);if(o<0)t=n+1;else if(o>0)i=n-1;else return n}return-(t+1)}function LX(s,e){let t=0,i=s.length;if(i===0)return 0;for(;t<i;){const n=Math.floor((t+i)/2);e(s[n])?i=n:t=n+1}return t}function g5(s,e,t){if(s=s|0,s>=e.length)throw new TypeError("invalid index");const i=e[Math.floor(e.length*Math.random())],n=[],o=[],r=[];for(const a of e){const l=t(a,i);l<0?n.push(a):l>0?o.push(a):r.push(a)}return s<n.length?g5(s,n,t):s<n.length+r.length?r[0]:g5(s-(n.length+r.length),o,t)}function cK(s,e){const t=[];let i;for(const n of s.slice(0).sort(e))!i||e(i[0],n)!==0?(i=[n],t.push(i)):i.push(n);return t}function oL(s){return s.filter(e=>!!e)}function xX(s){return!Array.isArray(s)||s.length===0}function Po(s){return Array.isArray(s)&&s.length>0}function Kh(s,e=t=>t){const t=new Set;return s.filter(i=>{const n=e(i);return t.has(n)?!1:(t.add(n),!0)})}function vT(s,e){const t=fCe(s,e);if(t!==-1)return s[t]}function fCe(s,e){for(let t=s.length-1;t>=0;t--){const i=s[t];if(e(i))return t}return-1}function DX(s,e){return s.length>0?s[0]:e}function mr(s,e){let t=typeof e=="number"?s:0;typeof e=="number"?t=s:(t=0,e=s);const i=[];if(t<=e)for(let n=t;n<e;n++)i.push(n);else for(let n=t;n>e;n--)i.push(n);return i}function fN(s,e,t){const i=s.slice(0,e),n=s.slice(e);return i.concat(t,n)}function HP(s,e){const t=s.indexOf(e);t>-1&&(s.splice(t,1),s.unshift(e))}function dk(s,e){const t=s.indexOf(e);t>-1&&(s.splice(t,1),s.push(e))}function uK(s,e){for(const t of e)s.push(t)}function $8(s){return Array.isArray(s)?s:[s]}function gCe(s,e,t){const i=kX(s,e),n=s.length,o=t.length;s.length=n+o;for(let r=n-1;r>=i;r--)s[r+o]=s[r];for(let r=0;r<o;r++)s[r+i]=t[r]}function dK(s,e,t,i){const n=kX(s,e),o=s.splice(n,t);return gCe(s,n,i),o}function kX(s,e){return e<0?Math.max(e+s.length,0):Math.min(e,s.length)}var hK;(function(s){function e(n){return n<0}s.isLessThan=e;function t(n){return n>0}s.isGreaterThan=t;function i(n){return n===0}s.isNeitherLessOrGreaterThan=i,s.greaterThan=1,s.lessThan=-1,s.neitherLessOrGreaterThan=0})(hK||(hK={}));function ty(s,e){return(t,i)=>e(s(t),s(i))}const pCe=(s,e)=>s-e;function EX(s,e){if(s.length===0)return;let t=s[0];for(let i=1;i<s.length;i++){const n=s[i];e(n,t)>0&&(t=n)}return t}function TX(s,e){if(s.length===0)return;let t=s[0];for(let i=1;i<s.length;i++){const n=s[i];e(n,t)>=0&&(t=n)}return t}function mCe(s,e){return EX(s,(t,i)=>-e(t,i))}class Ry{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}function IX(s){return Array.isArray(s)}function Kr(s){return typeof s=="string"}function $r(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&!(s instanceof RegExp)&&!(s instanceof Date)}function _Ce(s){const e=Object.getPrototypeOf(Uint8Array);return typeof s=="object"&&s instanceof e}function Ig(s){return typeof s=="number"&&!isNaN(s)}function fK(s){return!!s&&typeof s[Symbol.iterator]=="function"}function NX(s){return s===!0||s===!1}function fa(s){return typeof s>"u"}function vCe(s){return!Ba(s)}function Ba(s){return fa(s)||s===null}function Qi(s,e){if(!s)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function hk(s){if(Ba(s))throw new Error("Assertion Failed: argument is undefined or null");return s}function bT(s){return typeof s=="function"}function bCe(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++)CCe(s[i],e[i])}function CCe(s,e){if(Kr(e)){if(typeof s!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(bT(e)){try{if(s instanceof e)return}catch{}if(!Ba(s)&&s.constructor===e||e.length===1&&e.call(void 0,s)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function wCe(s){let e=[],t=Object.getPrototypeOf(s);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function j8(s){const e=[];for(const t of wCe(s))typeof s[t]=="function"&&e.push(t);return e}function yCe(s,e){const t=n=>function(){const o=Array.prototype.slice.call(arguments,0);return e(n,o)},i={};for(const n of s)i[n]=t(n);return i}function zr(s){return s===null?void 0:s}function gN(s,e="Unreachable"){throw new Error(e)}function vh(s){if(!s||typeof s!="object"||s instanceof RegExp)return s;const e=Array.isArray(s)?[]:{};return Object.keys(s).forEach(t=>{s[t]&&typeof s[t]=="object"?e[t]=vh(s[t]):e[t]=s[t]}),e}function SCe(s){if(!s||typeof s!="object")return s;const e=[s];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(RX.call(t,i)){const n=t[i];typeof n=="object"&&!Object.isFrozen(n)&&!_Ce(n)&&e.push(n)}}return s}const RX=Object.prototype.hasOwnProperty;function AX(s,e){return p5(s,e,new Set)}function p5(s,e,t){if(Ba(s))return s;const i=e(s);if(typeof i<"u")return i;if(IX(s)){const n=[];for(const o of s)n.push(p5(o,e,t));return n}if($r(s)){if(t.has(s))throw new Error("Cannot clone recursive data-structure");t.add(s);const n={};for(const o in s)RX.call(s,o)&&(n[o]=p5(s[o],e,t));return t.delete(s),n}return s}function xd(s,e,t=!0){return $r(s)?($r(e)&&Object.keys(e).forEach(i=>{i in s?t&&($r(s[i])&&$r(e[i])?xd(s[i],e[i],t):s[i]=e[i]):s[i]=e[i]}),s):e}function Sl(s,e){if(s===e)return!0;if(s==null||e===null||e===void 0||typeof s!=typeof e||typeof s!="object"||Array.isArray(s)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(s)){if(s.length!==e.length)return!1;for(t=0;t<s.length;t++)if(!Sl(s[t],e[t]))return!1}else{const n=[];for(i in s)n.push(i);n.sort();const o=[];for(i in e)o.push(i);if(o.sort(),!Sl(n,o))return!1;for(t=0;t<n.length;t++)if(!Sl(s[n[t]],e[n[t]]))return!1}return!0}const Mo={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},Kf=8;class MX{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class OX{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class ys{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return pN(e,t)}compute(e,t,i){return i}}class iy{constructor(e,t){this.newValue=e,this.didChange=t}}function pN(s,e){if(typeof s!="object"||typeof e!="object"||!s||!e)return new iy(e,s!==e);if(Array.isArray(s)||Array.isArray(e)){const i=Array.isArray(s)&&Array.isArray(e)&&$a(s,e);return new iy(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const n=pN(s[i],e[i]);n.didChange&&(s[i]=n.newValue,t=!0)}return new iy(s,t)}class eC{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return pN(e,t)}validate(e){return this.defaultValue}}class w_{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return pN(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function xt(s,e){return typeof s>"u"?e:s==="false"?!1:Boolean(s)}class Si extends w_{constructor(e,t,i,n=void 0){typeof n<"u"&&(n.type="boolean",n.default=i),super(e,t,i,n)}validate(e){return xt(e,this.defaultValue)}}function m5(s,e,t,i){if(typeof s>"u")return e;let n=parseInt(s,10);return isNaN(n)?e:(n=Math.max(t,n),n=Math.min(i,n),n|0)}class Ln extends w_{constructor(e,t,i,n,o,r=void 0){typeof r<"u"&&(r.type="integer",r.default=i,r.minimum=n,r.maximum=o),super(e,t,i,r),this.minimum=n,this.maximum=o}static clampedInt(e,t,i,n){return m5(e,t,i,n)}validate(e){return Ln.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class id extends w_{constructor(e,t,i,n,o){typeof o<"u"&&(o.type="number",o.default=i),super(e,t,i,o),this.validationFn=n}static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}validate(e){return this.validationFn(id.float(e,this.defaultValue))}}class da extends w_{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,n=void 0){typeof n<"u"&&(n.type="string",n.default=i),super(e,t,i,n)}validate(e){return da.string(e,this.defaultValue)}}function ho(s,e,t){return typeof s!="string"||t.indexOf(s)===-1?e:s}class Ds extends w_{constructor(e,t,i,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=n,o.default=i),super(e,t,i,o),this._allowedValues=n}validate(e){return ho(e,this.defaultValue,this._allowedValues)}}class nw extends ys{constructor(e,t,i,n,o,r,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=n),super(e,t,i,a),this._allowedValues=o,this._convert=r}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function LCe(s){switch(s){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class xCe extends ys{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[b("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),b("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),b("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:b("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class DCe extends ys{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:b("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:b("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:xt(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:xt(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function kCe(s){switch(s){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var to;(function(s){s[s.Line=1]="Line",s[s.Block=2]="Block",s[s.Underline=3]="Underline",s[s.LineThin=4]="LineThin",s[s.BlockOutline=5]="BlockOutline",s[s.UnderlineThin=6]="UnderlineThin"})(to||(to={}));function ECe(s){switch(s){case"line":return to.Line;case"block":return to.Block;case"underline":return to.Underline;case"line-thin":return to.LineThin;case"block-outline":return to.BlockOutline;case"underline-thin":return to.UnderlineThin}}class TCe extends eC{constructor(){super(130)}compute(e,t,i){const n=["monaco-editor"];return t.get(35)&&n.push(t.get(35)),e.extraEditorClassName&&n.push(e.extraEditorClassName),t.get(68)==="default"?n.push("mouse-default"):t.get(68)==="copy"&&n.push("mouse-copy"),t.get(102)&&n.push("showUnused"),t.get(128)&&n.push("showDeprecated"),n.join(" ")}}class ICe extends Si{constructor(){super(33,"emptySelectionClipboard",!0,{description:b("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class NCe extends ys{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(37,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:b("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[b("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),b("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),b("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:b("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[b("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),b("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),b("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:b("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:b("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:mi},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:b("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:b("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:xt(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":ho(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":ho(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:xt(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:xt(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:xt(t.loop,this.defaultValue.loop)}}}class Va extends ys{constructor(){super(47,"fontLigatures",Va.OFF,{anyOf:[{type:"boolean",description:b("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:b("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:b("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Va.OFF:e==="true"?Va.ON:e:Boolean(e)?Va.ON:Va.OFF}}Va.OFF='"liga" off, "calt" off';Va.ON='"liga" on, "calt" on';class RCe extends eC{constructor(){super(46)}compute(e,t,i){return e.fontInfo}}class ACe extends w_{constructor(){super(48,"fontSize",ma.fontSize,{type:"number",minimum:6,maximum:100,default:ma.fontSize,description:b("fontSize","Controls the font size in pixels.")})}validate(e){const t=id.float(e,this.defaultValue);return t===0?ma.fontSize:id.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}class Zu extends ys{constructor(){super(49,"fontWeight",ma.fontWeight,{anyOf:[{type:"number",minimum:Zu.MINIMUM_VALUE,maximum:Zu.MAXIMUM_VALUE,errorMessage:b("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Zu.SUGGESTION_VALUES}],default:ma.fontWeight,description:b("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Ln.clampedInt(e,ma.fontWeight,Zu.MINIMUM_VALUE,Zu.MAXIMUM_VALUE))}}Zu.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];Zu.MINIMUM_VALUE=1;Zu.MAXIMUM_VALUE=1e3;class MCe extends ys{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[b("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),b("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),b("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(53,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:b("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:b("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:b("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:b("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:b("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:b("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:b("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:b("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:b("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:b("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:b("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,i,n,o,r;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:ho(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:ho(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(i=a.multipleTypeDefinitions)!==null&&i!==void 0?i:ho(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(n=a.multipleDeclarations)!==null&&n!==void 0?n:ho(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(o=a.multipleImplementations)!==null&&o!==void 0?o:ho(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(r=a.multipleReferences)!==null&&r!==void 0?r:ho(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:da.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:da.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:da.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:da.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:da.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class OCe extends ys{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(55,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:b("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:b("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:b("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:b("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xt(t.enabled,this.defaultValue.enabled),delay:Ln.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:xt(t.sticky,this.defaultValue.sticky),above:xt(t.above,this.defaultValue.above)}}}class Vb extends eC{constructor(){super(133)}compute(e,t,i){return Vb.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=e.scrollBeyondLastLine?t-1:0,n=(e.viewLineCount+i)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/n);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:i,desiredRatio:n,minimapLineCount:o}}static _computeMinimapLayout(e,t){const i=e.outerWidth,n=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*n),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:n};const r=t.stableMinimapLayoutInput,a=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,f=e.minimap.renderCharacters;let g=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const m=e.minimap.maxColumn,_=e.minimap.size,C=e.minimap.side,S=e.verticalScrollbarWidth,x=e.viewLineCount,L=e.remainingWidth,k=e.isViewportWrapping,T=f?2:3;let A=Math.floor(o*n);const O=A/o;let I=!1,R=!1,B=T*g,z=g/o,q=1;if(_==="fill"||_==="fit"){const{typicalViewportLineCount:ke,extraLinesBeyondLastLine:He,desiredRatio:Ge,minimapLineCount:Ue}=Vb.computeContainedMinimapLineCount({viewLineCount:x,scrollBeyondLastLine:d,height:n,lineHeight:l,pixelRatio:o});if(x/Ue>1)I=!0,R=!0,g=1,B=1,z=g/o;else{let ue=!1,$e=g+1;if(_==="fit"){const tt=Math.ceil((x+He)*B);k&&a&&L<=t.stableFitRemainingWidth?(ue=!0,$e=t.stableFitMaxMinimapScale):ue=tt>A}if(_==="fill"||ue){I=!0;const tt=g;B=Math.min(l*o,Math.max(1,Math.floor(1/Ge))),k&&a&&L<=t.stableFitRemainingWidth&&($e=t.stableFitMaxMinimapScale),g=Math.min($e,Math.max(1,Math.floor(B/T))),g>tt&&(q=Math.min(2,g/tt)),z=g/o/q,A=Math.ceil(Math.max(ke,x+He)*B),k?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=L,t.stableFitMaxMinimapScale=g):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const te=Math.floor(m*z),U=Math.min(te,Math.max(0,Math.floor((L-S-2)*z/(c+z)))+Kf);let X=Math.floor(o*U);const le=X/o;X=Math.floor(X*q);const be=f?1:2,pe=C==="left"?0:i-U-S;return{renderMinimap:be,minimapLeft:pe,minimapWidth:U,minimapHeightIsEditorHeight:I,minimapIsSampling:R,minimapScale:g,minimapLineHeight:B,minimapCanvasInnerWidth:X,minimapCanvasInnerHeight:A,minimapCanvasOuterWidth:le,minimapCanvasOuterHeight:O}}static computeLayout(e,t){const i=t.outerWidth|0,n=t.outerHeight|0,o=t.lineHeight|0,r=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,f=e.get(125),g=f==="inherit"?e.get(124):f,m=g==="inherit"?e.get(120):g,_=e.get(123),C=e.get(2),S=t.isDominatedByLongLines,x=e.get(52),L=e.get(62).renderType!==0,k=e.get(63),T=e.get(96),A=e.get(67),O=e.get(94),I=O.verticalScrollbarSize,R=O.verticalHasArrows,B=O.arrowSize,z=O.horizontalScrollbarSize,q=e.get(60),te=e.get(39),U=e.get(101)!=="never";let X;if(typeof q=="string"&&/^\d+(\.\d+)?ch$/.test(q)){const bt=parseFloat(q.substr(0,q.length-2));X=Ln.clampedInt(bt*a,0,0,1e3)}else X=Ln.clampedInt(q,0,0,1e3);te&&U&&(X+=16);let le=0;if(L){const bt=Math.max(r,k);le=Math.round(bt*l)}let be=0;x&&(be=o);let pe=0,ke=pe+be,He=ke+le,Ge=He+X;const Ue=i-be-le-X;let ce=!1,ue=!1,$e=-1;C!==2&&(g==="inherit"&&S?(ce=!0,ue=!0):m==="on"||m==="bounded"?ue=!0:m==="wordWrapColumn"&&($e=_));const tt=Vb._computeMinimapLayout({outerWidth:i,outerHeight:n,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:T,minimap:A,verticalScrollbarWidth:I,viewLineCount:d,remainingWidth:Ue,isViewportWrapping:ue},t.memory||new OX);tt.renderMinimap!==0&&tt.minimapLeft===0&&(pe+=tt.minimapWidth,ke+=tt.minimapWidth,He+=tt.minimapWidth,Ge+=tt.minimapWidth);const _e=Ue-tt.minimapWidth,Vt=Math.max(1,Math.floor((_e-I-2)/a)),Ne=R?B:0;return ue&&($e=Math.max(1,Vt),m==="bounded"&&($e=Math.min($e,_))),{width:i,height:n,glyphMarginLeft:pe,glyphMarginWidth:be,lineNumbersLeft:ke,lineNumbersWidth:le,decorationsLeft:He,decorationsWidth:X,contentLeft:Ge,contentWidth:_e,minimap:tt,viewportColumn:Vt,isWordWrapMinified:ce,isViewportWrapping:ue,wrappingColumn:$e,verticalScrollbarWidth:I,horizontalScrollbarHeight:z,overviewRuler:{top:Ne,width:I,height:n-2*Ne,right:0}}}}class PCe extends ys{constructor(){const e={enabled:!0};super(59,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:b("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:xt(e.enabled,this.defaultValue.enabled)}}}class FCe extends ys{constructor(){const e={stickyScroll:{enabled:!1}};super(34,"experimental",e,{"editor.experimental.stickyScroll.enabled":{type:"boolean",default:e.stickyScroll.enabled,description:b("editor.experimental.stickyScroll","Shows the nested current scopes during the scroll at the top of the editor.")}})}validate(e){var t;return!e||typeof e!="object"?this.defaultValue:{stickyScroll:{enabled:xt((t=e.stickyScroll)===null||t===void 0?void 0:t.enabled,this.defaultValue.stickyScroll.enabled)}}}}class BCe extends ys{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(129,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:b("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[b("editor.inlayHints.on","Inlay hints are enabled"),b("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding `Ctrl+Alt`"),b("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding `Ctrl+Alt`"),b("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:b("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:b("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:b("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:ho(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Ln.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:da.string(t.fontFamily,this.defaultValue.fontFamily),padding:xt(t.padding,this.defaultValue.padding)}}}class VCe extends id{constructor(){super(61,"lineHeight",ma.lineHeight,e=>id.clamp(e,0,150),{markdownDescription:b("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class WCe extends ys{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(67,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:b("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:b("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[b("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),b("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),b("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:b("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:b("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:b("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:b("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:b("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:b("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xt(t.enabled,this.defaultValue.enabled),autohide:xt(t.autohide,this.defaultValue.autohide),size:ho(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:ho(t.side,this.defaultValue.side,["right","left"]),showSlider:ho(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:xt(t.renderCharacters,this.defaultValue.renderCharacters),scale:Ln.clampedInt(t.scale,1,1,3),maxColumn:Ln.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function HCe(s){return s==="ctrlCmd"?mi?"metaKey":"ctrlKey":"altKey"}class zCe extends ys{constructor(){super(77,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:b("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:b("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Ln.clampedInt(t.top,0,0,1e3),bottom:Ln.clampedInt(t.bottom,0,0,1e3)}}}class UCe extends ys{constructor(){const e={enabled:!0,cycle:!1};super(78,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:b("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:b("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xt(t.enabled,this.defaultValue.enabled),cycle:xt(t.cycle,this.defaultValue.cycle)}}}class $Ce extends eC{constructor(){super(131)}compute(e,t,i){return e.pixelRatio}}class jCe extends ys{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[b("on","Quick suggestions show inside the suggest widget"),b("inline","Quick suggestions show as ghost text"),b("off","Quick suggestions are disabled")]}];super(81,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:b("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:b("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:b("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:b("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:n}=e,o=["on","inline","off"];let r,a,l;return typeof t=="boolean"?r=t?"on":"off":r=ho(t,this.defaultValue.other,o),typeof i=="boolean"?a=i?"on":"off":a=ho(i,this.defaultValue.comments,o),typeof n=="boolean"?l=n?"on":"off":l=ho(n,this.defaultValue.strings,o),{other:r,comments:a,strings:l}}}class KCe extends ys{constructor(){super(62,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[b("lineNumbers.off","Line numbers are not rendered."),b("lineNumbers.on","Line numbers are rendered as absolute number."),b("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),b("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:b("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function CT(s){const e=s.get(89);return e==="editable"?s.get(83):e!=="on"}class qCe extends ys{constructor(){const e=[],t={type:"number",description:b("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(93,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:b("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:b("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Ln.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const n=i;t.push({column:Ln.clampedInt(n.column,0,0,1e4),color:n.color})}return t.sort((i,n)=>i.column-n.column),t}return this.defaultValue}}function gK(s,e){if(typeof s!="string")return e;switch(s){case"hidden":return 2;case"visible":return 3;default:return 1}}class GCe extends ys{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(94,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[b("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),b("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),b("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:b("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[b("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),b("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),b("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:b("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:b("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:b("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:b("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Ln.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),n=Ln.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Ln.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:gK(t.vertical,this.defaultValue.vertical),horizontal:gK(t.horizontal,this.defaultValue.horizontal),useShadows:xt(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:xt(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:xt(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:xt(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:xt(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Ln.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:n,verticalSliderSize:Ln.clampedInt(t.verticalSliderSize,n,0,1e3),scrollByPage:xt(t.scrollByPage,this.defaultValue.scrollByPage)}}}const Ma="inUntrustedWorkspace",Br={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class YCe extends ys{constructor(){const e={nonBasicASCII:Ma,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Ma,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(115,"unicodeHighlight",e,{[Br.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ma],default:e.nonBasicASCII,description:b("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Br.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:b("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Br.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:b("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Br.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ma],default:e.includeComments,description:b("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[Br.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ma],default:e.includeStrings,description:b("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to unicode highlighting.")},[Br.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:b("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Br.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:b("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(Sl(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),i=!0)),t.allowedLocales&&e&&(Sl(e.allowedLocales,t.allowedLocales)||(e=Object.assign(Object.assign({},e),{allowedLocales:t.allowedLocales}),i=!0));const n=super.applyUpdate(e,t);return i?new iy(n.newValue,!0):n}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Wb(t.nonBasicASCII,Ma,[!0,!1,Ma]),invisibleCharacters:xt(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:xt(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Wb(t.includeComments,Ma,[!0,!1,Ma]),includeStrings:Wb(t.includeStrings,Ma,[!0,!1,Ma]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[n,o]of Object.entries(e))o===!0&&(i[n]=!0);return i}}class ZCe extends ys{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(57,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:b("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xt(t.enabled,this.defaultValue.enabled),mode:ho(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class QCe extends ys{constructor(){const e={enabled:Mo.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Mo.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:b("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:b("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:xt(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:xt(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class XCe extends ys{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[b("editor.guides.bracketPairs.true","Enables bracket pair guides."),b("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),b("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:b("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[b("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),b("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),b("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:b("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:b("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:b("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[b("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),b("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),b("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:b("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Wb(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Wb(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:xt(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:xt(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Wb(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function Wb(s,e,t){const i=t.indexOf(s);return i===-1?e:t[i]}class JCe extends ys{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(108,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[b("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),b("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:b("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:b("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:b("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:b("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:b("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:b("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:b("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:b("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:b("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:b("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:b("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:ho(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:xt(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:xt(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:xt(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:xt(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:xt(t.showIcons,this.defaultValue.showIcons),showStatusBar:xt(t.showStatusBar,this.defaultValue.showStatusBar),preview:xt(t.preview,this.defaultValue.preview),previewMode:ho(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:xt(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:xt(t.showMethods,this.defaultValue.showMethods),showFunctions:xt(t.showFunctions,this.defaultValue.showFunctions),showConstructors:xt(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:xt(t.showDeprecated,this.defaultValue.showDeprecated),showFields:xt(t.showFields,this.defaultValue.showFields),showVariables:xt(t.showVariables,this.defaultValue.showVariables),showClasses:xt(t.showClasses,this.defaultValue.showClasses),showStructs:xt(t.showStructs,this.defaultValue.showStructs),showInterfaces:xt(t.showInterfaces,this.defaultValue.showInterfaces),showModules:xt(t.showModules,this.defaultValue.showModules),showProperties:xt(t.showProperties,this.defaultValue.showProperties),showEvents:xt(t.showEvents,this.defaultValue.showEvents),showOperators:xt(t.showOperators,this.defaultValue.showOperators),showUnits:xt(t.showUnits,this.defaultValue.showUnits),showValues:xt(t.showValues,this.defaultValue.showValues),showConstants:xt(t.showConstants,this.defaultValue.showConstants),showEnums:xt(t.showEnums,this.defaultValue.showEnums),showEnumMembers:xt(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:xt(t.showKeywords,this.defaultValue.showKeywords),showWords:xt(t.showWords,this.defaultValue.showWords),showColors:xt(t.showColors,this.defaultValue.showColors),showFiles:xt(t.showFiles,this.defaultValue.showFiles),showReferences:xt(t.showReferences,this.defaultValue.showReferences),showFolders:xt(t.showFolders,this.defaultValue.showFolders),showTypeParameters:xt(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:xt(t.showSnippets,this.defaultValue.showSnippets),showUsers:xt(t.showUsers,this.defaultValue.showUsers),showIssues:xt(t.showIssues,this.defaultValue.showIssues)}}}class e1e extends ys{constructor(){super(104,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:b("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:xt(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class t1e extends eC{constructor(){super(132)}compute(e,t,i){return t.get(83)?!0:e.tabFocusMode}}function i1e(s){switch(s){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class n1e extends eC{constructor(){super(134)}compute(e,t,i){const n=t.get(133);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:n.isWordWrapMinified,isViewportWrapping:n.isViewportWrapping,wrappingColumn:n.wrappingColumn}}}class s1e extends ys{constructor(){const e={enabled:!0};super(32,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:b("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down `shift` (instead of opening the file in an editor).")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:xt(e.enabled,this.defaultValue.enabled)}}}const o1e="Consolas, 'Courier New', monospace",r1e="Menlo, Monaco, 'Courier New', monospace",a1e="'Droid Sans Mono', 'monospace', monospace",ma={fontFamily:mi?r1e:Wo?a1e:o1e,fontWeight:"normal",fontSize:mi?12:14,lineHeight:0,letterSpacing:0},pb=[];function Ve(s){return pb[s.id]=s,s}const fu={acceptSuggestionOnCommitCharacter:Ve(new Si(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:b("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`; `) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Ve(new Ds(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",b("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:b("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Ve(new xCe),accessibilityPageSize:Ve(new Ln(3,"accessibilityPageSize",10,1,1073741824,{description:b("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:Ve(new da(4,"ariaLabel",b("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:Ve(new Ds(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",b("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),b("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:b("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:Ve(new Ds(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",b("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:b("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Ve(new Ds(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",b("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:b("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Ve(new Ds(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",b("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),b("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:b("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Ve(new nw(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],LCe,{enumDescriptions:[b("editor.autoIndent.none","The editor will not insert indentation automatically."),b("editor.autoIndent.keep","The editor will keep the current line's indentation."),b("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),b("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),b("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:b("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Ve(new Si(10,"automaticLayout",!1)),autoSurround:Ve(new Ds(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[b("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),b("editor.autoSurround.quotes","Surround with quotes but not brackets."),b("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:b("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:Ve(new QCe),bracketPairGuides:Ve(new XCe),stickyTabStops:Ve(new Si(106,"stickyTabStops",!1,{description:b("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Ve(new Si(14,"codeLens",!0,{description:b("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Ve(new da(15,"codeLensFontFamily","",{description:b("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:Ve(new Ln(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:b("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:Ve(new Si(17,"colorDecorators",!0,{description:b("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:Ve(new Si(18,"columnSelection",!1,{description:b("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:Ve(new DCe),contextmenu:Ve(new Si(20,"contextmenu",!0)),copyWithSyntaxHighlighting:Ve(new Si(21,"copyWithSyntaxHighlighting",!0,{description:b("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Ve(new nw(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],kCe,{description:b("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:Ve(new Si(23,"cursorSmoothCaretAnimation",!1,{description:b("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Ve(new nw(24,"cursorStyle",to.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],ECe,{description:b("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:Ve(new Ln(25,"cursorSurroundingLines",0,0,1073741824,{description:b("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Ve(new Ds(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[b("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),b("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:b("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:Ve(new Ln(27,"cursorWidth",0,0,1073741824,{markdownDescription:b("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Ve(new Si(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:Ve(new Si(29,"disableMonospaceOptimizations",!1)),domReadOnly:Ve(new Si(30,"domReadOnly",!1)),dragAndDrop:Ve(new Si(31,"dragAndDrop",!0,{description:b("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Ve(new ICe),dropIntoEditor:Ve(new s1e),experimental:Ve(new FCe),extraEditorClassName:Ve(new da(35,"extraEditorClassName","")),fastScrollSensitivity:Ve(new id(36,"fastScrollSensitivity",5,s=>s<=0?5:s,{markdownDescription:b("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:Ve(new NCe),fixedOverflowWidgets:Ve(new Si(38,"fixedOverflowWidgets",!1)),folding:Ve(new Si(39,"folding",!0,{description:b("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:Ve(new Ds(40,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[b("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),b("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:b("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:Ve(new Si(41,"foldingHighlight",!0,{description:b("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:Ve(new Si(42,"foldingImportsByDefault",!1,{description:b("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:Ve(new Ln(43,"foldingMaximumRegions",5e3,10,65e3,{description:b("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:Ve(new Si(44,"unfoldOnClickAfterEndOfLine",!1,{description:b("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Ve(new da(45,"fontFamily",ma.fontFamily,{description:b("fontFamily","Controls the font family.")})),fontInfo:Ve(new RCe),fontLigatures2:Ve(new Va),fontSize:Ve(new ACe),fontWeight:Ve(new Zu),formatOnPaste:Ve(new Si(50,"formatOnPaste",!1,{description:b("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Ve(new Si(51,"formatOnType",!1,{description:b("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Ve(new Si(52,"glyphMargin",!0,{description:b("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Ve(new MCe),hideCursorInOverviewRuler:Ve(new Si(54,"hideCursorInOverviewRuler",!1,{description:b("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:Ve(new OCe),inDiffEditor:Ve(new Si(56,"inDiffEditor",!1)),letterSpacing:Ve(new id(58,"letterSpacing",ma.letterSpacing,s=>id.clamp(s,-5,20),{description:b("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:Ve(new PCe),lineDecorationsWidth:Ve(new w_(60,"lineDecorationsWidth",10)),lineHeight:Ve(new VCe),lineNumbers:Ve(new KCe),lineNumbersMinChars:Ve(new Ln(63,"lineNumbersMinChars",5,1,300)),linkedEditing:Ve(new Si(64,"linkedEditing",!1,{description:b("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:Ve(new Si(65,"links",!0,{description:b("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Ve(new Ds(66,"matchBrackets","always",["always","near","never"],{description:b("matchBrackets","Highlight matching brackets.")})),minimap:Ve(new WCe),mouseStyle:Ve(new Ds(68,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Ve(new id(69,"mouseWheelScrollSensitivity",1,s=>s===0?1:s,{markdownDescription:b("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Ve(new Si(70,"mouseWheelZoom",!1,{markdownDescription:b("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Ve(new Si(71,"multiCursorMergeOverlapping",!0,{description:b("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Ve(new nw(72,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],HCe,{markdownEnumDescriptions:[b("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),b("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:b({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Ve(new Ds(73,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[b("multiCursorPaste.spread","Each cursor pastes a single line of the text."),b("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:b("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:Ve(new Si(74,"occurrencesHighlight",!0,{description:b("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:Ve(new Si(75,"overviewRulerBorder",!0,{description:b("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Ve(new Ln(76,"overviewRulerLanes",3,0,3)),padding:Ve(new zCe),parameterHints:Ve(new UCe),peekWidgetDefaultFocus:Ve(new Ds(79,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[b("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),b("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:b("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:Ve(new Si(80,"definitionLinkOpensInPeek",!1,{description:b("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Ve(new jCe),quickSuggestionsDelay:Ve(new Ln(82,"quickSuggestionsDelay",10,0,1073741824,{description:b("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Ve(new Si(83,"readOnly",!1)),renameOnType:Ve(new Si(84,"renameOnType",!1,{description:b("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:b("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Ve(new Si(85,"renderControlCharacters",!0,{description:b("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:Ve(new Si(86,"renderFinalNewline",!0,{description:b("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:Ve(new Ds(87,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",b("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:b("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Ve(new Si(88,"renderLineHighlightOnlyWhenFocus",!1,{description:b("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Ve(new Ds(89,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Ve(new Ds(90,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",b("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),b("renderWhitespace.selection","Render whitespace characters only on selected text."),b("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:b("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Ve(new Ln(91,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:Ve(new Si(92,"roundedSelection",!0,{description:b("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:Ve(new qCe),scrollbar:Ve(new GCe),scrollBeyondLastColumn:Ve(new Ln(95,"scrollBeyondLastColumn",4,0,1073741824,{description:b("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Ve(new Si(96,"scrollBeyondLastLine",!0,{description:b("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Ve(new Si(97,"scrollPredominantAxis",!0,{description:b("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Ve(new Si(98,"selectionClipboard",!0,{description:b("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Wo})),selectionHighlight:Ve(new Si(99,"selectionHighlight",!0,{description:b("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Ve(new Si(100,"selectOnLineNumbers",!0)),showFoldingControls:Ve(new Ds(101,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[b("showFoldingControls.always","Always show the folding controls."),b("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),b("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:b("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:Ve(new Si(102,"showUnused",!0,{description:b("showUnused","Controls fading out of unused code.")})),showDeprecated:Ve(new Si(128,"showDeprecated",!0,{description:b("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:Ve(new BCe),snippetSuggestions:Ve(new Ds(103,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[b("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),b("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),b("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),b("snippetSuggestions.none","Do not show snippet suggestions.")],description:b("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Ve(new e1e),smoothScrolling:Ve(new Si(105,"smoothScrolling",!1,{description:b("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Ve(new Ln(107,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Ve(new JCe),inlineSuggest:Ve(new ZCe),suggestFontSize:Ve(new Ln(109,"suggestFontSize",0,0,1e3,{markdownDescription:b("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:Ve(new Ln(110,"suggestLineHeight",0,0,1e3,{markdownDescription:b("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:Ve(new Si(111,"suggestOnTriggerCharacters",!0,{description:b("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Ve(new Ds(112,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[b("suggestSelection.first","Always select the first suggestion."),b("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),b("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:b("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Ve(new Ds(113,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[b("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),b("tabCompletion.off","Disable tab completions."),b("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:b("tabCompletion","Enables tab completions.")})),tabIndex:Ve(new Ln(114,"tabIndex",0,-1,1073741824)),unicodeHighlight:Ve(new YCe),unusualLineTerminators:Ve(new Ds(116,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[b("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),b("unusualLineTerminators.off","Unusual line terminators are ignored."),b("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:b("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:Ve(new Si(117,"useShadowDOM",!0)),useTabStops:Ve(new Si(118,"useTabStops",!0,{description:b("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:Ve(new da(119,"wordSeparators",wX,{description:b("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Ve(new Ds(120,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[b("wordWrap.off","Lines will never wrap."),b("wordWrap.on","Lines will wrap at the viewport width."),b({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),b({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:b({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Ve(new da(121,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:Ve(new da(122,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:Ve(new Ln(123,"wordWrapColumn",80,1,1073741824,{markdownDescription:b({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Ve(new Ds(124,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Ve(new Ds(125,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:Ve(new nw(126,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],i1e,{enumDescriptions:[b("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),b("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),b("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),b("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:b("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:Ve(new Ds(127,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[b("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),b("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:b("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:Ve(new TCe),pixelRatio:Ve(new $Ce),tabFocusMode:Ve(new t1e),layoutInfo:Ve(new Vb),wrappingInfo:Ve(new n1e)};class l1e{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?u0.isErrorNoTelemetry(e)?new u0(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const PX=new l1e;function Yt(s){Dd(s)||PX.onUnexpectedError(s)}function Ys(s){Dd(s)||PX.onUnexpectedExternalError(s)}function pK(s){if(s instanceof Error){const{name:e,message:t}=s,i=s.stacktrace||s.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:u0.isErrorNoTelemetry(s)}}return s}const wT="Canceled";function Dd(s){return s instanceof Jg?!0:s instanceof Error&&s.name===wT&&s.message===wT}class Jg extends Error{constructor(){super(wT),this.name=this.message}}function FX(){const s=new Error(wT);return s.name=s.message,s}function iu(s){return s?new Error(`Illegal argument: ${s}`):new Error("Illegal argument")}function c1e(s){return s?new Error(`Illegal state: ${s}`):new Error("Illegal state")}class u1e extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class u0 extends Error{constructor(e){super(e),this.name="ErrorNoTelemetry"}static fromError(e){if(e instanceof u0)return e;const t=new u0;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="ErrorNoTelemetry"}}class K8 extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,K8.prototype);debugger}}function qh(s){const e=this;let t=!1,i;return function(){return t||(t=!0,i=s.apply(e,arguments)),i}}class d1e extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function q8(s){return typeof s.dispose=="function"&&s.dispose.length===0}function Ni(s){if(fi.is(s)){const e=[];for(const t of s)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new d1e(e);return Array.isArray(s)?[]:s}else if(s)return s.dispose(),s}function nu(...s){return ni(()=>Ni(s))}function ni(s){return{dispose:qh(()=>{s()})}}class Ae{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{Ni(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Ae.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}Ae.DISABLE_DISPOSED_WARNING=!1;class ge{constructor(){this._store=new Ae,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}ge.None=Object.freeze({dispose(){}});class tr{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class h1e{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}class f1e{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>t!==void 0,this.dispose=()=>{t&&(t(),t=void 0)},this}}class g1e{constructor(e){this.object=e}dispose(){}}const p1e=ss.performance&&typeof ss.performance.now=="function";class qr{constructor(e){this._highResolution=p1e&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new qr(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?ss.performance.now():Date.now()}}var gt;(function(s){s.None=()=>ge.None;function e(O){return(I,R=null,B)=>{let z=!1,q;return q=O(te=>{if(!z)return q?q.dispose():z=!0,I.call(R,te)},null,B),z&&q.dispose(),q}}s.once=e;function t(O,I,R){return l((B,z=null,q)=>O(te=>B.call(z,I(te)),null,q),R)}s.map=t;function i(O,I,R){return l((B,z=null,q)=>O(te=>{I(te),B.call(z,te)},null,q),R)}s.forEach=i;function n(O,I,R){return l((B,z=null,q)=>O(te=>I(te)&&B.call(z,te),null,q),R)}s.filter=n;function o(O){return O}s.signal=o;function r(...O){return(I,R=null,B)=>nu(...O.map(z=>z(q=>I.call(R,q),null,B)))}s.any=r;function a(O,I,R,B){let z=R;return t(O,q=>(z=I(z,q),z),B)}s.reduce=a;function l(O,I){let R;const B={onFirstListenerAdd(){R=O(z.fire,z)},onLastListenerRemove(){R==null||R.dispose()}},z=new J(B);return I==null||I.add(z),z.event}function c(O,I,R=100,B=!1,z,q){let te,U,X,le=0;const be={leakWarningThreshold:z,onFirstListenerAdd(){te=O(ke=>{le++,U=I(U,ke),B&&!X&&(pe.fire(U),U=void 0),clearTimeout(X),X=setTimeout(()=>{const He=U;U=void 0,X=void 0,(!B||le>1)&&pe.fire(He),le=0},R)})},onLastListenerRemove(){te.dispose()}},pe=new J(be);return q==null||q.add(pe),pe.event}s.debounce=c;function d(O,I=(B,z)=>B===z,R){let B=!0,z;return n(O,q=>{const te=B||!I(q,z);return B=!1,z=q,te},R)}s.latch=d;function f(O,I,R){return[s.filter(O,I,R),s.filter(O,B=>!I(B),R)]}s.split=f;function g(O,I=!1,R=[]){let B=R.slice(),z=O(U=>{B?B.push(U):te.fire(U)});const q=()=>{B==null||B.forEach(U=>te.fire(U)),B=null},te=new J({onFirstListenerAdd(){z||(z=O(U=>te.fire(U)))},onFirstListenerDidAdd(){B&&(I?setTimeout(q):q())},onLastListenerRemove(){z&&z.dispose(),z=null}});return te.event}s.buffer=g;class m{constructor(I){this.event=I,this.disposables=new Ae}map(I){return new m(t(this.event,I,this.disposables))}forEach(I){return new m(i(this.event,I,this.disposables))}filter(I){return new m(n(this.event,I,this.disposables))}reduce(I,R){return new m(a(this.event,I,R,this.disposables))}latch(){return new m(d(this.event,void 0,this.disposables))}debounce(I,R=100,B=!1,z){return new m(c(this.event,I,R,B,z,this.disposables))}on(I,R,B){return this.event(I,R,B)}once(I,R,B){return e(this.event)(I,R,B)}dispose(){this.disposables.dispose()}}function _(O){return new m(O)}s.chain=_;function C(O,I,R=B=>B){const B=(...U)=>te.fire(R(...U)),z=()=>O.on(I,B),q=()=>O.removeListener(I,B),te=new J({onFirstListenerAdd:z,onLastListenerRemove:q});return te.event}s.fromNodeEventEmitter=C;function S(O,I,R=B=>B){const B=(...U)=>te.fire(R(...U)),z=()=>O.addEventListener(I,B),q=()=>O.removeEventListener(I,B),te=new J({onFirstListenerAdd:z,onLastListenerRemove:q});return te.event}s.fromDOMEventEmitter=S;function x(O){return new Promise(I=>e(O)(I))}s.toPromise=x;function L(O,I){return I(void 0),O(R=>I(R))}s.runAndSubscribe=L;function k(O,I){let R=null;function B(q){R==null||R.dispose(),R=new Ae,I(q,R)}B(void 0);const z=O(q=>B(q));return ni(()=>{z.dispose(),R==null||R.dispose()})}s.runAndSubscribeWithStore=k;class T{constructor(I,R){this.obs=I,this._counter=0,this._hasChanged=!1;const B={onFirstListenerAdd:()=>{I.addObserver(this)},onLastListenerRemove:()=>{I.removeObserver(this)}};this.emitter=new J(B),R&&R.add(this.emitter)}beginUpdate(I){this._counter++}handleChange(I,R){this._hasChanged=!0}endUpdate(I){--this._counter===0&&this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this.obs.get()))}}function A(O,I){return new T(O,I).emitter.event}s.fromObservable=A})(gt||(gt={}));class mN{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${mN._idPool++}`}start(e){this._stopWatch=new qr(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}mN._idPool=0;class G8{constructor(e){this.value=e}static create(){var e;return new G8((e=new Error().stack)!==null&&e!==void 0?e:"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class m1e{constructor(e,t,i){this.callback=e,this.callbackThis=t,this.stack=i,this.subscription=new f1e}invoke(e){this.callback.call(this.callbackThis,e)}}class J{constructor(e){var t,i;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new mN(this._options._profName):void 0,this._deliveryQueue=(i=this._options)===null||i===void 0?void 0:i.deliveryQueue}dispose(){var e,t,i,n;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),(e=this._deliveryQueue)===null||e===void 0||e.clear(this),(i=(t=this._options)===null||t===void 0?void 0:t.onLastListenerRemove)===null||i===void 0||i.call(t),(n=this._leakageMon)===null||n===void 0||n.dispose())}get event(){return this._event||(this._event=(e,t,i)=>{var n,o,r;this._listeners||(this._listeners=new Sr);const a=this._listeners.isEmpty();a&&((n=this._options)===null||n===void 0?void 0:n.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this);let l,c;this._leakageMon&&this._listeners.size>=30&&(c=G8.create(),l=this._leakageMon.check(c,this._listeners.size+1));const d=new m1e(e,t,c),f=this._listeners.push(d);a&&((o=this._options)===null||o===void 0?void 0:o.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),!((r=this._options)===null||r===void 0)&&r.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const g=d.subscription.set(()=>{l==null||l(),this._disposed||(f(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return i instanceof Ae?i.add(g):Array.isArray(i)&&i.push(g),g}),this._event}fire(e){var t,i;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new _1e);for(const n of this._listeners)this._deliveryQueue.push(this,n,e);(t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size),this._deliveryQueue.deliver(),(i=this._perfMon)===null||i===void 0||i.stop()}}}class BX{constructor(){this._queue=new Sr}get size(){return this._queue.size}push(e,t,i){this._queue.push(new v1e(e,t,i))}clear(e){const t=new Sr;for(const i of this._queue)i.emitter!==e&&t.push(i);this._queue=t}deliver(){for(;this._queue.size>0;){const e=this._queue.shift();try{e.listener.invoke(e.event)}catch(t){Yt(t)}}}}class _1e extends BX{clear(e){this._queue.clear()}}class v1e{constructor(e,t,i){this.emitter=e,this.listener=t,this.event=i}}class yT extends J{constructor(e){super(e),this._isPaused=0,this._eventQueue=new Sr,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class b1e extends yT{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class Y8{constructor(){this.buffers=[]}wrapEvent(e){return(t,i,n)=>e(o=>{const r=this.buffers[this.buffers.length-1];r?r.push(()=>t.call(i,o)):t.call(i,o)},void 0,n)}bufferEvents(e){const t=[];this.buffers.push(t);const i=e();return this.buffers.pop(),t.forEach(n=>n()),i}}class mK{constructor(){this.listening=!1,this.inputEvent=gt.None,this.inputEventListener=ge.None,this.emitter=new J({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const VX=Object.freeze(function(s,e){const t=setTimeout(s.bind(e),0);return{dispose(){clearTimeout(t)}}});var ri;(function(s){function e(t){return t===s.None||t===s.Cancelled||t instanceof RE?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}s.isCancellationToken=e,s.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:gt.None}),s.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:VX})})(ri||(ri={}));class RE{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?VX:(this._emitter||(this._emitter=new J),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class _o{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new RE),this._token}cancel(){this._token?this._token instanceof RE&&this._token.cancel():this._token=ri.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof RE&&this._token.dispose():this._token=ri.None}}class Z8{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const AE=new Z8,_5=new Z8,v5=new Z8,WX=new Array(230),C1e=Object.create(null),w1e=Object.create(null),Q8=[];for(let s=0;s<=193;s++)Q8[s]=-1;(function(){const s="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",s,s],[0,1,1,"Hyper",0,s,0,s,s,s],[0,1,2,"Super",0,s,0,s,s,s],[0,1,3,"Fn",0,s,0,s,s,s],[0,1,4,"FnLock",0,s,0,s,s,s],[0,1,5,"Suspend",0,s,0,s,s,s],[0,1,6,"Resume",0,s,0,s,s,s],[0,1,7,"Turbo",0,s,0,s,s,s],[0,1,8,"Sleep",0,s,0,"VK_SLEEP",s,s],[0,1,9,"WakeUp",0,s,0,s,s,s],[31,0,10,"KeyA",31,"A",65,"VK_A",s,s],[32,0,11,"KeyB",32,"B",66,"VK_B",s,s],[33,0,12,"KeyC",33,"C",67,"VK_C",s,s],[34,0,13,"KeyD",34,"D",68,"VK_D",s,s],[35,0,14,"KeyE",35,"E",69,"VK_E",s,s],[36,0,15,"KeyF",36,"F",70,"VK_F",s,s],[37,0,16,"KeyG",37,"G",71,"VK_G",s,s],[38,0,17,"KeyH",38,"H",72,"VK_H",s,s],[39,0,18,"KeyI",39,"I",73,"VK_I",s,s],[40,0,19,"KeyJ",40,"J",74,"VK_J",s,s],[41,0,20,"KeyK",41,"K",75,"VK_K",s,s],[42,0,21,"KeyL",42,"L",76,"VK_L",s,s],[43,0,22,"KeyM",43,"M",77,"VK_M",s,s],[44,0,23,"KeyN",44,"N",78,"VK_N",s,s],[45,0,24,"KeyO",45,"O",79,"VK_O",s,s],[46,0,25,"KeyP",46,"P",80,"VK_P",s,s],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",s,s],[48,0,27,"KeyR",48,"R",82,"VK_R",s,s],[49,0,28,"KeyS",49,"S",83,"VK_S",s,s],[50,0,29,"KeyT",50,"T",84,"VK_T",s,s],[51,0,30,"KeyU",51,"U",85,"VK_U",s,s],[52,0,31,"KeyV",52,"V",86,"VK_V",s,s],[53,0,32,"KeyW",53,"W",87,"VK_W",s,s],[54,0,33,"KeyX",54,"X",88,"VK_X",s,s],[55,0,34,"KeyY",55,"Y",89,"VK_Y",s,s],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",s,s],[22,0,36,"Digit1",22,"1",49,"VK_1",s,s],[23,0,37,"Digit2",23,"2",50,"VK_2",s,s],[24,0,38,"Digit3",24,"3",51,"VK_3",s,s],[25,0,39,"Digit4",25,"4",52,"VK_4",s,s],[26,0,40,"Digit5",26,"5",53,"VK_5",s,s],[27,0,41,"Digit6",27,"6",54,"VK_6",s,s],[28,0,42,"Digit7",28,"7",55,"VK_7",s,s],[29,0,43,"Digit8",29,"8",56,"VK_8",s,s],[30,0,44,"Digit9",30,"9",57,"VK_9",s,s],[21,0,45,"Digit0",21,"0",48,"VK_0",s,s],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",s,s],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",s,s],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",s,s],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",s,s],[10,1,50,"Space",10,"Space",32,"VK_SPACE",s,s],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,s,0,s,s,s],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",s,s],[59,1,64,"F1",59,"F1",112,"VK_F1",s,s],[60,1,65,"F2",60,"F2",113,"VK_F2",s,s],[61,1,66,"F3",61,"F3",114,"VK_F3",s,s],[62,1,67,"F4",62,"F4",115,"VK_F4",s,s],[63,1,68,"F5",63,"F5",116,"VK_F5",s,s],[64,1,69,"F6",64,"F6",117,"VK_F6",s,s],[65,1,70,"F7",65,"F7",118,"VK_F7",s,s],[66,1,71,"F8",66,"F8",119,"VK_F8",s,s],[67,1,72,"F9",67,"F9",120,"VK_F9",s,s],[68,1,73,"F10",68,"F10",121,"VK_F10",s,s],[69,1,74,"F11",69,"F11",122,"VK_F11",s,s],[70,1,75,"F12",70,"F12",123,"VK_F12",s,s],[0,1,76,"PrintScreen",0,s,0,s,s,s],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",s,s],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",s,s],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",s,s],[14,1,80,"Home",14,"Home",36,"VK_HOME",s,s],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",s,s],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",s,s],[13,1,83,"End",13,"End",35,"VK_END",s,s],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",s,s],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",s],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",s],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",s],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",s],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",s,s],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",s,s],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",s,s],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",s,s],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",s,s],[3,1,94,"NumpadEnter",3,s,0,s,s,s],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",s,s],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",s,s],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",s,s],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",s,s],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",s,s],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",s,s],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",s,s],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",s,s],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",s,s],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",s,s],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",s,s],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",s,s],[58,1,107,"ContextMenu",58,"ContextMenu",93,s,s,s],[0,1,108,"Power",0,s,0,s,s,s],[0,1,109,"NumpadEqual",0,s,0,s,s,s],[71,1,110,"F13",71,"F13",124,"VK_F13",s,s],[72,1,111,"F14",72,"F14",125,"VK_F14",s,s],[73,1,112,"F15",73,"F15",126,"VK_F15",s,s],[74,1,113,"F16",74,"F16",127,"VK_F16",s,s],[75,1,114,"F17",75,"F17",128,"VK_F17",s,s],[76,1,115,"F18",76,"F18",129,"VK_F18",s,s],[77,1,116,"F19",77,"F19",130,"VK_F19",s,s],[0,1,117,"F20",0,s,0,"VK_F20",s,s],[0,1,118,"F21",0,s,0,"VK_F21",s,s],[0,1,119,"F22",0,s,0,"VK_F22",s,s],[0,1,120,"F23",0,s,0,"VK_F23",s,s],[0,1,121,"F24",0,s,0,"VK_F24",s,s],[0,1,122,"Open",0,s,0,s,s,s],[0,1,123,"Help",0,s,0,s,s,s],[0,1,124,"Select",0,s,0,s,s,s],[0,1,125,"Again",0,s,0,s,s,s],[0,1,126,"Undo",0,s,0,s,s,s],[0,1,127,"Cut",0,s,0,s,s,s],[0,1,128,"Copy",0,s,0,s,s,s],[0,1,129,"Paste",0,s,0,s,s,s],[0,1,130,"Find",0,s,0,s,s,s],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",s,s],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",s,s],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",s,s],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",s,s],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",s,s],[0,1,136,"KanaMode",0,s,0,s,s,s],[0,0,137,"IntlYen",0,s,0,s,s,s],[0,1,138,"Convert",0,s,0,s,s,s],[0,1,139,"NonConvert",0,s,0,s,s,s],[0,1,140,"Lang1",0,s,0,s,s,s],[0,1,141,"Lang2",0,s,0,s,s,s],[0,1,142,"Lang3",0,s,0,s,s,s],[0,1,143,"Lang4",0,s,0,s,s,s],[0,1,144,"Lang5",0,s,0,s,s,s],[0,1,145,"Abort",0,s,0,s,s,s],[0,1,146,"Props",0,s,0,s,s,s],[0,1,147,"NumpadParenLeft",0,s,0,s,s,s],[0,1,148,"NumpadParenRight",0,s,0,s,s,s],[0,1,149,"NumpadBackspace",0,s,0,s,s,s],[0,1,150,"NumpadMemoryStore",0,s,0,s,s,s],[0,1,151,"NumpadMemoryRecall",0,s,0,s,s,s],[0,1,152,"NumpadMemoryClear",0,s,0,s,s,s],[0,1,153,"NumpadMemoryAdd",0,s,0,s,s,s],[0,1,154,"NumpadMemorySubtract",0,s,0,s,s,s],[0,1,155,"NumpadClear",126,"Clear",12,"VK_CLEAR",s,s],[0,1,156,"NumpadClearEntry",0,s,0,s,s,s],[5,1,0,s,5,"Ctrl",17,"VK_CONTROL",s,s],[4,1,0,s,4,"Shift",16,"VK_SHIFT",s,s],[6,1,0,s,6,"Alt",18,"VK_MENU",s,s],[57,1,0,s,57,"Meta",0,"VK_COMMAND",s,s],[5,1,157,"ControlLeft",5,s,0,"VK_LCONTROL",s,s],[4,1,158,"ShiftLeft",4,s,0,"VK_LSHIFT",s,s],[6,1,159,"AltLeft",6,s,0,"VK_LMENU",s,s],[57,1,160,"MetaLeft",57,s,0,"VK_LWIN",s,s],[5,1,161,"ControlRight",5,s,0,"VK_RCONTROL",s,s],[4,1,162,"ShiftRight",4,s,0,"VK_RSHIFT",s,s],[6,1,163,"AltRight",6,s,0,"VK_RMENU",s,s],[57,1,164,"MetaRight",57,s,0,"VK_RWIN",s,s],[0,1,165,"BrightnessUp",0,s,0,s,s,s],[0,1,166,"BrightnessDown",0,s,0,s,s,s],[0,1,167,"MediaPlay",0,s,0,s,s,s],[0,1,168,"MediaRecord",0,s,0,s,s,s],[0,1,169,"MediaFastForward",0,s,0,s,s,s],[0,1,170,"MediaRewind",0,s,0,s,s,s],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",s,s],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",s,s],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",s,s],[0,1,174,"Eject",0,s,0,s,s,s],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",s,s],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",s,s],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",s,s],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",s,s],[0,1,179,"LaunchApp1",0,s,0,"VK_MEDIA_LAUNCH_APP1",s,s],[0,1,180,"SelectTask",0,s,0,s,s,s],[0,1,181,"LaunchScreenSaver",0,s,0,s,s,s],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",s,s],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",s,s],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",s,s],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",s,s],[0,1,186,"BrowserStop",0,s,0,"VK_BROWSER_STOP",s,s],[0,1,187,"BrowserRefresh",0,s,0,"VK_BROWSER_REFRESH",s,s],[0,1,188,"BrowserFavorites",0,s,0,"VK_BROWSER_FAVORITES",s,s],[0,1,189,"ZoomToggle",0,s,0,s,s,s],[0,1,190,"MailReply",0,s,0,s,s,s],[0,1,191,"MailForward",0,s,0,s,s,s],[0,1,192,"MailSend",0,s,0,s,s,s],[109,1,0,s,109,"KeyInComposition",229,s,s,s],[111,1,0,s,111,"ABNT_C2",194,"VK_ABNT_C2",s,s],[91,1,0,s,91,"OEM_8",223,"VK_OEM_8",s,s],[0,1,0,s,0,s,0,"VK_KANA",s,s],[0,1,0,s,0,s,0,"VK_HANGUL",s,s],[0,1,0,s,0,s,0,"VK_JUNJA",s,s],[0,1,0,s,0,s,0,"VK_FINAL",s,s],[0,1,0,s,0,s,0,"VK_HANJA",s,s],[0,1,0,s,0,s,0,"VK_KANJI",s,s],[0,1,0,s,0,s,0,"VK_CONVERT",s,s],[0,1,0,s,0,s,0,"VK_NONCONVERT",s,s],[0,1,0,s,0,s,0,"VK_ACCEPT",s,s],[0,1,0,s,0,s,0,"VK_MODECHANGE",s,s],[0,1,0,s,0,s,0,"VK_SELECT",s,s],[0,1,0,s,0,s,0,"VK_PRINT",s,s],[0,1,0,s,0,s,0,"VK_EXECUTE",s,s],[0,1,0,s,0,s,0,"VK_SNAPSHOT",s,s],[0,1,0,s,0,s,0,"VK_HELP",s,s],[0,1,0,s,0,s,0,"VK_APPS",s,s],[0,1,0,s,0,s,0,"VK_PROCESSKEY",s,s],[0,1,0,s,0,s,0,"VK_PACKET",s,s],[0,1,0,s,0,s,0,"VK_DBE_SBCSCHAR",s,s],[0,1,0,s,0,s,0,"VK_DBE_DBCSCHAR",s,s],[0,1,0,s,0,s,0,"VK_ATTN",s,s],[0,1,0,s,0,s,0,"VK_CRSEL",s,s],[0,1,0,s,0,s,0,"VK_EXSEL",s,s],[0,1,0,s,0,s,0,"VK_EREOF",s,s],[0,1,0,s,0,s,0,"VK_PLAY",s,s],[0,1,0,s,0,s,0,"VK_ZOOM",s,s],[0,1,0,s,0,s,0,"VK_NONAME",s,s],[0,1,0,s,0,s,0,"VK_PA1",s,s],[0,1,0,s,0,s,0,"VK_OEM_CLEAR",s,s]],t=[],i=[];for(const n of e){const[o,r,a,l,c,d,f,g,m,_]=n;if(i[a]||(i[a]=!0,C1e[l]=a,w1e[l.toLowerCase()]=a,r&&(Q8[a]=c)),!t[c]){if(t[c]=!0,!d)throw new Error(`String representation missing for key code ${c} around scan code ${l}`);AE.define(c,d),_5.define(c,m||d),v5.define(c,_||m||d)}f&&(WX[f]=c)}})();var um;(function(s){function e(a){return AE.keyCodeToStr(a)}s.toString=e;function t(a){return AE.strToKeyCode(a)}s.fromString=t;function i(a){return _5.keyCodeToStr(a)}s.toUserSettingsUS=i;function n(a){return v5.keyCodeToStr(a)}s.toUserSettingsGeneral=n;function o(a){return _5.strToKeyCode(a)||v5.strToKeyCode(a)}s.fromUserSettings=o;function r(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return AE.keyCodeToStr(a)}s.toElectronAccelerator=r})(um||(um={}));function Is(s,e){const t=(e&65535)<<16>>>0;return(s|t)>>>0}let Hb;if(typeof ss.vscode<"u"&&typeof ss.vscode.process<"u"){const s=ss.vscode.process;Hb={get platform(){return s.platform},get arch(){return s.arch},get env(){return s.env},cwd(){return s.cwd()}}}else typeof process<"u"?Hb={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Hb={get platform(){return mo?"win32":mi?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const b5=Hb.cwd,y1e=Hb.env,y_=Hb.platform,S1e=65,L1e=97,x1e=90,D1e=122,mg=46,Qo=47,Aa=92,Vf=58,k1e=63;class HX extends Error{constructor(e,t,i){let n;typeof t=="string"&&t.indexOf("not ")===0?(n="must not be",t=t.replace(/^not /,"")):n="must be";const o=e.indexOf(".")!==-1?"property":"argument";let r=`The "${e}" ${o} ${n} of type ${t}`;r+=`. Received type ${typeof i}`,super(r),this.code="ERR_INVALID_ARG_TYPE"}}function $s(s,e){if(typeof s!="string")throw new HX(e,"string",s)}function zi(s){return s===Qo||s===Aa}function C5(s){return s===Qo}function Wf(s){return s>=S1e&&s<=x1e||s>=L1e&&s<=D1e}function ST(s,e,t,i){let n="",o=0,r=-1,a=0,l=0;for(let c=0;c<=s.length;++c){if(c<s.length)l=s.charCodeAt(c);else{if(i(l))break;l=Qo}if(i(l)){if(!(r===c-1||a===1))if(a===2){if(n.length<2||o!==2||n.charCodeAt(n.length-1)!==mg||n.charCodeAt(n.length-2)!==mg){if(n.length>2){const d=n.lastIndexOf(t);d===-1?(n="",o=0):(n=n.slice(0,d),o=n.length-1-n.lastIndexOf(t)),r=c,a=0;continue}else if(n.length!==0){n="",o=0,r=c,a=0;continue}}e&&(n+=n.length>0?`${t}..`:"..",o=2)}else n.length>0?n+=`${t}${s.slice(r+1,c)}`:n=s.slice(r+1,c),o=c-r-1;r=c,a=0}else l===mg&&a!==-1?++a:a=-1}return n}function zX(s,e){if(e===null||typeof e!="object")throw new HX("pathObject","Object",e);const t=e.dir||e.root,i=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${i}`:`${t}${s}${i}`:i}const ga={resolve(...s){let e="",t="",i=!1;for(let n=s.length-1;n>=-1;n--){let o;if(n>=0){if(o=s[n],$s(o,"path"),o.length===0)continue}else e.length===0?o=b5():(o=y1e[`=${e}`]||b5(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Aa)&&(o=`${e}\\`));const r=o.length;let a=0,l="",c=!1;const d=o.charCodeAt(0);if(r===1)zi(d)&&(a=1,c=!0);else if(zi(d))if(c=!0,zi(o.charCodeAt(1))){let f=2,g=f;for(;f<r&&!zi(o.charCodeAt(f));)f++;if(f<r&&f!==g){const m=o.slice(g,f);for(g=f;f<r&&zi(o.charCodeAt(f));)f++;if(f<r&&f!==g){for(g=f;f<r&&!zi(o.charCodeAt(f));)f++;(f===r||f!==g)&&(l=`\\\\${m}\\${o.slice(g,f)}`,a=f)}}}else a=1;else Wf(d)&&o.charCodeAt(1)===Vf&&(l=o.slice(0,2),a=2,r>2&&zi(o.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=ST(t,!i,"\\",zi),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(s){$s(s,"path");const e=s.length;if(e===0)return".";let t=0,i,n=!1;const o=s.charCodeAt(0);if(e===1)return C5(o)?"\\":s;if(zi(o))if(n=!0,zi(s.charCodeAt(1))){let a=2,l=a;for(;a<e&&!zi(s.charCodeAt(a));)a++;if(a<e&&a!==l){const c=s.slice(l,a);for(l=a;a<e&&zi(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!zi(s.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${s.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${s.slice(l,a)}`,t=a)}}}else t=1;else Wf(o)&&s.charCodeAt(1)===Vf&&(i=s.slice(0,2),t=2,e>2&&zi(s.charCodeAt(2))&&(n=!0,t=3));let r=t<e?ST(s.slice(t),!n,"\\",zi):"";return r.length===0&&!n&&(r="."),r.length>0&&zi(s.charCodeAt(e-1))&&(r+="\\"),i===void 0?n?`\\${r}`:r:n?`${i}\\${r}`:`${i}${r}`},isAbsolute(s){$s(s,"path");const e=s.length;if(e===0)return!1;const t=s.charCodeAt(0);return zi(t)||e>2&&Wf(t)&&s.charCodeAt(1)===Vf&&zi(s.charCodeAt(2))},join(...s){if(s.length===0)return".";let e,t;for(let o=0;o<s.length;++o){const r=s[o];$s(r,"path"),r.length>0&&(e===void 0?e=t=r:e+=`\\${r}`)}if(e===void 0)return".";let i=!0,n=0;if(typeof t=="string"&&zi(t.charCodeAt(0))){++n;const o=t.length;o>1&&zi(t.charCodeAt(1))&&(++n,o>2&&(zi(t.charCodeAt(2))?++n:i=!1))}if(i){for(;n<e.length&&zi(e.charCodeAt(n));)n++;n>=2&&(e=`\\${e.slice(n)}`)}return ga.normalize(e)},relative(s,e){if($s(s,"from"),$s(e,"to"),s===e)return"";const t=ga.resolve(s),i=ga.resolve(e);if(t===i||(s=t.toLowerCase(),e=i.toLowerCase(),s===e))return"";let n=0;for(;n<s.length&&s.charCodeAt(n)===Aa;)n++;let o=s.length;for(;o-1>n&&s.charCodeAt(o-1)===Aa;)o--;const r=o-n;let a=0;for(;a<e.length&&e.charCodeAt(a)===Aa;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Aa;)l--;const c=l-a,d=r<c?r:c;let f=-1,g=0;for(;g<d;g++){const _=s.charCodeAt(n+g);if(_!==e.charCodeAt(a+g))break;_===Aa&&(f=g)}if(g!==d){if(f===-1)return i}else{if(c>d){if(e.charCodeAt(a+g)===Aa)return i.slice(a+g+1);if(g===2)return i.slice(a+g)}r>d&&(s.charCodeAt(n+g)===Aa?f=g:g===2&&(f=3)),f===-1&&(f=0)}let m="";for(g=n+f+1;g<=o;++g)(g===o||s.charCodeAt(g)===Aa)&&(m+=m.length===0?"..":"\\..");return a+=f,m.length>0?`${m}${i.slice(a,l)}`:(i.charCodeAt(a)===Aa&&++a,i.slice(a,l))},toNamespacedPath(s){if(typeof s!="string")return s;if(s.length===0)return"";const e=ga.resolve(s);if(e.length<=2)return s;if(e.charCodeAt(0)===Aa){if(e.charCodeAt(1)===Aa){const t=e.charCodeAt(2);if(t!==k1e&&t!==mg)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Wf(e.charCodeAt(0))&&e.charCodeAt(1)===Vf&&e.charCodeAt(2)===Aa)return`\\\\?\\${e}`;return s},dirname(s){$s(s,"path");const e=s.length;if(e===0)return".";let t=-1,i=0;const n=s.charCodeAt(0);if(e===1)return zi(n)?s:".";if(zi(n)){if(t=i=1,zi(s.charCodeAt(1))){let a=2,l=a;for(;a<e&&!zi(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&zi(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!zi(s.charCodeAt(a));)a++;if(a===e)return s;a!==l&&(t=i=a+1)}}}}else Wf(n)&&s.charCodeAt(1)===Vf&&(t=e>2&&zi(s.charCodeAt(2))?3:2,i=t);let o=-1,r=!0;for(let a=e-1;a>=i;--a)if(zi(s.charCodeAt(a))){if(!r){o=a;break}}else r=!1;if(o===-1){if(t===-1)return".";o=t}return s.slice(0,o)},basename(s,e){e!==void 0&&$s(e,"ext"),$s(s,"path");let t=0,i=-1,n=!0,o;if(s.length>=2&&Wf(s.charCodeAt(0))&&s.charCodeAt(1)===Vf&&(t=2),e!==void 0&&e.length>0&&e.length<=s.length){if(e===s)return"";let r=e.length-1,a=-1;for(o=s.length-1;o>=t;--o){const l=s.charCodeAt(o);if(zi(l)){if(!n){t=o+1;break}}else a===-1&&(n=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(i=o):(r=-1,i=a))}return t===i?i=a:i===-1&&(i=s.length),s.slice(t,i)}for(o=s.length-1;o>=t;--o)if(zi(s.charCodeAt(o))){if(!n){t=o+1;break}}else i===-1&&(n=!1,i=o+1);return i===-1?"":s.slice(t,i)},extname(s){$s(s,"path");let e=0,t=-1,i=0,n=-1,o=!0,r=0;s.length>=2&&s.charCodeAt(1)===Vf&&Wf(s.charCodeAt(0))&&(e=i=2);for(let a=s.length-1;a>=e;--a){const l=s.charCodeAt(a);if(zi(l)){if(!o){i=a+1;break}continue}n===-1&&(o=!1,n=a+1),l===mg?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||n===-1||r===0||r===1&&t===n-1&&t===i+1?"":s.slice(t,n)},format:zX.bind(null,"\\"),parse(s){$s(s,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return e;const t=s.length;let i=0,n=s.charCodeAt(0);if(t===1)return zi(n)?(e.root=e.dir=s,e):(e.base=e.name=s,e);if(zi(n)){if(i=1,zi(s.charCodeAt(1))){let f=2,g=f;for(;f<t&&!zi(s.charCodeAt(f));)f++;if(f<t&&f!==g){for(g=f;f<t&&zi(s.charCodeAt(f));)f++;if(f<t&&f!==g){for(g=f;f<t&&!zi(s.charCodeAt(f));)f++;f===t?i=f:f!==g&&(i=f+1)}}}}else if(Wf(n)&&s.charCodeAt(1)===Vf){if(t<=2)return e.root=e.dir=s,e;if(i=2,zi(s.charCodeAt(2))){if(t===3)return e.root=e.dir=s,e;i=3}}i>0&&(e.root=s.slice(0,i));let o=-1,r=i,a=-1,l=!0,c=s.length-1,d=0;for(;c>=i;--c){if(n=s.charCodeAt(c),zi(n)){if(!l){r=c+1;break}continue}a===-1&&(l=!1,a=c+1),n===mg?o===-1?o=c:d!==1&&(d=1):o!==-1&&(d=-1)}return a!==-1&&(o===-1||d===0||d===1&&o===a-1&&o===r+1?e.base=e.name=s.slice(r,a):(e.name=s.slice(r,o),e.base=s.slice(r,a),e.ext=s.slice(o,a))),r>0&&r!==i?e.dir=s.slice(0,r-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},ws={resolve(...s){let e="",t=!1;for(let i=s.length-1;i>=-1&&!t;i--){const n=i>=0?s[i]:b5();$s(n,"path"),n.length!==0&&(e=`${n}/${e}`,t=n.charCodeAt(0)===Qo)}return e=ST(e,!t,"/",C5),t?`/${e}`:e.length>0?e:"."},normalize(s){if($s(s,"path"),s.length===0)return".";const e=s.charCodeAt(0)===Qo,t=s.charCodeAt(s.length-1)===Qo;return s=ST(s,!e,"/",C5),s.length===0?e?"/":t?"./":".":(t&&(s+="/"),e?`/${s}`:s)},isAbsolute(s){return $s(s,"path"),s.length>0&&s.charCodeAt(0)===Qo},join(...s){if(s.length===0)return".";let e;for(let t=0;t<s.length;++t){const i=s[t];$s(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":ws.normalize(e)},relative(s,e){if($s(s,"from"),$s(e,"to"),s===e||(s=ws.resolve(s),e=ws.resolve(e),s===e))return"";const t=1,i=s.length,n=i-t,o=1,r=e.length-o,a=n<r?n:r;let l=-1,c=0;for(;c<a;c++){const f=s.charCodeAt(t+c);if(f!==e.charCodeAt(o+c))break;f===Qo&&(l=c)}if(c===a)if(r>a){if(e.charCodeAt(o+c)===Qo)return e.slice(o+c+1);if(c===0)return e.slice(o+c)}else n>a&&(s.charCodeAt(t+c)===Qo?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=i;++c)(c===i||s.charCodeAt(c)===Qo)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+l)}`},toNamespacedPath(s){return s},dirname(s){if($s(s,"path"),s.length===0)return".";const e=s.charCodeAt(0)===Qo;let t=-1,i=!0;for(let n=s.length-1;n>=1;--n)if(s.charCodeAt(n)===Qo){if(!i){t=n;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":s.slice(0,t)},basename(s,e){e!==void 0&&$s(e,"ext"),$s(s,"path");let t=0,i=-1,n=!0,o;if(e!==void 0&&e.length>0&&e.length<=s.length){if(e===s)return"";let r=e.length-1,a=-1;for(o=s.length-1;o>=0;--o){const l=s.charCodeAt(o);if(l===Qo){if(!n){t=o+1;break}}else a===-1&&(n=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(i=o):(r=-1,i=a))}return t===i?i=a:i===-1&&(i=s.length),s.slice(t,i)}for(o=s.length-1;o>=0;--o)if(s.charCodeAt(o)===Qo){if(!n){t=o+1;break}}else i===-1&&(n=!1,i=o+1);return i===-1?"":s.slice(t,i)},extname(s){$s(s,"path");let e=-1,t=0,i=-1,n=!0,o=0;for(let r=s.length-1;r>=0;--r){const a=s.charCodeAt(r);if(a===Qo){if(!n){t=r+1;break}continue}i===-1&&(n=!1,i=r+1),a===mg?e===-1?e=r:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||i===-1||o===0||o===1&&e===i-1&&e===t+1?"":s.slice(e,i)},format:zX.bind(null,"/"),parse(s){$s(s,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return e;const t=s.charCodeAt(0)===Qo;let i;t?(e.root="/",i=1):i=0;let n=-1,o=0,r=-1,a=!0,l=s.length-1,c=0;for(;l>=i;--l){const d=s.charCodeAt(l);if(d===Qo){if(!a){o=l+1;break}continue}r===-1&&(a=!1,r=l+1),d===mg?n===-1?n=l:c!==1&&(c=1):n!==-1&&(c=-1)}if(r!==-1){const d=o===0&&t?1:o;n===-1||c===0||c===1&&n===r-1&&n===o+1?e.base=e.name=s.slice(d,r):(e.name=s.slice(d,n),e.base=s.slice(d,r),e.ext=s.slice(n,r))}return o>0?e.dir=s.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ws.win32=ga.win32=ga;ws.posix=ga.posix=ws;const UX=y_==="win32"?ga.normalize:ws.normalize,E1e=y_==="win32"?ga.resolve:ws.resolve,T1e=y_==="win32"?ga.relative:ws.relative,$X=y_==="win32"?ga.dirname:ws.dirname,wm=y_==="win32"?ga.basename:ws.basename,I1e=y_==="win32"?ga.extname:ws.extname,cd=y_==="win32"?ga.sep:ws.sep,N1e=/^\w[\w\d+.-]*$/,R1e=/^\//,A1e=/^\/\//;function _K(s,e){if(!s.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${s.authority}", path: "${s.path}", query: "${s.query}", fragment: "${s.fragment}"}`);if(s.scheme&&!N1e.test(s.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(s.path){if(s.authority){if(!R1e.test(s.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(A1e.test(s.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function M1e(s,e){return!s&&!e?"file":s}function O1e(s,e){switch(s){case"https":case"http":case"file":e?e[0]!==jc&&(e=jc+e):e=jc;break}return e}const ts="",jc="/",P1e=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class yt{constructor(e,t,i,n,o,r=!1){typeof e=="object"?(this.scheme=e.scheme||ts,this.authority=e.authority||ts,this.path=e.path||ts,this.query=e.query||ts,this.fragment=e.fragment||ts):(this.scheme=M1e(e,r),this.authority=t||ts,this.path=O1e(this.scheme,i||ts),this.query=n||ts,this.fragment=o||ts,_K(this,r))}static isUri(e){return e instanceof yt?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return LT(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:o,fragment:r}=e;return t===void 0?t=this.scheme:t===null&&(t=ts),i===void 0?i=this.authority:i===null&&(i=ts),n===void 0?n=this.path:n===null&&(n=ts),o===void 0?o=this.query:o===null&&(o=ts),r===void 0?r=this.fragment:r===null&&(r=ts),t===this.scheme&&i===this.authority&&n===this.path&&o===this.query&&r===this.fragment?this:new Fv(t,i,n,o,r)}static parse(e,t=!1){const i=P1e.exec(e);return i?new Fv(i[2]||ts,fk(i[4]||ts),fk(i[5]||ts),fk(i[7]||ts),fk(i[9]||ts),t):new Fv(ts,ts,ts,ts,ts)}static file(e){let t=ts;if(mo&&(e=e.replace(/\\/g,jc)),e[0]===jc&&e[1]===jc){const i=e.indexOf(jc,2);i===-1?(t=e.substring(2),e=jc):(t=e.substring(2,i),e=e.substring(i)||jc)}return new Fv("file",t,e,ts,ts)}static from(e){const t=new Fv(e.scheme,e.authority,e.path,e.query,e.fragment);return _K(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return mo&&e.scheme==="file"?i=yt.file(ga.join(LT(e,!0),...t)).path:i=ws.join(e.path,...t),e.with({path:i})}toString(e=!1){return w5(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof yt)return e;{const t=new Fv(e);return t._formatted=e.external,t._fsPath=e._sep===jX?e.fsPath:null,t}}else return e}}const jX=mo?1:void 0;class Fv extends yt{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=LT(this,!1)),this._fsPath}toString(e=!1){return e?w5(this,!0):(this._formatted||(this._formatted=w5(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=jX),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const KX={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function vK(s,e){let t,i=-1;for(let n=0;n<s.length;n++){const o=s.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47)i!==-1&&(t+=encodeURIComponent(s.substring(i,n)),i=-1),t!==void 0&&(t+=s.charAt(n));else{t===void 0&&(t=s.substr(0,n));const r=KX[o];r!==void 0?(i!==-1&&(t+=encodeURIComponent(s.substring(i,n)),i=-1),t+=r):i===-1&&(i=n)}}return i!==-1&&(t+=encodeURIComponent(s.substring(i))),t!==void 0?t:s}function F1e(s){let e;for(let t=0;t<s.length;t++){const i=s.charCodeAt(t);i===35||i===63?(e===void 0&&(e=s.substr(0,t)),e+=KX[i]):e!==void 0&&(e+=s[t])}return e!==void 0?e:s}function LT(s,e){let t;return s.authority&&s.path.length>1&&s.scheme==="file"?t=`//${s.authority}${s.path}`:s.path.charCodeAt(0)===47&&(s.path.charCodeAt(1)>=65&&s.path.charCodeAt(1)<=90||s.path.charCodeAt(1)>=97&&s.path.charCodeAt(1)<=122)&&s.path.charCodeAt(2)===58?e?t=s.path.substr(1):t=s.path[1].toLowerCase()+s.path.substr(2):t=s.path,mo&&(t=t.replace(/\//g,"\\")),t}function w5(s,e){const t=e?F1e:vK;let i="",{scheme:n,authority:o,path:r,query:a,fragment:l}=s;if(n&&(i+=n,i+=":"),(o||n==="file")&&(i+=jc,i+=jc),o){let c=o.indexOf("@");if(c!==-1){const d=o.substr(0,c);o=o.substr(c+1),c=d.indexOf(":"),c===-1?i+=t(d,!1):(i+=t(d.substr(0,c),!1),i+=":",i+=t(d.substr(c+1),!1)),i+="@"}o=o.toLowerCase(),c=o.indexOf(":"),c===-1?i+=t(o,!1):(i+=t(o.substr(0,c),!1),i+=o.substr(c))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const c=r.charCodeAt(1);c>=65&&c<=90&&(r=`/${String.fromCharCode(c+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const c=r.charCodeAt(0);c>=65&&c<=90&&(r=`${String.fromCharCode(c+32)}:${r.substr(2)}`)}i+=t(r,!0)}return a&&(i+="?",i+=t(a,!1)),l&&(i+="#",i+=e?l:vK(l,!1)),i}function qX(s){try{return decodeURIComponent(s)}catch{return s.length>3?s.substr(0,3)+qX(s.substr(3)):s}}const bK=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function fk(s){return s.match(bK)?s.replace(bK,e=>qX(e)):s}class se{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new se(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return se.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return se.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return se.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,n=t.lineNumber|0;if(i===n){const o=e.column|0,r=t.column|0;return o-r}return i-n}clone(){return new se(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new se(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}}class M{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return M.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return M.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return M.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return M.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return M.plusRange(this,e)}static plusRange(e,t){let i,n,o,r;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,r=e.endColumn),new M(i,n,o,r)}intersectRanges(e){return M.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,o=e.endLineNumber,r=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return i<a?(i=a,n=l):i===a&&(n=Math.max(n,l)),o>c?(o=c,r=d):o===c&&(r=Math.min(r,d)),i>o||i===o&&n>r?null:new M(i,n,o,r)}equalsRange(e){return M.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return M.getEndPosition(this)}static getEndPosition(e){return new se(e.endLineNumber,e.endColumn)}getStartPosition(){return M.getStartPosition(this)}static getStartPosition(e){return new se(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new M(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new M(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return M.collapseToStart(this)}static collapseToStart(e){return new M(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new M(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new M(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const o=e.startLineNumber|0,r=t.startLineNumber|0;if(o===r){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){const f=e.endColumn|0,g=t.endColumn|0;return f-g}return c-d}return a-l}return o-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}}class et extends M{constructor(e,t,i,n){super(e,t,i,n),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return et.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new et(this.startLineNumber,this.startColumn,e,t):new et(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new se(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new se(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new et(e,t,this.endLineNumber,this.endColumn):new et(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new et(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new et(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new et(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new et(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,n,o){return o===0?new et(e,t,i,n):new et(i,n,e,t)}}function B1e(s){return s?s.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}class w{constructor(e,t,i){this.id=e,this.definition=t,this.description=i,w._allCodicons.push(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}static getAll(){return w._allCodicons}}w._allCodicons=[];w.add=new w("add",{fontCharacter:"\\ea60"});w.plus=new w("plus",w.add.definition);w.gistNew=new w("gist-new",w.add.definition);w.repoCreate=new w("repo-create",w.add.definition);w.lightbulb=new w("lightbulb",{fontCharacter:"\\ea61"});w.lightBulb=new w("light-bulb",{fontCharacter:"\\ea61"});w.repo=new w("repo",{fontCharacter:"\\ea62"});w.repoDelete=new w("repo-delete",{fontCharacter:"\\ea62"});w.gistFork=new w("gist-fork",{fontCharacter:"\\ea63"});w.repoForked=new w("repo-forked",{fontCharacter:"\\ea63"});w.gitPullRequest=new w("git-pull-request",{fontCharacter:"\\ea64"});w.gitPullRequestAbandoned=new w("git-pull-request-abandoned",{fontCharacter:"\\ea64"});w.recordKeys=new w("record-keys",{fontCharacter:"\\ea65"});w.keyboard=new w("keyboard",{fontCharacter:"\\ea65"});w.tag=new w("tag",{fontCharacter:"\\ea66"});w.tagAdd=new w("tag-add",{fontCharacter:"\\ea66"});w.tagRemove=new w("tag-remove",{fontCharacter:"\\ea66"});w.person=new w("person",{fontCharacter:"\\ea67"});w.personFollow=new w("person-follow",{fontCharacter:"\\ea67"});w.personOutline=new w("person-outline",{fontCharacter:"\\ea67"});w.personFilled=new w("person-filled",{fontCharacter:"\\ea67"});w.gitBranch=new w("git-branch",{fontCharacter:"\\ea68"});w.gitBranchCreate=new w("git-branch-create",{fontCharacter:"\\ea68"});w.gitBranchDelete=new w("git-branch-delete",{fontCharacter:"\\ea68"});w.sourceControl=new w("source-control",{fontCharacter:"\\ea68"});w.mirror=new w("mirror",{fontCharacter:"\\ea69"});w.mirrorPublic=new w("mirror-public",{fontCharacter:"\\ea69"});w.star=new w("star",{fontCharacter:"\\ea6a"});w.starAdd=new w("star-add",{fontCharacter:"\\ea6a"});w.starDelete=new w("star-delete",{fontCharacter:"\\ea6a"});w.starEmpty=new w("star-empty",{fontCharacter:"\\ea6a"});w.comment=new w("comment",{fontCharacter:"\\ea6b"});w.commentAdd=new w("comment-add",{fontCharacter:"\\ea6b"});w.alert=new w("alert",{fontCharacter:"\\ea6c"});w.warning=new w("warning",{fontCharacter:"\\ea6c"});w.search=new w("search",{fontCharacter:"\\ea6d"});w.searchSave=new w("search-save",{fontCharacter:"\\ea6d"});w.logOut=new w("log-out",{fontCharacter:"\\ea6e"});w.signOut=new w("sign-out",{fontCharacter:"\\ea6e"});w.logIn=new w("log-in",{fontCharacter:"\\ea6f"});w.signIn=new w("sign-in",{fontCharacter:"\\ea6f"});w.eye=new w("eye",{fontCharacter:"\\ea70"});w.eyeUnwatch=new w("eye-unwatch",{fontCharacter:"\\ea70"});w.eyeWatch=new w("eye-watch",{fontCharacter:"\\ea70"});w.circleFilled=new w("circle-filled",{fontCharacter:"\\ea71"});w.primitiveDot=new w("primitive-dot",{fontCharacter:"\\ea71"});w.closeDirty=new w("close-dirty",{fontCharacter:"\\ea71"});w.debugBreakpoint=new w("debug-breakpoint",{fontCharacter:"\\ea71"});w.debugBreakpointDisabled=new w("debug-breakpoint-disabled",{fontCharacter:"\\ea71"});w.debugHint=new w("debug-hint",{fontCharacter:"\\ea71"});w.primitiveSquare=new w("primitive-square",{fontCharacter:"\\ea72"});w.edit=new w("edit",{fontCharacter:"\\ea73"});w.pencil=new w("pencil",{fontCharacter:"\\ea73"});w.info=new w("info",{fontCharacter:"\\ea74"});w.issueOpened=new w("issue-opened",{fontCharacter:"\\ea74"});w.gistPrivate=new w("gist-private",{fontCharacter:"\\ea75"});w.gitForkPrivate=new w("git-fork-private",{fontCharacter:"\\ea75"});w.lock=new w("lock",{fontCharacter:"\\ea75"});w.mirrorPrivate=new w("mirror-private",{fontCharacter:"\\ea75"});w.close=new w("close",{fontCharacter:"\\ea76"});w.removeClose=new w("remove-close",{fontCharacter:"\\ea76"});w.x=new w("x",{fontCharacter:"\\ea76"});w.repoSync=new w("repo-sync",{fontCharacter:"\\ea77"});w.sync=new w("sync",{fontCharacter:"\\ea77"});w.clone=new w("clone",{fontCharacter:"\\ea78"});w.desktopDownload=new w("desktop-download",{fontCharacter:"\\ea78"});w.beaker=new w("beaker",{fontCharacter:"\\ea79"});w.microscope=new w("microscope",{fontCharacter:"\\ea79"});w.vm=new w("vm",{fontCharacter:"\\ea7a"});w.deviceDesktop=new w("device-desktop",{fontCharacter:"\\ea7a"});w.file=new w("file",{fontCharacter:"\\ea7b"});w.fileText=new w("file-text",{fontCharacter:"\\ea7b"});w.more=new w("more",{fontCharacter:"\\ea7c"});w.ellipsis=new w("ellipsis",{fontCharacter:"\\ea7c"});w.kebabHorizontal=new w("kebab-horizontal",{fontCharacter:"\\ea7c"});w.mailReply=new w("mail-reply",{fontCharacter:"\\ea7d"});w.reply=new w("reply",{fontCharacter:"\\ea7d"});w.organization=new w("organization",{fontCharacter:"\\ea7e"});w.organizationFilled=new w("organization-filled",{fontCharacter:"\\ea7e"});w.organizationOutline=new w("organization-outline",{fontCharacter:"\\ea7e"});w.newFile=new w("new-file",{fontCharacter:"\\ea7f"});w.fileAdd=new w("file-add",{fontCharacter:"\\ea7f"});w.newFolder=new w("new-folder",{fontCharacter:"\\ea80"});w.fileDirectoryCreate=new w("file-directory-create",{fontCharacter:"\\ea80"});w.trash=new w("trash",{fontCharacter:"\\ea81"});w.trashcan=new w("trashcan",{fontCharacter:"\\ea81"});w.history=new w("history",{fontCharacter:"\\ea82"});w.clock=new w("clock",{fontCharacter:"\\ea82"});w.folder=new w("folder",{fontCharacter:"\\ea83"});w.fileDirectory=new w("file-directory",{fontCharacter:"\\ea83"});w.symbolFolder=new w("symbol-folder",{fontCharacter:"\\ea83"});w.logoGithub=new w("logo-github",{fontCharacter:"\\ea84"});w.markGithub=new w("mark-github",{fontCharacter:"\\ea84"});w.github=new w("github",{fontCharacter:"\\ea84"});w.terminal=new w("terminal",{fontCharacter:"\\ea85"});w.console=new w("console",{fontCharacter:"\\ea85"});w.repl=new w("repl",{fontCharacter:"\\ea85"});w.zap=new w("zap",{fontCharacter:"\\ea86"});w.symbolEvent=new w("symbol-event",{fontCharacter:"\\ea86"});w.error=new w("error",{fontCharacter:"\\ea87"});w.stop=new w("stop",{fontCharacter:"\\ea87"});w.variable=new w("variable",{fontCharacter:"\\ea88"});w.symbolVariable=new w("symbol-variable",{fontCharacter:"\\ea88"});w.array=new w("array",{fontCharacter:"\\ea8a"});w.symbolArray=new w("symbol-array",{fontCharacter:"\\ea8a"});w.symbolModule=new w("symbol-module",{fontCharacter:"\\ea8b"});w.symbolPackage=new w("symbol-package",{fontCharacter:"\\ea8b"});w.symbolNamespace=new w("symbol-namespace",{fontCharacter:"\\ea8b"});w.symbolObject=new w("symbol-object",{fontCharacter:"\\ea8b"});w.symbolMethod=new w("symbol-method",{fontCharacter:"\\ea8c"});w.symbolFunction=new w("symbol-function",{fontCharacter:"\\ea8c"});w.symbolConstructor=new w("symbol-constructor",{fontCharacter:"\\ea8c"});w.symbolBoolean=new w("symbol-boolean",{fontCharacter:"\\ea8f"});w.symbolNull=new w("symbol-null",{fontCharacter:"\\ea8f"});w.symbolNumeric=new w("symbol-numeric",{fontCharacter:"\\ea90"});w.symbolNumber=new w("symbol-number",{fontCharacter:"\\ea90"});w.symbolStructure=new w("symbol-structure",{fontCharacter:"\\ea91"});w.symbolStruct=new w("symbol-struct",{fontCharacter:"\\ea91"});w.symbolParameter=new w("symbol-parameter",{fontCharacter:"\\ea92"});w.symbolTypeParameter=new w("symbol-type-parameter",{fontCharacter:"\\ea92"});w.symbolKey=new w("symbol-key",{fontCharacter:"\\ea93"});w.symbolText=new w("symbol-text",{fontCharacter:"\\ea93"});w.symbolReference=new w("symbol-reference",{fontCharacter:"\\ea94"});w.goToFile=new w("go-to-file",{fontCharacter:"\\ea94"});w.symbolEnum=new w("symbol-enum",{fontCharacter:"\\ea95"});w.symbolValue=new w("symbol-value",{fontCharacter:"\\ea95"});w.symbolRuler=new w("symbol-ruler",{fontCharacter:"\\ea96"});w.symbolUnit=new w("symbol-unit",{fontCharacter:"\\ea96"});w.activateBreakpoints=new w("activate-breakpoints",{fontCharacter:"\\ea97"});w.archive=new w("archive",{fontCharacter:"\\ea98"});w.arrowBoth=new w("arrow-both",{fontCharacter:"\\ea99"});w.arrowDown=new w("arrow-down",{fontCharacter:"\\ea9a"});w.arrowLeft=new w("arrow-left",{fontCharacter:"\\ea9b"});w.arrowRight=new w("arrow-right",{fontCharacter:"\\ea9c"});w.arrowSmallDown=new w("arrow-small-down",{fontCharacter:"\\ea9d"});w.arrowSmallLeft=new w("arrow-small-left",{fontCharacter:"\\ea9e"});w.arrowSmallRight=new w("arrow-small-right",{fontCharacter:"\\ea9f"});w.arrowSmallUp=new w("arrow-small-up",{fontCharacter:"\\eaa0"});w.arrowUp=new w("arrow-up",{fontCharacter:"\\eaa1"});w.bell=new w("bell",{fontCharacter:"\\eaa2"});w.bold=new w("bold",{fontCharacter:"\\eaa3"});w.book=new w("book",{fontCharacter:"\\eaa4"});w.bookmark=new w("bookmark",{fontCharacter:"\\eaa5"});w.debugBreakpointConditionalUnverified=new w("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"});w.debugBreakpointConditional=new w("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"});w.debugBreakpointConditionalDisabled=new w("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"});w.debugBreakpointDataUnverified=new w("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"});w.debugBreakpointData=new w("debug-breakpoint-data",{fontCharacter:"\\eaa9"});w.debugBreakpointDataDisabled=new w("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"});w.debugBreakpointLogUnverified=new w("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"});w.debugBreakpointLog=new w("debug-breakpoint-log",{fontCharacter:"\\eaab"});w.debugBreakpointLogDisabled=new w("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"});w.briefcase=new w("briefcase",{fontCharacter:"\\eaac"});w.broadcast=new w("broadcast",{fontCharacter:"\\eaad"});w.browser=new w("browser",{fontCharacter:"\\eaae"});w.bug=new w("bug",{fontCharacter:"\\eaaf"});w.calendar=new w("calendar",{fontCharacter:"\\eab0"});w.caseSensitive=new w("case-sensitive",{fontCharacter:"\\eab1"});w.check=new w("check",{fontCharacter:"\\eab2"});w.checklist=new w("checklist",{fontCharacter:"\\eab3"});w.chevronDown=new w("chevron-down",{fontCharacter:"\\eab4"});w.dropDownButton=new w("drop-down-button",w.chevronDown.definition);w.chevronLeft=new w("chevron-left",{fontCharacter:"\\eab5"});w.chevronRight=new w("chevron-right",{fontCharacter:"\\eab6"});w.chevronUp=new w("chevron-up",{fontCharacter:"\\eab7"});w.chromeClose=new w("chrome-close",{fontCharacter:"\\eab8"});w.chromeMaximize=new w("chrome-maximize",{fontCharacter:"\\eab9"});w.chromeMinimize=new w("chrome-minimize",{fontCharacter:"\\eaba"});w.chromeRestore=new w("chrome-restore",{fontCharacter:"\\eabb"});w.circleOutline=new w("circle-outline",{fontCharacter:"\\eabc"});w.debugBreakpointUnverified=new w("debug-breakpoint-unverified",{fontCharacter:"\\eabc"});w.circleSlash=new w("circle-slash",{fontCharacter:"\\eabd"});w.circuitBoard=new w("circuit-board",{fontCharacter:"\\eabe"});w.clearAll=new w("clear-all",{fontCharacter:"\\eabf"});w.clippy=new w("clippy",{fontCharacter:"\\eac0"});w.closeAll=new w("close-all",{fontCharacter:"\\eac1"});w.cloudDownload=new w("cloud-download",{fontCharacter:"\\eac2"});w.cloudUpload=new w("cloud-upload",{fontCharacter:"\\eac3"});w.code=new w("code",{fontCharacter:"\\eac4"});w.collapseAll=new w("collapse-all",{fontCharacter:"\\eac5"});w.colorMode=new w("color-mode",{fontCharacter:"\\eac6"});w.commentDiscussion=new w("comment-discussion",{fontCharacter:"\\eac7"});w.compareChanges=new w("compare-changes",{fontCharacter:"\\eafd"});w.creditCard=new w("credit-card",{fontCharacter:"\\eac9"});w.dash=new w("dash",{fontCharacter:"\\eacc"});w.dashboard=new w("dashboard",{fontCharacter:"\\eacd"});w.database=new w("database",{fontCharacter:"\\eace"});w.debugContinue=new w("debug-continue",{fontCharacter:"\\eacf"});w.debugDisconnect=new w("debug-disconnect",{fontCharacter:"\\ead0"});w.debugPause=new w("debug-pause",{fontCharacter:"\\ead1"});w.debugRestart=new w("debug-restart",{fontCharacter:"\\ead2"});w.debugStart=new w("debug-start",{fontCharacter:"\\ead3"});w.debugStepInto=new w("debug-step-into",{fontCharacter:"\\ead4"});w.debugStepOut=new w("debug-step-out",{fontCharacter:"\\ead5"});w.debugStepOver=new w("debug-step-over",{fontCharacter:"\\ead6"});w.debugStop=new w("debug-stop",{fontCharacter:"\\ead7"});w.debug=new w("debug",{fontCharacter:"\\ead8"});w.deviceCameraVideo=new w("device-camera-video",{fontCharacter:"\\ead9"});w.deviceCamera=new w("device-camera",{fontCharacter:"\\eada"});w.deviceMobile=new w("device-mobile",{fontCharacter:"\\eadb"});w.diffAdded=new w("diff-added",{fontCharacter:"\\eadc"});w.diffIgnored=new w("diff-ignored",{fontCharacter:"\\eadd"});w.diffModified=new w("diff-modified",{fontCharacter:"\\eade"});w.diffRemoved=new w("diff-removed",{fontCharacter:"\\eadf"});w.diffRenamed=new w("diff-renamed",{fontCharacter:"\\eae0"});w.diff=new w("diff",{fontCharacter:"\\eae1"});w.discard=new w("discard",{fontCharacter:"\\eae2"});w.editorLayout=new w("editor-layout",{fontCharacter:"\\eae3"});w.emptyWindow=new w("empty-window",{fontCharacter:"\\eae4"});w.exclude=new w("exclude",{fontCharacter:"\\eae5"});w.extensions=new w("extensions",{fontCharacter:"\\eae6"});w.eyeClosed=new w("eye-closed",{fontCharacter:"\\eae7"});w.fileBinary=new w("file-binary",{fontCharacter:"\\eae8"});w.fileCode=new w("file-code",{fontCharacter:"\\eae9"});w.fileMedia=new w("file-media",{fontCharacter:"\\eaea"});w.filePdf=new w("file-pdf",{fontCharacter:"\\eaeb"});w.fileSubmodule=new w("file-submodule",{fontCharacter:"\\eaec"});w.fileSymlinkDirectory=new w("file-symlink-directory",{fontCharacter:"\\eaed"});w.fileSymlinkFile=new w("file-symlink-file",{fontCharacter:"\\eaee"});w.fileZip=new w("file-zip",{fontCharacter:"\\eaef"});w.files=new w("files",{fontCharacter:"\\eaf0"});w.filter=new w("filter",{fontCharacter:"\\eaf1"});w.flame=new w("flame",{fontCharacter:"\\eaf2"});w.foldDown=new w("fold-down",{fontCharacter:"\\eaf3"});w.foldUp=new w("fold-up",{fontCharacter:"\\eaf4"});w.fold=new w("fold",{fontCharacter:"\\eaf5"});w.folderActive=new w("folder-active",{fontCharacter:"\\eaf6"});w.folderOpened=new w("folder-opened",{fontCharacter:"\\eaf7"});w.gear=new w("gear",{fontCharacter:"\\eaf8"});w.gift=new w("gift",{fontCharacter:"\\eaf9"});w.gistSecret=new w("gist-secret",{fontCharacter:"\\eafa"});w.gist=new w("gist",{fontCharacter:"\\eafb"});w.gitCommit=new w("git-commit",{fontCharacter:"\\eafc"});w.gitCompare=new w("git-compare",{fontCharacter:"\\eafd"});w.gitMerge=new w("git-merge",{fontCharacter:"\\eafe"});w.githubAction=new w("github-action",{fontCharacter:"\\eaff"});w.githubAlt=new w("github-alt",{fontCharacter:"\\eb00"});w.globe=new w("globe",{fontCharacter:"\\eb01"});w.grabber=new w("grabber",{fontCharacter:"\\eb02"});w.graph=new w("graph",{fontCharacter:"\\eb03"});w.gripper=new w("gripper",{fontCharacter:"\\eb04"});w.heart=new w("heart",{fontCharacter:"\\eb05"});w.home=new w("home",{fontCharacter:"\\eb06"});w.horizontalRule=new w("horizontal-rule",{fontCharacter:"\\eb07"});w.hubot=new w("hubot",{fontCharacter:"\\eb08"});w.inbox=new w("inbox",{fontCharacter:"\\eb09"});w.issueClosed=new w("issue-closed",{fontCharacter:"\\eba4"});w.issueReopened=new w("issue-reopened",{fontCharacter:"\\eb0b"});w.issues=new w("issues",{fontCharacter:"\\eb0c"});w.italic=new w("italic",{fontCharacter:"\\eb0d"});w.jersey=new w("jersey",{fontCharacter:"\\eb0e"});w.json=new w("json",{fontCharacter:"\\eb0f"});w.kebabVertical=new w("kebab-vertical",{fontCharacter:"\\eb10"});w.key=new w("key",{fontCharacter:"\\eb11"});w.law=new w("law",{fontCharacter:"\\eb12"});w.lightbulbAutofix=new w("lightbulb-autofix",{fontCharacter:"\\eb13"});w.linkExternal=new w("link-external",{fontCharacter:"\\eb14"});w.link=new w("link",{fontCharacter:"\\eb15"});w.listOrdered=new w("list-ordered",{fontCharacter:"\\eb16"});w.listUnordered=new w("list-unordered",{fontCharacter:"\\eb17"});w.liveShare=new w("live-share",{fontCharacter:"\\eb18"});w.loading=new w("loading",{fontCharacter:"\\eb19"});w.location=new w("location",{fontCharacter:"\\eb1a"});w.mailRead=new w("mail-read",{fontCharacter:"\\eb1b"});w.mail=new w("mail",{fontCharacter:"\\eb1c"});w.markdown=new w("markdown",{fontCharacter:"\\eb1d"});w.megaphone=new w("megaphone",{fontCharacter:"\\eb1e"});w.mention=new w("mention",{fontCharacter:"\\eb1f"});w.milestone=new w("milestone",{fontCharacter:"\\eb20"});w.mortarBoard=new w("mortar-board",{fontCharacter:"\\eb21"});w.move=new w("move",{fontCharacter:"\\eb22"});w.multipleWindows=new w("multiple-windows",{fontCharacter:"\\eb23"});w.mute=new w("mute",{fontCharacter:"\\eb24"});w.noNewline=new w("no-newline",{fontCharacter:"\\eb25"});w.note=new w("note",{fontCharacter:"\\eb26"});w.octoface=new w("octoface",{fontCharacter:"\\eb27"});w.openPreview=new w("open-preview",{fontCharacter:"\\eb28"});w.package_=new w("package",{fontCharacter:"\\eb29"});w.paintcan=new w("paintcan",{fontCharacter:"\\eb2a"});w.pin=new w("pin",{fontCharacter:"\\eb2b"});w.play=new w("play",{fontCharacter:"\\eb2c"});w.run=new w("run",{fontCharacter:"\\eb2c"});w.plug=new w("plug",{fontCharacter:"\\eb2d"});w.preserveCase=new w("preserve-case",{fontCharacter:"\\eb2e"});w.preview=new w("preview",{fontCharacter:"\\eb2f"});w.project=new w("project",{fontCharacter:"\\eb30"});w.pulse=new w("pulse",{fontCharacter:"\\eb31"});w.question=new w("question",{fontCharacter:"\\eb32"});w.quote=new w("quote",{fontCharacter:"\\eb33"});w.radioTower=new w("radio-tower",{fontCharacter:"\\eb34"});w.reactions=new w("reactions",{fontCharacter:"\\eb35"});w.references=new w("references",{fontCharacter:"\\eb36"});w.refresh=new w("refresh",{fontCharacter:"\\eb37"});w.regex=new w("regex",{fontCharacter:"\\eb38"});w.remoteExplorer=new w("remote-explorer",{fontCharacter:"\\eb39"});w.remote=new w("remote",{fontCharacter:"\\eb3a"});w.remove=new w("remove",{fontCharacter:"\\eb3b"});w.replaceAll=new w("replace-all",{fontCharacter:"\\eb3c"});w.replace=new w("replace",{fontCharacter:"\\eb3d"});w.repoClone=new w("repo-clone",{fontCharacter:"\\eb3e"});w.repoForcePush=new w("repo-force-push",{fontCharacter:"\\eb3f"});w.repoPull=new w("repo-pull",{fontCharacter:"\\eb40"});w.repoPush=new w("repo-push",{fontCharacter:"\\eb41"});w.report=new w("report",{fontCharacter:"\\eb42"});w.requestChanges=new w("request-changes",{fontCharacter:"\\eb43"});w.rocket=new w("rocket",{fontCharacter:"\\eb44"});w.rootFolderOpened=new w("root-folder-opened",{fontCharacter:"\\eb45"});w.rootFolder=new w("root-folder",{fontCharacter:"\\eb46"});w.rss=new w("rss",{fontCharacter:"\\eb47"});w.ruby=new w("ruby",{fontCharacter:"\\eb48"});w.saveAll=new w("save-all",{fontCharacter:"\\eb49"});w.saveAs=new w("save-as",{fontCharacter:"\\eb4a"});w.save=new w("save",{fontCharacter:"\\eb4b"});w.screenFull=new w("screen-full",{fontCharacter:"\\eb4c"});w.screenNormal=new w("screen-normal",{fontCharacter:"\\eb4d"});w.searchStop=new w("search-stop",{fontCharacter:"\\eb4e"});w.server=new w("server",{fontCharacter:"\\eb50"});w.settingsGear=new w("settings-gear",{fontCharacter:"\\eb51"});w.settings=new w("settings",{fontCharacter:"\\eb52"});w.shield=new w("shield",{fontCharacter:"\\eb53"});w.smiley=new w("smiley",{fontCharacter:"\\eb54"});w.sortPrecedence=new w("sort-precedence",{fontCharacter:"\\eb55"});w.splitHorizontal=new w("split-horizontal",{fontCharacter:"\\eb56"});w.splitVertical=new w("split-vertical",{fontCharacter:"\\eb57"});w.squirrel=new w("squirrel",{fontCharacter:"\\eb58"});w.starFull=new w("star-full",{fontCharacter:"\\eb59"});w.starHalf=new w("star-half",{fontCharacter:"\\eb5a"});w.symbolClass=new w("symbol-class",{fontCharacter:"\\eb5b"});w.symbolColor=new w("symbol-color",{fontCharacter:"\\eb5c"});w.symbolCustomColor=new w("symbol-customcolor",{fontCharacter:"\\eb5c"});w.symbolConstant=new w("symbol-constant",{fontCharacter:"\\eb5d"});w.symbolEnumMember=new w("symbol-enum-member",{fontCharacter:"\\eb5e"});w.symbolField=new w("symbol-field",{fontCharacter:"\\eb5f"});w.symbolFile=new w("symbol-file",{fontCharacter:"\\eb60"});w.symbolInterface=new w("symbol-interface",{fontCharacter:"\\eb61"});w.symbolKeyword=new w("symbol-keyword",{fontCharacter:"\\eb62"});w.symbolMisc=new w("symbol-misc",{fontCharacter:"\\eb63"});w.symbolOperator=new w("symbol-operator",{fontCharacter:"\\eb64"});w.symbolProperty=new w("symbol-property",{fontCharacter:"\\eb65"});w.wrench=new w("wrench",{fontCharacter:"\\eb65"});w.wrenchSubaction=new w("wrench-subaction",{fontCharacter:"\\eb65"});w.symbolSnippet=new w("symbol-snippet",{fontCharacter:"\\eb66"});w.tasklist=new w("tasklist",{fontCharacter:"\\eb67"});w.telescope=new w("telescope",{fontCharacter:"\\eb68"});w.textSize=new w("text-size",{fontCharacter:"\\eb69"});w.threeBars=new w("three-bars",{fontCharacter:"\\eb6a"});w.thumbsdown=new w("thumbsdown",{fontCharacter:"\\eb6b"});w.thumbsup=new w("thumbsup",{fontCharacter:"\\eb6c"});w.tools=new w("tools",{fontCharacter:"\\eb6d"});w.triangleDown=new w("triangle-down",{fontCharacter:"\\eb6e"});w.triangleLeft=new w("triangle-left",{fontCharacter:"\\eb6f"});w.triangleRight=new w("triangle-right",{fontCharacter:"\\eb70"});w.triangleUp=new w("triangle-up",{fontCharacter:"\\eb71"});w.twitter=new w("twitter",{fontCharacter:"\\eb72"});w.unfold=new w("unfold",{fontCharacter:"\\eb73"});w.unlock=new w("unlock",{fontCharacter:"\\eb74"});w.unmute=new w("unmute",{fontCharacter:"\\eb75"});w.unverified=new w("unverified",{fontCharacter:"\\eb76"});w.verified=new w("verified",{fontCharacter:"\\eb77"});w.versions=new w("versions",{fontCharacter:"\\eb78"});w.vmActive=new w("vm-active",{fontCharacter:"\\eb79"});w.vmOutline=new w("vm-outline",{fontCharacter:"\\eb7a"});w.vmRunning=new w("vm-running",{fontCharacter:"\\eb7b"});w.watch=new w("watch",{fontCharacter:"\\eb7c"});w.whitespace=new w("whitespace",{fontCharacter:"\\eb7d"});w.wholeWord=new w("whole-word",{fontCharacter:"\\eb7e"});w.window=new w("window",{fontCharacter:"\\eb7f"});w.wordWrap=new w("word-wrap",{fontCharacter:"\\eb80"});w.zoomIn=new w("zoom-in",{fontCharacter:"\\eb81"});w.zoomOut=new w("zoom-out",{fontCharacter:"\\eb82"});w.listFilter=new w("list-filter",{fontCharacter:"\\eb83"});w.listFlat=new w("list-flat",{fontCharacter:"\\eb84"});w.listSelection=new w("list-selection",{fontCharacter:"\\eb85"});w.selection=new w("selection",{fontCharacter:"\\eb85"});w.listTree=new w("list-tree",{fontCharacter:"\\eb86"});w.debugBreakpointFunctionUnverified=new w("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"});w.debugBreakpointFunction=new w("debug-breakpoint-function",{fontCharacter:"\\eb88"});w.debugBreakpointFunctionDisabled=new w("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"});w.debugStackframeActive=new w("debug-stackframe-active",{fontCharacter:"\\eb89"});w.circleSmallFilled=new w("circle-small-filled",{fontCharacter:"\\eb8a"});w.debugStackframeDot=new w("debug-stackframe-dot",w.circleSmallFilled.definition);w.debugStackframe=new w("debug-stackframe",{fontCharacter:"\\eb8b"});w.debugStackframeFocused=new w("debug-stackframe-focused",{fontCharacter:"\\eb8b"});w.debugBreakpointUnsupported=new w("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"});w.symbolString=new w("symbol-string",{fontCharacter:"\\eb8d"});w.debugReverseContinue=new w("debug-reverse-continue",{fontCharacter:"\\eb8e"});w.debugStepBack=new w("debug-step-back",{fontCharacter:"\\eb8f"});w.debugRestartFrame=new w("debug-restart-frame",{fontCharacter:"\\eb90"});w.callIncoming=new w("call-incoming",{fontCharacter:"\\eb92"});w.callOutgoing=new w("call-outgoing",{fontCharacter:"\\eb93"});w.menu=new w("menu",{fontCharacter:"\\eb94"});w.expandAll=new w("expand-all",{fontCharacter:"\\eb95"});w.feedback=new w("feedback",{fontCharacter:"\\eb96"});w.groupByRefType=new w("group-by-ref-type",{fontCharacter:"\\eb97"});w.ungroupByRefType=new w("ungroup-by-ref-type",{fontCharacter:"\\eb98"});w.account=new w("account",{fontCharacter:"\\eb99"});w.bellDot=new w("bell-dot",{fontCharacter:"\\eb9a"});w.debugConsole=new w("debug-console",{fontCharacter:"\\eb9b"});w.library=new w("library",{fontCharacter:"\\eb9c"});w.output=new w("output",{fontCharacter:"\\eb9d"});w.runAll=new w("run-all",{fontCharacter:"\\eb9e"});w.syncIgnored=new w("sync-ignored",{fontCharacter:"\\eb9f"});w.pinned=new w("pinned",{fontCharacter:"\\eba0"});w.githubInverted=new w("github-inverted",{fontCharacter:"\\eba1"});w.debugAlt=new w("debug-alt",{fontCharacter:"\\eb91"});w.serverProcess=new w("server-process",{fontCharacter:"\\eba2"});w.serverEnvironment=new w("server-environment",{fontCharacter:"\\eba3"});w.pass=new w("pass",{fontCharacter:"\\eba4"});w.stopCircle=new w("stop-circle",{fontCharacter:"\\eba5"});w.playCircle=new w("play-circle",{fontCharacter:"\\eba6"});w.record=new w("record",{fontCharacter:"\\eba7"});w.debugAltSmall=new w("debug-alt-small",{fontCharacter:"\\eba8"});w.vmConnect=new w("vm-connect",{fontCharacter:"\\eba9"});w.cloud=new w("cloud",{fontCharacter:"\\ebaa"});w.merge=new w("merge",{fontCharacter:"\\ebab"});w.exportIcon=new w("export",{fontCharacter:"\\ebac"});w.graphLeft=new w("graph-left",{fontCharacter:"\\ebad"});w.magnet=new w("magnet",{fontCharacter:"\\ebae"});w.notebook=new w("notebook",{fontCharacter:"\\ebaf"});w.redo=new w("redo",{fontCharacter:"\\ebb0"});w.checkAll=new w("check-all",{fontCharacter:"\\ebb1"});w.pinnedDirty=new w("pinned-dirty",{fontCharacter:"\\ebb2"});w.passFilled=new w("pass-filled",{fontCharacter:"\\ebb3"});w.circleLargeFilled=new w("circle-large-filled",{fontCharacter:"\\ebb4"});w.circleLargeOutline=new w("circle-large-outline",{fontCharacter:"\\ebb5"});w.combine=new w("combine",{fontCharacter:"\\ebb6"});w.gather=new w("gather",{fontCharacter:"\\ebb6"});w.table=new w("table",{fontCharacter:"\\ebb7"});w.variableGroup=new w("variable-group",{fontCharacter:"\\ebb8"});w.typeHierarchy=new w("type-hierarchy",{fontCharacter:"\\ebb9"});w.typeHierarchySub=new w("type-hierarchy-sub",{fontCharacter:"\\ebba"});w.typeHierarchySuper=new w("type-hierarchy-super",{fontCharacter:"\\ebbb"});w.gitPullRequestCreate=new w("git-pull-request-create",{fontCharacter:"\\ebbc"});w.runAbove=new w("run-above",{fontCharacter:"\\ebbd"});w.runBelow=new w("run-below",{fontCharacter:"\\ebbe"});w.notebookTemplate=new w("notebook-template",{fontCharacter:"\\ebbf"});w.debugRerun=new w("debug-rerun",{fontCharacter:"\\ebc0"});w.workspaceTrusted=new w("workspace-trusted",{fontCharacter:"\\ebc1"});w.workspaceUntrusted=new w("workspace-untrusted",{fontCharacter:"\\ebc2"});w.workspaceUnspecified=new w("workspace-unspecified",{fontCharacter:"\\ebc3"});w.terminalCmd=new w("terminal-cmd",{fontCharacter:"\\ebc4"});w.terminalDebian=new w("terminal-debian",{fontCharacter:"\\ebc5"});w.terminalLinux=new w("terminal-linux",{fontCharacter:"\\ebc6"});w.terminalPowershell=new w("terminal-powershell",{fontCharacter:"\\ebc7"});w.terminalTmux=new w("terminal-tmux",{fontCharacter:"\\ebc8"});w.terminalUbuntu=new w("terminal-ubuntu",{fontCharacter:"\\ebc9"});w.terminalBash=new w("terminal-bash",{fontCharacter:"\\ebca"});w.arrowSwap=new w("arrow-swap",{fontCharacter:"\\ebcb"});w.copy=new w("copy",{fontCharacter:"\\ebcc"});w.personAdd=new w("person-add",{fontCharacter:"\\ebcd"});w.filterFilled=new w("filter-filled",{fontCharacter:"\\ebce"});w.wand=new w("wand",{fontCharacter:"\\ebcf"});w.debugLineByLine=new w("debug-line-by-line",{fontCharacter:"\\ebd0"});w.inspect=new w("inspect",{fontCharacter:"\\ebd1"});w.layers=new w("layers",{fontCharacter:"\\ebd2"});w.layersDot=new w("layers-dot",{fontCharacter:"\\ebd3"});w.layersActive=new w("layers-active",{fontCharacter:"\\ebd4"});w.compass=new w("compass",{fontCharacter:"\\ebd5"});w.compassDot=new w("compass-dot",{fontCharacter:"\\ebd6"});w.compassActive=new w("compass-active",{fontCharacter:"\\ebd7"});w.azure=new w("azure",{fontCharacter:"\\ebd8"});w.issueDraft=new w("issue-draft",{fontCharacter:"\\ebd9"});w.gitPullRequestClosed=new w("git-pull-request-closed",{fontCharacter:"\\ebda"});w.gitPullRequestDraft=new w("git-pull-request-draft",{fontCharacter:"\\ebdb"});w.debugAll=new w("debug-all",{fontCharacter:"\\ebdc"});w.debugCoverage=new w("debug-coverage",{fontCharacter:"\\ebdd"});w.runErrors=new w("run-errors",{fontCharacter:"\\ebde"});w.folderLibrary=new w("folder-library",{fontCharacter:"\\ebdf"});w.debugContinueSmall=new w("debug-continue-small",{fontCharacter:"\\ebe0"});w.beakerStop=new w("beaker-stop",{fontCharacter:"\\ebe1"});w.graphLine=new w("graph-line",{fontCharacter:"\\ebe2"});w.graphScatter=new w("graph-scatter",{fontCharacter:"\\ebe3"});w.pieChart=new w("pie-chart",{fontCharacter:"\\ebe4"});w.bracket=new w("bracket",w.json.definition);w.bracketDot=new w("bracket-dot",{fontCharacter:"\\ebe5"});w.bracketError=new w("bracket-error",{fontCharacter:"\\ebe6"});w.lockSmall=new w("lock-small",{fontCharacter:"\\ebe7"});w.azureDevops=new w("azure-devops",{fontCharacter:"\\ebe8"});w.verifiedFilled=new w("verified-filled",{fontCharacter:"\\ebe9"});w.newLine=new w("newline",{fontCharacter:"\\ebea"});w.layout=new w("layout",{fontCharacter:"\\ebeb"});w.layoutActivitybarLeft=new w("layout-activitybar-left",{fontCharacter:"\\ebec"});w.layoutActivitybarRight=new w("layout-activitybar-right",{fontCharacter:"\\ebed"});w.layoutPanelLeft=new w("layout-panel-left",{fontCharacter:"\\ebee"});w.layoutPanelCenter=new w("layout-panel-center",{fontCharacter:"\\ebef"});w.layoutPanelJustify=new w("layout-panel-justify",{fontCharacter:"\\ebf0"});w.layoutPanelRight=new w("layout-panel-right",{fontCharacter:"\\ebf1"});w.layoutPanel=new w("layout-panel",{fontCharacter:"\\ebf2"});w.layoutSidebarLeft=new w("layout-sidebar-left",{fontCharacter:"\\ebf3"});w.layoutSidebarRight=new w("layout-sidebar-right",{fontCharacter:"\\ebf4"});w.layoutStatusbar=new w("layout-statusbar",{fontCharacter:"\\ebf5"});w.layoutMenubar=new w("layout-menubar",{fontCharacter:"\\ebf6"});w.layoutCentered=new w("layout-centered",{fontCharacter:"\\ebf7"});w.layoutSidebarRightOff=new w("layout-sidebar-right-off",{fontCharacter:"\\ec00"});w.layoutPanelOff=new w("layout-panel-off",{fontCharacter:"\\ec01"});w.layoutSidebarLeftOff=new w("layout-sidebar-left-off",{fontCharacter:"\\ec02"});w.target=new w("target",{fontCharacter:"\\ebf8"});w.indent=new w("indent",{fontCharacter:"\\ebf9"});w.recordSmall=new w("record-small",{fontCharacter:"\\ebfa"});w.errorSmall=new w("error-small",{fontCharacter:"\\ebfb"});w.arrowCircleDown=new w("arrow-circle-down",{fontCharacter:"\\ebfc"});w.arrowCircleLeft=new w("arrow-circle-left",{fontCharacter:"\\ebfd"});w.arrowCircleRight=new w("arrow-circle-right",{fontCharacter:"\\ebfe"});w.arrowCircleUp=new w("arrow-circle-up",{fontCharacter:"\\ebff"});w.heartFilled=new w("heart-filled",{fontCharacter:"\\ec04"});w.map=new w("map",{fontCharacter:"\\ec05"});w.mapFilled=new w("map-filled",{fontCharacter:"\\ec06"});w.circleSmall=new w("circle-small",{fontCharacter:"\\ec07"});w.bellSlash=new w("bell-slash",{fontCharacter:"\\ec08"});w.bellSlashDot=new w("bell-slash-dot",{fontCharacter:"\\ec09"});w.commentUnresolved=new w("comment-unresolved",{fontCharacter:"\\ec0a"});w.gitPullRequestGoToChanges=new w("git-pull-request-go-to-changes",{fontCharacter:"\\ec0b"});w.gitPullRequestNewChanges=new w("git-pull-request-new-changes",{fontCharacter:"\\ec0c"});w.dialogError=new w("dialog-error",w.error.definition);w.dialogWarning=new w("dialog-warning",w.warning.definition);w.dialogInfo=new w("dialog-info",w.info.definition);w.dialogClose=new w("dialog-close",w.close.definition);w.treeItemExpanded=new w("tree-item-expanded",w.chevronDown.definition);w.treeFilterOnTypeOn=new w("tree-filter-on-type-on",w.listFilter.definition);w.treeFilterOnTypeOff=new w("tree-filter-on-type-off",w.listSelection.definition);w.treeFilterClear=new w("tree-filter-clear",w.close.definition);w.treeItemLoading=new w("tree-item-loading",w.loading.definition);w.menuSelection=new w("menu-selection",w.check.definition);w.menuSubmenu=new w("menu-submenu",w.chevronRight.definition);w.menuBarMore=new w("menubar-more",w.more.definition);w.scrollbarButtonLeft=new w("scrollbar-button-left",w.triangleLeft.definition);w.scrollbarButtonRight=new w("scrollbar-button-right",w.triangleRight.definition);w.scrollbarButtonUp=new w("scrollbar-button-up",w.triangleUp.definition);w.scrollbarButtonDown=new w("scrollbar-button-down",w.triangleDown.definition);w.toolBarMore=new w("toolbar-more",w.more.definition);w.quickInputBack=new w("quick-input-back",w.arrowLeft.definition);var yr;(function(s){s.iconNameSegment="[A-Za-z0-9]+",s.iconNameExpression="[A-Za-z0-9-]+",s.iconModifierExpression="~[A-Za-z]+",s.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${s.iconNameExpression})(${s.iconModifierExpression})?$`);function t(o){if(o instanceof w)return["codicon","codicon-"+o.id];const r=e.exec(o.id);if(!r)return t(w.error);const[,a,l]=r,c=["codicon","codicon-"+a];return l&&c.push("codicon-modifier-"+l.substr(1)),c}s.asClassNameArray=t;function i(o){return t(o).join(" ")}s.asClassName=i;function n(o){return"."+t(o).join(".")}s.asCSSSelector=n})(yr||(yr={}));var y5=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class V1e{constructor(){this._map=new Map,this._factories=new Map,this._onDidChange=new J,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),ni(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerFactory(e,t){var i;(i=this._factories.get(e))===null||i===void 0||i.dispose();const n=new W1e(this,e,t);return this._factories.set(e,n),ni(()=>{const o=this._factories.get(e);!o||o!==n||(this._factories.delete(e),o.dispose())})}getOrCreate(e){return y5(this,void 0,void 0,function*(){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(yield i.resolve(),this.get(e))})}get(e){return this._map.get(e)||null}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class W1e extends ge{constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return y5(this,void 0,void 0,function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise})}_create(){return y5(this,void 0,void 0,function*(){const e=yield Promise.resolve(this._factory.createTokenizationSupport());this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))})}}class Ay{constructor(e,t,i){this._tokenBrand=void 0,this.offset=e,this.type=t,this.language=i}toString(){return"("+this.offset+", "+this.type+")"}}class X8{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}class _N{constructor(e,t){this._encodedTokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}var My;(function(s){const e=new Map;e.set(0,w.symbolMethod),e.set(1,w.symbolFunction),e.set(2,w.symbolConstructor),e.set(3,w.symbolField),e.set(4,w.symbolVariable),e.set(5,w.symbolClass),e.set(6,w.symbolStruct),e.set(7,w.symbolInterface),e.set(8,w.symbolModule),e.set(9,w.symbolProperty),e.set(10,w.symbolEvent),e.set(11,w.symbolOperator),e.set(12,w.symbolUnit),e.set(13,w.symbolValue),e.set(15,w.symbolEnum),e.set(14,w.symbolConstant),e.set(15,w.symbolEnum),e.set(16,w.symbolEnumMember),e.set(17,w.symbolKeyword),e.set(27,w.symbolSnippet),e.set(18,w.symbolText),e.set(19,w.symbolColor),e.set(20,w.symbolFile),e.set(21,w.symbolReference),e.set(22,w.symbolCustomColor),e.set(23,w.symbolFolder),e.set(24,w.symbolTypeParameter),e.set(25,w.account),e.set(26,w.issues);function t(o){let r=e.get(o);return r||(console.info("No codicon found for CompletionItemKind "+o),r=w.symbolProperty),r}s.toIcon=t;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function n(o,r){let a=i.get(o);return typeof a>"u"&&!r&&(a=9),a}s.fromString=n})(My||(My={}));var pl;(function(s){s[s.Automatic=0]="Automatic",s[s.Explicit=1]="Explicit"})(pl||(pl={}));var ud;(function(s){s[s.Invoke=1]="Invoke",s[s.TriggerCharacter=2]="TriggerCharacter",s[s.ContentChange=3]="ContentChange"})(ud||(ud={}));var Oy;(function(s){s[s.Text=0]="Text",s[s.Read=1]="Read",s[s.Write=2]="Write"})(Oy||(Oy={}));function H1e(s){return s&&yt.isUri(s.uri)&&M.isIRange(s.range)&&(M.isIRange(s.originSelectionRange)||M.isIRange(s.targetSelectionRange))}var S5;(function(s){const e=new Map;e.set(0,w.symbolFile),e.set(1,w.symbolModule),e.set(2,w.symbolNamespace),e.set(3,w.symbolPackage),e.set(4,w.symbolClass),e.set(5,w.symbolMethod),e.set(6,w.symbolProperty),e.set(7,w.symbolField),e.set(8,w.symbolConstructor),e.set(9,w.symbolEnum),e.set(10,w.symbolInterface),e.set(11,w.symbolFunction),e.set(12,w.symbolVariable),e.set(13,w.symbolConstant),e.set(14,w.symbolString),e.set(15,w.symbolNumber),e.set(16,w.symbolBoolean),e.set(17,w.symbolArray),e.set(18,w.symbolObject),e.set(19,w.symbolKey),e.set(20,w.symbolNull),e.set(21,w.symbolEnumMember),e.set(22,w.symbolStruct),e.set(23,w.symbolEvent),e.set(24,w.symbolOperator),e.set(25,w.symbolTypeParameter);function t(i){let n=e.get(i);return n||(console.info("No codicon found for SymbolKind "+i),n=w.symbolProperty),n}s.toIcon=t})(S5||(S5={}));class au{constructor(e){this.value=e}}au.Comment=new au("comment");au.Imports=new au("imports");au.Region=new au("region");var L5;(function(s){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}s.is=e})(L5||(L5={}));var xT;(function(s){s[s.Type=1]="Type",s[s.Parameter=2]="Parameter"})(xT||(xT={}));const Fn=new V1e;var x5;(function(s){s[s.Unknown=0]="Unknown",s[s.Disabled=1]="Disabled",s[s.Enabled=2]="Enabled"})(x5||(x5={}));var D5;(function(s){s[s.Invoke=1]="Invoke",s[s.Auto=2]="Auto"})(D5||(D5={}));var DT;(function(s){s[s.KeepWhitespace=1]="KeepWhitespace",s[s.InsertAsSnippet=4]="InsertAsSnippet"})(DT||(DT={}));var k5;(function(s){s[s.Method=0]="Method",s[s.Function=1]="Function",s[s.Constructor=2]="Constructor",s[s.Field=3]="Field",s[s.Variable=4]="Variable",s[s.Class=5]="Class",s[s.Struct=6]="Struct",s[s.Interface=7]="Interface",s[s.Module=8]="Module",s[s.Property=9]="Property",s[s.Event=10]="Event",s[s.Operator=11]="Operator",s[s.Unit=12]="Unit",s[s.Value=13]="Value",s[s.Constant=14]="Constant",s[s.Enum=15]="Enum",s[s.EnumMember=16]="EnumMember",s[s.Keyword=17]="Keyword",s[s.Text=18]="Text",s[s.Color=19]="Color",s[s.File=20]="File",s[s.Reference=21]="Reference",s[s.Customcolor=22]="Customcolor",s[s.Folder=23]="Folder",s[s.TypeParameter=24]="TypeParameter",s[s.User=25]="User",s[s.Issue=26]="Issue",s[s.Snippet=27]="Snippet"})(k5||(k5={}));var E5;(function(s){s[s.Deprecated=1]="Deprecated"})(E5||(E5={}));var T5;(function(s){s[s.Invoke=0]="Invoke",s[s.TriggerCharacter=1]="TriggerCharacter",s[s.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(T5||(T5={}));var I5;(function(s){s[s.EXACT=0]="EXACT",s[s.ABOVE=1]="ABOVE",s[s.BELOW=2]="BELOW"})(I5||(I5={}));var N5;(function(s){s[s.NotSet=0]="NotSet",s[s.ContentFlush=1]="ContentFlush",s[s.RecoverFromMarkers=2]="RecoverFromMarkers",s[s.Explicit=3]="Explicit",s[s.Paste=4]="Paste",s[s.Undo=5]="Undo",s[s.Redo=6]="Redo"})(N5||(N5={}));var R5;(function(s){s[s.LF=1]="LF",s[s.CRLF=2]="CRLF"})(R5||(R5={}));var A5;(function(s){s[s.Text=0]="Text",s[s.Read=1]="Read",s[s.Write=2]="Write"})(A5||(A5={}));var M5;(function(s){s[s.None=0]="None",s[s.Keep=1]="Keep",s[s.Brackets=2]="Brackets",s[s.Advanced=3]="Advanced",s[s.Full=4]="Full"})(M5||(M5={}));var O5;(function(s){s[s.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",s[s.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",s[s.accessibilitySupport=2]="accessibilitySupport",s[s.accessibilityPageSize=3]="accessibilityPageSize",s[s.ariaLabel=4]="ariaLabel",s[s.autoClosingBrackets=5]="autoClosingBrackets",s[s.autoClosingDelete=6]="autoClosingDelete",s[s.autoClosingOvertype=7]="autoClosingOvertype",s[s.autoClosingQuotes=8]="autoClosingQuotes",s[s.autoIndent=9]="autoIndent",s[s.automaticLayout=10]="automaticLayout",s[s.autoSurround=11]="autoSurround",s[s.bracketPairColorization=12]="bracketPairColorization",s[s.guides=13]="guides",s[s.codeLens=14]="codeLens",s[s.codeLensFontFamily=15]="codeLensFontFamily",s[s.codeLensFontSize=16]="codeLensFontSize",s[s.colorDecorators=17]="colorDecorators",s[s.columnSelection=18]="columnSelection",s[s.comments=19]="comments",s[s.contextmenu=20]="contextmenu",s[s.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",s[s.cursorBlinking=22]="cursorBlinking",s[s.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",s[s.cursorStyle=24]="cursorStyle",s[s.cursorSurroundingLines=25]="cursorSurroundingLines",s[s.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",s[s.cursorWidth=27]="cursorWidth",s[s.disableLayerHinting=28]="disableLayerHinting",s[s.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",s[s.domReadOnly=30]="domReadOnly",s[s.dragAndDrop=31]="dragAndDrop",s[s.dropIntoEditor=32]="dropIntoEditor",s[s.emptySelectionClipboard=33]="emptySelectionClipboard",s[s.experimental=34]="experimental",s[s.extraEditorClassName=35]="extraEditorClassName",s[s.fastScrollSensitivity=36]="fastScrollSensitivity",s[s.find=37]="find",s[s.fixedOverflowWidgets=38]="fixedOverflowWidgets",s[s.folding=39]="folding",s[s.foldingStrategy=40]="foldingStrategy",s[s.foldingHighlight=41]="foldingHighlight",s[s.foldingImportsByDefault=42]="foldingImportsByDefault",s[s.foldingMaximumRegions=43]="foldingMaximumRegions",s[s.unfoldOnClickAfterEndOfLine=44]="unfoldOnClickAfterEndOfLine",s[s.fontFamily=45]="fontFamily",s[s.fontInfo=46]="fontInfo",s[s.fontLigatures=47]="fontLigatures",s[s.fontSize=48]="fontSize",s[s.fontWeight=49]="fontWeight",s[s.formatOnPaste=50]="formatOnPaste",s[s.formatOnType=51]="formatOnType",s[s.glyphMargin=52]="glyphMargin",s[s.gotoLocation=53]="gotoLocation",s[s.hideCursorInOverviewRuler=54]="hideCursorInOverviewRuler",s[s.hover=55]="hover",s[s.inDiffEditor=56]="inDiffEditor",s[s.inlineSuggest=57]="inlineSuggest",s[s.letterSpacing=58]="letterSpacing",s[s.lightbulb=59]="lightbulb",s[s.lineDecorationsWidth=60]="lineDecorationsWidth",s[s.lineHeight=61]="lineHeight",s[s.lineNumbers=62]="lineNumbers",s[s.lineNumbersMinChars=63]="lineNumbersMinChars",s[s.linkedEditing=64]="linkedEditing",s[s.links=65]="links",s[s.matchBrackets=66]="matchBrackets",s[s.minimap=67]="minimap",s[s.mouseStyle=68]="mouseStyle",s[s.mouseWheelScrollSensitivity=69]="mouseWheelScrollSensitivity",s[s.mouseWheelZoom=70]="mouseWheelZoom",s[s.multiCursorMergeOverlapping=71]="multiCursorMergeOverlapping",s[s.multiCursorModifier=72]="multiCursorModifier",s[s.multiCursorPaste=73]="multiCursorPaste",s[s.occurrencesHighlight=74]="occurrencesHighlight",s[s.overviewRulerBorder=75]="overviewRulerBorder",s[s.overviewRulerLanes=76]="overviewRulerLanes",s[s.padding=77]="padding",s[s.parameterHints=78]="parameterHints",s[s.peekWidgetDefaultFocus=79]="peekWidgetDefaultFocus",s[s.definitionLinkOpensInPeek=80]="definitionLinkOpensInPeek",s[s.quickSuggestions=81]="quickSuggestions",s[s.quickSuggestionsDelay=82]="quickSuggestionsDelay",s[s.readOnly=83]="readOnly",s[s.renameOnType=84]="renameOnType",s[s.renderControlCharacters=85]="renderControlCharacters",s[s.renderFinalNewline=86]="renderFinalNewline",s[s.renderLineHighlight=87]="renderLineHighlight",s[s.renderLineHighlightOnlyWhenFocus=88]="renderLineHighlightOnlyWhenFocus",s[s.renderValidationDecorations=89]="renderValidationDecorations",s[s.renderWhitespace=90]="renderWhitespace",s[s.revealHorizontalRightPadding=91]="revealHorizontalRightPadding",s[s.roundedSelection=92]="roundedSelection",s[s.rulers=93]="rulers",s[s.scrollbar=94]="scrollbar",s[s.scrollBeyondLastColumn=95]="scrollBeyondLastColumn",s[s.scrollBeyondLastLine=96]="scrollBeyondLastLine",s[s.scrollPredominantAxis=97]="scrollPredominantAxis",s[s.selectionClipboard=98]="selectionClipboard",s[s.selectionHighlight=99]="selectionHighlight",s[s.selectOnLineNumbers=100]="selectOnLineNumbers",s[s.showFoldingControls=101]="showFoldingControls",s[s.showUnused=102]="showUnused",s[s.snippetSuggestions=103]="snippetSuggestions",s[s.smartSelect=104]="smartSelect",s[s.smoothScrolling=105]="smoothScrolling",s[s.stickyTabStops=106]="stickyTabStops",s[s.stopRenderingLineAfter=107]="stopRenderingLineAfter",s[s.suggest=108]="suggest",s[s.suggestFontSize=109]="suggestFontSize",s[s.suggestLineHeight=110]="suggestLineHeight",s[s.suggestOnTriggerCharacters=111]="suggestOnTriggerCharacters",s[s.suggestSelection=112]="suggestSelection",s[s.tabCompletion=113]="tabCompletion",s[s.tabIndex=114]="tabIndex",s[s.unicodeHighlighting=115]="unicodeHighlighting",s[s.unusualLineTerminators=116]="unusualLineTerminators",s[s.useShadowDOM=117]="useShadowDOM",s[s.useTabStops=118]="useTabStops",s[s.wordSeparators=119]="wordSeparators",s[s.wordWrap=120]="wordWrap",s[s.wordWrapBreakAfterCharacters=121]="wordWrapBreakAfterCharacters",s[s.wordWrapBreakBeforeCharacters=122]="wordWrapBreakBeforeCharacters",s[s.wordWrapColumn=123]="wordWrapColumn",s[s.wordWrapOverride1=124]="wordWrapOverride1",s[s.wordWrapOverride2=125]="wordWrapOverride2",s[s.wrappingIndent=126]="wrappingIndent",s[s.wrappingStrategy=127]="wrappingStrategy",s[s.showDeprecated=128]="showDeprecated",s[s.inlayHints=129]="inlayHints",s[s.editorClassName=130]="editorClassName",s[s.pixelRatio=131]="pixelRatio",s[s.tabFocusMode=132]="tabFocusMode",s[s.layoutInfo=133]="layoutInfo",s[s.wrappingInfo=134]="wrappingInfo"})(O5||(O5={}));var P5;(function(s){s[s.TextDefined=0]="TextDefined",s[s.LF=1]="LF",s[s.CRLF=2]="CRLF"})(P5||(P5={}));var F5;(function(s){s[s.LF=0]="LF",s[s.CRLF=1]="CRLF"})(F5||(F5={}));var B5;(function(s){s[s.None=0]="None",s[s.Indent=1]="Indent",s[s.IndentOutdent=2]="IndentOutdent",s[s.Outdent=3]="Outdent"})(B5||(B5={}));var V5;(function(s){s[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None"})(V5||(V5={}));var W5;(function(s){s[s.Type=1]="Type",s[s.Parameter=2]="Parameter"})(W5||(W5={}));var H5;(function(s){s[s.Automatic=0]="Automatic",s[s.Explicit=1]="Explicit"})(H5||(H5={}));var z5;(function(s){s[s.DependsOnKbLayout=-1]="DependsOnKbLayout",s[s.Unknown=0]="Unknown",s[s.Backspace=1]="Backspace",s[s.Tab=2]="Tab",s[s.Enter=3]="Enter",s[s.Shift=4]="Shift",s[s.Ctrl=5]="Ctrl",s[s.Alt=6]="Alt",s[s.PauseBreak=7]="PauseBreak",s[s.CapsLock=8]="CapsLock",s[s.Escape=9]="Escape",s[s.Space=10]="Space",s[s.PageUp=11]="PageUp",s[s.PageDown=12]="PageDown",s[s.End=13]="End",s[s.Home=14]="Home",s[s.LeftArrow=15]="LeftArrow",s[s.UpArrow=16]="UpArrow",s[s.RightArrow=17]="RightArrow",s[s.DownArrow=18]="DownArrow",s[s.Insert=19]="Insert",s[s.Delete=20]="Delete",s[s.Digit0=21]="Digit0",s[s.Digit1=22]="Digit1",s[s.Digit2=23]="Digit2",s[s.Digit3=24]="Digit3",s[s.Digit4=25]="Digit4",s[s.Digit5=26]="Digit5",s[s.Digit6=27]="Digit6",s[s.Digit7=28]="Digit7",s[s.Digit8=29]="Digit8",s[s.Digit9=30]="Digit9",s[s.KeyA=31]="KeyA",s[s.KeyB=32]="KeyB",s[s.KeyC=33]="KeyC",s[s.KeyD=34]="KeyD",s[s.KeyE=35]="KeyE",s[s.KeyF=36]="KeyF",s[s.KeyG=37]="KeyG",s[s.KeyH=38]="KeyH",s[s.KeyI=39]="KeyI",s[s.KeyJ=40]="KeyJ",s[s.KeyK=41]="KeyK",s[s.KeyL=42]="KeyL",s[s.KeyM=43]="KeyM",s[s.KeyN=44]="KeyN",s[s.KeyO=45]="KeyO",s[s.KeyP=46]="KeyP",s[s.KeyQ=47]="KeyQ",s[s.KeyR=48]="KeyR",s[s.KeyS=49]="KeyS",s[s.KeyT=50]="KeyT",s[s.KeyU=51]="KeyU",s[s.KeyV=52]="KeyV",s[s.KeyW=53]="KeyW",s[s.KeyX=54]="KeyX",s[s.KeyY=55]="KeyY",s[s.KeyZ=56]="KeyZ",s[s.Meta=57]="Meta",s[s.ContextMenu=58]="ContextMenu",s[s.F1=59]="F1",s[s.F2=60]="F2",s[s.F3=61]="F3",s[s.F4=62]="F4",s[s.F5=63]="F5",s[s.F6=64]="F6",s[s.F7=65]="F7",s[s.F8=66]="F8",s[s.F9=67]="F9",s[s.F10=68]="F10",s[s.F11=69]="F11",s[s.F12=70]="F12",s[s.F13=71]="F13",s[s.F14=72]="F14",s[s.F15=73]="F15",s[s.F16=74]="F16",s[s.F17=75]="F17",s[s.F18=76]="F18",s[s.F19=77]="F19",s[s.NumLock=78]="NumLock",s[s.ScrollLock=79]="ScrollLock",s[s.Semicolon=80]="Semicolon",s[s.Equal=81]="Equal",s[s.Comma=82]="Comma",s[s.Minus=83]="Minus",s[s.Period=84]="Period",s[s.Slash=85]="Slash",s[s.Backquote=86]="Backquote",s[s.BracketLeft=87]="BracketLeft",s[s.Backslash=88]="Backslash",s[s.BracketRight=89]="BracketRight",s[s.Quote=90]="Quote",s[s.OEM_8=91]="OEM_8",s[s.IntlBackslash=92]="IntlBackslash",s[s.Numpad0=93]="Numpad0",s[s.Numpad1=94]="Numpad1",s[s.Numpad2=95]="Numpad2",s[s.Numpad3=96]="Numpad3",s[s.Numpad4=97]="Numpad4",s[s.Numpad5=98]="Numpad5",s[s.Numpad6=99]="Numpad6",s[s.Numpad7=100]="Numpad7",s[s.Numpad8=101]="Numpad8",s[s.Numpad9=102]="Numpad9",s[s.NumpadMultiply=103]="NumpadMultiply",s[s.NumpadAdd=104]="NumpadAdd",s[s.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",s[s.NumpadSubtract=106]="NumpadSubtract",s[s.NumpadDecimal=107]="NumpadDecimal",s[s.NumpadDivide=108]="NumpadDivide",s[s.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",s[s.ABNT_C1=110]="ABNT_C1",s[s.ABNT_C2=111]="ABNT_C2",s[s.AudioVolumeMute=112]="AudioVolumeMute",s[s.AudioVolumeUp=113]="AudioVolumeUp",s[s.AudioVolumeDown=114]="AudioVolumeDown",s[s.BrowserSearch=115]="BrowserSearch",s[s.BrowserHome=116]="BrowserHome",s[s.BrowserBack=117]="BrowserBack",s[s.BrowserForward=118]="BrowserForward",s[s.MediaTrackNext=119]="MediaTrackNext",s[s.MediaTrackPrevious=120]="MediaTrackPrevious",s[s.MediaStop=121]="MediaStop",s[s.MediaPlayPause=122]="MediaPlayPause",s[s.LaunchMediaPlayer=123]="LaunchMediaPlayer",s[s.LaunchMail=124]="LaunchMail",s[s.LaunchApp2=125]="LaunchApp2",s[s.Clear=126]="Clear",s[s.MAX_VALUE=127]="MAX_VALUE"})(z5||(z5={}));var U5;(function(s){s[s.Hint=1]="Hint",s[s.Info=2]="Info",s[s.Warning=4]="Warning",s[s.Error=8]="Error"})(U5||(U5={}));var $5;(function(s){s[s.Unnecessary=1]="Unnecessary",s[s.Deprecated=2]="Deprecated"})($5||($5={}));var j5;(function(s){s[s.Inline=1]="Inline",s[s.Gutter=2]="Gutter"})(j5||(j5={}));var K5;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.TEXTAREA=1]="TEXTAREA",s[s.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",s[s.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",s[s.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",s[s.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",s[s.CONTENT_TEXT=6]="CONTENT_TEXT",s[s.CONTENT_EMPTY=7]="CONTENT_EMPTY",s[s.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",s[s.CONTENT_WIDGET=9]="CONTENT_WIDGET",s[s.OVERVIEW_RULER=10]="OVERVIEW_RULER",s[s.SCROLLBAR=11]="SCROLLBAR",s[s.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",s[s.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(K5||(K5={}));var q5;(function(s){s[s.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",s[s.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",s[s.TOP_CENTER=2]="TOP_CENTER"})(q5||(q5={}));var G5;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=4]="Right",s[s.Full=7]="Full"})(G5||(G5={}));var Y5;(function(s){s[s.Left=0]="Left",s[s.Right=1]="Right",s[s.None=2]="None",s[s.LeftOfInjectedText=3]="LeftOfInjectedText",s[s.RightOfInjectedText=4]="RightOfInjectedText"})(Y5||(Y5={}));var Z5;(function(s){s[s.Off=0]="Off",s[s.On=1]="On",s[s.Relative=2]="Relative",s[s.Interval=3]="Interval",s[s.Custom=4]="Custom"})(Z5||(Z5={}));var Q5;(function(s){s[s.None=0]="None",s[s.Text=1]="Text",s[s.Blocks=2]="Blocks"})(Q5||(Q5={}));var X5;(function(s){s[s.Smooth=0]="Smooth",s[s.Immediate=1]="Immediate"})(X5||(X5={}));var J5;(function(s){s[s.Auto=1]="Auto",s[s.Hidden=2]="Hidden",s[s.Visible=3]="Visible"})(J5||(J5={}));var e3;(function(s){s[s.LTR=0]="LTR",s[s.RTL=1]="RTL"})(e3||(e3={}));var t3;(function(s){s[s.Invoke=1]="Invoke",s[s.TriggerCharacter=2]="TriggerCharacter",s[s.ContentChange=3]="ContentChange"})(t3||(t3={}));var i3;(function(s){s[s.File=0]="File",s[s.Module=1]="Module",s[s.Namespace=2]="Namespace",s[s.Package=3]="Package",s[s.Class=4]="Class",s[s.Method=5]="Method",s[s.Property=6]="Property",s[s.Field=7]="Field",s[s.Constructor=8]="Constructor",s[s.Enum=9]="Enum",s[s.Interface=10]="Interface",s[s.Function=11]="Function",s[s.Variable=12]="Variable",s[s.Constant=13]="Constant",s[s.String=14]="String",s[s.Number=15]="Number",s[s.Boolean=16]="Boolean",s[s.Array=17]="Array",s[s.Object=18]="Object",s[s.Key=19]="Key",s[s.Null=20]="Null",s[s.EnumMember=21]="EnumMember",s[s.Struct=22]="Struct",s[s.Event=23]="Event",s[s.Operator=24]="Operator",s[s.TypeParameter=25]="TypeParameter"})(i3||(i3={}));var n3;(function(s){s[s.Deprecated=1]="Deprecated"})(n3||(n3={}));var s3;(function(s){s[s.Hidden=0]="Hidden",s[s.Blink=1]="Blink",s[s.Smooth=2]="Smooth",s[s.Phase=3]="Phase",s[s.Expand=4]="Expand",s[s.Solid=5]="Solid"})(s3||(s3={}));var o3;(function(s){s[s.Line=1]="Line",s[s.Block=2]="Block",s[s.Underline=3]="Underline",s[s.LineThin=4]="LineThin",s[s.BlockOutline=5]="BlockOutline",s[s.UnderlineThin=6]="UnderlineThin"})(o3||(o3={}));var r3;(function(s){s[s.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",s[s.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",s[s.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",s[s.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(r3||(r3={}));var a3;(function(s){s[s.None=0]="None",s[s.Same=1]="Same",s[s.Indent=2]="Indent",s[s.DeepIndent=3]="DeepIndent"})(a3||(a3={}));class rL{static chord(e,t){return Is(e,t)}}rL.CtrlCmd=2048;rL.Shift=1024;rL.Alt=512;rL.WinCtrl=256;function GX(){return{editor:void 0,languages:void 0,CancellationTokenSource:_o,Emitter:J,KeyCode:z5,KeyMod:rL,Position:se,Range:M,Selection:et,SelectionDirection:e3,MarkerSeverity:U5,MarkerTag:$5,Uri:yt,Token:Ay}}class z1e{constructor(e){this.fn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}}class CK{constructor(e){this.fn=e,this._map=new Map}get cachedValues(){return this._map}get(e){if(this._map.has(e))return this._map.get(e);const t=this.fn(e);return this._map.set(e,t),t}}class d0{constructor(e){this.executor=e,this._didRun=!1}hasValue(){return this._didRun}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var YX;function ZX(s){return!s||typeof s!="string"?!0:s.trim().length===0}const U1e=/{(\d+)}/g;function bl(s,...e){return e.length===0?s:s.replace(U1e,function(t,i){const n=parseInt(i,10);return isNaN(n)||n<0||n>=e.length?t:e[n]})}function J8(s){return s.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function ja(s){return s.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function $1e(s,e=" "){const t=vN(s,e);return QX(t,e)}function vN(s,e){if(!s||!e)return s;const t=e.length;if(t===0||s.length===0)return s;let i=0;for(;s.indexOf(e,i)===i;)i=i+t;return s.substring(i)}function QX(s,e){if(!s||!e)return s;const t=e.length,i=s.length;if(t===0||i===0)return s;let n=i,o=-1;for(;o=s.lastIndexOf(e,n-1),!(o===-1||o+t!==n);){if(o===0)return"";n=o}return s.substring(0,n)}function j1e(s){return s.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function K1e(s){return s.replace(/\*/g,"")}function XX(s,e,t={}){if(!s)throw new Error("Cannot create regex from empty string");e||(s=ja(s)),t.wholeWord&&(/\B/.test(s.charAt(0))||(s="\\b"+s),/\B/.test(s.charAt(s.length-1))||(s=s+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(s,i)}function q1e(s){return s.source==="^"||s.source==="^$"||s.source==="$"||s.source==="^\\s*$"?!1:!!(s.exec("")&&s.lastIndex===0)}function zP(s){return(s.global?"g":"")+(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")}function md(s){return s.split(/\r\n|\r|\n/)}function Lr(s){for(let e=0,t=s.length;e<t;e++){const i=s.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function on(s,e=0,t=s.length){for(let i=e;i<t;i++){const n=s.charCodeAt(i);if(n!==32&&n!==9)return s.substring(e,i)}return s.substring(e,t)}function dd(s,e=s.length-1){for(let t=e;t>=0;t--){const i=s.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function Py(s,e){return s<e?-1:s>e?1:0}function eB(s,e,t=0,i=s.length,n=0,o=e.length){for(;t<i&&n<o;t++,n++){const l=s.charCodeAt(t),c=e.charCodeAt(n);if(l<c)return-1;if(l>c)return 1}const r=i-t,a=o-n;return r<a?-1:r>a?1:0}function l3(s,e){return aL(s,e,0,s.length,0,e.length)}function aL(s,e,t=0,i=s.length,n=0,o=e.length){for(;t<i&&n<o;t++,n++){let l=s.charCodeAt(t),c=e.charCodeAt(n);if(l===c)continue;if(l>=128||c>=128)return eB(s.toLowerCase(),e.toLowerCase(),t,i,n,o);og(l)&&(l-=32),og(c)&&(c-=32);const d=l-c;if(d!==0)return d}const r=i-t,a=o-n;return r<a?-1:r>a?1:0}function gk(s){return s>=48&&s<=57}function og(s){return s>=97&&s<=122}function Ku(s){return s>=65&&s<=90}function mb(s,e){return s.length===e.length&&aL(s,e)===0}function tB(s,e){const t=e.length;return e.length>s.length?!1:aL(s,e,0,t)===0}function Fm(s,e){const t=Math.min(s.length,e.length);let i;for(i=0;i<t;i++)if(s.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function Fy(s,e){const t=Math.min(s.length,e.length);let i;const n=s.length-1,o=e.length-1;for(i=0;i<t;i++)if(s.charCodeAt(n-i)!==e.charCodeAt(o-i))return i;return t}function Ms(s){return 55296<=s&&s<=56319}function Bm(s){return 56320<=s&&s<=57343}function iB(s,e){return(s-55296<<10)+(e-56320)+65536}function kT(s,e,t){const i=s.charCodeAt(t);if(Ms(i)&&t+1<e){const n=s.charCodeAt(t+1);if(Bm(n))return iB(i,n)}return i}function G1e(s,e){const t=s.charCodeAt(e-1);if(Bm(t)&&e>1){const i=s.charCodeAt(e-2);if(Ms(i))return iB(i,t)}return t}class nB{constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}get offset(){return this._offset}setOffset(e){this._offset=e}prevCodePoint(){const e=G1e(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=kT(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class ET{constructor(e,t=0){this._iterator=new nB(e,t)}get offset(){return this._iterator.offset}nextGraphemeLength(){const e=rg.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const o=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());if(wK(n,r)){t.setOffset(o);break}n=r}return t.offset-i}prevGraphemeLength(){const e=rg.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const o=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());if(wK(r,n)){t.setOffset(o);break}n=r}return i-t.offset}eol(){return this._iterator.eol()}}function sB(s,e){return new ET(s,e).nextGraphemeLength()}function JX(s,e){return new ET(s,e).prevGraphemeLength()}function Y1e(s,e){e>0&&Bm(s.charCodeAt(e))&&e--;const t=e+sB(s,e);return[t-JX(s,t),t]}const Z1e=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function h0(s){return Z1e.test(s)}const Q1e=/^[\t\n\r\x20-\x7E]*$/;function bN(s){return Q1e.test(s)}const eJ=/[\u2028\u2029]/;function tJ(s){return eJ.test(s)}function Ng(s){return s>=11904&&s<=55215||s>=63744&&s<=64255||s>=65281&&s<=65374}function oB(s){return s>=127462&&s<=127487||s===8986||s===8987||s===9200||s===9203||s>=9728&&s<=10175||s===11088||s===11093||s>=127744&&s<=128591||s>=128640&&s<=128764||s>=128992&&s<=129008||s>=129280&&s<=129535||s>=129648&&s<=129782}const X1e=String.fromCharCode(65279);function rB(s){return!!(s&&s.length>0&&s.charCodeAt(0)===65279)}function J1e(s,e=!1){return s?(e&&(s=s.replace(/\\./g,"")),s.toLowerCase()!==s):!1}function iJ(s){return s=s%(2*26),s<26?String.fromCharCode(97+s):String.fromCharCode(65+s-26)}function wK(s,e){return s===0?e!==5&&e!==7:s===2&&e===3?!1:s===4||s===2||s===3||e===4||e===2||e===3?!0:!(s===8&&(e===8||e===9||e===11||e===12)||(s===11||s===9)&&(e===9||e===10)||(s===12||s===10)&&e===10||e===5||e===13||e===7||s===1||s===13&&e===14||s===6&&e===6)}class rg{constructor(){this._data=ewe()}static getInstance(){return rg._INSTANCE||(rg._INSTANCE=new rg),rg._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let n=1;for(;n<=i;)if(e<t[3*n])n=2*n;else if(e>t[3*n+1])n=2*n+1;else return t[3*n+2];return 0}}rg._INSTANCE=null;function ewe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function twe(s,e){if(s===0)return 0;const t=iwe(s,e);if(t!==void 0)return t;const i=new nB(e,s);return i.prevCodePoint(),i.offset}function iwe(s,e){const t=new nB(e,s);let i=t.prevCodePoint();for(;nwe(i)||i===65039||i===8419;){if(t.offset===0)return;i=t.prevCodePoint()}if(!oB(i))return;let n=t.offset;return n>0&&t.prevCodePoint()===8205&&(n=t.offset),n}function nwe(s){return 127995<=s&&s<=127999}const swe="\xA0";class hc{constructor(e){this.confusableDictionary=e}static getInstance(e){return hc.cache.get(Array.from(e))}static getLocales(){return hc._locales.getValue()}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}YX=hc;hc.ambiguousCharacterData=new d0(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));hc.cache=new z1e(s=>{function e(c){const d=new Map;for(let f=0;f<c.length;f+=2)d.set(c[f],c[f+1]);return d}function t(c,d){const f=new Map(c);for(const[g,m]of d)f.set(g,m);return f}function i(c,d){if(!c)return d;const f=new Map;for(const[g,m]of c)d.has(g)&&f.set(g,m);return f}const n=YX.ambiguousCharacterData.getValue();let o=s.filter(c=>!c.startsWith("_")&&c in n);o.length===0&&(o=["_default"]);let r;for(const c of o){const d=e(n[c]);r=i(r,d)}const a=e(n._common),l=t(a,r);return new hc(l)});hc._locales=new d0(()=>Object.keys(hc.ambiguousCharacterData.getValue()).filter(s=>!s.startsWith("_")));class hd{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(hd.getRawData())),this._data}static isInvisibleCharacter(e){return hd.getData().has(e)}static get codePoints(){return hd.getData()}}hd._data=void 0;class c3{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}}c3.INSTANCE=new c3;class owe extends ge{constructor(){super(),this._onDidChange=this._register(new J),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(e){var t;(t=this._mediaQueryList)===null||t===void 0||t.removeEventListener("change",this._listener),this._mediaQueryList=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),e&&this._onDidChange.fire()}}class rwe extends ge{constructor(){super(),this._onDidChange=this._register(new J),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();const e=this._register(new owe);this._register(e.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}get value(){return this._value}_getPixelRatio(){const e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i}}class awe{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=new rwe),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}function aB(s,e){typeof s=="string"&&(s=window.matchMedia(s)),s.addEventListener("change",e)}const f0=new awe;function nJ(){return c3.INSTANCE.getZoomFactor()}const tC=navigator.userAgent,Ka=tC.indexOf("Firefox")>=0,_g=tC.indexOf("AppleWebKit")>=0,lB=tC.indexOf("Chrome")>=0,Gh=!lB&&tC.indexOf("Safari")>=0,cB=!lB&&!Gh&&_g,lwe=tC.indexOf("Electron/")>=0,sJ=tC.indexOf("Android")>=0;let u3=!1;if(window.matchMedia){const s=window.matchMedia("(display-mode: standalone)");u3=s.matches,aB(s,({matches:e})=>{u3=e})}function uB(){return u3}const cwe=Object.freeze(Object.defineProperty({__proto__:null,addMatchMediaChangeListener:aB,PixelRatio:f0,getZoomFactor:nJ,isFirefox:Ka,isWebKit:_g,isChrome:lB,isSafari:Gh,isWebkitWebView:cB,isElectron:lwe,isAndroid:sJ,isStandalone:uB},Symbol.toStringTag,{value:"Module"}));class oJ{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=Ou(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Ou(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Ou(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Ou(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Ou(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Ou(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Ou(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Ou(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Ou(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Ou(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Ou(s){return typeof s=="number"?`${s}px`:s}function Di(s){return new oJ(s)}function Fo(s,e){s instanceof oJ?(s.setFontFamily(e.getMassagedFontFamily()),s.setFontWeight(e.fontWeight),s.setFontSize(e.fontSize),s.setFontFeatureSettings(e.fontFeatureSettings),s.setLineHeight(e.lineHeight),s.setLetterSpacing(e.letterSpacing)):(s.style.fontFamily=e.getMassagedFontFamily(),s.style.fontWeight=e.fontWeight,s.style.fontSize=e.fontSize+"px",s.style.fontFeatureSettings=e.fontFeatureSettings,s.style.lineHeight=e.lineHeight+"px",s.style.letterSpacing=e.letterSpacing+"px")}class uwe{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class dB{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");Fo(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");Fo(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const n=document.createElement("div");Fo(n,this._bareFontInfo),n.style.fontStyle="italic",e.appendChild(n);const o=[];for(const r of this._requests){let a;r.type===0&&(a=t),r.type===2&&(a=i),r.type===1&&(a=n),a.appendChild(document.createElement("br"));const l=document.createElement("span");dB._render(l,r),a.appendChild(l),o.push(l)}this._container=e,this._testElements=o}static _render(e,t){if(t.chr===" "){let i="\xA0";for(let n=0;n<8;n++)i+=i;e.innerText=i}else{let i=t.chr;for(let n=0;n<8;n++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],n=this._testElements[e];i.fulfill(n.offsetWidth/256)}}}function dwe(s,e){new dB(s,e).read()}const Yh=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new J,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(s){s=Math.min(Math.max(-5,s),20),this._zoomLevel!==s&&(this._zoomLevel=s,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},hwe=mi?1.5:1.35,UP=8;class ym{constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,i){const n=e.get(45),o=e.get(49),r=e.get(48),a=e.get(47),l=e.get(61),c=e.get(58);return ym._create(n,o,r,a,l,c,t,i)}static _create(e,t,i,n,o,r,a,l){o===0?o=hwe*i:o<UP&&(o=o*i),o=Math.round(o),o<UP&&(o=UP);const c=1+(l?0:Yh.getZoomLevel()*.1);return i*=c,o*=c,new ym({pixelRatio:a,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:n,lineHeight:o,letterSpacing:r})}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=ma.fontFamily,t=ym._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const fwe=1;class d3 extends ym{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=fwe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class gwe extends ge{constructor(){super(),this._onDidChange=this._register(new J),this.onDidChange=this._onDidChange.event,this._cache=new yK,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new yK,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=window.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const i of e)i.isTrusted||(t=!0,this._cache.remove(i));t&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let t=this._actualReadFontInfo(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new d3({pixelRatio:f0.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}_createRequest(e,t,i,n){const o=new uwe(e,t);return i.push(o),n==null||n.push(o),o}_actualReadFontInfo(e){const t=[],i=[],n=this._createRequest("n",0,t,i),o=this._createRequest("\uFF4D",0,t,null),r=this._createRequest(" ",0,t,i),a=this._createRequest("0",0,t,i),l=this._createRequest("1",0,t,i),c=this._createRequest("2",0,t,i),d=this._createRequest("3",0,t,i),f=this._createRequest("4",0,t,i),g=this._createRequest("5",0,t,i),m=this._createRequest("6",0,t,i),_=this._createRequest("7",0,t,i),C=this._createRequest("8",0,t,i),S=this._createRequest("9",0,t,i),x=this._createRequest("\u2192",0,t,i),L=this._createRequest("\uFFEB",0,t,null),k=this._createRequest("\xB7",0,t,i),T=this._createRequest(String.fromCharCode(11825),0,t,null),A="|/-_ilm%";for(let z=0,q=A.length;z<q;z++)this._createRequest(A.charAt(z),0,t,i),this._createRequest(A.charAt(z),1,t,i),this._createRequest(A.charAt(z),2,t,i);dwe(e,t);const O=Math.max(a.width,l.width,c.width,d.width,f.width,g.width,m.width,_.width,C.width,S.width);let I=e.fontFeatureSettings===Va.OFF;const R=i[0].width;for(let z=1,q=i.length;I&&z<q;z++){const te=R-i[z].width;if(te<-.001||te>.001){I=!1;break}}let B=!0;return I&&L.width!==R&&(B=!1),L.width>x.width&&(B=!1),new d3({pixelRatio:f0.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:I,typicalHalfwidthCharacterWidth:n.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:B,spaceWidth:r.width,middotWidth:k.width,wsmiddotWidth:T.width,maxDigitWidth:O},!0)}}class yK{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const h3=new gwe;var Gc;(function(s){s.serviceIds=new Map,s.DI_TARGET="$di$target",s.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[s.DI_DEPENDENCIES]||[]}s.getServiceDependencies=e})(Gc||(Gc={}));const Zt=bi("instantiationService");function pwe(s,e,t){e[Gc.DI_TARGET]===e?e[Gc.DI_DEPENDENCIES].push({id:s,index:t}):(e[Gc.DI_DEPENDENCIES]=[{id:s,index:t}],e[Gc.DI_TARGET]=e)}function bi(s){if(Gc.serviceIds.has(s))return Gc.serviceIds.get(s);const e=function(t,i,n){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");pwe(e,t,n)};return e.toString=()=>s,Gc.serviceIds.set(s,e),e}const Vi=bi("codeEditorService");function ny(s,e){if(!s)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}const mwe={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class _we extends ge{constructor(e,t={}){super(),this._onDidUpdate=this._register(new J),this._editor=e,this._options=xd(t,mwe,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(i=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(i=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(i=>{this.ranges.push({rhs:!0,range:new M(i.modifiedStartLineNumber,i.modifiedStartColumn,i.modifiedEndLineNumber,i.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new M(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new M(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,i)=>M.compareRangesUsingStarts(t.range,i.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1;const i=this._editor.getPosition();if(!i){this.nextIdx=0;return}for(let n=0,o=this.ranges.length;n<o&&!t;n++){const r=this.ranges[n].range;i.isBeforeOrEqual(r.getStartPosition())&&(this.nextIdx=n+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(ny(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));const i=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{const n=i.range.getStartPosition();this._editor.setPosition(n),this._editor.revealRangeInCenter(i.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}const lL={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var El;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=4]="Right",s[s.Full=7]="Full"})(El||(El={}));var Ll;(function(s){s[s.Inline=1]="Inline",s[s.Gutter=2]="Gutter"})(Ll||(Ll={}));var Yc;(function(s){s[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None"})(Yc||(Yc={}));class ME{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace),this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Sl(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class By{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function vwe(s){return s&&typeof s.read=="function"}class $P{constructor(e,t,i,n,o,r){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=n,this.isAutoWhitespaceEdit=o,this._isTracked=r}}class bwe{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class Cwe{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function wwe(s){return!s.isTooLargeForSyncing()&&!s.isForSimpleWidget}var ds;(function(s){s[s.None=0]="None",s[s.Indent=1]="Indent",s[s.IndentOutdent=2]="IndentOutdent",s[s.Outdent=3]="Outdent"})(ds||(ds={}));class jP{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const i=e.findTokenIndexAtOffset(t-2),n=e.getStandardTokenType(i);return this.isOK(n)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const n=String.fromCharCode(i);if(!this.open.includes(n)&&!this.close.includes(n))return n}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class ywe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)sw(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),sw(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),sw(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),sw(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&sw(this.autoClosingPairsCloseSingleChar,t.close,t)}}function sw(s,e,t){s.has(e)?s.get(e).push(t):s.set(e,[t])}function CN(s,e){const t=s.getCount(),i=s.findTokenIndexAtOffset(e),n=s.getLanguageId(i);let o=i;for(;o+1<t&&s.getLanguageId(o+1)===n;)o++;let r=i;for(;r>0&&s.getLanguageId(r-1)===n;)r--;return new Swe(s,n,r,o+1,s.getStartOffset(r),s.getEndOffset(o))}class Swe{constructor(e,t,i,n,o,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=n,this.firstCharOffset=o,this._lastCharOffset=r}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function Wu(s){return(s&3)!==0}class wN{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new jP(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new jP({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new jP({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:wN.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}}wN.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;const SK=typeof Buffer<"u";let KP;class yN{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return SK&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new yN(e)}toString(){return SK?this.buffer.toString():(KP||(KP=new TextDecoder),KP.decode(this.buffer))}}function Lwe(s,e){return s[e+0]<<0>>>0|s[e+1]<<8>>>0}function xwe(s,e,t){s[t+0]=e&255,e=e>>>8,s[t+1]=e&255}function Fc(s,e){return s[e]*Math.pow(2,24)+s[e+1]*Math.pow(2,16)+s[e+2]*Math.pow(2,8)+s[e+3]}function Bc(s,e,t){s[t+3]=e,e=e>>>8,s[t+2]=e,e=e>>>8,s[t+1]=e,e=e>>>8,s[t]=e}function LK(s,e){return s[e]}function xK(s,e,t){s[t]=e}let qP;function rJ(){return qP||(qP=new TextDecoder("UTF-16LE")),qP}let GP;function Dwe(){return GP||(GP=new TextDecoder("UTF-16BE")),GP}let YP;function aJ(){return YP||(YP=bX()?rJ():Dwe()),YP}const lJ=typeof TextDecoder<"u";let Rg,f3;lJ?(Rg=s=>new Ewe(s),f3=kwe):(Rg=s=>new Twe,f3=cJ);function kwe(s,e,t){const i=new Uint16Array(s.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?cJ(s,e,t):rJ().decode(i)}function cJ(s,e,t){const i=[];let n=0;for(let o=0;o<t;o++){const r=Lwe(s,e);e+=2,i[n++]=String.fromCharCode(r)}return i.join("")}class Ewe{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return aJ().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Ms(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class Twe{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class TT{constructor(e,t,i,n,o,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=n,this.forwardRegex=o,this.reversedRegex=r,this._openSet=TT._toSet(this.open),this._closeSet=TT._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function Iwe(s){const e=s.length;s=s.map(r=>[r[0].toLowerCase(),r[1].toLowerCase()]);const t=[];for(let r=0;r<e;r++)t[r]=r;const i=(r,a)=>{const[l,c]=r,[d,f]=a;return l===d||l===f||c===d||c===f},n=(r,a)=>{const l=Math.min(r,a),c=Math.max(r,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)};for(let r=0;r<e;r++){const a=s[r];for(let l=r+1;l<e;l++){const c=s[l];i(a,c)&&n(t[r],t[l])}}const o=[];for(let r=0;r<e;r++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===r){const[d,f]=s[c];a.push(d),l.push(f)}a.length>0&&o.push({open:a,close:l})}return o}class Nwe{constructor(e,t){this._richEditBracketsBrand=void 0;const i=Iwe(t);this.brackets=i.map((n,o)=>new TT(e,o,n.open,n.close,Rwe(n.open,n.close,i,o),Awe(n.open,n.close,i,o))),this.forwardRegex=Mwe(this.brackets),this.reversedRegex=Owe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const n of this.brackets){for(const o of n.open)this.textIsBracket[o]=n,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(const o of n.close)this.textIsBracket[o]=n,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}}function uJ(s,e,t,i){for(let n=0,o=e.length;n<o;n++){if(n===t)continue;const r=e[n];for(const a of r.open)a.indexOf(s)>=0&&i.push(a);for(const a of r.close)a.indexOf(s)>=0&&i.push(a)}}function dJ(s,e){return s.length-e.length}function SN(s){if(s.length<=1)return s;const e=[],t=new Set;for(const i of s)t.has(i)||(e.push(i),t.add(i));return e}function Rwe(s,e,t,i){let n=[];n=n.concat(s),n=n.concat(e);for(let o=0,r=n.length;o<r;o++)uJ(n[o],t,i,n);return n=SN(n),n.sort(dJ),n.reverse(),LN(n)}function Awe(s,e,t,i){let n=[];n=n.concat(s),n=n.concat(e);for(let o=0,r=n.length;o<r;o++)uJ(n[o],t,i,n);return n=SN(n),n.sort(dJ),n.reverse(),LN(n.map(hB))}function Mwe(s){let e=[];for(const t of s){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=SN(e),LN(e)}function Owe(s){let e=[];for(const t of s){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=SN(e),LN(e.map(hB))}function Pwe(s){const e=/^[\w ]+$/.test(s);return s=ja(s),e?`\\b${s}\\b`:s}function LN(s){const e=`(${s.map(Pwe).join(")|(")})`;return XX(e,!0)}const hB=function(){function s(i){if(lJ){const n=new Uint16Array(i.length);let o=0;for(let r=i.length-1;r>=0;r--)n[o++]=i.charCodeAt(r);return aJ().decode(n)}else{const n=[];let o=0;for(let r=i.length-1;r>=0;r--)n[o++]=i.charAt(r);return n.join("")}}let e=null,t=null;return function(n){return e!==n&&(e=n,t=s(e)),t}}();class Jl{static _findPrevBracketInText(e,t,i,n){const o=i.match(e);if(!o)return null;const r=i.length-(o.index||0),a=o[0].length,l=n+r;return new M(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,n,o){const a=hB(i).substring(i.length-o,i.length-n);return this._findPrevBracketInText(e,t,a,n)}static findNextBracketInText(e,t,i,n){const o=i.match(e);if(!o)return null;const r=o.index||0,a=o[0].length;if(a===0)return null;const l=n+r;return new M(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,n,o){const r=i.substring(n,o);return this.findNextBracketInText(e,t,r,n)}}class Fwe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const n=i.charAt(i.length-1);e.push(n)}return Kh(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const n=t.findTokenIndexAtOffset(i-1);if(Wu(t.getStandardTokenType(n)))return null;const o=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,i-1)+e,a=Jl.findPrevBracketInRange(o,1,r,0,r.length);if(!a)return null;const l=r.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}function pk(s){return s.global&&(s.lastIndex=0),!0}class Bwe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&pk(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&pk(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&pk(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&pk(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class _b{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=_b._createOpenBracketRegExp(t[0]),n=_b._createCloseBracketRegExp(t[1]);i&&n&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:n})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,n){if(e>=3)for(let o=0,r=this._regExpRules.length;o<r;o++){const a=this._regExpRules[o];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:n},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&n.length>0)for(let o=0,r=this._brackets.length;o<r;o++){const a=this._brackets[o];if(a.openRegExp.test(i)&&a.closeRegExp.test(n))return{indentAction:ds.IndentOutdent}}if(e>=2&&i.length>0){for(let o=0,r=this._brackets.length;o<r;o++)if(this._brackets[o].openRegExp.test(i))return{indentAction:ds.Indent}}return null}static _createOpenBracketRegExp(e){let t=ja(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",_b._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=ja(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,_b._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Yt(t),null}}}const Ai=bi("configurationService");function hJ(s,e){const t=Object.create(null);for(const i in s)fB(t,i,s[i],e);return t}function fB(s,e,t,i){const n=e.split("."),o=n.pop();let r=s;for(let a=0;a<n.length;a++){const l=n[a];let c=r[l];switch(typeof c){case"undefined":c=r[l]=Object.create(null);break;case"object":break;default:i(`Ignoring ${e} as ${n.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}r=c}if(typeof r=="object"&&r!==null)try{r[o]=t}catch{i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(r)}`)}else i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(r)}`)}function Vwe(s,e){const t=e.split(".");fJ(s,t)}function fJ(s,e){const t=e.shift();if(e.length===0){delete s[t];return}if(Object.keys(s).indexOf(t)!==-1){const i=s[t];typeof i=="object"&&!Array.isArray(i)&&(fJ(i,e),Object.keys(i).length===0&&delete s[t])}}function DK(s,e,t){function i(r,a){let l=r;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const n=e.split("."),o=i(s,n);return typeof o>"u"?t:o}function Wwe(s){return s.replace(/[\[\]]/g,"")}const Vn=bi("languageService");class qu{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const gJ=[];function ki(s,e,t){e instanceof qu||(e=new qu(e,[],t)),gJ.push([s,e])}function kK(){return gJ}class Hwe{constructor(){this.data=new Map}add(e,t){ny(Kr(e)),ny($r(t)),ny(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Wn=new Hwe,Ur=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),xN={JSONContribution:"base.contributions.json"};function zwe(s){return s.length>0&&s.charAt(s.length-1)==="#"?s.substring(0,s.length-1):s}class Uwe{constructor(){this._onDidChangeSchema=new J,this.schemasById={}}registerSchema(e,t){this.schemasById[zwe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const $we=new Uwe;Wn.add(xN.JSONContribution,$we);const tf={Configuration:"base.contributions.configuration"},ow="vscode://schemas/settings/resourceLanguage",EK=Wn.as(xN.JSONContribution);class jwe{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new J,this._onDidUpdateConfiguration=new J,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:b("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},EK.registerSchema(ow,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=this.doRegisterConfigurations(e,t);EK.registerSchema(ow,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){var t;const i=[],n=[];for(const{overrides:o,source:r}of e)for(const a in o)if(i.push(a),Vy.test(a)){const l=this.configurationDefaultsOverrides.get(a),c=(t=l==null?void 0:l.valuesSources)!==null&&t!==void 0?t:new Map;if(r)for(const m of Object.keys(o[a]))c.set(m,r);const d=Object.assign(Object.assign({},(l==null?void 0:l.value)||{}),o[a]);this.configurationDefaultsOverrides.set(a,{source:r,value:d,valuesSources:c});const f=Wwe(a),g={type:"object",default:d,description:b("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",f),$ref:ow,defaultDefaultValue:d,source:Kr(r)?void 0:r,defaultValueSource:r};n.push(...mJ(a)),this.configurationProperties[a]=g,this.defaultLanguageConfigurationOverridesNode.properties[a]=g}else{this.configurationDefaultsOverrides.set(a,{value:o[a],source:r});const l=this.configurationProperties[a];l&&(this.updatePropertyDefaultValue(a,l),this.updateSchema(a,l))}this.registerOverrideIdentifiers(n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i,defaultsOverrides:!0})}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const i=[];return e.forEach(n=>{i.push(...this.validateAndRegisterProperties(n,t,n.extensionInfo,n.restrictedProperties)),this.configurationContributors.push(n),this.registerJSONConfiguration(n)}),i}validateAndRegisterProperties(e,t=!0,i,n,o=3){var r;o=Ba(e.scope)?o:e.scope;const a=[],l=e.properties;if(l)for(const d in l){const f=l[d];if(t&&Gwe(d,f)){delete l[d];continue}if(f.source=i,f.defaultDefaultValue=l[d].default,this.updatePropertyDefaultValue(d,f),Vy.test(d)?f.scope=void 0:(f.scope=Ba(f.scope)?o:f.scope,f.restricted=Ba(f.restricted)?!!(n!=null&&n.includes(d)):f.restricted),l[d].hasOwnProperty("included")&&!l[d].included){this.excludedConfigurationProperties[d]=l[d],delete l[d];continue}else this.configurationProperties[d]=l[d],!((r=l[d].policy)===null||r===void 0)&&r.name&&this.policyConfigurations.set(l[d].policy.name,d);!l[d].deprecationMessage&&l[d].markdownDeprecationMessage&&(l[d].deprecationMessage=l[d].markdownDeprecationMessage),a.push(d)}const c=e.allOf;if(c)for(const d of c)a.push(...this.validateAndRegisterProperties(d,t,i,n,o));return a}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=i=>{const n=i.properties;if(n)for(const r in n)this.updateSchema(r,n[r]);const o=i.allOf;o==null||o.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:b("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:b("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:ow};this.updatePropertyDefaultValue(t,i)}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){b("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),b("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const i=this.configurationDefaultsOverrides.get(e);let n=i==null?void 0:i.value,o=i==null?void 0:i.source;fa(n)&&(n=t.defaultDefaultValue,o=void 0),fa(n)&&(n=qwe(t.type)),t.default=n,t.defaultValueSource=o}}const pJ="\\[([^\\]]+)\\]",TK=new RegExp(pJ,"g"),Kwe=`^(${pJ})+$`,Vy=new RegExp(Kwe);function mJ(s){const e=[];if(Vy.test(s)){let t=TK.exec(s);for(;t!=null&&t.length;){const i=t[1].trim();i&&e.push(i),t=TK.exec(s)}}return Kh(e)}function qwe(s){switch(Array.isArray(s)?s[0]:s){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const OE=new jwe;Wn.add(tf.Configuration,OE);function Gwe(s,e){var t,i,n,o;return s.trim()?Vy.test(s)?b("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",s):OE.getConfigurationProperties()[s]!==void 0?b("config.property.duplicate","Cannot register '{0}'. This property is already registered.",s):((t=e.policy)===null||t===void 0?void 0:t.name)&&OE.getPolicyConfigurations().get((i=e.policy)===null||i===void 0?void 0:i.name)!==void 0?b("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",s,(n=e.policy)===null||n===void 0?void 0:n.name,OE.getPolicyConfigurations().get((o=e.policy)===null||o===void 0?void 0:o.name)):null:b("config.property.empty","Cannot register an empty property")}const Ywe={ModesRegistry:"editor.modesRegistry"};class Zwe{constructor(){this._onDidChangeLanguages=new J,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const g0=new Zwe;Wn.add(Ywe.ModesRegistry,g0);const xl="plaintext",Qwe=".txt";g0.registerLanguage({id:xl,extensions:[Qwe],aliases:[b("plainText.alias","Plain Text"),"text"],mimetypes:[Ur.text]});Wn.as(tf.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class Xwe{constructor(e,t){this.languageId=e;let i;t.colorizedBracketPairs?i=IK(t.colorizedBracketPairs.map(r=>[r[0],r[1]])):t.brackets?i=IK(t.brackets.map(r=>[r[0],r[1]]).filter(r=>!(r[0]==="<"&&r[1]===">"))):i=[];const n=new CK(r=>{const a=new Set;return{info:new Jwe(this,r,a),closing:a}}),o=new CK(r=>{const a=new Set;return{info:new eye(this,r,a),opening:a}});for(const[r,a]of i){const l=n.get(r),c=o.get(a);l.closing.add(c.info),c.opening.add(l.info)}this._openingBrackets=new Map([...n.cachedValues].map(([r,a])=>[r,a.info])),this._closingBrackets=new Map([...o.cachedValues].map(([r,a])=>[r,a.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}}function IK(s){return s.filter(([e,t])=>e!==""&&t!=="")}class _J{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class Jwe extends _J{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class eye extends _J{constructor(e,t,i){super(e,t),this.closedBrackets=i,this.isOpeningBracket=!1}closes(e){if(e.languageId===this.languageId&&e.config!==this.config)throw new K8("Brackets from different language configuration cannot be used.");return this.closedBrackets.has(e)}getClosedBrackets(){return[...this.closedBrackets]}}var tye=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},NK=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};class ZP{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const os=bi("languageConfigurationService");let g3=class extends ge{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new oye),this.onDidChangeEmitter=this._register(new J),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(p3));this._register(this.configurationService.onDidChangeConfiguration(n=>{const o=n.change.keys.some(a=>i.has(a)),r=n.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>a);if(o)this.configurations.clear(),this.onDidChangeEmitter.fire(new ZP(void 0));else for(const a of r)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new ZP(a)))})),this._register(this._registry.onDidChange(n=>{this.configurations.delete(n.languageId),this.onDidChangeEmitter.fire(new ZP(n.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=iye(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};g3=tye([NK(0,Ai),NK(1,Vn)],g3);function iye(s,e,t,i){let n=e.getLanguageConfiguration(s);if(!n){if(!i.isRegisteredLanguageId(s))throw new Error(`Language id "${s}" is not configured nor known`);n=new Wy(s,{})}const o=nye(n.languageId,t),r=bJ([n.underlyingConfig,o]);return new Wy(n.languageId,r)}const p3={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function nye(s,e){const t=e.getValue(p3.brackets,{overrideIdentifier:s}),i=e.getValue(p3.colorizedBracketPairs,{overrideIdentifier:s});return{brackets:RK(t),colorizedBracketPairs:RK(i)}}function RK(s){if(!!Array.isArray(s))return s.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function vJ(s,e,t){const i=s.getLineContent(e);let n=on(i);return n.length>t-1&&(n=n.substring(0,t-1)),n}function zb(s,e,t){s.tokenization.forceTokenization(e);const i=s.tokenization.getLineTokens(e),n=typeof t>"u"?s.getLineMaxColumn(e)-1:t-1;return CN(i,n)}class sye{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new AK(e,t,++this._order);return this._entries.push(i),this._resolved=null,ni(()=>{for(let n=0;n<this._entries.length;n++)if(this._entries[n]===i){this._entries.splice(n,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Wy(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(AK.cmp),bJ(this._entries.map(e=>e.configuration)))}}function bJ(s){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of s)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class AK{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class MK{constructor(e){this.languageId=e}}class oye extends ge{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new J),this.onDidChange=this._onDidChange.event,this._register(this.register(xl,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let n=this._entries.get(e);n||(n=new sye(e),this._entries.set(e,n));const o=n.register(t,i);return this._onDidChange.fire(new MK(e)),ni(()=>{o.dispose(),this._onDidChange.fire(new MK(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}}class Wy{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new _b(this.underlyingConfig):null,this.comments=Wy._handleComments(this.underlyingConfig),this.characterPair=new wN(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||z8,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new Bwe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new Xwe(e,this.underlyingConfig)}getWordDefinition(){return yX(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new Nwe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new Fwe(this.brackets)),this._electricCharacter}onEnter(e,t,i,n){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,n):null}getAutoClosingPairs(){return new ywe(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(){return this.characterPair.getAutoCloseBeforeSet()}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[n,o]=t.blockComment;i.blockCommentStartToken=n,i.blockCommentEndToken=o}return i}}ki(os,g3);const p0=new class{clone(){return this}equals(s){return this===s}};function gB(s,e){return new X8([new Ay(0,"",s)],e)}function DN(s,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(s<<0|0<<8|0<<11|1<<15|2<<24)>>>0,new _N(t,e===null?p0:e)}const Hn=bi("modelService");var dl=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})},Aw=globalThis&&globalThis.__asyncValues||function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],t;return e?e.call(s):(s=typeof __values=="function"?__values(s):s[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=s[o]&&function(r){return new Promise(function(a,l){r=s[o](r),n(a,l,r.done,r.value)})}}function n(o,r,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},r)}};function m3(s){return!!s&&typeof s.then=="function"}function qs(s){const e=new _o,t=s(e.token),i=new Promise((n,o)=>{const r=e.token.onCancellationRequested(()=>{r.dispose(),e.dispose(),o(new Jg)});Promise.resolve(t).then(a=>{r.dispose(),e.dispose(),n(a)},a=>{r.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel()}then(n,o){return i.then(n,o)}catch(n){return this.then(void 0,n)}finally(n){return i.finally(n)}}}function pB(s,e,t){return new Promise((i,n)=>{const o=e.onCancellationRequested(()=>{o.dispose(),i(t)});s.then(i,n).finally(()=>o.dispose())})}class rye{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(n=>{this.activePromise=null,t(n)},n=>{this.activePromise=null,i(n)})})}}const aye=(s,e)=>{let t=!0;const i=setTimeout(()=>{t=!1,e()},s);return{isTriggered:()=>t,dispose:()=>{clearTimeout(i),t=!1}}},lye=s=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,s())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},CJ=Symbol("MicrotaskDelay");class _d{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,o)=>{this.doResolve=n,this.doReject=o}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}}));const i=()=>{var n;this.deferred=null,(n=this.doResolve)===null||n===void 0||n.call(this,null)};return this.deferred=t===CJ?lye(i):aye(t,i),this.completionPromise}isTriggered(){var e;return!!(!((e=this.deferred)===null||e===void 0)&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)===null||e===void 0||e.call(this,new Jg),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)===null||e===void 0||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class cye{constructor(e){this.delayer=new _d(e),this.throttler=new rye}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}function Ag(s,e){return e?new Promise((t,i)=>{const n=setTimeout(()=>{o.dispose(),t()},s),o=e.onCancellationRequested(()=>{clearTimeout(n),o.dispose(),i(new Jg)})}):qs(t=>Ag(s,t))}function Vm(s,e=0){const t=setTimeout(s,e);return ni(()=>clearTimeout(t))}function wJ(s,e=i=>!!i,t=null){let i=0;const n=s.length,o=()=>{if(i>=n)return Promise.resolve(t);const r=s[i++];return Promise.resolve(r()).then(l=>e(l)?Promise.resolve(l):o())};return o()}class Za{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class cL{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class Xi{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)===null||e===void 0||e.call(this)}}let Hy;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?Hy=s=>{vX(()=>{if(e)return;const t=Date.now()+15;s(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:Hy=(s,e)=>{const t=requestIdleCallback(s,typeof e=="number"?{timeout:e}:void 0);let i=!1;return{dispose(){i||(i=!0,cancelIdleCallback(t))}}}})();class vg{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=Hy(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class mB{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}get isRejected(){return this.rejected}get isSettled(){return this.rejected||this.resolved}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}cancel(){new Promise(e=>{this.errorCallback(new Jg),this.rejected=!0,e()})}}var _3;(function(s){function e(i){return dl(this,void 0,void 0,function*(){let n;const o=yield Promise.all(i.map(r=>r.then(a=>a,a=>{n||(n=a)})));if(typeof n<"u")throw n;return o})}s.settled=e;function t(i){return new Promise((n,o)=>dl(this,void 0,void 0,function*(){try{yield i(n,o)}catch(r){o(r)}}))}s.withAsyncBody=t})(_3||(_3={}));class us{constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new J,queueMicrotask(()=>dl(this,void 0,void 0,function*(){const t={emitOne:i=>this.emitOne(i),emitMany:i=>this.emitMany(i),reject:i=>this.reject(i)};try{yield Promise.resolve(e(t)),this.resolve()}catch(i){this.reject(i)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}static fromArray(e){return new us(t=>{t.emitMany(e)})}static fromPromise(e){return new us(t=>dl(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new us(t=>dl(this,void 0,void 0,function*(){yield Promise.all(e.map(i=>dl(this,void 0,void 0,function*(){return t.emitOne(yield i)})))}))}static merge(e){return new us(t=>dl(this,void 0,void 0,function*(){yield Promise.all(e.map(i=>{var n,o;return dl(this,void 0,void 0,function*(){var r,a;try{for(n=Aw(i);o=yield n.next(),!o.done;){const l=o.value;t.emitOne(l)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(a=n.return)&&(yield a.call(n))}finally{if(r)throw r.error}}})}))}))}[Symbol.asyncIterator](){let e=0;return{next:()=>dl(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield gt.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new us(i=>dl(this,void 0,void 0,function*(){var n,o;try{for(var r=Aw(e),a;a=yield r.next(),!a.done;){const l=a.value;i.emitOne(t(l))}}catch(l){n={error:l}}finally{try{a&&!a.done&&(o=r.return)&&(yield o.call(r))}finally{if(n)throw n.error}}}))}map(e){return us.map(this,e)}static filter(e,t){return new us(i=>dl(this,void 0,void 0,function*(){var n,o;try{for(var r=Aw(e),a;a=yield r.next(),!a.done;){const l=a.value;t(l)&&i.emitOne(l)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(o=r.return)&&(yield o.call(r))}finally{if(n)throw n.error}}}))}filter(e){return us.filter(this,e)}static coalesce(e){return us.filter(e,t=>!!t)}coalesce(){return us.coalesce(this)}static toPromise(e){var t,i,n,o;return dl(this,void 0,void 0,function*(){const r=[];try{for(t=Aw(e);i=yield t.next(),!i.done;){const a=i.value;r.push(a)}}catch(a){n={error:a}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(n)throw n.error}}return r})}toPromise(){return us.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}us.EMPTY=us.fromArray([]);class uye extends us{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function dye(s){const e=new _o,t=s(e.token);return new uye(e,i=>dl(this,void 0,void 0,function*(){var n,o;const r=e.token.onCancellationRequested(()=>{r.dispose(),e.dispose(),i.reject(new Jg)});try{try{for(var a=Aw(t),l;l=yield a.next(),!l.done;){const c=l.value;if(e.token.isCancellationRequested)return;i.emitOne(c)}}catch(c){n={error:c}}finally{try{l&&!l.done&&(o=a.return)&&(yield o.call(a))}finally{if(n)throw n.error}}r.dispose(),e.dispose()}catch(c){r.dispose(),e.dispose(),i.reject(c)}}))}const hye="$initialize";let OK=!1;function v3(s){!Xg||(OK||(OK=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(s.message))}class fye{constructor(e,t,i,n){this.vsWorker=e,this.req=t,this.method=i,this.args=n,this.type=0}}class PK{constructor(e,t,i,n){this.vsWorker=e,this.seq=t,this.res=i,this.err=n,this.type=1}}class gye{constructor(e,t,i,n){this.vsWorker=e,this.req=t,this.eventName=i,this.arg=n,this.type=2}}class pye{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class mye{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class _ye{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const i=String(++this._lastSentReq);return new Promise((n,o)=>{this._pendingReplies[i]={resolve:n,reject:o},this._send(new fye(this._workerId,i,e,t))})}listen(e,t){let i=null;const n=new J({onFirstListenerAdd:()=>{i=String(++this._lastSentReq),this._pendingEmitters.set(i,n),this._send(new gye(this._workerId,i,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(i),this._send(new mye(this._workerId,i)),i=null}});return n.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.method,e.args).then(n=>{this._send(new PK(this._workerId,t,n,void 0))},n=>{n.detail instanceof Error&&(n.detail=pK(n.detail)),this._send(new PK(this._workerId,t,void 0,pK(n)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.eventName,e.arg)(n=>{this._send(new pye(this._workerId,t,n))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class vye extends ge{constructor(e,t,i){super();let n=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",c=>{this._protocol.handleMessage(c)},c=>{n==null||n(c)})),this._protocol=new _ye({sendMessage:(c,d)=>{this._worker.postMessage(c,d)},handleMessage:(c,d)=>{if(typeof i[c]!="function")return Promise.reject(new Error("Missing method "+c+" on main thread host."));try{return Promise.resolve(i[c].apply(i,d))}catch(f){return Promise.reject(f)}},handleEvent:(c,d)=>{if(SJ(c)){const f=i[c].call(i,d);if(typeof f!="function")throw new Error(`Missing dynamic event ${c} on main thread host.`);return f}if(yJ(c)){const f=i[c];if(typeof f!="function")throw new Error(`Missing event ${c} on main thread host.`);return f}throw new Error(`Malformed event name ${c}`)}}),this._protocol.setWorkerId(this._worker.getId());let o=null;typeof ss.require<"u"&&typeof ss.require.getConfig=="function"?o=ss.require.getConfig():typeof ss.requirejs<"u"&&(o=ss.requirejs.s.contexts._.config);const r=j8(i);this._onModuleLoaded=this._protocol.sendMessage(hye,[this._worker.getId(),JSON.parse(JSON.stringify(o)),t,r]);const a=(c,d)=>this._request(c,d),l=(c,d)=>this._protocol.listen(c,d);this._lazyProxy=new Promise((c,d)=>{n=d,this._onModuleLoaded.then(f=>{c(bye(f,a,l))},f=>{d(f),this._onError("Worker failed to load "+t,f)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((i,n)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(i,n)},n)})}_onError(e,t){console.error(e),console.info(t)}}function yJ(s){return s[0]==="o"&&s[1]==="n"&&Ku(s.charCodeAt(2))}function SJ(s){return/^onDynamic/.test(s)&&Ku(s.charCodeAt(9))}function bye(s,e,t){const i=r=>function(){const a=Array.prototype.slice.call(arguments,0);return e(r,a)},n=r=>function(a){return t(r,a)},o={};for(const r of s){if(SJ(r)){o[r]=n(r);continue}if(yJ(r)){o[r]=t(r,void 0);continue}o[r]=i(r)}return o}var QP;const FK=(QP=window.trustedTypes)===null||QP===void 0?void 0:QP.createPolicy("defaultWorkerFactory",{createScriptURL:s=>s});function Cye(s){if(ss.MonacoEnvironment){if(typeof ss.MonacoEnvironment.getWorker=="function")return ss.MonacoEnvironment.getWorker("workerMain.js",s);if(typeof ss.MonacoEnvironment.getWorkerUrl=="function"){const e=ss.MonacoEnvironment.getWorkerUrl("workerMain.js",s);return new Worker(FK?FK.createScriptURL(e):e,{name:s})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function wye(s){return typeof s.then=="function"}class yye{constructor(e,t,i,n,o){this.id=t;const r=Cye(i);wye(r)?this.worker=r:this.worker=Promise.resolve(r),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){n(l.data)},a.onmessageerror=o,typeof a.addEventListener=="function"&&a.addEventListener("error",o)})}getId(){return this.id}postMessage(e,t){var i;(i=this.worker)===null||i===void 0||i.then(n=>n.postMessage(e,t))}dispose(){var e;(e=this.worker)===null||e===void 0||e.then(t=>t.terminate()),this.worker=null}}class kN{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,i){const n=++kN.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new yye(e,n,this._label||"anonymous"+n,t,o=>{v3(o),this._webWorkerFailedBeforeError=o,i(o)})}}kN.LAST_WORKER_ID=0;class qf{constructor(e,t,i,n){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=n}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}function _B(s){return EN(s,0)}function EN(s,e){switch(typeof s){case"object":return s===null?Ih(349,e):Array.isArray(s)?Lye(s,e):xye(s,e);case"string":return vB(s,e);case"boolean":return Sye(s,e);case"number":return Ih(s,e);case"undefined":return Ih(937,e);default:return Ih(617,e)}}function Ih(s,e){return(e<<5)-e+s|0}function Sye(s,e){return Ih(s?433:863,e)}function vB(s,e){e=Ih(149417,e);for(let t=0,i=s.length;t<i;t++)e=Ih(s.charCodeAt(t),e);return e}function Lye(s,e){return e=Ih(104579,e),s.reduce((t,i)=>EN(i,t),e)}function xye(s,e){return e=Ih(181387,e),Object.keys(s).sort().reduce((t,i)=>(t=vB(i,t),EN(s[i],t)),e)}function XP(s,e,t=32){const i=t-e,n=~((1<<i)-1);return(s<<e|(n&s)>>>i)>>>0}function BK(s,e=0,t=s.byteLength,i=0){for(let n=0;n<t;n++)s[e+n]=i}function Dye(s,e,t="0"){for(;s.length<e;)s=t+s;return s}function rw(s,e=32){return s instanceof ArrayBuffer?Array.from(new Uint8Array(s)).map(t=>t.toString(16).padStart(2,"0")).join(""):Dye((s>>>0).toString(16),e/4)}class TN{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let n=this._buffLen,o=this._leftoverHighSurrogate,r,a;for(o!==0?(r=o,a=-1,o=0):(r=e.charCodeAt(0),a=0);;){let l=r;if(Ms(r))if(a+1<t){const c=e.charCodeAt(a+1);Bm(c)?(a++,l=iB(r,c)):l=65533}else{o=r;break}else Bm(r)&&(l=65533);if(n=this._push(i,n,l),a++,a<t)r=e.charCodeAt(a);else break}this._buffLen=n,this._leftoverHighSurrogate=o}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),rw(this._h0)+rw(this._h1)+rw(this._h2)+rw(this._h3)+rw(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,BK(this._buff,this._buffLen),this._buffLen>56&&(this._step(),BK(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=TN._bigBlock32,t=this._buffDV;for(let f=0;f<64;f+=4)e.setUint32(f,t.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)e.setUint32(f,XP(e.getUint32(f-12,!1)^e.getUint32(f-32,!1)^e.getUint32(f-56,!1)^e.getUint32(f-64,!1),1),!1);let i=this._h0,n=this._h1,o=this._h2,r=this._h3,a=this._h4,l,c,d;for(let f=0;f<80;f++)f<20?(l=n&o|~n&r,c=1518500249):f<40?(l=n^o^r,c=1859775393):f<60?(l=n&o|n&r|o&r,c=2400959708):(l=n^o^r,c=3395469782),d=XP(i,5)+l+a+c+e.getUint32(f*4,!1)&4294967295,a=r,r=o,o=XP(n,30),n=i,i=d;this._h0=this._h0+i&4294967295,this._h1=this._h1+n&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+r&4294967295,this._h4=this._h4+a&4294967295}}TN._bigBlock32=new DataView(new ArrayBuffer(320));class VK{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,n=e.length;i<n;i++)t[i]=e.charCodeAt(i);return t}}function kye(s,e,t){return new Qu(new VK(s),new VK(e)).ComputeDiff(t).changes}class Bv{static Assert(e,t){if(!e)throw new Error(t)}}class Vv{static Copy(e,t,i,n,o){for(let r=0;r<o;r++)i[n+r]=e[t+r]}static Copy2(e,t,i,n,o){for(let r=0;r<o;r++)i[n+r]=e[t+r]}}class WK{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new qf(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Qu{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[n,o,r]=Qu._getElements(e),[a,l,c]=Qu._getElements(t);this._hasStrings=r&&c,this._originalStringElements=n,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Qu._isStringArray(t)){const i=new Int32Array(t.length);for(let n=0,o=t.length;n<o;n++)i[n]=vB(t[n],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=Qu._getStrictElement(this._originalSequence,e),n=Qu._getStrictElement(this._modifiedSequence,t);return i===n}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,n,o){const r=[!1];let a=this.ComputeDiffRecursive(e,t,i,n,r);return o&&(a=this.PrettifyChanges(a)),{quitEarly:r[0],changes:a}}ComputeDiffRecursive(e,t,i,n,o){for(o[0]=!1;e<=t&&i<=n&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&n>=i&&this.ElementsAreEqual(t,n);)t--,n--;if(e>t||i>n){let f;return i<=n?(Bv.Assert(e===t+1,"originalStart should only be one more than originalEnd"),f=[new qf(e,0,i,n-i+1)]):e<=t?(Bv.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),f=[new qf(e,t-e+1,i,0)]):(Bv.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Bv.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}const r=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,n,r,a,o),c=r[0],d=a[0];if(l!==null)return l;if(!o[0]){const f=this.ComputeDiffRecursive(e,c,i,d,o);let g=[];return o[0]?g=[new qf(c+1,t-(c+1)+1,d+1,n-(d+1)+1)]:g=this.ComputeDiffRecursive(c+1,t,d+1,n,o),this.ConcatenateChanges(f,g)}return[new qf(e,t-e+1,i,n-i+1)]}WALKTRACE(e,t,i,n,o,r,a,l,c,d,f,g,m,_,C,S,x,L){let k=null,T=null,A=new WK,O=t,I=i,R=m[0]-S[0]-n,B=-1073741824,z=this.m_forwardHistory.length-1;do{const q=R+e;q===O||q<I&&c[q-1]<c[q+1]?(f=c[q+1],_=f-R-n,f<B&&A.MarkNextChange(),B=f,A.AddModifiedElement(f+1,_),R=q+1-e):(f=c[q-1]+1,_=f-R-n,f<B&&A.MarkNextChange(),B=f-1,A.AddOriginalElement(f,_+1),R=q-1-e),z>=0&&(c=this.m_forwardHistory[z],e=c[0],O=1,I=c.length-1)}while(--z>=-1);if(k=A.getReverseChanges(),L[0]){let q=m[0]+1,te=S[0]+1;if(k!==null&&k.length>0){const U=k[k.length-1];q=Math.max(q,U.getOriginalEnd()),te=Math.max(te,U.getModifiedEnd())}T=[new qf(q,g-q+1,te,C-te+1)]}else{A=new WK,O=r,I=a,R=m[0]-S[0]-l,B=1073741824,z=x?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const q=R+o;q===O||q<I&&d[q-1]>=d[q+1]?(f=d[q+1]-1,_=f-R-l,f>B&&A.MarkNextChange(),B=f+1,A.AddOriginalElement(f+1,_+1),R=q+1-o):(f=d[q-1],_=f-R-l,f>B&&A.MarkNextChange(),B=f,A.AddModifiedElement(f+1,_+1),R=q-1-o),z>=0&&(d=this.m_reverseHistory[z],o=d[0],O=1,I=d.length-1)}while(--z>=-1);T=A.getChanges()}return this.ConcatenateChanges(k,T)}ComputeRecursionPoint(e,t,i,n,o,r,a){let l=0,c=0,d=0,f=0,g=0,m=0;e--,i--,o[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const _=t-e+(n-i),C=_+1,S=new Int32Array(C),x=new Int32Array(C),L=n-i,k=t-e,T=e-i,A=t-n,I=(k-L)%2===0;S[L]=e,x[k]=t,a[0]=!1;for(let R=1;R<=_/2+1;R++){let B=0,z=0;d=this.ClipDiagonalBound(L-R,R,L,C),f=this.ClipDiagonalBound(L+R,R,L,C);for(let te=d;te<=f;te+=2){te===d||te<f&&S[te-1]<S[te+1]?l=S[te+1]:l=S[te-1]+1,c=l-(te-L)-T;const U=l;for(;l<t&&c<n&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(S[te]=l,l+c>B+z&&(B=l,z=c),!I&&Math.abs(te-k)<=R-1&&l>=x[te])return o[0]=l,r[0]=c,U<=x[te]&&1447>0&&R<=1447+1?this.WALKTRACE(L,d,f,T,k,g,m,A,S,x,l,t,o,c,n,r,I,a):null}const q=(B-e+(z-i)-R)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(B,q))return a[0]=!0,o[0]=B,r[0]=z,q>0&&1447>0&&R<=1447+1?this.WALKTRACE(L,d,f,T,k,g,m,A,S,x,l,t,o,c,n,r,I,a):(e++,i++,[new qf(e,t-e+1,i,n-i+1)]);g=this.ClipDiagonalBound(k-R,R,k,C),m=this.ClipDiagonalBound(k+R,R,k,C);for(let te=g;te<=m;te+=2){te===g||te<m&&x[te-1]>=x[te+1]?l=x[te+1]-1:l=x[te-1],c=l-(te-k)-A;const U=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(x[te]=l,I&&Math.abs(te-L)<=R&&l<=S[te])return o[0]=l,r[0]=c,U>=S[te]&&1447>0&&R<=1447+1?this.WALKTRACE(L,d,f,T,k,g,m,A,S,x,l,t,o,c,n,r,I,a):null}if(R<=1447){let te=new Int32Array(f-d+2);te[0]=L-d+1,Vv.Copy2(S,d,te,1,f-d+1),this.m_forwardHistory.push(te),te=new Int32Array(m-g+2),te[0]=k-g+1,Vv.Copy2(x,g,te,1,m-g+1),this.m_reverseHistory.push(te)}}return this.WALKTRACE(L,d,f,T,k,g,m,A,S,x,l,t,o,c,n,r,I,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],n=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<n&&i.modifiedStart+i.modifiedLength<o&&(!r||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let n=0,o=0;if(t>0){const f=e[t-1];n=f.originalStart+f.originalLength,o=f.modifiedStart+f.modifiedLength}const r=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let f=1;;f++){const g=i.originalStart-f,m=i.modifiedStart-f;if(g<n||m<o||r&&!this.OriginalElementsAreEqual(g,g+i.originalLength)||a&&!this.ModifiedElementsAreEqual(m,m+i.modifiedLength))break;const C=(g===n&&m===o?5:0)+this._boundaryScore(g,i.originalLength,m,i.modifiedLength);C>c&&(c=C,l=f)}i.originalStart-=l,i.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const n=e[t-1],o=e[t],r=o.originalStart-n.originalStart-n.originalLength,a=n.originalStart,l=o.originalStart+o.originalLength,c=l-a,d=n.modifiedStart,f=o.modifiedStart+o.modifiedLength,g=f-d;if(r<5&&c<20&&g<20){const m=this._findBetterContiguousSequence(a,c,d,g,r);if(m){const[_,C]=m;(_!==n.originalStart+n.originalLength||C!==n.modifiedStart+n.modifiedLength)&&(n.originalLength=_-n.originalStart,n.modifiedLength=C-n.modifiedStart,o.originalStart=_+r,o.modifiedStart=C+r,o.originalLength=l-o.originalStart,o.modifiedLength=f-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,n,o){if(t<o||n<o)return null;const r=e+t-o+1,a=i+n-o+1;let l=0,c=0,d=0;for(let f=e;f<r;f++)for(let g=i;g<a;g++){const m=this._contiguousSequenceScore(f,g,o);m>0&&m>l&&(l=m,c=f,d=g)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,i){let n=0;for(let o=0;o<i;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;n+=this._originalStringElements[e+o].length}return n}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,n){const o=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(i,n)?1:0;return o+r}ConcatenateChanges(e,t){const i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const n=new Array(e.length+t.length-1);return Vv.Copy(e,0,n,0,e.length-1),n[e.length-1]=i[0],Vv.Copy(t,1,n,e.length,t.length-1),n}else{const n=new Array(e.length+t.length);return Vv.Copy(e,0,n,0,e.length),Vv.Copy(t,0,n,e.length,t.length),n}}ChangesOverlap(e,t,i){if(Bv.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Bv.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const n=e.originalStart;let o=e.originalLength;const r=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new qf(n,o,r,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,n){if(e>=0&&e<n)return e;const o=i,r=n-i-1,a=t%2===0;if(e<0){const l=o%2===0;return a===l?0:1}else{const l=r%2===0;return a===l?n-1:n-2}}}const Eye=3;function LJ(s,e,t,i){return new Qu(s,e,t).ComputeDiff(i)}class HK{constructor(e){const t=[],i=[];for(let n=0,o=e.length;n<o;n++)t[n]=b3(e[n],1),i[n]=C3(e[n],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const n=[],o=[],r=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],d=e?this._startColumns[l]:1,f=e?this._endColumns[l]:c.length+1;for(let g=d;g<f;g++)n[a]=c.charCodeAt(g-1),o[a]=l+1,r[a]=g,a++;!e&&l<i&&(n[a]=10,o[a]=l+1,r[a]=c.length+1,a++)}return new Tye(n,o,r)}}class Tye{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class zy{constructor(e,t,i,n,o,r,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=n,this.modifiedStartLineNumber=o,this.modifiedStartColumn=r,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){const n=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),d=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),f=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new zy(n,o,r,a,l,c,d,f)}}function Iye(s){if(s.length<=1)return s;const e=[s[0]];let t=e[0];for(let i=1,n=s.length;i<n;i++){const o=s[i],r=o.originalStart-(t.originalStart+t.originalLength),a=o.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(r,a)<Eye?(t.originalLength=o.originalStart+o.originalLength-t.originalStart,t.modifiedLength=o.modifiedStart+o.modifiedLength-t.modifiedStart):(e.push(o),t=o)}return e}class sy{constructor(e,t,i,n,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=n,this.charChanges=o}static createFromDiffResult(e,t,i,n,o,r,a){let l,c,d,f,g;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=n.getStartLineNumber(t.modifiedStart)-1,f=0):(d=n.getStartLineNumber(t.modifiedStart),f=n.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){const m=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),_=n.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(m.getElements().length>0&&_.getElements().length>0){let C=LJ(m,_,o,!0).changes;a&&(C=Iye(C)),g=[];for(let S=0,x=C.length;S<x;S++)g.push(zy.createFromDiffChange(C[S],m,_))}}return new sy(l,c,d,f,g)}}class Nye{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new HK(e),this.modified=new HK(t),this.continueLineDiff=zK(i.maxComputationTime),this.continueCharDiff=zK(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=LJ(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(sy.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const n=[];let o=0,r=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,f=c?c.modifiedStart:this.modifiedLines.length;for(;o<d&&r<f;){const g=this.originalLines[o],m=this.modifiedLines[r];if(g!==m){{let _=b3(g,1),C=b3(m,1);for(;_>1&&C>1;){const S=g.charCodeAt(_-2),x=m.charCodeAt(C-2);if(S!==x)break;_--,C--}(_>1||C>1)&&this._pushTrimWhitespaceCharChange(n,o+1,1,_,r+1,1,C)}{let _=C3(g,1),C=C3(m,1);const S=g.length+1,x=m.length+1;for(;_<S&&C<x;){const L=g.charCodeAt(_-1),k=g.charCodeAt(C-1);if(L!==k)break;_++,C++}(_<S||C<x)&&this._pushTrimWhitespaceCharChange(n,o+1,_,S,r+1,C,x)}}o++,r++}c&&(n.push(sy.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=c.originalLength,r+=c.modifiedLength)}return{quitEarly:i,changes:n}}_pushTrimWhitespaceCharChange(e,t,i,n,o,r,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,n,o,r,a))return;let l;this.shouldComputeCharChanges&&(l=[new zy(t,i,t,n,o,r,o,a)]),e.push(new sy(t,t,o,o,l))}_mergeTrimWhitespaceCharChange(e,t,i,n,o,r,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===o?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new zy(t,i,t,n,o,r,o,a)),!0):!1}}function b3(s,e){const t=Lr(s);return t===-1?e:t+1}function C3(s,e){const t=dd(s);return t===-1?e:t+2}function zK(s){if(s===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<s}function IT(s){return s<0?0:s>255?255:s|0}function Wv(s){return s<0?0:s>4294967295?4294967295:s|0}class Rye{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=Wv(e);const i=this.values,n=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(i.length+o),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=Wv(e),t=Wv(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Wv(e),t=Wv(t);const i=this.values,n=this.prefixSum;if(e>=i.length)return!1;const o=i.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Wv(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,n=0,o=0,r=0;for(;t<=i;)if(n=t+(i-t)/2|0,o=this.prefixSum[n],r=o-this.values[n],e<r)i=n-1;else if(e>=o)t=n+1;else break;return new xJ(n,e-r)}}class Aye{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new xJ(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=fN(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const i=this._values[e],n=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=n+i;for(let o=0;o<i;o++)this._indexBySum[n+o]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class xJ{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class Mye{constructor(e,t,i,n){this._uri=e,this._lines=t,this._eol=i,this._versionId=n,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new se(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let n=0;n<t;n++)i[n]=this._lines[n].length+e;this._lineStarts=new Rye(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=md(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const n=new Uint32Array(i.length-1);for(let o=1;o<i.length;o++)this._lines.splice(e.lineNumber+o-1,0,i[o]),n[o-1]=i[o].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,n)}}class iC{constructor(e){const t=IT(e);this._defaultValue=t,this._asciiMap=iC._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);for(let i=0;i<256;i++)t[i]=e;return t}set(e,t){const i=IT(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class vb{constructor(){this._actual=new iC(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}class Oye{constructor(e,t,i){const n=new Uint8Array(e*t);for(let o=0,r=e*t;o<r;o++)n[o]=i;this._data=n,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class Pye{constructor(e){let t=0,i=0;for(let o=0,r=e.length;o<r;o++){const[a,l,c]=e[o];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;const n=new Oye(i,t,0);for(let o=0,r=e.length;o<r;o++){const[a,l,c]=e[o];n.set(a,l,c)}this._states=n,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let JP=null;function Fye(){return JP===null&&(JP=new Pye([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),JP}let aw=null;function Bye(){if(aw===null){aw=new iC(0);const s=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let t=0;t<s.length;t++)aw.set(s.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)aw.set(e.charCodeAt(t),2)}return aw}class NT{static _createLink(e,t,i,n,o){let r=o-1;do{const a=t.charCodeAt(r);if(e.get(a)!==2)break;r--}while(r>n);if(n>0){const a=t.charCodeAt(n-1),l=t.charCodeAt(r);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&r--}return{range:{startLineNumber:i,startColumn:n+1,endLineNumber:i,endColumn:r+2},url:t.substring(n,r+1)}}static computeLinks(e,t=Fye()){const i=Bye(),n=[];for(let o=1,r=e.getLineCount();o<=r;o++){const a=e.getLineContent(o),l=a.length;let c=0,d=0,f=0,g=1,m=!1,_=!1,C=!1,S=!1;for(;c<l;){let x=!1;const L=a.charCodeAt(c);if(g===13){let k;switch(L){case 40:m=!0,k=0;break;case 41:k=m?0:1;break;case 91:C=!0,_=!0,k=0;break;case 93:C=!1,k=_?0:1;break;case 123:S=!0,k=0;break;case 125:k=S?0:1;break;case 39:k=f===39?1:0;break;case 34:k=f===34?1:0;break;case 96:k=f===96?1:0;break;case 42:k=f===42?1:0;break;case 124:k=f===124?1:0;break;case 32:k=C?0:1;break;default:k=i.get(L)}k===1&&(n.push(NT._createLink(i,a,o,d,c)),x=!0)}else if(g===12){let k;L===91?(_=!0,k=0):k=i.get(L),k===1?x=!0:g=13}else g=t.nextState(g,L),g===0&&(x=!0);x&&(g=1,m=!1,_=!1,S=!1,d=c+1,f=L),c++}g===13&&n.push(NT._createLink(i,a,o,d,l))}return n}}function Vye(s){return!s||typeof s.getLineCount!="function"||typeof s.getLineContent!="function"?[]:NT.computeLinks(s)}class w3{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,n,o){if(e&&t){const r=this.doNavigateValueSet(t,o);if(r)return{range:e,value:r}}if(i&&n){const r=this.doNavigateValueSet(n,o);if(r)return{range:i,value:r}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let n=Number(e);const o=parseFloat(e);return!isNaN(n)&&!isNaN(o)&&n===o?n===0&&!t?null:(n=Math.floor(n*i),n+=t?i:-i,String(n/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let n=null;for(let o=0,r=e.length;n===null&&o<r;o++)n=this.valueSetReplace(e[o],t,i);return n}valueSetReplace(e,t,i){let n=e.indexOf(t);return n>=0?(n+=i?1:-1,n<0?n=e.length-1:n%=e.length,e[n]):null}}w3.INSTANCE=new w3;class Wye extends iC{constructor(e){super(0);for(let t=0,i=e.length;t<i;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function Hye(s){const e={};return t=>(e.hasOwnProperty(t)||(e[t]=s(t)),e[t])}const Tl=Hye(s=>new Wye(s)),zye=999;class Gp{constructor(e,t,i,n){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=n}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=Uye(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=XX(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new bwe(t,this.wordSeparators?Tl(this.wordSeparators):null,i?this.searchString:null)}}function Uye(s){if(!s||s.length===0)return!1;for(let e=0,t=s.length;e<t;e++){const i=s.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const n=s.charCodeAt(e);if(n===110||n===114||n===87)return!0}}return!1}function Jp(s,e,t){if(!t)return new By(s,null);const i=[];for(let n=0,o=e.length;n<o;n++)i[n]=e[n];return new By(s,i)}class UK{constructor(e){const t=[];let i=0;for(let n=0,o=e.length;n<o;n++)e.charCodeAt(n)===10&&(t[i++]=n);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,n=t.length-1;if(n===-1||e<=t[0])return 0;for(;i<n;){const o=i+((n-i)/2>>0);t[o]>=e?n=o-1:t[o+1]>=e?(i=o,n=o):i=o+1}return i+1}}class mk{static findMatches(e,t,i,n,o){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,i,new bb(r.wordSeparators,r.regex),n,o):this._doFindMatchesLineByLine(e,i,r,n,o):[]}static _getMultilineMatchRange(e,t,i,n,o,r){let a,l=0;n?(l=n.findLineFeedCountBeforeOffset(o),a=t+o+l):a=t+o;let c;if(n){const m=n.findLineFeedCountBeforeOffset(o+r.length)-l;c=a+r.length+m}else c=a+r.length;const d=e.getPositionAt(a),f=e.getPositionAt(c);return new M(d.lineNumber,d.column,f.lineNumber,f.column)}static _doFindMatchesMultiline(e,t,i,n,o){const r=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new UK(a):null,c=[];let d=0,f;for(i.reset(0);f=i.next(a);)if(c[d++]=Jp(this._getMultilineMatchRange(e,r,a,l,f.index,f[0]),f,n),d>=o)return c;return c}static _doFindMatchesLineByLine(e,t,i,n,o){const r=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,r,n,o),r}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,r,n,o);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<o;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,r,n,o);if(a<o){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,r,n,o)}return r}static _findMatchesInLine(e,t,i,n,o,r,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const g=e.simpleSearch,m=g.length,_=t.length;let C=-m;for(;(C=t.indexOf(g,C+m))!==-1;)if((!c||bB(c,t,_,C,m))&&(r[o++]=new By(new M(i,C+1+n,i,C+1+m+n),null),o>=l))return o;return o}const d=new bb(e.wordSeparators,e.regex);let f;d.reset(0);do if(f=d.next(t),f&&(r[o++]=Jp(new M(i,f.index+1+n,i,f.index+1+f[0].length+n),f,a),o>=l))return o;while(f);return o}static findNextMatch(e,t,i,n){const o=t.parseSearchRequest();if(!o)return null;const r=new bb(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,i,r,n):this._doFindNextMatchLineByLine(e,i,r,n)}static _doFindNextMatchMultiline(e,t,i,n){const o=new se(t.lineNumber,1),r=e.getOffsetAt(o),a=e.getLineCount(),l=e.getValueInRange(new M(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new UK(l):null;i.reset(t.column-1);const d=i.next(l);return d?Jp(this._getMultilineMatchRange(e,r,l,c,d.index,d[0]),d,n):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new se(1,1),i,n):null}static _doFindNextMatchLineByLine(e,t,i,n){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r),l=this._findFirstMatchInLine(i,a,r,t.column,n);if(l)return l;for(let c=1;c<=o;c++){const d=(r+c-1)%o,f=e.getLineContent(d+1),g=this._findFirstMatchInLine(i,f,d+1,1,n);if(g)return g}return null}static _findFirstMatchInLine(e,t,i,n,o){e.reset(n-1);const r=e.next(t);return r?Jp(new M(i,r.index+1,i,r.index+1+r[0].length),r,o):null}static findPreviousMatch(e,t,i,n){const o=t.parseSearchRequest();if(!o)return null;const r=new bb(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,i,r,n):this._doFindPreviousMatchLineByLine(e,i,r,n)}static _doFindPreviousMatchMultiline(e,t,i,n){const o=this._doFindMatchesMultiline(e,new M(1,1,t.lineNumber,t.column),i,n,10*zye);if(o.length>0)return o[o.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new se(r,e.getLineMaxColumn(r)),i,n):null}static _doFindPreviousMatchLineByLine(e,t,i,n){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,r,n);if(l)return l;for(let c=1;c<=o;c++){const d=(o+r-c-1)%o,f=e.getLineContent(d+1),g=this._findLastMatchInLine(i,f,d+1,n);if(g)return g}return null}static _findLastMatchInLine(e,t,i,n){let o=null,r;for(e.reset(0);r=e.next(t);)o=Jp(new M(i,r.index+1,i,r.index+1+r[0].length),r,n);return o}}function $ye(s,e,t,i,n){if(i===0)return!0;const o=e.charCodeAt(i-1);if(s.get(o)!==0||o===13||o===10)return!0;if(n>0){const r=e.charCodeAt(i);if(s.get(r)!==0)return!0}return!1}function jye(s,e,t,i,n){if(i+n===t)return!0;const o=e.charCodeAt(i+n);if(s.get(o)!==0||o===13||o===10)return!0;if(n>0){const r=e.charCodeAt(i+n-1);if(s.get(r)!==0)return!0}return!1}function bB(s,e,t,i,n){return $ye(s,e,t,i,n)&&jye(s,e,t,i,n)}class bb{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const n=i.index,o=i[0].length;if(n===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){kT(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=n,this._prevMatchLength=o,!this._wordSeparators||bB(this._wordSeparators,e,t,n,o))return i}while(i);return null}}class CB{static computeUnicodeHighlights(e,t,i){const n=i?i.startLineNumber:1,o=i?i.endLineNumber:e.getLineCount(),r=new $K(t),a=r.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${Kye(Array.from(a))}`,"g");const c=new bb(null,l),d=[];let f=!1,g,m=0,_=0,C=0;e:for(let S=n,x=o;S<=x;S++){const L=e.getLineContent(S),k=L.length;c.reset(0);do if(g=c.next(L),g){let T=g.index,A=g.index+g[0].length;if(T>0){const B=L.charCodeAt(T-1);Ms(B)&&T--}if(A+1<k){const B=L.charCodeAt(A-1);Ms(B)&&A++}const O=L.substring(T,A),I=Ny(T+1,z8,L,0),R=r.shouldHighlightNonBasicASCII(O,I?I.word:null);if(R!==0){R===3?m++:R===2?_++:R===1?C++:gN();const B=1e3;if(d.length>=B){f=!0;break e}d.push(new M(S,T+1,S,A+1))}}while(g)}return{ranges:d,hasMore:f,ambiguousCharacterCount:m,invisibleCharacterCount:_,nonBasicAsciiCharacterCount:C}}static computeUnicodeHighlightReason(e,t){const i=new $K(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const o=e.codePointAt(0),r=i.ambiguousCharacters.getPrimaryConfusable(o),a=hc.getLocales().filter(l=>!hc.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(o));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function Kye(s,e){return`[${ja(s.map(i=>String.fromCodePoint(i)).join(""))}]`}class $K{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=hc.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of hd.codePoints)jK(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let n=!1,o=!1;if(t)for(const r of t){const a=r.codePointAt(0),l=bN(r);n=n||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!hd.isInvisibleCharacter(a)&&(o=!0)}return!n&&o?0:this.options.invisibleCharacters&&!jK(e)&&hd.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function jK(s){return s===" "||s===`
`||s==="	"}var Hp=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class qye extends Mye{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=Ny(e.column,yX(t),this._lines[e.lineNumber-1],0);return i?new M(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let n=0,o="",r=0,a=[];return{*[Symbol.iterator](){for(;;)if(r<a.length){const l=o.substring(a[r].start,a[r].end);r+=1,yield l}else if(n<t.length)o=t[n],a=i(o,e),r=0,n+=1;else break}}}getLineWords(e,t){const i=this._lines[e-1],n=this._wordenize(i,t),o=[];for(const r of n)o.push({word:i.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return o}_wordenize(e,t){const i=[];let n;for(t.lastIndex=0;(n=t.exec(e))&&n[0].length!==0;)i.push({start:n.index,end:n.index+n[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,n=e.endLineNumber-1,o=[];o.push(this._lines[i].substring(e.startColumn-1));for(let r=i+1;r<n;r++)o.push(this._lines[r]);return o.push(this._lines[n].substring(0,e.endColumn-1)),o.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!se.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,n=!1;if(t<1)t=1,i=1,n=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,n=!0;else{const o=this._lines[t-1].length+1;i<1?(i=1,n=!0):i>o&&(i=o,n=!0)}return n?{lineNumber:t,column:i}:e}}class bg{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new qye(yt.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){!this._models[e]||delete this._models[e]}computeUnicodeHighlights(e,t,i){return Hp(this,void 0,void 0,function*(){const n=this._getModel(e);return n?CB.computeUnicodeHighlights(n,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,i,n){return Hp(this,void 0,void 0,function*(){const o=this._getModel(e),r=this._getModel(t);return!o||!r?null:bg.computeDiff(o,r,i,n)})}static computeDiff(e,t,i,n){const o=e.getLinesContent(),r=t.getLinesContent(),l=new Nye(o,r,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:i,shouldMakePrettyDiff:!0,maxComputationTime:n}).computeDiff(),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);return{quitEarly:l.quitEarly,identical:c,changes:l.changes}}static _modelsAreIdentical(e,t){const i=e.getLineCount(),n=t.getLineCount();if(i!==n)return!1;for(let o=1;o<=i;o++){const r=e.getLineContent(o),a=t.getLineContent(o);if(r!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return Hp(this,void 0,void 0,function*(){const i=this._getModel(e);if(!i)return t;const n=[];let o;t=t.slice(0).sort((r,a)=>{if(r.range&&a.range)return M.compareRangesUsingStarts(r.range,a.range);const l=r.range?0:1,c=a.range?0:1;return l-c});for(let{range:r,text:a,eol:l}of t){if(typeof l=="number"&&(o=l),M.isEmpty(r)&&!a)continue;const c=i.getValueInRange(r);if(a=a.replace(/\r\n|\n|\r/g,i.eol),c===a)continue;if(Math.max(a.length,c.length)>bg._diffLimit){n.push({range:r,text:a});continue}const d=kye(c,a,!1),f=i.offsetAt(M.lift(r).getStartPosition());for(const g of d){const m=i.positionAt(f+g.originalStart),_=i.positionAt(f+g.originalStart+g.originalLength),C={text:a.substr(g.modifiedStart,g.modifiedLength),range:{startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:_.lineNumber,endColumn:_.column}};i.getValueInRange(C.range)!==C.text&&n.push(C)}}return typeof o=="number"&&n.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),n})}computeLinks(e){return Hp(this,void 0,void 0,function*(){const t=this._getModel(e);return t?Vye(t):null})}textualSuggest(e,t,i,n){return Hp(this,void 0,void 0,function*(){const o=new qr(!0),r=new RegExp(i,n),a=new Set;e:for(const l of e){const c=this._getModel(l);if(!!c){for(const d of c.words(r))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>bg._suggestionsLimit))break e}}return{words:Array.from(a),duration:o.elapsed()}})}computeWordRanges(e,t,i,n){return Hp(this,void 0,void 0,function*(){const o=this._getModel(e);if(!o)return Object.create(null);const r=new RegExp(i,n),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=o.getLineWords(l,r);for(const d of c){if(!isNaN(Number(d.word)))continue;let f=a[d.word];f||(f=[],a[d.word]=f),f.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a})}navigateValueSet(e,t,i,n,o){return Hp(this,void 0,void 0,function*(){const r=this._getModel(e);if(!r)return null;const a=new RegExp(n,o);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=r.getValueInRange(t),c=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const d=r.getValueInRange(c);return w3.INSTANCE.navigateValueSet(t,l,c,d,i)})}loadForeignModule(e,t,i){const r={host:yCe(i,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(r,t),Promise.resolve(j8(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}bg._diffLimit=1e5;bg._suggestionsLimit=1e4;typeof importScripts=="function"&&(ss.monaco=GX());const wB=bi("textResourceConfigurationService"),DJ=bi("textResourcePropertiesService"),fc=bi("logService");var Zc;(function(s){s[s.Trace=0]="Trace",s[s.Debug=1]="Debug",s[s.Info=2]="Info",s[s.Warning=3]="Warning",s[s.Error=4]="Error",s[s.Critical=5]="Critical",s[s.Off=6]="Off"})(Zc||(Zc={}));const kJ=Zc.Info;class Gye extends ge{constructor(){super(...arguments),this.level=kJ,this._onDidChangeLogLevel=this._register(new J)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class Yye extends Gye{constructor(e=kJ){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=Zc.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=Zc.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=Zc.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=Zc.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class Zye extends ge{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}const ct=bi("ILanguageFeaturesService");var Qye=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},lw=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},y3=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const KK=60*1e3,qK=5*60*1e3;function em(s,e){const t=s.getModel(e);return!(!t||t.isTooLargeForSyncing())}let S3=class extends ge{constructor(e,t,i,n,o){super(),this._modelService=e,this._workerManager=this._register(new Jye(this._modelService,n)),this._logService=i,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(r,a)=>em(this._modelService,r.uri)?this._workerManager.withWorker().then(l=>l.computeLinks(r.uri)).then(l=>l&&{links:l}):Promise.resolve({links:[]})})),this._register(o.completionProvider.register("*",new Xye(this._workerManager,t,this._modelService,n)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return em(this._modelService,e)}computedUnicodeHighlights(e,t,i){return this._workerManager.withWorker().then(n=>n.computedUnicodeHighlights(e,t,i))}computeDiff(e,t,i,n){return this._workerManager.withWorker().then(o=>o.computeDiff(e,t,i,n))}computeMoreMinimalEdits(e,t){if(Po(t)){if(!em(this._modelService,e))return Promise.resolve(t);const i=qr.create(!0),n=this._workerManager.withWorker().then(o=>o.computeMoreMinimalEdits(e,t));return n.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),i.elapsed())),Promise.race([n,Ag(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return em(this._modelService,e)}navigateValueSet(e,t,i){return this._workerManager.withWorker().then(n=>n.navigateValueSet(e,t,i))}canComputeWordRanges(e){return em(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(i=>i.computeWordRanges(e,t))}};S3=Qye([lw(0,Hn),lw(1,wB),lw(2,fc),lw(3,os),lw(4,ct)],S3);class Xye{constructor(e,t,i,n){this.languageConfigurationService=n,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}provideCompletionItems(e,t){return y3(this,void 0,void 0,function*(){const i=this._configurationService.getValue(e.uri,t,"editor");if(!i.wordBasedSuggestions)return;const n=[];if(i.wordBasedSuggestionsMode==="currentDocument")em(this._modelService,e.uri)&&n.push(e.uri);else for(const f of this._modelService.getModels())!em(this._modelService,f.uri)||(f===e?n.unshift(f.uri):(i.wordBasedSuggestionsMode==="allDocuments"||f.getLanguageId()===e.getLanguageId())&&n.push(f.uri));if(n.length===0)return;const o=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),a=r?new M(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):M.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=yield(yield this._workerManager.withWorker()).textualSuggest(n,r==null?void 0:r.word,o);if(!!d)return{duration:d.duration,suggestions:d.words.map(f=>({kind:18,label:f,insertText:f,range:{insert:l,replace:a}}))}})}}class Jye extends ge{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new cL).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(qK/2)),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>qK&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new EJ(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class eSe extends ge{constructor(e,t,i){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const n=new cL;n.cancelAndSet(()=>this._checkStopModelSync(),Math.round(KK/2)),this._register(n)}}dispose(){for(const e in this._syncedModels)Ni(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const i of e){const n=i.toString();this._syncedModels[n]||this._beginModelSync(i,t),this._syncedModels[n]&&(this._syncedModelsLastUsedTime[n]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>KK&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;const n=e.toString();this._proxy.acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const o=new Ae;o.add(i.onDidChangeContent(r=>{this._proxy.acceptModelChanged(n.toString(),r)})),o.add(i.onWillDispose(()=>{this._stopModelSync(n)})),o.add(ni(()=>{this._proxy.acceptRemovedModel(n)})),this._syncedModels[n]=o}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],Ni(t)}}class GK{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class e4{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class EJ extends ge{constructor(e,t,i,n){super(),this.languageConfigurationService=n,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new kN(i),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new vye(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new e4(this)))}catch(e){v3(e),this._worker=new GK(new bg(new e4(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(v3(e),this._worker=new GK(new bg(new e4(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new eSe(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return y3(this,void 0,void 0,function*(){return this._disposed?Promise.reject(FX()):this._getProxy().then(i=>(this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i))})}computedUnicodeHighlights(e,t,i){return this._withSyncedResources([e]).then(n=>n.computeUnicodeHighlights(e.toString(),t,i))}computeDiff(e,t,i,n){return this._withSyncedResources([e,t],!0).then(o=>o.computeDiff(e.toString(),t.toString(),i,n))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(i=>i.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,i){return y3(this,void 0,void 0,function*(){const n=yield this._withSyncedResources(e),o=i.source,r=zP(i);return n.textualSuggest(e.map(a=>a.toString()),t,o,r)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(i=>{const n=this._modelService.getModel(e);if(!n)return Promise.resolve(null);const o=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),r=o.source,a=zP(o);return i.computeWordRanges(e.toString(),t,r,a)})}navigateValueSet(e,t,i){return this._withSyncedResources([e]).then(n=>{const o=this._modelService.getModel(e);if(!o)return null;const r=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId()).getWordDefinition(),a=r.source,l=zP(r);return n.navigateValueSet(e.toString(),t,i,a,l)})}dispose(){super.dispose(),this._disposed=!0}}function tSe(s,e,t){return new iSe(s,e,t)}class iSe extends EJ{constructor(e,t,i){super(e,i.keepIdleModels||!1,i.label,t),this._foreignModuleId=i.moduleId,this._foreignModuleCreateData=i.createData||null,this._foreignModuleHost=i.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?j8(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;const n=(a,l)=>e.fmr(a,l),o=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},r={};for(const a of i)r[a]=o(a,n);return r})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}class fo{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let i="mtk"+this.getForeground(e);const n=this.getFontStyle(e);return n&1&&(i+=" mtki"),n&2&&(i+=" mtkb"),n&4&&(i+=" mtku"),n&8&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),n=this.getFontStyle(e);let o=`color: ${t[i]};`;n&1&&(o+="font-style: italic;"),n&2&&(o+="font-weight: bold;");let r="";return n&4&&(r+=" underline"),n&8&&(r+=" line-through"),r&&(o+=`text-decoration:${r};`),o}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:Boolean(i&1),bold:Boolean(i&2),underline:Boolean(i&4),strikethrough:Boolean(i&8)}}}class Os{constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=i}static createEmpty(e,t){const i=Os.defaultTokenMetadata,n=new Uint32Array(2);return n[0]=e.length,n[1]=i,new Os(n,e,t)}equals(e){return e instanceof Os?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const n=t<<1,o=n+(i<<1);for(let r=n;r<o;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=fo.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return fo.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return fo.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return fo.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return fo.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return fo.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Os.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new yB(this,e,t,i)}static convertToEndOffset(e,t){const n=(e.length>>>1)-1;for(let o=0;o<n;o++)e[o<<1]=e[o+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,n=(e.length>>>1)-1;for(;i<n;){const o=i+Math.floor((n-i)/2),r=e[o<<1];if(r===t)return o+1;r<t?i=o+1:r>t&&(n=o)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,n="";const o=new Array;let r=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){n+=this._text.substring(r,a);const c=this._tokens[(t<<1)+1];o.push(n.length,c),t++,r=a}else if(l){if(l.offset>r){n+=this._text.substring(r,l.offset);const c=this._tokens[(t<<1)+1];o.push(n.length,c),r=l.offset}n+=l.text,o.push(n.length,l.tokenMetadata),i++}else break}return new Os(new Uint32Array(o),n,this._languageIdCodec)}}Os.defaultTokenMetadata=(0<<11|1<<15|2<<24)>>>0;class yB{constructor(e,t,i,n){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=n,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let o=this._firstTokenIndex,r=e.getCount();o<r&&!(e.getStartOffset(o)>=i);o++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof yB?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class pa{constructor(e,t,i,n){this.startColumn=e,this.endColumn=t,this.className=i,this.type=n,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,n=t.length;if(i!==n)return!1;for(let o=0;o<i;o++)if(!pa._equals(e[o],t[o]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const n=t+1,o=i+1,r=i-t,a=[];let l=0;for(const c of e)c.endColumn<=n||c.startColumn>=o||(a[l++]=new pa(Math.max(1,c.startColumn-n+1),Math.min(r+1,c.endColumn-n+1),c.className,c.type));return a}static filter(e,t,i,n){if(e.length===0)return[];const o=[];let r=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;const f=d.startLineNumber===t?d.startColumn:i,g=d.endLineNumber===t?d.endColumn:n;o[r++]=new pa(f,g,c.inlineClassName,c.type)}return o}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=pa._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class YK{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=n}}class RT{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,n=e.length;i<n;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let n=0;for(;n+1<this.count&&this.stopOffsets[n]===this.stopOffsets[n+1];)n++;i.push(new YK(t,this.stopOffsets[n],this.classNames.join(" "),RT._metadata(this.metadata))),t=this.stopOffsets[n]+1,this.stopOffsets.splice(0,n+1),this.classNames.splice(0,n+1),this.metadata.splice(0,n+1),this.count-=n+1}return this.count>0&&t<e&&(i.push(new YK(t,e-1,this.classNames.join(" "),RT._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let n=0;n<this.count;n++)if(this.stopOffsets[n]>=e){this.stopOffsets.splice(n,0,e),this.classNames.splice(n,0,t),this.metadata.splice(n,0,i);break}this.count++}}class nSe{static normalize(e,t){if(t.length===0)return[];const i=[],n=new RT;let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];let c=l.startColumn,d=l.endColumn;const f=l.className,g=l.type===1?2:l.type===2?4:0;if(c>1){const C=e.charCodeAt(c-2);Ms(C)&&c--}if(d>1){const C=e.charCodeAt(d-2);Ms(C)&&d--}const m=c-1,_=d-2;o=n.consumeLowerThan(m,o,i),n.count===0&&(o=m),n.insert(_,f,g)}return n.consumeLowerThan(1073741824,o,i),i}}class js{constructor(e,t,i,n){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=n,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class sSe{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class ep{constructor(e,t,i,n,o,r,a,l,c,d,f,g,m,_,C,S,x,L,k){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=n,this.isBasicASCII=o,this.containsRTL=r,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(pa.compare),this.tabSize=d,this.startVisibleColumn=f,this.spaceWidth=g,this.stopRenderingLineAfter=C,this.renderWhitespace=S==="all"?4:S==="boundary"?1:S==="selection"?2:S==="trailing"?3:0,this.renderControlCharacters=x,this.fontLigatures=L,this.selectionsOnLine=k&&k.sort((O,I)=>O.startOffset<I.startOffset?-1:1);const T=Math.abs(_-g),A=Math.abs(m-g);T<A?(this.renderSpaceWidth=_,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=m,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&pa.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class SB{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Gu{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,i,n){const o=(t<<16|i<<0)>>>0;this._data[e-1]=o,this._horizontalOffset[e-1]=n}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=Gu.getPartIndex(t),n=Gu.getCharIndex(t);return new SB(i,n)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;const n=(e<<16|i<<0)>>>0;let o=0,r=this.length-1;for(;o+1<r;){const C=o+r>>>1,S=this._data[C];if(S===n)return C;S>n?r=C:o=C}if(o===r)return o;const a=this._data[o],l=this._data[r];if(a===n)return o;if(l===n)return r;const c=Gu.getPartIndex(a),d=Gu.getCharIndex(a),f=Gu.getPartIndex(l);let g;c!==f?g=t:g=Gu.getCharIndex(l);const m=i-d,_=g-i;return m<=_?o:r}}class L3{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function uL(s,e){if(s.lineContent.length===0){if(s.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,i=0,n=0;for(const r of s.lineDecorations)(r.type===1||r.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(r.className),e.appendASCIIString('"></span>'),r.type===1&&(n|=1,t++),r.type===2&&(n|=2,i++));e.appendASCIIString("</span>");const o=new Gu(1,t+i);return o.setColumnInfo(1,t,0,0),new L3(o,!1,n)}return e.appendASCIIString("<span><span></span></span>"),new L3(new Gu(0,0),!1,0)}return fSe(aSe(s),e)}class oSe{constructor(e,t,i,n){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=n}}function IN(s){const e=Rg(1e4),t=uL(s,e);return new oSe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class rSe{constructor(e,t,i,n,o,r,a,l,c,d,f,g,m,_,C){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=n,this.isOverflowing=o,this.parts=r,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=c,this.startVisibleColumn=d,this.containsRTL=f,this.spaceWidth=g,this.renderSpaceCharCode=m,this.renderWhitespace=_,this.renderControlCharacters=C}}function aSe(s){const e=s.lineContent;let t,i;s.stopRenderingLineAfter!==-1&&s.stopRenderingLineAfter<e.length?(t=!0,i=s.stopRenderingLineAfter):(t=!1,i=e.length);let n=lSe(e,s.containsRTL,s.lineTokens,s.fauxIndentLength,i);s.renderControlCharacters&&!s.isBasicASCII&&(n=uSe(e,n)),(s.renderWhitespace===4||s.renderWhitespace===1||s.renderWhitespace===2&&!!s.selectionsOnLine||s.renderWhitespace===3)&&(n=dSe(s,e,i,n));let o=0;if(s.lineDecorations.length>0){for(let r=0,a=s.lineDecorations.length;r<a;r++){const l=s.lineDecorations[r];l.type===3||l.type===1?o|=1:l.type===2&&(o|=2)}n=hSe(e,i,n,s.lineDecorations)}return s.containsRTL||(n=cSe(e,n,!s.isBasicASCII||s.fontLigatures)),new rSe(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,e,i,t,n,o,s.fauxIndentLength,s.tabSize,s.startVisibleColumn,s.containsRTL,s.spaceWidth,s.renderSpaceCharCode,s.renderWhitespace,s.renderControlCharacters)}function lSe(s,e,t,i,n){const o=[];let r=0;i>0&&(o[r++]=new js(i,"",0,!1));let a=i;for(let l=0,c=t.getCount();l<c;l++){const d=t.getEndOffset(l);if(d<=i)continue;const f=t.getClassName(l);if(d>=n){const m=e?h0(s.substring(a,n)):!1;o[r++]=new js(n,f,0,m);break}const g=e?h0(s.substring(a,d)):!1;o[r++]=new js(d,f,0,g),a=d}return o}function cSe(s,e,t){let i=0;const n=[];let o=0;if(t)for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex;if(i+50<c){const d=l.type,f=l.metadata,g=l.containsRTL;let m=-1,_=i;for(let C=i;C<c;C++)s.charCodeAt(C)===32&&(m=C),m!==-1&&C-_>=50&&(n[o++]=new js(m+1,d,f,g),_=m+1,m=-1);_!==c&&(n[o++]=new js(c,d,f,g))}else n[o++]=l;i=c}else for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex,d=c-i;if(d>50){const f=l.type,g=l.metadata,m=l.containsRTL,_=Math.ceil(d/50);for(let C=1;C<_;C++){const S=i+C*50;n[o++]=new js(S,f,g,m)}n[o++]=new js(c,f,g,m)}else n[o++]=l;i=c}return n}function TJ(s){return s<32?s!==9:s===127||s>=8234&&s<=8238||s>=8294&&s<=8297||s>=8206&&s<=8207||s===1564}function uSe(s,e){const t=[];let i=new js(0,"",0,!1),n=0;for(const o of e){const r=o.endIndex;for(;n<r;n++){const a=s.charCodeAt(n);TJ(a)&&(n>i.endIndex&&(i=new js(n,o.type,o.metadata,o.containsRTL),t.push(i)),i=new js(n+1,"mtkcontrol",o.metadata,!1),t.push(i))}n>i.endIndex&&(i=new js(r,o.type,o.metadata,o.containsRTL),t.push(i))}return t}function dSe(s,e,t,i){const n=s.continuesWithWrappedLine,o=s.fauxIndentLength,r=s.tabSize,a=s.startVisibleColumn,l=s.useMonospaceOptimizations,c=s.selectionsOnLine,d=s.renderWhitespace===1,f=s.renderWhitespace===3,g=s.renderSpaceWidth!==s.spaceWidth,m=[];let _=0,C=0,S=i[C].type,x=i[C].containsRTL,L=i[C].endIndex;const k=i.length;let T=!1,A=Lr(e),O;A===-1?(T=!0,A=t,O=t):O=dd(e);let I=!1,R=0,B=c&&c[R],z=a%r;for(let te=o;te<t;te++){const U=e.charCodeAt(te);B&&te>=B.endOffset&&(R++,B=c&&c[R]);let X;if(te<A||te>O)X=!0;else if(U===9)X=!0;else if(U===32)if(d)if(I)X=!0;else{const le=te+1<t?e.charCodeAt(te+1):0;X=le===32||le===9}else X=!0;else X=!1;if(X&&c&&(X=!!B&&B.startOffset<=te&&B.endOffset>te),X&&f&&(X=T||te>O),X&&x&&te>=A&&te<=O&&(X=!1),I){if(!X||!l&&z>=r){if(g){const le=_>0?m[_-1].endIndex:o;for(let be=le+1;be<=te;be++)m[_++]=new js(be,"mtkw",1,!1)}else m[_++]=new js(te,"mtkw",1,!1);z=z%r}}else(te===L||X&&te>o)&&(m[_++]=new js(te,S,0,x),z=z%r);for(U===9?z=r:Ng(U)?z+=2:z++,I=X;te===L&&(C++,C<k);)S=i[C].type,x=i[C].containsRTL,L=i[C].endIndex}let q=!1;if(I)if(n&&d){const te=t>0?e.charCodeAt(t-1):0,U=t>1?e.charCodeAt(t-2):0;te===32&&U!==32&&U!==9||(q=!0)}else q=!0;if(q)if(g){const te=_>0?m[_-1].endIndex:o;for(let U=te+1;U<=t;U++)m[_++]=new js(U,"mtkw",1,!1)}else m[_++]=new js(t,"mtkw",1,!1);else m[_++]=new js(t,S,0,x);return m}function hSe(s,e,t,i){i.sort(pa.compare);const n=nSe.normalize(s,i),o=n.length;let r=0;const a=[];let l=0,c=0;for(let f=0,g=t.length;f<g;f++){const m=t[f],_=m.endIndex,C=m.type,S=m.metadata,x=m.containsRTL;for(;r<o&&n[r].startOffset<_;){const L=n[r];if(L.startOffset>c&&(c=L.startOffset,a[l++]=new js(c,C,S,x)),L.endOffset+1<=_)c=L.endOffset+1,a[l++]=new js(c,C+" "+L.className,S|L.metadata,x),r++;else{c=_,a[l++]=new js(c,C+" "+L.className,S|L.metadata,x);break}}_>c&&(c=_,a[l++]=new js(c,C,S,x))}const d=t[t.length-1].endIndex;if(r<o&&n[r].startOffset===d)for(;r<o&&n[r].startOffset===d;){const f=n[r];a[l++]=new js(c,f.className,f.metadata,!1),r++}return a}function fSe(s,e){const t=s.fontIsMonospace,i=s.canUseHalfwidthRightwardsArrow,n=s.containsForeignElements,o=s.lineContent,r=s.len,a=s.isOverflowing,l=s.parts,c=s.fauxIndentLength,d=s.tabSize,f=s.startVisibleColumn,g=s.containsRTL,m=s.spaceWidth,_=s.renderSpaceCharCode,C=s.renderWhitespace,S=s.renderControlCharacters,x=new Gu(r+1,l.length);let L=!1,k=0,T=f,A=0,O=0,I=0;g?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let R=0,B=l.length;R<B;R++){const z=l[R],q=z.endIndex,te=z.type,U=z.containsRTL,X=C!==0&&z.isWhitespace(),le=X&&!t&&(te==="mtkw"||!n),be=k===q&&z.isPseudoAfter();if(A=0,e.appendASCIIString("<span "),U&&e.appendASCIIString('style="unicode-bidi:isolate" '),e.appendASCIIString('class="'),e.appendASCIIString(le?"mtkz":te),e.appendASCII(34),X){let pe=0;{let ke=k,He=T;for(;ke<q;ke++){const Ue=(o.charCodeAt(ke)===9?d-He%d:1)|0;pe+=Ue,ke>=c&&(He+=Ue)}}for(le&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(m*pe)),e.appendASCIIString('px"')),e.appendASCII(62);k<q;k++){x.setColumnInfo(k+1,R-I,A,O),I=0;const ke=o.charCodeAt(k);let He,Ge;if(ke===9){He=d-T%d|0,Ge=He,!i||Ge>1?e.write1(8594):e.write1(65515);for(let Ue=2;Ue<=Ge;Ue++)e.write1(160)}else He=2,Ge=1,e.write1(_),e.write1(8204);A+=He,O+=Ge,k>=c&&(T+=Ge)}}else for(e.appendASCII(62);k<q;k++){x.setColumnInfo(k+1,R-I,A,O),I=0;const pe=o.charCodeAt(k);let ke=1,He=1;switch(pe){case 9:ke=d-T%d,He=ke;for(let Ge=1;Ge<=ke;Ge++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:S?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:Ng(pe)&&He++,S&&pe<32?e.write1(9216+pe):S&&pe===127?e.write1(9249):S&&TJ(pe)?(e.appendASCIIString("[U+"),e.appendASCIIString(gSe(pe)),e.appendASCIIString("]"),ke=8,He=ke):e.write1(pe)}A+=ke,O+=He,k>=c&&(T+=He)}be?I++:I=0,k>=r&&!L&&z.isPseudoAfter()&&(L=!0,x.setColumnInfo(k+1,R,A,O)),e.appendASCIIString("</span>")}return L||x.setColumnInfo(r+1,l.length-1,A,O),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new L3(x,g,n)}function gSe(s){return s.toString(16).toUpperCase().padStart(4,"0")}class ZK{constructor(e,t,i,n){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=n|0}}class pSe{constructor(e,t){this.tabSize=e,this.data=t}}class LB{constructor(e,t,i,n,o,r,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=n,this.startVisibleColumn=o,this.tokens=r,this.inlineDecorations=a}}class qa{constructor(e,t,i,n,o,r,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=n,this.isBasicASCII=qa.isBasicASCII(i,r),this.containsRTL=qa.containsRTL(i,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?bN(e):!0}static containsRTL(e,t,i){return!t&&i?h0(e):!1}}class oy{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class mSe{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=n}toInlineDecoration(e){return new oy(new M(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class IJ{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class NJ{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}function _Se(s){return Array.isArray(s)}function vSe(s){return!_Se(s)}function RJ(s){return typeof s=="string"}function QK(s){return!RJ(s)}function ab(s){return!s}function Cg(s,e){return s.ignoreCase&&e?e.toLowerCase():e}function XK(s){return s.replace(/[&<>'"_]/g,"-")}function bSe(s,e){console.log(`${s.languageId}: ${e}`)}function mn(s,e){return new Error(`${s.languageId}: ${e}`)}function Jf(s,e,t,i,n){const o=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let r=null;return e.replace(o,function(a,l,c,d,f,g,m,_,C){return ab(c)?ab(d)?!ab(f)&&f<i.length?Cg(s,i[f]):!ab(m)&&s&&typeof s[m]=="string"?s[m]:(r===null&&(r=n.split("."),r.unshift(n)),!ab(g)&&g<r.length?Cg(s,r[g]):""):Cg(s,t):"$"})}function _k(s,e){let t=e;for(;t&&t.length>0;){const i=s.tokenizer[t];if(i)return i;const n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return null}function CSe(s,e){let t=e;for(;t&&t.length>0;){if(s.stateNames[t])return!0;const n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return!1}var wSe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ySe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const AJ=5;class Uy{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Ub(e,t);let i=Ub.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let n=this._entries[i];return n||(n=new Ub(e,t),this._entries[i]=n,n)}}Uy._INSTANCE=new Uy(AJ);class Ub{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Ub._equals(this,e)}push(e){return Uy.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Uy.create(this.parent,e)}}class Cb{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new Cb(this.languageId,this.state)}}class eg{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new ry(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new ry(e,t);const i=Ub.getStackElementId(e);let n=this._entries[i];return n||(n=new ry(e,null),this._entries[i]=n,n)}}eg._INSTANCE=new eg(AJ);class ry{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:eg.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof ry)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class SSe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new Ay(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,n){const o=i.languageId,r=i.state,a=Fn.get(o);if(!a)return this.enterLanguage(o),this.emit(n,""),r;const l=a.tokenize(e,t,r);if(n!==0)for(const c of l.tokens)this._tokens.push(new Ay(c.offset+n,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new X8(this._tokens,e)}}class AT{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const n=e!==null?e.length:0,o=t.length,r=i!==null?i.length:0;if(n===0&&o===0&&r===0)return new Uint32Array(0);if(n===0&&o===0)return i;if(o===0&&r===0)return e;const a=new Uint32Array(n+o+r);e!==null&&a.set(e);for(let l=0;l<o;l++)a[n+l]=t[l];return i!==null&&a.set(i,n+o),a}nestedLanguageTokenize(e,t,i,n){const o=i.languageId,r=i.state,a=Fn.get(o);if(!a)return this.enterLanguage(o),this.emit(n,""),r;const l=a.tokenizeEncoded(e,t,r);if(n!==0)for(let c=0,d=l.tokens.length;c<d;c+=2)l.tokens[c]+=n;return this._prependTokens=AT._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new _N(AT._merge(this._prependTokens,this._tokens,null),e)}}let $y=class MJ{constructor(e,t,i,n,o){this._configurationService=o,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=n,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._tokenizationRegistryListener=Fn.onDidChange(a=>{if(r)return;let l=!1;for(let c=0,d=a.changedLanguages.length;c<d;c++){const f=a.changedLanguages[c];if(this._embeddedLanguages[f]){l=!0;break}}l&&(r=!0,Fn.fire([this._languageId]),r=!1)}),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=Fn.get(t);if(i){if(i instanceof MJ){const n=i.getLoadStatus();n.loaded===!1&&e.push(n.promise)}continue}Fn.isResolved(t)||e.push(Fn.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=Uy.create(null,this._lexer.start);return eg.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return gB(this._languageId,i);const n=new SSe,o=this._tokenize(e,t,i,n);return n.finalize(o)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return DN(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const n=new AT(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,i,n);return n.finalize(o)}_tokenize(e,t,i,n){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,n):this._myTokenize(e,t,i,0,n)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=_k(this._lexer,t.stack.state),!i))throw mn(this._lexer,"tokenizer state is not defined: "+t.stack.state);let n=-1,o=!1;for(const r of i){if(!QK(r.action)||r.action.nextEmbedded!=="@pop")continue;o=!0;let a=r.regex;const l=r.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}const c=e.search(a);c===-1||c!==0&&r.matchOnlyAtLineStart||(n===-1||c<n)&&(n=c)}if(!o)throw mn(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return n}_nestedTokenize(e,t,i,n,o){const r=this._findLeavingNestedLanguageOffset(e,i);if(r===-1){const c=o.nestedLanguageTokenize(e,t,i.embeddedLanguageData,n);return eg.create(i.stack,new Cb(i.embeddedLanguageData.languageId,c))}const a=e.substring(0,r);a.length>0&&o.nestedLanguageTokenize(a,!1,i.embeddedLanguageData,n);const l=e.substring(r);return this._myTokenize(l,t,i,n+r,o)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,n,o){o.enterLanguage(this._languageId);const r=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedLanguageData,d=i.stack,f=0,g=null,m=!0;for(;m||f<l;){const _=f,C=d.depth,S=g?g.groups.length:0,x=d.state;let L=null,k=null,T=null,A=null,O=null;if(g){L=g.matches;const B=g.groups.shift();k=B.matched,T=B.action,A=g.rule,g.groups.length===0&&(g=null)}else{if(!m&&f>=l)break;m=!1;let B=this._lexer.tokenizer[x];if(!B&&(B=_k(this._lexer,x),!B))throw mn(this._lexer,"tokenizer state is not defined: "+x);const z=a.substr(f);for(const q of B)if((f===0||!q.matchOnlyAtLineStart)&&(L=z.match(q.regex),L)){k=L[0],T=q.action;break}}if(L||(L=[""],k=""),T||(f<l&&(L=[a.charAt(f)],k=L[0]),T=this._lexer.defaultToken),k===null)break;for(f+=k.length;vSe(T)&&QK(T)&&T.test;)T=T.test(k,L,x,f===l);let I=null;if(typeof T=="string"||Array.isArray(T))I=T;else if(T.group)I=T.group;else if(T.token!==null&&T.token!==void 0){if(T.tokenSubst?I=Jf(this._lexer,T.token,k,L,x):I=T.token,T.nextEmbedded)if(T.nextEmbedded==="@pop"){if(!c)throw mn(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw mn(this._lexer,"cannot enter embedded language from within an embedded language");O=Jf(this._lexer,T.nextEmbedded,k,L,x)}if(T.goBack&&(f=Math.max(0,f-T.goBack)),T.switchTo&&typeof T.switchTo=="string"){let B=Jf(this._lexer,T.switchTo,k,L,x);if(B[0]==="@"&&(B=B.substr(1)),_k(this._lexer,B))d=d.switchTo(B);else throw mn(this._lexer,"trying to switch to a state '"+B+"' that is undefined in rule: "+this._safeRuleName(A))}else{if(T.transform&&typeof T.transform=="function")throw mn(this._lexer,"action.transform not supported");if(T.next)if(T.next==="@push"){if(d.depth>=this._lexer.maxStack)throw mn(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(x)}else if(T.next==="@pop"){if(d.depth<=1)throw mn(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(A));d=d.pop()}else if(T.next==="@popall")d=d.popall();else{let B=Jf(this._lexer,T.next,k,L,x);if(B[0]==="@"&&(B=B.substr(1)),_k(this._lexer,B))d=d.push(B);else throw mn(this._lexer,"trying to set a next state '"+B+"' that is undefined in rule: "+this._safeRuleName(A))}}T.log&&typeof T.log=="string"&&bSe(this._lexer,this._lexer.languageId+": "+Jf(this._lexer,T.log,k,L,x))}if(I===null)throw mn(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(A));const R=B=>{const z=this._languageService.getLanguageIdByLanguageName(B)||this._languageService.getLanguageIdByMimeType(B)||B,q=this._getNestedEmbeddedLanguageData(z);if(f<l){const te=e.substr(f);return this._nestedTokenize(te,t,eg.create(d,q),n+f,o)}else return eg.create(d,q)};if(Array.isArray(I)){if(g&&g.groups.length>0)throw mn(this._lexer,"groups cannot be nested: "+this._safeRuleName(A));if(L.length!==I.length+1)throw mn(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(A));let B=0;for(let z=1;z<L.length;z++)B+=L[z].length;if(B!==k.length)throw mn(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(A));g={rule:A,matches:L,groups:[]};for(let z=0;z<I.length;z++)g.groups[z]={action:I[z],matched:L[z+1]};f-=k.length;continue}else{if(I==="@rematch"&&(f-=k.length,k="",L=null,I="",O!==null))return R(O);if(k.length===0){if(l===0||C!==d.depth||x!==d.state||(g?g.groups.length:0)!==S)continue;throw mn(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(A))}let B=null;if(RJ(I)&&I.indexOf("@brackets")===0){const z=I.substr(9),q=LSe(this._lexer,k);if(!q)throw mn(this._lexer,"@brackets token returned but no bracket defined as: "+k);B=XK(q.token+z)}else{const z=I===""?"":I+this._lexer.tokenPostfix;B=XK(z)}_<r&&o.emit(_+n,B)}if(O!==null)return R(O)}return eg.create(d,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new Cb(e,p0);e!==this._languageId&&(Fn.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Fn.get(e);return t?new Cb(e,t.getInitialState()):new Cb(e,p0)}};$y=wSe([ySe(4,Ai)],$y);function LSe(s,e){if(!e)return null;e=Cg(s,e);const t=s.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}var xSe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})},t4;const i4=(t4=window.trustedTypes)===null||t4===void 0?void 0:t4.createPolicy("standaloneColorizer",{createHTML:s=>s});class xB{static colorizeElement(e,t,i,n){n=n||{};const o=n.theme||"vs",r=n.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(r)||r;e.setTheme(o);const l=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+o;const c=d=>{var f;const g=(f=i4==null?void 0:i4.createHTML(d))!==null&&f!==void 0?f:d;i.innerHTML=g};return this.colorize(t,l||"",a,n).then(c,d=>console.error(d))}static colorize(e,t,i,n){return xSe(this,void 0,void 0,function*(){const o=e.languageIdCodec;let r=4;n&&typeof n.tabSize=="number"&&(r=n.tabSize),rB(t)&&(t=t.substr(1));const a=md(t);if(!e.isRegisteredLanguageId(i))return JK(a,r,o);const l=yield Fn.getOrCreate(i);return l?DSe(a,r,l,o):JK(a,r,o)})}static colorizeLine(e,t,i,n,o=4){const r=qa.isBasicASCII(e,t),a=qa.containsRTL(e,r,i);return IN(new ep(!1,!0,e,!1,r,a,0,n,[],o,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){const n=e.getLineContent(t);e.tokenization.forceTokenization(t);const r=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(n,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,i)}}function DSe(s,e,t,i){return new Promise((n,o)=>{const r=()=>{const a=kSe(s,e,t,i);if(t instanceof $y){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(r,o);return}}n(a)};r()})}function JK(s,e,t){let i=[];const o=new Uint32Array(2);o[0]=0,o[1]=33587200;for(let r=0,a=s.length;r<a;r++){const l=s[r];o[0]=l.length;const c=new Os(o,l,t),d=qa.isBasicASCII(l,!0),f=qa.containsRTL(l,d,!0),g=IN(new ep(!1,!0,l,!1,d,f,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(g.html),i.push("<br/>")}return i.join("")}function kSe(s,e,t,i){let n=[],o=t.getInitialState();for(let r=0,a=s.length;r<a;r++){const l=s[r],c=t.tokenizeEncoded(l,!0,o);Os.convertToEndOffset(c.tokens,l.length);const d=new Os(c.tokens,l,i),f=qa.isBasicASCII(l,!0),g=qa.containsRTL(l,f,!0),m=IN(new ep(!1,!0,l,!1,f,g,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(m.html),n.push("<br/>"),o=c.endState}return n.join("")}const DB={clipboard:{writeText:tu||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:tu||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>tu||uB()?0:navigator.keyboard||Gh?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function x3(s,e){if(s===0)return null;const t=(s&65535)>>>0,i=(s&4294901760)>>>16;return i!==0?new MT([n4(t,e),n4(i,e)]):new MT([n4(t,e)])}function n4(s,e){const t=!!(s&2048),i=!!(s&256),n=e===2?i:t,o=!!(s&1024),r=!!(s&512),a=e===2?t:i,l=s&255;return new Wm(n,o,r,a,l)}class Wm{constructor(e,t,i,n,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=o}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new MT([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class MT{constructor(e){if(e.length===0)throw iu("parts");this.parts=e}}class ESe{constructor(e,t,i,n,o,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=o,this.keyAriaLabel=r}}class TSe{}function ISe(s){if(s.charCode){const t=String.fromCharCode(s.charCode).toUpperCase();return um.fromString(t)}const e=s.keyCode;if(e===3)return 7;if(Ka){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(mi&&e===224)return 57}else if(_g){if(e===91)return 57;if(mi&&e===93)return 57;if(!mi&&e===92)return 57}return WX[e]||0}const NSe=mi?256:2048,RSe=512,ASe=1024,MSe=mi?2048:256;class kn{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=ISe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=NSe),this.altKey&&(t|=RSe),this.shiftKey&&(t|=ASe),this.metaKey&&(t|=MSe),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Wm(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let eq=!1,cw=null;function OSe(s){if(!s.parent||s.parent===s)return null;try{const e=s.location,t=s.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return eq=!0,null}catch{return eq=!0,null}return s.parent}class PSe{static getSameOriginWindowChain(){if(!cw){cw=[];let e=window,t;do t=OSe(e),t?cw.push({window:e,iframeElement:e.frameElement||null}):cw.push({window:e,iframeElement:null}),e=t;while(e)}return cw.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,n=0;const o=this.getSameOriginWindowChain();for(const r of o){if(i+=r.window.scrollY,n+=r.window.scrollX,r.window===t||!r.iframeElement)break;const a=r.iframeElement.getBoundingClientRect();i+=a.top,n+=a.left}return{top:i,left:n}}}class nd{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);const t=PSe.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class m0{constructor(e,t=0,i=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t,e){const n=e,o=e;if(typeof n.wheelDeltaY<"u")this.deltaY=n.wheelDeltaY/120;else if(typeof o.VERTICAL_AXIS<"u"&&o.axis===o.VERTICAL_AXIS)this.deltaY=-o.detail/3;else if(e.type==="wheel"){const r=e;r.deltaMode===r.DOM_DELTA_LINE?Ka&&!mi?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof n.wheelDeltaX<"u")Gh&&mo?this.deltaX=-(n.wheelDeltaX/120):this.deltaX=n.wheelDeltaX/120;else if(typeof o.HORIZONTAL_AXIS<"u"&&o.axis===o.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const r=e;r.deltaMode===r.DOM_DELTA_LINE?Ka&&!mi?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function FSe(s){if(Array.isArray(s)){for(var e=0,t=Array(s.length);e<s.length;e++)t[e]=s[e];return t}else return Array.from(s)}var BSe=Object.hasOwnProperty,tq=Object.setPrototypeOf,VSe=Object.isFrozen,WSe=Object.getPrototypeOf,HSe=Object.getOwnPropertyDescriptor,ba=Object.freeze,Zh=Object.seal,zSe=Object.create,OJ=typeof Reflect<"u"&&Reflect,OT=OJ.apply,D3=OJ.construct;OT||(OT=function(e,t,i){return e.apply(t,i)});ba||(ba=function(e){return e});Zh||(Zh=function(e){return e});D3||(D3=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(FSe(t))))});var USe=lu(Array.prototype.forEach),iq=lu(Array.prototype.pop),uw=lu(Array.prototype.push),Yp=lu(String.prototype.toLowerCase),nq=lu(String.prototype.match),Hf=lu(String.prototype.replace),$Se=lu(String.prototype.indexOf),jSe=lu(String.prototype.trim),ih=lu(RegExp.prototype.test),sq=KSe(TypeError);function lu(s){return function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return OT(s,e,i)}}function KSe(s){return function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return D3(s,t)}}function Yi(s,e){tq&&tq(s,null);for(var t=e.length;t--;){var i=e[t];if(typeof i=="string"){var n=Yp(i);n!==i&&(VSe(e)||(e[t]=n),i=n)}s[i]=!0}return s}function zp(s){var e=zSe(null),t=void 0;for(t in s)OT(BSe,s,[t])&&(e[t]=s[t]);return e}function vk(s,e){for(;s!==null;){var t=HSe(s,e);if(t){if(t.get)return lu(t.get);if(typeof t.value=="function")return lu(t.value)}s=WSe(s)}function i(n){return console.warn("fallback value for",n),null}return i}var oq=ba(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),s4=ba(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),o4=ba(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qSe=ba(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),r4=ba(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),GSe=ba(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),rq=ba(["#text"]),aq=ba(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),a4=ba(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),lq=ba(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bk=ba(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),YSe=Zh(/\{\{[\s\S]*|[\s\S]*\}\}/gm),ZSe=Zh(/<%[\s\S]*|[\s\S]*%>/gm),QSe=Zh(/^data-[\-\w.\u00B7-\uFFFF]/),XSe=Zh(/^aria-[\-\w]+$/),JSe=Zh(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),eLe=Zh(/^(?:\w+script|data):/i),tLe=Zh(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Mw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function Pu(s){if(Array.isArray(s)){for(var e=0,t=Array(s.length);e<s.length;e++)t[e]=s[e];return t}else return Array.from(s)}var iLe=function(){return typeof window>"u"?null:window},nLe=function(e,t){if((typeof e>"u"?"undefined":Mw(e))!=="object"||typeof e.createPolicy!="function")return null;var i=null,n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(i=t.currentScript.getAttribute(n));var o="dompurify"+(i?"#"+i:"");try{return e.createPolicy(o,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function PJ(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:iLe(),e=function(H){return PJ(H)};if(e.version="2.3.1",e.removed=[],!s||!s.document||s.document.nodeType!==9)return e.isSupported=!1,e;var t=s.document,i=s.document,n=s.DocumentFragment,o=s.HTMLTemplateElement,r=s.Node,a=s.Element,l=s.NodeFilter,c=s.NamedNodeMap,d=c===void 0?s.NamedNodeMap||s.MozNamedAttrMap:c,f=s.Text,g=s.Comment,m=s.DOMParser,_=s.trustedTypes,C=a.prototype,S=vk(C,"cloneNode"),x=vk(C,"nextSibling"),L=vk(C,"childNodes"),k=vk(C,"parentNode");if(typeof o=="function"){var T=i.createElement("template");T.content&&T.content.ownerDocument&&(i=T.content.ownerDocument)}var A=nLe(_,t),O=A&&Ie?A.createHTML(""):"",I=i,R=I.implementation,B=I.createNodeIterator,z=I.createDocumentFragment,q=I.getElementsByTagName,te=t.importNode,U={};try{U=zp(i).documentMode?i.documentMode:{}}catch{}var X={};e.isSupported=typeof k=="function"&&R&&typeof R.createHTMLDocument<"u"&&U!==9;var le=YSe,be=ZSe,pe=QSe,ke=XSe,He=eLe,Ge=tLe,Ue=JSe,ce=null,ue=Yi({},[].concat(Pu(oq),Pu(s4),Pu(o4),Pu(r4),Pu(rq))),$e=null,tt=Yi({},[].concat(Pu(aq),Pu(a4),Pu(lq),Pu(bk))),_e=null,Vt=null,Ne=!0,bt=!0,mt=!1,qe=!1,Fe=!1,Wt=!1,Kt=!1,It=!1,ai=!1,Pt=!0,Ie=!1,Xe=!0,ee=!0,ie=!1,ne={},V=null,W=Yi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Q=null,Y=Yi({},["audio","video","img","source","image","track"]),de=null,ve=Yi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),rt="http://www.w3.org/1998/Math/MathML",lt="http://www.w3.org/2000/svg",Re="http://www.w3.org/1999/xhtml",Ye=Re,wt=!1,Ct=null,Qe=i.createElement("form"),Mt=function(H){Ct&&Ct===H||((!H||(typeof H>"u"?"undefined":Mw(H))!=="object")&&(H={}),H=zp(H),ce="ALLOWED_TAGS"in H?Yi({},H.ALLOWED_TAGS):ue,$e="ALLOWED_ATTR"in H?Yi({},H.ALLOWED_ATTR):tt,de="ADD_URI_SAFE_ATTR"in H?Yi(zp(ve),H.ADD_URI_SAFE_ATTR):ve,Q="ADD_DATA_URI_TAGS"in H?Yi(zp(Y),H.ADD_DATA_URI_TAGS):Y,V="FORBID_CONTENTS"in H?Yi({},H.FORBID_CONTENTS):W,_e="FORBID_TAGS"in H?Yi({},H.FORBID_TAGS):{},Vt="FORBID_ATTR"in H?Yi({},H.FORBID_ATTR):{},ne="USE_PROFILES"in H?H.USE_PROFILES:!1,Ne=H.ALLOW_ARIA_ATTR!==!1,bt=H.ALLOW_DATA_ATTR!==!1,mt=H.ALLOW_UNKNOWN_PROTOCOLS||!1,qe=H.SAFE_FOR_TEMPLATES||!1,Fe=H.WHOLE_DOCUMENT||!1,It=H.RETURN_DOM||!1,ai=H.RETURN_DOM_FRAGMENT||!1,Pt=H.RETURN_DOM_IMPORT!==!1,Ie=H.RETURN_TRUSTED_TYPE||!1,Kt=H.FORCE_BODY||!1,Xe=H.SANITIZE_DOM!==!1,ee=H.KEEP_CONTENT!==!1,ie=H.IN_PLACE||!1,Ue=H.ALLOWED_URI_REGEXP||Ue,Ye=H.NAMESPACE||Re,qe&&(bt=!1),ai&&(It=!0),ne&&(ce=Yi({},[].concat(Pu(rq))),$e=[],ne.html===!0&&(Yi(ce,oq),Yi($e,aq)),ne.svg===!0&&(Yi(ce,s4),Yi($e,a4),Yi($e,bk)),ne.svgFilters===!0&&(Yi(ce,o4),Yi($e,a4),Yi($e,bk)),ne.mathMl===!0&&(Yi(ce,r4),Yi($e,lq),Yi($e,bk))),H.ADD_TAGS&&(ce===ue&&(ce=zp(ce)),Yi(ce,H.ADD_TAGS)),H.ADD_ATTR&&($e===tt&&($e=zp($e)),Yi($e,H.ADD_ATTR)),H.ADD_URI_SAFE_ATTR&&Yi(de,H.ADD_URI_SAFE_ATTR),H.FORBID_CONTENTS&&(V===W&&(V=zp(V)),Yi(V,H.FORBID_CONTENTS)),ee&&(ce["#text"]=!0),Fe&&Yi(ce,["html","head","body"]),ce.table&&(Yi(ce,["tbody"]),delete _e.tbody),ba&&ba(H),Ct=H)},Ot=Yi({},["mi","mo","mn","ms","mtext"]),Mi=Yi({},["foreignobject","desc","title","annotation-xml"]),zt=Yi({},s4);Yi(zt,o4),Yi(zt,qSe);var Fi=Yi({},r4);Yi(Fi,GSe);var Wi=function(H){var me=k(H);(!me||!me.tagName)&&(me={namespaceURI:Re,tagName:"template"});var Me=Yp(H.tagName),_t=Yp(me.tagName);if(H.namespaceURI===lt)return me.namespaceURI===Re?Me==="svg":me.namespaceURI===rt?Me==="svg"&&(_t==="annotation-xml"||Ot[_t]):Boolean(zt[Me]);if(H.namespaceURI===rt)return me.namespaceURI===Re?Me==="math":me.namespaceURI===lt?Me==="math"&&Mi[_t]:Boolean(Fi[Me]);if(H.namespaceURI===Re){if(me.namespaceURI===lt&&!Mi[_t]||me.namespaceURI===rt&&!Ot[_t])return!1;var Jt=Yi({},["title","style","font","a","script"]);return!Fi[Me]&&(Jt[Me]||!zt[Me])}return!1},Ti=function(H){uw(e.removed,{element:H});try{H.parentNode.removeChild(H)}catch{try{H.outerHTML=O}catch{H.remove()}}},rs=function(H,me){try{uw(e.removed,{attribute:me.getAttributeNode(H),from:me})}catch{uw(e.removed,{attribute:null,from:me})}if(me.removeAttribute(H),H==="is"&&!$e[H])if(It||ai)try{Ti(me)}catch{}else try{me.setAttribute(H,"")}catch{}},un=function(H){var me=void 0,Me=void 0;if(Kt)H="<remove></remove>"+H;else{var _t=nq(H,/^[\r\n\t ]+/);Me=_t&&_t[0]}var Jt=A?A.createHTML(H):H;if(Ye===Re)try{me=new m().parseFromString(Jt,"text/html")}catch{}if(!me||!me.documentElement){me=R.createDocument(Ye,"template",null);try{me.documentElement.innerHTML=wt?"":Jt}catch{}}var oi=me.body||me.documentElement;return H&&Me&&oi.insertBefore(i.createTextNode(Me),oi.childNodes[0]||null),Ye===Re?q.call(me,Fe?"html":"body")[0]:Fe?me.documentElement:oi},Qn=function(H){return B.call(H.ownerDocument||H,H,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},Zs=function(H){return H instanceof f||H instanceof g?!1:typeof H.nodeName!="string"||typeof H.textContent!="string"||typeof H.removeChild!="function"||!(H.attributes instanceof d)||typeof H.removeAttribute!="function"||typeof H.setAttribute!="function"||typeof H.namespaceURI!="string"||typeof H.insertBefore!="function"},Uo=function(H){return(typeof r>"u"?"undefined":Mw(r))==="object"?H instanceof r:H&&(typeof H>"u"?"undefined":Mw(H))==="object"&&typeof H.nodeType=="number"&&typeof H.nodeName=="string"},ps=function(H,me,Me){!X[H]||USe(X[H],function(_t){_t.call(e,me,Me,Ct)})},vo=function(H){var me=void 0;if(ps("beforeSanitizeElements",H,null),Zs(H)||nq(H.nodeName,/[\u0080-\uFFFF]/))return Ti(H),!0;var Me=Yp(H.nodeName);if(ps("uponSanitizeElement",H,{tagName:Me,allowedTags:ce}),!Uo(H.firstElementChild)&&(!Uo(H.content)||!Uo(H.content.firstElementChild))&&ih(/<[/\w]/g,H.innerHTML)&&ih(/<[/\w]/g,H.textContent)||Me==="select"&&ih(/<template/i,H.innerHTML))return Ti(H),!0;if(!ce[Me]||_e[Me]){if(ee&&!V[Me]){var _t=k(H)||H.parentNode,Jt=L(H)||H.childNodes;if(Jt&&_t)for(var oi=Jt.length,Lt=oi-1;Lt>=0;--Lt)_t.insertBefore(S(Jt[Lt],!0),x(H))}return Ti(H),!0}return H instanceof a&&!Wi(H)||(Me==="noscript"||Me==="noembed")&&ih(/<\/no(script|embed)/i,H.innerHTML)?(Ti(H),!0):(qe&&H.nodeType===3&&(me=H.textContent,me=Hf(me,le," "),me=Hf(me,be," "),H.textContent!==me&&(uw(e.removed,{element:H.cloneNode()}),H.textContent=me)),ps("afterSanitizeElements",H,null),!1)},sr=function(H,me,Me){if(Xe&&(me==="id"||me==="name")&&(Me in i||Me in Qe))return!1;if(!(bt&&!Vt[me]&&ih(pe,me))){if(!(Ne&&ih(ke,me))){if(!$e[me]||Vt[me])return!1;if(!de[me]){if(!ih(Ue,Hf(Me,Ge,""))){if(!((me==="src"||me==="xlink:href"||me==="href")&&H!=="script"&&$Se(Me,"data:")===0&&Q[H])){if(!(mt&&!ih(He,Hf(Me,Ge,"")))){if(Me)return!1}}}}}}return!0},Bs=function(H){var me=void 0,Me=void 0,_t=void 0,Jt=void 0;ps("beforeSanitizeAttributes",H,null);var oi=H.attributes;if(!!oi){var Lt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$e};for(Jt=oi.length;Jt--;){me=oi[Jt];var Qt=me,Tn=Qt.name,hn=Qt.namespaceURI;if(Me=jSe(me.value),_t=Yp(Tn),Lt.attrName=_t,Lt.attrValue=Me,Lt.keepAttr=!0,Lt.forceKeepAttr=void 0,ps("uponSanitizeAttribute",H,Lt),Me=Lt.attrValue,!Lt.forceKeepAttr&&(rs(Tn,H),!!Lt.keepAttr)){if(ih(/\/>/i,Me)){rs(Tn,H);continue}qe&&(Me=Hf(Me,le," "),Me=Hf(Me,be," "));var ae=H.nodeName.toLowerCase();if(!!sr(ae,_t,Me))try{hn?H.setAttributeNS(hn,Tn,Me):H.setAttribute(Tn,Me),iq(e.removed)}catch{}}}ps("afterSanitizeAttributes",H,null)}},Bl=function Nt(H){var me=void 0,Me=Qn(H);for(ps("beforeSanitizeShadowDOM",H,null);me=Me.nextNode();)ps("uponSanitizeShadowNode",me,null),!vo(me)&&(me.content instanceof n&&Nt(me.content),Bs(me));ps("afterSanitizeShadowDOM",H,null)};return e.sanitize=function(Nt,H){var me=void 0,Me=void 0,_t=void 0,Jt=void 0,oi=void 0;if(wt=!Nt,wt&&(Nt="<!-->"),typeof Nt!="string"&&!Uo(Nt)){if(typeof Nt.toString!="function")throw sq("toString is not a function");if(Nt=Nt.toString(),typeof Nt!="string")throw sq("dirty is not a string, aborting")}if(!e.isSupported){if(Mw(s.toStaticHTML)==="object"||typeof s.toStaticHTML=="function"){if(typeof Nt=="string")return s.toStaticHTML(Nt);if(Uo(Nt))return s.toStaticHTML(Nt.outerHTML)}return Nt}if(Wt||Mt(H),e.removed=[],typeof Nt=="string"&&(ie=!1),!ie)if(Nt instanceof r)me=un("<!---->"),Me=me.ownerDocument.importNode(Nt,!0),Me.nodeType===1&&Me.nodeName==="BODY"||Me.nodeName==="HTML"?me=Me:me.appendChild(Me);else{if(!It&&!qe&&!Fe&&Nt.indexOf("<")===-1)return A&&Ie?A.createHTML(Nt):Nt;if(me=un(Nt),!me)return It?null:O}me&&Kt&&Ti(me.firstChild);for(var Lt=Qn(ie?Nt:me);_t=Lt.nextNode();)_t.nodeType===3&&_t===Jt||vo(_t)||(_t.content instanceof n&&Bl(_t.content),Bs(_t),Jt=_t);if(Jt=null,ie)return Nt;if(It){if(ai)for(oi=z.call(me.ownerDocument);me.firstChild;)oi.appendChild(me.firstChild);else oi=me;return Pt&&(oi=te.call(t,oi,!0)),oi}var Qt=Fe?me.outerHTML:me.innerHTML;return qe&&(Qt=Hf(Qt,le," "),Qt=Hf(Qt,be," ")),A&&Ie?A.createHTML(Qt):Qt},e.setConfig=function(Nt){Mt(Nt),Wt=!0},e.clearConfig=function(){Ct=null,Wt=!1},e.isValidAttribute=function(Nt,H,me){Ct||Mt({});var Me=Yp(Nt),_t=Yp(H);return sr(Me,_t,me)},e.addHook=function(Nt,H){typeof H=="function"&&(X[Nt]=X[Nt]||[],uw(X[Nt],H))},e.removeHook=function(Nt){X[Nt]&&iq(X[Nt])},e.removeHooks=function(Nt){X[Nt]&&(X[Nt]=[])},e.removeAllHooks=function(){X={}},e}var kd=PJ();kd.version;kd.isSupported;const sLe=kd.sanitize;kd.setConfig;kd.clearConfig;kd.isValidAttribute;const FJ=kd.addHook,BJ=kd.removeHook;kd.removeHooks;kd.removeAllHooks;var Xt;(function(s){s.inMemory="inmemory",s.vscode="vscode",s.internal="private",s.walkThrough="walkThrough",s.walkThroughSnippet="walkThroughSnippet",s.http="http",s.https="https",s.file="file",s.mailto="mailto",s.untitled="untitled",s.data="data",s.command="command",s.vscodeRemote="vscode-remote",s.vscodeRemoteResource="vscode-remote-resource",s.vscodeUserData="vscode-userdata",s.vscodeCustomEditor="vscode-custom-editor",s.vscodeNotebook="vscode-notebook",s.vscodeNotebookCell="vscode-notebook-cell",s.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",s.vscodeNotebookCellOutput="vscode-notebook-cell-output",s.vscodeInteractive="vscode-interactive",s.vscodeInteractiveInput="vscode-interactive-input",s.vscodeSettings="vscode-settings",s.vscodeWorkspaceTrust="vscode-workspace-trust",s.vscodeTerminal="vscode-terminal",s.webviewPanel="webview-panel",s.vscodeWebview="vscode-webview",s.extension="extension",s.vscodeFileResource="vscode-file",s.tmp="tmp",s.vsls="vsls",s.vscodeSourceControl="vscode-scm"})(Xt||(Xt={}));const oLe="tkn";class rLe{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${Xt.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&(i=`[${i}]`);const n=this._ports[t],o=this._connectionTokens[t];let r=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(r+=`&${oLe}=${encodeURIComponent(o)}`),yt.from({scheme:Xg?this._preferredWebSchema:Xt.vscodeRemoteResource,authority:`${i}:${n}`,path:this._remoteResourcesPath,query:r})}}const VJ=new rLe;class jy{asBrowserUri(e,t){const i=this.toUri(e,t);return i.scheme===Xt.vscodeRemote?VJ.rewrite(i):i.scheme===Xt.file&&(tu||iCe&&ss.origin===`${Xt.vscodeFileResource}://${jy.FALLBACK_AUTHORITY}`)?i.with({scheme:Xt.vscodeFileResource,authority:i.authority||jy.FALLBACK_AUTHORITY,query:null,fragment:null}):i}toUri(e,t){return yt.isUri(e)?e:yt.parse(t.toUrl(e))}}jy.FALLBACK_AUTHORITY="vscode-app";const WJ=new jy;function Ts(s){for(;s.firstChild;)s.firstChild.remove()}function kB(s){var e;return(e=s==null?void 0:s.isConnected)!==null&&e!==void 0?e:!1}class HJ{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){!this._handler||(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function Le(s,e,t,i){return new HJ(s,e,t,i)}function zJ(s){return function(e){return s(new nd(e))}}function aLe(s){return function(e){return s(new kn(e))}}const Ps=function(e,t,i,n){let o=i;return t==="click"||t==="mousedown"?o=zJ(i):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=aLe(i)),Le(e,t,o,n)},lLe=function(e,t,i){const n=zJ(t);return cLe(e,n,i)};function cLe(s,e,t){return Le(s,gd&&DB.pointerEvents?it.POINTER_DOWN:it.MOUSE_DOWN,e,t)}function Mc(s,e,t){let i=null;const n=l=>a.fire(l),o=()=>{i||(i=new HJ(s,e,n,t))},r=()=>{i&&(i.dispose(),i=null)},a=new J({onFirstListenerAdd:o,onLastListenerRemove:r});return a}let l4=null;function uLe(s){if(!l4){const e=t=>setTimeout(()=>t(new Date().getTime()),0);l4=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return l4.call(self,s)}let UJ,cu;class c4{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Yt(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let s=[],e=null,t=!1,i=!1;const n=()=>{for(t=!1,e=s,s=[],i=!0;e.length>0;)e.sort(c4.sort),e.shift().execute();i=!1};cu=(o,r=0)=>{const a=new c4(o,r);return s.push(a),t||(t=!0,uLe(n)),a},UJ=(o,r)=>{if(i){const a=new c4(o,r);return e.push(a),a}else return cu(o,r)}})();function NN(s){return document.defaultView.getComputedStyle(s,null)}function RN(s){if(s!==document.body)return new ln(s.clientWidth,s.clientHeight);if(gd&&window.visualViewport)return new ln(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new ln(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new ln(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new ln(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class Gn{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const n=NN(e);let o="0";return n&&(n.getPropertyValue?o=n.getPropertyValue(t):o=n.getAttribute(i)),Gn.convertToPixels(e,o)}static getBorderLeftWidth(e){return Gn.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return Gn.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return Gn.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return Gn.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return Gn.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return Gn.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return Gn.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return Gn.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return Gn.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return Gn.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return Gn.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return Gn.getDimension(e,"margin-bottom","marginBottom")}}class ln{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new ln(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof ln?e:new ln(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}ln.None=new ln(0,0);function $J(s){let e=s.offsetParent,t=s.offsetTop,i=s.offsetLeft;for(;(s=s.parentNode)!==null&&s!==document.body&&s!==document.documentElement;){t-=s.scrollTop;const n=KJ(s)?null:NN(s);n&&(i-=n.direction!=="rtl"?s.scrollLeft:-s.scrollLeft),s===e&&(i+=Gn.getBorderLeftWidth(s),t+=Gn.getBorderTopWidth(s),t+=s.offsetTop,i+=s.offsetLeft,e=s.offsetParent)}return{left:i,top:t}}function dLe(s,e,t){typeof e=="number"&&(s.style.width=`${e}px`),typeof t=="number"&&(s.style.height=`${t}px`)}function Oo(s){const e=s.getBoundingClientRect();return{left:e.left+zh.scrollX,top:e.top+zh.scrollY,width:e.width,height:e.height}}function hLe(s){let e=s,t=1;do{const i=NN(e).zoom;i!=null&&i!=="1"&&(t*=i),e=e.parentElement}while(e!==null&&e!==document.documentElement);return t}const zh=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function ec(s){const e=Gn.getMarginLeft(s)+Gn.getMarginRight(s);return s.offsetWidth+e}function u4(s){const e=Gn.getBorderLeftWidth(s)+Gn.getBorderRightWidth(s),t=Gn.getPaddingLeft(s)+Gn.getPaddingRight(s);return s.offsetWidth-e-t}function fLe(s){const e=Gn.getBorderTopWidth(s)+Gn.getBorderBottomWidth(s),t=Gn.getPaddingTop(s)+Gn.getPaddingBottom(s);return s.offsetHeight-e-t}function k3(s){const e=Gn.getMarginTop(s)+Gn.getMarginBottom(s);return s.offsetHeight+e}function Uh(s,e){for(;s;){if(s===e)return!0;s=s.parentNode}return!1}function jJ(s,e,t){for(;s&&s.nodeType===s.ELEMENT_NODE;){if(s.classList.contains(e))return s;if(t){if(typeof t=="string"){if(s.classList.contains(t))return null}else if(s===t)return null}s=s.parentNode}return null}function d4(s,e,t){return!!jJ(s,e,t)}function KJ(s){return s&&!!s.host&&!!s.mode}function Ky(s){return!!Hm(s)}function Hm(s){for(;s.parentNode;){if(s===document.body)return null;s=s.parentNode}return KJ(s)?s:null}function $b(){let s=document.activeElement;for(;s!=null&&s.shadowRoot;)s=s.shadowRoot.activeElement;return s}function Il(s=document.getElementsByTagName("head")[0]){const e=document.createElement("style");return e.type="text/css",e.media="screen",s.appendChild(e),e}let h4=null;function qJ(){return h4||(h4=Il()),h4}function gLe(s){var e,t;return!((e=s==null?void 0:s.sheet)===null||e===void 0)&&e.rules?s.sheet.rules:!((t=s==null?void 0:s.sheet)===null||t===void 0)&&t.cssRules?s.sheet.cssRules:[]}function E3(s,e,t=qJ()){!t||!e||t.sheet.insertRule(s+"{"+e+"}",0)}function cq(s,e=qJ()){if(!e)return;const t=gLe(e),i=[];for(let n=0;n<t.length;n++)t[n].selectorText.indexOf(s)!==-1&&i.push(n);for(let n=i.length-1;n>=0;n--)e.sheet.deleteRule(i[n])}function GJ(s){return typeof HTMLElement=="object"?s instanceof HTMLElement:s&&typeof s=="object"&&s.nodeType===1&&typeof s.nodeName=="string"}const it={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:_g?"webkitAnimationStart":"animationstart",ANIMATION_END:_g?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:_g?"webkitAnimationIteration":"animationiteration"},qi={stop:function(s,e){s.preventDefault?s.preventDefault():s.returnValue=!1,e&&(s.stopPropagation?s.stopPropagation():s.cancelBubble=!0)}};function pLe(s){const e=[];for(let t=0;s&&s.nodeType===s.ELEMENT_NODE;t++)e[t]=s.scrollTop,s=s.parentNode;return e}function mLe(s,e){for(let t=0;s&&s.nodeType===s.ELEMENT_NODE;t++)s.scrollTop!==e[t]&&(s.scrollTop=e[t]),s=s.parentNode}class PT extends ge{constructor(e){super(),this._onDidFocus=this._register(new J),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new J),this.onDidBlur=this._onDidBlur.event;let t=PT.hasFocusWithin(e),i=!1;const n=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},o=()=>{t&&(i=!0,window.setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{PT.hasFocusWithin(e)!==t&&(t?o():n())},this._register(Le(e,it.FOCUS,n,!0)),this._register(Le(e,it.BLUR,o,!0)),this._register(Le(e,it.FOCUS_IN,()=>this._refreshStateHandler())),this._register(Le(e,it.FOCUS_OUT,()=>this._refreshStateHandler()))}static hasFocusWithin(e){const t=Hm(e),i=t?t.activeElement:document.activeElement;return Uh(i,e)}}function zm(s){return new PT(s)}function Se(s,...e){if(s.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function _Le(s,e){return s.insertBefore(e,s.firstChild),e}function Mg(s,...e){s.innerText="",Se(s,...e)}const vLe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var qy;(function(s){s.HTML="http://www.w3.org/1999/xhtml",s.SVG="http://www.w3.org/2000/svg"})(qy||(qy={}));function YJ(s,e,t,...i){const n=vLe.exec(e);if(!n)throw new Error("Bad use of emmet");t=Object.assign({},t||{});const o=n[1]||"div";let r;return s!==qy.HTML?r=document.createElementNS(s,o):r=document.createElement(o),n[3]&&(r.id=n[3]),n[4]&&(r.className=n[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const l=t[a];typeof l>"u"||(/^on\w+$/.test(a)?r[a]=l:a==="selected"?l&&r.setAttribute(a,"true"):r.setAttribute(a,l))}),r.append(...i),r}function Pe(s,e,...t){return YJ(qy.HTML,s,e,...t)}Pe.SVG=function(s,e,...t){return YJ(qy.SVG,s,e,...t)};function Wa(...s){for(const e of s)e.style.display="",e.removeAttribute("aria-hidden")}function Vr(...s){for(const e of s)e.style.display="none",e.setAttribute("aria-hidden","true")}function bLe(s){return Array.prototype.slice.call(document.getElementsByTagName(s),0)}function uq(s){const e=window.devicePixelRatio*s;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function ZJ(s){window.open(s,"_blank","noopener")}function CLe(s){const e=()=>{s(),t=cu(e)};let t=cu(e);return ni(()=>t.dispose())}VJ.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function Um(s){return s?`url('${WJ.asBrowserUri(s).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function dq(s){return`'${s.replace(/'/g,"%27")}'`}function wLe(s,e=!1){const t=document.createElement("a");return FJ("afterSanitizeAttributes",i=>{for(const n of["href","src"])if(i.hasAttribute(n)){const o=i.getAttribute(n);if(n==="href"&&o.startsWith("#"))continue;if(t.href=o,!s.includes(t.protocol.replace(/:$/,""))){if(e&&n==="src"&&t.href.startsWith("data:"))continue;i.removeAttribute(n)}}}),ni(()=>{BJ("afterSanitizeAttributes")})}class ag extends J{constructor(){super(),this._subscriptions=new Ae,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Le(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new kn(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(Le(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(Le(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(Le(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(Le(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(Le(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return ag.instance||(ag.instance=new ag),ag.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class yLe extends ge{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this._register(Le(this.element,it.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter(e)})),this._register(Le(this.element,it.DRAG_OVER,e=>{var t,i;e.preventDefault(),(i=(t=this.callbacks).onDragOver)===null||i===void 0||i.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(Le(this.element,it.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave(e))})),this._register(Le(this.element,it.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd(e)})),this._register(Le(this.element,it.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop(e)}))}}const hq=2e4;let tm,PE,T3,FE,I3;function SLe(s){tm=document.createElement("div"),tm.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),tm.appendChild(i),i};PE=e(),T3=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("role","complementary"),i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),tm.appendChild(i),i};FE=t(),I3=t(),s.appendChild(tm)}function go(s){!tm||(PE.textContent!==s?(Ts(T3),BT(PE,s)):(Ts(PE),BT(T3,s)))}function FT(s){!tm||(mi?go(s):FE.textContent!==s?(Ts(I3),BT(FE,s)):(Ts(FE),BT(I3,s)))}function BT(s,e){Ts(s),e.length>hq&&(e=e.substr(0,hq)),s.textContent=e,s.style.visibility="hidden",s.style.visibility="visible"}const EB=bi("markerDecorationsService"),Yr=bi("textModelService");var Gy=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class _a extends ge{constructor(e,t="",i="",n=!0,o){super(),this._onDidChange=this._register(new J),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=n,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return Gy(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class _0 extends ge{constructor(){super(...arguments),this._onBeforeRun=this._register(new J),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new J),this.onDidRun=this._onDidRun.event}run(e,t){return Gy(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let i;try{yield this.runAction(e,t)}catch(n){i=n}this._onDidRun.fire({action:e,error:i})})}runAction(e,t){return Gy(this,void 0,void 0,function*(){yield e.run(t)})}}class Bo extends _a{constructor(e){super(Bo.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}Bo.ID="vs.actions.separator";class Yy{constructor(e,t,i,n){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=n,this._actions=i}get actions(){return this._actions}dispose(){}run(){return Gy(this,void 0,void 0,function*(){})}}class AN extends _a{constructor(){super(AN.ID,b("submenu.empty","(empty)"),void 0,!1)}}AN.ID="vs.actions.empty";function fq(s){var e,t;return{id:s.id,label:s.label,class:void 0,enabled:(e=s.enabled)!==null&&e!==void 0?e:!0,checked:(t=s.checked)!==null&&t!==void 0?t:!1,run:()=>Gy(this,void 0,void 0,function*(){return s.run()}),tooltip:s.label,dispose:()=>{}}}const fs=bi("commandService"),Li=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new J,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(s,e){if(!s)throw new Error("invalid command");if(typeof s=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:s,handler:e})}if(s.description){const r=[];for(const l of s.description.args)r.push(l.constraint);const a=s.handler;s.handler=function(l,...c){return bCe(c,r),a(l,...c)}}const{id:t}=s;let i=this._commands.get(t);i||(i=new Sr,this._commands.set(t,i));const n=i.unshift(s),o=ni(()=>{n();const r=this._commands.get(t);r!=null&&r.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(s,e){return Li.registerCommand(s,(t,...i)=>t.get(fs).executeCommand(e,...i))}getCommand(s){const e=this._commands.get(s);if(!(!e||e.isEmpty()))return fi.first(e)}getCommands(){const s=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&s.set(e,t)}return s}};Li.registerCommand("noop",()=>{});const Ho=new Map;Ho.set("false",!1);Ho.set("true",!0);Ho.set("isMac",mi);Ho.set("isLinux",Wo);Ho.set("isWindows",mo);Ho.set("isWeb",Xg);Ho.set("isMacNative",mi&&!Xg);Ho.set("isEdge",aCe);Ho.set("isFirefox",oCe);Ho.set("isChrome",CX);Ho.set("isSafari",rCe);const LLe=Object.prototype.hasOwnProperty;class Je{static has(e){return Og.create(e)}static equals(e,t){return v0.create(e,t)}static regex(e,t){return VT.create(e,t)}static not(e){return $m.create(e)}static and(...e){return lg.create(e,null)}static or(...e){return Nh.create(e,null,!0)}static deserialize(e,t=!1){if(!!e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){const i=e.split("||");return Nh.create(i.map(n=>this._deserializeAndExpression(n,t)),null,!0)}static _deserializeAndExpression(e,t){const i=e.split("&&");return lg.create(i.map(n=>this._deserializeOne(n,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){const i=e.split("!=");return PN.create(i[0].trim(),this._deserializeValue(i[1],t))}if(e.indexOf("==")>=0){const i=e.split("==");return v0.create(i[0].trim(),this._deserializeValue(i[1],t))}if(e.indexOf("=~")>=0){const i=e.split("=~");return VT.create(i[0].trim(),this._deserializeRegexValue(i[1],t))}if(e.indexOf(" not in ")>=0){const i=e.split(" not in ");return ON.create(i[0].trim(),i[1].trim())}if(e.indexOf(" in ")>=0){const i=e.split(" in ");return MN.create(i[0].trim(),i[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const i=e.split(">=");return VN.create(i[0].trim(),i[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const i=e.split(">");return BN.create(i[0].trim(),i[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const i=e.split("<=");return HN.create(i[0].trim(),i[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const i=e.split("<");return WN.create(i[0].trim(),i[1].trim())}return/^\!\s*/.test(e)?$m.create(e.substr(1).trim()):Og.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;const i=/^'([^']*)'$/.exec(e);return i?i[1].trim():e}static _deserializeRegexValue(e,t){if(ZX(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}const i=e.indexOf("/"),n=e.lastIndexOf("/");if(i===n||i<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}const o=e.slice(i+1,n),r=e[n+1]==="i"?"i":"";try{return new RegExp(o,r)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}function xLe(s,e){const t=s?s.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function jb(s,e){return s.cmp(e)}class Ga{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Nl.INSTANCE}}Ga.INSTANCE=new Ga;class Nl{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Ga.INSTANCE}}Nl.INSTANCE=new Nl;class Og{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const i=Ho.get(e);return typeof i=="boolean"?i?Nl.INSTANCE:Ga.INSTANCE:new Og(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:XJ(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Ho.get(this.key);return typeof e=="boolean"?e?Nl.INSTANCE:Ga.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=$m.create(this.key,this)),this.negated}}class v0{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}static create(e,t,i=null){if(typeof t=="boolean")return t?Og.create(e,i):$m.create(e,i);const n=Ho.get(e);return typeof n=="boolean"?t===(n?"true":"false")?Nl.INSTANCE:Ga.INSTANCE:new v0(e,t,i)}cmp(e){return e.type!==this.type?this.type-e.type:S_(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Ho.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Nl.INSTANCE:Ga.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=PN.create(this.key,this.value,this)),this.negated}}class MN{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new MN(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:S_(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?LLe.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=ON.create(this.key,this.valueKey)),this.negated}}class ON{constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=MN.create(e,t)}static create(e,t){return new ON(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class PN{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}static create(e,t,i=null){if(typeof t=="boolean")return t?$m.create(e,i):Og.create(e,i);const n=Ho.get(e);return typeof n=="boolean"?t===(n?"true":"false")?Ga.INSTANCE:Nl.INSTANCE:new PN(e,t,i)}cmp(e){return e.type!==this.type?this.type-e.type:S_(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Ho.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Ga.INSTANCE:Nl.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=v0.create(this.key,this.value,this)),this.negated}}class $m{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const i=Ho.get(e);return typeof i=="boolean"?i?Ga.INSTANCE:Nl.INSTANCE:new $m(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:XJ(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Ho.get(this.key);return typeof e=="boolean"?e?Ga.INSTANCE:Nl.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Og.create(this.key,this)),this.negated}}function FN(s,e){if(typeof s=="string"){const t=parseFloat(s);isNaN(t)||(s=t)}return typeof s=="string"||typeof s=="number"?e(s):Ga.INSTANCE}class BN{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}static create(e,t,i=null){return FN(t,n=>new BN(e,n,i))}cmp(e){return e.type!==this.type?this.type-e.type:S_(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=HN.create(this.key,this.value,this)),this.negated}}class VN{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}static create(e,t,i=null){return FN(t,n=>new VN(e,n,i))}cmp(e){return e.type!==this.type?this.type-e.type:S_(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=WN.create(this.key,this.value,this)),this.negated}}class WN{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}static create(e,t,i=null){return FN(t,n=>new WN(e,n,i))}cmp(e){return e.type!==this.type?this.type-e.type:S_(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=VN.create(this.key,this.value,this)),this.negated}}class HN{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}static create(e,t,i=null){return FN(t,n=>new HN(e,n,i))}cmp(e){return e.type!==this.type?this.type-e.type:S_(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=BN.create(this.key,this.value,this)),this.negated}}class VT{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new VT(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=TB.create(this)),this.negated}}class TB{constructor(e){this._actual=e,this.type=8}static create(e){return new TB(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function QJ(s){let e=null;for(let t=0,i=s.length;t<i;t++){const n=s[t].substituteConstants();if(s[t]!==n&&e===null){e=[];for(let o=0;o<t;o++)e[o]=s[o]}e!==null&&(e[t]=n)}return e===null?s:e}class lg{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return lg._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const n=jb(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=QJ(this.expr);return e===this.expr?this:lg.create(e,this.negated)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const i=[];let n=!1;for(const o of e)if(!!o){if(o.type===1){n=!0;continue}if(o.type===0)return Ga.INSTANCE;if(o.type===6){i.push(...o.expr);continue}i.push(o)}if(i.length===0&&n)return Nl.INSTANCE;if(i.length!==0){if(i.length===1)return i[0];i.sort(jb);for(let o=1;o<i.length;o++)i[o-1].equals(i[o])&&(i.splice(o,1),o--);if(i.length===1)return i[0];for(;i.length>1;){const o=i[i.length-1];if(o.type!==9)break;i.pop();const r=i.pop(),a=i.length===0,l=Nh.create(o.expr.map(c=>lg.create([c,r],null)),null,a);l&&(i.push(l),i.sort(jb))}return i.length===1?i[0]:new lg(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Nh.create(e,this,!0)}return this.negated}}class Nh{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,i){return Nh._normalizeArr(e,t,i)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const n=jb(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=QJ(this.expr);return e===this.expr?this:Nh.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let n=[],o=!1;if(e){for(let r=0,a=e.length;r<a;r++){const l=e[r];if(!!l){if(l.type===0){o=!0;continue}if(l.type===1)return Nl.INSTANCE;if(l.type===9){n=n.concat(l.expr);continue}n.push(l)}}if(n.length===0&&o)return Ga.INSTANCE;n.sort(jb)}if(n.length!==0){if(n.length===1)return n[0];for(let r=1;r<n.length;r++)n[r-1].equals(n[r])&&(n.splice(r,1),r--);if(n.length===1)return n[0];if(i){for(let r=0;r<n.length;r++)for(let a=r+1;a<n.length;a++)JJ(n[r],n[a])&&(n.splice(a,1),a--);if(n.length===1)return n[0]}return new Nh(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),n=[];for(const r of WT(t))for(const a of WT(i))n.push(lg.create([r,a],null));const o=e.length===0;e.unshift(Nh.create(n,null,o))}this.negated=e[0]}return this.negated}}class st extends Og{constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?st._info.push(Object.assign(Object.assign({},i),{key:e})):i!==!0&&st._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}static all(){return st._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return v0.create(this.key,e)}}st._info=[];const jt=bi("contextKeyService"),DLe="setContext";function XJ(s,e){return s<e?-1:s>e?1:0}function S_(s,e,t,i){return s<t?-1:s>t?1:e<i?-1:e>i?1:0}function JJ(s,e){if(e.type===6&&s.type!==9&&s.type!==6){for(const n of e.expr)if(s.equals(n))return!0}const t=s.negate(),i=WT(t).concat(WT(e));i.sort(jb);for(let n=0;n<i.length;n++){const r=i[n].negate();for(let a=n+1;a<i.length;a++){const l=i[a];if(r.equals(l))return!0}}return!1}function WT(s){return s.type===9?s.expr:[s]}var Cl;(function(s){s.DARK="dark",s.LIGHT="light",s.HIGH_CONTRAST_DARK="hcDark",s.HIGH_CONTRAST_LIGHT="hcLight"})(Cl||(Cl={}));function Vo(s){return s===Cl.HIGH_CONTRAST_DARK||s===Cl.HIGH_CONTRAST_LIGHT}function Zy(s){return s===Cl.DARK||s===Cl.HIGH_CONTRAST_DARK}const cn=bi("themeService");var N3;(function(s){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}s.isThemeColor=e})(N3||(N3={}));function Yn(s){return{id:s}}var Pi;(function(s){function e(c){return c&&typeof c=="object"&&typeof c.id=="string"&&(typeof c.color>"u"||N3.isThemeColor(c.color))}s.isThemeIcon=e;const t=new RegExp(`^\\$\\((${yr.iconNameExpression}(?:${yr.iconModifierExpression})?)\\)$`);function i(c){const d=t.exec(c);if(!d)return;const[,f]=d;return{id:f}}s.fromString=i;function n(c){return{id:c}}s.fromId=n;function o(c,d){let f=c.id;const g=f.lastIndexOf("~");return g!==-1&&(f=f.substring(0,g)),d&&(f=`${f}~${d}`),{id:f}}s.modify=o;function r(c){const d=c.id.lastIndexOf("~");if(d!==-1)return c.id.substring(d+1)}s.getModifier=r;function a(c,d){var f,g;return c.id===d.id&&((f=c.color)===null||f===void 0?void 0:f.id)===((g=d.color)===null||g===void 0?void 0:g.id)}s.isEqual=a;function l(c,d){return{id:c.id,color:d?Yn(d):void 0}}s.asThemeIcon=l,s.asClassNameArray=yr.asClassNameArray,s.asClassName=yr.asClassName,s.asCSSSelector=yr.asCSSSelector})(Pi||(Pi={}));function HT(s){switch(s){case Cl.DARK:return"vs-dark";case Cl.HIGH_CONTRAST_DARK:return"hc-black";case Cl.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const eee={ThemingContribution:"base.contributions.theming"};class kLe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new J}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),ni(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const tee=new kLe;Wn.add(eee.ThemingContribution,tee);function Cn(s){return tee.onColorThemeChange(s)}class ELe extends ge{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var TLe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},gq=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};function wb(s){return s.command!==void 0}class G{constructor(e){if(G._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);G._instances.set(e,this),this.id=e}}G._instances=new Map;G.CommandPalette=new G("CommandPalette");G.DebugBreakpointsContext=new G("DebugBreakpointsContext");G.DebugCallStackContext=new G("DebugCallStackContext");G.DebugConsoleContext=new G("DebugConsoleContext");G.DebugVariablesContext=new G("DebugVariablesContext");G.DebugWatchContext=new G("DebugWatchContext");G.DebugToolBar=new G("DebugToolBar");G.DebugToolBarStop=new G("DebugToolBarStop");G.EditorContext=new G("EditorContext");G.SimpleEditorContext=new G("SimpleEditorContext");G.EditorContextCopy=new G("EditorContextCopy");G.EditorContextPeek=new G("EditorContextPeek");G.EditorContextShare=new G("EditorContextShare");G.EditorTitle=new G("EditorTitle");G.EditorTitleRun=new G("EditorTitleRun");G.EditorTitleContext=new G("EditorTitleContext");G.EmptyEditorGroup=new G("EmptyEditorGroup");G.EmptyEditorGroupContext=new G("EmptyEditorGroupContext");G.ExplorerContext=new G("ExplorerContext");G.ExtensionContext=new G("ExtensionContext");G.GlobalActivity=new G("GlobalActivity");G.CommandCenter=new G("CommandCenter");G.LayoutControlMenuSubmenu=new G("LayoutControlMenuSubmenu");G.LayoutControlMenu=new G("LayoutControlMenu");G.MenubarMainMenu=new G("MenubarMainMenu");G.MenubarAppearanceMenu=new G("MenubarAppearanceMenu");G.MenubarDebugMenu=new G("MenubarDebugMenu");G.MenubarEditMenu=new G("MenubarEditMenu");G.MenubarCopy=new G("MenubarCopy");G.MenubarFileMenu=new G("MenubarFileMenu");G.MenubarGoMenu=new G("MenubarGoMenu");G.MenubarHelpMenu=new G("MenubarHelpMenu");G.MenubarLayoutMenu=new G("MenubarLayoutMenu");G.MenubarNewBreakpointMenu=new G("MenubarNewBreakpointMenu");G.MenubarPanelAlignmentMenu=new G("MenubarPanelAlignmentMenu");G.MenubarPanelPositionMenu=new G("MenubarPanelPositionMenu");G.MenubarPreferencesMenu=new G("MenubarPreferencesMenu");G.MenubarRecentMenu=new G("MenubarRecentMenu");G.MenubarSelectionMenu=new G("MenubarSelectionMenu");G.MenubarShare=new G("MenubarShare");G.MenubarSwitchEditorMenu=new G("MenubarSwitchEditorMenu");G.MenubarSwitchGroupMenu=new G("MenubarSwitchGroupMenu");G.MenubarTerminalMenu=new G("MenubarTerminalMenu");G.MenubarViewMenu=new G("MenubarViewMenu");G.MenubarHomeMenu=new G("MenubarHomeMenu");G.OpenEditorsContext=new G("OpenEditorsContext");G.ProblemsPanelContext=new G("ProblemsPanelContext");G.SCMChangeContext=new G("SCMChangeContext");G.SCMResourceContext=new G("SCMResourceContext");G.SCMResourceFolderContext=new G("SCMResourceFolderContext");G.SCMResourceGroupContext=new G("SCMResourceGroupContext");G.SCMSourceControl=new G("SCMSourceControl");G.SCMTitle=new G("SCMTitle");G.SearchContext=new G("SearchContext");G.StatusBarWindowIndicatorMenu=new G("StatusBarWindowIndicatorMenu");G.StatusBarRemoteIndicatorMenu=new G("StatusBarRemoteIndicatorMenu");G.TestItem=new G("TestItem");G.TestItemGutter=new G("TestItemGutter");G.TestPeekElement=new G("TestPeekElement");G.TestPeekTitle=new G("TestPeekTitle");G.TouchBarContext=new G("TouchBarContext");G.TitleBarContext=new G("TitleBarContext");G.TitleBarTitleContext=new G("TitleBarTitleContext");G.TunnelContext=new G("TunnelContext");G.TunnelPrivacy=new G("TunnelPrivacy");G.TunnelProtocol=new G("TunnelProtocol");G.TunnelPortInline=new G("TunnelInline");G.TunnelTitle=new G("TunnelTitle");G.TunnelLocalAddressInline=new G("TunnelLocalAddressInline");G.TunnelOriginInline=new G("TunnelOriginInline");G.ViewItemContext=new G("ViewItemContext");G.ViewContainerTitle=new G("ViewContainerTitle");G.ViewContainerTitleContext=new G("ViewContainerTitleContext");G.ViewTitle=new G("ViewTitle");G.ViewTitleContext=new G("ViewTitleContext");G.CommentThreadTitle=new G("CommentThreadTitle");G.CommentThreadActions=new G("CommentThreadActions");G.CommentTitle=new G("CommentTitle");G.CommentActions=new G("CommentActions");G.InteractiveToolbar=new G("InteractiveToolbar");G.InteractiveCellTitle=new G("InteractiveCellTitle");G.InteractiveCellDelete=new G("InteractiveCellDelete");G.InteractiveCellExecute=new G("InteractiveCellExecute");G.InteractiveInputExecute=new G("InteractiveInputExecute");G.NotebookToolbar=new G("NotebookToolbar");G.NotebookCellTitle=new G("NotebookCellTitle");G.NotebookCellDelete=new G("NotebookCellDelete");G.NotebookCellInsert=new G("NotebookCellInsert");G.NotebookCellBetween=new G("NotebookCellBetween");G.NotebookCellListTop=new G("NotebookCellTop");G.NotebookCellExecute=new G("NotebookCellExecute");G.NotebookCellExecutePrimary=new G("NotebookCellExecutePrimary");G.NotebookDiffCellInputTitle=new G("NotebookDiffCellInputTitle");G.NotebookDiffCellMetadataTitle=new G("NotebookDiffCellMetadataTitle");G.NotebookDiffCellOutputsTitle=new G("NotebookDiffCellOutputsTitle");G.NotebookOutputToolbar=new G("NotebookOutputToolbar");G.NotebookEditorLayoutConfigure=new G("NotebookEditorLayoutConfigure");G.NotebookKernelSource=new G("NotebookKernelSource");G.BulkEditTitle=new G("BulkEditTitle");G.BulkEditContext=new G("BulkEditContext");G.TimelineItemContext=new G("TimelineItemContext");G.TimelineTitle=new G("TimelineTitle");G.TimelineTitleContext=new G("TimelineTitleContext");G.TimelineFilterSubMenu=new G("TimelineFilterSubMenu");G.AccountsContext=new G("AccountsContext");G.PanelTitle=new G("PanelTitle");G.AuxiliaryBarTitle=new G("AuxiliaryBarTitle");G.TerminalInstanceContext=new G("TerminalInstanceContext");G.TerminalEditorInstanceContext=new G("TerminalEditorInstanceContext");G.TerminalNewDropdownContext=new G("TerminalNewDropdownContext");G.TerminalTabContext=new G("TerminalTabContext");G.TerminalTabEmptyAreaContext=new G("TerminalTabEmptyAreaContext");G.TerminalInlineTabContext=new G("TerminalInlineTabContext");G.WebviewContext=new G("WebviewContext");G.InlineCompletionsActions=new G("InlineCompletionsActions");G.NewFile=new G("NewFile");G.MergeToolbar=new G("MergeToolbar");G.MergeInput1Toolbar=new G("MergeToolbar1Toolbar");G.MergeInput2Toolbar=new G("MergeToolbar2Toolbar");const L_=bi("menuService"),Dl=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new J,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:s=>s===G.CommandPalette}}addCommand(s){return this.addCommands(fi.single(s))}addCommands(s){for(const e of s)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),ni(()=>{let e=!1;for(const t of s)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(s){return this._commands.get(s)}getCommands(){const s=new Map;return this._commands.forEach((e,t)=>s.set(t,e)),s}appendMenuItem(s,e){return this.appendMenuItems(fi.single({id:s,item:e}))}appendMenuItems(s){const e=new Set,t=new Sr;for(const{id:i,item:n}of s){let o=this._menuItems.get(i);o||(o=new Sr,this._menuItems.set(i,o)),t.push(o.push(n)),e.add(i)}return this._onDidChangeMenu.fire(e),ni(()=>{if(t.size>0){for(const i of t)i();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(s){let e;return this._menuItems.has(s)?e=[...this._menuItems.get(s)]:e=[],s===G.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(s){const e=new Set;for(const t of s)wb(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||s.push({command:t})})}};class IB extends Yy{constructor(e,t,i,n){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=i,this._options=n}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),i=t.getActions(this._options);t.dispose();for(const[,n]of i)n.length>0&&(e.push(...n),e.push(new Bo));return e.length&&e.pop(),e}}let Pg=class iee{constructor(e,t,i,n,o,r){var a,l;if(this.hideActions=n,this._commandService=r,this.id=e.id,this.label=(i==null?void 0:i.renderShortTitle)&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(l=typeof e.tooltip=="string"?e.tooltip:(a=e.tooltip)===null||a===void 0?void 0:a.value)!==null&&l!==void 0?l:"",this.enabled=!e.precondition||o.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const c=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=o.contextMatchesRules(c.condition),this.checked&&c.tooltip&&(this.tooltip=typeof c.tooltip=="string"?c.tooltip:c.tooltip.value),c.title&&(this.label=typeof c.title=="string"?c.title:c.title.value)}this.item=e,this.alt=t?new iee(t,void 0,i,n,o,r):void 0,this._options=i,Pi.isThemeIcon(e.icon)&&(this.class=yr.asClassName(e.icon))}dispose(){}run(...e){var t,i;let n=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(n=[...n,this._options.arg]),!((i=this._options)===null||i===void 0)&&i.shouldForwardArgs&&(n=[...n,...e]),this._commandService.executeCommand(this.id,...n)}};Pg=TLe([gq(4,jt),gq(5,fs)],Pg);class zT{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(gl===1){if(e&&e.win)return e.win}else if(gl===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=zT.bindToCurrentPlatform(e);if(t&&t.primary){const i=x3(t.primary,gl);i&&this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let i=0,n=t.secondary.length;i<n;i++){const o=t.secondary[i],r=x3(o,gl);r&&this._registerDefaultKeybinding(r,e.id,e.args,e.weight,-i-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Li.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&zT._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,i,n,o,r){gl===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:i,when:r,weight1:n,weight2:o,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(NLe)),this._cachedMergedKeybindings.slice(0)}}const ya=new zT,ILe={EditorModes:"platform.keybindingsRegistry"};Wn.add(ILe.EditorModes,ya);function NLe(s,e){if(s.weight1!==e.weight1)return s.weight1-e.weight1;if(s.command&&e.command){if(s.command<e.command)return-1;if(s.command>e.command)return 1}return s.weight2-e.weight2}const gu=bi("telemetryService");class zN{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=Je.and(i,this.precondition):i=this.precondition);const n={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};ya.registerKeybindingRule(n)}}Li.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){Dl.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class nC extends zN{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i){return this._implementations.push({priority:e,name:t,implementation:i}),this._implementations.sort((n,o)=>o.priority-n.priority),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n].implementation===i){this._implementations.splice(n,1);return}}}}runCommand(e,t){const i=e.get(fc);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const n of this._implementations){const o=n.implementation(e,t);if(o)return i.trace(`Command '${this.id}' was handled by '${n.name}'.`),typeof o=="boolean"?void 0:o}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class nee extends zN{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Fs extends zN{static bindToContribution(e){return class extends Fs{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,n,o){const r=e(n);r&&this._callback(r,o)}}}static runEditorCommand(e,t,i,n){const o=e.get(Vi),r=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(!!r)return r.invokeWithinContext(a=>{if(!!a.get(jt).contextMatchesRules(zr(i)))return n(a,r,t)})}runCommand(e,t){return Fs.runEditorCommand(e,t,this.precondition,(i,n,o)=>this.runEditorCommand(i,n,o))}}class ot extends Fs{constructor(e){super(ot.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function i(n){return n.menuId||(n.menuId=G.EditorContext),n.title||(n.title=e.label),n.when=Je.and(e.precondition,n.when),n}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(i)):e.contextMenuOpts&&t.push(i(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(gu).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class see extends ot{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((i,n)=>n[0]-i[0]),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i][1]===t){this._implementations.splice(i,1);return}}}}run(e,t,i){for(const n of this._implementations){const o=n[1](e,t,i);if(o)return typeof o=="boolean"?void 0:o}}}function Ed(s,e){Li.registerCommand(s,function(t,...i){const n=t.get(Zt),[o,r]=i;Qi(yt.isUri(o)),Qi(se.isIPosition(r));const a=t.get(Hn).getModel(o);if(a){const l=se.lift(r);return n.invokeFunction(e,a,l,...i.slice(2))}return t.get(Yr).createModelReference(o).then(l=>new Promise((c,d)=>{try{const f=n.invokeFunction(e,l.object.textEditorModel,se.lift(r),i.slice(2));c(f)}catch(f){d(f)}}).finally(()=>{l.dispose()}))})}function Be(s){return ml.INSTANCE.registerEditorCommand(s),s}function We(s){const e=new s;return ml.INSTANCE.registerEditorAction(e),e}function oee(s){return ml.INSTANCE.registerEditorAction(s),s}function ree(s){ml.INSTANCE.registerEditorAction(s)}function Ei(s,e){ml.INSTANCE.registerEditorContribution(s,e)}var Sm;(function(s){function e(r){return ml.INSTANCE.getEditorCommand(r)}s.getEditorCommand=e;function t(){return ml.INSTANCE.getEditorActions()}s.getEditorActions=t;function i(){return ml.INSTANCE.getEditorContributions()}s.getEditorContributions=i;function n(r){return ml.INSTANCE.getEditorContributions().filter(a=>r.indexOf(a.id)>=0)}s.getSomeEditorContributions=n;function o(){return ml.INSTANCE.getDiffEditorContributions()}s.getDiffEditorContributions=o})(Sm||(Sm={}));const RLe={EditorCommonContributions:"editor.contributions"};class ml{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}ml.INSTANCE=new ml;Wn.add(RLe.EditorCommonContributions,ml.INSTANCE);function dL(s){return s.register(),s}const aee=dL(new nC({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:G.MenubarEditMenu,group:"1_do",title:b({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:G.CommandPalette,group:"",title:b("undo","Undo"),order:1}]}));dL(new nee(aee,{id:"default:undo",precondition:void 0}));const lee=dL(new nC({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:G.MenubarEditMenu,group:"1_do",title:b({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:G.CommandPalette,group:"",title:b("redo","Redo"),order:1}]}));dL(new nee(lee,{id:"default:redo",precondition:void 0}));const ALe=dL(new nC({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:G.MenubarSelectionMenu,group:"1_basic",title:b({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:G.CommandPalette,group:"",title:b("selectAll","Select All"),order:1}]}));var MLe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},OLe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let Qy=class{constructor(e,t){}dispose(){}};Qy.ID="editor.contrib.markerDecorations";Qy=MLe([OLe(1,EB)],Qy);Ei(Qy.ID,Qy);class cee extends ge{constructor(e,t){super(),this._onDidChange=this._register(new J),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){!this._resizeObserver&&this._referenceDomElement&&(this._resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this._resizeObserver.observe(this._referenceDomElement))}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,n=0;t?(i=t.width,n=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,n=this._referenceDomElement.clientHeight),i=Math.max(5,i),n=Math.max(5,n),(this._width!==i||this._height!==n)&&(this._width=i,this._height=n,e&&this._onDidChange.fire())}}class wg{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=wg._read(e,this.key),i=o=>wg._read(e,o),n=(o,r)=>wg._write(e,o,r);this.migrate(t,i,n)}static _read(e,t){if(typeof e>"u")return;const i=t.indexOf(".");if(i>=0){const n=t.substring(0,i);return this._read(e[n],t.substring(i+1))}return e[t]}static _write(e,t,i){const n=t.indexOf(".");if(n>=0){const o=t.substring(0,n);e[o]=e[o]||{},this._write(e[o],t.substring(n+1),i);return}e[t]=i}}wg.items=[];function sC(s,e){wg.items.push(new wg(s,e))}function pu(s,e){sC(s,(t,i,n)=>{if(typeof t<"u"){for(const[o,r]of e)if(t===o){n(s,r);return}}})}function PLe(s){wg.items.forEach(e=>e.apply(s))}pu("wordWrap",[[!0,"on"],[!1,"off"]]);pu("lineNumbers",[[!0,"on"],[!1,"off"]]);pu("cursorBlinking",[["visible","solid"]]);pu("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);pu("renderLineHighlight",[[!0,"line"],[!1,"none"]]);pu("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);pu("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);pu("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);pu("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);pu("autoIndent",[[!1,"advanced"],[!0,"full"]]);pu("matchBrackets",[[!0,"always"],[!1,"never"]]);sC("autoClosingBrackets",(s,e,t)=>{s===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});sC("renderIndentGuides",(s,e,t)=>{typeof s<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!s))});sC("highlightActiveIndentGuide",(s,e,t)=>{typeof s<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!s))});const FLe={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};sC("suggest.filteredTypes",(s,e,t)=>{if(s&&typeof s=="object"){for(const i of Object.entries(FLe))s[i[0]]===!1&&typeof e(`suggest.${i[1]}`)>"u"&&t(`suggest.${i[1]}`,!1);t("suggest.filteredTypes",void 0)}});sC("quickSuggestions",(s,e,t)=>{if(typeof s=="boolean"){const i=s?"on":"off";t("quickSuggestions",{comments:i,strings:i,other:i})}});class BLe{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new J,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus!==e&&(this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus))}}const UT=new BLe,nf=bi("accessibilityService"),hL=new st("accessibilityModeEnabled",!1);var VLe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},WLe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let R3=class extends ge{constructor(e,t,i,n){super(),this._accessibilityService=n,this._onDidChange=this._register(new J),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new J),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._computeOptionsMemory=new OX,this.isSimpleWidget=e,this._containerObserver=this._register(new cee(i,t.dimension)),this._rawOptions=pq(t),this._validatedOptions=tg.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(10)&&this._containerObserver.startObserving(),this._register(Yh.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(UT.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(h3.onDidChange(()=>this._recomputeOptions())),this._register(f0.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=tg.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=ym.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:UT.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return tg.computeOptions(this._validatedOptions,n)}_readEnvConfiguration(){return{extraEditorClassName:zLe(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:_g||Ka,pixelRatio:f0.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return h3.readFontInfo(e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=pq(e);!tg.applyUpdate(this._rawOptions,t)||(this._validatedOptions=tg.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=HLe(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}};R3=VLe([WLe(3,nf)],R3);function HLe(s){let e=0;for(;s;)s=Math.floor(s/10),e++;return e||1}function zLe(){let s="";return!Gh&&!cB&&(s+="no-user-select "),Gh&&(s+="no-minimap-shadow ",s+="enable-user-select "),mi&&(s+="mac "),s}class ULe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class $Le{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class tg{static validateOptions(e){const t=new ULe;for(const i of pb){const n=i.name==="_never_"?void 0:e[i.name];t._write(i.id,i.validate(n))}return t}static computeOptions(e,t){const i=new $Le;for(const n of pb)i._write(n.id,n.compute(t,i,e._read(n.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?$a(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!tg._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let n=!1;for(const o of pb){const r=!tg._deepEquals(e._read(o.id),t._read(o.id));i[o.id]=r,r&&(n=!0)}return n?new MX(i):null}static applyUpdate(e,t){let i=!1;for(const n of pb)if(t.hasOwnProperty(n.name)){const o=n.applyUpdate(e[n.name],t[n.name]);e[n.name]=o.newValue,i=i||o.didChange}return i}}function pq(s){const e=vh(s);return PLe(e),e}function Ss(s,e,t){let i=null,n=null;if(typeof t.value=="function"?(i="value",n=t.value,n.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",n=t.get),!n)throw new Error("not supported");const o=`$memoize$${e}`;t[i]=function(...r){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,r)}),this[o]}}var jLe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},vn;(function(s){s.Tap="-monaco-gesturetap",s.Change="-monaco-gesturechange",s.Start="-monaco-gesturestart",s.End="-monaco-gesturesend",s.Contextmenu="-monaco-gesturecontextmenu"})(vn||(vn={}));class Zi extends ge{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(Le(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(Le(document,"touchend",e=>this.onTouchEnd(e))),this._register(Le(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return Zi.isTouchDevice()?(Zi.INSTANCE||(Zi.INSTANCE=new Zi),Zi.INSTANCE.targets.push(e),{dispose:()=>{Zi.INSTANCE.targets=Zi.INSTANCE.targets.filter(t=>t!==e)}}):ge.None}static ignoreTarget(e){return Zi.isTouchDevice()?(Zi.INSTANCE||(Zi.INSTANCE=new Zi),Zi.INSTANCE.ignoreTargets.push(e),{dispose:()=>{Zi.INSTANCE.ignoreTargets=Zi.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):ge.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,n=e.targetTouches.length;i<n;i++){const o=e.targetTouches.item(i);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};const r=this.newGestureEvent(vn.Start,o.target);r.pageX=o.pageX,r.pageY=o.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){const t=Date.now(),i=Object.keys(this.activeTouches).length;for(let n=0,o=e.changedTouches.length;n<o;n++){const r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("move of an UNKNOWN touch",r);continue}const a=this.activeTouches[r.identifier],l=Date.now()-a.initialTimeStamp;if(l<Zi.HOLD_DELAY&&Math.abs(a.initialPageX-cl(a.rollingPageX))<30&&Math.abs(a.initialPageY-cl(a.rollingPageY))<30){const c=this.newGestureEvent(vn.Tap,a.initialTarget);c.pageX=cl(a.rollingPageX),c.pageY=cl(a.rollingPageY),this.dispatchEvent(c)}else if(l>=Zi.HOLD_DELAY&&Math.abs(a.initialPageX-cl(a.rollingPageX))<30&&Math.abs(a.initialPageY-cl(a.rollingPageY))<30){const c=this.newGestureEvent(vn.Contextmenu,a.initialTarget);c.pageX=cl(a.rollingPageX),c.pageY=cl(a.rollingPageY),this.dispatchEvent(c)}else if(i===1){const c=cl(a.rollingPageX),d=cl(a.rollingPageY),f=cl(a.rollingTimestamps)-a.rollingTimestamps[0],g=c-a.rollingPageX[0],m=d-a.rollingPageY[0],_=this.targets.filter(C=>a.initialTarget instanceof Node&&C.contains(a.initialTarget));this.inertia(_,t,Math.abs(g)/f,g>0?1:-1,c,Math.abs(m)/f,m>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(vn.End,a.initialTarget)),delete this.activeTouches[r.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===vn.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>Zi.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===vn.Change||e.type===vn.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,i,n,o,r,a,l){this.handle=cu(()=>{const c=Date.now(),d=c-t;let f=0,g=0,m=!0;i+=Zi.SCROLL_FRICTION*d,r+=Zi.SCROLL_FRICTION*d,i>0&&(m=!1,f=n*i*d),r>0&&(m=!1,g=a*r*d);const _=this.newGestureEvent(vn.Change);_.translationX=f,_.translationY=g,e.forEach(C=>C.dispatchEvent(_)),m||this.inertia(e,c,i,n,o+f,r,a,l+g)})}onTouchMove(e){const t=Date.now();for(let i=0,n=e.changedTouches.length;i<n;i++){const o=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}const r=this.activeTouches[o.identifier],a=this.newGestureEvent(vn.Change,r.initialTarget);a.translationX=o.pageX-cl(r.rollingPageX),a.translationY=o.pageY-cl(r.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(o.pageX),r.rollingPageY.push(o.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}Zi.SCROLL_FRICTION=-.005;Zi.HOLD_DELAY=700;Zi.CLEAR_TAP_COUNT_TIME=400;jLe([Ss],Zi,"isTouchDevice",null);class oC{constructor(){this._hooks=new Ae,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,n,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=o;let r=e;try{e.setPointerCapture(t),this._hooks.add(ni(()=>{e.releasePointerCapture(t)}))}catch{r=window}this._hooks.add(Le(r,it.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(Le(r,it.POINTER_UP,a=>this.stopMonitoring(!0)))}}function yg(s,e){const t=Math.pow(10,e);return Math.round(s*t)/t}class pi{constructor(e,t,i,n=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=yg(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Kc{constructor(e,t,i,n){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=yg(Math.max(Math.min(1,t),0),3),this.l=yg(Math.max(Math.min(1,i),0),3),this.a=yg(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,o=e.a,r=Math.max(t,i,n),a=Math.min(t,i,n);let l=0,c=0;const d=(a+r)/2,f=r-a;if(f>0){switch(c=Math.min(d<=.5?f/(2*d):f/(2-2*d),1),r){case t:l=(i-n)/f+(i<n?6:0);break;case i:l=(n-t)/f+2;break;case n:l=(t-i)/f+4;break}l*=60,l=Math.round(l)}return new Kc(l,c,d,o)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:n,a:o}=e;let r,a,l;if(i===0)r=a=l=n;else{const c=n<.5?n*(1+i):n+i-n*i,d=2*n-c;r=Kc._hue2rgb(d,c,t+1/3),a=Kc._hue2rgb(d,c,t),l=Kc._hue2rgb(d,c,t-1/3)}return new pi(Math.round(r*255),Math.round(a*255),Math.round(l*255),o)}}class sd{constructor(e,t,i,n){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=yg(Math.max(Math.min(1,t),0),3),this.v=yg(Math.max(Math.min(1,i),0),3),this.a=yg(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,o=Math.max(t,i,n),r=Math.min(t,i,n),a=o-r,l=o===0?0:a/o;let c;return a===0?c=0:o===t?c=((i-n)/a%6+6)%6:o===i?c=(n-t)/a+2:c=(t-i)/a+4,new sd(Math.round(c*60),l,o,e.a)}static toRGBA(e){const{h:t,s:i,v:n,a:o}=e,r=n*i,a=r*(1-Math.abs(t/60%2-1)),l=n-r;let[c,d,f]=[0,0,0];return t<60?(c=r,d=a):t<120?(c=a,d=r):t<180?(d=r,f=a):t<240?(d=a,f=r):t<300?(c=a,f=r):t<=360&&(c=r,f=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),f=Math.round((f+l)*255),new pi(c,d,f,o)}}class oe{constructor(e){if(e)if(e instanceof pi)this.rgba=e;else if(e instanceof Kc)this._hsla=e,this.rgba=Kc.toRGBA(e);else if(e instanceof sd)this._hsva=e,this.rgba=sd.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return oe.Format.CSS.parseHex(e)||oe.red}get hsla(){return this._hsla?this._hsla:Kc.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:sd.fromRGBA(this.rgba)}equals(e){return!!e&&pi.equals(this.rgba,e.rgba)&&Kc.equals(this.hsla,e.hsla)&&sd.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=oe._relativeLuminanceForComponent(this.rgba.r),t=oe._relativeLuminanceForComponent(this.rgba.g),i=oe._relativeLuminanceForComponent(this.rgba.b),n=.2126*e+.7152*t+.0722*i;return yg(n,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new oe(new Kc(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new oe(new Kc(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:n,a:o}=this.rgba;return new oe(new pi(t,i,n,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new oe(new pi(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=oe.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),o=t.getRelativeLuminance();return i=i*(o-n)/o,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),o=t.getRelativeLuminance();return i=i*(n-o)/n,e.darken(i)}}oe.white=new oe(new pi(255,255,255,1));oe.black=new oe(new pi(0,0,0,1));oe.red=new oe(new pi(255,0,0,1));oe.blue=new oe(new pi(0,0,255,1));oe.green=new oe(new pi(0,255,0,1));oe.cyan=new oe(new pi(0,255,255,1));oe.lightgrey=new oe(new pi(211,211,211,1));oe.transparent=new oe(new pi(0,0,0,0));(function(s){(function(e){(function(t){function i(m){return m.rgba.a===1?`rgb(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b})`:s.Format.CSS.formatRGBA(m)}t.formatRGB=i;function n(m){return`rgba(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b}, ${+m.rgba.a.toFixed(2)})`}t.formatRGBA=n;function o(m){return m.hsla.a===1?`hsl(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%)`:s.Format.CSS.formatHSLA(m)}t.formatHSL=o;function r(m){return`hsla(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%, ${m.hsla.a.toFixed(2)})`}t.formatHSLA=r;function a(m){const _=m.toString(16);return _.length!==2?"0"+_:_}function l(m){return`#${a(m.rgba.r)}${a(m.rgba.g)}${a(m.rgba.b)}`}t.formatHex=l;function c(m,_=!1){return _&&m.rgba.a===1?s.Format.CSS.formatHex(m):`#${a(m.rgba.r)}${a(m.rgba.g)}${a(m.rgba.b)}${a(Math.round(m.rgba.a*255))}`}t.formatHexA=c;function d(m){return m.isOpaque()?s.Format.CSS.formatHex(m):s.Format.CSS.formatRGBA(m)}t.format=d;function f(m){const _=m.length;if(_===0||m.charCodeAt(0)!==35)return null;if(_===7){const C=16*g(m.charCodeAt(1))+g(m.charCodeAt(2)),S=16*g(m.charCodeAt(3))+g(m.charCodeAt(4)),x=16*g(m.charCodeAt(5))+g(m.charCodeAt(6));return new s(new pi(C,S,x,1))}if(_===9){const C=16*g(m.charCodeAt(1))+g(m.charCodeAt(2)),S=16*g(m.charCodeAt(3))+g(m.charCodeAt(4)),x=16*g(m.charCodeAt(5))+g(m.charCodeAt(6)),L=16*g(m.charCodeAt(7))+g(m.charCodeAt(8));return new s(new pi(C,S,x,L/255))}if(_===4){const C=g(m.charCodeAt(1)),S=g(m.charCodeAt(2)),x=g(m.charCodeAt(3));return new s(new pi(16*C+C,16*S+S,16*x+x))}if(_===5){const C=g(m.charCodeAt(1)),S=g(m.charCodeAt(2)),x=g(m.charCodeAt(3)),L=g(m.charCodeAt(4));return new s(new pi(16*C+C,16*S+S,16*x+x,(16*L+L)/255))}return null}t.parseHex=f;function g(m){switch(m){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(s.Format||(s.Format={}))})(oe||(oe={}));function uee(s){return`--vscode-${s.replace(/\./g,"-")}`}const dee={ColorContribution:"base.contributions.colors"};class KLe{constructor(){this._onDidChangeSchema=new J,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,n=!1,o){const r={id:e,description:i,defaults:t,needsTransparency:n,deprecationMessage:o};this.colorsById[e]=r;const a={type:"string",description:i,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i&&i.defaults){const n=i.defaults[t.type];return fh(n,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,i)=>{const n=t.indexOf(".")===-1?0:1,o=i.indexOf(".")===-1?0:1;return n!==o?n-o:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const UN=new KLe;Wn.add(dee.ColorContribution,UN);function qLe(s){return s===null||typeof s.hcLight>"u"&&(s.hcDark===null||typeof s.hcDark=="string"?s.hcLight=s.hcDark:s.hcLight=s.light),s}function j(s,e,t,i,n){return UN.registerColor(s,qLe(e),t,i,n)}const Oe=j("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},b("foreground","Overall foreground color. This color is only used if not overridden by a component."));j("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},b("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));const GLe=j("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},b("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));j("descriptionForeground",{light:"#717171",dark:pt(Oe,.7),hcDark:pt(Oe,.7),hcLight:pt(Oe,.7)},b("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const Ck=j("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},b("iconForeground","The default color for icons in the workbench.")),wl=j("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#0F4A85"},b("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),si=j("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},b("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),En=j("contrastActiveBorder",{light:null,dark:null,hcDark:wl,hcLight:wl},b("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));j("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},b("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));j("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:oe.black,hcLight:"#292929"},b("textSeparatorForeground","Color for text separators."));const $N=j("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},b("textLinkForeground","Foreground color for links in text.")),jN=j("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},b("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));j("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#D7BA7D",hcLight:"#292929"},b("textPreformatForeground","Foreground color for preformatted text segments."));j("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hcDark:null,hcLight:"#F2F2F2"},b("textBlockQuoteBackground","Background color for block quotes in text."));j("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:oe.white,hcLight:"#292929"},b("textBlockQuoteBorder","Border color for block quotes in text."));const hee=j("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:oe.black,hcLight:"#F2F2F2"},b("textCodeBlockBackground","Background color for code blocks in text.")),Qc=j("widget.shadow",{dark:pt(oe.black,.36),light:pt(oe.black,.16),hcDark:null,hcLight:null},b("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),KN=j("input.background",{dark:"#3C3C3C",light:oe.white,hcDark:oe.black,hcLight:oe.white},b("inputBoxBackground","Input box background.")),qN=j("input.foreground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("inputBoxForeground","Input box foreground.")),GN=j("input.border",{dark:null,light:null,hcDark:si,hcLight:si},b("inputBoxBorder","Input box border.")),$T=j("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hcDark:si,hcLight:si},b("inputBoxActiveOptionBorder","Border color of activated options in input fields."));j("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},b("inputOption.hoverBackground","Background color of activated options in input fields."));const jT=j("inputOption.activeBackground",{dark:pt(wl,.4),light:pt(wl,.2),hcDark:oe.transparent,hcLight:oe.transparent},b("inputOption.activeBackground","Background hover color of options in input fields.")),KT=j("inputOption.activeForeground",{dark:oe.white,light:oe.black,hcDark:null,hcLight:Oe},b("inputOption.activeForeground","Foreground color of activated options in input fields."));j("input.placeholderForeground",{light:pt(Oe,.5),dark:pt(Oe,.5),hcDark:pt(Oe,.7),hcLight:pt(Oe,.7)},b("inputPlaceholderForeground","Input box foreground color for placeholder text."));const NB=j("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:oe.black,hcLight:oe.white},b("inputValidationInfoBackground","Input validation background color for information severity.")),RB=j("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Oe},b("inputValidationInfoForeground","Input validation foreground color for information severity.")),AB=j("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:si,hcLight:si},b("inputValidationInfoBorder","Input validation border color for information severity.")),MB=j("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:oe.black,hcLight:oe.white},b("inputValidationWarningBackground","Input validation background color for warning severity.")),OB=j("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Oe},b("inputValidationWarningForeground","Input validation foreground color for warning severity.")),PB=j("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:si,hcLight:si},b("inputValidationWarningBorder","Input validation border color for warning severity.")),FB=j("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:oe.black,hcLight:oe.white},b("inputValidationErrorBackground","Input validation background color for error severity.")),BB=j("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Oe},b("inputValidationErrorForeground","Input validation foreground color for error severity.")),VB=j("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:si,hcLight:si},b("inputValidationErrorBorder","Input validation border color for error severity.")),Rh=j("dropdown.background",{dark:"#3C3C3C",light:oe.white,hcDark:oe.black,hcLight:oe.white},b("dropdownBackground","Dropdown background."));j("dropdown.listBackground",{dark:null,light:null,hcDark:oe.black,hcLight:oe.white},b("dropdownListBackground","Dropdown list background."));const dm=j("dropdown.foreground",{dark:"#F0F0F0",light:null,hcDark:oe.white,hcLight:Oe},b("dropdownForeground","Dropdown foreground.")),wk=j("dropdown.border",{dark:Rh,light:"#CECECE",hcDark:si,hcLight:si},b("dropdownBorder","Dropdown border."));j("checkbox.background",{dark:Rh,light:Rh,hcDark:Rh,hcLight:Rh},b("checkbox.background","Background color of checkbox widget."));j("checkbox.foreground",{dark:dm,light:dm,hcDark:dm,hcLight:dm},b("checkbox.foreground","Foreground color of checkbox widget."));j("checkbox.border",{dark:wk,light:wk,hcDark:wk,hcLight:wk},b("checkbox.border","Border color of checkbox widget."));const Ow=j("button.foreground",{dark:oe.white,light:oe.white,hcDark:oe.white,hcLight:oe.white},b("buttonForeground","Button foreground color."));j("button.separator",{dark:pt(Ow,.4),light:pt(Ow,.4),hcDark:pt(Ow,.4),hcLight:pt(Ow,.4)},b("buttonSeparator","Button separator color."));const A3=j("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},b("buttonBackground","Button background color.")),YLe=j("button.hoverBackground",{dark:su(A3,.2),light:x_(A3,.2),hcDark:null,hcLight:null},b("buttonHoverBackground","Button background color when hovering."));j("button.border",{dark:si,light:si,hcDark:si,hcLight:si},b("buttonBorder","Button border color."));j("button.secondaryForeground",{dark:oe.white,light:oe.white,hcDark:oe.white,hcLight:Oe},b("buttonSecondaryForeground","Secondary button foreground color."));const mq=j("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:oe.white},b("buttonSecondaryBackground","Secondary button background color."));j("button.secondaryHoverBackground",{dark:su(mq,.2),light:x_(mq,.2),hcDark:null,hcLight:null},b("buttonSecondaryHoverBackground","Secondary button background color when hovering."));const yb=j("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:oe.black,hcLight:"#0F4A85"},b("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),Sb=j("badge.foreground",{dark:oe.white,light:"#333",hcDark:oe.white,hcLight:oe.white},b("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),rC=j("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},b("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),hm=j("scrollbarSlider.background",{dark:oe.fromHex("#797979").transparent(.4),light:oe.fromHex("#646464").transparent(.4),hcDark:pt(si,.6),hcLight:pt(si,.4)},b("scrollbarSliderBackground","Scrollbar slider background color.")),fm=j("scrollbarSlider.hoverBackground",{dark:oe.fromHex("#646464").transparent(.7),light:oe.fromHex("#646464").transparent(.7),hcDark:pt(si,.8),hcLight:pt(si,.8)},b("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),gm=j("scrollbarSlider.activeBackground",{dark:oe.fromHex("#BFBFBF").transparent(.4),light:oe.fromHex("#000000").transparent(.6),hcDark:si,hcLight:si},b("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),ZLe=j("progressBar.background",{dark:oe.fromHex("#0E70C0"),light:oe.fromHex("#0E70C0"),hcDark:si,hcLight:si},b("progressBarBackground","Background color of the progress bar that can show for long running operations.")),QLe=j("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},b("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),od=j("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},b("editorError.foreground","Foreground color of error squigglies in the editor.")),fee=j("editorError.border",{dark:null,light:null,hcDark:oe.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},b("errorBorder","Border color of error boxes in the editor.")),XLe=j("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},b("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Ha=j("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD37",hcLight:"#895503"},b("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),b0=j("editorWarning.border",{dark:null,light:null,hcDark:oe.fromHex("#FFCC00").transparent(.8),hcLight:"#"},b("warningBorder","Border color of warning boxes in the editor.")),JLe=j("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},b("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),jr=j("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},b("editorInfo.foreground","Foreground color of info squigglies in the editor.")),qT=j("editorInfo.border",{dark:null,light:null,hcDark:oe.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},b("infoBorder","Border color of info boxes in the editor.")),exe=j("editorHint.foreground",{dark:oe.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},b("editorHint.foreground","Foreground color of hint squigglies in the editor.")),txe=j("editorHint.border",{dark:null,light:null,hcDark:oe.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},b("hintBorder","Border color of hint boxes in the editor."));j("sash.hoverBorder",{dark:wl,light:wl,hcDark:wl,hcLight:wl},b("sashActiveBorder","Border color of active sashes."));const Es=j("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:oe.black,hcLight:oe.white},b("editorBackground","Editor background color.")),za=j("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:oe.white,hcLight:Oe},b("editorForeground","Editor default foreground color."));j("editorStickyScroll.background",{light:Es,dark:Es,hcDark:Es,hcLight:Es},b("editorStickyScrollBackground","Sticky scroll background color for the editor"));j("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:oe.fromHex("#0F4A85").transparent(.1)},b("editorStickyScrollHoverBackground","Sticky scroll on hover background color for the editor"));const hs=j("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:oe.white},b("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Xc=j("editorWidget.foreground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Ah=j("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:si,hcLight:si},b("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),ixe=j("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},b("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),_q=j("quickInput.background",{dark:hs,light:hs,hcDark:hs,hcLight:hs},b("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),nxe=j("quickInput.foreground",{dark:Xc,light:Xc,hcDark:Xc,hcLight:Xc},b("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),sxe=j("quickInputTitle.background",{dark:new oe(new pi(255,255,255,.105)),light:new oe(new pi(0,0,0,.06)),hcDark:"#000000",hcLight:oe.white},b("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),oxe=j("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:oe.white,hcLight:"#0F4A85"},b("pickerGroupForeground","Quick picker color for grouping labels.")),rxe=j("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:oe.white,hcLight:"#0F4A85"},b("pickerGroupBorder","Quick picker color for grouping borders.")),axe=j("keybindingLabel.background",{dark:new oe(new pi(128,128,128,.17)),light:new oe(new pi(221,221,221,.4)),hcDark:oe.transparent,hcLight:oe.transparent},b("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),lxe=j("keybindingLabel.foreground",{dark:oe.fromHex("#CCCCCC"),light:oe.fromHex("#555555"),hcDark:oe.white,hcLight:Oe},b("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),cxe=j("keybindingLabel.border",{dark:new oe(new pi(51,51,51,.6)),light:new oe(new pi(204,204,204,.4)),hcDark:new oe(new pi(111,195,223)),hcLight:si},b("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),uxe=j("keybindingLabel.bottomBorder",{dark:new oe(new pi(68,68,68,.6)),light:new oe(new pi(187,187,187,.4)),hcDark:new oe(new pi(111,195,223)),hcLight:Oe},b("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Mh=j("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},b("editorSelectionBackground","Color of the editor selection.")),dxe=j("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:oe.white},b("editorSelectionForeground","Color of the selected text for high contrast.")),WB=j("editor.inactiveSelectionBackground",{light:pt(Mh,.5),dark:pt(Mh,.5),hcDark:pt(Mh,.7),hcLight:pt(Mh,.5)},b("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),HB=j("editor.selectionHighlightBackground",{light:Sq(Mh,Es,.3,.6),dark:Sq(Mh,Es,.3,.6),hcDark:null,hcLight:null},b("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),hxe=j("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:En,hcLight:En},b("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),fxe=j("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},b("editorFindMatch","Color of the current search match.")),Oh=j("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},b("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),gxe=j("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},b("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),pxe=j("editor.findMatchBorder",{light:null,dark:null,hcDark:En,hcLight:En},b("editorFindMatchBorder","Border color of the current search match.")),pm=j("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:En,hcLight:En},b("findMatchHighlightBorder","Border color of the other search matches.")),mxe=j("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:pt(En,.4),hcLight:pt(En,.4)},b("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);j("searchEditor.findMatchBackground",{light:pt(Oh,.66),dark:pt(Oh,.66),hcDark:Oh,hcLight:Oh},b("searchEditor.queryMatch","Color of the Search Editor query matches."));j("searchEditor.findMatchBorder",{light:pt(pm,.66),dark:pt(pm,.66),hcDark:pm,hcLight:pm},b("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));const _xe=j("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},b("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),jm=j("editorHoverWidget.background",{light:hs,dark:hs,hcDark:hs,hcLight:hs},b("hoverBackground","Background color of the editor hover.")),zB=j("editorHoverWidget.foreground",{light:Xc,dark:Xc,hcDark:Xc,hcLight:Xc},b("hoverForeground","Foreground color of the editor hover.")),UB=j("editorHoverWidget.border",{light:Ah,dark:Ah,hcDark:Ah,hcLight:Ah},b("hoverBorder","Border color of the editor hover.")),vxe=j("editorHoverWidget.statusBarBackground",{dark:su(jm,.2),light:x_(jm,.05),hcDark:hs,hcLight:hs},b("statusBarBackground","Background color of the editor hover status bar.")),$B=j("editorLink.activeForeground",{dark:"#4E94CE",light:oe.blue,hcDark:oe.cyan,hcLight:"#292929"},b("activeLinkForeground","Color of active links.")),Ph=j("editorInlayHint.foreground",{dark:pt(Sb,.8),light:pt(Sb,.8),hcDark:Sb,hcLight:Sb},b("editorInlayHintForeground","Foreground color of inline hints")),Fh=j("editorInlayHint.background",{dark:pt(yb,.6),light:pt(yb,.3),hcDark:yb,hcLight:yb},b("editorInlayHintBackground","Background color of inline hints")),bxe=j("editorInlayHint.typeForeground",{dark:Ph,light:Ph,hcDark:Ph,hcLight:Ph},b("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),Cxe=j("editorInlayHint.typeBackground",{dark:Fh,light:Fh,hcDark:Fh,hcLight:Fh},b("editorInlayHintBackgroundTypes","Background color of inline hints for types")),wxe=j("editorInlayHint.parameterForeground",{dark:Ph,light:Ph,hcDark:Ph,hcLight:Ph},b("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),yxe=j("editorInlayHint.parameterBackground",{dark:Fh,light:Fh,hcDark:Fh,hcLight:Fh},b("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),Sxe=j("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},b("editorLightBulbForeground","The color used for the lightbulb actions icon.")),Lxe=j("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},b("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),M3=new oe(new pi(155,185,85,.2)),O3=new oe(new pi(255,0,0,.2)),gee=j("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c66",hcDark:null,hcLight:null},b("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),pee=j("diffEditor.removedTextBackground",{dark:"#ff000066",light:"#ff00004d",hcDark:null,hcLight:null},b("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),xxe=j("diffEditor.insertedLineBackground",{dark:M3,light:M3,hcDark:null,hcLight:null},b("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Dxe=j("diffEditor.removedLineBackground",{dark:O3,light:O3,hcDark:null,hcLight:null},b("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),kxe=j("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},b("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),Exe=j("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},b("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),Txe=j("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},b("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),Ixe=j("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},b("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),Nxe=j("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},b("diffEditorInsertedOutline","Outline color for the text that got inserted.")),Rxe=j("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},b("diffEditorRemovedOutline","Outline color for text that got removed.")),Axe=j("diffEditor.border",{dark:null,light:null,hcDark:si,hcLight:si},b("diffEditorBorder","Border color between the two text editors.")),Mxe=j("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},b("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),Oxe=j("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},b("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Pxe=j("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},b("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Fxe=j("list.focusOutline",{dark:wl,light:wl,hcDark:En,hcLight:En},b("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Bxe=j("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},b("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Bh=j("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:oe.fromHex("#0F4A85").transparent(.1)},b("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),rd=j("list.activeSelectionForeground",{dark:oe.white,light:oe.white,hcDark:null,hcLight:null},b("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Pw=j("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},b("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Vxe=j("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:oe.fromHex("#0F4A85").transparent(.1)},b("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Wxe=j("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},b("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Hxe=j("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},b("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),zxe=j("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},b("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Uxe=j("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},b("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),$xe=j("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:oe.fromHex("#0F4A85").transparent(.1)},b("listHoverBackground","List/Tree background when hovering over items using the mouse.")),jxe=j("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},b("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),Kxe=j("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},b("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),sc=j("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:wl,hcLight:wl},b("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),yk=j("list.focusHighlightForeground",{dark:sc,light:vDe(Bh,sc,"#BBE7FF"),hcDark:sc,hcLight:sc},b("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));j("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},b("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));j("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},b("listErrorForeground","Foreground color of list items containing errors."));j("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},b("listWarningForeground","Foreground color of list items containing warnings."));const qxe=j("listFilterWidget.background",{light:x_(hs,0),dark:su(hs,0),hcDark:hs,hcLight:hs},b("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),Gxe=j("listFilterWidget.outline",{dark:oe.transparent,light:oe.transparent,hcDark:"#f38518",hcLight:"#007ACC"},b("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),Yxe=j("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:si,hcLight:si},b("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),Zxe=j("listFilterWidget.shadow",{dark:Qc,light:Qc,hcDark:Qc,hcLight:Qc},b("listFilterWidgetShadow","Shadown color of the type filter widget in lists and trees."));j("list.filterMatchBackground",{dark:Oh,light:Oh,hcDark:null,hcLight:null},b("listFilterMatchHighlight","Background color of the filtered match."));j("list.filterMatchBorder",{dark:pm,light:pm,hcDark:si,hcLight:En},b("listFilterMatchHighlightBorder","Border color of the filtered match."));const Qxe=j("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},b("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),Xxe=j("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},b("tableColumnsBorder","Table border color between columns.")),Jxe=j("tree.tableOddRowsBackground",{dark:pt(Oe,.04),light:pt(Oe,.04),hcDark:null,hcLight:null},b("tableOddRowsBackgroundColor","Background color for odd table rows."));j("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},b("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. "));const vq=j("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,b("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),Fw=j("quickInputList.focusForeground",{dark:rd,light:rd,hcDark:rd,hcLight:rd},b("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),Bw=j("quickInputList.focusIconForeground",{dark:Pw,light:Pw,hcDark:Pw,hcLight:Pw},b("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),Vw=j("quickInputList.focusBackground",{dark:Xy(vq,Bh),light:Xy(vq,Bh),hcDark:null,hcLight:null},b("quickInput.listFocusBackground","Quick picker background color for the focused item.")),eDe=j("menu.border",{dark:null,light:null,hcDark:si,hcLight:si},b("menuBorder","Border color of menus.")),tDe=j("menu.foreground",{dark:dm,light:Oe,hcDark:dm,hcLight:dm},b("menuForeground","Foreground color of menu items.")),iDe=j("menu.background",{dark:Rh,light:Rh,hcDark:Rh,hcLight:Rh},b("menuBackground","Background color of menu items.")),nDe=j("menu.selectionForeground",{dark:rd,light:rd,hcDark:rd,hcLight:rd},b("menuSelectionForeground","Foreground color of the selected menu item in menus.")),sDe=j("menu.selectionBackground",{dark:Bh,light:Bh,hcDark:Bh,hcLight:Bh},b("menuSelectionBackground","Background color of the selected menu item in menus.")),oDe=j("menu.selectionBorder",{dark:null,light:null,hcDark:En,hcLight:En},b("menuSelectionBorder","Border color of the selected menu item in menus.")),rDe=j("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:si,hcLight:si},b("menuSeparatorBackground","Color of a separator menu item in menus.")),P3=j("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},b("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));j("toolbar.hoverOutline",{dark:null,light:null,hcDark:En,hcLight:En},b("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));j("toolbar.activeBackground",{dark:su(P3,.1),light:x_(P3,.1),hcDark:null,hcLight:null},b("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));j("editor.snippetTabstopHighlightBackground",{dark:new oe(new pi(124,124,124,.3)),light:new oe(new pi(10,50,100,.2)),hcDark:new oe(new pi(124,124,124,.3)),hcLight:new oe(new pi(10,50,100,.2))},b("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));j("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},b("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));j("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},b("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));j("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new oe(new pi(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},b("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));j("breadcrumb.foreground",{light:pt(Oe,.8),dark:pt(Oe,.8),hcDark:pt(Oe,.8),hcLight:pt(Oe,.8)},b("breadcrumbsFocusForeground","Color of focused breadcrumb items."));j("breadcrumb.background",{light:Es,dark:Es,hcDark:Es,hcLight:Es},b("breadcrumbsBackground","Background color of breadcrumb items."));j("breadcrumb.focusForeground",{light:x_(Oe,.2),dark:su(Oe,.1),hcDark:su(Oe,.1),hcLight:su(Oe,.1)},b("breadcrumbsFocusForeground","Color of focused breadcrumb items."));j("breadcrumb.activeSelectionForeground",{light:x_(Oe,.2),dark:su(Oe,.1),hcDark:su(Oe,.1),hcLight:su(Oe,.1)},b("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));j("breadcrumbPicker.background",{light:hs,dark:hs,hcDark:hs,hcLight:hs},b("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const mee=.5,bq=oe.fromHex("#40C8AE").transparent(mee),Cq=oe.fromHex("#40A6FF").transparent(mee),wq=oe.fromHex("#606060").transparent(.4),oc=.4,C0=1,Lb=j("merge.currentHeaderBackground",{dark:bq,light:bq,hcDark:null,hcLight:null},b("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);j("merge.currentContentBackground",{dark:pt(Lb,oc),light:pt(Lb,oc),hcDark:pt(Lb,oc),hcLight:pt(Lb,oc)},b("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const xb=j("merge.incomingHeaderBackground",{dark:Cq,light:Cq,hcDark:null,hcLight:null},b("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);j("merge.incomingContentBackground",{dark:pt(xb,oc),light:pt(xb,oc),hcDark:pt(xb,oc),hcLight:pt(xb,oc)},b("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Db=j("merge.commonHeaderBackground",{dark:wq,light:wq,hcDark:null,hcLight:null},b("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);j("merge.commonContentBackground",{dark:pt(Db,oc),light:pt(Db,oc),hcDark:pt(Db,oc),hcLight:pt(Db,oc)},b("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const w0=j("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},b("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));j("editorOverviewRuler.currentContentForeground",{dark:pt(Lb,C0),light:pt(Lb,C0),hcDark:w0,hcLight:w0},b("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));j("editorOverviewRuler.incomingContentForeground",{dark:pt(xb,C0),light:pt(xb,C0),hcDark:w0,hcLight:w0},b("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));j("editorOverviewRuler.commonContentForeground",{dark:pt(Db,C0),light:pt(Db,C0),hcDark:w0,hcLight:w0},b("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const jB=j("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},b("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),_ee=j("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},b("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),kb=j("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},b("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),YN=j("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},b("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),yq=j("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},b("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),aDe=j("minimap.errorHighlight",{dark:new oe(new pi(255,18,18,.7)),light:new oe(new pi(255,18,18,.7)),hcDark:new oe(new pi(255,50,50,1)),hcLight:"#B5200D"},b("minimapError","Minimap marker color for errors.")),lDe=j("minimap.warningHighlight",{dark:Ha,light:Ha,hcDark:b0,hcLight:b0},b("overviewRuleWarning","Minimap marker color for warnings.")),cDe=j("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},b("minimapBackground","Minimap background color.")),uDe=j("minimap.foregroundOpacity",{dark:oe.fromHex("#000f"),light:oe.fromHex("#000f"),hcDark:oe.fromHex("#000f"),hcLight:oe.fromHex("#000f")},b("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),dDe=j("minimapSlider.background",{light:pt(hm,.5),dark:pt(hm,.5),hcDark:pt(hm,.5),hcLight:pt(hm,.5)},b("minimapSliderBackground","Minimap slider background color.")),hDe=j("minimapSlider.hoverBackground",{light:pt(fm,.5),dark:pt(fm,.5),hcDark:pt(fm,.5),hcLight:pt(fm,.5)},b("minimapSliderHoverBackground","Minimap slider background color when hovering.")),fDe=j("minimapSlider.activeBackground",{light:pt(gm,.5),dark:pt(gm,.5),hcDark:pt(gm,.5),hcLight:pt(gm,.5)},b("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),gDe=j("problemsErrorIcon.foreground",{dark:od,light:od,hcDark:od,hcLight:od},b("problemsErrorIconForeground","The color used for the problems error icon.")),pDe=j("problemsWarningIcon.foreground",{dark:Ha,light:Ha,hcDark:Ha,hcLight:Ha},b("problemsWarningIconForeground","The color used for the problems warning icon.")),mDe=j("problemsInfoIcon.foreground",{dark:jr,light:jr,hcDark:jr,hcLight:jr},b("problemsInfoIconForeground","The color used for the problems info icon."));j("charts.foreground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("chartsForeground","The foreground color used in charts."));j("charts.lines",{dark:pt(Oe,.5),light:pt(Oe,.5),hcDark:pt(Oe,.5),hcLight:pt(Oe,.5)},b("chartsLines","The color used for horizontal lines in charts."));j("charts.red",{dark:od,light:od,hcDark:od,hcLight:od},b("chartsRed","The red color used in chart visualizations."));j("charts.blue",{dark:jr,light:jr,hcDark:jr,hcLight:jr},b("chartsBlue","The blue color used in chart visualizations."));j("charts.yellow",{dark:Ha,light:Ha,hcDark:Ha,hcLight:Ha},b("chartsYellow","The yellow color used in chart visualizations."));j("charts.orange",{dark:kb,light:kb,hcDark:kb,hcLight:kb},b("chartsOrange","The orange color used in chart visualizations."));j("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},b("chartsGreen","The green color used in chart visualizations."));j("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},b("chartsPurple","The purple color used in chart visualizations."));function _De(s,e){var t,i,n;switch(s.op){case 0:return(t=fh(s.value,e))===null||t===void 0?void 0:t.darken(s.factor);case 1:return(i=fh(s.value,e))===null||i===void 0?void 0:i.lighten(s.factor);case 2:return(n=fh(s.value,e))===null||n===void 0?void 0:n.transparent(s.factor);case 3:for(const o of s.values){const r=fh(o,e);if(r)return r}return;case 5:return fh(e.defines(s.if)?s.then:s.else,e);case 4:{const o=fh(s.value,e);if(!o)return;const r=fh(s.background,e);return r?o.isDarkerThan(r)?oe.getLighterColor(o,r,s.factor).transparent(s.transparency):oe.getDarkerColor(o,r,s.factor).transparent(s.transparency):o.transparent(s.factor*s.transparency)}default:throw gN()}}function x_(s,e){return{op:0,value:s,factor:e}}function su(s,e){return{op:1,value:s,factor:e}}function pt(s,e){return{op:2,value:s,factor:e}}function Xy(...s){return{op:3,values:s}}function vDe(s,e,t){return{op:5,if:s,then:e,else:t}}function Sq(s,e,t,i){return{op:4,value:s,background:e,factor:t,transparency:i}}function fh(s,e){if(s!==null){if(typeof s=="string")return s[0]==="#"?oe.fromHex(s):e.getColor(s);if(s instanceof oe)return s;if(typeof s=="object")return _De(s,e)}}const vee="vscode://schemas/workbench-colors",bee=Wn.as(xN.JSONContribution);bee.registerSchema(vee,UN.getColorSchema());const Lq=new Xi(()=>bee.notifySchemaChanged(vee),200);UN.onDidChangeSchema(()=>{Lq.isScheduled()||Lq.schedule()});class KB{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new Cee(this.x-zh.scrollX,this.y-zh.scrollY)}}class Cee{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new KB(this.clientX+zh.scrollX,this.clientY+zh.scrollY)}}class bDe{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n,this._editorPagePositionBrand=void 0}}class CDe{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function wee(s){const e=Oo(s);return new bDe(e.left,e.top,e.width,e.height)}function yee(s,e,t){const i=e.width/s.offsetWidth,n=e.height/s.offsetHeight,o=(t.x-e.x)/i,r=(t.y-e.y)/n;return new CDe(o,r)}class Fg extends nd{constructor(e,t,i){super(e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new KB(this.posx,this.posy),this.editorPos=wee(i),this.relativePos=yee(i,this.editorPos,this.pos)}}class wDe{constructor(e){this._editorViewDomNode=e}_create(e){return new Fg(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return Le(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return Le(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return Le(e,it.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return Le(e,it.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onMouseLeave(e,t){return Le(e,it.MOUSE_LEAVE,i=>{t(this._create(i))})}onMouseMove(e,t){return Le(e,"mousemove",i=>t(this._create(i)))}}class yDe{constructor(e){this._editorViewDomNode=e}_create(e){return new Fg(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return Le(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return Le(e,it.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onPointerLeave(e,t){return Le(e,it.POINTER_LEAVE,i=>{t(this._create(i))})}onPointerMove(e,t){return Le(e,"pointermove",i=>t(this._create(i)))}}class SDe extends ge{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new oC),this._keydownListener=null}startMonitoring(e,t,i,n,o){this._keydownListener=Ps(document,"keydown",r=>{r.toKeybinding().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,r.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,r=>{n(new Fg(r,!0,this._editorViewDomNode))},r=>{this._keydownListener.dispose(),o(r)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class fL{constructor(e){this._editor=e,this._instanceId=++fL._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new Xi(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let i=this._rules.get(t);if(!i){const n=this._counter++;i=new LDe(t,`dyn-rule-${this._instanceId}-${n}`,Ky(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,i)}return i}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}fL._idPool=0;class LDe{constructor(e,t,i,n){this.key=e,this.className=t,this.properties=n,this._referenceCount=0,this._styleElement=Il(i),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let i=`.${e} {`;for(const n in t){const o=t[n];let r;typeof o=="object"?r=`var(${uee(o.id)})`:r=o;const a=xDe(n);i+=`
	${a}: ${r};`}return i+=`
}`,i}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function xDe(s){return s.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class gL extends ge{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,n=e.length;i<n;i++){const o=e[i];switch(o.type){case 0:this.onCompositionStart(o)&&(t=!0);break;case 1:this.onCompositionEnd(o)&&(t=!0);break;case 2:this.onConfigurationChanged(o)&&(t=!0);break;case 3:this.onCursorStateChanged(o)&&(t=!0);break;case 4:this.onDecorationsChanged(o)&&(t=!0);break;case 5:this.onFlushed(o)&&(t=!0);break;case 6:this.onFocusChanged(o)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case 8:this.onLineMappingChanged(o)&&(t=!0);break;case 9:this.onLinesChanged(o)&&(t=!0);break;case 10:this.onLinesDeleted(o)&&(t=!0);break;case 11:this.onLinesInserted(o)&&(t=!0);break;case 12:this.onRevealRangeRequest(o)&&(t=!0);break;case 13:this.onScrollChanged(o)&&(t=!0);break;case 15:this.onTokensChanged(o)&&(t=!0);break;case 14:this.onThemeChanged(o)&&(t=!0);break;case 16:this.onTokensColorsChanged(o)&&(t=!0);break;case 17:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}}class Qa extends gL{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class vd{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const i=[];let n=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[n++]=this.read(e)),e=e.parentElement;const o=new Uint8Array(n);for(let r=0;r<n;r++)o[r]=i[n-r-1];return o}}class DDe{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class kDe extends DDe{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class EDe{constructor(e,t,i){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i}}class ZN{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let i=0,n=e.length;i<n;i++){const o=e[i];t[i]=new ZN(o.left,o.width)}return t}toString(){return`[${this.left},${this.width}]`}}class Kb{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class TDe{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class IDe{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class f4{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,n,o){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(i,n),r.getClientRects()}catch{return null}finally{this._detachRange(r,o)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Kb.compare);const t=[];let i=0,n=e[0];for(let o=1,r=e.length;o<r;o++){const a=e[o];n.left+n.width+.9>=a.left?n.width=Math.max(n.width,a.left+a.width-n.left):(t[i++]=n,n=a)}return t[i++]=n,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||e.length===0)return null;const n=[];for(let o=0,r=e.length;o<r;o++){const a=e[o];n[o]=new Kb(Math.max(0,(a.left-t)/i),a.width/i)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,i,n,o,r,a,l){const d=e.children.length-1;if(0>d)return null;if(t=Math.min(d,Math.max(0,t)),n=Math.min(d,Math.max(0,n)),t===n&&i===o&&i===0&&!e.children[t].firstChild){const _=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(_,r,a)}t!==n&&n>0&&o===0&&(n--,o=1073741824);let f=e.children[t].firstChild,g=e.children[n].firstChild;if((!f||!g)&&(!f&&i===0&&t>0&&(f=e.children[t-1].firstChild,i=1073741824),!g&&o===0&&n>0&&(g=e.children[n-1].firstChild,o=1073741824)),!f||!g)return null;i=Math.min(f.textContent.length,Math.max(0,i)),o=Math.min(g.textContent.length,Math.max(0,o));const m=this._readClientRects(f,i,g,o,l);return this._createHorizontalRangesFromClientRects(m,r,a)}}const NDe=function(){return tu?!0:!(Wo||Ka||Gh)}();let qb=!0;class xq{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1,this.endNode=t}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}}class Dq{constructor(e,t){this.themeType=t;const i=e.options,n=i.get(46);this.renderWhitespace=i.get(90),this.renderControlCharacters=i.get(85),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.useMonospaceOptimizations=n.isMonospace&&!i.get(29),this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(61),this.stopRenderingLineAfter=i.get(107),this.fontLigatures=i.get(47)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class Xu{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=Di(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Vo(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,n){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=i.getViewLineRenderingData(e),r=this._options,a=pa.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let l=null;if(Vo(r.themeType)||this._options.renderWhitespace==="selection"){const g=i.selections;for(const m of g){if(m.endLineNumber<e||m.startLineNumber>e)continue;const _=m.startLineNumber===e?m.startColumn:o.minColumn,C=m.endLineNumber===e?m.endColumn:o.maxColumn;_<C&&(Vo(r.themeType)||this._options.renderWhitespace!=="selection"?a.push(new pa(_,C,"inline-selected-text",0)):(l||(l=[]),l.push(new sSe(_-1,C-1))))}}const c=new ep(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,a,o.tabSize,o.startVisibleColumn,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==Va.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(c))return!1;n.appendASCIIString('<div style="top:'),n.appendASCIIString(String(t)),n.appendASCIIString("px;height:"),n.appendASCIIString(String(this._options.lineHeight)),n.appendASCIIString('px;" class="'),n.appendASCIIString(Xu.CLASS_NAME),n.appendASCIIString('">');const d=uL(c,n);n.appendASCIIString("</div>");let f=null;return qb&&NDe&&o.isBasicASCII&&r.useMonospaceOptimizations&&d.containsForeignElements===0&&o.content.length<300&&c.lineTokens.getCount()<100&&(f=new Sk(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping)),f||(f=Lee(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=f,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof Sk:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof Sk?this._renderedViewLine.monospaceAssumptionsAreValid():qb}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof Sk&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,n){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const o=this._renderedViewLine.input.stopRenderingLineAfter;let r=!1;o!==-1&&t>o+1&&i>o+1&&(r=!0),o!==-1&&t>o+1&&(t=o+1),o!==-1&&i>o+1&&(i=o+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,i,n);return a&&a.length>0?new IDe(r,a):null}getColumnOfNodeOffset(e,t,i){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,i):1}}Xu.CLASS_NAME="view-line";class Sk{constructor(e,t,i){this.domNode=e,this.input=t,this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return qb;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),qb=!1),qb}toSlowRenderedLine(){return Lee(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,n){const o=this._getCharPosition(t),r=this._getCharPosition(i);return[new Kb(o,r-o)]}_getCharPosition(e){const t=this._characterMapping.getHorizontalOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,i){const n=t.textContent.length;let o=-1;for(;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new SB(o,i),n)}}class See{constructor(e,t,i,n,o){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!n||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,a=this._characterMapping.length;r<=a;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,n){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const o=this._readPixelOffset(this.domNode,e,t,n);if(o===-1)return null;const r=this._readPixelOffset(this.domNode,e,i,n);return r===-1?null:[new Kb(o,r-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,n)}_readVisibleRangesForRange(e,t,i,n,o){if(i===n){const r=this._readPixelOffset(e,t,i,o);return r===-1?null:[new Kb(r,0)]}else return this._readRawVisibleRangesForRange(e,i,n,o)}_readPixelOffset(e,t,i,n){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const o=this._getReadingTarget(e);return o.firstChild?o.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const o=this._pixelOffsetCache[i];if(o!==-1)return o;const r=this._actualReadPixelOffset(e,t,i,n);return this._pixelOffsetCache[i]=r,r}return this._actualReadPixelOffset(e,t,i,n)}_actualReadPixelOffset(e,t,i,n){if(this._characterMapping.length===0){const l=f4.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,n.clientRectDeltaLeft,n.clientRectScale,n.endNode);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const o=this._characterMapping.getDomPosition(i),r=f4.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,n.clientRectDeltaLeft,n.clientRectScale,n.endNode);if(!r||r.length===0)return-1;const a=r[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,n){if(t===1&&i===this._characterMapping.length)return[new Kb(0,this.getWidth())];const o=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(i);return f4.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,r.partIndex,r.charIndex,n.clientRectDeltaLeft,n.clientRectScale,n.endNode)}getColumnOfNodeOffset(e,t,i){const n=t.textContent.length;let o=-1;for(;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new SB(o,i),n)}}class RDe extends See{_readVisibleRangesForRange(e,t,i,n,o){const r=super._readVisibleRangesForRange(e,t,i,n,o);if(!r||r.length===0||i===n||i===1&&n===this._characterMapping.length)return r;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,n,o);if(a!==-1){const l=r[r.length-1];l.left<a&&(l.width=a-l.left)}}return r}}const Lee=function(){return _g?ADe:MDe}();function ADe(s,e,t,i,n){return new RDe(s,e,t,i,n)}function MDe(s,e,t,i,n){return new See(s,e,t,i,n)}class ks{static _nextVisibleColumn(e,t,i){return e===9?ks.nextRenderTabStop(t,i):Ng(e)||oB(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const n=Math.min(t-1,e.length),o=e.substring(0,n),r=new ET(o);let a=0;for(;!r.eol();){const l=kT(o,n,r.offset);r.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const n=e.length,o=new ET(e);let r=0,a=1;for(;!o.eol();){const l=kT(e,n,o.offset);o.nextGraphemeLength();const c=this._nextVisibleColumn(l,r,i),d=o.offset+1;if(c>=t){const f=t-r;return c-t<f?d:a}r=c,a=d}return n+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}class Jy{static whitespaceVisibleColumn(e,t,i){const n=e.length;let o=0,r=-1,a=-1;for(let l=0;l<n;l++){if(l===t)return[r,a,o];switch(o%i===0&&(r=l,a=o),e.charCodeAt(l)){case 32:o+=1;break;case 9:o=ks.nextRenderTabStop(o,i);break;default:return[-1,-1,-1]}}return t===n?[r,a,o]:[-1,-1,-1]}static atomicPosition(e,t,i,n){const o=e.length,[r,a,l]=Jy.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(n){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(r===-1)return-1;let g=a;for(let m=r;m<o;++m){if(g===a+i)return r;switch(e.charCodeAt(m)){case 32:g+=1;break;case 9:g=ks.nextRenderTabStop(g,i);break;default:return-1}}return g===a+i?r:-1}const d=ks.nextRenderTabStop(l,i);let f=l;for(let g=t;g<o;g++){if(f===d)return g;switch(e.charCodeAt(g)){case 32:f+=1;break;case 9:f=ks.nextRenderTabStop(f,i);break;default:return-1}}return f===d?o:-1}}class Gf{constructor(e=null){this.hitTarget=e,this.type=0}}class F3{constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var im;(function(s){function e(t,i,n){const o=t.getPositionFromDOMInfo(i,n);return o?new F3(o,i,null):new Gf(i)}s.createFromDOMInfo=e})(im||(im={}));class ODe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class Pr{static _deduceRage(e,t=null){return!t&&e?new M(e.lineNumber,e.column,e.lineNumber,e.column):t!=null?t:null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,n,o,r){return{type:e,element:t,mouseColumn:i,position:n,range:o,detail:r}}static createViewZone(e,t,i,n,o){return{type:e,element:t,mouseColumn:i,position:n,range:this._deduceRage(n),detail:o}}static createContentText(e,t,i,n,o){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,n),detail:o}}static createContentEmpty(e,t,i,n){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:n}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t)}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class Ql{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class y0{constructor(e,t,i){this.viewModel=e.viewModel;const n=e.configuration.options;this.layoutInfo=n.get(133),this.viewDomNode=t.viewDomNode,this.lineHeight=n.get(61),this.stickyTabStops=n.get(106),this.typicalHalfwidthCharacterWidth=n.get(46).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return y0.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const n=i.verticalOffset+i.height/2,o=e.viewModel.getLineCount();let r=null,a,l=null;return i.afterLineNumber!==o&&(l=new se(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(r=new se(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),l===null?a=r:r===null?a=l:t<n?a=r:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:r,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const n=this._context.viewModel.getLineCount(),o=this._context.viewModel.getLineMaxColumn(n);return{range:new M(n,o,n,o),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new M(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return y0._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class PDe{constructor(e,t,i,n){this.editorPos=t,this.pos=i,this.relativePos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,To._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class qB extends PDe{constructor(e,t,i,n,o){super(e,t,i,n),this._ctx=e,o?(this.target=o,this.targetPath=vd.collect(o,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?ks.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return Pr.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return Pr.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,n){return Pr.createMargin(e,this.target,this._getMouseColumn(t),t,i,n)}fulfillViewZone(e,t,i){return Pr.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return Pr.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return Pr.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return Pr.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return Pr.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return Pr.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new qB(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}const kq={isAfterLines:!0};function g4(s){return{isAfterLines:!1,horizontalDistanceToText:s}}class To{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=vd.collect(t,this._viewHelper.viewDomNode);return!!(Ql.isChildOfContentWidgets(i)||Ql.isChildOfOverflowingContentWidgets(i)||Ql.isChildOfOverlayWidgets(i))}createMouseTarget(e,t,i,n,o){const r=new y0(this._context,this._viewHelper,e),a=new qB(r,t,i,n,o);try{return To._createMouseTarget(r,a,!1)}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t,i){if(t.target===null){if(i)return t.fulfillUnknown();const r=To._doHitTest(e,t);return r.type===1?To.createMouseTargetFromHitTestPosition(e,t,r.spanNode,r.position,r.injectedText):this._createMouseTarget(e,t.withTarget(r.hitTarget),!0)}const n=t;let o=null;return o=o||To._hitTestContentWidget(e,n),o=o||To._hitTestOverlayWidget(e,n),o=o||To._hitTestMinimap(e,n),o=o||To._hitTestScrollbarSlider(e,n),o=o||To._hitTestViewZone(e,n),o=o||To._hitTestMargin(e,n),o=o||To._hitTestViewCursor(e,n),o=o||To._hitTestTextArea(e,n),o=o||To._hitTestViewLines(e,n,i),o=o||To._hitTestScrollbar(e,n),o||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(Ql.isChildOfContentWidgets(t.targetPath)||Ql.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(Ql.isChildOfOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const n of i)if(t.target===n.domNode)return t.fulfillContentText(n.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,n=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(const r of i){if(n<r.contentLeft||n>r.contentLeft+r.width)continue;const a=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(a<=o&&o<=a+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const n=t.isInContentArea?8:5;return t.fulfillViewZone(n,i.position,i)}return null}static _hitTestTextArea(e,t){return Ql.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),n=i.range.getStartPosition();let o=Math.abs(t.relativePos.x);const r={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};return o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth?t.fulfillMargin(2,n,i.range,r):(o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,n,i.range,r):(o-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,n,i.range,r)))}return null}static _hitTestViewLines(e,t,i){if(!Ql.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new se(1,1),kq);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const o=e.viewModel.getLineCount(),r=e.viewModel.getLineMaxColumn(o);return t.fulfillContentEmpty(new se(o,r),kq)}if(i){if(Ql.isStrictChildOfViewLines(t.targetPath)){const o=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(o)===0){const a=e.getLineWidth(o),l=g4(t.mouseContentHorizontalOffset-a);return t.fulfillContentEmpty(new se(o,1),l)}const r=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>=r){const a=g4(t.mouseContentHorizontalOffset-r),l=new se(o,e.viewModel.getLineMaxColumn(o));return t.fulfillContentEmpty(l,a)}}return t.fulfillUnknown()}const n=To._doHitTest(e,t);return n.type===1?To.createMouseTargetFromHitTestPosition(e,t,n.spanNode,n.position,n.injectedText):this._createMouseTarget(e,t.withTarget(n.hitTarget),!0)}static _hitTestMinimap(e,t){if(Ql.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new se(i,n))}return null}static _hitTestScrollbarSlider(e,t){if(Ql.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new se(n,o))}}return null}static _hitTestScrollbar(e,t){if(Ql.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new se(i,n))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(133),n=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return To._getMouseColumn(n,t.get(46).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,n,o){const r=n.lineNumber,a=n.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){const S=g4(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(n,S)}const c=e.visibleRangeForPosition(r,a);if(!c)return t.fulfillUnknown(n);const d=c.left;if(t.mouseContentHorizontalOffset===d)return t.fulfillContentText(n,null,{mightBeForeignElement:!!o,injectedText:o});const f=[];if(f.push({offset:c.left,column:a}),a>1){const S=e.visibleRangeForPosition(r,a-1);S&&f.push({offset:S.left,column:a-1})}const g=e.viewModel.getLineMaxColumn(r);if(a<g){const S=e.visibleRangeForPosition(r,a+1);S&&f.push({offset:S.left,column:a+1})}f.sort((S,x)=>S.offset-x.offset);const m=t.pos.toClientCoordinates(),_=i.getBoundingClientRect(),C=_.left<=m.clientX&&m.clientX<=_.right;for(let S=1;S<f.length;S++){const x=f[S-1],L=f[S];if(x.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=L.offset){const k=new M(r,x.column,r,L.column),T=Math.abs(x.offset-t.mouseContentHorizontalOffset),A=Math.abs(L.offset-t.mouseContentHorizontalOffset),O=T<A?new se(r,x.column):new se(r,L.column);return t.fulfillContentText(O,k,{mightBeForeignElement:!C||!!o,injectedText:o})}}return t.fulfillContentText(n,null,{mightBeForeignElement:!C||!!o,injectedText:o})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.getVerticalOffsetForLineNumber(i)+Math.floor(e.lineHeight/2);let r=t.pos.y+(o-t.mouseVerticalOffset);r<=t.editorPos.y&&(r=t.editorPos.y+1),r>=t.editorPos.y+t.editorPos.height&&(r=t.editorPos.y+t.editorPos.height-1);const a=new KB(t.pos.x,r),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return l.type===1?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=Hm(e.viewDomNode);let n;if(i?typeof i.caretRangeFromPoint>"u"?n=FDe(i,t.clientX,t.clientY):n=i.caretRangeFromPoint(t.clientX,t.clientY):n=document.caretRangeFromPoint(t.clientX,t.clientY),!n||!n.startContainer)return new Gf;const o=n.startContainer;if(o.nodeType===o.TEXT_NODE){const r=o.parentNode,a=r?r.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Xu.CLASS_NAME?im.createFromDOMInfo(e,r,n.startOffset):new Gf(o.parentNode)}else if(o.nodeType===o.ELEMENT_NODE){const r=o.parentNode,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Xu.CLASS_NAME?im.createFromDOMInfo(e,o,o.textContent.length):new Gf(o)}return new Gf}static _doHitTestWithCaretPositionFromPoint(e,t){const i=document.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const n=i.offsetNode.parentNode,o=n?n.parentNode:null,r=o?o.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===Xu.CLASS_NAME?im.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new Gf(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const n=i.offsetNode.parentNode,o=n&&n.nodeType===n.ELEMENT_NODE?n.className:null,r=n?n.parentNode:null,a=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(o===Xu.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return im.createFromDOMInfo(e,l,0)}else if(a===Xu.CLASS_NAME)return im.createFromDOMInfo(e,i.offsetNode,0)}return new Gf(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:n}=t.model.getOptions(),o=Jy.atomicPosition(i,e.column-1,n,2);return o!==-1?new se(e.lineNumber,o+1):e}static _doHitTest(e,t){let i=new Gf;if(typeof document.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),i.type===1){const n=e.viewModel.getInjectedTextAt(i.position),o=e.viewModel.normalizePosition(i.position,2);(n||!o.equals(i.position))&&(i=new F3(o,i.spanNode,n))}return i.type===1&&e.stickyTabStops&&(i=new F3(this._snapToSoftTabBoundary(i.position,e.viewModel),i.spanNode,i.injectedText)),i}}function FDe(s,e,t){const i=document.createRange();let n=s.elementFromPoint(e,t);if(n!==null){for(;n&&n.firstChild&&n.firstChild.nodeType!==n.firstChild.TEXT_NODE&&n.lastChild&&n.lastChild.firstChild;)n=n.lastChild;const o=n.getBoundingClientRect(),r=window.getComputedStyle(n,null).getPropertyValue("font"),a=n.innerText;let l=o.left,c=0,d;if(e>o.left+o.width)c=a.length;else{const f=mm.getInstance();for(let g=0;g<a.length+1;g++){if(d=f.getCharWidth(a.charAt(g),r)/2,l+=d,e<l){c=g;break}l+=d}}i.setStart(n.firstChild,c),i.setEnd(n.firstChild,c)}return i}class mm{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return mm._INSTANCE||(mm._INSTANCE=new mm),mm._INSTANCE}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const n=this._canvas.getContext("2d");n.font=t;const r=n.measureText(e).width;return this._cache[i]=r,r}}mm._INSTANCE=null;class GB extends gL{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new To(this._context,i),this._mouseDownOperation=this._register(new BDe(this._context,this.viewController,this.viewHelper,(a,l)=>this._createMouseTarget(a,l),a=>this._getMouseColumn(a))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(133).height;const n=new wDe(this.viewHelper.viewDomNode);this._register(n.onContextMenu(this.viewHelper.viewDomNode,a=>this._onContextMenu(a,!0))),this._register(n.onMouseMove(this.viewHelper.viewDomNode,a=>{this._onMouseMove(a),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=Le(document,"mousemove",l=>{this.viewHelper.viewDomNode.contains(l.target)||this._onMouseLeave(new Fg(l,!1,this.viewHelper.viewDomNode))}))})),this._register(n.onMouseUp(this.viewHelper.viewDomNode,a=>this._onMouseUp(a))),this._register(n.onMouseLeave(this.viewHelper.viewDomNode,a=>this._onMouseLeave(a)));let o=0;this._register(n.onPointerDown(this.viewHelper.viewDomNode,(a,l)=>{o=l})),this._register(Le(this.viewHelper.viewDomNode,it.POINTER_UP,a=>{this._mouseDownOperation.onPointerUp()})),this._register(n.onMouseDown(this.viewHelper.viewDomNode,a=>this._onMouseDown(a,o)));const r=a=>{if(this.viewController.emitMouseWheel(a),!this._context.configuration.options.get(70))return;const l=new m0(a);if(mi?(a.metaKey||a.ctrlKey)&&!a.shiftKey&&!a.altKey:a.ctrlKey&&!a.metaKey&&!a.shiftKey&&!a.altKey){const d=Yh.getZoomLevel(),f=l.deltaY>0?1:-1;Yh.setZoomLevel(d+f),l.preventDefault(),l.stopPropagation()}};this._register(Le(this.viewHelper.viewDomNode,it.MOUSE_WHEEL,r,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(133)){const t=this._context.configuration.options.get(133).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const n=new Cee(e,t).toPageCoordinates(),o=wee(this.viewHelper.viewDomNode);if(n.y<o.y||n.y>o.y+o.height||n.x<o.x||n.x>o.x+o.width)return null;const r=yee(this.viewHelper.viewDomNode,o,n);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,n,r,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const n=Hm(this.viewHelper.viewDomNode);n&&(i=n.elementsFromPoint(e.posx,e.posy).find(o=>this.viewHelper.viewDomNode.contains(o)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),n=i.type===6||i.type===7,o=i.type===2||i.type===3||i.type===4,r=i.type===3,a=this._context.configuration.options.get(100),l=i.type===8||i.type===5,c=i.type===9;let d=e.leftButton||e.middleButton;mi&&e.leftButton&&e.ctrlKey&&(d=!1);const f=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(n||r&&a))f(),this._mouseDownOperation.start(i.type,e,t);else if(o)e.preventDefault();else if(l){const g=i.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(g.viewZoneId)&&(f(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(f(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class BDe extends ge{constructor(e,t,i,n,o){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._createMouseTarget=n,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new SDe(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new Za),this._mouseState=new QN,this._currentSelection=new et(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);!t||(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const o=this._context.configuration.options;if(!o.get(83)&&o.get(31)&&!o.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,r=>this._onMouseDownThenMove(r),r=>{const a=this._findMousePosition(this._lastMouseEvent,!1);r&&r instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){!this._isActive||this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);!e||this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0)},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,n=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(n.getCurrentScrollTop()-(t.y-e.posy),0),l=y0.getZoneAtCoord(this._context,a);if(l){const d=this._helpPositionJumpOverViewZone(l);if(d)return Pr.createOutsideEditor(o,d)}const c=n.getLineNumberAtVerticalOffset(a);return Pr.createOutsideEditor(o,new se(c,1))}if(e.posy>t.y+t.height){const a=n.getCurrentScrollTop()+e.relativePos.y,l=y0.getZoneAtCoord(this._context,a);if(l){const d=this._helpPositionJumpOverViewZone(l);if(d)return Pr.createOutsideEditor(o,d)}const c=n.getLineNumberAtVerticalOffset(a);return Pr.createOutsideEditor(o,new se(c,i.getLineMaxColumn(c)))}const r=n.getLineNumberAtVerticalOffset(n.getCurrentScrollTop()+e.relativePos.y);return e.posx<t.x?Pr.createOutsideEditor(o,new se(r,1)):e.posx>t.x+t.width?Pr.createOutsideEditor(o,new se(r,i.getLineMaxColumn(r))):null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const n=this._createMouseTarget(e,t);if(!n.position)return null;if(n.type===8||n.type===5){const r=this._helpPositionJumpOverViewZone(n.detail);if(r)return Pr.createViewZone(n.type,n.element,n.mouseColumn,r,n.detail)}return n}_helpPositionJumpOverViewZone(e){const t=new se(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,n=e.positionAfter;return i&&n?i.isBefore(t)?i:n:null}_dispatchMouse(e,t){!e.position||this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class QN{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>QN.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}QN.CLEAR_MOUSE_DOWN_COUNT_TIME=400;class ao{constructor(e,t,i,n,o){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selectionStartPosition=n,this.selectionEndPosition=o}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e){return new ao(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new ao(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const n=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,n,-1)}if(e>=this.selectionEnd){const n=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,-1)}_finishDeduceEditorPosition(e,t,i){let n=0,o=-1;for(;(o=t.indexOf(`
`,o+1))!==-1;)n++;return[e,i*t.length,n]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const n=Math.min(Fm(e.value,t.value),e.selectionStart,t.selectionStart),o=Math.min(Fy(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(n,e.value.length-o);const r=t.value.substring(n,t.value.length-o),a=e.selectionStart-n,l=e.selectionEnd-n,c=t.selectionStart-n,d=t.selectionEnd-n;if(c===d){const g=e.selectionStart-n;return{text:r,replacePrevCharCnt:g,replaceNextCharCnt:0,positionDelta:0}}const f=l-a;return{text:r,replacePrevCharCnt:f,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(Fm(e.value,t.value),e.selectionEnd),n=Math.min(Fy(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(i,e.value.length-n),r=t.value.substring(i,t.value.length-n);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:o.length-a,positionDelta:l-r.length}}}ao.EMPTY=new ao("",0,0,null,null);class Eb{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,n=i+1,o=i+t;return new M(n,1,o+1,1)}static fromEditorSelection(e,t,i,n,o){const r=Eb._getPageOfLine(i.startLineNumber,n),a=Eb._getRangeForPage(r,n),l=Eb._getPageOfLine(i.endLineNumber,n),c=Eb._getRangeForPage(l,n),d=a.intersectRanges(new M(1,1,i.startLineNumber,i.startColumn));let f=t.getValueInRange(d,1);const g=t.getLineCount(),m=t.getLineMaxColumn(g),_=c.intersectRanges(new M(i.endLineNumber,i.endColumn,g,m));let C=t.getValueInRange(_,1),S;if(r===l||r+1===l)S=t.getValueInRange(i,1);else{const x=a.intersectRanges(i),L=c.intersectRanges(i);S=t.getValueInRange(x,1)+String.fromCharCode(8230)+t.getValueInRange(L,1)}return o&&(f.length>500&&(f=f.substring(f.length-500,f.length)),C.length>500&&(C=C.substring(0,500)),S.length>2*500&&(S=S.substring(0,500)+String.fromCharCode(8230)+S.substring(S.length-500,S.length))),new ao(f+S+C,f.length,f.length+S.length,new se(i.startLineNumber,i.startColumn),new se(i.endLineNumber,i.endColumn))}}var GT;(function(s){s.Tap="-monaco-textarea-synthetic-tap"})(GT||(GT={}));const B3={forceCopyWithSyntaxHighlighting:!1};class eS{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}eS.INSTANCE=new eS;class VDe{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}class WDe extends ge{constructor(e,t,i,n){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=n,this._onFocus=this._register(new J),this.onFocus=this._onFocus.event,this._onBlur=this._register(new J),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new J),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new J),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new J),this.onCut=this._onCut.event,this._onPaste=this._register(new J),this.onPaste=this._onPaste.event,this._onType=this._register(new J),this.onType=this._onType.event,this._onCompositionStart=this._register(new J),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new J),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new J),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new J),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new Xi(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new Xi(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=ao.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let o=null;this._register(this._textArea.onKeyDown(r=>{const a=new kn(r);(a.keyCode===109||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),o=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(r=>{const a=new kn(r);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(r=>{const a=new VDe;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&o&&o.equals(109)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===r.data&&(o.code==="ArrowRight"||o.code==="ArrowLeft")){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:r.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:r.data});return}this._onCompositionStart.fire({data:r.data})})),this._register(this._textArea.onCompositionUpdate(r=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const c=ao.readFromTextArea(this._textArea),d=ao.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionUpdate.fire(r);return}const l=a.handleCompositionUpdate(r.data);this._textAreaState=ao.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionUpdate.fire(r)})),this._register(this._textArea.onCompositionEnd(r=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const c=ao.readFromTextArea(this._textArea),d=ao.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionEnd.fire();return}const l=a.handleCompositionUpdate(r.data);this._textAreaState=ao.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(r=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=ao.readFromTextArea(this._textArea),l=ao.deduceInput(this._textAreaState,a,this._OS===2);l.replacePrevCharCnt===0&&l.text.length===1&&Ms(l.text.charCodeAt(0))||(this._textAreaState=a,(l.text!==""||l.replacePrevCharCnt!==0||l.replaceNextCharCnt!==0||l.positionDelta!==0)&&this._onType.fire(l))})),this._register(this._textArea.onCut(r=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(r),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(r=>{this._ensureClipboardGetsEditorSelection(r)})),this._register(this._textArea.onPaste(r=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),r.preventDefault(),!r.clipboardData)return;let[a,l]=Eq.getTextData(r.clipboardData);!a||(l=l||eS.INSTANCE.get(a),this._onPaste.fire({text:a,metadata:l}))})),this._register(this._textArea.onFocus(()=>{const r=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!r&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return Le(document,"selectionchange",t=>{if(!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const i=Date.now(),n=i-e;if(e=i,n<5)return;const o=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),o<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),f=this._textAreaState.deduceEditorPosition(l),g=this._host.deduceModelPosition(f[0],f[1],f[2]),m=new et(d.lineNumber,d.column,g.lineNumber,g.column);this._onSelectionChangeRequest.fire(m)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};eS.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,i),e.preventDefault(),e.clipboardData&&Eq.setTextData(e.clipboardData,t.text,t.html,i)}}class Eq{static getTextData(e){const t=e.getData(Ur.text);let i=null;const n=e.getData("vscode-editor-data");if(typeof n=="string")try{i=JSON.parse(n),i.version!==1&&(i=null)}catch{}return t.length===0&&i===null&&e.files.length>0?[Array.prototype.slice.call(e.files,0).map(r=>r.name).join(`
`),null]:[t,i]}static setTextData(e,t,i,n){e.setData(Ur.text,t),typeof i=="string"&&e.setData("text/html",i),e.setData("vscode-editor-data",JSON.stringify(n))}}class HDe extends ge{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(Mc(this._actual,"keydown")).event,this.onKeyUp=this._register(Mc(this._actual,"keyup")).event,this.onCompositionStart=this._register(Mc(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(Mc(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(Mc(this._actual,"compositionend")).event,this.onInput=this._register(Mc(this._actual,"input")).event,this.onCut=this._register(Mc(this._actual,"cut")).event,this.onCopy=this._register(Mc(this._actual,"copy")).event,this.onPaste=this._register(Mc(this._actual,"paste")).event,this.onFocus=this._register(Mc(this._actual,"focus")).event,this.onBlur=this._register(Mc(this._actual,"blur")).event,this._onSyntheticTap=this._register(new J),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(Le(this._actual,GT.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=Hm(this._actual);return e?e.activeElement===this._actual:kB(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const n=this._actual;let o=null;const r=Hm(n);r?o=r.activeElement:o=document.activeElement;const a=o===n,l=n.selectionStart,c=n.selectionEnd;if(a&&l===t&&c===i){Ka&&window.parent!==window&&n.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),n.setSelectionRange(t,i),Ka&&window.parent!==window&&n.focus();return}try{const d=pLe(n);this.setIgnoreSelectionChangeTime("setSelectionRange"),n.focus(),n.setSelectionRange(t,i),mLe(n,d)}catch{}}}class zDe extends GB{constructor(e,t,i){super(e,t,i),this._register(Zi.addTarget(this.viewHelper.linesContentDomNode)),this._register(Le(this.viewHelper.linesContentDomNode,vn.Tap,o=>this.onTap(o))),this._register(Le(this.viewHelper.linesContentDomNode,vn.Change,o=>this.onChange(o))),this._register(Le(this.viewHelper.linesContentDomNode,vn.Contextmenu,o=>this._onContextMenu(new Fg(o,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(Le(this.viewHelper.linesContentDomNode,"pointerdown",o=>{const r=o.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const n=new yDe(this.viewHelper.viewDomNode);this._register(n.onPointerMove(this.viewHelper.viewDomNode,o=>this._onMouseMove(o))),this._register(n.onPointerUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(n.onPointerLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(n.onPointerDown(this.viewHelper.viewDomNode,(o,r)=>this._onMouseDown(o,r)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Fg(e,!1,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:t.type===6&&t.detail.injectedText!==null})}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class UDe extends GB{constructor(e,t,i){super(e,t,i),this._register(Zi.addTarget(this.viewHelper.linesContentDomNode)),this._register(Le(this.viewHelper.linesContentDomNode,vn.Tap,n=>this.onTap(n))),this._register(Le(this.viewHelper.linesContentDomNode,vn.Change,n=>this.onChange(n))),this._register(Le(this.viewHelper.linesContentDomNode,vn.Contextmenu,n=>this._onContextMenu(new Fg(n,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Fg(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(GT.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class $De extends ge{constructor(e,t,i){super(),gd&&DB.pointerEvents?this.handler=this._register(new zDe(e,t,i)):window.TouchEvent?this.handler=this._register(new UDe(e,t,i)):this.handler=this._register(new GB(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class aC extends gL{}const xee=j("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},b("lineHighlight","Background color for the highlight of line at the cursor position.")),Tq=j("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:si},b("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),jDe=j("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},b("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),KDe=j("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:En,hcLight:En},b("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),qDe=j("editor.symbolHighlightBackground",{dark:Oh,light:Oh,hcDark:null,hcLight:null},b("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),GDe=j("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:En,hcLight:En},b("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),Dee=j("editorCursor.foreground",{dark:"#AEAFAD",light:oe.black,hcDark:oe.white,hcLight:"#0F4A85"},b("caret","Color of the editor cursor.")),YDe=j("editorCursor.background",null,b("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Vh=j("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},b("editorWhitespaces","Color of whitespace characters in the editor.")),pL=j("editorIndentGuide.background",{dark:Vh,light:Vh,hcDark:Vh,hcLight:Vh},b("editorIndentGuides","Color of the editor indentation guides.")),mL=j("editorIndentGuide.activeBackground",{dark:Vh,light:Vh,hcDark:Vh,hcLight:Vh},b("editorActiveIndentGuide","Color of the active editor indentation guides.")),kee=j("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:oe.white,hcLight:"#292929"},b("editorLineNumbers","Color of editor line numbers.")),Lk=j("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:En,hcLight:En},b("editorActiveLineNumber","Color of editor active line number"),!1,b("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),ZDe=j("editorLineNumber.activeForeground",{dark:Lk,light:Lk,hcDark:Lk,hcLight:Lk},b("editorActiveLineNumber","Color of editor active line number")),QDe=j("editorRuler.foreground",{dark:"#5A5A5A",light:oe.lightgrey,hcDark:oe.white,hcLight:"#292929"},b("editorRuler","Color of the editor rulers."));j("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},b("editorCodeLensForeground","Foreground color of editor CodeLens"));const XDe=j("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},b("editorBracketMatchBackground","Background color behind matching brackets")),Eee=j("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:si,hcLight:si},b("editorBracketMatchBorder","Color for matching brackets boxes")),JDe=j("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},b("editorOverviewRulerBorder","Color of the overview ruler border.")),eke=j("editorOverviewRuler.background",null,b("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),tke=j("editorGutter.background",{dark:Es,light:Es,hcDark:Es,hcLight:Es},b("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),ike=j("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:oe.fromHex("#fff").transparent(.8),hcLight:si},b("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),nke=j("editorUnnecessaryCode.opacity",{dark:oe.fromHex("#000a"),light:oe.fromHex("#0007"),hcDark:null,hcLight:null},b("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),ske=j("editorGhostText.border",{dark:null,light:null,hcDark:oe.fromHex("#fff").transparent(.8),hcLight:oe.fromHex("#292929").transparent(.8)},b("editorGhostTextBorder","Border color of ghost text in the editor.")),oke=j("editorGhostText.foreground",{dark:oe.fromHex("#ffffff56"),light:oe.fromHex("#0007"),hcDark:null,hcLight:null},b("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),rke=j("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},b("editorGhostTextBackground","Background color of the ghost text in the editor.")),xk=new oe(new pi(0,122,204,.6)),ake=j("editorOverviewRuler.rangeHighlightForeground",{dark:xk,light:xk,hcDark:xk,hcLight:xk},b("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),lke=j("editorOverviewRuler.errorForeground",{dark:new oe(new pi(255,18,18,.7)),light:new oe(new pi(255,18,18,.7)),hcDark:new oe(new pi(255,50,50,1)),hcLight:"#B5200D"},b("overviewRuleError","Overview ruler marker color for errors.")),cke=j("editorOverviewRuler.warningForeground",{dark:Ha,light:Ha,hcDark:b0,hcLight:b0},b("overviewRuleWarning","Overview ruler marker color for warnings.")),uke=j("editorOverviewRuler.infoForeground",{dark:jr,light:jr,hcDark:qT,hcLight:qT},b("overviewRuleInfo","Overview ruler marker color for infos.")),Tee=j("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},b("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),Iee=j("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},b("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Nee=j("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},b("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),Ree=j("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),Aee=j("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),Mee=j("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),dke=j("editorBracketHighlight.unexpectedBracket.foreground",{dark:new oe(new pi(255,18,18,.8)),light:new oe(new pi(255,18,18,.8)),hcDark:new oe(new pi(255,50,50,1)),hcLight:""},b("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),hke=j("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),fke=j("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),gke=j("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),pke=j("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),mke=j("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),_ke=j("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),vke=j("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),bke=j("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Cke=j("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),wke=j("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),yke=j("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),Ske=j("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},b("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));j("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hcDark:"#ff0000",hcLight:""},b("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));j("editorUnicodeHighlight.background",{dark:"#bd9b0326",light:"#cea33d14",hcDark:"#00000000",hcLight:""},b("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Cn((s,e)=>{const t=s.getColor(Es);t&&e.addRule(`.monaco-editor, .monaco-editor-background { background-color: ${t}; }`);const i=s.getColor(xee),n=i&&!i.isTransparent()?i:t;n&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${n}; }`);const o=s.getColor(za);o&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${o}; }`);const r=s.getColor(tke);r&&e.addRule(`.monaco-editor .margin { background-color: ${r}; }`);const a=s.getColor(jDe);a&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${a}; }`);const l=s.getColor(KDe);l&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${Vo(s.type)?"dotted":"solid"} ${l}; }`);const c=s.getColor(qDe);c&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${c}; }`);const d=s.getColor(GDe);d&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${Vo(s.type)?"dotted":"solid"} ${d}; }`);const f=s.getColor(Vh);f&&(e.addRule(`.monaco-editor .mtkw { color: ${f} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${f} !important; }`))});class S0 extends aC{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new se(1,1),this._lastCursorViewPosition=new se(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(61);const t=e.get(62);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(86);const i=e.get(133);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorViewPosition=t,this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(e,1));if(t.column!==1)return"";const i=t.lineNumber;return this._renderCustomLineNumbers?this._renderCustomLineNumbers(i):this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===i||i%10===0?String(i):"":String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Wo?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o='<div class="'+S0.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">';let r=null;if(this._renderLineNumbers===2){r=new Array(n-i+1),this._lastCursorViewPosition.lineNumber>=i&&this._lastCursorViewPosition.lineNumber<=n&&(r[this._lastCursorViewPosition.lineNumber-i]=this._lastCursorModelPosition.lineNumber);{let c=0;for(let d=this._lastCursorViewPosition.lineNumber+1;d<=n;d++){const g=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(d,1)).column!==1;g||c++,d>=i&&(r[d-i]=g?0:c)}}{let c=0;for(let d=this._lastCursorViewPosition.lineNumber-1;d>=i;d--){const g=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(d,1)).column!==1;g||c++,d<=n&&(r[d-i]=g?0:c)}}}const a=this._context.viewModel.getLineCount(),l=[];for(let c=i;c<=n;c++){const d=c-i;if(!this._renderFinalNewline&&c===a&&this._context.viewModel.getLineLength(c)===0){l[d]="";continue}let f;if(r){const g=r[d];this._lastCursorViewPosition.lineNumber===c?f=`<span class="relative-current-line-number">${g}</span>`:g?f=String(g):f=""}else f=this._getLineRenderLineNumber(c);f?c===this._activeLineNumber?l[d]='<div class="active-line-number '+S0.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+f+"</div>":l[d]=o+f+"</div>":l[d]=""}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}S0.CLASS_NAME="line-numbers";Cn((s,e)=>{const t=s.getColor(kee);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const i=s.getColor(ZDe);i&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${i}; }`)});class Km extends Qa{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(133);this._canUseLayerHinting=!t.get(28),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=Di(document.createElement("div")),this._domNode.setClassName(Km.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Di(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Km.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(133);return this._canUseLayerHinting=!t.get(28),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}}Km.CLASS_NAME="glyph-margin";Km.OUTER_CLASS_NAME="margin";const Lm="monaco-mouse-cursor-text";class Lke{constructor(e,t,i,n,o){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=n,this.distanceToModelLineEnd=o,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new se(this.modelLineNumber,this.distanceToModelLineStart+1),i=new se(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const dw=Ka;class xke extends Qa{constructor(e,t,i){super(e),this._primaryCursorPosition=new se(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const n=this._context.configuration.options,o=n.get(133);this._setAccessibilityOptions(n),this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._contentHeight=o.height,this._fontInfo=n.get(46),this._lineHeight=n.get(61),this._emptySelectionClipboard=n.get(33),this._copyWithSyntaxHighlighting=n.get(21),this._visibleTextArea=null,this._selections=[new et(1,1,1,1)],this._modelSelections=[new et(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Di(document.createElement("textarea")),vd.write(this.textArea,6),this.textArea.setClassName(`inputarea ${Lm}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(n)),this.textArea.setAttribute("tabindex",String(n.get(114))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",b("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),n.get(30)&&n.get(83)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=Di(document.createElement("div")),this.textAreaCover.setPosition("absolute");const r={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:c=>this._context.viewModel.getLineMaxColumn(c),getValueInRange:(c,d)=>this._context.viewModel.getValueInRange(c,d)},a={getDataToCopy:()=>{const c=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,mo),d=this._context.viewModel.model.getEOL(),f=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),g=Array.isArray(c)?c:null,m=Array.isArray(c)?c.join(d):c;let _,C=null;if(B3.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&m.length<65536){const S=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);S&&(_=S.html,C=S.mode)}return{isFromEmptySelection:f,multicursorText:g,text:m,html:_,mode:C}},getScreenReaderContent:c=>{if(this._accessibilitySupport===1){const d=this._selections[0];if(mi&&d.isEmpty()){const f=d.getStartPosition();let g=this._getWordBeforePosition(f);if(g.length===0&&(g=this._getCharacterBeforePosition(f)),g.length>0)return new ao(g,g.length,g.length,f,f)}if(Gh&&!d.isEmpty()){const f="vscode-placeholder";return new ao(f,0,f.length,null,null)}return ao.EMPTY}if(sJ){const d=this._selections[0];if(d.isEmpty()){const f=d.getStartPosition(),[g,m]=this._getAndroidWordAtPosition(f);if(g.length>0)return new ao(g,m,m,f,f)}return ao.EMPTY}return Eb.fromEditorSelection(c,r,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(c,d,f)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(c,d,f)},l=this._register(new HDe(this.textArea.domNode));this._textAreaInput=this._register(new WDe(a,l,gl,cwe)),this._register(this._textAreaInput.onKeyDown(c=>{this._viewController.emitKeyDown(c)})),this._register(this._textAreaInput.onKeyUp(c=>{this._viewController.emitKeyUp(c)})),this._register(this._textAreaInput.onPaste(c=>{let d=!1,f=null,g=null;c.metadata&&(d=this._emptySelectionClipboard&&!!c.metadata.isFromEmptySelection,f=typeof c.metadata.multicursorText<"u"?c.metadata.multicursorText:null,g=c.metadata.mode),this._viewController.paste(c.text,d,f,g)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(c=>{c.replacePrevCharCnt||c.replaceNextCharCnt||c.positionDelta?this._viewController.compositionType(c.text,c.replacePrevCharCnt,c.replaceNextCharCnt,c.positionDelta):this._viewController.type(c.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(c=>{this._viewController.setSelection(c)})),this._register(this._textAreaInput.onCompositionStart(c=>{const d=this.textArea.domNode,f=this._modelSelections[0],{distanceToModelLineStart:g,widthOfHiddenTextBefore:m}=(()=>{const C=d.value.substring(0,Math.min(d.selectionStart,d.selectionEnd)),S=C.lastIndexOf(`
`),x=C.substring(S+1),L=x.lastIndexOf("	"),k=x.length-L-1,T=f.getStartPosition(),A=Math.min(T.column-1,k),O=T.column-1-A,I=x.substring(0,x.length-A),R=Dke(I,this._fontInfo);return{distanceToModelLineStart:O,widthOfHiddenTextBefore:R}})(),{distanceToModelLineEnd:_}=(()=>{const C=d.value.substring(Math.max(d.selectionStart,d.selectionEnd)),S=C.indexOf(`
`),x=S===-1?C:C.substring(0,S),L=x.indexOf("	"),k=L===-1?x.length:x.length-L-1,T=f.getEndPosition(),A=Math.min(this._context.viewModel.model.getLineMaxColumn(T.lineNumber)-T.column,k);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(T.lineNumber)-T.column-A}})();this._context.viewModel.revealRange("keyboard",!0,M.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new Lke(this._context,f.startLineNumber,g,m,_),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${Lm} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(c=>{!this._visibleTextArea||(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${Lm}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(e.lineNumber),n=Tl(t);let o=!0,r=e.column,a=!0,l=e.column,c=0;for(;c<50&&(o||a);){if(o&&r<=1&&(o=!1),o){const d=i.charCodeAt(r-2);n.get(d)!==0?o=!1:r--}if(a&&l>i.length&&(a=!1),a){const d=i.charCodeAt(l-1);n.get(d)!==0?a=!1:l++}c++}return[i.substring(r-1,l-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=Tl(this._context.configuration.options.get(119));let n=e.column,o=0;for(;n>1;){const r=t.charCodeAt(n-2);if(i.get(r)!==0||o>50)return t.substring(n-1,e.column-1);o++,n--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!Ms(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){return e.get(2)===1?b("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",Wo?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===fu.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(133);return this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(46),this._lineHeight=t.get(61),this._emptySelectionClipboard=t.get(33),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(114))),(e.hasChanged(30)||e.hasChanged(83))&&(t.get(30)&&t.get(83)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){var t;this._primaryCursorPosition=new se(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)===null||t===void 0||t.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){const i=this._visibleTextArea.visibleTextareaStart,n=this._visibleTextArea.visibleTextareaEnd,o=this._visibleTextArea.startPosition,r=this._visibleTextArea.endPosition;if(o&&r&&i&&n&&n.left>=this._scrollLeft&&i.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,d=this._contentLeft+i.left-this._scrollLeft,f=n.left-i.left+1;if(d<this._contentLeft){const x=this._contentLeft-d;d+=x,c+=x,f-=x}f>this._contentWidth&&(f=this._contentWidth);const g=this._context.viewModel.getViewLineData(o.lineNumber),m=g.tokens.findTokenIndexAtOffset(o.column-1),_=g.tokens.findTokenIndexAtOffset(r.column-1),C=m===_,S=this._visibleTextArea.definePresentation(C?g.tokens.getPresentation(m):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:d,width:f,height:this._lineHeight,useCover:!1,color:(Fn.getColorMap()||[])[S.foreground],italic:S.italic,bold:S.bold,underline:S.underline,strikethrough:S.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(mi){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:e,width:dw?0:1,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:e,width:dw?0:1,height:dw?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;do{if(i=e.indexOf(`
`,i+1),i===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:dw?0:1,height:dw?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;Fo(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?oe.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const n=this._context.configuration.options;n.get(52)?i.setClassName("monaco-editor-background textAreaCover "+Km.OUTER_CLASS_NAME):n.get(62).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+S0.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}}function Dke(s,e){if(s.length===0)return 0;const t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const i=document.createElement("span");Fo(i,e),i.style.whiteSpace="pre",i.append(s),t.appendChild(i),document.body.appendChild(t);const n=i.offsetWidth;return document.body.removeChild(t),n}function kke(s,e,t){let i=0;for(let o=0;o<s.length;o++)s.charAt(o)==="	"?i=ks.nextIndentTabStop(i,e):i++;let n="";if(!t){const o=Math.floor(i/e);i=i%e;for(let r=0;r<o;r++)n+="	"}for(let o=0;o<i;o++)n+=" ";return n}function YT(s,e,t){let i=Lr(s);return i===-1&&(i=s.length),kke(s.substring(0,i),e,t)+s.substring(i)}const Eke=()=>!0,Tke=()=>!1,Ike=s=>s===" "||s==="	";class Hv{constructor(e,t,i,n){this.languageConfigurationService=n,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const o=i.options,r=o.get(133);this.readOnly=o.get(83),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(106),this.lineHeight=o.get(61),this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=o.get(118),this.wordSeparators=o.get(119),this.emptySelectionClipboard=o.get(33),this.copyWithSyntaxHighlighting=o.get(21),this.multiCursorMergeOverlapping=o.get(71),this.multiCursorPaste=o.get(73),this.autoClosingBrackets=o.get(5),this.autoClosingQuotes=o.get(8),this.autoClosingDelete=o.get(6),this.autoClosingOvertype=o.get(7),this.autoSurround=o.get(11),this.autoIndent=o.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const a=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(a)for(const l of a)this.surroundingPairs[l.open]=l.close}static shouldRecreate(e){return e.hasChanged(133)||e.hasChanged(119)||e.hasChanged(33)||e.hasChanged(71)||e.hasChanged(73)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(118)||e.hasChanged(61)||e.hasChanged(83)}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||e===void 0?void 0:e.getElectricCharacters();if(t)for(const i of t)this._electricChars[i]=!0}return this._electricChars}onElectricCharacter(e,t,i){const n=CN(t,i-1),o=this.languageConfigurationService.getLanguageConfiguration(n.languageId).electricCharacter;return o?o.onElectricCharacter(e,n,i-n.firstCharOffset):null}normalizeIndentation(e){return YT(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return Ike;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e);case"always":return Eke;case"never":return Tke}}_getLanguageDefinedShouldAutoClose(e){const t=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet();return i=>t.indexOf(i)!==-1}visibleColumnFromColumn(e,t){return ks.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const n=ks.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),o=e.getLineMinColumn(t);if(n<o)return o;const r=e.getLineMaxColumn(t);return n>r?r:n}}class ui{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new Nke(e)}static fromViewState(e){return new Rke(e)}static fromModelSelection(e){const t=et.liftSelection(e),i=new eo(M.fromPositions(t.getSelectionStart()),0,t.getPosition(),0);return ui.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this.fromModelSelection(e[i]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class Nke{constructor(e){this.modelState=e,this.viewState=null}}class Rke{constructor(e){this.modelState=null,this.viewState=e}}class eo{constructor(e,t,i,n){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=i,this.leftoverVisibleColumns=n,this.selection=eo._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,n){return e?new eo(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new se(t,i),n):new eo(new M(t,i,t,i),n,new se(t,i),n)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?et.fromPositions(e.getStartPosition(),t):et.fromPositions(e.getEndPosition(),t)}}class Ar{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function Yf(s){return s==="'"||s==='"'||s==="`"}class nm{static columnSelect(e,t,i,n,o,r){const a=Math.abs(o-i)+1,l=i>o,c=n>r,d=n<r,f=[];for(let g=0;g<a;g++){const m=i+(l?-g:g),_=e.columnFromVisibleColumn(t,m,n),C=e.columnFromVisibleColumn(t,m,r),S=e.visibleColumnFromColumn(t,new se(m,_)),x=e.visibleColumnFromColumn(t,new se(m,C));d&&(S>r||x<n)||c&&(x>n||S<r)||f.push(new eo(new M(m,_,m,_),0,new se(m,C),0))}if(f.length===0)for(let g=0;g<a;g++){const m=i+(l?-g:g),_=t.getLineMaxColumn(m);f.push(new eo(new M(m,_,m,_),0,new se(m,_),0))}return{viewStates:f,reversed:l,fromLineNumber:i,fromVisualColumn:n,toLineNumber:o,toVisualColumn:r}}static columnSelectLeft(e,t,i){let n=i.toViewVisualColumn;return n>0&&n--,nm.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,n)}static columnSelectRight(e,t,i){let n=0;const o=Math.min(i.fromViewLineNumber,i.toViewLineNumber),r=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=o;l<=r;l++){const c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new se(l,c));n=Math.max(n,d)}let a=i.toViewVisualColumn;return a<n&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,n){const o=n?e.pageSize:1,r=Math.max(1,i.toViewLineNumber-o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}static columnSelectDown(e,t,i,n){const o=n?e.pageSize:1,r=Math.min(t.getLineCount(),i.toViewLineNumber+o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}}class ro{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return et.fromPositions(n.getEndPosition())}}class Ake{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return et.fromRange(n,0)}}class Dk{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return et.fromPositions(n.getStartPosition())}}class BE{constructor(e,t,i,n,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=n,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return et.fromPositions(n.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class YB{constructor(e,t,i,n=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=n,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class p4{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class Bi{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-JX(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new se(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const n=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),r=Jy.atomicPosition(o,t.column-1,i,0);if(r!==-1&&r+1>=n)return new se(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,i){const n=e.stickyTabStops?Bi.leftPositionAtomicSoftTabs(t,i,e.tabSize):Bi.leftPosition(t,i);return new p4(n.lineNumber,n.column,0)}static moveLeft(e,t,i,n,o){let r,a;if(i.hasSelection()&&!n)r=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(o-1)),c=t.normalizePosition(Bi.clipPositionColumn(l,t),0),d=Bi.left(e,t,c);r=d.lineNumber,a=d.column}return i.move(n,r,a,0)}static clipPositionColumn(e,t){return new se(e.lineNumber,Bi.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+sB(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new se(t,i)}static rightPositionAtomicSoftTabs(e,t,i,n,o){if(i<e.getLineIndentColumn(t)){const r=e.getLineContent(t),a=Jy.atomicPosition(r,i-1,n,1);if(a!==-1)return new se(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const n=e.stickyTabStops?Bi.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):Bi.rightPosition(t,i.lineNumber,i.column);return new p4(n.lineNumber,n.column,0)}static moveRight(e,t,i,n,o){let r,a;if(i.hasSelection()&&!n)r=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,o-1),c=t.normalizePosition(Bi.clipPositionColumn(l,t),1),d=Bi.right(e,t,c);r=d.lineNumber,a=d.column}return i.move(n,r,a,0)}static vertical(e,t,i,n,o,r,a,l){const c=ks.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize)+o,d=t.getLineCount(),f=i===1&&n===1,g=i===d&&n===t.getLineMaxColumn(i),m=r<i?f:g;if(i=r,i<1?(i=1,a?n=t.getLineMinColumn(i):n=Math.min(t.getLineMaxColumn(i),n)):i>d?(i=d,a?n=t.getLineMaxColumn(i):n=Math.min(t.getLineMaxColumn(i),n)):n=e.columnFromVisibleColumn(t,i,c),m?o=0:o=c-ks.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize),l!==void 0){const _=new se(i,n),C=t.normalizePosition(_,l);o=o+(n-C.column),i=C.lineNumber,n=C.column}return new p4(i,n,o)}static down(e,t,i,n,o,r,a){return this.vertical(e,t,i,n,o,i+r,a,4)}static moveDown(e,t,i,n,o){let r,a;i.hasSelection()&&!n?(r=i.selection.endLineNumber,a=i.selection.endColumn):(r=i.position.lineNumber,a=i.position.column);const l=Bi.down(e,t,r,a,i.leftoverVisibleColumns,o,!0);return i.move(n,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,i){const n=i.selection,o=Bi.down(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=Bi.down(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new eo(new M(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new se(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,i,n,o,r,a){return this.vertical(e,t,i,n,o,i-r,a,3)}static moveUp(e,t,i,n,o){let r,a;i.hasSelection()&&!n?(r=i.selection.startLineNumber,a=i.selection.startColumn):(r=i.position.lineNumber,a=i.position.column);const l=Bi.up(e,t,r,a,i.leftoverVisibleColumns,o,!0);return i.move(n,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){const n=i.selection,o=Bi.up(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=Bi.up(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new eo(new M(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new se(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,n){let o=i.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return i.move(n,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,i,n){const o=t.getLineCount();let r=i.position.lineNumber;for(;r<o&&this._isBlankLine(t,r);)r++;for(;r<o&&!this._isBlankLine(t,r);)r++;return i.move(n,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,i,n){const o=i.position.lineNumber,r=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||r;let l;return i.position.column===a?l=r:l=a,i.move(n,o,l,0)}static moveToEndOfLine(e,t,i,n,o){const r=i.position.lineNumber,a=t.getLineMaxColumn(r);return i.move(n,r,a,o?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,n){return i.move(n,1,1,0)}static moveToEndOfBuffer(e,t,i,n){const o=t.getLineCount(),r=t.getLineMaxColumn(o);return i.move(n,o,r,0)}}class qm{static deleteRight(e,t,i,n){const o=[];let r=e!==3;for(let a=0,l=n.length;a<l;a++){const c=n[a];let d=c;if(d.isEmpty()){const f=c.getPosition(),g=Bi.right(t,i,f);d=new M(g.lineNumber,g.column,f.lineNumber,f.column)}if(d.isEmpty()){o[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(r=!0),o[a]=new ro(d,"")}return[r,o]}static isAutoClosingPairDelete(e,t,i,n,o,r,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=r.length;l<c;l++){const d=r[l],f=d.getPosition();if(!d.isEmpty())return!1;const g=o.getLineContent(f.lineNumber);if(f.column<2||f.column>=g.length+1)return!1;const m=g.charAt(f.column-2),_=n.get(m);if(!_)return!1;if(Yf(m)){if(i==="never")return!1}else if(t==="never")return!1;const C=g.charAt(f.column-1);let S=!1;for(const x of _)x.open===m&&x.close===C&&(S=!0);if(!S)return!1;if(e==="auto"){let x=!1;for(let L=0,k=a.length;L<k;L++){const T=a[L];if(f.lineNumber===T.startLineNumber&&f.column===T.startColumn){x=!0;break}}if(!x)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const n=[];for(let o=0,r=i.length;o<r;o++){const a=i[o].getPosition(),l=new M(a.lineNumber,a.column-1,a.lineNumber,a.column+1);n[o]=new ro(l,"")}return[!0,n]}static deleteLeft(e,t,i,n,o){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,n,o))return this._runAutoClosingPairDelete(t,i,n);const r=[];let a=e!==2;for(let l=0,c=n.length;l<c;l++){const d=qm.getDeleteRange(n[l],i,t);if(d.isEmpty()){r[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),r[l]=new ro(d,"")}return[a,r]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const n=e.getPosition();if(i.useTabStops&&n.column>1){const o=t.getLineContent(n.lineNumber),r=Lr(o),a=r===-1?o.length+1:r+1;if(n.column<=a){const l=i.visibleColumnFromColumn(t,n),c=ks.prevIndentTabStop(l,i.indentSize),d=i.columnFromVisibleColumn(t,n.lineNumber,c);return new M(n.lineNumber,d,n.lineNumber,n.column)}}return M.fromPositions(qm.getPositionAfterDeleteLeft(n,t),n)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=twe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new se(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){const n=[];let o=null;i.sort((r,a)=>se.compare(r.getStartPosition(),a.getEndPosition()));for(let r=0,a=i.length;r<a;r++){const l=i[r];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let d,f,g,m;c.lineNumber<t.getLineCount()?(d=c.lineNumber,f=1,g=c.lineNumber+1,m=1):c.lineNumber>1&&(o==null?void 0:o.endLineNumber)!==c.lineNumber?(d=c.lineNumber-1,f=t.getLineMaxColumn(c.lineNumber-1),g=c.lineNumber,m=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,f=1,g=c.lineNumber,m=t.getLineMaxColumn(c.lineNumber));const _=new M(d,f,g,m);o=_,_.isEmpty()?n[r]=null:n[r]=new ro(_,"")}else n[r]=null;else n[r]=new ro(l,"")}return new Ar(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Ii{static _createWord(e,t,i,n,o){return{start:n,end:o,wordType:t,nextCharClass:i}}static _findPreviousWordOnLine(e,t,i){const n=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(n,e,i)}static _doFindPreviousWordOnLine(e,t,i){let n=0;for(let o=i.column-2;o>=0;o--){const r=e.charCodeAt(o),a=t.get(r);if(a===0){if(n===2)return this._createWord(e,n,a,o+1,this._findEndOfWord(e,t,n,o+1));n=1}else if(a===2){if(n===1)return this._createWord(e,n,a,o+1,this._findEndOfWord(e,t,n,o+1));n=2}else if(a===1&&n!==0)return this._createWord(e,n,a,o+1,this._findEndOfWord(e,t,n,o+1))}return n!==0?this._createWord(e,n,1,0,this._findEndOfWord(e,t,n,0)):null}static _findEndOfWord(e,t,i,n){const o=e.length;for(let r=n;r<o;r++){const a=e.charCodeAt(r),l=t.get(a);if(l===1||i===1&&l===2||i===2&&l===0)return r}return o}static _findNextWordOnLine(e,t,i){const n=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(n,e,i)}static _doFindNextWordOnLine(e,t,i){let n=0;const o=e.length;for(let r=i.column-1;r<o;r++){const a=e.charCodeAt(r),l=t.get(a);if(l===0){if(n===2)return this._createWord(e,n,l,this._findStartOfWord(e,t,n,r-1),r);n=1}else if(l===2){if(n===1)return this._createWord(e,n,l,this._findStartOfWord(e,t,n,r-1),r);n=2}else if(l===1&&n!==0)return this._createWord(e,n,l,this._findStartOfWord(e,t,n,r-1),r)}return n!==0?this._createWord(e,n,1,this._findStartOfWord(e,t,n,o-1),o):null}static _findStartOfWord(e,t,i,n){for(let o=n;o>=0;o--){const r=e.charCodeAt(o),a=t.get(r);if(a===1||i===1&&a===2||i===2&&a===0)return o+1}return 0}static moveWordLeft(e,t,i,n){let o=i.lineNumber,r=i.column;r===1&&o>1&&(o=o-1,r=t.getLineMaxColumn(o));let a=Ii._findPreviousWordOnLine(e,t,new se(o,r));if(n===0)return new se(o,a?a.start+1:1);if(n===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=Ii._findPreviousWordOnLine(e,t,new se(o,a.start+1))),new se(o,a?a.start+1:1);if(n===3){for(;a&&a.wordType===2;)a=Ii._findPreviousWordOnLine(e,t,new se(o,a.start+1));return new se(o,a?a.start+1:1)}return a&&r<=a.end+1&&(a=Ii._findPreviousWordOnLine(e,t,new se(o,a.start+1))),new se(o,a?a.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===1)return i>1?new se(i-1,e.getLineMaxColumn(i-1)):t;const o=e.getLineContent(i);for(let r=t.column-1;r>1;r--){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a===95&&l!==95)return new se(i,r);if((og(a)||gk(a))&&Ku(l))return new se(i,r);if(Ku(a)&&Ku(l)&&r+1<n){const c=o.charCodeAt(r);if(og(c)||gk(c))return new se(i,r)}}return new se(i,1)}static moveWordRight(e,t,i,n){let o=i.lineNumber,r=i.column,a=!1;r===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,r=1);let l=Ii._findNextWordOnLine(e,t,new se(o,r));if(n===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Ii._findNextWordOnLine(e,t,new se(o,l.end+1))),l?r=l.end+1:r=t.getLineMaxColumn(o);else if(n===3){for(a&&(r=0);l&&(l.wordType===2||l.start+1<=r);)l=Ii._findNextWordOnLine(e,t,new se(o,l.end+1));l?r=l.start+1:r=t.getLineMaxColumn(o)}else l&&!a&&r>=l.start+1&&(l=Ii._findNextWordOnLine(e,t,new se(o,l.end+1))),l?r=l.start+1:r=t.getLineMaxColumn(o);return new se(o,r)}static _moveWordPartRight(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===n)return i<e.getLineCount()?new se(i+1,1):t;const o=e.getLineContent(i);for(let r=t.column+1;r<n;r++){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a!==95&&l===95)return new se(i,r);if((og(a)||gk(a))&&Ku(l))return new se(i,r);if(Ku(a)&&Ku(l)&&r+1<n){const c=o.charCodeAt(r);if(og(c)||gk(c))return new se(i,r)}}return new se(i,n)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-2,o=dd(i,n);return o+1<n?new M(t.lineNumber,o+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,n=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(qm.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const f=e.selection.getPosition();return new M(f.lineNumber,f.column-1,f.lineNumber,f.column+1)}const a=new se(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(r){const f=this._deleteWordLeftWhitespace(n,a);if(f)return f}let d=Ii._findPreviousWordOnLine(i,n,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=n.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=Ii._findPreviousWordOnLine(i,n,new se(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=n.getLineMaxColumn(l))),new M(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const n=new se(i.positionLineNumber,i.positionColumn),o=this._deleteInsideWordWhitespace(t,n);return o||this._deleteInsideWordDetermineDeleteRange(e,t,n)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=i.length;if(n===0)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,o))return null;let r=Math.min(t.column-1,n-1);if(!this._charAtIsWhitespace(i,r))return null;for(;o>0&&this._charAtIsWhitespace(i,o-1);)o--;for(;r+1<n&&this._charAtIsWhitespace(i,r+1);)r++;return new M(t.lineNumber,o+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const n=t.getLineContent(i.lineNumber),o=n.length;if(o===0)return i.lineNumber>1?new M(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new M(i.lineNumber,1,i.lineNumber+1,1):new M(i.lineNumber,1,i.lineNumber,1);const r=f=>f.start+1<=i.column&&i.column<=f.end+1,a=(f,g)=>(f=Math.min(f,i.column),g=Math.max(g,i.column),new M(i.lineNumber,f,i.lineNumber,g)),l=f=>{let g=f.start+1,m=f.end+1,_=!1;for(;m-1<o&&this._charAtIsWhitespace(n,m-1);)_=!0,m++;if(!_)for(;g>1&&this._charAtIsWhitespace(n,g-2);)g--;return a(g,m)},c=Ii._findPreviousWordOnLine(e,t,i);if(c&&r(c))return l(c);const d=Ii._findNextWordOnLine(e,t,i);return d&&r(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=Ii._moveWordPartLeft(e,i);return new M(i.lineNumber,i.column,n.lineNumber,n.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let n=t;n<i;n++){const o=e.charAt(n);if(o!==" "&&o!=="	")return n}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-1,o=this._findFirstNonWhitespaceChar(i,n);return n+1<o?new M(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,n=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;const a=new se(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,c=a.column;const d=n.getLineCount(),f=n.getLineMaxColumn(l);if(l===d&&c===f)return null;if(r){const m=this._deleteWordRightWhitespace(n,a);if(m)return m}let g=Ii._findNextWordOnLine(i,n,a);return t===2?g?c=g.end+1:c<f||l===d?c=f:(l++,g=Ii._findNextWordOnLine(i,n,new se(l,1)),g?c=g.start+1:c=n.getLineMaxColumn(l)):(g&&c>=g.start+1&&(g=Ii._findNextWordOnLine(i,n,new se(l,g.end+1))),g?c=g.start+1:c<f||l===d?c=f:(l++,g=Ii._findNextWordOnLine(i,n,new se(l,1)),g?c=g.start+1:c=n.getLineMaxColumn(l))),new M(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=Ii._moveWordPartRight(e,i);return new M(i.lineNumber,i.column,n.lineNumber,n.column)}static _createWordAtPosition(e,t,i){const n=new M(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(n),startColumn:n.startColumn,endColumn:n.endColumn}}static getWordAtPosition(e,t,i){const n=Tl(t),o=Ii._findPreviousWordOnLine(n,e,i);if(o&&o.wordType===1&&o.start<=i.column-1&&i.column-1<=o.end)return Ii._createWordAtPosition(e,i.lineNumber,o);const r=Ii._findNextWordOnLine(n,e,i);return r&&r.wordType===1&&r.start<=i.column-1&&i.column-1<=r.end?Ii._createWordAtPosition(e,i.lineNumber,r):null}static word(e,t,i,n,o){const r=Tl(e.wordSeparators),a=Ii._findPreviousWordOnLine(r,t,o),l=Ii._findNextWordOnLine(r,t,o);if(!n){let m,_;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(m=a.start+1,_=a.end+1):l&&l.wordType===1&&l.start<=o.column-1&&o.column-1<=l.end?(m=l.start+1,_=l.end+1):(a?m=a.end+1:m=1,l?_=l.start+1:_=t.getLineMaxColumn(o.lineNumber)),new eo(new M(o.lineNumber,m,o.lineNumber,_),0,new se(o.lineNumber,_),0)}let c,d;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<o.column-1&&o.column-1<l.end?(c=l.start+1,d=l.end+1):(c=o.column,d=o.column);const f=o.lineNumber;let g;if(i.selectionStart.containsPosition(o))g=i.selectionStart.endColumn;else if(o.isBeforeOrEqual(i.selectionStart.getStartPosition())){g=c;const m=new se(f,g);i.selectionStart.containsPosition(m)&&(g=i.selectionStart.endColumn)}else{g=d;const m=new se(f,g);i.selectionStart.containsPosition(m)&&(g=i.selectionStart.startColumn)}return i.move(!0,f,g,0)}}class XN extends Ii{static deleteWordPartLeft(e){const t=kk([Ii.deleteWordLeft(e,0),Ii.deleteWordLeft(e,2),Ii._deleteWordPartLeft(e.model,e.selection)]);return t.sort(M.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=kk([Ii.deleteWordRight(e,0),Ii.deleteWordRight(e,2),Ii._deleteWordPartRight(e.model,e.selection)]);return t.sort(M.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,i){const n=kk([Ii.moveWordLeft(e,t,i,0),Ii.moveWordLeft(e,t,i,2),Ii._moveWordPartLeft(t,i)]);return n.sort(se.compare),n[2]}static moveWordPartRight(e,t,i){const n=kk([Ii.moveWordRight(e,t,i,0),Ii.moveWordRight(e,t,i,2),Ii._moveWordPartRight(t,i)]);return n.sort(se.compare),n[0]}}function kk(s){return s.filter(e=>Boolean(e))}class Js{static addCursorDown(e,t,i){const n=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];n[o++]=new ui(l.modelState,l.viewState),i?n[o++]=ui.fromModelState(Bi.translateDown(e.cursorConfig,e.model,l.modelState)):n[o++]=ui.fromViewState(Bi.translateDown(e.cursorConfig,e,l.viewState))}return n}static addCursorUp(e,t,i){const n=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];n[o++]=new ui(l.modelState,l.viewState),i?n[o++]=ui.fromModelState(Bi.translateUp(e.cursorConfig,e.model,l.modelState)):n[o++]=ui.fromViewState(Bi.translateUp(e.cursorConfig,e,l.viewState))}return n}static moveToBeginningOfLine(e,t,i){const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];n[o]=this._moveToLineStart(e,a,i)}return n}static _moveToLineStart(e,t,i){const n=t.viewState.position.column,o=t.modelState.position.column,r=n===o,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!r&&!(n===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return ui.fromViewState(Bi.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return ui.fromModelState(Bi.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,n){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=this._moveToLineEnd(e,l,i,n)}return o}static _moveToLineEnd(e,t,i,n){const o=t.viewState.position,r=e.getLineMaxColumn(o.lineNumber),a=o.column===r,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=r-o.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,i,n):this._moveToLineEndByView(e,t,i,n)}static _moveToLineEndByView(e,t,i,n){return ui.fromViewState(Bi.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,n))}static _moveToLineEndByModel(e,t,i,n){return ui.fromModelState(Bi.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,n))}static expandLineSelection(e,t){const i=[];for(let n=0,o=t.length;n<o;n++){const r=t[n],a=r.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=r.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),i[n]=ui.fromModelState(new eo(new M(a,1,a,1),0,new se(c,d),0))}return i}static moveToBeginningOfBuffer(e,t,i){const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];n[o]=ui.fromModelState(Bi.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return n}static moveToEndOfBuffer(e,t,i){const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];n[o]=ui.fromModelState(Bi.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return n}static selectAll(e,t){const i=e.model.getLineCount(),n=e.model.getLineMaxColumn(i);return ui.fromModelState(new eo(new M(1,1,1,1),0,new se(i,n),0))}static line(e,t,i,n,o){const r=e.model.validatePosition(n),a=o?e.coordinatesConverter.validateViewPosition(new se(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!i||!t.modelState.hasSelection()){const c=e.model.getLineCount();let d=r.lineNumber+1,f=1;return d>c&&(d=c,f=e.model.getLineMaxColumn(d)),ui.fromModelState(new eo(new M(r.lineNumber,1,d,f),0,new se(d,f),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<l)return ui.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(r.lineNumber>l){const c=e.getLineCount();let d=a.lineNumber+1,f=1;return d>c&&(d=c,f=e.getLineMaxColumn(d)),ui.fromViewState(t.viewState.move(t.modelState.hasSelection(),d,f,0))}else{const c=t.modelState.selectionStart.getEndPosition();return ui.fromModelState(t.modelState.move(t.modelState.hasSelection(),c.lineNumber,c.column,0))}}static word(e,t,i,n){const o=e.model.validatePosition(n);return ui.fromModelState(Ii.word(e.cursorConfig,e.model,t.modelState,i,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new ui(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,n=t.viewState.position.column;return ui.fromViewState(new eo(new M(i,n,i,n),0,new se(i,n),0))}static moveTo(e,t,i,n,o){const r=e.model.validatePosition(n),a=o?e.coordinatesConverter.validateViewPosition(new se(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return ui.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,n,o,r){switch(i){case 0:return r===4?this._moveHalfLineLeft(e,t,n):this._moveLeft(e,t,n,o);case 1:return r===4?this._moveHalfLineRight(e,t,n):this._moveRight(e,t,n,o);case 2:return r===2?this._moveUpByViewLines(e,t,n,o):this._moveUpByModelLines(e,t,n,o);case 3:return r===2?this._moveDownByViewLines(e,t,n,o):this._moveDownByModelLines(e,t,n,o);case 4:return r===2?t.map(a=>ui.fromViewState(Bi.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,n))):t.map(a=>ui.fromModelState(Bi.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,n)));case 5:return r===2?t.map(a=>ui.fromViewState(Bi.moveToNextBlankLine(e.cursorConfig,e,a.viewState,n))):t.map(a=>ui.fromModelState(Bi.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,n)));case 6:return this._moveToViewMinColumn(e,t,n);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,n);case 8:return this._moveToViewCenterColumn(e,t,n);case 9:return this._moveToViewMaxColumn(e,t,n);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,n);default:return null}}static viewportMove(e,t,i,n,o){const r=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 14:{const l=[];for(let c=0,d=t.length;c<d;c++){const f=t[c];l[c]=this.findPositionInViewportIfOutside(e,f,r,n)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,n){const o=t.viewState.position.lineNumber;if(i.startLineNumber<=o&&o<=i.endLineNumber-1)return new ui(t.modelState,t.viewState);{let r;o>i.endLineNumber-1?r=i.endLineNumber-1:o<i.startLineNumber?r=i.startLineNumber:r=o;const a=Bi.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return ui.fromViewState(t.viewState.move(n,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.min(t.endLineNumber,n+i-1)}static _lastLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.max(n,t.endLineNumber-i+1)}static _moveLeft(e,t,i,n){return t.map(o=>ui.fromViewState(Bi.moveLeft(e.cursorConfig,e,o.viewState,i,n)))}static _moveHalfLineLeft(e,t,i){const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);n[o]=ui.fromViewState(Bi.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return n}static _moveRight(e,t,i,n){return t.map(o=>ui.fromViewState(Bi.moveRight(e.cursorConfig,e,o.viewState,i,n)))}static _moveHalfLineRight(e,t,i){const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);n[o]=ui.fromViewState(Bi.moveRight(e.cursorConfig,e,a.viewState,i,c))}return n}static _moveDownByViewLines(e,t,i,n){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=ui.fromViewState(Bi.moveDown(e.cursorConfig,e,l.viewState,i,n))}return o}static _moveDownByModelLines(e,t,i,n){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=ui.fromModelState(Bi.moveDown(e.cursorConfig,e.model,l.modelState,i,n))}return o}static _moveUpByViewLines(e,t,i,n){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=ui.fromViewState(Bi.moveUp(e.cursorConfig,e,l.viewState,i,n))}return o}static _moveUpByModelLines(e,t,i,n){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=ui.fromModelState(Bi.moveUp(e.cursorConfig,e.model,l.modelState,i,n))}return o}static _moveToViewPosition(e,t,i,n,o){return ui.fromViewState(t.viewState.move(i,n,o,0))}static _moveToModelPosition(e,t,i,n,o){return ui.fromModelState(t.modelState.move(i,n,o,0))}static _moveToViewMinColumn(e,t,i){const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);n[o]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);n[o]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewCenterColumn(e,t,i){const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);n[o]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewMaxColumn(e,t,i){const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);n[o]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewLastNonWhitespaceColumn(e,t,i){const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);n[o]=this._moveToViewPosition(e,a,i,l,c)}return n}}var ZT;(function(s){const e=function(i){if(!$r(i))return!1;const n=i;return!(!Kr(n.to)||!fa(n.select)&&!NX(n.select)||!fa(n.by)&&!Kr(n.by)||!fa(n.value)&&!Ig(n.value))};s.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},s.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},s.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let n;switch(i.to){case s.RawDirection.Left:n=0;break;case s.RawDirection.Right:n=1;break;case s.RawDirection.Up:n=2;break;case s.RawDirection.Down:n=3;break;case s.RawDirection.PrevBlankLine:n=4;break;case s.RawDirection.NextBlankLine:n=5;break;case s.RawDirection.WrappedLineStart:n=6;break;case s.RawDirection.WrappedLineFirstNonWhitespaceCharacter:n=7;break;case s.RawDirection.WrappedLineColumnCenter:n=8;break;case s.RawDirection.WrappedLineEnd:n=9;break;case s.RawDirection.WrappedLineLastNonWhitespaceCharacter:n=10;break;case s.RawDirection.ViewPortTop:n=11;break;case s.RawDirection.ViewPortBottom:n=13;break;case s.RawDirection.ViewPortCenter:n=12;break;case s.RawDirection.ViewPortIfOutside:n=14;break;default:return null}let o=0;switch(i.by){case s.RawUnit.Line:o=1;break;case s.RawUnit.WrappedLine:o=2;break;case s.RawUnit.Character:o=3;break;case s.RawUnit.HalfLine:o=4;break}return{direction:n,unit:o,select:!!i.select,value:i.value||1}}s.parse=t})(ZT||(ZT={}));function Gb(s,e,t,i){const n=zb(e,t.startLineNumber,t.startColumn),o=i.getLanguageConfiguration(n.languageId);if(!o)return null;const r=n.getLineContent(),a=r.substr(0,t.startColumn-1-n.firstCharOffset);let l;t.isEmpty()?l=r.substr(t.startColumn-1-n.firstCharOffset):l=zb(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-n.firstCharOffset);let c="";if(t.startLineNumber>1&&n.firstCharOffset===0){const C=zb(e,t.startLineNumber-1);C.languageId===n.languageId&&(c=C.getLineContent())}const d=o.onEnter(s,c,a,l);if(!d)return null;const f=d.indentAction;let g=d.appendText;const m=d.removeText||0;g?f===ds.Indent&&(g="	"+g):f===ds.Indent||f===ds.IndentOutdent?g="	":g="";let _=vJ(e,t.startLineNumber,t.startColumn);return m&&(_=_.substring(0,_.length-m)),{indentAction:f,appendText:g,removeText:m,indentation:_}}var Mke=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Oke=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const m4=Object.create(null);function Up(s,e){if(e<=0)return"";m4[s]||(m4[s]=["",s]);const t=m4[s];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+s;return t[e]}let _l=class V3{constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,i,n,o){const r=ks.visibleColumnFromColumn(e,t,i);if(o){const a=Up(" ",n),c=ks.prevIndentTabStop(r,n)/n;return Up(a,c)}else{const a="	",c=ks.prevRenderTabStop(r,i)/i;return Up(a,c)}}static shiftIndent(e,t,i,n,o){const r=ks.visibleColumnFromColumn(e,t,i);if(o){const a=Up(" ",n),c=ks.nextIndentTabStop(r,n)/n;return Up(a,c)}else{const a="	",c=ks.nextRenderTabStop(r,i)/i;return Up(a,c)}}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let n=this._selection.endLineNumber;this._selection.endColumn===1&&i!==n&&(n=n-1);const{tabSize:o,indentSize:r,insertSpaces:a}=this._opts,l=i===n;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let f=i;f<=n;f++,c=d){d=0;const g=e.getLineContent(f);let m=Lr(g);if(this._opts.isUnshift&&(g.length===0||m===0)||!l&&!this._opts.isUnshift&&g.length===0)continue;if(m===-1&&(m=g.length),f>1&&ks.visibleColumnFromColumn(g,m+1,o)%r!==0&&e.tokenization.isCheapToTokenize(f-1)){const S=Gb(this._opts.autoIndent,e,new M(f-1,e.getLineMaxColumn(f-1),f-1,e.getLineMaxColumn(f-1)),this._languageConfigurationService);if(S){if(d=c,S.appendText)for(let x=0,L=S.appendText.length;x<L&&d<r&&S.appendText.charCodeAt(x)===32;x++)d++;S.removeText&&(d=Math.max(0,d-S.removeText));for(let x=0;x<d&&!(m===0||g.charCodeAt(m-1)!==32);x++)m--}}if(this._opts.isUnshift&&m===0)continue;let _;this._opts.isUnshift?_=V3.unshiftIndent(g,m+1,o,r,a):_=V3.shiftIndent(g,m+1,o,r,a),this._addEditOperation(t,new M(f,1,f,m+1),_),f===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=m+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?Up(" ",r):"	";for(let d=i;d<=n;d++){const f=e.getLineContent(d);let g=Lr(f);if(!(this._opts.isUnshift&&(f.length===0||g===0))&&!(!l&&!this._opts.isUnshift&&f.length===0)&&(g===-1&&(g=f.length),!(this._opts.isUnshift&&g===0)))if(this._opts.isUnshift){g=Math.min(g,r);for(let m=0;m<g;m++)if(f.charCodeAt(m)===9){g=m+1;break}this._addEditOperation(t,new M(d,1,d,g+1),"")}else this._addEditOperation(t,new M(d,1,d,1),c),d===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const n=t.getInverseEditOperations()[0];return new et(n.range.endLineNumber,n.range.endColumn,n.range.endLineNumber,n.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const n=this._selection.startColumn;return i.startColumn<=n?i:i.getDirection()===0?new et(i.startLineNumber,n,i.endLineNumber,i.endColumn):new et(i.endLineNumber,i.endColumn,i.startLineNumber,n)}return i}};_l=Mke([Oke(2,os)],_l);class Pke{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new M(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new M(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const i=t.getInverseEditOperations(),n=i[0].range,o=i[1].range;return new et(n.endLineNumber,n.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}}class Fke{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new M(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return new et(n.endLineNumber,n.startColumn,n.endLineNumber,n.endColumn-this._charAfter.length)}}function Bke(s,e,t){const i=s.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let n,o=-1;for(n=e-1;n>=1;n--){if(s.tokenization.getLanguageIdAtPosition(n,0)!==i)return o;const r=s.getLineContent(n);if(t.shouldIgnore(r)||/^\s+$/.test(r)||r===""){o=n;continue}return n}}return-1}function JN(s,e,t,i=!0,n){if(s<4)return null;const o=n.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!o)return null;if(t<=1)return{indentation:"",action:null};const r=Bke(e,t,o);if(r<0)return null;if(r<1)return{indentation:"",action:null};const a=e.getLineContent(r);if(o.shouldIncrease(a)||o.shouldIndentNextLine(a))return{indentation:on(a),action:ds.Indent,line:r};if(o.shouldDecrease(a))return{indentation:on(a),action:null,line:r};{if(r===1)return{indentation:on(e.getLineContent(r)),action:null,line:r};const l=r-1,c=o.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let d=0;for(let f=l-1;f>0;f--)if(!o.shouldIndentNextLine(e.getLineContent(f))){d=f;break}return{indentation:on(e.getLineContent(d+1)),action:null,line:d+1}}if(i)return{indentation:on(e.getLineContent(r)),action:null,line:r};for(let d=r;d>0;d--){const f=e.getLineContent(d);if(o.shouldIncrease(f))return{indentation:on(f),action:ds.Indent,line:d};if(o.shouldIndentNextLine(f)){let g=0;for(let m=d-1;m>0;m--)if(!o.shouldIndentNextLine(e.getLineContent(d))){g=m;break}return{indentation:on(e.getLineContent(g+1)),action:null,line:g+1}}else if(o.shouldDecrease(f))return{indentation:on(f),action:null,line:d}}return{indentation:on(e.getLineContent(1)),action:null,line:1}}}function ay(s,e,t,i,n,o){if(s<4)return null;const r=o.getLanguageConfiguration(t);if(!r)return null;const a=o.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=JN(s,e,i,void 0,o),c=e.getLineContent(i);if(l){const d=l.line;if(d!==void 0){const f=r.onEnter(s,"",e.getLineContent(d),"");if(f){let g=on(e.getLineContent(d));return f.removeText&&(g=g.substring(0,g.length-f.removeText)),f.indentAction===ds.Indent||f.indentAction===ds.IndentOutdent?g=n.shiftIndent(g):f.indentAction===ds.Outdent&&(g=n.unshiftIndent(g)),a.shouldDecrease(c)&&(g=n.unshiftIndent(g)),f.appendText&&(g+=f.appendText),on(g)}}return a.shouldDecrease(c)?l.action===ds.Indent?l.indentation:n.unshiftIndent(l.indentation):l.action===ds.Indent?n.shiftIndent(l.indentation):l.indentation}return null}function Vke(s,e,t,i,n){if(s<4)return null;e.tokenization.forceTokenization(t.startLineNumber);const o=e.tokenization.getLineTokens(t.startLineNumber),r=CN(o,t.startColumn-1),a=r.getLineContent();let l=!1,c;r.firstCharOffset>0&&o.getLanguageId(0)!==r.languageId?(l=!0,c=a.substr(0,t.startColumn-1-r.firstCharOffset)):c=o.getLineContent().substring(0,t.startColumn-1);let d;t.isEmpty()?d=a.substr(t.startColumn-1-r.firstCharOffset):d=zb(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset);const f=n.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!f)return null;const g=c,m=on(c),_={tokenization:{getLineTokens:L=>e.tokenization.getLineTokens(L),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(L,k)=>e.getLanguageIdAtPosition(L,k)},getLineContent:L=>L===t.startLineNumber?g:e.getLineContent(L)},C=on(o.getLineContent()),S=JN(s,_,t.startLineNumber+1,void 0,n);if(!S){const L=l?C:m;return{beforeEnter:L,afterEnter:L}}let x=l?C:S.indentation;return S.action===ds.Indent&&(x=i.shiftIndent(x)),f.shouldDecrease(d)&&(x=i.unshiftIndent(x)),{beforeEnter:l?C:m,afterEnter:x}}function Wke(s,e,t,i,n,o){if(s<4)return null;const r=zb(e,t.startLineNumber,t.startColumn);if(r.firstCharOffset)return null;const a=o.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!a)return null;const l=r.getLineContent(),c=l.substr(0,t.startColumn-1-r.firstCharOffset);let d;if(t.isEmpty()?d=l.substr(t.startColumn-1-r.firstCharOffset):d=zb(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset),!a.shouldDecrease(c+d)&&a.shouldDecrease(c+i+d)){const f=JN(s,e,t.startLineNumber,!1,o);if(!f)return null;let g=f.indentation;return f.action!==ds.Indent&&(g=n.unshiftIndent(g)),g}return null}function Oee(s,e,t){const i=t.getLanguageConfiguration(s.getLanguageId()).indentRulesSupport;return!i||e<1||e>s.getLineCount()?null:i.getIndentMetadata(s.getLineContent(e))}class In{static indent(e,t,i){if(t===null||i===null)return[];const n=[];for(let o=0,r=i.length;o<r;o++)n[o]=new _l(i[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static outdent(e,t,i){const n=[];for(let o=0,r=i.length;o<r;o++)n[o]=new _l(i[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static shiftIndent(e,t,i){return i=i||1,_l.shiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,i){return i=i||1,_l.unshiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,i,n){const o=[];for(let r=0,a=i.length;r<a;r++)o[r]=new ro(i[r],n[r]);return new Ar(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,n,o){const r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],d=c.getPosition();if(o&&!c.isEmpty()&&(o=!1),o&&n.indexOf(`
`)!==n.length-1&&(o=!1),o){const f=new M(d.lineNumber,1,d.lineNumber,1);r[a]=new YB(f,n,c,!0)}else r[a]=new ro(c,n)}return new Ar(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,i,n,o){if(n||t.length===1)return null;if(o&&o.length===t.length)return o;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substr(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substr(0,i.length-1));const r=md(i);if(r.length===t.length)return r}return null}static paste(e,t,i,n,o,r){const a=this._distributePasteToCursors(e,i,n,o,r);return a?(i=i.sort(M.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,n,o)}static _goodIndentForLine(e,t,i){let n=null,o="";const r=JN(e.autoIndent,t,i,!1,e.languageConfigurationService);if(r)n=r.action,o=r.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const d=t.getLineContent(a);if(dd(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=Gb(e.autoIndent,t,new M(a,l,a,l),e.languageConfigurationService);c&&(o=c.indentation+c.appendText)}return n&&(n===ds.Indent&&(o=In.shiftIndent(e,o)),n===ds.Outdent&&(o=In.unshiftIndent(e,o)),o=e.normalizeIndentation(o)),o||null}static _replaceJumpToNextIndent(e,t,i,n){let o="";const r=i.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,r),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)o+=" "}else o="	";return new ro(i,o,n)}static tab(e,t,i){const n=[];for(let o=0,r=i.length;o<r;o++){const a=i[o];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const d=e.normalizeIndentation(c);if(!l.startsWith(d)){n[o]=new ro(new M(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}n[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){n[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}n[o]=new _l(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return n}static compositionType(e,t,i,n,o,r,a,l){const c=n.map(d=>this._compositionType(i,d,o,r,a,l));return new Ar(4,c,{shouldPushStackElementBefore:Ek(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,n,o,r){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-n),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),d=new M(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===i&&r===0?null:new BE(d,i,0,r)}static _typeCommand(e,t,i){return i?new Dk(e,t,!0):new ro(e,t,!0)}static _enter(e,t,i,n){if(e.autoIndent===0)return In._typeCommand(n,`
`,i);if(!t.tokenization.isCheapToTokenize(n.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(n.startLineNumber),c=on(l).substring(0,n.startColumn-1);return In._typeCommand(n,`
`+e.normalizeIndentation(c),i)}const o=Gb(e.autoIndent,t,n,e.languageConfigurationService);if(o){if(o.indentAction===ds.None)return In._typeCommand(n,`
`+e.normalizeIndentation(o.indentation+o.appendText),i);if(o.indentAction===ds.Indent)return In._typeCommand(n,`
`+e.normalizeIndentation(o.indentation+o.appendText),i);if(o.indentAction===ds.IndentOutdent){const l=e.normalizeIndentation(o.indentation),c=e.normalizeIndentation(o.indentation+o.appendText),d=`
`+c+`
`+l;return i?new Dk(n,d,!0):new BE(n,d,-1,c.length-l.length,!0)}else if(o.indentAction===ds.Outdent){const l=In.unshiftIndent(e,o.indentation);return In._typeCommand(n,`
`+e.normalizeIndentation(l+o.appendText),i)}}const r=t.getLineContent(n.startLineNumber),a=on(r).substring(0,n.startColumn-1);if(e.autoIndent>=4){const l=Vke(e.autoIndent,t,n,{unshiftIndent:c=>In.unshiftIndent(e,c),shiftIndent:c=>In.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,n.getEndPosition());const d=n.endColumn,f=t.getLineContent(n.endLineNumber),g=Lr(f);if(g>=0?n=n.setEndPosition(n.endLineNumber,Math.max(n.endColumn,g+1)):n=n.setEndPosition(n.endLineNumber,t.getLineMaxColumn(n.endLineNumber)),i)return new Dk(n,`
`+e.normalizeIndentation(l.afterEnter),!0);{let m=0;return d<=g+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),m=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new BE(n,`
`+e.normalizeIndentation(l.afterEnter),0,m,!0)}}}return In._typeCommand(n,`
`+e.normalizeIndentation(a),i)}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let n=0,o=i.length;n<o;n++)if(!t.tokenization.isCheapToTokenize(i[n].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,i,n){const o=vJ(t,i.startLineNumber,i.startColumn),r=Wke(e.autoIndent,t,i,n,{shiftIndent:a=>In.shiftIndent(e,a),unshiftIndent:a=>In.unshiftIndent(e,a)},e.languageConfigurationService);if(r===null)return null;if(r!==e.normalizeIndentation(o)){const a=t.getLineFirstNonWhitespaceColumn(i.startLineNumber);return a===0?In._typeCommand(new M(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(r)+n,!1):In._typeCommand(new M(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(r)+t.getLineContent(i.startLineNumber).substring(a-1,i.startColumn-1)+n,!1)}return null}static _isAutoClosingOvertype(e,t,i,n,o){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(o))return!1;for(let r=0,a=i.length;r<a;r++){const l=i[r];if(!l.isEmpty())return!1;const c=l.getPosition(),d=t.getLineContent(c.lineNumber);if(d.charAt(c.column-1)!==o)return!1;const g=Yf(o);if((c.column>2?d.charCodeAt(c.column-2):0)===92&&g)return!1;if(e.autoClosingOvertype==="auto"){let _=!1;for(let C=0,S=n.length;C<S;C++){const x=n[C];if(c.lineNumber===x.startLineNumber&&c.column===x.startColumn){_=!0;break}}if(!_)return!1}}return!0}static _runAutoClosingOvertype(e,t,i,n,o){const r=[];for(let a=0,l=n.length;a<l;a++){const d=n[a].getPosition(),f=new M(d.lineNumber,d.column,d.lineNumber,d.column+1);r[a]=new ro(f,o)}return new Ar(4,r,{shouldPushStackElementBefore:Ek(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),n=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],r=n.some(l=>t.startsWith(l.open)),a=o.some(l=>t.startsWith(l.close));return!r&&a}static _findAutoClosingPairOpen(e,t,i,n){const o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(n);if(!o)return null;let r=null;for(const a of o)if(r===null||a.open.length>r.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new M(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+n!==a.open){l=!1;break}l&&(r=a)}return r}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),n=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let o=null;for(const r of n)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!o||r.open.length>o.open.length)&&(o=r);return o}static _getAutoClosingPairClose(e,t,i,n,o){const r=Yf(n),a=r?e.autoClosingQuotes:e.autoClosingBrackets,l=r?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(const _ of i)if(!_.isEmpty())return null;const c=i.map(_=>{const C=_.getPosition();return o?{lineNumber:C.lineNumber,beforeColumn:C.column-n.length,afterColumn:C.column}:{lineNumber:C.lineNumber,beforeColumn:C.column,afterColumn:C.column}}),d=this._findAutoClosingPairOpen(e,t,c.map(_=>new se(_.lineNumber,_.beforeColumn)),n);if(!d)return null;const f=this._findContainedAutoClosingPair(e,d),g=f?f.close:"";let m=!0;for(const _ of c){const{lineNumber:C,beforeColumn:S,afterColumn:x}=_,L=t.getLineContent(C),k=L.substring(0,S-1),T=L.substring(x-1);if(T.startsWith(g)||(m=!1),T.length>0){const R=T.charAt(0);if(!In._isBeforeClosingBrace(e,T)&&!l(R))return null}if(d.open.length===1&&(n==="'"||n==='"')&&a!=="always"){const R=Tl(e.wordSeparators);if(k.length>0){const B=k.charCodeAt(k.length-1);if(R.get(B)===0)return null}}if(!t.tokenization.isCheapToTokenize(C))return null;t.tokenization.forceTokenization(C);const A=t.tokenization.getLineTokens(C),O=CN(A,S-1);if(!d.shouldAutoClose(O,S-O.firstCharOffset))return null;const I=d.findNeutralCharacter();if(I){const R=t.tokenization.getTokenTypeIfInsertingCharacter(C,S,I);if(!d.isOK(R))return null}}return m?d.close.substring(0,d.close.length-g.length):d.close}static _runAutoClosingOpenCharType(e,t,i,n,o,r,a){const l=[];for(let c=0,d=n.length;c<d;c++){const f=n[c];l[c]=new Pee(f,o,!r,a)}return new Ar(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return Yf(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,i,n){if(!In._shouldSurroundChar(e,n)||!e.surroundingPairs.hasOwnProperty(n))return!1;const o=Yf(n);for(const r of i){if(r.isEmpty())return!1;let a=!0;for(let l=r.startLineNumber;l<=r.endLineNumber;l++){const c=t.getLineContent(l),d=l===r.startLineNumber?r.startColumn-1:0,f=l===r.endLineNumber?r.endColumn-1:c.length,g=c.substring(d,f);if(/[^ \t]/.test(g)){a=!1;break}}if(a)return!1;if(o&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){const l=t.getValueInRange(r);if(Yf(l))return!1}}return!0}static _runSurroundSelectionType(e,t,i,n,o){const r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a],d=t.surroundingPairs[o];r[a]=new Pke(c,o,d)}return new Ar(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,n,o){if(!t.electricChars.hasOwnProperty(o)||!n.isEmpty())return null;const r=n.getPosition();i.tokenization.forceTokenization(r.lineNumber);const a=i.tokenization.getLineTokens(r.lineNumber);let l;try{l=t.onElectricCharacter(o,a,r.column)}catch(c){return Yt(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+o).lastIndexOf(l.matchOpenBracket)+1,d=i.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:r.lineNumber,column:c},500);if(d){if(d.startLineNumber===r.lineNumber)return null;const f=i.getLineContent(d.startLineNumber),g=on(f),m=t.normalizeIndentation(g),_=i.getLineContent(r.lineNumber),C=i.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,S=_.substring(C-1,r.column-1),x=m+S+o,L=new M(r.lineNumber,1,r.lineNumber,r.column),k=new ro(L,x);return new Ar(_4(x,e),[k],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,i,n,o,r){if(!n)return null;let a=null;for(const f of n)if(a===null)a=f.insertedText;else if(a!==f.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const f of n)if(f.deletedText.length!==0){c=!0;break}if(c){if(!In._shouldSurroundChar(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const f=Yf(l);for(const _ of n)if(_.deletedSelectionStart!==0||_.deletedSelectionEnd!==_.deletedText.length||/^[ \t]+$/.test(_.deletedText)||f&&Yf(_.deletedText))return null;const g=[];for(const _ of o){if(!_.isEmpty())return null;g.push(_.getPosition())}if(g.length!==n.length)return null;const m=[];for(let _=0,C=g.length;_<C;_++)m.push(new Fke(g[_],n[_].deletedText,l));return new Ar(4,m,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,i,o,r,l)){const f=o.map(g=>new ro(new M(g.positionLineNumber,g.positionColumn,g.positionLineNumber,g.positionColumn+1),"",!1));return new Ar(4,f,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=this._getAutoClosingPairClose(t,i,o,l,!0);return d!==null?this._runAutoClosingOpenCharType(e,t,i,o,l,!0,d):null}static typeWithInterceptors(e,t,i,n,o,r,a){if(!e&&a===`
`){const d=[];for(let f=0,g=o.length;f<g;f++)d[f]=In._enter(i,n,!1,o[f]);return new Ar(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(i,n,o)){const d=[];let f=!1;for(let g=0,m=o.length;g<m;g++)if(d[g]=this._runAutoIndentType(i,n,o[g],a),!d[g]){f=!0;break}if(!f)return new Ar(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(i,n,o,r,a))return this._runAutoClosingOvertype(t,i,n,o,a);if(!e){const d=this._getAutoClosingPairClose(i,n,o,a,!1);if(d)return this._runAutoClosingOpenCharType(t,i,n,o,a,!1,d)}if(!e&&this._isSurroundSelectionType(i,n,o,a))return this._runSurroundSelectionType(t,i,n,o,a);if(!e&&this._isTypeInterceptorElectricChar(i,n,o)){const d=this._typeInterceptorElectricChar(t,i,n,o[0],a);if(d)return d}const l=[];for(let d=0,f=o.length;d<f;d++)l[d]=new ro(o[d],a);const c=_4(a,t);return new Ar(c,l,{shouldPushStackElementBefore:Ek(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,i,n,o){const r=[];for(let l=0,c=n.length;l<c;l++)r[l]=new ro(n[l],o);const a=_4(o,e);return new Ar(a,r,{shouldPushStackElementBefore:Ek(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];const n=[];for(let o=0,r=i.length;o<r;o++){let a=i[o].positionLineNumber;if(a===1)n[o]=new Dk(new M(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);n[o]=this._enter(e,t,!1,new M(a,l,a,l))}}return n}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];const n=[];for(let o=0,r=i.length;o<r;o++){const a=i[o].positionLineNumber,l=t.getLineMaxColumn(a);n[o]=this._enter(e,t,!1,new M(a,l,a,l))}return n}static lineBreakInsert(e,t,i){const n=[];for(let o=0,r=i.length;o<r;o++)n[o]=this._enter(e,t,!0,i[o]);return n}}class Pee extends BE{constructor(e,t,i,n){super(e,(i?t:"")+n,0,-n.length),this._openCharacter=t,this._closeCharacter=n,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new M(n.startLineNumber,n.endColumn-this._closeCharacter.length,n.endLineNumber,n.endColumn),this.enclosingRange=new M(n.startLineNumber,n.endColumn-this._openCharacter.length-this._closeCharacter.length,n.endLineNumber,n.endColumn),super.computeCursorState(e,t)}}class Hke{constructor(e,t,i,n,o,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=n,this.insertedSelectionStart=o,this.insertedSelectionEnd=r}}function _4(s,e){return s===" "?e===5||e===6?6:5:4}function Ek(s,e){return Nq(s)&&!Nq(e)?!0:s===5?!1:Iq(s)!==Iq(e)}function Iq(s){return s===6||s===5?"space":s}function Nq(s){return s===4||s===5||s===6}var $;(function(s){s.editorSimpleInput=new st("editorSimpleInput",!1,!0),s.editorTextFocus=new st("editorTextFocus",!1,b("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),s.focus=new st("editorFocus",!1,b("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),s.textInputFocus=new st("textInputFocus",!1,b("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),s.readOnly=new st("editorReadonly",!1,b("editorReadonly","Whether the editor is read only")),s.inDiffEditor=new st("inDiffEditor",!1,b("inDiffEditor","Whether the context is a diff editor")),s.columnSelection=new st("editorColumnSelection",!1,b("editorColumnSelection","Whether `editor.columnSelection` is enabled")),s.writable=s.readOnly.toNegated(),s.hasNonEmptySelection=new st("editorHasSelection",!1,b("editorHasSelection","Whether the editor has text selected")),s.hasOnlyEmptySelection=s.hasNonEmptySelection.toNegated(),s.hasMultipleSelections=new st("editorHasMultipleSelections",!1,b("editorHasMultipleSelections","Whether the editor has multiple selections")),s.hasSingleSelection=s.hasMultipleSelections.toNegated(),s.tabMovesFocus=new st("editorTabMovesFocus",!1,b("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),s.tabDoesNotMoveFocus=s.tabMovesFocus.toNegated(),s.isInWalkThroughSnippet=new st("isInEmbeddedEditor",!1,!0),s.canUndo=new st("canUndo",!1,!0),s.canRedo=new st("canRedo",!1,!0),s.hoverVisible=new st("editorHoverVisible",!1,b("editorHoverVisible","Whether the editor hover is visible")),s.inCompositeEditor=new st("inCompositeEditor",void 0,b("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),s.notInCompositeEditor=s.inCompositeEditor.toNegated(),s.languageId=new st("editorLangId","",b("editorLangId","The language identifier of the editor")),s.hasCompletionItemProvider=new st("editorHasCompletionItemProvider",!1,b("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),s.hasCodeActionsProvider=new st("editorHasCodeActionsProvider",!1,b("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),s.hasCodeLensProvider=new st("editorHasCodeLensProvider",!1,b("editorHasCodeLensProvider","Whether the editor has a code lens provider")),s.hasDefinitionProvider=new st("editorHasDefinitionProvider",!1,b("editorHasDefinitionProvider","Whether the editor has a definition provider")),s.hasDeclarationProvider=new st("editorHasDeclarationProvider",!1,b("editorHasDeclarationProvider","Whether the editor has a declaration provider")),s.hasImplementationProvider=new st("editorHasImplementationProvider",!1,b("editorHasImplementationProvider","Whether the editor has an implementation provider")),s.hasTypeDefinitionProvider=new st("editorHasTypeDefinitionProvider",!1,b("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),s.hasHoverProvider=new st("editorHasHoverProvider",!1,b("editorHasHoverProvider","Whether the editor has a hover provider")),s.hasDocumentHighlightProvider=new st("editorHasDocumentHighlightProvider",!1,b("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),s.hasDocumentSymbolProvider=new st("editorHasDocumentSymbolProvider",!1,b("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),s.hasReferenceProvider=new st("editorHasReferenceProvider",!1,b("editorHasReferenceProvider","Whether the editor has a reference provider")),s.hasRenameProvider=new st("editorHasRenameProvider",!1,b("editorHasRenameProvider","Whether the editor has a rename provider")),s.hasSignatureHelpProvider=new st("editorHasSignatureHelpProvider",!1,b("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),s.hasInlayHintsProvider=new st("editorHasInlayHintsProvider",!1,b("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),s.hasDocumentFormattingProvider=new st("editorHasDocumentFormattingProvider",!1,b("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),s.hasDocumentSelectionFormattingProvider=new st("editorHasDocumentSelectionFormattingProvider",!1,b("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),s.hasMultipleDocumentFormattingProvider=new st("editorHasMultipleDocumentFormattingProvider",!1,b("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),s.hasMultipleDocumentSelectionFormattingProvider=new st("editorHasMultipleDocumentSelectionFormattingProvider",!1,b("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})($||($={}));const Oi=0;class is extends Fs{runEditorCommand(e,t,i){const n=t._getViewModel();!n||this.runCoreEditorCommand(n,i||{})}}var QT;(function(s){const e=function(i){if(!$r(i))return!1;const n=i;return!(!Kr(n.to)||!fa(n.by)&&!Kr(n.by)||!fa(n.value)&&!Ig(n.value)||!fa(n.revealCursor)&&!NX(n.revealCursor))};s.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},s.RawDirection={Up:"up",Down:"down"},s.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor"};function t(i){let n;switch(i.to){case s.RawDirection.Up:n=1;break;case s.RawDirection.Down:n=2;break;default:return null}let o;switch(i.by){case s.RawUnit.Line:o=1;break;case s.RawUnit.WrappedLine:o=2;break;case s.RawUnit.Page:o=3;break;case s.RawUnit.HalfPage:o=4;break;case s.RawUnit.Editor:o=5;break;default:o=2}const r=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:n,unit:o,value:r,revealCursor:a,select:!!i.select}}s.parse=t})(QT||(QT={}));var Tb;(function(s){const e=function(t){if(!$r(t))return!1;const i=t;return!(!Ig(i.lineNumber)&&!Kr(i.lineNumber)||!fa(i.at)&&!Kr(i.at))};s.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},s.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Tb||(Tb={}));class W3{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const n=t.get(Vi).getFocusedCodeEditor();return n&&n.hasTextFocus()?this._runEditorCommand(t,n,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const n=document.activeElement;return n&&["input","textarea"].indexOf(n.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const n=t.get(Vi).getActiveCodeEditor();return n?(n.focus(),this._runEditorCommand(t,n,i)):!1})}_runEditorCommand(e,t,i){const n=this.runEditorCommand(e,t,i);return n||!0}}var zs;(function(s){class e extends is{constructor(L){super(L),this._minimalReveal=L.minimalReveal,this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,k){L.model.pushStackElement(),L.setCursorStates(k.source,3,[Js.moveTo(L,L.getPrimaryCursorState(),this._inSelectionMode,k.position,k.viewPosition)])&&L.revealPrimaryCursor(k.source,!0,this._minimalReveal)}}s.MoveTo=Be(new e({id:"_moveTo",minimalReveal:!0,inSelectionMode:!1,precondition:void 0})),s.MoveToSelect=Be(new e({id:"_moveToSelect",minimalReveal:!1,inSelectionMode:!0,precondition:void 0}));class t extends is{runCoreEditorCommand(L,k){L.model.pushStackElement();const T=this._getColumnSelectResult(L,L.getPrimaryCursorState(),L.getCursorColumnSelectData(),k);L.setCursorStates(k.source,3,T.viewStates.map(A=>ui.fromViewState(A))),L.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:T.fromLineNumber,fromViewVisualColumn:T.fromVisualColumn,toViewLineNumber:T.toLineNumber,toViewVisualColumn:T.toVisualColumn}),T.reversed?L.revealTopMostCursor(k.source):L.revealBottomMostCursor(k.source)}}s.ColumnSelect=Be(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(x,L,k,T){const A=x.model.validatePosition(T.position),O=x.coordinatesConverter.validateViewPosition(new se(T.viewPosition.lineNumber,T.viewPosition.column),A),I=T.doColumnSelect?k.fromViewLineNumber:O.lineNumber,R=T.doColumnSelect?k.fromViewVisualColumn:T.mouseColumn-1;return nm.columnSelect(x.cursorConfig,x,I,R,O.lineNumber,T.mouseColumn-1)}}),s.CursorColumnSelectLeft=Be(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(x,L,k,T){return nm.columnSelectLeft(x.cursorConfig,x,k)}}),s.CursorColumnSelectRight=Be(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(x,L,k,T){return nm.columnSelectRight(x.cursorConfig,x,k)}});class i extends t{constructor(L){super(L),this._isPaged=L.isPaged}_getColumnSelectResult(L,k,T,A){return nm.columnSelectUp(L.cursorConfig,L,T,this._isPaged)}}s.CursorColumnSelectUp=Be(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:3600,linux:{primary:0}}})),s.CursorColumnSelectPageUp=Be(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:3595,linux:{primary:0}}}));class n extends t{constructor(L){super(L),this._isPaged=L.isPaged}_getColumnSelectResult(L,k,T,A){return nm.columnSelectDown(L.cursorConfig,L,T,this._isPaged)}}s.CursorColumnSelectDown=Be(new n({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:3602,linux:{primary:0}}})),s.CursorColumnSelectPageDown=Be(new n({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:3596,linux:{primary:0}}}));class o extends is{constructor(){super({id:"cursorMove",precondition:void 0,description:ZT.description})}runCoreEditorCommand(L,k){const T=ZT.parse(k);!T||this._runCursorMove(L,k.source,T)}_runCursorMove(L,k,T){L.model.pushStackElement(),L.setCursorStates(k,3,o._move(L,L.getCursorStates(),T)),L.revealPrimaryCursor(k,!0)}static _move(L,k,T){const A=T.select,O=T.value;switch(T.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return Js.simpleMove(L,k,T.direction,A,O,T.unit);case 11:case 13:case 12:case 14:return Js.viewportMove(L,k,T.direction,A,O);default:return null}}}s.CursorMoveImpl=o,s.CursorMove=Be(new o);class r extends is{constructor(L){super(L),this._staticArgs=L.args}runCoreEditorCommand(L,k){let T=this._staticArgs;this._staticArgs.value===-1&&(T={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:k.pageSize||L.cursorConfig.pageSize}),L.model.pushStackElement(),L.setCursorStates(k.source,3,Js.simpleMove(L,L.getCursorStates(),T.direction,T.select,T.value,T.unit)),L.revealPrimaryCursor(k.source,!0)}}s.CursorLeft=Be(new r({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),s.CursorLeftSelect=Be(new r({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:1039}})),s.CursorRight=Be(new r({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),s.CursorRightSelect=Be(new r({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:1041}})),s.CursorUp=Be(new r({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),s.CursorUpSelect=Be(new r({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),s.CursorPageUp=Be(new r({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:11}})),s.CursorPageUpSelect=Be(new r({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:1035}})),s.CursorDown=Be(new r({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),s.CursorDownSelect=Be(new r({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),s.CursorPageDown=Be(new r({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:12}})),s.CursorPageDownSelect=Be(new r({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:1036}})),s.CreateCursor=Be(new class extends is{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(x,L){let k;L.wholeLine?k=Js.line(x,x.getPrimaryCursorState(),!1,L.position,L.viewPosition):k=Js.moveTo(x,x.getPrimaryCursorState(),!1,L.position,L.viewPosition);const T=x.getCursorStates();if(T.length>1){const A=k.modelState?k.modelState.position:null,O=k.viewState?k.viewState.position:null;for(let I=0,R=T.length;I<R;I++){const B=T[I];if(!(A&&!B.modelState.selection.containsPosition(A))&&!(O&&!B.viewState.selection.containsPosition(O))){T.splice(I,1),x.model.pushStackElement(),x.setCursorStates(L.source,3,T);return}}}T.push(k),x.model.pushStackElement(),x.setCursorStates(L.source,3,T)}}),s.LastCursorMoveToSelect=Be(new class extends is{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(x,L){const k=x.getLastAddedCursorIndex(),T=x.getCursorStates(),A=T.slice(0);A[k]=Js.moveTo(x,T[k],!0,L.position,L.viewPosition),x.model.pushStackElement(),x.setCursorStates(L.source,3,A)}});class a extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,k){L.model.pushStackElement(),L.setCursorStates(k.source,3,Js.moveToBeginningOfLine(L,L.getCursorStates(),this._inSelectionMode)),L.revealPrimaryCursor(k.source,!0)}}s.CursorHome=Be(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),s.CursorHomeSelect=Be(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,k){L.model.pushStackElement(),L.setCursorStates(k.source,3,this._exec(L.getCursorStates())),L.revealPrimaryCursor(k.source,!0)}_exec(L){const k=[];for(let T=0,A=L.length;T<A;T++){const O=L[T],I=O.modelState.position.lineNumber;k[T]=ui.fromModelState(O.modelState.move(this._inSelectionMode,I,1,0))}return k}}s.CursorLineStart=Be(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:0,mac:{primary:287}}})),s.CursorLineStartSelect=Be(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,k){L.model.pushStackElement(),L.setCursorStates(k.source,3,Js.moveToEndOfLine(L,L.getCursorStates(),this._inSelectionMode,k.sticky||!1)),L.revealPrimaryCursor(k.source,!0)}}s.CursorEnd=Be(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Oi,kbExpr:$.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:b("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),s.CursorEndSelect=Be(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Oi,kbExpr:$.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:b("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,k){L.model.pushStackElement(),L.setCursorStates(k.source,3,this._exec(L,L.getCursorStates())),L.revealPrimaryCursor(k.source,!0)}_exec(L,k){const T=[];for(let A=0,O=k.length;A<O;A++){const I=k[A],R=I.modelState.position.lineNumber,B=L.model.getLineMaxColumn(R);T[A]=ui.fromModelState(I.modelState.move(this._inSelectionMode,R,B,0))}return T}}s.CursorLineEnd=Be(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:0,mac:{primary:291}}})),s.CursorLineEndSelect=Be(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:0,mac:{primary:1315}}}));class f extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,k){L.model.pushStackElement(),L.setCursorStates(k.source,3,Js.moveToBeginningOfBuffer(L,L.getCursorStates(),this._inSelectionMode)),L.revealPrimaryCursor(k.source,!0)}}s.CursorTop=Be(new f({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:2062,mac:{primary:2064}}})),s.CursorTopSelect=Be(new f({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:3086,mac:{primary:3088}}}));class g extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,k){L.model.pushStackElement(),L.setCursorStates(k.source,3,Js.moveToEndOfBuffer(L,L.getCursorStates(),this._inSelectionMode)),L.revealPrimaryCursor(k.source,!0)}}s.CursorBottom=Be(new g({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:2061,mac:{primary:2066}}})),s.CursorBottomSelect=Be(new g({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:3085,mac:{primary:3090}}}));class m extends is{constructor(){super({id:"editorScroll",precondition:void 0,description:QT.description})}runCoreEditorCommand(L,k){const T=QT.parse(k);!T||this._runEditorScroll(L,k.source,T)}_runEditorScroll(L,k,T){const A=this._computeDesiredScrollTop(L,T);if(T.revealCursor){const O=L.getCompletelyVisibleViewRangeAtScrollTop(A);L.setCursorStates(k,3,[Js.findPositionInViewportIfOutside(L,L.getPrimaryCursorState(),O,T.select)])}L.viewLayout.setScrollPosition({scrollTop:A},0)}_computeDesiredScrollTop(L,k){if(k.unit===1){const O=L.getCompletelyVisibleViewRange(),I=L.coordinatesConverter.convertViewRangeToModelRange(O);let R;k.direction===1?R=Math.max(1,I.startLineNumber-k.value):R=Math.min(L.model.getLineCount(),I.startLineNumber+k.value);const B=L.coordinatesConverter.convertModelPositionToViewPosition(new se(R,1));return L.viewLayout.getVerticalOffsetForLineNumber(B.lineNumber)}if(k.unit===5){let O=0;return k.direction===2&&(O=L.model.getLineCount()-L.cursorConfig.pageSize),L.viewLayout.getVerticalOffsetForLineNumber(O)}let T;k.unit===3?T=L.cursorConfig.pageSize*k.value:k.unit===4?T=Math.round(L.cursorConfig.pageSize/2)*k.value:T=k.value;const A=(k.direction===1?-1:1)*T;return L.viewLayout.getCurrentScrollTop()+A*L.cursorConfig.lineHeight}}s.EditorScrollImpl=m,s.EditorScroll=Be(new m),s.ScrollLineUp=Be(new class extends is{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(x,L){s.EditorScroll._runEditorScroll(x,L.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),s.ScrollPageUp=Be(new class extends is{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(x,L){s.EditorScroll._runEditorScroll(x,L.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),s.ScrollEditorTop=Be(new class extends is{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus}})}runCoreEditorCommand(x,L){s.EditorScroll._runEditorScroll(x,L.source,{direction:1,unit:5,value:1,revealCursor:!1,select:!1})}}),s.ScrollLineDown=Be(new class extends is{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(x,L){s.EditorScroll._runEditorScroll(x,L.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),s.ScrollPageDown=Be(new class extends is{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(x,L){s.EditorScroll._runEditorScroll(x,L.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}}),s.ScrollEditorBottom=Be(new class extends is{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus}})}runCoreEditorCommand(x,L){s.EditorScroll._runEditorScroll(x,L.source,{direction:2,unit:5,value:1,revealCursor:!1,select:!1})}});class _ extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,k){L.model.pushStackElement(),L.setCursorStates(k.source,3,[Js.word(L,L.getPrimaryCursorState(),this._inSelectionMode,k.position)]),L.revealPrimaryCursor(k.source,!0)}}s.WordSelect=Be(new _({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),s.WordSelectDrag=Be(new _({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),s.LastCursorWordSelect=Be(new class extends is{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(x,L){const k=x.getLastAddedCursorIndex(),T=x.getCursorStates(),A=T.slice(0),O=T[k];A[k]=Js.word(x,O,O.modelState.hasSelection(),L.position),x.model.pushStackElement(),x.setCursorStates(L.source,3,A)}});class C extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,k){L.model.pushStackElement(),L.setCursorStates(k.source,3,[Js.line(L,L.getPrimaryCursorState(),this._inSelectionMode,k.position,k.viewPosition)]),L.revealPrimaryCursor(k.source,!1)}}s.LineSelect=Be(new C({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),s.LineSelectDrag=Be(new C({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class S extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,k){const T=L.getLastAddedCursorIndex(),A=L.getCursorStates(),O=A.slice(0);O[T]=Js.line(L,A[T],this._inSelectionMode,k.position,k.viewPosition),L.model.pushStackElement(),L.setCursorStates(k.source,3,O)}}s.LastCursorLineSelect=Be(new S({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),s.LastCursorLineSelectDrag=Be(new S({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),s.CancelSelection=Be(new class extends is{constructor(){super({id:"cancelSelection",precondition:$.hasNonEmptySelection,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(x,L){x.model.pushStackElement(),x.setCursorStates(L.source,3,[Js.cancelSelection(x,x.getPrimaryCursorState())]),x.revealPrimaryCursor(L.source,!0)}}),s.RemoveSecondaryCursors=Be(new class extends is{constructor(){super({id:"removeSecondaryCursors",precondition:$.hasMultipleSelections,kbOpts:{weight:Oi+1,kbExpr:$.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(x,L){x.model.pushStackElement(),x.setCursorStates(L.source,3,[x.getPrimaryCursorState()]),x.revealPrimaryCursor(L.source,!0),FT(b("removedCursor","Removed secondary cursors"))}}),s.RevealLine=Be(new class extends is{constructor(){super({id:"revealLine",precondition:void 0,description:Tb.description})}runCoreEditorCommand(x,L){const k=L,T=k.lineNumber||0;let A=typeof T=="number"?T+1:parseInt(T)+1;A<1&&(A=1);const O=x.model.getLineCount();A>O&&(A=O);const I=new M(A,1,A,x.model.getLineMaxColumn(A));let R=0;if(k.at)switch(k.at){case Tb.RawAtArgument.Top:R=3;break;case Tb.RawAtArgument.Center:R=1;break;case Tb.RawAtArgument.Bottom:R=4;break}const B=x.coordinatesConverter.convertModelRangeToViewRange(I);x.revealRange(L.source,!1,B,R,0)}}),s.SelectAll=new class extends W3{constructor(){super(ALe)}runDOMCommand(){Ka&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(x,L,k){const T=L._getViewModel();!T||this.runCoreEditorCommand(T,k)}runCoreEditorCommand(x,L){x.model.pushStackElement(),x.setCursorStates("keyboard",3,[Js.selectAll(x,x.getPrimaryCursorState())])}},s.SetSelection=Be(new class extends is{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(x,L){x.model.pushStackElement(),x.setCursorStates(L.source,3,[ui.fromModelSelection(L.selection)])}})})(zs||(zs={}));const zke=Je.and($.textInputFocus,$.columnSelection);function lC(s,e){ya.registerKeybindingRule({id:s,primary:e,when:zke,weight:Oi+1})}lC(zs.CursorColumnSelectLeft.id,1039);lC(zs.CursorColumnSelectRight.id,1041);lC(zs.CursorColumnSelectUp.id,1040);lC(zs.CursorColumnSelectPageUp.id,1035);lC(zs.CursorColumnSelectDown.id,1042);lC(zs.CursorColumnSelectPageDown.id,1036);function Rq(s){return s.register(),s}var Yb;(function(s){class e extends Fs{runEditorCommand(i,n,o){const r=n._getViewModel();!r||this.runCoreEditingCommand(n,r,o||{})}}s.CoreEditingCommand=e,s.LineBreakInsert=Be(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:$.writable,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,In.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection)))}}),s.Outdent=Be(new class extends e{constructor(){super({id:"outdent",precondition:$.writable,kbOpts:{weight:Oi,kbExpr:Je.and($.editorTextFocus,$.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,In.outdent(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),s.Tab=Be(new class extends e{constructor(){super({id:"tab",precondition:$.writable,kbOpts:{weight:Oi,kbExpr:Je.and($.editorTextFocus,$.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,In.tab(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),s.DeleteLeft=Be(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,n){const[o,r]=qm.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());o&&t.pushUndoStop(),t.executeCommands(this.id,r),i.setPrevEditOperationType(2)}}),s.DeleteRight=Be(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:Oi,kbExpr:$.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,n){const[o,r]=qm.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));o&&t.pushUndoStop(),t.executeCommands(this.id,r),i.setPrevEditOperationType(3)}}),s.Undo=new class extends W3{constructor(){super(aee)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,i,n){if(!(!i.hasModel()||i.getOption(83)===!0))return i.getModel().undo()}},s.Redo=new class extends W3{constructor(){super(lee)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,i,n){if(!(!i.hasModel()||i.getOption(83)===!0))return i.getModel().redo()}}})(Yb||(Yb={}));class Aq extends zN{constructor(e,t,i){super({id:e,precondition:void 0,description:i}),this._handlerId=t}runCommand(e,t){const i=e.get(Vi).getFocusedCodeEditor();!i||i.trigger("keyboard",this._handlerId,t)}}function D_(s,e){Rq(new Aq("default:"+s,s)),Rq(new Aq(s,s,e))}D_("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});D_("replacePreviousChar");D_("compositionType");D_("compositionStart");D_("compositionEnd");D_("paste");D_("cut");class Uke{constructor(e,t,i,n){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=n}paste(e,t,i,n){this.commandDelegate.paste(e,t,i,n)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,n){this.commandDelegate.compositionType(e,t,i,n)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){zs.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new se(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(72)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(72)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=Wo&&t.get(98),n=t.get(18);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){zs.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){zs.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,i){e=this._validateViewColumn(e),zs.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),zs.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){zs.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){zs.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){zs.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){zs.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){zs.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){zs.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){zs.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){zs.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){zs.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class eR{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)===null||t===void 0||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)===null||t===void 0||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)===null||e===void 0||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)===null||t===void 0||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return eR.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i=Object.assign({},e);return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),i}}var v4;class Fee{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),n=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>n)return null;let o=0,r=0;for(let l=i;l<=n;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(r===0?(o=c,r=1):r++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(o,r)}onLinesChanged(e,t){const i=e+t-1;if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),o=this.getEndLineNumber();let r=!1;for(let a=e;a<=i;a++)a>=n&&a<=o&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,n=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=i,null;if(e>o)return null;if(i+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);const r=[];for(let f=0;f<i;f++)r[f]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),d=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(r).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let n=!1;for(let o=0,r=e.length;o<r;o++){const a=e[o];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let d=l;d<=c;d++){const f=d-this._rendLineNumberStart;this._lines[f].onTokensChanged(),n=!0}}return n}}class Bee{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new Fee(()=>this._host.createVisibleLine())}_createDomNode(){const e=Di(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(133)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++){const o=t[i].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++){const o=t[i].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new xh(this.domNode.domNode,this._host,e),n={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=i.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}class xh{constructor(e,t,i){this.domNode=e,this.host=t,this.viewportData=i}render(e,t,i,n){const o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||i<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=i-t+1,o.lines=[];for(let r=t;r<=i;r++)o.lines[r-t]=this.host.createVisibleLine();return this._finishRendering(o,!0,n),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(i-o.rendLineNumberStart,o.linesLength-1),n,t),o.rendLineNumberStart>t){const r=t,a=Math.min(i,o.rendLineNumberStart-1);r<=a&&(this._insertLinesBefore(o,r,a,n,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart<t){const r=Math.min(o.linesLength,t-o.rendLineNumberStart);r>0&&(this._removeLinesBefore(o,r),o.linesLength-=r)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<i){const r=o.rendLineNumberStart+o.linesLength,a=i;r<=a&&(this._insertLinesAfter(o,r,a,n,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart+o.linesLength-1>i){const r=Math.max(0,i-o.rendLineNumberStart+1),l=o.linesLength-1-r+1;l>0&&(this._removeLinesAfter(o,l),o.linesLength-=l)}return this._finishRendering(o,!1,n),o}_renderUntouchedLines(e,t,i,n,o){const r=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=r+l;a[l].layoutLine(c,n[c-o])}}_insertLinesBefore(e,t,i,n,o){const r=[];let a=0;for(let l=t;l<=i;l++)r[a++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const n=e.lines[i].getDomNode();n&&this.domNode.removeChild(n)}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,n,o){const r=[];let a=0;for(let l=t;l<=i;l++)r[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let n=0;n<t;n++){const o=e.lines[i+n].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,n){xh._ttPolicy&&(i=xh._ttPolicy.createHTML(i));const o=this.domNode.lastChild;t||!o?this.domNode.innerHTML=i:o.insertAdjacentHTML("afterend",i);let r=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];n[a]&&(l.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const n=document.createElement("div");xh._ttPolicy&&(t=xh._ttPolicy.createHTML(t)),n.innerHTML=t;for(let o=0;o<e.linesLength;o++){const r=e.lines[o];if(i[o]){const a=n.firstChild,l=r.getDomNode();l.parentNode.replaceChild(a,l),r.setDomNode(a)}}}_finishRendering(e,t,i){const n=xh._sb,o=e.linesLength,r=e.lines,a=e.rendLineNumberStart,l=[];{n.reset();let c=!1;for(let d=0;d<o;d++){const f=r[d];l[d]=!1,!(f.getDomNode()||!f.renderLine(d+a,i[d],this.viewportData,n))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,n.build(),l)}{n.reset();let c=!1;const d=[];for(let f=0;f<o;f++){const g=r[f];d[f]=!1,!(l[f]||!g.renderLine(f+a,i[f],this.viewportData,n))&&(d[f]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,n.build(),d)}}}xh._ttPolicy=(v4=window.trustedTypes)===null||v4===void 0?void 0:v4.createPolicy("editorViewLayer",{createHTML:s=>s});xh._sb=Rg(1e5);class Vee extends Qa{constructor(e){super(e),this._visibleLines=new Bee(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new $ke(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++)this._visibleLines.getVisibleLine(n).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,n=t.length;i<n;i++){const o=t[i];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class $ke{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(61),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Di(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(61)}renderLine(e,t,i,n){let o="";for(let r=0,a=this._dynamicOverlays.length;r<a;r++){const l=this._dynamicOverlays[r];o+=l.render(i.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,n.appendASCIIString('<div style="position:absolute;top:'),n.appendASCIIString(String(t)),n.appendASCIIString("px;width:100%;height:"),n.appendASCIIString(String(this._lineHeight)),n.appendASCIIString('px;">'),n.appendASCIIString(o),n.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class jke extends Vee{constructor(e){super(e);const i=this._context.configuration.options.get(133);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(133);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class Kke extends Vee{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(133);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Fo(this.domNode,t.get(46))}onConfigurationChanged(e){const t=this._context.configuration.options;Fo(this.domNode,t.get(46));const i=t.get(133);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class hw{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}class qke extends Qa{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Di(document.createElement("div")),vd.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Di(document.createElement("div")),vd.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new Gke(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,n){this._widgets[e.getId()].setPosition(t,i,n),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const n=i.domNode.domNode;n.parentNode.removeChild(n),n.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class Gke{constructor(e,t,i){this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=Di(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const n=this._context.configuration.options,o=n.get(133);this._fixedOverflowWidgets=n.get(38),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=n.get(61),this._range=null,this._viewRange=null,this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(61),e.hasChanged(133)){const i=t.get(133);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range,this._affinity)}_setPosition(e,t){var i;if(this._range=e,this._viewRange=null,this._affinity=t,this._range){const n=this._context.viewModel.model.validateRange(this._range);(this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n.getStartPosition())||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n.getEndPosition()))&&(this._viewRange=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(n,(i=this._affinity)!==null&&i!==void 0?i:void 0))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}setPosition(e,t,i){this._setPosition(e,i),this._preference=t,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,n,o){const r=e.top,a=r,l=t.top+this._lineHeight,c=o.viewportHeight-l,d=r-n,f=a>=n,g=l,m=c>=n;let _=e.left,C=t.left;return _+i>o.scrollLeft+o.viewportWidth&&(_=o.scrollLeft+o.viewportWidth-i),C+i>o.scrollLeft+o.viewportWidth&&(C=o.scrollLeft+o.viewportWidth-i),_<o.scrollLeft&&(_=o.scrollLeft),C<o.scrollLeft&&(C=o.scrollLeft),{fitsAbove:f,aboveTop:d,aboveLeft:_,fitsBelow:m,belowTop:g,belowLeft:C}}_layoutHorizontalSegmentInPage(e,t,i,n){const o=Math.max(0,t.left-n),r=Math.min(t.left+t.width+n,e.width);let a=t.left+i-zh.scrollX;if(a+n>r){const l=a-(r-n);a-=l,i-=l}if(a<o){const l=a-o;a-=l,i-=l}return[i,a]}_layoutBoxInPage(e,t,i,n,o){const r=e.top-n,a=t.top+this._lineHeight,l=Oo(this._viewDomNode.domNode),c=l.top+r-zh.scrollY,d=l.top+a-zh.scrollY,f=RN(document.body),[g,m]=this._layoutHorizontalSegmentInPage(f,l,e.left-o.scrollLeft+this._contentLeft,i),[_,C]=this._layoutHorizontalSegmentInPage(f,l,t.left-o.scrollLeft+this._contentLeft,i),S=22,x=22,L=c>=S,k=d+n<=f.height-x;return this._fixedOverflowWidgets?{fitsAbove:L,aboveTop:Math.max(c,S),aboveLeft:m,fitsBelow:k,belowTop:d,belowLeft:C}:{fitsAbove:L,aboveTop:r,aboveLeft:g,fitsBelow:k,belowTop:a,belowLeft:_}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new hw(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let i=t[0],n=t[0];for(const f of t)f.lineNumber<i.lineNumber&&(i=f),f.lineNumber>n.lineNumber&&(n=f);let o=1073741824;for(const f of i.ranges)f.left<o&&(o=f.left);let r=1073741824;for(const f of n.ranges)f.left<r&&(r=f.left);const a=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.scrollTop,l=new hw(a,o),c=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,d=new hw(c,r);return[l,d]}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const[t,i]=this._getTopAndBottomLeft(e);if(!t||!i)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=b4(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeOffsetWidth=o.width,this._cachedDomNodeOffsetHeight=o.height;else{const a=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(a.width),this._cachedDomNodeOffsetHeight=Math.round(a.height)}}let n;this.allowEditorOverflow?n=this._layoutBoxInPage(t,i,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):n=this._layoutBoxInViewport(t,i,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let o=1;o<=2;o++)for(const r of this._preference)if(r===1){if(!n)return null;if(o===2||n.fitsAbove)return{coordinate:new hw(n.aboveTop,n.aboveLeft),position:1}}else if(r===2){if(!n)return null;if(o===2||n.fitsBelow)return{coordinate:new hw(n.belowTop,n.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&b4(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&b4(this._actual.afterRender,this._actual,this._renderData.position)}}function b4(s,e,...t){try{return s.call(e,...t)}catch{return null}}class Wee extends aC{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(133);this._lineHeight=t.get(61),this._renderLineHighlight=t.get(87),this._renderLineHighlightOnlyWhenFocus=t.get(88),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new et(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=this._selections.map(n=>n.positionLineNumber);t.sort((n,o)=>n-o),$a(this._cursorLineNumbers,t)||(this._cursorLineNumbers=t,e=!0);const i=this._selections.every(n=>n.isEmpty());return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(133);return this._lineHeight=t.get(61),this._renderLineHighlight=t.get(87),this._renderLineHighlightOnlyWhenFocus=t.get(88),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o=this._cursorLineNumbers.length;let r=0;const a=[];for(let l=i;l<=n;l++){const c=l-i;for(;r<o&&this._cursorLineNumbers[r]<l;)r++;r<o&&this._cursorLineNumbers[r]===l?a[c]=t:a[c]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class Yke extends Wee{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class Zke extends Wee{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}Cn((s,e)=>{const t=s.getColor(xee);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||s.defines(Tq)){const i=s.getColor(Tq);i&&(e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${i}; }`),Vo(s.type)&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class Qke extends aC{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],n=0;for(let l=0,c=t.length;l<c;l++){const d=t[l];d.options.className&&(i[n++]=d)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const d=l.options.className,f=c.options.className;return d<f?-1:d>f?1:M.compareRangesUsingStarts(l.range,c.range)});const o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,a=[];for(let l=o;l<=r;l++){const c=l-o;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const n=String(this._lineHeight),o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const c=t[a];if(!c.options.isWholeLine)continue;const d='<div class="cdr '+c.options.className+'" style="left:0;width:100%;height:'+n+'px;"></div>',f=Math.max(c.range.startLineNumber,o),g=Math.min(c.range.endLineNumber,r);for(let m=f;m<=g;m++){const _=m-o;i[_]+=d}}}_renderNormalDecorations(e,t,i){const n=String(this._lineHeight),o=e.visibleRange.startLineNumber;let r=null,a=!1,l=null;for(let c=0,d=t.length;c<d;c++){const f=t[c];if(f.options.isWholeLine)continue;const g=f.options.className,m=Boolean(f.options.showIfCollapsed);let _=f.range;if(m&&_.endColumn===1&&_.endLineNumber!==_.startLineNumber&&(_=new M(_.startLineNumber,_.startColumn,_.endLineNumber-1,this._context.viewModel.getLineMaxColumn(_.endLineNumber-1))),r===g&&a===m&&M.areIntersectingOrTouching(l,_)){l=M.plusRange(l,_);continue}r!==null&&this._renderNormalDecoration(e,l,r,a,n,o,i),r=g,a=m,l=_}r!==null&&this._renderNormalDecoration(e,l,r,a,n,o,i)}_renderNormalDecoration(e,t,i,n,o,r,a){const l=e.linesVisibleRangesForRange(t,i==="findMatch");if(!!l)for(let c=0,d=l.length;c<d;c++){const f=l[c];if(f.outsideRenderedLine)continue;const g=f.lineNumber-r;if(n&&f.ranges.length===1){const m=f.ranges[0];if(m.width<this._typicalHalfwidthCharacterWidth){const _=Math.round(m.left+m.width/2),C=Math.max(0,Math.round(_-this._typicalHalfwidthCharacterWidth/2));f.ranges[0]=new ZN(C,this._typicalHalfwidthCharacterWidth)}}for(let m=0,_=f.ranges.length;m<_;m++){const C=f.ranges[m],S='<div class="cdr '+i+'" style="left:'+String(C.left)+"px;width:"+String(C.width)+"px;height:"+o+'px;"></div>';a[g]+=S}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class gc extends ge{onclick(e,t){this._register(Le(e,it.CLICK,i=>t(new nd(i))))}onmousedown(e,t){this._register(Le(e,it.MOUSE_DOWN,i=>t(new nd(i))))}onmouseover(e,t){this._register(Le(e,it.MOUSE_OVER,i=>t(new nd(i))))}onmouseleave(e,t){this._register(Le(e,it.MOUSE_LEAVE,i=>t(new nd(i))))}onkeydown(e,t){this._register(Le(e,it.KEY_DOWN,i=>t(new kn(i))))}onkeyup(e,t){this._register(Le(e,it.KEY_UP,i=>t(new kn(i))))}oninput(e,t){this._register(Le(e,it.INPUT,t))}onblur(e,t){this._register(Le(e,it.BLUR,t))}onfocus(e,t){this._register(Le(e,it.FOCUS,t))}ignoreGesture(e){Zi.ignoreTarget(e)}}const L0=11;class Xke extends gc{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=L0+"px",this.domNode.style.height=L0+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new oC),this._register(Ps(this.bgDomNode,it.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Ps(this.domNode,it.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new cL),this._pointerdownScheduleRepeatTimer=this._register(new Za)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class Jke extends ge{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Za)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)===null||e===void 0||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)===null||t===void 0||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const eEe=140;class Hee extends gc{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new Jke(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new oC),this._shouldRender=!0,this.domNode=Di(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(Le(this.domNode.domNode,it.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new Xke(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=Di(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof n=="number"&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(Le(this.slider.domNode,it.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){!this._shouldRender||(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);i<=o&&o<=n?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{const o=Oo(this.domNode.domNode);t=e.pageX-o.left,i=e.pageY-o.top}const n=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{const r=this._sliderOrthogonalPointerPosition(o),a=Math.abs(r-i);if(mo&&a>eEe){this._setDesiredScrollPositionNow(n.getScrollPosition());return}const c=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const tEe=20;class tS{constructor(e,t,i,n,o,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=n,this._scrollSize=o,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new tS(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,n,o){const r=Math.max(0,i-e),a=Math.max(0,r-2*t),l=n>0&&n>i;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(tEe,Math.floor(i*a/n))),d=(a-c)/(n-i),f=o*d;return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(f)}}_refreshComputedValues(){const e=tS._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class iEe extends Hee{constructor(e,t,i){const n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new tS(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,n.width,n.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const r=(t.arrowSize-L0)/2,a=(t.horizontalScrollbarSize-L0)/2;this._createArrow({className:"scra",icon:w.scrollbarButtonLeft,top:a,left:r,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new m0(null,1,0))}),this._createArrow({className:"scra",icon:w.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:r,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new m0(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class nEe extends Hee{constructor(e,t,i){const n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new tS(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const r=(t.arrowSize-L0)/2,a=(t.verticalScrollbarSize-L0)/2;this._createArrow({className:"scra",icon:w.scrollbarButtonUp,top:r,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new m0(null,0,1))}),this._createArrow({className:"scra",icon:w.scrollbarButtonDown,top:void 0,left:a,bottom:r,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new m0(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class XT{constructor(e,t,i,n,o,r,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,i=i|0,n=n|0,o=o|0,r=r|0,a=a|0),this.rawScrollLeft=n,this.rawScrollTop=a,t<0&&(t=0),n+t>i&&(n=i-t),n<0&&(n=0),o<0&&(o=0),a+o>r&&(a=r-o),a<0&&(a=0),this.width=t,this.scrollWidth=i,this.scrollLeft=n,this.height=o,this.scrollHeight=r,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new XT(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new XT(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,n=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:n,scrollLeftChanged:o,heightChanged:r,scrollHeightChanged:a,scrollTopChanged:l}}}class _L extends ge{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new J),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new XT(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var i;const n=this._state.withScrollDimensions(e,t);this._setState(n,Boolean(this._smoothScrolling)),(i=this._smoothScrolling)===null||i===void 0||i.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let n;t?n=new iS(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):n=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=iS.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class Mq{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function C4(s,e){const t=e-s;return function(i){return s+t*rEe(i)}}function sEe(s,e,t){return function(i){return i<t?s(i/t):e((i-t)/(1-t))}}class iS{constructor(e,t,i,n){this.from=e,this.to=t,this.duration=n,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let o,r;return e<t?(o=e+.75*i,r=t-.75*i):(o=e-.75*i,r=t+.75*i),sEe(C4(e,o),C4(r,t),.33)}return C4(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),n=this.scrollTop(t);return new Mq(i,n,!1)}return new Mq(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return iS.start(e,t,i)}static start(e,t,i){i=i+10;const n=Date.now()-10;return new iS(e,t,n,i)}}function oEe(s){return Math.pow(s,3)}function rEe(s){return 1-oEe(1-s)}const aEe=500,Oq=50;class lEe{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}class H3{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,n=this._rear;do{const o=n===this._front?e:Math.pow(2,-i);if(e-=o,t+=this._memory[n].score*o,n===this._front)break;n=(this._capacity+n-1)%this._capacity,i++}while(!0);return t<=.5}accept(e,t,i){const n=new lEe(e,t,i);n.score=this._computeScore(n),this._front===-1&&this._rear===-1?(this._memory[0]=n,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=n)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}H3.INSTANCE=new H3;class ZB extends gc{constructor(e,t,i){super(),this._onScroll=this._register(new J),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new J),e.style.overflow="hidden",this._options=cEe(t),this._scrollable=i,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));const n={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new nEe(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new iEe(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Di(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Di(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Di(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new Za),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Ni(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,mi&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Ni(this._mouseWheelToDispose),e)){const i=n=>{this._onMouseWheel(new m0(n))};this._mouseWheelToDispose.push(Le(this._listenOnDomNode,it.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){const t=H3.INSTANCE;{const o=window.devicePixelRatio/nJ();mo||Wo?t.accept(Date.now(),e.deltaX/o,e.deltaY/o):t.accept(Date.now(),e.deltaX,e.deltaY)}let i=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,r=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(o)>=Math.abs(r)?r=0:o=0),this._options.flipAxes&&([o,r]=[r,o]);const a=!mi&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!r&&(r=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(r=r*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let c={};if(o){const d=Oq*o,f=l.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(c,f)}if(r){const d=Oq*r,f=l.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(c,f)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),i=!0)}let n=i;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(!!this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",o=t?" top":"",r=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${o}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),aEe)}}class zee extends ZB{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new _L({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:n=>cu(n)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class QB extends ZB{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class vL extends ZB{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new _L({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:n=>cu(n)});super(e,t,i),this._register(i),this._element=e,this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)}),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function cEe(s){const e={lazyRender:typeof s.lazyRender<"u"?s.lazyRender:!1,className:typeof s.className<"u"?s.className:"",useShadows:typeof s.useShadows<"u"?s.useShadows:!0,handleMouseWheel:typeof s.handleMouseWheel<"u"?s.handleMouseWheel:!0,flipAxes:typeof s.flipAxes<"u"?s.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof s.consumeMouseWheelIfScrollbarIsNeeded<"u"?s.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof s.alwaysConsumeMouseWheel<"u"?s.alwaysConsumeMouseWheel:!1,scrollYToX:typeof s.scrollYToX<"u"?s.scrollYToX:!1,mouseWheelScrollSensitivity:typeof s.mouseWheelScrollSensitivity<"u"?s.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof s.fastScrollSensitivity<"u"?s.fastScrollSensitivity:5,scrollPredominantAxis:typeof s.scrollPredominantAxis<"u"?s.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof s.mouseWheelSmoothScroll<"u"?s.mouseWheelSmoothScroll:!0,arrowSize:typeof s.arrowSize<"u"?s.arrowSize:11,listenOnDomNode:typeof s.listenOnDomNode<"u"?s.listenOnDomNode:null,horizontal:typeof s.horizontal<"u"?s.horizontal:1,horizontalScrollbarSize:typeof s.horizontalScrollbarSize<"u"?s.horizontalScrollbarSize:10,horizontalSliderSize:typeof s.horizontalSliderSize<"u"?s.horizontalSliderSize:0,horizontalHasArrows:typeof s.horizontalHasArrows<"u"?s.horizontalHasArrows:!1,vertical:typeof s.vertical<"u"?s.vertical:1,verticalScrollbarSize:typeof s.verticalScrollbarSize<"u"?s.verticalScrollbarSize:10,verticalHasArrows:typeof s.verticalHasArrows<"u"?s.verticalHasArrows:!1,verticalSliderSize:typeof s.verticalSliderSize<"u"?s.verticalSliderSize:0,scrollByPage:typeof s.scrollByPage<"u"?s.scrollByPage:!1};return e.horizontalSliderSize=typeof s.horizontalSliderSize<"u"?s.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof s.verticalSliderSize<"u"?s.verticalSliderSize:e.verticalScrollbarSize,mi&&(e.className+=" mac"),e}class uEe extends Qa{constructor(e,t,i,n){super(e);const o=this._context.configuration.options,r=o.get(94),a=o.get(69),l=o.get(36),c=o.get(97),d={listenOnDomNode:i.domNode,className:"editor-scrollable "+HT(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new QB(t.domNode,d,this._context.viewLayout.getScrollable())),vd.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=Di(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const f=(g,m,_)=>{const C={};if(m){const S=g.scrollTop;S&&(C.scrollTop=this._context.viewLayout.getCurrentScrollTop()+S,g.scrollTop=0)}if(_){const S=g.scrollLeft;S&&(C.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+S,g.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(C,1)};this._register(Le(i.domNode,"scroll",g=>f(i.domNode,!0,!0))),this._register(Le(t.domNode,"scroll",g=>f(t.domNode,!0,!1))),this._register(Le(n.domNode,"scroll",g=>f(n.domNode,!0,!1))),this._register(Le(this.scrollbarDomNode.domNode,"scroll",g=>f(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(133);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(67).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}onConfigurationChanged(e){if(e.hasChanged(94)||e.hasChanged(69)||e.hasChanged(36)){const t=this._context.configuration.options,i=t.get(94),n=t.get(69),o=t.get(36),r=t.get(97),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:n,fastScrollSensitivity:o,scrollPredominantAxis:r};this.scrollbar.updateOptions(a)}return e.hasChanged(133)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+HT(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}Cn((s,e)=>{const t=s.getColor(rC);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const i=s.getColor(hm);i&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${i};
			}
		`);const n=s.getColor(fm);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${n};
			}
		`);const o=s.getColor(gm);o&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${o};
			}
		`)});class JT{constructor(e,t,i){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(i)}}class XB extends aC{_render(e,t,i){const n=[];for(let a=e;a<=t;a++){const l=a-e;n[l]=[]}if(i.length===0)return n;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let o=null,r=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],d=c.className;let f=Math.max(c.startLineNumber,e)-e;const g=Math.min(c.endLineNumber,t)-e;o===d?(f=Math.max(r+1,f),r=Math.max(r,g)):(o=d,r=g);for(let m=f;m<=r;m++)n[m].push(o)}return n}}class dEe extends XB{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(133);this._lineHeight=t.get(61),this._glyphMargin=t.get(52),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(133);return this._lineHeight=t.get(61),this._glyphMargin=t.get(52),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let n=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.glyphMarginClassName;l&&(i[n++]=new JT(a.range.startLineNumber,a.range.endLineNumber,l))}return i}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o=this._lineHeight.toString(),r=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+r+"px;width:"+a+"px;height:"+o+'px;"></div>',c=[];for(let d=t;d<=i;d++){const f=d-t,g=n[f];g.length===0?c[f]="":c[f]='<div class="cgmr codicon '+g.join(" ")+l}this._renderResult=c}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class Uee extends ge{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function tR(s,e){let t=0,i=0;const n=s.length;for(;i<n;){const o=s.charCodeAt(i);if(o===32)t++;else if(o===9)t=t-t%e+e;else break;i++}return i===n?-1:t}var xm;(function(s){s[s.Disabled=0]="Disabled",s[s.EnabledForActive=1]="EnabledForActive",s[s.Enabled=2]="Enabled"})(xm||(xm={}));class _m{constructor(e,t,i,n,o,r){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=n,this.forWrappedLinesAfterColumn=o,this.forWrappedLinesBeforeOrAtColumn=r,e!==-1==(t!==-1))throw new Error}}class ly{constructor(e,t){this.top=e,this.endColumn=t}}class hEe extends Uee{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return tR(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for lineNumber");const o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=Boolean(o&&o.offSide);let a=-2,l=-1,c=-2,d=-1;const f=I=>{if(a!==-1&&(a===-2||a>I-1)){a=-1,l=-1;for(let R=I-2;R>=0;R--){const B=this._computeIndentLevel(R);if(B>=0){a=R,l=B;break}}}if(c===-2){c=-1,d=-1;for(let R=I;R<n;R++){const B=this._computeIndentLevel(R);if(B>=0){c=R,d=B;break}}}};let g=-2,m=-1,_=-2,C=-1;const S=I=>{if(g===-2){g=-1,m=-1;for(let R=I-2;R>=0;R--){const B=this._computeIndentLevel(R);if(B>=0){g=R,m=B;break}}}if(_!==-1&&(_===-2||_<I-1)){_=-1,C=-1;for(let R=I;R<n;R++){const B=this._computeIndentLevel(R);if(B>=0){_=R,C=B;break}}}};let x=0,L=!0,k=0,T=!0,A=0,O=0;for(let I=0;L||T;I++){const R=e-I,B=e+I;I>1&&(R<1||R<t)&&(L=!1),I>1&&(B>n||B>i)&&(T=!1),I>5e4&&(L=!1,T=!1);let z=-1;if(L&&R>=1){const te=this._computeIndentLevel(R-1);te>=0?(c=R-1,d=te,z=Math.ceil(te/this.textModel.getOptions().indentSize)):(f(R),z=this._getIndentLevelForWhitespaceLine(r,l,d))}let q=-1;if(T&&B<=n){const te=this._computeIndentLevel(B-1);te>=0?(g=B-1,m=te,q=Math.ceil(te/this.textModel.getOptions().indentSize)):(S(B),q=this._getIndentLevelForWhitespaceLine(r,m,C))}if(I===0){O=z;continue}if(I===1){if(B<=n&&q>=0&&O+1===q){L=!1,x=B,k=B,A=q;continue}if(R>=1&&z>=0&&z-1===O){T=!1,x=R,k=R,A=z;continue}if(x=e,k=e,A=O,A===0)return{startLineNumber:x,endLineNumber:k,indent:A}}L&&(z>=A?x=R:L=!1),T&&(q>=A?k=B:T=!1)}return{startLineNumber:x,endLineNumber:k,indent:A}}getLinesBracketGuides(e,t,i,n){var o;const r=[];for(let g=e;g<=t;g++)r.push([]);const a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new M(e,1,t,this.textModel.getLineMaxColumn(t)));let c;if(i&&l.length>0){const g=(e<=i.lineNumber&&i.lineNumber<=t?l:this.textModel.bracketPairs.getBracketPairsInRange(M.fromPositions(i))).filter(m=>M.strictContainsPosition(m.range,i));c=(o=vT(g,m=>a))===null||o===void 0?void 0:o.range}const d=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,f=new $ee;for(const g of l){if(!g.closingBracketRange)continue;const m=c&&g.range.equalsRange(c);if(!m&&!n.includeInactive)continue;const _=f.getInlineClassName(g.nestingLevel,g.nestingLevelOfEqualBracketType,d)+(n.highlightActive&&m?" "+f.activeClassName:""),C=g.openingBracketRange.getStartPosition(),S=g.closingBracketRange.getStartPosition(),x=n.horizontalGuides===xm.Enabled||n.horizontalGuides===xm.EnabledForActive&&m;if(g.range.startLineNumber===g.range.endLineNumber){x&&r[g.range.startLineNumber-e].push(new _m(-1,g.openingBracketRange.getEndPosition().column,_,new ly(!1,S.column),-1,-1));continue}const L=this.getVisibleColumnFromPosition(S),k=this.getVisibleColumnFromPosition(g.openingBracketRange.getStartPosition()),T=Math.min(k,L,g.minVisibleColumnIndentation+1);let A=!1;Lr(this.textModel.getLineContent(g.closingBracketRange.startLineNumber))<g.closingBracketRange.startColumn-1&&(A=!0);const R=Math.max(C.lineNumber,e),B=Math.min(S.lineNumber,t),z=A?1:0;for(let q=R;q<B+z;q++)r[q-e].push(new _m(T,-1,_,null,q===C.lineNumber?C.column:-1,q===S.lineNumber?S.column:-1));x&&(C.lineNumber>=e&&k>T&&r[C.lineNumber-e].push(new _m(T,-1,_,new ly(!1,C.column),-1,-1)),S.lineNumber<=t&&L>T&&r[S.lineNumber-e].push(new _m(T,-1,_,new ly(!A,S.column),-1,-1)))}for(const g of r)g.sort((m,_)=>m.visibleColumn-_.visibleColumn);return r}getVisibleColumnFromPosition(e){return ks.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const n=this.textModel.getOptions(),o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=Boolean(o&&o.offSide),a=new Array(t-e+1);let l=-2,c=-1,d=-2,f=-1;for(let g=e;g<=t;g++){const m=g-e,_=this._computeIndentLevel(g-1);if(_>=0){l=g-1,c=_,a[m]=Math.ceil(_/n.indentSize);continue}if(l===-2){l=-1,c=-1;for(let C=g-2;C>=0;C--){const S=this._computeIndentLevel(C);if(S>=0){l=C,c=S;break}}}if(d!==-1&&(d===-2||d<g-1)){d=-1,f=-1;for(let C=g;C<i;C++){const S=this._computeIndentLevel(C);if(S>=0){d=C,f=S;break}}}a[m]=this._getIndentLevelForWhitespaceLine(r,c,f)}return a}_getIndentLevelForWhitespaceLine(e,t,i){const n=this.textModel.getOptions();return t===-1||i===-1?0:t<i?1+Math.floor(t/n.indentSize):t===i||e?Math.ceil(i/n.indentSize):1+Math.floor(i/n.indentSize)}}class $ee{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class fEe extends aC{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(134),n=t.get(46);this._lineHeight=t.get(61),this._spaceWidth=n.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(134),n=t.get(46);return this._lineHeight=t.get(61),this._spaceWidth=n.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const n=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(n)?!1:(this._primaryPosition=n,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,i,n,o;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const r=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._lineHeight,d=this._primaryPosition,f=this.getGuidesByLine(r,a,d),g=[];for(let m=r;m<=a;m++){const _=m-r,C=f[_];let S="";const x=(i=(t=e.visibleRangeForPosition(new se(m,1)))===null||t===void 0?void 0:t.left)!==null&&i!==void 0?i:0;for(const L of C){const k=L.column===-1?x+(L.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new se(m,L.column)).left;if(k>l||this._maxIndentLeft>0&&k>this._maxIndentLeft)break;const T=L.horizontalLine?L.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",A=L.horizontalLine?((o=(n=e.visibleRangeForPosition(new se(m,L.horizontalLine.endColumn)))===null||n===void 0?void 0:n.left)!==null&&o!==void 0?o:k+this._spaceWidth)-k:this._spaceWidth;S+=`<div class="core-guide ${L.className} ${T}" style="left:${k}px;height:${c}px;width:${A}px"></div>`}g[_]=S}this._renderResult=g}getGuidesByLine(e,t,i){const n=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?xm.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?xm.EnabledForActive:xm.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,o=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){const f=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);r=f.startLineNumber,a=f.endLineNumber,l=f.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let f=e;f<=t;f++){const g=new Array;d.push(g);const m=n?n[f-e]:[],_=new Ry(m),C=o?o[f-e]:[];for(let S=1;S<=C;S++){const x=(S-1)*c+1,L=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||m.length===0)&&r<=f&&f<=a&&S===l;g.push(..._.takeWhile(T=>T.visibleColumn<x)||[]);const k=_.peek();(!k||k.visibleColumn!==x||k.horizontalLine)&&g.push(new _m(x,-1,L?"core-guide-indent-active":"core-guide-indent",null,-1,-1))}g.push(..._.takeWhile(S=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function Tk(s){if(!(s&&s.isTransparent()))return s}Cn((s,e)=>{const t=s.getColor(pL);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const i=s.getColor(mL)||t;i&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${i} inset; }`);const n=[{bracketColor:Tee,guideColor:hke,guideColorActive:vke},{bracketColor:Iee,guideColor:fke,guideColorActive:bke},{bracketColor:Nee,guideColor:gke,guideColorActive:Cke},{bracketColor:Ree,guideColor:pke,guideColorActive:wke},{bracketColor:Aee,guideColor:mke,guideColorActive:yke},{bracketColor:Mee,guideColor:_ke,guideColorActive:Ske}],o=new $ee,r=n.map(a=>{var l,c;const d=s.getColor(a.bracketColor),f=s.getColor(a.guideColor),g=s.getColor(a.guideColorActive),m=Tk((l=Tk(f))!==null&&l!==void 0?l:d==null?void 0:d.transparent(.3)),_=Tk((c=Tk(g))!==null&&c!==void 0?c:d);if(!(!m||!_))return{guideColor:m,guideColorActive:_}}).filter(vCe);if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .${o.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${o.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${o.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${o.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class gEe{constructor(){this._currentVisibleRange=new M(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class pEe{constructor(e,t,i,n,o,r,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=n,this.startScrollTop=o,this.stopScrollTop=r,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class mEe{constructor(e,t,i,n,o){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=n,this.scrollType=o,this.type="selections";let r=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const d=t[l];r=Math.min(r,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=a}}class iR extends Qa{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new Bee(this),this.domNode=this._visibleLines.domNode;const i=this._context.configuration,n=this._context.configuration.options,o=n.get(46),r=n.get(134),a=n.get(133);this._lineHeight=n.get(61),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=n.get(91),this._horizontalScrollbarHeight=a.horizontalScrollbarHeight,this._cursorSurroundingLines=n.get(25),this._cursorSurroundingLinesStyle=n.get(26),this._canUseLayerHinting=!n.get(28),this._viewLineOptions=new Dq(i,this._context.theme.type),vd.write(this.domNode,7),this.domNode.setClassName(`view-lines ${Lm}`),Fo(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Xi(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Xi(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new gEe,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Xu(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(134)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(46),n=t.get(134),o=t.get(133);return this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=n.isViewportWrapping,this._revealHorizontalRightPadding=t.get(91),this._horizontalScrollbarHeight=o.horizontalScrollbarHeight,this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),Fo(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(133)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new Dq(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let o=i;o<=n;o++)this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=!1;for(let o=t;o<=i;o++)n=this._visibleLines.getVisibleLine(o).onSelectionChanged()||n;return n}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++)this._visibleLines.getVisibleLine(n).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new pEe(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new mEe(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const n=this._getLineNumberFor(i);if(n===-1||n<1||n>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(n)===1)return new se(n,1);const o=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(n<o||n>r)return null;let a=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(n,e,t);const l=this._context.viewModel.getLineMinColumn(n);return a<l&&(a=l),new se(n,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Xu.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++){const o=this._visibleLines.getVisibleLine(n);if(e===o.getDomNode())return n}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();return e<t||e>i?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,n=M.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;const o=[];let r=0;const a=new xq(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(n.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let f=n.startLineNumber;f<=n.endLineNumber;f++){if(f<c||f>d)continue;const g=f===n.startLineNumber?n.startColumn:1,m=f===n.endLineNumber?n.endColumn:this._context.viewModel.getLineMaxColumn(f),_=this._visibleLines.getVisibleLine(f).getVisibleRangesForRange(f,g,m,a);if(!!_){if(t&&f<i){const C=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(f+1,1)).lineNumber,C!==l&&(_.ranges[_.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[r++]=new EDe(_.outsideRenderedLine,f,ZN.from(_.ranges))}}return r===0?null:o}_visibleRangesForLineRange(e,t,i){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,new xq(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new TDe(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=1,o=!0;for(let r=t;r<=i;r++){const a=this._visibleLines.getVisibleLine(r);if(e&&!a.getWidthIsFast()){o=!1;continue}n=Math.max(n,a.getWidth())}return o&&t===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let o=i;o<=n;o++){const r=this._visibleLines.getVisibleLine(o);if(r.needsMonospaceFontCheck()){const a=r.getWidth();a>t&&(t=a,e=o)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let o=i;o<=n;o++)this._visibleLines.getVisibleLine(o).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const n=this._computeScrollLeftToReveal(i);n&&(this._isViewportWrapping||this._ensureMaxLineWidth(n.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:n.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),Wo&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let o=i;o<=n;o++)if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,n,o,r){const a=e.top,l=e.height,c=a+l;let d,f,g;if(o&&o.length>0){let C=o[0].startLineNumber,S=o[0].endLineNumber;for(let x=1,L=o.length;x<L;x++){const k=o[x];C=Math.min(C,k.startLineNumber),S=Math.max(S,k.endLineNumber)}d=!1,f=this._context.viewLayout.getVerticalOffsetForLineNumber(C),g=this._context.viewLayout.getVerticalOffsetForLineNumber(S)+this._lineHeight}else if(n)d=!0,f=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),g=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;if((t==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default")i||(f-=this._lineHeight);else{const C=Math.min(l/this._lineHeight/2,this._cursorSurroundingLines);f-=C*this._lineHeight,g+=Math.max(0,C-1)*this._lineHeight}(r===0||r===4)&&(g+=i?this._horizontalScrollbarHeight:this._lineHeight);let _;if(g-f>l){if(!d)return-1;_=f}else if(r===5||r===6)if(r===6&&a<=f&&g<=c)_=a;else{const C=Math.max(5*this._lineHeight,l*.2),S=f-C,x=g-l;_=Math.max(x,S)}else if(r===1||r===2)if(r===2&&a<=f&&g<=c)_=a;else{const C=(f+g)/2;_=Math.max(0,C-l/2)}else _=this._computeMinimumScrolling(a,c,f,g,r===3,r===4);return _}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=t.left,n=i+t.width;let o=1073741824,r=0;if(e.type==="range"){const l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;for(const c of l.ranges)o=Math.min(o,Math.round(c.left)),r=Math.max(r,Math.round(c.left+c.width))}else for(const l of e.selections){if(l.startLineNumber!==l.endLineNumber)return null;const c=this._visibleRangesForLineRange(l.startLineNumber,l.startColumn,l.endColumn);if(!c)return null;for(const d of c.ranges)o=Math.min(o,Math.round(d.left)),r=Math.max(r,Math.round(d.left+d.width))}return e.minimalReveal||(o=Math.max(0,o-iR.HORIZONTAL_EXTRA_PX),r+=this._revealHorizontalRightPadding),e.type==="selections"&&r-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(i,n,o,r),maxHorizontalOffset:r}}_computeMinimumScrolling(e,t,i,n,o,r){e=e|0,t=t|0,i=i|0,n=n|0,o=!!o,r=!!r;const a=t-e;if(n-i<a){if(o)return i;if(r)return Math.max(0,n-a);if(i<e)return i;if(n>t)return Math.max(0,n-a)}else return i;return e}}iR.HORIZONTAL_EXTRA_PX=30;class _Ee extends XB{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(133);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(133);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let n=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.linesDecorationsClassName;l&&(i[n++]=new JT(a.range.startLineNumber,a.range.endLineNumber,l));const c=a.options.firstLineDecorationClassName;c&&(i[n++]=new JT(a.range.startLineNumber,a.range.startLineNumber,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),a='" style="left:'+o+"px;width:"+r+'px;"></div>',l=[];for(let c=t;c<=i;c++){const d=c-t,f=n[d];let g="";for(let m=0,_=f.length;m<_;m++)g+='<div class="cldr '+f[m]+a;l[d]=g}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class vEe extends XB{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let n=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.marginClassName;l&&(i[n++]=new JT(a.range.startLineNumber,a.range.endLineNumber,l))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o=[];for(let r=t;r<=i;r++){const a=r-t,l=n[a];let c="";for(let d=0,f=l.length;d<f;d++)c+='<div class="cmdr '+l[d]+'" style=""></div>';o[a]=c}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class yl{constructor(e,t,i,n){this._rgba8Brand=void 0,this.r=yl._clamp(e),this.g=yl._clamp(t),this.b=yl._clamp(i),this.a=yl._clamp(n)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}yl.Empty=new yl(0,0,0,0);class bL extends ge{constructor(){super(),this._onDidChange=new J,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Fn.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new bL),this._INSTANCE}_updateColorMap(){const e=Fn.getColorMap();if(!e){this._colors=[yl.Empty],this._backgroundIsLight=!0;return}this._colors=[yl.Empty];for(let i=1;i<e.length;i++){const n=e[i].rgba;this._colors[i]=new yl(n.r,n.g,n.b,Math.round(n.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}bL._INSTANCE=null;const bEe=(()=>{const s=[];for(let e=32;e<=126;e++)s.push(e);return s.push(65533),s})(),CEe=(s,e)=>(s-=32,s<0||s>96?e<=2?(s+96)%96:96-1:s);class nS{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=nS.soften(e,12/15),this.charDataLight=nS.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let n=0,o=e.length;n<o;n++)i[n]=IT(e[n]*t);return i}renderChar(e,t,i,n,o,r,a,l,c,d,f){const g=1*this.scale,m=2*this.scale,_=f?1:m;if(t+g>e.width||i+_>e.height){console.warn("bad render request outside image data");return}const C=d?this.charDataLight:this.charDataNormal,S=CEe(n,c),x=e.width*4,L=a.r,k=a.g,T=a.b,A=o.r-L,O=o.g-k,I=o.b-T,R=Math.max(r,l),B=e.data;let z=S*g*m,q=i*x+t*4;for(let te=0;te<_;te++){let U=q;for(let X=0;X<g;X++){const le=C[z++]/255*(r/255);B[U++]=L+A*le,B[U++]=k+O*le,B[U++]=T+I*le,B[U++]=R}q+=x}}blockRenderChar(e,t,i,n,o,r,a,l){const c=1*this.scale,d=2*this.scale,f=l?1:d;if(t+c>e.width||i+f>e.height){console.warn("bad render request outside image data");return}const g=e.width*4,m=.5*(o/255),_=r.r,C=r.g,S=r.b,x=n.r-_,L=n.g-C,k=n.b-S,T=_+x*m,A=C+L*m,O=S+k*m,I=Math.max(o,a),R=e.data;let B=i*g+t*4;for(let z=0;z<f;z++){let q=B;for(let te=0;te<c;te++)R[q++]=T,R[q++]=A,R[q++]=O,R[q++]=I;B+=g}}}const Pq={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},Fq=s=>{const e=new Uint8ClampedArray(s.length/2);for(let t=0;t<s.length;t+=2)e[t>>1]=Pq[s[t]]<<4|Pq[s[t+1]]&15;return e},Bq={1:qh(()=>Fq("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:qh(()=>Fq("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class cy{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return Bq[e]?i=new nS(Bq[e](),e):i=cy.createFromSampleData(cy.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height=`${16}px`,t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold ${16}px ${e}`,i.textBaseline="middle";let n=0;for(const o of bEe)i.fillText(String.fromCharCode(o),n,16/2),n+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const n=cy._downsample(e,t);return new nS(n,t)}static _downsampleChar(e,t,i,n,o){const r=1*o,a=2*o;let l=n,c=0;for(let d=0;d<a;d++){const f=d/a*16,g=(d+1)/a*16;for(let m=0;m<r;m++){const _=m/r*10,C=(m+1)/r*10;let S=0,x=0;for(let k=f;k<g;k++){const T=t+Math.floor(k)*3840,A=1-(k-Math.floor(k));for(let O=_;O<C;O++){const I=1-(O-Math.floor(O)),R=T+Math.floor(O)*4,B=I*A;x+=B,S+=e[R]*e[R+3]/255*B}}const L=S/x;c=Math.max(c,L),i[l++]=IT(L)}}return c}static _downsample(e,t){const i=2*t*1*t,n=i*96,o=new Uint8ClampedArray(n);let r=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,o,r,t)),r+=i,a+=10*4;if(l>0){const c=255/l;for(let d=0;d<n;d++)o[d]*=c}return o}}const wEe=140,yEe=2;class sS{constructor(e,t,i){const n=e.options,o=n.get(131),r=n.get(133),a=r.minimap,l=n.get(46),c=n.get(67);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=n.get(96),this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=n.get(61),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=r.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=qh(()=>cy.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=sS._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=sS._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(cDe);return i?new yl(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(uDe);return t?yl._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class uy{constructor(e,t,i,n,o,r,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=n,this.sliderTop=o,this.sliderHeight=r,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,i,n,o,r,a,l,c,d,f){const g=e.pixelRatio,m=e.minimapLineHeight,_=Math.floor(e.canvasInnerHeight/m),C=e.lineHeight;if(e.minimapHeightIsEditorHeight){const A=l*e.lineHeight+(e.scrollBeyondLastLine?o-e.lineHeight:0),O=Math.max(1,Math.floor(o*o/A)),I=Math.max(0,e.minimapHeight-O),R=I/(d-o),B=c*R,z=I>0,q=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new uy(c,d,z,R,B,O,1,Math.min(a,q))}let S;if(r&&i!==a){const A=i-t+1;S=Math.floor(A*m/g)}else{const A=o/C;S=Math.floor(A*m/g)}let x;e.scrollBeyondLastLine?x=(a-1)*m/g:x=Math.max(0,a*m/g-S),x=Math.min(e.minimapHeight-S,x);const L=x/(d-o),k=c*L;let T=0;if(e.scrollBeyondLastLine&&(T=o/C-1),_>=a+T){const O=a,I=x>0;return new uy(c,d,I,L,k,S,1,O)}else{let A=Math.max(1,Math.floor(t-k*g/m));f&&f.scrollHeight===d&&(f.scrollTop>c&&(A=Math.min(A,f.startLineNumber)),f.scrollTop<c&&(A=Math.max(A,f.startLineNumber)));const O=Math.min(a,A+_-1),I=(c-n)/C,R=(t-A+I)*m/g;return new uy(c,d,!0,L,R,S,A,O)}}}class eI{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}eI.INVALID=new eI(-1);class Vq{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new Fee(()=>eI.INVALID),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let n=0,o=i.length;n<o;n++)if(i[n].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class JB{constructor(e,t,i,n){this._backgroundFillData=JB._createBackgroundFillData(t,i,n),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const n=i.r,o=i.g,r=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let d=0;d<t;d++)for(let f=0;f<e;f++)l[c]=n,l[c+1]=o,l[c+2]=r,l[c+3]=a,c+=4;return l}}class oS{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const n=e.pixelRatio,o=e.lineHeight,r=e.scrollBeyondLastLine,{minimapLineCount:a}=Vb.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:r,height:e.editorHeight,lineHeight:o,pixelRatio:n}),l=t/a,c=l/2;if(!i||i.minimapLines.length===0){const k=[];if(k[0]=1,a>1){for(let T=0,A=a-1;T<A;T++)k[T]=Math.round(T*l+c);k[a-1]=t}return[new oS(l,k),[]]}const d=i.minimapLines,f=d.length,g=[];let m=0,_=0,C=1;const S=10;let x=[],L=null;for(let k=0;k<a;k++){const T=Math.max(C,Math.round(k*l)),A=Math.max(T,Math.round((k+1)*l));for(;m<f&&d[m]<T;){if(x.length<S){const I=m+1+_;L&&L.type==="deleted"&&L._oldIndex===m-1?L.deleteToLineNumber++:(L={type:"deleted",_oldIndex:m,deleteFromLineNumber:I,deleteToLineNumber:I},x.push(L)),_--}m++}let O;if(m<f&&d[m]<=A)O=d[m],m++;else if(k===0?O=1:k+1===a?O=t:O=Math.round(k*l+c),x.length<S){const I=m+1+_;L&&L.type==="inserted"&&L._i===k-1?L.insertToLineNumber++:(L={type:"inserted",_i:k,insertFromLineNumber:I,insertToLineNumber:I},x.push(L)),_++}g[k]=O,C=O}if(x.length<S)for(;m<f;){const k=m+1+_;L&&L.type==="deleted"&&L._oldIndex===m-1?L.deleteToLineNumber++:(L={type:"deleted",_oldIndex:m,deleteFromLineNumber:k,deleteToLineNumber:k},x.push(L)),_--,m++}else x=[{type:"flush"}];return[new oS(l,g),x]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let n=this.modelLineToMinimapLine(t)-1;for(;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){const o=this.minimapLines[i];if(o<e||o>t)return null}return[i+1,n+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,n=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,o),n=Math.max(n,o)):this.minimapLines[o]-=t;return[i,n]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class SEe extends Qa{constructor(e){super(e),this.tokensColorTracker=bL.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new sS(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=oS.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new tI(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new sS(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const n=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);n&&t.push({fromLineNumber:n[0],toLineNumber:n[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}_recreateLineSampling(){this._minimapSelections=null;const e=Boolean(this._samplingState),[t,i]=oS.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const n of i)switch(n.type){case"deleted":this._actual.onLinesDeleted(n.deleteFromLineNumber,n.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(n.insertFromLineNumber,n.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const n=[];for(let o=0,r=t-e+1;o<r;o++)i[o]?n[o]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+o-1]):n[o]=null;return n}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new et(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const o=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];i=new M(o,1,r,this._context.viewModel.getLineMaxColumn(r))}else i=new M(e,1,t,this._context.viewModel.getLineMaxColumn(t));const n=this._context.viewModel.getDecorationsInViewport(i);if(this._samplingState){const o=[];for(const r of n){if(!r.options.minimap)continue;const a=r.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),c=this._samplingState.modelLineToMinimapLine(a.endLineNumber);o.push(new IJ(new M(l,a.startColumn,c,a.endColumn),r.options))}return o}return n}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new M(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class tI extends ge{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(yq),this._domNode=Di(document.createElement("div")),vd.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Di(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Di(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Di(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Di(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Di(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Ps(this._domNode.domNode,it.POINTER_DOWN,i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.button===0&&this._lastRenderData){const c=Oo(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(i,d,this._lastRenderData.renderedLayout)}return}const o=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.offsetY;let l=Math.floor(r/o)+this._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new oC,this._sliderPointerDownListener=Ps(this._slider.domNode,it.POINTER_DOWN,i=>{i.preventDefault(),i.stopPropagation(),i.button===0&&this._lastRenderData&&this._startSliderDragging(i,i.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Zi.addTarget(this._domNode.domNode),this._sliderTouchStartListener=Le(this._domNode.domNode,vn.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=Le(this._domNode.domNode,vn.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=Ps(this._domNode.domNode,vn.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const n=e.pageX;this._slider.toggleClassName("active",!0);const o=(r,a)=>{const l=Math.abs(a-n);if(mo&&l>wEe){this._model.setScrollTop(i.scrollTop);return}const c=r-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(c))};e.pageY!==t&&o(e.pageY,n),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>o(r.pageY,r.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new JB(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var i;return(i=this._lastRenderData)===null||i===void 0||i.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var i;return(i=this._lastRenderData)===null||i===void 0||i.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(yq),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=uy.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(M.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((g,m)=>(g.options.zIndex||0)-(m.options.zIndex||0));const{canvasInnerWidth:n,canvasInnerHeight:o}=this._model.options,r=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,n,o);const d=new Wq(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,r),this._renderDecorationsLineHighlights(c,i,d,e,r);const f=new Wq(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,f,e,r,l,a,n),this._renderDecorationsHighlights(c,i,f,e,r,l,a,n)}}_renderSelectionLineHighlights(e,t,i,n,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,a=0;for(const l of t){const c=Math.max(n.startLineNumber,l.startLineNumber),d=Math.min(n.endLineNumber,l.endLineNumber);if(c>d)continue;for(let m=c;m<=d;m++)i.set(m,!0);const f=(c-n.startLineNumber)*o,g=(d-n.startLineNumber)*o+o;a>=f||(a>r&&e.fillRect(Kf,r,e.canvas.width,a-r),r=f),a=g}a>r&&e.fillRect(Kf,r,e.canvas.width,a-r)}_renderDecorationsLineHighlights(e,t,i,n,o){const r=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==Ll.Inline)continue;const d=Math.max(n.startLineNumber,l.range.startLineNumber),f=Math.min(n.endLineNumber,l.range.endLineNumber);if(d>f)continue;const g=c.getColor(this._theme.value);if(!g||g.isTransparent())continue;let m=r.get(g.toString());m||(m=g.transparent(.5).toString(),r.set(g.toString(),m)),e.fillStyle=m;for(let _=d;_<=f;_++){if(i.has(_))continue;i.set(_,!0);const C=(d-n.startLineNumber)*o;e.fillRect(Kf,C,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,i,n,o,r,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const d=Math.max(n.startLineNumber,c.startLineNumber),f=Math.min(n.endLineNumber,c.endLineNumber);if(!(d>f))for(let g=d;g<=f;g++)this.renderDecorationOnLine(e,i,c,this._selectionColor,n,g,o,o,r,a,l)}}_renderDecorationsHighlights(e,t,i,n,o,r,a,l){for(const c of t){const d=c.options.minimap;if(!d)continue;const f=Math.max(n.startLineNumber,c.range.startLineNumber),g=Math.min(n.endLineNumber,c.range.endLineNumber);if(f>g)continue;const m=d.getColor(this._theme.value);if(!(!m||m.isTransparent()))for(let _=f;_<=g;_++)switch(d.position){case Ll.Inline:this.renderDecorationOnLine(e,i,c.range,m,n,_,o,o,r,a,l);continue;case Ll.Gutter:{const C=(_-n.startLineNumber)*o,S=2;this.renderDecoration(e,m,S,C,yEe,o);continue}}}}renderDecorationOnLine(e,t,i,n,o,r,a,l,c,d,f){const g=(r-o.startLineNumber)*l;if(g+a<0||g>this._model.options.canvasInnerHeight)return;const{startLineNumber:m,endLineNumber:_}=i,C=m===r?i.startColumn:1,S=_===r?i.endColumn:this._model.getLineMaxColumn(r),x=this.getXOffsetForPosition(t,r,C,c,d,f),L=this.getXOffsetForPosition(t,r,S,c,d,f);this.renderDecoration(e,n,x,g,L-x,a)}getXOffsetForPosition(e,t,i,n,o,r){if(i===1)return Kf;if((i-1)*o>=r)return r;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[Kf];let d=Kf;for(let f=1;f<c.length+1;f++){const g=c.charCodeAt(f-1),m=g===9?n*o:Ng(g)?2*o:o,_=d+m;if(_>=r){l[f]=r;break}l[f]=_,d=_}e.set(t,l)}return i-1<l.length?l[i-1]:r}renderDecoration(e,t,i,n,o,r){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,o,r)}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,n=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const le=this._lastRenderData._get();return new Vq(e,le.imageData,le.lines)}const o=this._getBuffer();if(!o)return null;const[r,a,l]=tI._renderUntouchedLines(o,t,i,n,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),d=this._model.getOptions().tabSize,f=this._model.options.defaultBackgroundColor,g=this._model.options.backgroundColor,m=this._model.options.foregroundAlpha,_=this._model.tokensColorTracker,C=_.backgroundIsLight(),S=this._model.options.renderMinimap,x=this._model.options.charRenderer(),L=this._model.options.fontScale,k=this._model.options.minimapCharWidth,A=(S===1?2:2+1)*L,O=n>A?Math.floor((n-A)/2):0,I=g.a/255,R=new yl(Math.round((g.r-f.r)*I+f.r),Math.round((g.g-f.g)*I+f.g),Math.round((g.b-f.b)*I+f.b),255);let B=0;const z=[];for(let le=0,be=i-t+1;le<be;le++)l[le]&&tI._renderLine(o,R,g.a,C,S,k,_,m,x,B,O,d,c[le],L,n),z[le]=new eI(B),B+=n;const q=r===-1?0:r,U=(a===-1?o.height:a)-q;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,q,o.width,U),new Vq(e,o,z)}static _renderUntouchedLines(e,t,i,n,o){const r=[];if(!o){for(let R=0,B=i-t+1;R<B;R++)r[R]=!0;return[-1,-1,r]}const a=o._get(),l=a.imageData.data,c=a.rendLineNumberStart,d=a.lines,f=d.length,g=e.width,m=e.data,_=(i-t+1)*n*g*4;let C=-1,S=-1,x=-1,L=-1,k=-1,T=-1,A=0;for(let R=t;R<=i;R++){const B=R-t,z=R-c,q=z>=0&&z<f?d[z].dy:-1;if(q===-1){r[B]=!0,A+=n;continue}const te=q*g*4,U=(q+n)*g*4,X=A*g*4,le=(A+n)*g*4;L===te&&T===X?(L=U,T=le):(x!==-1&&(m.set(l.subarray(x,L),k),C===-1&&x===0&&x===k&&(C=L),S===-1&&L===_&&x===k&&(S=x)),x=te,L=U,k=X,T=le),r[B]=!1,A+=n}x!==-1&&(m.set(l.subarray(x,L),k),C===-1&&x===0&&x===k&&(C=L),S===-1&&L===_&&x===k&&(S=x));const O=C===-1?-1:C/(g*4),I=S===-1?-1:S/(g*4);return[O,I,r]}static _renderLine(e,t,i,n,o,r,a,l,c,d,f,g,m,_,C){const S=m.content,x=m.tokens,L=e.width-r,k=C===1;let T=Kf,A=0,O=0;for(let I=0,R=x.getCount();I<R;I++){const B=x.getEndOffset(I),z=x.getForeground(I),q=a.getColor(z);for(;A<B;A++){if(T>L)return;const te=S.charCodeAt(A);if(te===9){const U=g-(A+O)%g;O+=U-1,T+=U*r}else if(te===32)T+=r;else{const U=Ng(te)?2:1;for(let X=0;X<U;X++)if(o===2?c.blockRenderChar(e,T,d+f,q,l,t,i,k):c.renderChar(e,T,d+f,te,q,l,t,i,_,n,k),T+=r,T>L)return}}}}}class Wq{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let n=0,o=this._endLineNumber-this._startLineNumber+1;n<o;n++)this._values[n]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}Cn((s,e)=>{const t=s.getColor(dDe);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const i=s.getColor(hDe);i&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${i}; }`);const n=s.getColor(fDe);n&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${n}; }`);const o=s.getColor(rC);o&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${o} -6px 0 6px -6px inset; }`)});class LEe extends Qa{constructor(e){super(e);const i=this._context.configuration.options.get(133);this._widgets={},this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,this._domNode=Di(document.createElement("div")),vd.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(133);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){const t=Di(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference===t?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.parentNode.removeChild(n),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.setTop("");return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const i=t.domNode.clientHeight;t.setTop(this._editorHeight-i-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let i=0,n=t.length;i<n;i++){const o=t[i];this._renderWidget(this._widgets[o])}}}class xEe{constructor(e,t){const i=e.options;this.lineHeight=i.get(61),this.pixelRatio=i.get(131),this.overviewRulerLanes=i.get(76),this.renderBorder=i.get(75);const n=t.getColor(JDe);this.borderColor=n?n.toString():null,this.hideCursor=i.get(54);const o=t.getColor(Dee);this.cursorColor=o?o.transparent(.7).toString():null,this.themeType=t.type;const r=i.get(67),a=r.enabled,l=r.side,c=t.getColor(eke),d=Fn.getDefaultBackground();let f=null;c!==void 0?f=c:a&&(f=d),f===null||l==="left"?this.backgroundColor=null:this.backgroundColor=oe.Format.CSS.formatHex(f);const m=i.get(133).overviewRuler;this.top=m.top,this.right=m.right,this.domWidth=m.width,this.domHeight=m.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[_,C]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=_,this.w=C}_initLanes(e,t,i){const n=t-e;if(i>=3){const o=Math.floor(n/3),r=Math.floor(n/3),a=n-o-r,l=e,c=l+o,d=l+o+a;return[[0,l,c,l,d,l,c,l],[0,o,a,o+a,r,o+a+r,a+r,o+a+r]]}else if(i===2){const o=Math.floor(n/2),r=n-o,a=e,l=a+o;return[[0,a,a,a,l,a,a,a],[0,o,o,o,r,o+r,o+r,o+r]]}else{const o=e,r=n;return[[0,o,o,o,o,o,o,o],[0,r,r,r,r,r,r,r]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class DEe extends Qa{constructor(e){super(e),this._domNode=Di(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Fn.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new xEe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(se.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:""),this._domNode.setDisplay("none");return}this._domNode.setDisplay("block");const e=this._settings.canvasWidth,t=this._settings.canvasHeight,i=this._settings.lineHeight,n=this._context.viewLayout,o=this._context.viewLayout.getScrollHeight(),r=t/o,a=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,c=l/2|0,d=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?d.clearRect(0,0,e,t):(d.fillStyle=this._settings.backgroundColor,d.fillRect(0,0,e,t));const f=this._settings.x,g=this._settings.w;a.sort(NJ.cmp);for(const m of a){const _=m.color,C=m.data;d.fillStyle=_;let S=0,x=0,L=0;for(let k=0,T=C.length/3;k<T;k++){const A=C[3*k],O=C[3*k+1],I=C[3*k+2];let R=n.getVerticalOffsetForLineNumber(O)*r|0,B=(n.getVerticalOffsetForLineNumber(I)+i)*r|0;if(B-R<l){let q=(R+B)/2|0;q<c?q=c:q+c>t&&(q=t-c),R=q-c,B=q+c}R>L+1||A!==S?(k!==0&&d.fillRect(f[S],x,g[S],L-x),S=A,x=R,L=B):B>L&&(L=B)}d.fillRect(f[S],x,g[S],L-x)}if(!this._settings.hideCursor&&this._settings.cursorColor){const m=2*this._settings.pixelRatio|0,_=m/2|0,C=this._settings.x[7],S=this._settings.w[7];d.fillStyle=this._settings.cursorColor;let x=-100,L=-100;for(let k=0,T=this._cursorPositions.length;k<T;k++){const A=this._cursorPositions[k];let O=n.getVerticalOffsetForLineNumber(A.lineNumber)*r|0;O<_?O=_:O+_>t&&(O=t-_);const I=O-_,R=I+m;I>L+1?(k!==0&&d.fillRect(C,x,S,L-x),x=I,L=R):R>L&&(L=R)}d.fillRect(C,x,S,L-x)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,t),d.stroke(),d.moveTo(0,0),d.lineTo(e,0),d.stroke())}}class Hq{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class rS{constructor(e,t,i,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class kEe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(rS.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),n=Math.floor(this._outerHeight),o=i/n,r=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const d=this._zones[l];if(!e){const T=d.getColorZones();if(T){a.push(T);continue}}const f=this._getVerticalOffsetForLine(d.startLineNumber),g=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:f+d.heightInLines*t,m=Math.floor(o*f),_=Math.floor(o*g);let C=Math.floor((m+_)/2),S=_-C;S<r&&(S=r),C-S<0&&(C=S),C+S>i&&(C=i-S);const x=d.color;let L=this._color2Id[x];L||(L=++this._lastAssignedId,this._color2Id[x]=L,this._id2Color[L]=x);const k=new Hq(C-S,C+S,L);d.setColorZone(k),a.push(k)}return this._colorZonesInvalid=!1,a.sort(Hq.compare),a}}class EEe extends gL{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=Di(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new kEe(n=>this._context.viewLayout.getVerticalOffsetForLineNumber(n)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(61)),this._zoneManager.setPixelRatio(i.get(131)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(61)&&(this._zoneManager.setLineHeight(t.get(61)),this._render()),e.hasChanged(131)&&(this._zoneManager.setPixelRatio(t.get(131)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(o,i,n,e),!0}_renderOneLane(e,t,i,n){let o=0,r=0,a=0;for(const l of t){const c=l.colorId,d=l.from,f=l.to;c!==o?(e.fillRect(0,r,n,a-r),o=c,e.fillStyle=i[o],r=d,a=f):a>=d?a=Math.max(a,f):(e.fillRect(0,r,n,a-r),r=d,a=f)}e.fillRect(0,r,n,a-r)}}class TEe extends Qa{constructor(e){super(e),this.domNode=Di(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(93),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(93),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:n}=this._context.viewModel.model.getOptions(),o=n;let r=t-e;for(;r>0;){const a=Di(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),r--}return}let i=e-t;for(;i>0;){const n=this._renderedRulers.pop();this.domNode.removeChild(n),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const n=this._renderedRulers[t],o=this._rulers[t];n.setBoxShadow(o.color?`1px 0 0 0 ${o.color} inset`:""),n.setHeight(Math.min(e.scrollHeight,1e6)),n.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}Cn((s,e)=>{const t=s.getColor(QDe);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class IEe extends Qa{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(94);this._useShadows=i.useShadows,this._domNode=Di(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(133);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(94);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}Cn((s,e)=>{const t=s.getColor(rC);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class NEe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class REe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function AEe(s){return new NEe(s)}function MEe(s){return new REe(s.lineNumber,s.ranges.map(AEe))}class qn extends aC{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(61),this._roundedSelection=t.get(92),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(61),this._roundedSelection=t.get(92),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const n=this._typicalHalfwidthCharacterWidth/4;let o=null,r=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!o&&c<i.length;c++)i[c].lineNumber===a&&(o=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!r&&c>=0;c--)i[c].lineNumber===l&&(r=i[c].ranges[0]);o&&!o.startStyle&&(o=null),r&&!r.startStyle&&(r=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],d=c.left,f=c.left+c.width,g={top:0,bottom:0},m={top:0,bottom:0};if(a>0){const _=t[a-1].ranges[0].left,C=t[a-1].ranges[0].left+t[a-1].ranges[0].width;Ik(d-_)<n?g.top=2:d>_&&(g.top=1),Ik(f-C)<n?m.top=2:_<f&&f<C&&(m.top=1)}else o&&(g.top=o.startStyle.top,m.top=o.endStyle.top);if(a+1<l){const _=t[a+1].ranges[0].left,C=t[a+1].ranges[0].left+t[a+1].ranges[0].width;Ik(d-_)<n?g.bottom=2:_<d&&d<C&&(g.bottom=1),Ik(f-C)<n?m.bottom=2:f<C&&(m.bottom=1)}else r&&(g.bottom=r.startStyle.bottom,m.bottom=r.endStyle.bottom);c.startStyle=g,c.endStyle=m}}_getVisibleRangesWithStyle(e,t,i){const o=(t.linesVisibleRangesForRange(e,!0)||[]).map(MEe);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,i),o}_createSelectionPiece(e,t,i,n,o){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;left:"+n.toString()+"px;width:"+o.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,i,n){if(n.length===0)return;const o=!!n[0].ranges[0].startStyle,r=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=n[0].lineNumber,c=n[n.length-1].lineNumber;for(let d=0,f=n.length;d<f;d++){const g=n[d],m=g.lineNumber,_=m-t,C=i&&(m===c||m===l)?a:r,S=i&&m===l?1:0;let x="",L="";for(let k=0,T=g.ranges.length;k<T;k++){const A=g.ranges[k];if(o){const I=A.startStyle,R=A.endStyle;if(I.top===1||I.bottom===1){x+=this._createSelectionPiece(S,C,qn.SELECTION_CLASS_NAME,A.left-qn.ROUNDED_PIECE_WIDTH,qn.ROUNDED_PIECE_WIDTH);let B=qn.EDITOR_BACKGROUND_CLASS_NAME;I.top===1&&(B+=" "+qn.SELECTION_TOP_RIGHT),I.bottom===1&&(B+=" "+qn.SELECTION_BOTTOM_RIGHT),x+=this._createSelectionPiece(S,C,B,A.left-qn.ROUNDED_PIECE_WIDTH,qn.ROUNDED_PIECE_WIDTH)}if(R.top===1||R.bottom===1){x+=this._createSelectionPiece(S,C,qn.SELECTION_CLASS_NAME,A.left+A.width,qn.ROUNDED_PIECE_WIDTH);let B=qn.EDITOR_BACKGROUND_CLASS_NAME;R.top===1&&(B+=" "+qn.SELECTION_TOP_LEFT),R.bottom===1&&(B+=" "+qn.SELECTION_BOTTOM_LEFT),x+=this._createSelectionPiece(S,C,B,A.left+A.width,qn.ROUNDED_PIECE_WIDTH)}}let O=qn.SELECTION_CLASS_NAME;if(o){const I=A.startStyle,R=A.endStyle;I.top===0&&(O+=" "+qn.SELECTION_TOP_LEFT),I.bottom===0&&(O+=" "+qn.SELECTION_BOTTOM_LEFT),R.top===0&&(O+=" "+qn.SELECTION_TOP_RIGHT),R.bottom===0&&(O+=" "+qn.SELECTION_BOTTOM_RIGHT)}L+=this._createSelectionPiece(S,C,O,A.left,A.width)}e[_][0]+=x,e[_][1]+=L}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let r=i;r<=n;r++){const a=r-i;t[a]=["",""]}const o=[];for(let r=0,a=this._selections.length;r<a;r++){const l=this._selections[r];if(l.isEmpty()){o[r]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[r]);o[r]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([r,a])=>r+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}qn.SELECTION_CLASS_NAME="selected-text";qn.SELECTION_TOP_LEFT="top-left-radius";qn.SELECTION_BOTTOM_LEFT="bottom-left-radius";qn.SELECTION_TOP_RIGHT="top-right-radius";qn.SELECTION_BOTTOM_RIGHT="bottom-right-radius";qn.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";qn.ROUNDED_PIECE_WIDTH=10;Cn((s,e)=>{const t=s.getColor(Mh);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const i=s.getColor(WB);i&&e.addRule(`.monaco-editor .selected-text { background-color: ${i}; }`);const n=s.getColor(dxe);n&&!n.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${n}; }`)});function Ik(s){return s<0?-s:s}class zq{constructor(e,t,i,n,o,r){this.top=e,this.left=t,this.width=i,this.height=n,this.textContent=o,this.textContentClassName=r}}class Uq{constructor(e){this._context=e;const t=this._context.configuration.options,i=t.get(46);this._cursorStyle=t.get(24),this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Di(document.createElement("div")),this._domNode.setClassName(`cursor ${Lm}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Fo(this._domNode,i),this._domNode.setDisplay("none"),this._position=new se(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(46);return this._cursorStyle=t.get(24),this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),Fo(this._domNode,i),!0}onCursorPositionChanged(e){return this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[n,o]=Y1e(i,t-1);return[new se(e,n+1),i.substring(n,o)]}_prepareRender(e){let t="";const[i,n]=this._getGraphemeAwarePosition();if(this._cursorStyle===to.Line||this._cursorStyle===to.LineThin){const g=e.visibleRangeForPosition(i);if(!g||g.outsideRenderedLine)return null;let m;this._cursorStyle===to.Line?(m=uq(this._lineCursorWidth>0?this._lineCursorWidth:2),m>2&&(t=n)):m=uq(1);let _=g.left;m>=2&&_>=1&&(_-=1);const C=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.bigNumbersDelta;return new zq(C,_,m,this._lineHeight,t,"")}const o=e.linesVisibleRangesForRange(new M(i.lineNumber,i.column,i.lineNumber,i.column+n.length),!1);if(!o||o.length===0)return null;const r=o[0];if(r.outsideRenderedLine||r.ranges.length===0)return null;const a=r.ranges[0],l=n==="	"?this._typicalHalfwidthCharacterWidth:a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let c="";if(this._cursorStyle===to.Block){const g=this._context.viewModel.getViewLineData(i.lineNumber);t=n;const m=g.tokens.findTokenIndexAtOffset(i.column-1);c=g.tokens.getClassName(m)}let d=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.bigNumbersDelta,f=this._lineHeight;return(this._cursorStyle===to.Underline||this._cursorStyle===to.UnderlineThin)&&(d+=this._lineHeight-2,f=2),new zq(d,a.left,l,f,t,c)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${Lm} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class aS extends Qa{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(83),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new Uq(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=Di(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Za,this._cursorFlatBlinkInterval=new cL,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(83),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,n=this._secondaryCursors.length;i<n;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const i=t.length-this._secondaryCursors.length;for(let n=0;n<i;n++){const o=new Uq(this._context);this._domNode.domNode.insertBefore(o.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(o)}}else if(this._secondaryCursors.length>t.length){const i=this._secondaryCursors.length-t.length;for(let n=0;n<i;n++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let i=0;i<t.length;i++)this._secondaryCursors[i].onCursorPositionChanged(t[i])}onCursorStateChanged(e){const t=[];for(let n=0,o=e.selections.length;n<o;n++)t[n]=e.selections[n].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let n=0,o=e.ranges.length;n<o;n++)if(e.ranges[n].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[n].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},aS.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},aS.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case to.Line:e+=" cursor-line-style";break;case to.Block:e+=" cursor-block-style";break;case to.Underline:e+=" cursor-underline-style";break;case to.LineThin:e+=" cursor-line-thin-style";break;case to.BlockOutline:e+=" cursor-block-outline-style";break;case to.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const n=this._primaryCursor.render(e);n&&(t[i++]=n);for(let o=0,r=this._secondaryCursors.length;o<r;o++){const a=this._secondaryCursors[o].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}aS.BLINK_INTERVAL=500;Cn((s,e)=>{const t=s.getColor(Dee);if(t){let i=s.getColor(YDe);i||(i=t.opposite()),e.addRule(`.monaco-editor .inputarea.ime-input { caret-color: ${t}; }`),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${i}; }`),Vo(s.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${i}; border-right: 1px solid ${i}; }`)}});const w4=()=>{throw new Error("Invalid change accessor")};class OEe extends Qa{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(133);this._lineHeight=t.get(61),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=Di(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Di(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const n of e)t.set(n.id,n);let i=!1;return this._context.viewModel.changeWhitespace(n=>{const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;const f=t.get(l);f&&(f.afterLineNumber!==d.afterViewLineNumber||f.height!==d.heightInPx)&&(n.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(133);return this._lineHeight=t.get(61),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(61)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const r=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new se(r,this._context.viewModel.model.getLineMaxColumn(r))}let i;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity),o=this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!o,afterViewLineNumber:n.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{const n={addZone:o=>(t=!0,this._addZone(i,o)),removeZone:o=>{!o||(t=this._removeZone(i,o)||t)},layoutZone:o=>{!o||(t=this._layoutZone(i,o)||t)}};PEe(e,n),n.addZone=w4,n.removeZone=w4,n.layoutZone=w4}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:Di(t.domNode),marginDomNode:t.marginDomNode?Di(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,i.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.parentNode.removeChild(i.domNode.domNode),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.parentNode.removeChild(i.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=n.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){const t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){Yt(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){Yt(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let n=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(i[r.id]=r,n=!0);const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],c=this._zones[l];let d=0,f=0,g="none";i.hasOwnProperty(l)?(d=i[l].verticalOffset-e.bigNumbersDelta,f=i[l].height,g="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(f),c.domNode.setDisplay(g),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(f),c.marginDomNode.setDisplay(g))}n&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function PEe(s,e){try{return s(e)}catch(t){Yt(t)}}class FEe{constructor(e){this._theme=e}get type(){return this._theme.type}get value(){return this._theme}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class BEe{constructor(e,t,i){this.configuration=e,this.theme=new FEe(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}class VEe{constructor(e,t,i,n){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=i,this._model=n,this.visibleRange=new M(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class WEe extends Qa{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.domNode=Di(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const i=this._context.configuration.options.get(133),n=i.contentWidth-i.verticalScrollbarWidth;return this.contentWidth!==n&&(this.contentWidth=n,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const i=e.getDecorationsInViewport();for(const n of i){if(!n.options.blockClassName)continue;let o=this.blocks[t];o||(o=this.blocks[t]=Di(document.createElement("div")),this.domNode.appendChild(o));const r=e.getVerticalOffsetForLineNumber(n.range.startLineNumber),a=e.getVerticalOffsetForLineNumber(n.range.endLineNumber+1);o.setClassName("blockDecorations-block "+n.options.blockClassName),o.setLeft(e.scrollLeft),o.setWidth(this.contentWidth),o.setTop(r),o.setHeight(a-r),t++}for(let n=t;n<this.blocks.length;n++)this.blocks[n].domNode.remove();this.blocks.length=t}}class HEe extends gL{constructor(e,t,i,n,o,r){super(),this._selections=[new et(1,1,1,1)],this._renderAnimationFrame=null;const a=new Uke(t,n,o,e);this._context=new BEe(t,i,n),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=new xke(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Di(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Di(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Di(document.createElement("div")),vd.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new uEe(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new iR(this._context,this._linesContent),this._viewZones=new OEe(this._context),this._viewParts.push(this._viewZones);const l=new DEe(this._context);this._viewParts.push(l);const c=new IEe(this._context);this._viewParts.push(c);const d=new jke(this._context);this._viewParts.push(d),d.addDynamicOverlay(new Yke(this._context)),d.addDynamicOverlay(new qn(this._context)),d.addDynamicOverlay(new fEe(this._context)),d.addDynamicOverlay(new Qke(this._context));const f=new Kke(this._context);this._viewParts.push(f),f.addDynamicOverlay(new Zke(this._context)),f.addDynamicOverlay(new dEe(this._context)),f.addDynamicOverlay(new vEe(this._context)),f.addDynamicOverlay(new _Ee(this._context)),f.addDynamicOverlay(new S0(this._context));const g=new Km(this._context);g.getDomNode().appendChild(this._viewZones.marginDomNode),g.getDomNode().appendChild(f.getDomNode()),this._viewParts.push(g),this._contentWidgets=new qke(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new aS(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new LEe(this._context),this._viewParts.push(this._overlayWidgets);const m=new TEe(this._context);this._viewParts.push(m);const _=new WEe(this._context);this._viewParts.push(_);const C=new SEe(this._context);if(this._viewParts.push(C),l){const S=this._scrollbar.getOverviewRulerLayoutInfo();S.parent.insertBefore(l.getDomNode(),S.insertBefore)}this._linesContent.appendChild(d.getDomNode()),this._linesContent.appendChild(m.domNode),this._linesContent.appendChild(_.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(g.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(C.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),r?r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new $De(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new ODe(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new se(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(133);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(130)+" "+HT(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=UJ(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){zEe(()=>this._actualRender())}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_actualRender(){if(!kB(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new VEe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const n=new kDe(this._context.viewLayout,i,this._viewLines);for(const o of e)o.prepareRender(n);for(const o of e)o.render(n),o.onDidRender()}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop},1),this._context.viewModel.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const o=this._viewLines.visibleRangeForPosition(new se(n.lineNumber,n.column));return o?o.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?eR.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new EEe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,i;let n=e.position&&e.position.range||null;if(n===null){const r=e.position?e.position.position:null;r!==null&&(n=new M(r.lineNumber,r.column,r.lineNumber,r.column))}const o=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,n,o,(i=(t=e.position)===null||t===void 0?void 0:t.positionAffinity)!==null&&i!==void 0?i:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function zEe(s){try{return s()}catch(e){Yt(e)}}class iI{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new eo(new M(1,1,1,1),0,new se(1,1),0),new eo(new M(1,1,1,1),0,new se(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){!this._trackSelection||(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new ui(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return et.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,n){return t.equals(i)?n:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,n=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),r=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,n,i,r),l=this._validatePositionWithCache(e,o,n,a);return i.equals(r)&&n.equals(a)&&o.equals(l)?t:new eo(M.fromPositions(a,l),t.selectionStartLeftoverVisibleColumns+n.column-a.column,r,t.leftoverVisibleColumns+i.column-r.column)}_setState(e,t,i){if(i&&(i=iI._validateViewState(e.viewModel,i)),t){const n=e.model.validateRange(t.selectionStart),o=t.selectionStart.equalsRange(n)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),a=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new eo(n,o,r,a)}else{if(!i)return;const n=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new eo(n,i.selectionStartLeftoverVisibleColumns,o,i.leftoverVisibleColumns)}if(i){const n=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new eo(n,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{const n=e.coordinatesConverter.convertModelPositionToViewPosition(new se(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new se(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new M(n.lineNumber,n.column,o.lineNumber,o.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new eo(r,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class $q{constructor(e){this.context=e,this.cursors=[new iI(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return mCe(this.cursors,ty(e=>e.viewState.position,se.compare)).viewState.position}getBottomMostViewPosition(){return TX(this.cursors,ty(e=>e.viewState.position,se.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(ui.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const n=i-t;for(let o=0;o<n;o++)this._addSecondaryCursor()}else if(t>i){const n=t-i;for(let o=0;o<n;o++)this._removeSecondaryCursor(this.cursors.length-2)}for(let n=0;n<i;n++)this.cursors[n+1].setState(this.context,e[n].modelState,e[n].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new iI(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let i=0,n=e.length;i<n;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(ty(i=>i.selection,M.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const n=t[i],o=t[i+1],r=n.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||r.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):l=a.getStartPosition().isBefore(r.getEndPosition()),l){const c=n.index<o.index?i:i+1,d=n.index<o.index?i+1:i,f=t[d].index,g=t[c].index,m=t[d].selection,_=t[c].selection;if(!m.equalsSelection(_)){const C=m.plusRange(_),S=m.selectionStartLineNumber===m.startLineNumber&&m.selectionStartColumn===m.startColumn,x=_.selectionStartLineNumber===_.startLineNumber&&_.selectionStartColumn===_.startColumn;let L;f===this.lastAddedCursorIndex?(L=S,this.lastAddedCursorIndex=g):L=x;let k;L?k=new et(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn):k=new et(C.endLineNumber,C.endColumn,C.startLineNumber,C.startColumn),t[c].selection=k;const T=ui.fromModelSelection(k);e[g].setState(this.context,T.modelState,T.viewState)}for(const C of t)C.index>f&&C.index--;e.splice(f,1),t.splice(d,1),this._removeSecondaryCursor(f-1),i--}}}}class jq{constructor(e,t,i,n){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=n}}class UEe{constructor(){this.changeType=1}}class uu{constructor(e,t,i,n,o){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=n,this.order=o}static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",n=0;for(const o of t)i+=e.substring(n,o.column-1),n=o.column-1,i+=o.options.content;return i+=e.substring(n),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new uu(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new uu(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,n)=>i.lineNumber===n.lineNumber?i.column===n.column?i.order-n.order:i.column-n.column:i.lineNumber-n.lineNumber),t}}class Kq{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class $Ee{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class jEe{constructor(e,t,i,n){this.changeType=4,this.injectedTexts=n,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class KEe{constructor(){this.changeType=5}}class Zb{constructor(e,t,i,n){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=n,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.versionId,o=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new Zb(i,n,o,r)}}class jee{constructor(e){this.changes=e}}class Dm{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Zb.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=Dm._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new Dm(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.eol,o=t.versionId,r=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:i,eol:n,versionId:o,isUndoing:r,isRedoing:a,isFlush:l}}}class qEe{constructor(){this.type=0}}class GEe{constructor(){this.type=1}}class YEe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class ZEe{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class zv{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class Nk{constructor(){this.type=5}}class QEe{constructor(e){this.type=6,this.isFocused=e}}class XEe{constructor(){this.type=7}}class Rk{constructor(){this.type=8}}class Kee{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class z3{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class U3{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class VE{constructor(e,t,i,n,o,r,a){this.source=e,this.minimalReveal=t,this.range=i,this.selections=n,this.verticalType=o,this.revealHorizontal=r,this.scrollType=a,this.type=12}}class JEe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class eTe{constructor(e){this.theme=e,this.type=14}}class tTe{constructor(e){this.type=15,this.ranges=e}}class iTe{constructor(){this.type=16}}class nTe{constructor(){this.type=17}}class sTe extends ge{constructor(){super(),this._onEvent=this._register(new J),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const n=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(n){this._outgoingEvents[t]=n;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new oTe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class oTe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class e6{constructor(e,t,i,n){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=n,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new e6(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class t6{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new t6(this.oldHasFocus,e.hasFocus)}}class i6{constructor(e,t,i,n,o,r,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=n,this.scrollWidth=o,this.scrollLeft=r,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new i6(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class rTe{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class aTe{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class nI{constructor(e,t,i,n,o,r,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=n,this.source=o,this.reason=r,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,n=t.length;if(i!==n)return!1;for(let o=0;o<i;o++)if(!e[o].equalsSelection(t[o]))return!1;return!0}isNoOp(){return nI._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new nI(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class lTe{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class cTe{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class uTe{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class dTe{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class hTe{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class fTe{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class gTe{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class x0 extends ge{constructor(e,t,i,n){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new jq(this._model,this._viewModel,this._coordinatesConverter,n),this._cursors=new $q(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=Ni(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new jq(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,n){let o=!1;n!==null&&n.length>x0.MAX_CURSOR_COUNT&&(n=n.slice(0,x0.MAX_CURSOR_COUNT),o=!0);const r=dy.from(this._model,this);return this._cursors.setStates(n),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,r,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,i,n,o,r){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=M.fromPositions(a[0],a[0]),e.emitViewEvent(new VE(t,i,l,c,n,o,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,n=t.length;i<n;i++){const o=t[i];e.push({inSelectionMode:!o.isEmpty(),selectionStart:{lineNumber:o.selectionStartLineNumber,column:o.selectionStartColumn},position:{lineNumber:o.positionLineNumber,column:o.positionColumn}})}return e}restoreState(e,t){const i=[];for(let n=0,o=t.length;n<o;n++){const r=t[n];let a=1,l=1;r.position&&r.position.lineNumber&&(a=r.position.lineNumber),r.position&&r.position.column&&(l=r.position.column);let c=a,d=l;r.selectionStart&&r.selectionStart.lineNumber&&(c=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(d=r.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,ui.fromModelSelections(i)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof jee){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const n=i.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new $q(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const o=ui.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,o)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{const o=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,ui.fromModelSelections(o))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,n){this.setStates(e,t,n,ui.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],n=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),n.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const o=this._model.deltaDecorations([],i),r=this._model.deltaDecorations([],n);this._autoClosedActions.push(new qq(this._model,o,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=pTe.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const i=[],n=[];for(let o=0;o<e.commands.length;o++){const r=e.commands[o];r instanceof Pee&&r.enclosingRange&&r.closeCharacterRange&&(i.push(r.closeCharacterRange),n.push(r.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,n),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,n,o){const r=dy.from(this._model,this);if(r.equals(n))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new ZEe(l,a)),!n||n.cursorState.length!==r.cursorState.length||r.cursorState.some((c,d)=>!c.modelState.equals(n.cursorState[d].modelState))){const c=n?n.cursorState.map(f=>f.modelState.selection):null,d=n?n.modelVersionId:0;e.emitOutgoingEvent(new nI(c,a,d,r.modelVersionId,t||"keyboard",i,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,n=e.length;i<n;i++){const o=e[i];if(!o.text||o.text.indexOf(`
`)>=0)return null;const r=o.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const a=r[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,d=o.text.length-r[2].length-1,f=o.text.lastIndexOf(c,d-1);if(f===-1)return null;t.push([f,d])}return t}executeEdits(e,t,i,n){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(i)),o&&(i[0]._isTracked=!0);const r=[],a=[],l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(o)for(let f=0,g=o.length;f<g;f++){const[m,_]=o[f],C=c[f],S=C.range.startLineNumber,x=C.range.startColumn-1+m,L=C.range.startColumn-1+_;r.push(new M(S,L+1,S,L+2)),a.push(new M(S,x+1,S,L+2))}const d=n(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,a)}_executeEdit(e,t,i,n=0){if(this.context.cursorConfig.readOnly)return;const o=dy.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){Yt(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,n,o,!1)&&this.revealPrimary(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return qq.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new hy(this._model,this.getSelections())}endComposition(e,t){const i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(In.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){const n=t.length;let o=0;for(;o<n;){const r=sB(t,o),a=t.substr(o,r);this._executeEditOperation(In.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),o+=r}}else this._executeEditOperation(In.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,n,o,r){if(t.length===0&&i===0&&n===0){if(o!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new et(c.lineNumber,c.column+o,c.lineNumber,c.column+o)});this.setSelections(e,r,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(In.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,n,o))},e,r)}paste(e,t,i,n,o){this._executeEdit(()=>{this._executeEditOperation(In.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,n||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(qm.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Ar(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new Ar(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}}x0.MAX_CURSOR_COUNT=1e4;class dy{constructor(e,t){this.modelVersionId=e,this.cursorState=t}static from(e,t){return new dy(e.getVersionId(),t.getCursorStates())}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class qq{constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const n=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(n&&(t.push(n),n.startLineNumber!==n.endLineNumber))return!1}t.sort(M.compareRangesUsingStarts),e.sort(M.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class pTe{static executeCommands(e,t,i){const n={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(n,i);for(let r=0,a=n.trackedRanges.length;r<a;r++)n.model._setTrackedRange(n.trackedRanges[r],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(i.operations.length===0)return null;const n=i.operations,o=this._getLoserCursorMap(n);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let c=0,d=n.length;c<d;c++)o.hasOwnProperty(n[c].identifier.major.toString())||r.push(n[c]);i.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,r,c=>{const d=[];for(let m=0;m<e.selectionsBefore.length;m++)d[m]=[];for(const m of c)!m.identifier||d[m.identifier.major].push(m);const f=(m,_)=>m.identifier.minor-_.identifier.minor,g=[];for(let m=0;m<e.selectionsBefore.length;m++)d[m].length>0?(d[m].sort(f),g[m]=t[m].computeCursorState(e.model,{getInverseEditOperations:()=>d[m],getTrackedSelection:_=>{const C=parseInt(_,10),S=e.model._getTrackedRange(e.trackedRanges[C]);return e.trackedRangesDirection[C]===0?new et(S.startLineNumber,S.startColumn,S.endLineNumber,S.endColumn):new et(S.endLineNumber,S.endColumn,S.startLineNumber,S.startColumn)}})):g[m]=e.selectionsBefore[m];return g});a||(a=e.selectionsBefore);const l=[];for(const c in o)o.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],n=!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(a){const l=this._getEditOperationsFromCommand(e,o,a);i=i.concat(l.operations),n=n||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:n}}static _getEditOperationsFromCommand(e,t,i){const n=[];let o=0;const r=(f,g,m=!1)=>{M.isEmpty(f)&&g===""||n.push({identifier:{major:t,minor:o++},range:f,text:g,forceMoveMarkers:m,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const d={addEditOperation:r,addTrackedEditOperation:(f,g,m)=>{a=!0,r(f,g,m)},trackSelection:(f,g)=>{const m=et.liftSelection(f);let _;if(m.isEmpty())if(typeof g=="boolean")g?_=2:_=3;else{const x=e.model.getLineMaxColumn(m.startLineNumber);m.startColumn===x?_=2:_=3}else _=1;const C=e.trackedRanges.length,S=e.model._setTrackedRange(null,m,_);return e.trackedRanges[C]=S,e.trackedRangesDirection[C]=m.getDirection(),C.toString()}};try{i.getEditOperations(e.model,d)}catch(f){return Yt(f),{operations:[],hadTrackedEditOperation:!1}}return{operations:n,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,n)=>-M.compareRangesUsingEnds(i.range,n.range));const t={};for(let i=1;i<e.length;i++){const n=e[i-1],o=e[i];if(M.getStartPosition(n.range).isBefore(M.getEndPosition(o.range))){let r;n.identifier.major>o.identifier.major?r=n.identifier.major:r=o.identifier.major,t[r.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===r&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class mTe{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class hy{constructor(e,t){this._original=hy._capture(e,t)}static _capture(e,t){const i=[];for(const n of t){if(n.startLineNumber!==n.endLineNumber)return null;i.push(new mTe(e.getLineContent(n.startLineNumber),n.startColumn-1,n.endColumn-1))}return i}deduceOutcome(e,t){if(!this._original)return null;const i=hy._capture(e,t);if(!i||this._original.length!==i.length)return null;const n=[];for(let o=0,r=this._original.length;o<r;o++)n.push(hy._deduceOutcome(this._original[o],i[o]));return n}static _deduceOutcome(e,t){const i=Math.min(e.startSelection,t.startSelection,Fm(e.text,t.text)),n=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,Fy(e.text,t.text)),o=e.text.substring(i,e.text.length-n),r=t.text.substring(i,t.text.length-n);return new Hke(o,e.startSelection-i,e.endSelection-i,r,t.startSelection-i,t.endSelection-i)}}class qee{constructor(e,t,i,n,o,r){this.id=e,this.label=t,this.alias=i,this._precondition=n,this._run=o,this._contextKeyService=r}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}function Gm(s){let e=0,t=0,i=0,n=0;for(let o=0,r=s.length;o<r;o++){const a=s.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<r&&s.charCodeAt(o+1)===10?(n|=2,o++):n|=3,i=o+1):a===10&&(n|=1,e===0&&(t=o),e++,i=o+1)}return e===0&&(t=s.length),[e,t,s.length-i,n]}class Ak{constructor(e,t,i,n){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=n}}class _Te{constructor(e,t,i,n,o,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=n,this.nestingLevelOfEqualBracketType=o,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class vTe extends _Te{constructor(e,t,i,n,o,r,a){super(e,t,i,n,o,r),this.minVisibleColumnIndentation=a}}class $3{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}$3.zero=new $3(0,0);function bTe(s,e,t,i){return s!==t?ns(t-s,i):ns(0,i-e)}const rc=0;function CTe(s){return s===0}const Ua=Math.pow(2,26);function ns(s,e){return s*Ua+e}function Sg(s){const e=s,t=Math.floor(e/Ua),i=e-t*Ua;return new $3(t,i)}function wTe(s){return Math.floor(s/Ua)}function Zn(s,e){return e<Ua?s+e:s-s%Ua+e}function yTe(s,e){const t=s,i=e;if(i-t<=0)return rc;const o=Math.floor(t/Ua),r=Math.floor(i/Ua),a=i-r*Ua;if(o===r){const l=t-o*Ua;return ns(0,a-l)}else return ns(r-o,a)}function Qb(s,e){return s<e}function cg(s,e){return s<=e}function Ww(s,e){return s>=e}function Uv(s){return ns(s.lineNumber-1,s.column-1)}function Wh(s,e){const t=s,i=Math.floor(t/Ua),n=t-i*Ua,o=e,r=Math.floor(o/Ua),a=o-r*Ua;return new M(i+1,n+1,r+1,a+1)}function STe(s){const e=md(s);return ns(e.length-1,e[e.length-1].length)}class Gq{constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}}class LTe{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(i=>n6.from(i))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):this.documentLength;return yTe(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?ns(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):ns(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Sg(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?ns(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):ns(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(cg(i,e)){this.nextEditIdx++;const n=Sg(i),o=Sg(this.translateOldToCur(t.endOffsetBeforeObj)),r=n.lineCount-o.lineCount;this.deltaOldToNewLineCount+=r;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=n.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class n6{constructor(e,t,i){this.endOffsetBeforeObj=Sg(t),this.endOffsetAfterObj=Sg(Zn(e,i)),this.offsetObj=Sg(e)}static from(e){return new n6(e.startOffset,e.endOffset,e.newLength)}}const WE=new Array;class Cs{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let i=Cs.cache[e];return i||(i=new Cs(e,t),Cs.cache[e]=i),i}return new Cs(e,t)}static getEmpty(){return this.empty}add(e,t){const i=t.getKey(e);let n=i>>5;if(n===0){const r=1<<i|this.items;return r===this.items?this:Cs.create(r,this.additionalItems)}n--;const o=this.additionalItems.slice(0);for(;o.length<n;)o.push(0);return o[n]|=1<<(i&31),Cs.create(this.items,o)}merge(e){const t=this.items|e.items;if(this.additionalItems===WE&&e.additionalItems===WE)return t===this.items?this:t===e.items?e:Cs.create(t,WE);const i=new Array;for(let n=0;n<Math.max(this.additionalItems.length,e.additionalItems.length);n++){const o=this.additionalItems[n]||0,r=e.additionalItems[n]||0;i.push(o|r)}return Cs.create(t,i)}intersects(e){if((this.items&e.items)!==0)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if((this.additionalItems[t]&e.additionalItems[t])!==0)return!0;return!1}}Cs.cache=new Array(129);Cs.empty=Cs.create(0,WE);const Yq={getKey(s){return s}};class Gee{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class s6{constructor(e){this._length=e}get length(){return this._length}}class lS extends s6{constructor(e,t,i,n,o){super(e),this.openingBracket=t,this.child=i,this.closingBracket=n,this.missingOpeningBracketIds=o}static create(e,t,i){let n=e.length;return t&&(n=Zn(n,t.length)),i&&(n=Zn(n,i.length)),new lS(n,e,t,i,t?t.missingOpeningBracketIds:Cs.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new lS(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Zn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class bd extends s6{constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}static create23(e,t,i,n=!1){let o=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(o=Zn(o,t.length),r=r.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");o=Zn(o,i.length),r=r.merge(i.missingOpeningBracketIds)}return n?new xTe(o,e.listHeight+1,e,t,i,r):new cS(o,e.listHeight+1,e,t,i,r)}static getEmpty(){return new DTe(rc,0,[],Cs.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,i;for(;t.kind===4&&(i=t.childrenLength)>0;)t=t.getChild(i-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let n=1;n<e;n++){const o=this.getChild(n);t=Zn(t,o.length),i=i.merge(o.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,n=e;for(let o=0;o<this.childrenLength;o++){const r=this.getChild(o);r&&(i=Math.min(i,r.computeMinIndentation(n,t)),n=Zn(n,r.length))}return this.cachedMinIndentation=i,i}}class cS extends bd{constructor(e,t,i,n,o,r){super(e,t,r),this._item1=i,this._item2=n,this._item3=o}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new cS(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class xTe extends cS{toMutable(){return new cS(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class sI extends bd{constructor(e,t,i,n){super(e,t,n),this._children=i}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new sI(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class DTe extends sI{toMutable(){return new sI(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const kTe=[];class o6 extends s6{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return kTe}deepClone(){return this}}class lb extends o6{get kind(){return 0}get missingOpeningBracketIds(){return Cs.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=Sg(e),n=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,o=wTe(Zn(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let a=n;a<=o;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const d=ks.visibleColumnFromColumn(c,l,t.getOptions().tabSize);r=Math.min(r,d)}return r}}class oI extends o6{constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}static create(e,t,i){return new oI(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return Cs.getEmpty()}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class ETe extends o6{constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class ig{constructor(e,t,i,n,o){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=n,this.astNode=o}}class Yee{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new TTe(this.textModel,this.bracketTokens),this._offset=rc,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return ns(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Zn(this._offset,e);const t=Sg(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Zn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class TTe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const o=this.lineTokens,r=o.getCount();let a=null;if(this.lineTokenOffset<r){const l=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=fo.getTokenType(l)===0,d=fo.containsBalancedBrackets(l),f=o.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<f){const g=o.getLanguageId(this.lineTokenOffset),m=this.line.substring(this.lineCharOffset,f),_=this.bracketTokens.getSingleLanguageBracketTokens(g),C=_.regExpGlobal;if(C){C.lastIndex=0;const S=C.exec(m);S&&(a=_.getToken(S[0]),a&&(this.lineCharOffset+=S.index))}}if(i+=f-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=f}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const n=bTe(e,t,this.lineIdx,this.lineCharOffset);return new ig(n,0,-1,Cs.getEmpty(),new lb(n))}}class ITe{constructor(e,t){this.text=e,this._offset=rc,this.idx=0;const i=t.getRegExpStr(),n=i?new RegExp(i+`|
`,"gi"):null,o=[];let r,a=0,l=0,c=0,d=0;const f=new Array;for(let _=0;_<60;_++)f.push(new ig(ns(0,_),0,-1,Cs.getEmpty(),new lb(ns(0,_))));const g=new Array;for(let _=0;_<60;_++)g.push(new ig(ns(1,_),0,-1,Cs.getEmpty(),new lb(ns(1,_))));if(n)for(n.lastIndex=0;(r=n.exec(e))!==null;){const _=r.index,C=r[0];if(C===`
`)a++,l=_+1;else{if(c!==_){let S;if(d===a){const x=_-c;if(x<f.length)S=f[x];else{const L=ns(0,x);S=new ig(L,0,-1,Cs.getEmpty(),new lb(L))}}else{const x=a-d,L=_-l;if(x===1&&L<g.length)S=g[L];else{const k=ns(x,L);S=new ig(k,0,-1,Cs.getEmpty(),new lb(k))}}o.push(S)}o.push(t.getToken(C)),c=_+C.length,d=a}}const m=e.length;if(c!==m){const _=d===a?ns(0,m-c):ns(a-d,m-l);o.push(new ig(_,0,-1,Cs.getEmpty(),new lb(_)))}this.length=ns(a,m-l),this.tokens=o}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new u1e}}class r6{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function i(o){return t.getKey(`${o.languageId}:::${o.bracketText}`)}const n=new Map;for(const o of e.bracketsNew.openingBrackets){const r=ns(0,o.bracketText.length),a=i(o),l=Cs.getEmpty().add(a,Yq);n.set(o.bracketText,new ig(r,1,a,l,oI.create(r,o,l)))}for(const o of e.bracketsNew.closingBrackets){const r=ns(0,o.bracketText.length);let a=Cs.getEmpty();const l=o.getClosedBrackets();for(const c of l)a=a.add(i(c),Yq);n.set(o.bracketText,new ig(r,2,i(l[0]),a,oI.create(r,o,a)))}return new r6(n)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>NTe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(i.kind===2&&i.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function NTe(s){let e=ja(s);return/^[\w ]+/.test(s)&&(e=`\\b${e}`),/[\w ]+$/.test(s)&&(e=`${e}\\b`),e}class Zee{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=r6.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function RTe(s){if(s.length===0)return null;if(s.length===1)return s[0];let e=0;function t(){if(e>=s.length)return null;const r=e,a=s[r].listHeight;for(e++;e<s.length&&s[e].listHeight===a;)e++;return e-r>=2?Qee(r===0&&e===s.length?s:s.slice(r,e),!1):s[r]}let i=t(),n=t();if(!n)return i;for(let r=t();r;r=t())Zq(i,n)<=Zq(n,r)?(i=y4(i,n),n=r):n=y4(n,r);return y4(i,n)}function Qee(s,e=!1){if(s.length===0)return null;if(s.length===1)return s[0];let t=s.length;for(;t>3;){const i=t>>1;for(let n=0;n<i;n++){const o=n<<1;s[n]=bd.create23(s[o],s[o+1],o+3===t?s[o+2]:null,e)}t=i}return bd.create23(s[0],s[1],t>=3?s[2]:null,e)}function Zq(s,e){return Math.abs(s.listHeight-e.listHeight)}function y4(s,e){return s.listHeight===e.listHeight?bd.create23(s,e,null,!1):s.listHeight>e.listHeight?ATe(s,e):MTe(e,s)}function ATe(s,e){s=s.toMutable();let t=s;const i=new Array;let n;for(;;){if(e.listHeight===t.listHeight){n=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let o=i.length-1;o>=0;o--){const r=i[o];n?r.childrenLength>=3?n=bd.create23(r.unappendChild(),n,null,!1):(r.appendChildOfSameHeight(n),n=void 0):r.handleChildrenChanged()}return n?bd.create23(s,n,null,!1):s}function MTe(s,e){s=s.toMutable();let t=s;const i=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let n=e;for(let o=i.length-1;o>=0;o--){const r=i[o];n?r.childrenLength>=3?n=bd.create23(n,r.unprependChild(),null,!1):(r.prependChildOfSameHeight(n),n=void 0):r.handleChildrenChanged()}return n?bd.create23(n,s,null,!1):s}class OTe{constructor(e){this.lastOffset=rc,this.nextNodes=[e],this.offsets=[rc],this.idxs=[]}readLongestNodeAt(e,t){if(Qb(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=fw(this.nextNodes);if(!i)return;const n=fw(this.offsets);if(Qb(e,n))return;if(Qb(n,e))if(Zn(n,i.length)<=e)this.nextNodeAfterCurrent();else{const o=S4(i);o!==-1?(this.nextNodes.push(i.getChild(o)),this.offsets.push(n),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const o=S4(i);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(o)),this.offsets.push(n),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){const e=fw(this.offsets),t=fw(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=fw(this.nextNodes),n=S4(i,this.idxs[this.idxs.length-1]);if(n!==-1){this.nextNodes.push(i.getChild(n)),this.offsets.push(Zn(e,t.length)),this.idxs[this.idxs.length-1]=n;break}else this.idxs.pop()}}}function S4(s,e=-1){for(;;){if(e++,e>=s.childrenLength)return-1;if(s.getChild(e))return e}}function fw(s){return s.length>0?s[s.length-1]:void 0}function j3(s,e,t,i){return new PTe(s,e,t,i).parseDocument()}class PTe{constructor(e,t,i,n){if(this.tokenizer=e,this.createImmutableLists=n,this._itemsConstructed=0,this._itemsFromCache=0,i&&n)throw new Error("Not supported");this.oldNodeReader=i?new OTe(i):void 0,this.positionMapper=new LTe(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Cs.getEmpty());return e||(e=bd.getEmpty()),e}parseList(e){const t=new Array;for(;;){const n=this.tokenizer.peek();if(!n||n.kind===2&&n.bracketIds.intersects(e))break;const o=this.parseChild(e);o.kind===4&&o.childrenLength===0||t.push(o)}return this.oldNodeReader?RTe(t):Qee(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const i=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!CTe(i)){const n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),o=>Qb(o.length,i)?o.canBeReused(e):!1);if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new ETe(t.bracketIds,t.length);case 0:return t.astNode;case 1:{const i=e.merge(t.bracketIds),n=this.parseList(i),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===t.bracketId||o.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),lS.create(t.astNode,n,o.astNode)):lS.create(t.astNode,n,null)}default:throw new Error("unexpected")}}}class FTe extends ge{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new J,this.denseKeyProvider=new Gee,this.brackets=new Zee(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,e.tokenization.backgroundTokenizationState===0){const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),n=new ITe(this.textModel.getValue(),i);this.initialAstWithoutTokens=j3(n,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.tokenization.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(i=>new Gq(ns(i.fromLineNumber-1,0),ns(i.toLineNumber,0),ns(i.toLineNumber-i.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=e.changes.map(i=>{const n=M.lift(i.range);return new Gq(Uv(n.getStartPosition()),Uv(n.getEndPosition()),STe(i.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,i){const n=t,o=new Yee(this.textModel,this.brackets);return j3(o,e,n,i)}getBracketsInRange(e){const t=ns(e.startLineNumber-1,e.startColumn-1),i=ns(e.endLineNumber-1,e.endColumn-1),n=new Array,o=this.initialAstWithoutTokens||this.astWithTokens;return K3(o,rc,o.length,t,i,n,0,new Map),n}getBracketPairsInRange(e,t){const i=new Array,n=Uv(e.getStartPosition()),o=Uv(e.getEndPosition()),r=this.initialAstWithoutTokens||this.astWithTokens,a=new BTe(i,t,this.textModel);return q3(r,rc,r.length,n,o,a,0,new Map),i}getFirstBracketAfter(e){const t=this.initialAstWithoutTokens||this.astWithTokens;return Jee(t,rc,t.length,Uv(e))}getFirstBracketBefore(e){const t=this.initialAstWithoutTokens||this.astWithTokens;return Xee(t,rc,t.length,Uv(e))}}function Xee(s,e,t,i){if(s.kind===4||s.kind===2){const n=[];for(const o of s.children)t=Zn(e,o.length),n.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let o=n.length-1;o>=0;o--){const{nodeOffsetStart:r,nodeOffsetEnd:a}=n[o];if(Qb(r,i)){const l=Xee(s.children[o],r,a,i);if(l)return l}}return null}else{if(s.kind===3)return null;if(s.kind===1){const n=Wh(e,t);return{bracketInfo:s.bracketInfo,range:n}}}return null}function Jee(s,e,t,i){if(s.kind===4||s.kind===2){for(const n of s.children){if(t=Zn(e,n.length),Qb(i,t)){const o=Jee(n,e,t,i);if(o)return o}e=t}return null}else{if(s.kind===3)return null;if(s.kind===1){const n=Wh(e,t);return{bracketInfo:s.bracketInfo,range:n}}}return null}function K3(s,e,t,i,n,o,r,a){if(!(r>200)){if(s.kind===4)for(const l of s.children)t=Zn(e,l.length),cg(e,n)&&Ww(t,i)&&K3(l,e,t,i,n,o,r,a),e=t;else if(s.kind===2){let l=0;if(a){let c=a.get(s.openingBracket.text);c===void 0&&(c=0),l=c,c++,a.set(s.openingBracket.text,c)}{const c=s.openingBracket;if(t=Zn(e,c.length),cg(e,n)&&Ww(t,i)){const d=Wh(e,t);o.push(new Ak(d,r,l,!s.closingBracket))}e=t}if(s.child){const c=s.child;t=Zn(e,c.length),cg(e,n)&&Ww(t,i)&&K3(c,e,t,i,n,o,r+1,a),e=t}if(s.closingBracket){const c=s.closingBracket;if(t=Zn(e,c.length),cg(e,n)&&Ww(t,i)){const d=Wh(e,t);o.push(new Ak(d,r,l,!1))}e=t}a==null||a.set(s.openingBracket.text,l)}else if(s.kind===3){const l=Wh(e,t);o.push(new Ak(l,r-1,0,!0))}else if(s.kind===1){const l=Wh(e,t);o.push(new Ak(l,r-1,0,!1))}}}class BTe{constructor(e,t,i){this.result=e,this.includeMinIndentation=t,this.textModel=i}}function q3(s,e,t,i,n,o,r,a){var l;if(!(r>200))if(s.kind===2){let c=0;if(a){let g=a.get(s.openingBracket.text);g===void 0&&(g=0),c=g,g++,a.set(s.openingBracket.text,g)}const d=Zn(e,s.openingBracket.length);let f=-1;if(o.includeMinIndentation&&(f=s.computeMinIndentation(e,o.textModel)),o.result.push(new vTe(Wh(e,t),Wh(e,d),s.closingBracket?Wh(Zn(d,((l=s.child)===null||l===void 0?void 0:l.length)||rc),t):void 0,r,c,s,f)),e=d,s.child){const g=s.child;t=Zn(e,g.length),cg(e,n)&&Ww(t,i)&&q3(g,e,t,i,n,o,r+1,a)}a==null||a.set(s.openingBracket.text,c)}else{let c=e;for(const d of s.children){const f=c;c=Zn(c,d.length),cg(f,n)&&cg(i,c)&&q3(d,f,c,i,n,o,r,a)}}}class VTe extends ge{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new tr),this.onDidChangeEmitter=new J,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(i=>{var n;(!i.languageId||((n=this.bracketPairsTree.value)===null||n===void 0?void 0:n.object.didLanguageChange(i.languageId)))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}get canBuildAST(){return this.textModel.getValueLength()<=5e6}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)===null||e===void 0||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new Ae;this.bracketPairsTree.value=WTe(e.add(new FTe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}findMatchingBracketUp(e,t,i){const n=this.textModel.validatePosition(t),o=this.textModel.getLanguageIdAtPosition(n.lineNumber,n.column);if(this.canBuildAST){const r=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew.getClosingBracketInfo(e);if(!r)return null;const a=vT(this.getBracketPairsInRange(M.fromPositions(t,t))||[],l=>r.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const r=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(o).brackets;if(!a)return null;const l=a.textIsBracket[r];return l?Mk(this._findMatchingBracketUp(l,n,L4(i))):null}}matchBracket(e,t){if(this.canBuildAST){const i=TX(this.getBracketPairsInRange(M.fromPositions(e,e)).filter(n=>n.closingBracketRange!==void 0&&(n.openingBracketRange.containsPosition(e)||n.closingBracketRange.containsPosition(e))),ty(n=>n.openingBracketRange.containsPosition(e)?n.openingBracketRange:n.closingBracketRange,M.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{const i=L4(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,n){const o=t.getCount(),r=t.getLanguageId(n);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=n-1;c>=0;c--){const d=t.getEndOffset(c);if(d<=a)break;if(Wu(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=n+1;c<o;c++){const d=t.getStartOffset(c);if(d>=l)break;if(Wu(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const i=e.lineNumber,n=this.textModel.tokenization.getLineTokens(i),o=this.textModel.getLineContent(i),r=n.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(r)).brackets;if(a&&!Wu(n.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,n,a,r),d=null;for(;;){const f=Jl.findNextBracketInRange(a.forwardRegex,i,o,l,c);if(!f)break;if(f.startColumn<=e.column&&e.column<=f.endColumn){const g=o.substring(f.startColumn-1,f.endColumn-1).toLowerCase(),m=this._matchFoundBracket(f,a.textIsBracket[g],a.textIsOpenBracket[g],t);if(m){if(m instanceof bh)return null;d=m}}l=f.endColumn-1}if(d)return d}if(r>0&&n.getStartOffset(r)===e.column-1){const l=r-1,c=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(l)).brackets;if(c&&!Wu(n.getStandardTokenType(l))){const{searchStartOffset:d,searchEndOffset:f}=this._establishBracketSearchOffsets(e,n,c,l),g=Jl.findPrevBracketInRange(c.reversedRegex,i,o,d,f);if(g&&g.startColumn<=e.column&&e.column<=g.endColumn){const m=o.substring(g.startColumn-1,g.endColumn-1).toLowerCase(),_=this._matchFoundBracket(g,c.textIsBracket[m],c.textIsOpenBracket[m],t);if(_)return _ instanceof bh?null:_}}}return null}_matchFoundBracket(e,t,i,n){if(!t)return null;const o=i?this._findMatchingBracketDown(t,e.getEndPosition(),n):this._findMatchingBracketUp(t,e.getStartPosition(),n);return o?o instanceof bh?o:[e,o]:null}_findMatchingBracketUp(e,t,i){const n=e.languageId,o=e.reversedRegex;let r=-1,a=0;const l=(c,d,f,g)=>{for(;;){if(i&&++a%100===0&&!i())return bh.INSTANCE;const m=Jl.findPrevBracketInRange(o,c,d,f,g);if(!m)break;const _=d.substring(m.startColumn-1,m.endColumn-1).toLowerCase();if(e.isOpen(_)?r++:e.isClose(_)&&r--,r===0)return m;g=m.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const d=this.textModel.tokenization.getLineTokens(c),f=d.getCount(),g=this.textModel.getLineContent(c);let m=f-1,_=g.length,C=g.length;c===t.lineNumber&&(m=d.findTokenIndexAtOffset(t.column-1),_=t.column-1,C=t.column-1);let S=!0;for(;m>=0;m--){const x=d.getLanguageId(m)===n&&!Wu(d.getStandardTokenType(m));if(x)S?_=d.getStartOffset(m):(_=d.getStartOffset(m),C=d.getEndOffset(m));else if(S&&_!==C){const L=l(c,g,_,C);if(L)return L}S=x}if(S&&_!==C){const x=l(c,g,_,C);if(x)return x}}return null}_findMatchingBracketDown(e,t,i){const n=e.languageId,o=e.forwardRegex;let r=1,a=0;const l=(d,f,g,m)=>{for(;;){if(i&&++a%100===0&&!i())return bh.INSTANCE;const _=Jl.findNextBracketInRange(o,d,f,g,m);if(!_)break;const C=f.substring(_.startColumn-1,_.endColumn-1).toLowerCase();if(e.isOpen(C)?r++:e.isClose(C)&&r--,r===0)return _;g=_.endColumn-1}return null},c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){const f=this.textModel.tokenization.getLineTokens(d),g=f.getCount(),m=this.textModel.getLineContent(d);let _=0,C=0,S=0;d===t.lineNumber&&(_=f.findTokenIndexAtOffset(t.column-1),C=t.column-1,S=t.column-1);let x=!0;for(;_<g;_++){const L=f.getLanguageId(_)===n&&!Wu(f.getStandardTokenType(_));if(L)x||(C=f.getStartOffset(_)),S=f.getEndOffset(_);else if(x&&C!==S){const k=l(d,m,C,S);if(k)return k}x=L}if(x&&C!==S){const L=l(d,m,C,S);if(L)return L}}return null}findPrevBracket(e){var t;const i=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketBefore(i))||null;let n=null,o=null,r=null;for(let a=i.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a);let f=c-1,g=d.length,m=d.length;if(a===i.lineNumber){f=l.findTokenIndexAtOffset(i.column-1),g=i.column-1,m=i.column-1;const C=l.getLanguageId(f);n!==C&&(n=C,o=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let _=!0;for(;f>=0;f--){const C=l.getLanguageId(f);if(n!==C){if(o&&r&&_&&g!==m){const x=Jl.findPrevBracketInRange(o.reversedRegex,a,d,g,m);if(x)return this._toFoundBracket(r,x);_=!1}n=C,o=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const S=!!o&&!Wu(l.getStandardTokenType(f));if(S)_?g=l.getStartOffset(f):(g=l.getStartOffset(f),m=l.getEndOffset(f));else if(r&&o&&_&&g!==m){const x=Jl.findPrevBracketInRange(o.reversedRegex,a,d,g,m);if(x)return this._toFoundBracket(r,x)}_=S}if(r&&o&&_&&g!==m){const C=Jl.findPrevBracketInRange(o.reversedRegex,a,d,g,m);if(C)return this._toFoundBracket(r,C)}}return null}findNextBracket(e){var t;const i=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketAfter(i))||null;const n=this.textModel.getLineCount();let o=null,r=null,a=null;for(let l=i.lineNumber;l<=n;l++){const c=this.textModel.tokenization.getLineTokens(l),d=c.getCount(),f=this.textModel.getLineContent(l);let g=0,m=0,_=0;if(l===i.lineNumber){g=c.findTokenIndexAtOffset(i.column-1),m=i.column-1,_=i.column-1;const S=c.getLanguageId(g);o!==S&&(o=S,r=this.languageConfigurationService.getLanguageConfiguration(o).brackets,a=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew)}let C=!0;for(;g<d;g++){const S=c.getLanguageId(g);if(o!==S){if(a&&r&&C&&m!==_){const L=Jl.findNextBracketInRange(r.forwardRegex,l,f,m,_);if(L)return this._toFoundBracket(a,L);C=!1}o=S,r=this.languageConfigurationService.getLanguageConfiguration(o).brackets,a=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew}const x=!!r&&!Wu(c.getStandardTokenType(g));if(x)C||(m=c.getStartOffset(g)),_=c.getEndOffset(g);else if(a&&r&&C&&m!==_){const L=Jl.findNextBracketInRange(r.forwardRegex,l,f,m,_);if(L)return this._toFoundBracket(a,L)}C=x}if(a&&r&&C&&m!==_){const S=Jl.findNextBracketInRange(r.forwardRegex,l,f,m,_);if(S)return this._toFoundBracket(a,S)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const m=M.fromPositions(i),_=vT(this.getBracketPairsInRange(M.fromPositions(i,i)),C=>C.closingBracketRange!==void 0&&C.range.strictContainsRange(m));return _?[_.openingBracketRange,_.closingBracketRange]:null}const n=L4(t),o=this.textModel.getLineCount(),r=new Map;let a=[];const l=(m,_)=>{if(!r.has(m)){const C=[];for(let S=0,x=_?_.brackets.length:0;S<x;S++)C[S]=0;r.set(m,C)}a=r.get(m)};let c=0;const d=(m,_,C,S,x)=>{for(;;){if(n&&++c%100===0&&!n())return bh.INSTANCE;const L=Jl.findNextBracketInRange(m.forwardRegex,_,C,S,x);if(!L)break;const k=C.substring(L.startColumn-1,L.endColumn-1).toLowerCase(),T=m.textIsBracket[k];if(T&&(T.isOpen(k)?a[T.index]++:T.isClose(k)&&a[T.index]--,a[T.index]===-1))return this._matchFoundBracket(L,T,!1,n);S=L.endColumn-1}return null};let f=null,g=null;for(let m=i.lineNumber;m<=o;m++){const _=this.textModel.tokenization.getLineTokens(m),C=_.getCount(),S=this.textModel.getLineContent(m);let x=0,L=0,k=0;if(m===i.lineNumber){x=_.findTokenIndexAtOffset(i.column-1),L=i.column-1,k=i.column-1;const A=_.getLanguageId(x);f!==A&&(f=A,g=this.languageConfigurationService.getLanguageConfiguration(f).brackets,l(f,g))}let T=!0;for(;x<C;x++){const A=_.getLanguageId(x);if(f!==A){if(g&&T&&L!==k){const I=d(g,m,S,L,k);if(I)return Mk(I);T=!1}f=A,g=this.languageConfigurationService.getLanguageConfiguration(f).brackets,l(f,g)}const O=!!g&&!Wu(_.getStandardTokenType(x));if(O)T||(L=_.getStartOffset(x)),k=_.getEndOffset(x);else if(g&&T&&L!==k){const I=d(g,m,S,L,k);if(I)return Mk(I)}T=O}if(g&&T&&L!==k){const A=d(g,m,S,L,k);if(A)return Mk(A)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const n=e.getBracketInfo(i);return n?{range:t,bracketInfo:n}:null}}function WTe(s,e){return{object:s,dispose:()=>e==null?void 0:e.dispose()}}function L4(s){if(typeof s>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=s}}class bh{constructor(){this._searchCanceledBrand=void 0}}bh.INSTANCE=new bh;function Mk(s){return s instanceof bh?null:s}class HTe extends ge{constructor(e){super(),this.textModel=e,this.colorProvider=new ete,this.onDidChangeEmitter=new J,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const n=new Array,o=this.textModel.bracketPairs.getBracketsInRange(e);for(const r of o)n.push({id:`bracket${r.range.toString()}-${r.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(r,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:r.range});return n}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new M(1,1,this.textModel.getLineCount(),1),e,t):[]}}class ete{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}Cn((s,e)=>{const t=[Tee,Iee,Nee,Ree,Aee,Mee],i=new ete;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${s.getColor(dke)}; }`);const n=t.map(o=>s.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){const r=n[o%n.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(o)} { color: ${r}; }`)}});function Ok(s){return s.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class lo{constructor(e,t,i,n){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=n}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Ok(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Ok(this.oldText)}")`:`(replace@${this.oldPosition} "${Ok(this.oldText)}" with "${Ok(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const n=t.length;Bc(e,n,i),i+=4;for(let o=0;o<n;o++)xwe(e,t.charCodeAt(o),i),i+=2;return i}static _readString(e,t){const i=Fc(e,t);return t+=4,f3(e,t,i)}writeSize(){return 4+4+lo._writeStringSize(this.oldText)+lo._writeStringSize(this.newText)}write(e,t){return Bc(e,this.oldPosition,t),t+=4,Bc(e,this.newPosition,t),t+=4,t=lo._writeString(e,this.oldText,t),t=lo._writeString(e,this.newText,t),t}static read(e,t,i){const n=Fc(e,t);t+=4;const o=Fc(e,t);t+=4;const r=lo._readString(e,t);t+=lo._writeStringSize(r);const a=lo._readString(e,t);return t+=lo._writeStringSize(a),i.push(new lo(n,r,o,a)),t}}function zTe(s,e){return s===null||s.length===0?e:new Uu(s,e).compress()}class Uu{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),n=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(n),n=this._getCurr(++t);continue}if(n===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldEnd<=i.newPosition){this._acceptCurr(n),n=this._getCurr(++t);continue}if(i.newEnd<=n.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldPosition<i.newPosition){const[c,d]=Uu._splitCurr(n,i.newPosition-n.oldPosition);this._acceptCurr(c),n=d;continue}if(i.newPosition<n.oldPosition){const[c,d]=Uu._splitPrev(i,n.oldPosition-i.newPosition);this._acceptPrev(c),i=d;continue}let a,l;if(n.oldEnd===i.newEnd)a=i,l=n,i=this._getPrev(++e),n=this._getCurr(++t);else if(n.oldEnd<i.newEnd){const[c,d]=Uu._splitPrev(i,n.oldLength);a=c,l=n,i=d,n=this._getCurr(++t)}else{const[c,d]=Uu._splitCurr(n,i.newLength);a=i,l=c,i=this._getPrev(++e),n=d}this._result[this._resultLen++]=new lo(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const o=Uu._merge(this._result);return Uu._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=Uu._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Uu._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new lo(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new lo(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),n=e.newText.substr(t);return[new lo(e.oldPosition,e.oldText,e.newPosition,i),new lo(e.oldEnd,"",e.newPosition+t,n)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),n=e.oldText.substr(t);return[new lo(e.oldPosition,i,e.newPosition,e.newText),new lo(e.oldPosition+t,n,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let i=0,n=e[0];for(let o=1;o<e.length;o++){const r=e[o];n.oldEnd===r.oldPosition?n=new lo(n.oldPosition,n.oldText+r.oldText,n.newPosition,n.newText+r.newText):(t[i++]=n,n=r)}return t[i++]=n,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let i=0;for(let n=0;n<e.length;n++){const o=e[n];o.oldText!==o.newText&&(t[i++]=o)}return t}}function zf(s){return s===47||s===92}function tte(s){return s.replace(/[\\/]/g,ws.sep)}function UTe(s){return s.indexOf("/")===-1&&(s=tte(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}function Qq(s,e=ws.sep){if(!s)return"";const t=s.length,i=s.charCodeAt(0);if(zf(i)){if(zf(s.charCodeAt(1))&&!zf(s.charCodeAt(2))){let o=3;const r=o;for(;o<t&&!zf(s.charCodeAt(o));o++);if(r!==o&&!zf(s.charCodeAt(o+1))){for(o+=1;o<t;o++)if(zf(s.charCodeAt(o)))return s.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(ite(i)&&s.charCodeAt(1)===58)return zf(s.charCodeAt(2))?s.slice(0,2)+e:s.slice(0,2);let n=s.indexOf("://");if(n!==-1){for(n+=3;n<t;n++)if(zf(s.charCodeAt(n)))return s.slice(0,n+1)}return""}function G3(s,e,t,i=cd){if(s===e)return!0;if(!s||!e||e.length>s.length)return!1;if(t){if(!tB(s,e))return!1;if(e.length===s.length)return!0;let o=e.length;return e.charAt(e.length-1)===i&&o--,s.charAt(o)===i}return e.charAt(e.length-1)!==i&&(e+=i),s.indexOf(e)===0}function ite(s){return s>=65&&s<=90||s>=97&&s<=122}function $Te(s,e=mo){return e?ite(s.charCodeAt(0))&&s.charCodeAt(1)===58:!1}function Hu(s){return LT(s,!0)}class a6{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:Py(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===Xt.file)return G3(Hu(e),Hu(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(Jq(e.authority,t.authority))return G3(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return yt.joinPath(e,...t)}basenameOrAuthority(e){return Rl(e)||e.authority}basename(e){return ws.basename(e.path)}extname(e){return ws.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Xt.file?t=yt.file($X(Hu(e))).path:(t=ws.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Xt.file?t=yt.file(UX(Hu(e))).path:t=ws.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!Jq(e.authority,t.authority))return;if(e.scheme===Xt.file){const o=T1e(Hu(e),Hu(t));return mo?tte(o):o}let i=e.path||"/";const n=t.path||"/";if(this._ignorePathCasing(e)){let o=0;for(const r=Math.min(i.length,n.length);o<r&&!(i.charCodeAt(o)!==n.charCodeAt(o)&&i.charAt(o).toLowerCase()!==n.charAt(o).toLowerCase());o++);i=n.substr(0,o)+i.substr(o)}return ws.relative(i,n)}resolvePath(e,t){if(e.scheme===Xt.file){const i=yt.file(E1e(Hu(e),t));return e.with({authority:i.authority,path:i.path})}return t=UTe(t),e.with({path:ws.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&mb(e,t)}hasTrailingPathSeparator(e,t=cd){if(e.scheme===Xt.file){const i=Hu(e);return i.length>Qq(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=cd){return eG(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=cd){let i=!1;if(e.scheme===Xt.file){const n=Hu(e);i=n!==void 0&&n.length===Qq(n).length&&n[n.length-1]===t}else{t="/";const n=e.path;i=n.length===1&&n.charCodeAt(n.length-1)===47}return!i&&!eG(e,t)?e.with({path:e.path+"/"}):e}}const bn=new a6(()=>!1);new a6(s=>s.scheme===Xt.file?!Wo:!0);new a6(s=>!0);const nte=bn.isEqual.bind(bn);bn.isEqualOrParent.bind(bn);bn.getComparisonKey.bind(bn);const jTe=bn.basenameOrAuthority.bind(bn),Rl=bn.basename.bind(bn),KTe=bn.extname.bind(bn),nR=bn.dirname.bind(bn),qTe=bn.joinPath.bind(bn),GTe=bn.normalizePath.bind(bn),YTe=bn.relativePath.bind(bn),Xq=bn.resolvePath.bind(bn);bn.isAbsolutePath.bind(bn);const Jq=bn.isEqualAuthority.bind(bn),eG=bn.hasTrailingPathSeparator.bind(bn);bn.removeTrailingPathSeparator.bind(bn);bn.addTrailingPathSeparator.bind(bn);var Bg;(function(s){s.META_DATA_LABEL="label",s.META_DATA_DESCRIPTION="description",s.META_DATA_SIZE="size",s.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{const[a,l]=r.split(":");a&&l&&i.set(a,l)});const o=t.path.substring(0,t.path.indexOf(";"));return o&&i.set(s.META_DATA_MIME,o),i}s.parseMetaData=e})(Bg||(Bg={}));function $v(s){return s.toString()}class Us{constructor(e,t,i,n,o,r,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=n,this.beforeCursorState=o,this.afterCursorState=r,this.changes=a}static create(e,t){const i=e.getAlternativeVersionId(),n=Y3(e);return new Us(i,i,n,n,t,t,[])}append(e,t,i,n,o){t.length>0&&(this.changes=zTe(this.changes,t)),this.afterEOL=i,this.afterVersionId=n,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(Bc(e,t?t.length:0,i),i+=4,t)for(const n of t)Bc(e,n.selectionStartLineNumber,i),i+=4,Bc(e,n.selectionStartColumn,i),i+=4,Bc(e,n.positionLineNumber,i),i+=4,Bc(e,n.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const n=Fc(e,t);t+=4;for(let o=0;o<n;o++){const r=Fc(e,t);t+=4;const a=Fc(e,t);t+=4;const l=Fc(e,t);t+=4;const c=Fc(e,t);t+=4,i.push(new et(r,a,l,c))}return t}serialize(){let e=10+Us._writeSelectionsSize(this.beforeCursorState)+Us._writeSelectionsSize(this.afterCursorState)+4;for(const n of this.changes)e+=n.writeSize();const t=new Uint8Array(e);let i=0;Bc(t,this.beforeVersionId,i),i+=4,Bc(t,this.afterVersionId,i),i+=4,xK(t,this.beforeEOL,i),i+=1,xK(t,this.afterEOL,i),i+=1,i=Us._writeSelections(t,this.beforeCursorState,i),i=Us._writeSelections(t,this.afterCursorState,i),Bc(t,this.changes.length,i),i+=4;for(const n of this.changes)i=n.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const n=Fc(t,i);i+=4;const o=Fc(t,i);i+=4;const r=LK(t,i);i+=1;const a=LK(t,i);i+=1;const l=[];i=Us._readSelections(t,i,l);const c=[];i=Us._readSelections(t,i,c);const d=Fc(t,i);i+=4;const f=[];for(let g=0;g<d;g++)i=lo.read(t,i,f);return new Us(n,o,r,a,l,c,f)}}class ste{constructor(e,t,i,n){this.label=e,this.code=t,this.model=i,this._data=Us.create(i,n)}get type(){return 0}get resource(){return yt.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof Us?this._data:Us.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(yt.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Us}append(e,t,i,n,o){this._data instanceof Us&&this._data.append(e,t,i,n,o)}close(){this._data instanceof Us&&(this._data=this._data.serialize())}open(){this._data instanceof Us||(this._data=Us.deserialize(this._data))}undo(){if(yt.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Us&&(this._data=this._data.serialize());const e=Us.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(yt.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Us&&(this._data=this._data.serialize());const e=Us.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Us&&(this._data=this._data.serialize()),this._data.byteLength+168}}class ZTe{constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const o=$v(n.resource);this._editStackElementsMap.set(o,n)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=$v(e);return this._editStackElementsMap.has(t)}setModel(e){const t=$v(yt.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=$v(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,n,o){const r=$v(e.uri);this._editStackElementsMap.get(r).append(e,t,i,n,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=$v(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${Rl(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function Y3(s){return s.getEOL()===`
`?0:1}function Ch(s){return s?s instanceof ste||s instanceof ZTe:!1}class l6{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Ch(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Ch(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(Ch(t)&&t.canAppend(this._model))return t;const i=new ste(b("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(i),i}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],Y3(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i){const n=this._getOrCreateEditStackElement(e),o=this._model.applyEdits(t,!0),r=l6._computeCursorState(i,o),a=o.map((l,c)=>({index:c,textChange:l.textChange}));return a.sort((l,c)=>l.textChange.oldPosition===c.textChange.oldPosition?l.index-c.index:l.textChange.oldPosition-c.textChange.oldPosition),n.append(this._model,a.map(l=>l.textChange),Y3(this._model),this._model.getAlternativeVersionId(),r),r}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return Yt(i),null}}}class QTe{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function XTe(s,e,t,i,n){n.spacesDiff=0,n.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<i;o++){const g=s.charCodeAt(o),m=t.charCodeAt(o);if(g!==m)break}let r=0,a=0;for(let g=o;g<e;g++)s.charCodeAt(g)===32?r++:a++;let l=0,c=0;for(let g=o;g<i;g++)t.charCodeAt(g)===32?l++:c++;if(r>0&&a>0||l>0&&c>0)return;const d=Math.abs(a-c),f=Math.abs(r-l);if(d===0){n.spacesDiff=f,f>0&&0<=l-1&&l-1<s.length&&l<t.length&&t.charCodeAt(l)!==32&&s.charCodeAt(l-1)===32&&s.charCodeAt(s.length-1)===44&&(n.looksLikeAlignment=!0);return}if(f%d===0){n.spacesDiff=f/d;return}}function tG(s,e,t){const i=Math.min(s.getLineCount(),1e4);let n=0,o=0,r="",a=0;const l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],f=new QTe;for(let _=1;_<=i;_++){const C=s.getLineLength(_),S=s.getLineContent(_),x=C<=65536;let L=!1,k=0,T=0,A=0;for(let I=0,R=C;I<R;I++){const B=x?S.charCodeAt(I):s.getLineCharCode(_,I);if(B===9)A++;else if(B===32)T++;else{L=!0,k=I;break}}if(!L||(A>0?n++:T>1&&o++,XTe(r,a,S,k,f),f.looksLikeAlignment&&!(t&&e===f.spacesDiff)))continue;const O=f.spacesDiff;O<=c&&d[O]++,r=S,a=k}let g=t;n!==o&&(g=n<o);let m=e;if(g){let _=g?0:.1*i;l.forEach(C=>{const S=d[C];S>_&&(_=S,m=C)}),m===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(m=2)}return{insertSpaces:g,tabSize:m}}function Mr(s){return(s.metadata&1)>>>0}function pn(s,e){s.metadata=s.metadata&254|e<<0}function po(s){return(s.metadata&2)>>>1===1}function dn(s,e){s.metadata=s.metadata&253|(e?1:0)<<1}function ote(s){return(s.metadata&4)>>>2===1}function iG(s,e){s.metadata=s.metadata&251|(e?1:0)<<2}function JTe(s){return(s.metadata&24)>>>3}function nG(s,e){s.metadata=s.metadata&231|e<<3}function eIe(s){return(s.metadata&32)>>>5===1}function sG(s,e){s.metadata=s.metadata&223|(e?1:0)<<5}class rte{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,pn(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,iG(this,!1),nG(this,1),sG(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,dn(this,!1)}reset(e,t,i,n){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=n}setOptions(e){this.options=e;const t=this.options.className;iG(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),nG(this,this.options.stickiness),sG(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const ti=new rte(null,0,0);ti.parent=ti;ti.left=ti;ti.right=ti;pn(ti,0);class x4{constructor(){this.root=ti,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,n,o){return this.root===ti?[]:lIe(this,e,t,i,n,o)}search(e,t,i){return this.root===ti?[]:aIe(this,e,t,i)}collectNodesFromOwner(e){return oIe(this,e)}collectNodesPostOrder(){return rIe(this)}insert(e){oG(this,e),this._normalizeDeltaIfNecessary()}delete(e){rG(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let n=0;for(;e!==this.root;)e===e.parent.right&&(n+=e.parent.delta),e=e.parent;const o=i.start+n,r=i.end+n;i.setCachedOffsets(o,r,t)}acceptReplace(e,t,i,n){const o=nIe(this,e,e+t);for(let r=0,a=o.length;r<a;r++){const l=o[r];rG(this,l)}this._normalizeDeltaIfNecessary(),sIe(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let r=0,a=o.length;r<a;r++){const l=o[r];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,iIe(l,e,e+t,i,n),l.maxEnd=l.end,oG(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){!this.requestNormalizeDelta||(this.requestNormalizeDelta=!1,tIe(this))}}function tIe(s){let e=s.root,t=0;for(;e!==ti;){if(e.left!==ti&&!po(e.left)){e=e.left;continue}if(e.right!==ti&&!po(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Vg(e),dn(e,!0),dn(e.left,!1),dn(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}dn(s.root,!1)}function jv(s,e,t,i){return s<t?!0:s>t||i===1?!1:i===2?!0:e}function iIe(s,e,t,i,n){const o=JTe(s),r=o===0||o===2,a=o===1||o===2,l=t-e,c=i,d=Math.min(l,c),f=s.start;let g=!1;const m=s.end;let _=!1;e<=f&&m<=t&&eIe(s)&&(s.start=e,g=!0,s.end=e,_=!0);{const S=n?1:l>0?2:0;!g&&jv(f,r,e,S)&&(g=!0),!_&&jv(m,a,e,S)&&(_=!0)}if(d>0&&!n){const S=l>c?2:0;!g&&jv(f,r,e+d,S)&&(g=!0),!_&&jv(m,a,e+d,S)&&(_=!0)}{const S=n?1:0;!g&&jv(f,r,t,S)&&(s.start=e+c,g=!0),!_&&jv(m,a,t,S)&&(s.end=e+c,_=!0)}const C=c-l;g||(s.start=Math.max(0,f+C)),_||(s.end=Math.max(0,m+C)),s.start>s.end&&(s.end=s.start)}function nIe(s,e,t){let i=s.root,n=0,o=0,r=0,a=0;const l=[];let c=0;for(;i!==ti;){if(po(i)){dn(i.left,!1),dn(i.right,!1),i===i.parent.right&&(n-=i.parent.delta),i=i.parent;continue}if(!po(i.left)){if(o=n+i.maxEnd,o<e){dn(i,!0);continue}if(i.left!==ti){i=i.left;continue}}if(r=n+i.start,r>t){dn(i,!0);continue}if(a=n+i.end,a>=e&&(i.setCachedOffsets(r,a,0),l[c++]=i),dn(i,!0),i.right!==ti&&!po(i.right)){n+=i.delta,i=i.right;continue}}return dn(s.root,!1),l}function sIe(s,e,t,i){let n=s.root,o=0,r=0,a=0;const l=i-(t-e);for(;n!==ti;){if(po(n)){dn(n.left,!1),dn(n.right,!1),n===n.parent.right&&(o-=n.parent.delta),Vg(n),n=n.parent;continue}if(!po(n.left)){if(r=o+n.maxEnd,r<e){dn(n,!0);continue}if(n.left!==ti){n=n.left;continue}}if(a=o+n.start,a>t){n.start+=l,n.end+=l,n.delta+=l,(n.delta<-1073741824||n.delta>1073741824)&&(s.requestNormalizeDelta=!0),dn(n,!0);continue}if(dn(n,!0),n.right!==ti&&!po(n.right)){o+=n.delta,n=n.right;continue}}dn(s.root,!1)}function oIe(s,e){let t=s.root;const i=[];let n=0;for(;t!==ti;){if(po(t)){dn(t.left,!1),dn(t.right,!1),t=t.parent;continue}if(t.left!==ti&&!po(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[n++]=t),dn(t,!0),t.right!==ti&&!po(t.right)){t=t.right;continue}}return dn(s.root,!1),i}function rIe(s){let e=s.root;const t=[];let i=0;for(;e!==ti;){if(po(e)){dn(e.left,!1),dn(e.right,!1),e=e.parent;continue}if(e.left!==ti&&!po(e.left)){e=e.left;continue}if(e.right!==ti&&!po(e.right)){e=e.right;continue}t[i++]=e,dn(e,!0)}return dn(s.root,!1),t}function aIe(s,e,t,i){let n=s.root,o=0,r=0,a=0;const l=[];let c=0;for(;n!==ti;){if(po(n)){dn(n.left,!1),dn(n.right,!1),n===n.parent.right&&(o-=n.parent.delta),n=n.parent;continue}if(n.left!==ti&&!po(n.left)){n=n.left;continue}r=o+n.start,a=o+n.end,n.setCachedOffsets(r,a,i);let d=!0;if(e&&n.ownerId&&n.ownerId!==e&&(d=!1),t&&ote(n)&&(d=!1),d&&(l[c++]=n),dn(n,!0),n.right!==ti&&!po(n.right)){o+=n.delta,n=n.right;continue}}return dn(s.root,!1),l}function lIe(s,e,t,i,n,o){let r=s.root,a=0,l=0,c=0,d=0;const f=[];let g=0;for(;r!==ti;){if(po(r)){dn(r.left,!1),dn(r.right,!1),r===r.parent.right&&(a-=r.parent.delta),r=r.parent;continue}if(!po(r.left)){if(l=a+r.maxEnd,l<e){dn(r,!0);continue}if(r.left!==ti){r=r.left;continue}}if(c=a+r.start,c>t){dn(r,!0);continue}if(d=a+r.end,d>=e){r.setCachedOffsets(c,d,o);let m=!0;i&&r.ownerId&&r.ownerId!==i&&(m=!1),n&&ote(r)&&(m=!1),m&&(f[g++]=r)}if(dn(r,!0),r.right!==ti&&!po(r.right)){a+=r.delta,r=r.right;continue}}return dn(s.root,!1),f}function oG(s,e){if(s.root===ti)return e.parent=ti,e.left=ti,e.right=ti,pn(e,0),s.root=e,s.root;cIe(s,e),Zf(e.parent);let t=e;for(;t!==s.root&&Mr(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;Mr(i)===1?(pn(t.parent,0),pn(i,0),pn(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,fy(s,t)),pn(t.parent,0),pn(t.parent.parent,1),gy(s,t.parent.parent))}else{const i=t.parent.parent.left;Mr(i)===1?(pn(t.parent,0),pn(i,0),pn(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,gy(s,t)),pn(t.parent,0),pn(t.parent.parent,1),fy(s,t.parent.parent))}return pn(s.root,0),e}function cIe(s,e){let t=0,i=s.root;const n=e.start,o=e.end;for(;;)if(dIe(n,o,i.start+t,i.end+t)<0)if(i.left===ti){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===ti){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=ti,e.right=ti,pn(e,1)}function rG(s,e){let t,i;if(e.left===ti?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===ti?(t=e.left,i=e):(i=uIe(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(s.requestNormalizeDelta=!0)),i===s.root){s.root=t,pn(t,0),e.detach(),D4(),Vg(t),s.root.parent=ti;return}const n=Mr(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,pn(i,Mr(e)),e===s.root?s.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==ti&&(i.left.parent=i),i.right!==ti&&(i.right.parent=i)),e.detach(),n){Zf(t.parent),i!==e&&(Zf(i),Zf(i.parent)),D4();return}Zf(t),Zf(t.parent),i!==e&&(Zf(i),Zf(i.parent));let o;for(;t!==s.root&&Mr(t)===0;)t===t.parent.left?(o=t.parent.right,Mr(o)===1&&(pn(o,0),pn(t.parent,1),fy(s,t.parent),o=t.parent.right),Mr(o.left)===0&&Mr(o.right)===0?(pn(o,1),t=t.parent):(Mr(o.right)===0&&(pn(o.left,0),pn(o,1),gy(s,o),o=t.parent.right),pn(o,Mr(t.parent)),pn(t.parent,0),pn(o.right,0),fy(s,t.parent),t=s.root)):(o=t.parent.left,Mr(o)===1&&(pn(o,0),pn(t.parent,1),gy(s,t.parent),o=t.parent.left),Mr(o.left)===0&&Mr(o.right)===0?(pn(o,1),t=t.parent):(Mr(o.left)===0&&(pn(o.right,0),pn(o,1),fy(s,o),o=t.parent.left),pn(o,Mr(t.parent)),pn(t.parent,0),pn(o.left,0),gy(s,t.parent),t=s.root));pn(t,0),D4()}function uIe(s){for(;s.left!==ti;)s=s.left;return s}function D4(){ti.parent=ti,ti.delta=0,ti.start=0,ti.end=0}function fy(s,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==ti&&(t.left.parent=e),t.parent=e.parent,e.parent===ti?s.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Vg(e),Vg(t)}function gy(s,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(s.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==ti&&(t.right.parent=e),t.parent=e.parent,e.parent===ti?s.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Vg(e),Vg(t)}function ate(s){let e=s.end;if(s.left!==ti){const t=s.left.maxEnd;t>e&&(e=t)}if(s.right!==ti){const t=s.right.maxEnd+s.delta;t>e&&(e=t)}return e}function Vg(s){s.maxEnd=ate(s)}function Zf(s){for(;s!==ti;){const e=ate(s);if(s.maxEnd===e)return;s.maxEnd=e,s=s.parent}}function dIe(s,e,t,i){return s===t?e-i:s-t}class Z3{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Bt)return c6(this.right);let e=this;for(;e.parent!==Bt&&e.parent.left!==e;)e=e.parent;return e.parent===Bt?Bt:e.parent}prev(){if(this.left!==Bt)return lte(this.left);let e=this;for(;e.parent!==Bt&&e.parent.right!==e;)e=e.parent;return e.parent===Bt?Bt:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const Bt=new Z3(null,0);Bt.parent=Bt;Bt.left=Bt;Bt.right=Bt;Bt.color=0;function c6(s){for(;s.left!==Bt;)s=s.left;return s}function lte(s){for(;s.right!==Bt;)s=s.right;return s}function u6(s){return s===Bt?0:s.size_left+s.piece.length+u6(s.right)}function d6(s){return s===Bt?0:s.lf_left+s.piece.lineFeedCnt+d6(s.right)}function k4(){Bt.parent=Bt}function py(s,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Bt&&(t.left.parent=e),t.parent=e.parent,e.parent===Bt?s.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function my(s,e){const t=e.left;e.left=t.right,t.right!==Bt&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Bt?s.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function Pk(s,e){let t,i;if(e.left===Bt?(i=e,t=i.right):e.right===Bt?(i=e,t=i.left):(i=c6(e.right),t=i.right),i===s.root){s.root=t,t.color=0,e.detach(),k4(),s.root.parent=Bt;return}const n=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,Hw(s,t)):(i.parent===e?t.parent=i:t.parent=i.parent,Hw(s,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===s.root?s.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==Bt&&(i.left.parent=i),i.right!==Bt&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,Hw(s,i)),e.detach(),t.parent.left===t){const r=u6(t),a=d6(t);if(r!==t.parent.size_left||a!==t.parent.lf_left){const l=r-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=r,t.parent.lf_left=a,uh(s,t.parent,l,c)}}if(Hw(s,t.parent),n){k4();return}let o;for(;t!==s.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,py(s,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,my(s,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,py(s,t.parent),t=s.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,my(s,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,py(s,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,my(s,t.parent),t=s.root));t.color=0,k4()}function aG(s,e){for(Hw(s,e);e!==s.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,py(s,e)),e.parent.color=0,e.parent.parent.color=1,my(s,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,my(s,e)),e.parent.color=0,e.parent.parent.color=1,py(s,e.parent.parent))}s.root.color=0}function uh(s,e,t,i){for(;e!==s.root&&e!==Bt;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function Hw(s,e){let t=0,i=0;if(e!==s.root){for(;e!==s.root&&e===e.parent.right;)e=e.parent;if(e!==s.root)for(e=e.parent,t=u6(e.left)-e.size_left,i=d6(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==s.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const nh=65535;function cte(s){let e;return s[s.length-1]<65536?e=new Uint16Array(s.length):e=new Uint32Array(s.length),e.set(s,0),e}class hIe{constructor(e,t,i,n,o){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=o}}function gh(s,e=!0){const t=[0];let i=1;for(let n=0,o=s.length;n<o;n++){const r=s.charCodeAt(n);r===13?n+1<o&&s.charCodeAt(n+1)===10?(t[i++]=n+2,n++):t[i++]=n+1:r===10&&(t[i++]=n+1)}return e?cte(t):t}function fIe(s,e){s.length=0,s[0]=0;let t=1,i=0,n=0,o=0,r=!0;for(let l=0,c=e.length;l<c;l++){const d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(o++,s[t++]=l+2,l++):(i++,s[t++]=l+1):d===10?(n++,s[t++]=l+1):r&&d!==9&&(d<32||d>126)&&(r=!1)}const a=new hIe(cte(s),i,n,o,r);return s.length=0,a}class aa{constructor(e,t,i,n,o){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=o}}class sm{constructor(e,t){this.buffer=e,this.lineStarts=t}}class gIe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Bt&&e.iterate(e.root,i=>(i!==Bt&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class pIe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let n=0;n<i.length;n++){const o=i[n];if(o.node.parent===null||o.nodeStartOffset>=e){i[n]=null,t=!0;continue}}if(t){const n=[];for(const o of i)o!==null&&n.push(o);this._cache=n}}}class mIe{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new sm("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Bt,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let o=0,r=e.length;o<r;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=gh(e[o].buffer));const a=new aa(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),n=this.rbInsertRight(n,a)}this._searchCache=new pIe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=nh,i=t-Math.floor(t/3),n=i*2;let o="",r=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),d=c.length;if(r<=i||r+d<n)return o+=c,r+=d,!0;const f=o.replace(/\r\n|\r|\n/g,e);return a.push(new sm(f,gh(f))),o=c,r=d,!0}),r>0){const l=o.replace(/\r\n|\r|\n/g,e);a.push(new sm(l,gh(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new gIe(this,e)}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==Bt;)if(n.left!==Bt&&n.lf_left+1>=e)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt+1>=e){i+=n.size_left;const o=this.getAccumulatedValue(n,e-n.lf_left-2);return i+=o+t-1}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const n=e;for(;t!==Bt;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const o=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+o.index,o.index===0){const r=this.getOffsetAt(i+1,1),a=n-r;return new se(i+1,a+1)}return new se(i+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===Bt){const o=this.getOffsetAt(i+1,1),r=n-e-o;return new se(i+1,r+1)}else t=t.right;return new se(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(i,n);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node;const n=this._buffers[i.piece.bufferIndex].buffer,o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let r=n.substring(o+e.remainder,o+i.piece.length);for(i=i.next();i!==Bt;){const a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){r+=a.substring(l,l+t.remainder);break}else r+=a.substr(l,i.piece.length);i=i.next()}return r}getLinesContent(){const e=[];let t=0,i="",n=!1;return this.iterate(this.root,o=>{if(o===Bt)return!0;const r=o.piece;let a=r.length;if(a===0)return!0;const l=this._buffers[r.bufferIndex].buffer,c=this._buffers[r.bufferIndex].lineStarts,d=r.start.line,f=r.end.line;let g=c[d]+r.start.column;if(n&&(l.charCodeAt(g)===10&&(g++,a--),e[t++]=i,i="",n=!1,a===0))return!0;if(d===f)return!this._EOLNormalized&&l.charCodeAt(g+a-1)===13?(n=!0,i+=l.substr(g,a-1)):i+=l.substr(g,a),!0;i+=this._EOLNormalized?l.substring(g,Math.max(g,c[d+1]-this._EOLLength)):l.substring(g,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let m=d+1;m<f;m++)i=this._EOLNormalized?l.substring(c[m],c[m+1]-this._EOLLength):l.substring(c[m],c[m+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[f]+r.end.column-1)===13?(n=!0,r.end.column===0?t--:i=l.substr(c[f],r.end.column-1)):i=l.substr(c[f],r.end.column),!0}),n&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}else{const t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,n,o,r,a,l,c,d,f){const g=this._buffers[e.piece.bufferIndex],m=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),_=this.offsetInBuffer(e.piece.bufferIndex,o),C=this.offsetInBuffer(e.piece.bufferIndex,r);let S;const x={line:0,column:0};let L,k;t._wordSeparators?(L=g.buffer.substring(_,C),k=T=>T+_,t.reset(0)):(L=g.buffer,k=T=>T,t.reset(_));do if(S=t.next(L),S){if(k(S.index)>=C)return d;this.positionInBuffer(e,k(S.index)-m,x);const T=this.getLineFeedCnt(e.piece.bufferIndex,o,x),A=x.line===o.line?x.column-o.column+n:x.column+1,O=A+S[0].length;if(f[d++]=Jp(new M(i+T,A,i+T,O),S,l),k(S.index)+S[0].length>=C||d>=c)return d}while(S);return d}findMatchesLineByLine(e,t,i,n){const o=[];let r=0;const a=new bb(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder);const f=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,f,t,i,n,r,o),o;let g=e.startLineNumber,m=l.node;for(;m!==c.node;){const C=this.getLineFeedCnt(m.piece.bufferIndex,d,m.piece.end);if(C>=1){const x=this._buffers[m.piece.bufferIndex].lineStarts,L=this.offsetInBuffer(m.piece.bufferIndex,m.piece.start),k=x[d.line+C],T=g===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(m,a,g,T,d,this.positionInBuffer(m,k-L),t,i,n,r,o),r>=n)return o;g+=C}const S=g===e.startLineNumber?e.startColumn-1:0;if(g===e.endLineNumber){const x=this.getLineContent(g).substring(S,e.endColumn-1);return r=this._findMatchesInLine(t,a,x,e.endLineNumber,S,r,o,i,n),o}if(r=this._findMatchesInLine(t,a,this.getLineContent(g).substr(S),g,S,r,o,i,n),r>=n)return o;g++,l=this.nodeAt2(g,1),m=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(g===e.endLineNumber){const C=g===e.startLineNumber?e.startColumn-1:0,S=this.getLineContent(g).substring(C,e.endColumn-1);return r=this._findMatchesInLine(t,a,S,e.endLineNumber,C,r,o,i,n),o}const _=g===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(c.node,a,g,_,d,f,t,i,n,r,o),o}_findMatchesInLine(e,t,i,n,o,r,a,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const g=e.simpleSearch,m=g.length,_=i.length;let C=-m;for(;(C=i.indexOf(g,C+m))!==-1;)if((!d||bB(d,i,_,C,m))&&(a[r++]=new By(new M(n,C+1+o,n,C+1+m+o),null),r>=c))return r;return r}let f;t.reset(0);do if(f=t.next(i),f&&(a[r++]=Jp(new M(n,f.index+1+o,n,f.index+1+f[0].length+o),f,l),r>=c))return r;while(f);return r}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Bt){const{node:n,remainder:o,nodeStartOffset:r}=this.nodeAt(e),a=n.piece,l=a.bufferIndex,c=this.positionInBuffer(n,o);if(n.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&r+a.length===e&&t.length<nh){this.appendToNode(n,t),this.computeBufferMetadata();return}if(r===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(r+n.piece.length>e){const d=[];let f=new aa(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(n,o)===10){const C={line:f.start.line+1,column:0};f=new aa(f.bufferIndex,C,f.end,this.getLineFeedCnt(f.bufferIndex,C,f.end),f.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(n,o-1)===13){const C=this.positionInBuffer(n,o-1);this.deleteNodeTail(n,C),t="\r"+t,n.piece.length===0&&d.push(n)}else this.deleteNodeTail(n,c);else this.deleteNodeTail(n,c);const g=this.createNewPieces(t);f.length>0&&this.rbInsertRight(n,f);let m=n;for(let _=0;_<g.length;_++)m=this.rbInsertRight(m,g[_]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,n)}else{const n=this.createNewPieces(t);let o=this.rbInsertLeft(null,n[0]);for(let r=1;r<n.length;r++)o=this.rbInsertRight(o,n[r])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Bt)return;const i=this.nodeAt(e),n=this.nodeAt(e+t),o=i.node,r=n.node;if(o===r){const g=this.positionInBuffer(o,i.remainder),m=this.positionInBuffer(o,n.remainder);if(i.nodeStartOffset===e){if(t===o.piece.length){const _=o.next();Pk(this,o),this.validateCRLFWithPrevNode(_),this.computeBufferMetadata();return}this.deleteNodeHead(o,m),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(i.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,g),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,g,m),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(o,i.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),o.piece.length===0&&a.push(o);const c=this.positionInBuffer(r,n.remainder);this.deleteNodeHead(r,c),r.piece.length===0&&a.push(r);const d=o.next();for(let g=d;g!==Bt&&g!==r;g=g.next())a.push(g);const f=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(f),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,a={line:r.start.line+1,column:0},l=new aa(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),r.length-1);t.piece=l,e+=`
`,uh(this,t,-1,-1),t.piece.length===0&&i.push(t)}const n=this.createNewPieces(e);let o=this.rbInsertLeft(t,n[n.length-1]);for(let r=n.length-2;r>=0;r--)o=this.rbInsertLeft(o,n[r]);this.validateCRLFWithPrevNode(o),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]);let o=n;for(let r=1;r<i.length;r++)o=this.rbInsertRight(o,i[r]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){const n=e.piece,o=e.piece.bufferIndex,r=this._buffers[o].lineStarts,l=r[n.start.line]+n.start.column+t;let c=n.start.line,d=n.end.line,f=0,g=0,m=0;for(;c<=d&&(f=c+(d-c)/2|0,m=r[f],f!==d);)if(g=r[f+1],l<m)d=f-1;else if(l>=g)c=f+1;else break;return i?(i.line=f,i.column=l-m,null):{line:f,column:l-m}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;const o=n[i.line+1],r=n[i.line]+i.column;if(o>r+1)return i.line-t.line;const a=r-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)Pk(this,e[t])}createNewPieces(e){if(e.length>nh){const d=[];for(;e.length>nh;){const g=e.charCodeAt(nh-1);let m;g===13||g>=55296&&g<=56319?(m=e.substring(0,nh-1),e=e.substring(nh-1)):(m=e.substring(0,nh),e=e.substring(nh));const _=gh(m);d.push(new aa(this._buffers.length,{line:0,column:0},{line:_.length-1,column:m.length-_[_.length-1]},_.length-1,m.length)),this._buffers.push(new sm(m,_))}const f=gh(e);return d.push(new aa(this._buffers.length,{line:0,column:0},{line:f.length-1,column:e.length-f[f.length-1]},f.length-1,e.length)),this._buffers.push(new sm(e,f)),d}let t=this._buffers[0].buffer.length;const i=gh(e,!1);let n=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},n=this._lastChangeBufferPos;for(let d=0;d<i.length;d++)i[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<i.length;d++)i[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const o=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[r],l={line:r,column:a},c=new aa(0,n,l,this.getLineFeedCnt(0,n,l),o-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,n="";const o=this._searchCache.get2(e);if(o){i=o.node;const r=this.getAccumulatedValue(i,e-o.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(o.nodeStartLineNumber+i.piece.lineFeedCnt===e)n=a.substring(l+r,l+i.piece.length);else{const c=this.getAccumulatedValue(i,e-o.nodeStartLineNumber);return a.substring(l+r,l+c-t)}}else{let r=0;const a=e;for(;i!==Bt;)if(i.left!==Bt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),d=this._buffers[i.piece.bufferIndex].buffer,f=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:r,nodeStartLineNumber:a-(e-1-i.lf_left)}),d.substring(f+l,f+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=c.substring(d+l,d+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==Bt;){const r=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n+=r.substring(l,l+a-t),n}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=r.substr(a,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==Bt;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,n=this.positionInBuffer(e,t),o=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const r=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(r!==o)return{index:r,remainder:0}}return{index:o,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,o=i.start.line+t+1;return o>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[o]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,n=i.lineFeedCnt,o=this.offsetInBuffer(i.bufferIndex,i.end),r=t,a=this.offsetInBuffer(i.bufferIndex,r),l=this.getLineFeedCnt(i.bufferIndex,i.start,r),c=l-n,d=a-o,f=i.length+d;e.piece=new aa(i.bufferIndex,i.start,r,l,f),uh(this,e,d,c)}deleteNodeHead(e,t){const i=e.piece,n=i.lineFeedCnt,o=this.offsetInBuffer(i.bufferIndex,i.start),r=t,a=this.getLineFeedCnt(i.bufferIndex,r,i.end),l=this.offsetInBuffer(i.bufferIndex,r),c=a-n,d=o-l,f=i.length+d;e.piece=new aa(i.bufferIndex,r,i.end,a,f),uh(this,e,d,c)}shrinkNode(e,t,i){const n=e.piece,o=n.start,r=n.end,a=n.length,l=n.lineFeedCnt,c=t,d=this.getLineFeedCnt(n.bufferIndex,n.start,c),f=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,o);e.piece=new aa(n.bufferIndex,n.start,c,d,f),uh(this,e,f-a,d-l);const g=new aa(n.bufferIndex,i,r,this.getLineFeedCnt(n.bufferIndex,i,r),this.offsetInBuffer(n.bufferIndex,r)-this.offsetInBuffer(n.bufferIndex,i)),m=this.rbInsertRight(e,g);this.validateCRLFWithPrevNode(m)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const o=gh(t,!1);for(let m=0;m<o.length;m++)o[m]+=n;if(i){const m=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-m}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));const r=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,f=this.getLineFeedCnt(0,e.piece.start,l),g=f-d;e.piece=new aa(e.piece.bufferIndex,e.piece.start,l,f,c),this._lastChangeBufferPos=l,uh(this,e,t.length,g)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==Bt;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){n+=t.size_left;const o={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==Bt;)if(i.left!==Bt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const o=this.getAccumulatedValue(i,e-i.lf_left-2),r=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(o+t-1,r),nodeStartOffset:n}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const o=this.getAccumulatedValue(i,e-i.lf_left-2);if(o+t-1<=i.piece.length)return{node:i,remainder:o+t-1,nodeStartOffset:n};t-=i.piece.length-o;break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==Bt;){if(i.piece.lineFeedCnt>0){const o=this.getAccumulatedValue(i,0),r=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,o),nodeStartOffset:r}}else if(i.piece.length>=t-1){const o=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:o}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Bt||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,o=i[n]+t.start.column;return n===i.length-1||i[n+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Bt||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],n=this._buffers[e.piece.bufferIndex].lineStarts;let o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:n[e.piece.end.line]-n[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new aa(e.piece.bufferIndex,e.piece.start,o,a,r),uh(this,e,-1,-1),e.piece.length===0&&i.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new aa(t.piece.bufferIndex,l,t.piece.end,d,c),uh(this,t,-1,-1),t.piece.length===0&&i.push(t);const f=this.createNewPieces(`\r
`);this.rbInsertRight(e,f[0]);for(let g=0;g<i.length;g++)Pk(this,i[g])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)Pk(this,i);else{const n=i.piece,o={line:n.start.line+1,column:0},r=n.length-1,a=this.getLineFeedCnt(n.bufferIndex,o,n.end);i.piece=new aa(n.bufferIndex,o,n.end,a,r),uh(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Bt)return t(Bt);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Bt)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,n=this.offsetInBuffer(i.bufferIndex,i.start),o=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(n,o)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,n)}rbInsertRight(e,t){const i=new Z3(t,1);if(i.left=Bt,i.right=Bt,i.parent=Bt,i.size_left=0,i.lf_left=0,this.root===Bt)this.root=i,i.color=0;else if(e.right===Bt)e.right=i,i.parent=e;else{const o=c6(e.right);o.left=i,i.parent=o}return aG(this,i),i}rbInsertLeft(e,t){const i=new Z3(t,1);if(i.left=Bt,i.right=Bt,i.parent=Bt,i.size_left=0,i.lf_left=0,this.root===Bt)this.root=i,i.color=0;else if(e.left===Bt)e.left=i,i.parent=e;else{const n=lte(e.left);n.right=i,i.parent=n}return aG(this,i),i}}class Xb extends ge{constructor(e,t,i,n,o,r,a){super(),this._onDidChangeContent=this._register(new J),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=n,this._mightContainUnusualLineTerminators=o,this._pieceTree=new mIe(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,n=this.getPositionAt(e),o=this.getPositionAt(i);return new M(n.lineNumber,n.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-i}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const n=e.startLineNumber,o=e.endLineNumber;for(let r=n;r<=o;r++){const a=this.getLineContent(r),l=r===n?e.startColumn-1:0,c=r===o?e.endColumn-1:a.length;for(let d=l;d<c;d++)Ms(a.charCodeAt(d))?(i=i+1,d=d+1):i=i+1}return i+=this._getEndOfLine(t).length*(o-n),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Lr(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=dd(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let n=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let C=0;C<e.length;C++){const S=e[C];a&&S._isTracked&&(a=!1);const x=S.range;if(S.text){let O=!0;r||(O=!bN(S.text),r=O),!n&&O&&(n=h0(S.text)),!o&&O&&(o=tJ(S.text))}let L="",k=0,T=0,A=0;if(S.text){let O;[k,T,A,O]=Gm(S.text);const I=this.getEOL();O===0||O===(I===`\r
`?2:1)?L=S.text:L=S.text.replace(/\r\n|\r|\n/g,I)}l[C]={sortIndex:C,identifier:S.identifier||null,range:x,rangeOffset:this.getOffsetAt(x.startLineNumber,x.startColumn),rangeLength:this.getValueLengthInRange(x),text:L,eolCount:k,firstLineLength:T,lastLineLength:A,forceMoveMarkers:Boolean(S.forceMoveMarkers),isAutoWhitespaceEdit:S.isAutoWhitespaceEdit||!1}}l.sort(Xb._sortOpsAscending);let c=!1;for(let C=0,S=l.length-1;C<S;C++){const x=l[C].range.getEndPosition(),L=l[C+1].range.getStartPosition();if(L.isBeforeOrEqual(x)){if(L.isBefore(x))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const d=i||t?Xb._getInverseEditRanges(l):[],f=[];if(t)for(let C=0;C<l.length;C++){const S=l[C],x=d[C];if(S.isAutoWhitespaceEdit&&S.range.isEmpty())for(let L=x.startLineNumber;L<=x.endLineNumber;L++){let k="";L===x.startLineNumber&&(k=this.getLineContent(S.range.startLineNumber),Lr(k)!==-1)||f.push({lineNumber:L,oldContent:k})}}let g=null;if(i){let C=0;g=[];for(let S=0;S<l.length;S++){const x=l[S],L=d[S],k=this.getValueInRange(x.range),T=x.rangeOffset+C;C+=x.text.length-k.length,g[S]={sortIndex:x.sortIndex,identifier:x.identifier,range:L,text:k,textChange:new lo(x.rangeOffset,k,T,x.text)}}c||g.sort((S,x)=>S.sortIndex-x.sortIndex)}this._mightContainRTL=n,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=r;const m=this._doApplyEdits(l);let _=null;if(t&&f.length>0){f.sort((C,S)=>S.lineNumber-C.lineNumber),_=[];for(let C=0,S=f.length;C<S;C++){const x=f[C].lineNumber;if(C>0&&f[C-1].lineNumber===x)continue;const L=f[C].oldContent,k=this.getLineContent(x);k.length===0||k===L||Lr(k)!==-1||_.push(x)}}return this._onDidChangeContent.fire(),new Cwe(g,m,_)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,n=e[e.length-1].range,o=new M(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn);let r=i.startLineNumber,a=i.startColumn;const l=[];for(let m=0,_=e.length;m<_;m++){const C=e[m],S=C.range;t=t||C.forceMoveMarkers,l.push(this.getValueInRange(new M(r,a,S.startLineNumber,S.startColumn))),C.text.length>0&&l.push(C.text),r=S.endLineNumber,a=S.endColumn}const c=l.join(""),[d,f,g]=Gm(c);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:c,eolCount:d,firstLineLength:f,lastLineLength:g,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(Xb._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const n=e[i],o=n.range.startLineNumber,r=n.range.startColumn,a=n.range.endLineNumber,l=n.range.endColumn;if(o===a&&r===l&&n.text.length===0)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);const c=new M(o,r,a,l);t.push({range:c,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}static _getInverseEditRanges(e){const t=[];let i=0,n=0,o=null;for(let r=0,a=e.length;r<a;r++){const l=e[r];let c,d;o?o.range.endLineNumber===l.range.startLineNumber?(c=i,d=n+(l.range.startColumn-o.range.endColumn)):(c=i+(l.range.startLineNumber-o.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let f;if(l.text.length>0){const g=l.eolCount+1;g===1?f=new M(c,d,c,d+l.firstLineLength):f=new M(c,d,c+g-1,l.lastLineLength+1)}else f=new M(c,d,c,d);i=f.endLineNumber,n=f.endColumn,t.push(f),o=l}return t}static _sortOpsAscending(e,t){const i=M.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=M.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class _Ie{constructor(e,t,i,n,o,r,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=o,this._containsRTL=r,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,r=i.length;o<r;o++){const a=i[o].buffer.replace(/\r\n|\r|\n/g,t),l=gh(a);i[o]=new sm(a,l)}const n=new Xb(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}}class ute{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&rB(e)&&(this.BOM=X1e,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=fIe(this._tmpLineStarts,e);this.chunks.push(new sm(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=h0(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=tJ(e))}finish(e=!0){return this._finish(),new _Ie(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=gh(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class vIe{constructor(e,t){this._startLineNumber=e,this._tokens=t}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class E4{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new vIe(e,[t]))}finalize(){return this._tokens}}class lG{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const i=[];for(let n=0;n<t;n++)i[n]=this._default;this._store=fN(this._store,e,i)}}class bIe{constructor(e,t){this.tokenizationSupport=e,this.initialState=t,this._lineBeginState=new lG(null),this._lineNeedsTokenization=new lG(!0),this._firstLineNeedsTokenization=0,this._lineBeginState.set(0,this.initialState)}get invalidLineStartIndex(){return this._firstLineNeedsTokenization}markMustBeTokenized(e){this._lineNeedsTokenization.set(e,!0),this._firstLineNeedsTokenization=Math.min(this._firstLineNeedsTokenization,e)}getBeginState(e){return this._lineBeginState.get(e)}setEndState(e,t,i){if(this._lineNeedsTokenization.set(t,!1),this._firstLineNeedsTokenization=t+1,t===e-1)return;const n=this._lineBeginState.get(t+1);if(n===null||!i.equals(n)){this._lineBeginState.set(t+1,i),this.markMustBeTokenized(t+1);return}let o=t+1;for(;o<e&&!this._lineNeedsTokenization.get(o);)o++;this._firstLineNeedsTokenization=o}applyEdits(e,t){this.markMustBeTokenized(e.startLineNumber-1),this._lineBeginState.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineNeedsTokenization.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineBeginState.insert(e.startLineNumber,t),this._lineNeedsTokenization.insert(e.startLineNumber,t)}}class CIe extends ge{constructor(e,t,i){super(),this._textModel=e,this._tokenizationPart=t,this._languageIdCodec=i,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=null,this._register(Fn.onDidChange(n=>{const o=this._textModel.getLanguageId();n.changedLanguages.indexOf(o)!==-1&&(this._resetTokenizationState(),this._tokenizationPart.clearTokens())})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}handleDidChangeContent(e){if(e.isFlush){this._resetTokenizationState();return}if(this._tokenizationStateStore)for(let t=0,i=e.changes.length;t<i;t++){const n=e.changes[t],[o]=Gm(n.text);this._tokenizationStateStore.applyEdits(n.range,o)}this._beginBackgroundTokenization()}handleDidChangeAttached(){this._beginBackgroundTokenization()}handleDidChangeLanguage(e){this._resetTokenizationState(),this._tokenizationPart.clearTokens()}_resetTokenizationState(){const[e,t]=wIe(this._textModel,this._tokenizationPart);e&&t?this._tokenizationStateStore=new bIe(e,t):this._tokenizationStateStore=null,this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Hy(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?vX(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._textModel.getLineCount(),t=new E4,i=qr.create(!1);do if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._tokenizationPart.setTokens(t.finalize(),this._isTokenizationComplete())}tokenizeViewport(e,t){const i=new E4;this._tokenizeViewport(i,e,t),this._tokenizationPart.setTokens(i.finalize(),this._isTokenizationComplete())}reset(){this._resetTokenizationState(),this._tokenizationPart.clearTokens()}forceTokenization(e){const t=new E4;this._updateTokensUntilLine(t,e),this._tokenizationPart.setTokens(t.finalize(),this._isTokenizationComplete())}getTokenTypeIfInsertingCharacter(e,t){if(!this._tokenizationStateStore)return 0;this.forceTokenization(e.lineNumber);const i=this._tokenizationStateStore.getBeginState(e.lineNumber-1);if(!i)return 0;const n=this._textModel.getLanguageId(),o=this._textModel.getLineContent(e.lineNumber),r=o.substring(0,e.column-1)+t+o.substring(e.column-1),a=gw(this._languageIdCodec,n,this._tokenizationStateStore.tokenizationSupport,r,!0,i),l=new Os(a.tokens,r,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,i){const n=e.lineNumber,o=e.column;if(!this._tokenizationStateStore)return null;this.forceTokenization(n);const r=this._tokenizationStateStore.getBeginState(n-1);if(!r)return null;const a=this._textModel.getLineContent(n),l=a.substring(0,o-1)+i+a.substring(o-1+t),c=this._textModel.getLanguageIdAtPosition(n,0),d=gw(this._languageIdCodec,c,this._tokenizationStateStore.tokenizationSupport,l,!0,r);return new Os(d.tokens,l,this._languageIdCodec)}isCheapToTokenize(e){if(!this._tokenizationStateStore)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationStateStore?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_isTokenizationComplete(){return this._tokenizationStateStore?this._tokenizationStateStore.invalidLineStartIndex>=this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._tokenizationStateStore||!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationStateStore)return;const i=this._textModel.getLanguageId(),n=this._textModel.getLineCount(),o=t-1;for(let r=this._tokenizationStateStore.invalidLineStartIndex;r<=o;r++){const a=this._textModel.getLineContent(r+1),l=this._tokenizationStateStore.getBeginState(r),c=gw(this._languageIdCodec,i,this._tokenizationStateStore.tokenizationSupport,a,!0,l);e.add(r+1,c.tokens),this._tokenizationStateStore.setEndState(n,r,c.endState),r=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,i){if(!this._tokenizationStateStore||i<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,i);return}let n=this._textModel.getLineFirstNonWhitespaceColumn(t);const o=[];let r=null;for(let c=t-1;n>1&&c>=1;c--){const d=this._textModel.getLineFirstNonWhitespaceColumn(c);if(d!==0&&d<n&&(o.push(this._textModel.getLineContent(c)),n=d,r=this._tokenizationStateStore.getBeginState(c-1),r))break}r||(r=this._tokenizationStateStore.initialState);const a=this._textModel.getLanguageId();let l=r;for(let c=o.length-1;c>=0;c--)l=gw(this._languageIdCodec,a,this._tokenizationStateStore.tokenizationSupport,o[c],!1,l).endState;for(let c=t;c<=i;c++){const d=this._textModel.getLineContent(c),f=gw(this._languageIdCodec,a,this._tokenizationStateStore.tokenizationSupport,d,!0,l);e.add(c,f.tokens),this._tokenizationStateStore.markMustBeTokenized(c-1),l=f.endState}}}function wIe(s,e){if(s.isTooLargeForTokenization())return[null,null];const t=Fn.get(e.getLanguageId());if(!t)return[null,null];let i;try{i=t.getInitialState()}catch(n){return Yt(n),[null,null]}return[t,i]}function gw(s,e,t,i,n,o){let r=null;if(t)try{r=t.tokenizeEncoded(i,n,o.clone())}catch(a){Yt(a)}return r||(r=DN(s.encodeLanguageId(e),o)),Os.convertToEndOffset(r.tokens,i.length),r}const ph=new Uint32Array(0).buffer;class $u{static deleteBeginning(e,t){return e===null||e===ph?e:$u.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===ph)return e;const i=Dh(e),n=i[i.length-2];return $u.delete(e,t,n)}static delete(e,t,i){if(e===null||e===ph||t===i)return e;const n=Dh(e),o=n.length>>>1;if(t===0&&n[n.length-2]===i)return ph;const r=Os.findIndexInTokensArray(n,t),a=r>0?n[r-1<<1]:0,l=n[r<<1];if(i<l){const m=i-t;for(let _=r;_<o;_++)n[_<<1]-=m;return e}let c,d;a!==t?(n[r<<1]=t,c=r+1<<1,d=t):(c=r<<1,d=a);const f=i-t;for(let m=r+1;m<o;m++){const _=n[m<<1]-f;_>d&&(n[c++]=_,n[c++]=n[(m<<1)+1],d=_)}if(c===n.length)return e;const g=new Uint32Array(c);return g.set(n.subarray(0,c),0),g.buffer}static append(e,t){if(t===ph)return e;if(e===ph)return t;if(e===null)return e;if(t===null)return null;const i=Dh(e),n=Dh(t),o=n.length>>>1,r=new Uint32Array(i.length+n.length);r.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<o;c++)r[a++]=n[c<<1]+l,r[a++]=n[(c<<1)+1];return r.buffer}static insert(e,t,i){if(e===null||e===ph)return e;const n=Dh(e),o=n.length>>>1;let r=Os.findIndexInTokensArray(n,t);r>0&&n[r-1<<1]===t&&r--;for(let a=r;a<o;a++)n[a<<1]+=i;return e}}function Dh(s){return s instanceof Uint32Array?s:new Uint32Array(s)}class rI{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,i){let n=null;if(t<this._len&&(n=this._lineTokens[t]),n!==null&&n!==ph)return new Os(Dh(n),i,this._languageIdCodec);const o=new Uint32Array(2);return o[0]=i.length,o[1]=cG(this._languageIdCodec.encodeLanguageId(e)),new Os(o,i,this._languageIdCodec)}static _massageTokens(e,t,i){const n=i?Dh(i):null;if(t===0){let o=!1;if(n&&n.length>1&&(o=fo.getLanguageId(n[1])!==e),!o)return ph}if(!n||n.length===0){const o=new Uint32Array(2);return o[0]=t,o[1]=cG(e),o.buffer}return n[n.length-2]=t,n.byteOffset===0&&n.byteLength===n.buffer.byteLength?n.buffer:n}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[];for(let n=0;n<t;n++)i[n]=null;this._lineTokens=fN(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,n,o){const r=rI._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,n);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=r,o?!rI._equals(a,r):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=Dh(e),n=Dh(t);if(i.length!==n.length)return!1;for(let o=0,r=i.length;o<r;o++)if(i[o]!==n[o])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new se(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=$u.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=$u.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let n=null;i<this._len&&(n=$u.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=$u.append(this._lineTokens[t],n),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const n=e.lineNumber-1;if(!(n>=this._len)){if(t===0){this._lineTokens[n]=$u.insert(this._lineTokens[n],e.column-1,i);return}this._lineTokens[n]=$u.deleteEnding(this._lineTokens[n],e.column-1),this._lineTokens[n]=$u.insert(this._lineTokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)}}}function cG(s){return(s<<0|0<<8|0<<11|1<<15|2<<24|1024)>>>0}class h6{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const o=t[0].getRange(),r=t[t.length-1].getRange();if(!o||!r)return e;i=e.plusRange(o).plusRange(r)}let n=null;for(let o=0,r=this._pieces.length;o<r;o++){const a=this._pieces[o];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){n=n||{index:o};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(o,1),o--,r--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){n=n||{index:o};continue}const[l,c]=a.split(i);if(l.isEmpty()){n=n||{index:o};continue}c.isEmpty()||(this._pieces.splice(o,1,l,c),o++,r++,n=n||{index:o})}return n=n||{index:this._pieces.length},t.length>0&&(this._pieces=fN(this._pieces,n.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const i=this._pieces;if(i.length===0)return t;const n=h6._findFirstPieceWithLine(i,e),o=i[n].getLineTokens(e);if(!o)return t;const r=t.getCount(),a=o.getCount();let l=0;const c=[];let d=0,f=0;const g=(m,_)=>{m!==f&&(f=m,c[d++]=m,c[d++]=_)};for(let m=0;m<a;m++){const _=o.getStartCharacter(m),C=o.getEndCharacter(m),S=o.getMetadata(m),x=((S&1?2048:0)|(S&2?4096:0)|(S&4?8192:0)|(S&8?16384:0)|(S&16?16744448:0)|(S&32?4278190080:0))>>>0,L=~x>>>0;for(;l<r&&t.getEndOffset(l)<=_;)g(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<_&&g(_,t.getMetadata(l));l<r&&t.getEndOffset(l)<C;)g(t.getEndOffset(l),t.getMetadata(l)&L|S&x),l++;if(l<r)g(C,t.getMetadata(l)&L|S&x),t.getEndOffset(l)===C&&l++;else{const k=Math.min(Math.max(0,l-1),r-1);g(C,t.getMetadata(k)&L|S&x)}}for(;l<r;)g(t.getEndOffset(l),t.getMetadata(l)),l++;return new Os(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,n=e.length-1;for(;i<n;){let o=i+Math.floor((n-i)/2);if(e[o].endLineNumber<t)i=o+1;else if(e[o].startLineNumber>t)n=o-1;else{for(;o>i&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return i}acceptEdit(e,t,i,n,o){for(const r of this._pieces)r.acceptEdit(e,t,i,n,o)}}class aI extends Uee{constructor(e,t,i,n,o){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=i,this.bracketPairsTextModelPart=n,this._languageId=o,this._onDidChangeLanguage=this._register(new J),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new J),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new J),this.onDidChangeTokens=this._onDidChangeTokens.event,this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new J),this._tokens=new rI(this._languageService.languageIdCodec),this._semanticTokens=new h6(this._languageService.languageIdCodec),this._tokenization=new CIe(i,this,this._languageService.languageIdCodec),this._languageRegistryListener=this._languageConfigurationService.onDidChange(r=>{r.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})}acceptEdit(e,t,i,n,o){this._tokens.acceptEdit(e,i,n),this._semanticTokens.acceptEdit(e,i,n,o,t.length>0?t.charCodeAt(0):0)}handleDidChangeAttached(){this._tokenization.handleDidChangeAttached()}flush(){this._tokens.flush(),this._semanticTokens.flush()}handleDidChangeContent(e){this._tokenization.handleDidChangeContent(e)}dispose(){this._languageRegistryListener.dispose(),this._tokenization.dispose(),super.dispose()}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this.bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState(),this._onBackgroundTokenizationStateChanged.fire())}setTokens(e,t=!1){if(e.length!==0){const i=[];for(let n=0,o=e.length;n<o;n++){const r=e[n];let a=0,l=0,c=!1;for(let d=r.startLineNumber;d<=r.endLineNumber;d++)c?(this._tokens.setTokens(this._languageId,d-1,this._textModel.getLineLength(d),r.getLineTokens(d),!1),l=d):this._tokens.setTokens(this._languageId,d-1,this._textModel.getLineLength(d),r.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&i.push({fromLineNumber:a,toLineNumber:l})}i.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:i})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._textModel.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this.bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this._textModel.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this._textModel.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._languageId,e-1,t);return this._semanticTokens.addSparseTokens(e,i)}getTokenTypeIfInsertingCharacter(e,t,i){const n=this._textModel.validatePosition(new se(e,t));return this._tokenization.getTokenTypeIfInsertingCharacter(n,i)}tokenizeLineWithEdit(e,t,i){const n=this._textModel.validatePosition(e);return this._tokenization.tokenizeLineWithEdit(n,t,i)}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),n=this._getLineTokens(t.lineNumber),o=n.findTokenIndexAtOffset(t.column-1),[r,a]=aI._findLanguageBoundaries(n,o),l=Ny(t.column,this.getLanguageConfiguration(n.getLanguageId(o)).getWordDefinition(),i.substring(r,a),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(o>0&&r===t.column-1){const[c,d]=aI._findLanguageBoundaries(n,o-1),f=Ny(t.column,this.getLanguageConfiguration(n.getLanguageId(o-1)).getWordDefinition(),i.substring(c,d),c);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn)return f}return null}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let n=0;for(let r=t;r>=0&&e.getLanguageId(r)===i;r--)n=e.getStartOffset(r);let o=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===i;r++)o=e.getEndOffset(r);return[n,o]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new se(e,t)),n=this.getLineTokens(i.lineNumber);return n.getLanguageId(n.findTokenIndexAtOffset(i.column-1))}setLanguageId(e){if(this._languageId===e)return;const t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this.bracketPairsTextModelPart.handleDidChangeLanguage(t),this._tokenization.handleDidChangeLanguage(t),this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}}const sR=bi("undoRedoService");class dte{constructor(e,t){this.resource=e,this.elements=t}}class D0{constructor(){this.id=D0._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}D0._ID=0;D0.None=new D0;class Ju{constructor(){this.id=Ju._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Ju._ID=0;Ju.None=new Ju;var yIe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},T4=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};function SIe(s){const e=new ute;return e.acceptChunk(s),e.finish()}function LIe(s){const e=new ute;let t;for(;typeof(t=s.read())=="string";)e.acceptChunk(t);return e.finish()}function uG(s,e){let t;return typeof s=="string"?t=SIe(s):vwe(s)?t=LIe(s):t=s,t.create(e)}let Fk=0;const xIe=999,DIe=1e4;class kIe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;do{const n=this._source.read();if(n===null)return this._eos=!0,t===0?null:e.join("");if(n.length>0&&(e[t++]=n,i+=n.length),i>=64*1024)return e.join("")}while(!0)}}const pw=()=>{throw new Error("Invalid change accessor")};let Qh=class zw extends ge{constructor(e,t,i,n=null,o,r,a){super(),this._undoRedoService=o,this._languageService=r,this._languageConfigurationService=a,this._onWillDispose=this._register(new J),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new NIe(g=>this.handleBeforeFireDecorationsChangedEvent(g))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new J),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new J),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new J),this._eventEmitter=this._register(new RIe),this._deltaDecorationCallCnt=0,Fk++,this.id="$model"+Fk,this.isForSimpleWidget=i.isForSimpleWidget,typeof n>"u"||n===null?this._associatedResource=yt.parse("inmemory://model/"+Fk):this._associatedResource=n,this._attachedEditorCount=0;const{textBuffer:l,disposable:c}=uG(e,i.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=zw.resolveOptions(this._buffer,i),this._bracketPairs=this._register(new VTe(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new hEe(this,this._languageConfigurationService)),this._decorationProvider=this._register(new HTe(this)),this._tokenizationTextModelPart=new aI(this._languageService,this._languageConfigurationService,this,this._bracketPairs,t);const d=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new M(1,1,d,this._buffer.getLineLength(d)+1),0);i.largeFileOptimizations?this._isTooLargeForTokenization=f>zw.LARGE_FILE_SIZE_THRESHOLD||d>zw.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=f>zw.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=iJ(Fk),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new dG,this._commandManager=new l6(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const i=tG(e,t.tabSize,t.insertSpaces);return new ME({tabSize:i.tabSize,indentSize:i.tabSize,insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new ME({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return nu(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new Xb([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=ge.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new Dm(e,t)))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:i}=uG(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,n,o,r,a){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:n}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:o,isRedoing:r,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokenizationTextModelPart.flush(),this._decorations=Object.create(null),this._decorationsTree=new dG,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Zb([new UEe],this._versionId,!1,!1),this._createContentChanged2(new M(1,1,o,r),0,n,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Zb([new KEe],this._versionId,!1,!1),this._createContentChanged2(new M(1,1,o,r),0,n,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,n=t.length;i<n;i++){const o=t[i],r=o.range,a=o.cachedAbsoluteStart-o.start,l=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),c=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);o.cachedAbsoluteStart=l,o.cachedAbsoluteEnd=c,o.cachedVersionId=e,o.start=l-a,o.end=c-a,Vg(o)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let n=1;n<=i;n++){const o=this._buffer.getLineLength(n);o>=DIe?t+=o:e+=o}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,i=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,n=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,o=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new ME({tabSize:t,indentSize:i,insertSpaces:n,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:o,bracketPairColorizationOptions:r});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const i=tG(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),YT(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(eJ.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueInRange(i,e);return t?this._buffer.getBOM()+n:n}createSnapshot(e=!1){return new kIe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+n:n}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,n=e.startColumn;let o=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),r=Math.floor(typeof n=="number"&&!isNaN(n)?n:1);if(o<1)o=1,r=1;else if(o>t)o=t,r=this.getLineMaxColumn(o);else if(r<=1)r=1;else{const f=this.getLineMaxColumn(o);r>=f&&(r=f)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{const f=this.getLineMaxColumn(c);d>=f&&(d=f)}return i===o&&n===r&&a===c&&l===d&&e instanceof M&&!(e instanceof et)?e:new M(o,r,c,d)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const n=this._buffer.getLineCount();if(e>n)return!1;if(t===1)return!0;const o=this.getLineMaxColumn(e);if(t>o)return!1;if(i===1){const r=this._buffer.getLineCharCode(e,t-2);if(Ms(r))return!1}return!0}_validatePosition(e,t,i){const n=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),r=this._buffer.getLineCount();if(n<1)return new se(1,1);if(n>r)return new se(r,this.getLineMaxColumn(r));if(o<=1)return new se(n,1);const a=this.getLineMaxColumn(n);if(o>=a)return new se(n,a);if(i===1){const l=this._buffer.getLineCharCode(n,o-2);if(Ms(l))return new se(n,o-1)}return new se(n,o)}validatePosition(e){return this._assertNotDisposed(),e instanceof se&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,n=e.startColumn,o=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(i,n,0)||!this._isValidPosition(o,r,0))return!1;if(t===1){const a=n>1?this._buffer.getLineCharCode(i,n-2):0,l=r>1&&r<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,r-2):0,c=Ms(a),d=Ms(l);return!c&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof M&&!(e instanceof et)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),n=this._validatePosition(e.endLineNumber,e.endColumn,0),o=i.lineNumber,r=i.column,a=n.lineNumber,l=n.column;{const c=r>1?this._buffer.getLineCharCode(o,r-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,f=Ms(c),g=Ms(d);return!f&&!g?new M(o,r,a,l):o===a&&r===l?new M(o,r-1,a,l-1):f&&g?new M(o,r-1,a,l+1):f?new M(o,r-1,a,l):new M(o,r,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new M(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,n){return this._buffer.findMatchesLineByLine(e,t,i,n)}findMatches(e,t,i,n,o,r,a=xIe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(f=>M.isIRange(f))&&(l=t.map(f=>this.validateRange(f)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((f,g)=>f.startLineNumber-g.startLineNumber||f.startColumn-g.startColumn);const c=[];c.push(l.reduce((f,g)=>M.areIntersecting(f,g)?f.plusRange(g):(c.push(f),g)));let d;if(!i&&e.indexOf(`
`)<0){const g=new Gp(e,i,n,o).parseSearchRequest();if(!g)return[];d=m=>this.findMatchesLineByLine(m,g,r,a)}else d=f=>mk.findMatches(this,new Gp(e,i,n,o),f,r,a);return c.map(d).reduce((f,g)=>f.concat(g),[])}findNextMatch(e,t,i,n,o,r){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new Gp(e,i,n,o).parseSearchRequest();if(!c)return null;const d=this.getLineCount();let f=new M(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),g=this.findMatchesLineByLine(f,c,r,1);return mk.findNextMatch(this,new Gp(e,i,n,o),a,r),g.length>0||(f=new M(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),g=this.findMatchesLineByLine(f,c,r,1),g.length>0)?g[0]:null}return mk.findNextMatch(this,new Gp(e,i,n,o),a,r)}findPreviousMatch(e,t,i,n,o,r){this._assertNotDisposed();const a=this.validatePosition(t);return mk.findPreviousMatch(this,new Gp(e,i,n,o),a,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof $P?e:new $P(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const n=t.map(r=>({range:this.validateRange(r.range),text:r.text}));let o=!0;if(e)for(let r=0,a=e.length;r<a;r++){const l=e[r];let c=!1;for(let d=0,f=n.length;d<f;d++){const g=n[d].range,m=g.startLineNumber>l.endLineNumber,_=l.startLineNumber>g.endLineNumber;if(!m&&!_){c=!0;break}}if(!c){o=!1;break}}if(o)for(let r=0,a=this._trimAutoWhitespaceLines.length;r<a;r++){const l=this._trimAutoWhitespaceLines[r],c=this.getLineMaxColumn(l);let d=!0;for(let f=0,g=n.length;f<g;f++){const m=n[f].range,_=n[f].text;if(!(l<m.startLineNumber||l>m.endLineNumber)&&!(l===m.startLineNumber&&m.startColumn===c&&m.isEmpty()&&_&&_.length>0&&_.charAt(0)===`
`)&&!(l===m.startLineNumber&&m.startColumn===1&&m.isEmpty()&&_&&_.length>0&&_.charAt(_.length-1)===`
`)){d=!1;break}}if(d){const f=new M(l,1,l,c);t.push(new $P(null,f,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i)}_applyUndo(e,t,i,n){const o=e.map(r=>{const a=this.getPositionAt(r.newPosition),l=this.getPositionAt(r.newEnd);return{range:new M(a.lineNumber,a.column,l.lineNumber,l.column),text:r.oldText}});this._applyUndoRedoEdits(o,t,!0,!1,i,n)}_applyRedo(e,t,i,n){const o=e.map(r=>{const a=this.getPositionAt(r.oldPosition),l=this.getPositionAt(r.oldEnd);return{range:new M(a.lineNumber,a.column,l.lineNumber,l.column),text:r.newText}});this._applyUndoRedoEdits(o,t,!1,!0,i,n)}_applyUndoRedoEdits(e,t,i,n,o,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=n,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(o)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),n=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),o=this._buffer.getLineCount(),r=n.changes;if(this._trimAutoWhitespaceLines=n.trimAutoWhitespaceLineNumbers,r.length!==0){for(let c=0,d=r.length;c<d;c++){const f=r[c],[g,m,_]=Gm(f.text);this._tokenizationTextModelPart.acceptEdit(f.range,f.text,g,m,_),this._decorationsTree.acceptReplace(f.rangeOffset,f.rangeLength,f.text.length,f.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=i;for(let c=0,d=r.length;c<d;c++){const f=r[c],[g]=Gm(f.text);this._onDidChangeDecorations.fire();const m=f.range.startLineNumber,_=f.range.endLineNumber,C=_-m,S=g,x=Math.min(C,S),L=S-C,k=o-l-L+m,T=k,A=k+S,O=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new se(T,1)),this.getOffsetAt(new se(A,this.getLineMaxColumn(A))),0),I=uu.fromDecorations(O),R=new Ry(I);for(let B=x;B>=0;B--){const z=m+B,q=k+B;R.takeFromEndWhile(U=>U.lineNumber>q);const te=R.takeFromEndWhile(U=>U.lineNumber===q);a.push(new Kq(z,this.getLineContent(q),te))}if(x<C){const B=m+x;a.push(new $Ee(B+1,_))}if(x<S){const B=new Ry(I),z=m+x,q=S-x,te=o-l-q+z+1,U=[],X=[];for(let le=0;le<q;le++){const be=te+le;X[le]=this.getLineContent(be),B.takeWhile(pe=>pe.lineNumber<be),U[le]=B.takeWhile(pe=>pe.lineNumber===be)}a.push(new jEe(z+1,m+S,X,U))}l+=L}this._emitContentChangedEvent(new Zb(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return n.reverseEdits===null?void 0:n.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const i=Array.from(e).map(n=>new Kq(n,this.getLineContent(n),this._getInjectedTextInLine(n)));this._onDidChangeInjectedText.fire(new jee(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(o,r)=>this._deltaDecorationsImpl(e,[],[{range:o,options:r}])[0],changeDecoration:(o,r)=>{this._changeDecorationImpl(o,r)},changeDecorationOptions:(o,r)=>{this._changeDecorationOptionsImpl(o,fG(r))},removeDecoration:o=>{this._deltaDecorationsImpl(e,[o],[])},deltaDecorations:(o,r)=>o.length===0&&r.length===0?[]:this._deltaDecorationsImpl(e,o,r)};let n=null;try{n=t(i)}catch(o){Yt(o)}return i.addDecoration=pw,i.changeDecoration=pw,i.changeDecorationOptions=pw,i.removeDecoration=pw,i.deltaDecorations=pw,n}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Yt(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const n=e?this._decorations[e]:null;if(!n)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:hG[i]}])[0]:null;if(!t)return this._decorationsTree.delete(n),delete this._decorations[n.id],null;const o=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);return this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,a,o),n.setOptions(hG[i]),this._decorationsTree.insert(n),n.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,n=t.length;i<n;i++){const o=t[i];this._decorationsTree.delete(o),delete this._decorations[o.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,n=!1){const o=this.getLineCount(),r=Math.min(o,Math.max(1,e)),a=Math.min(o,Math.max(1,t)),l=this.getLineMaxColumn(a),c=new M(r,1,a,l),d=this._getDecorationsInRange(c,i,n);return uK(d,this._decorationProvider.getDecorationsInRange(c,i,n)),d}getDecorationsInRange(e,t=0,i=!1){const n=this.validateRange(e),o=this._getDecorationsInRange(n,t,i);return uK(o,this._decorationProvider.getDecorationsInRange(n,t,i)),o}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),n=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return uu.fromDecorations(n).filter(o=>o.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}_getDecorationsInRange(e,t,i){const n=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,n,o,t,i)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const n=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(n.startLineNumber,n.startColumn),r=this._buffer.getOffsetAt(n.endLineNumber,n.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,r,n),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const n=!!(i.options.overviewRuler&&i.options.overviewRuler.color),o=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const r=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber)}if(i.options.before||t.before){const r=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}n!==o?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i){const n=this.getVersionId(),o=t.length;let r=0;const a=i.length;let l=0;const c=new Array(a);for(;r<o||l<a;){let d=null;if(r<o){do d=this._decorations[t[r++]];while(!d&&r<o);if(d){if(d.options.after){const f=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber)}if(d.options.before){const f=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber)}this._decorationsTree.delete(d),this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(l<a){if(!d){const S=++this._lastDecorationId,x=`${this._instanceId};${S}`;d=new rte(x,0,0),this._decorations[x]=d}const f=i[l],g=this._validateRangeRelaxedNoAllocations(f.range),m=fG(f.options),_=this._buffer.getOffsetAt(g.startLineNumber,g.startColumn),C=this._buffer.getOffsetAt(g.endLineNumber,g.endColumn);d.ownerId=e,d.reset(n,_,C,g),d.setOptions(m),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(m),this._decorationsTree.insert(d),c[l]=d.id,l++}else d&&delete this._decorations[d.id]}return c}getLanguageId(){return this.tokenization.getLanguageId()}setMode(e){this.tokenization.setLanguageId(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return EIe(this.getLineContent(e))+1}};Qh.MODEL_SYNC_LIMIT=50*1024*1024;Qh.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Qh.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Qh.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Mo.tabSize,indentSize:Mo.indentSize,insertSpaces:Mo.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Mo.trimAutoWhitespace,largeFileOptimizations:Mo.largeFileOptimizations,bracketPairColorizationOptions:Mo.bracketPairColorizationOptions};Qh=yIe([T4(4,sR),T4(5,Vn),T4(6,os)],Qh);function EIe(s){let e=0;for(const t of s)if(t===" "||t==="	")e++;else break;return e}function I4(s){return!!(s.options.overviewRuler&&s.options.overviewRuler.color)}function N4(s){return!!s.options.after||!!s.options.before}class dG{constructor(){this._decorationsTree0=new x4,this._decorationsTree1=new x4,this._injectedTextDecorationsTree=new x4}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,n,o){const r=e.getVersionId(),a=this._intervalSearch(t,i,n,o,r);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,i,n,o){const r=this._decorationsTree0.intervalSearch(e,t,i,n,o),a=this._decorationsTree1.intervalSearch(e,t,i,n,o),l=this._injectedTextDecorationsTree.intervalSearch(e,t,i,n,o);return r.concat(a).concat(l)}getInjectedTextInInterval(e,t,i,n){const o=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,i,n,!1,o);return this._ensureNodesHaveRanges(e,r).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const i=e.getVersionId(),n=this._injectedTextDecorationsTree.search(t,!1,i);return this._ensureNodesHaveRanges(e,n).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,i,n){const o=e.getVersionId(),r=this._search(t,i,n,o);return this._ensureNodesHaveRanges(e,r)}_search(e,t,i,n){if(i)return this._decorationsTree1.search(e,t,n);{const o=this._decorationsTree0.search(e,t,n),r=this._decorationsTree1.search(e,t,n),a=this._injectedTextDecorationsTree.search(e,t,n);return o.concat(r).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),n=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(n)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){N4(e)?this._injectedTextDecorationsTree.insert(e):I4(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){N4(e)?this._injectedTextDecorationsTree.delete(e):I4(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){N4(e)?this._injectedTextDecorationsTree.resolveNode(e,t):I4(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,n){this._decorationsTree0.acceptReplace(e,t,i,n),this._decorationsTree1.acceptReplace(e,t,i,n),this._injectedTextDecorationsTree.acceptReplace(e,t,i,n)}}function sh(s){return s.replace(/[^a-z0-9\-_]/gi," ")}class hte{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class TIe extends hte{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:El.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class IIe extends hte{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?oe.fromHex(e):t.getColor(e.id)}}class Ym{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}static from(e){return e instanceof Ym?e:new Ym(e)}}class Gt{constructor(e){var t,i;this.description=e.description,this.blockClassName=e.blockClassName?sh(e.blockClassName):null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?sh(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new TIe(e.overviewRuler):null,this.minimap=e.minimap?new IIe(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?sh(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?sh(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?sh(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?sh(e.marginClassName):null,this.inlineClassName=e.inlineClassName?sh(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?sh(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?sh(e.afterContentClassName):null,this.after=e.after?Ym.from(e.after):null,this.before=e.before?Ym.from(e.before):null,this.hideInCommentTokens=(t=e.hideInCommentTokens)!==null&&t!==void 0?t:!1,this.hideInStringTokens=(i=e.hideInStringTokens)!==null&&i!==void 0?i:!1}static register(e){return new Gt(e)}static createDynamic(e){return new Gt(e)}}Gt.EMPTY=Gt.register({description:"empty"});const hG=[Gt.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Gt.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Gt.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Gt.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function fG(s){return s instanceof Gt?s:Gt.createDynamic(s)}class NIe extends ge{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new J),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class RIe extends ge{constructor(){super(),this._fastEmitter=this._register(new J),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new J),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var AIe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const gG={getInitialState:()=>p0,tokenizeEncoded:(s,e,t)=>DN(0,t)};function MIe(s,e,t){return AIe(this,void 0,void 0,function*(){if(!t)return pG(e,s.languageIdCodec,gG);const i=yield Fn.getOrCreate(t);return pG(e,s.languageIdCodec,i||gG)})}function OIe(s,e,t,i,n,o,r){let a="<div>",l=i,c=0,d=!0;for(let f=0,g=e.getCount();f<g;f++){const m=e.getEndOffset(f);if(m<=i)continue;let _="";for(;l<m&&l<n;l++){const C=s.charCodeAt(l);switch(C){case 9:{let S=o-(l+c)%o;for(c+=S-1;S>0;)r&&d?(_+="&#160;",d=!1):(_+=" ",d=!0),S--;break}case 60:_+="&lt;",d=!1;break;case 62:_+="&gt;",d=!1;break;case 38:_+="&amp;",d=!1;break;case 0:_+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:_+="\uFFFD",d=!1;break;case 13:_+="&#8203",d=!1;break;case 32:r&&d?(_+="&#160;",d=!1):(_+=" ",d=!0);break;default:_+=String.fromCharCode(C),d=!1}}if(a+=`<span style="${e.getInlineStyle(f,t)}">${_}</span>`,m>n||l>=n)break}return a+="</div>",a}function pG(s,e,t){let i='<div class="monaco-tokenized-source">';const n=md(s);let o=t.getInitialState();for(let r=0,a=n.length;r<a;r++){const l=n[r];r>0&&(i+="<br/>");const c=t.tokenizeEncoded(l,!0,o);Os.convertToEndOffset(c.tokens,l.length);const f=new Os(c.tokens,l,e).inflate();let g=0;for(let m=0,_=f.getCount();m<_;m++){const C=f.getClassName(m),S=f.getEndOffset(m);i+=`<span class="${C}">${J8(l.substring(g,S))}</span>`,g=S}o=c.endState}return i+="</div>",i}class PIe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,n=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,n)}}class FIe{constructor(e,t,i,n,o){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=n,this.minWidth=o,this.prefixSum=0}}class uS{constructor(e,t,i,n){this._instanceId=iJ(++uS.INSTANCE_COUNT),this._pendingChanges=new PIe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=n}static findInsertionIndex(e,t,i){let n=0,o=e.length;for(;n<o;){const r=n+o>>>1;t===e[r].afterLineNumber?i<e[r].ordinal?o=r:n=r+1:t<e[r].afterLineNumber?o=r:n=r+1}return n}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(n,o,r,a)=>{t=!0,n=n|0,o=o|0,r=r|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new FIe(l,n,o,r,a)),l},changeOneWhitespace:(n,o,r)=>{t=!0,o=o|0,r=r|0,this._pendingChanges.change({id:n,newAfterLineNumber:o,newHeight:r})},removeWhitespace:n=>{t=!0,this._pendingChanges.remove({id:n})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const n=new Set;for(const l of i)n.add(l.id);const o=new Map;for(const l of t)o.set(l.id,l);const r=l=>{const c=[];for(const d of l)if(!n.has(d.id)){if(o.has(d.id)){const f=o.get(d.id);d.afterLineNumber=f.newAfterLineNumber,d.height=f.newHeight}c.push(d)}return c},a=r(this._arr).concat(r(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=uS.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,n=t.length;i<n;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const n=this._findWhitespaceIndex(e);if(n!==-1&&(this._arr[n].height!==i&&(this._arr[n].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)),this._arr[n].afterLineNumber!==t)){const o=this._arr[n];this._removeWhitespace(n),o.afterLineNumber=t,this._insertWhitespace(o)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){const o=this._arr[i].afterLineNumber;e<=o&&o<=t?this._arr[i].afterLineNumber=e-1:o>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){const o=this._arr[i].afterLineNumber;e<=o&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,n=t.length-1;for(;i<=n;){const r=(n-i|0)/2|0,a=i+r|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else n=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let i;e>1?i=this._lineHeight*(e-1):i=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+n+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const i=this._lineHeight*e,n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,i=this._lineHeight;let n=1,o=t;for(;n<o;){const r=(n+o)/2|0,a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+i)n=r+1;else{if(e>=a)return r;o=r}}return n>t?t:n}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this._lineHeight,n=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(n)|0;let r=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(n)|0;const l=this.getWhitespacesCount()|0;let c,d;a===-1?(a=l,d=r+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let f=o,g=f;const m=5e5;let _=0;o>=m&&(_=Math.floor(o/m)*m,_=Math.floor(_/i)*i,g-=_);const C=[],S=e+(t-e)/2;let x=-1;for(let A=n;A<=r;A++){if(x===-1){const O=f,I=f+i;(O<=S&&S<I||O>S)&&(x=A)}for(f+=i,C[A-n]=g,g+=i;d===A;)g+=c,f+=c,a++,a>=l?d=r+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(f>=t){r=A;break}}x===-1&&(x=r);const L=this.getVerticalOffsetForLineNumber(r)|0;let k=n,T=r;return k<T&&o<e&&k++,k<T&&L+i>t&&T--,{bigNumbersDelta:_,startLineNumber:n,endLineNumber:r,relativeVerticalOffset:C,centeredLineNumber:x,completelyVisibleStartLineNumber:k,completelyVisibleEndLineNumber:T}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeight*t:i=0;let n;return e>0?n=this.getWhitespacesAccumulatedHeight(e-1):n=0,i+n+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const n=this.getVerticalOffsetForWhitespaceIndex(i),o=this.getHeightForWhitespaceIndex(i);if(e>=n+o)return-1;for(;t<i;){const r=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(e>=a+l)t=r+1;else{if(e>=a)return r;i=r}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const n=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:r,verticalOffset:i,height:n}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),n=this.getWhitespacesCount()-1;if(i<0)return[];const o=[];for(let r=i;r<=n;r++){const a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(a>=t)break;o.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:a,height:l})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}uS.INSTANCE_COUNT=0;const BIe=125;class Uw{constructor(e,t,i,n){e=e|0,t=t|0,i=i|0,n=n|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),n<0&&(n=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=n,this.scrollHeight=Math.max(i,n)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class VIe extends ge{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new J),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Uw(0,0,0,0),this._scrollable=this._register(new _L({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,n=t.contentHeight!==e.contentHeight;(i||n)&&this._onDidContentSizeChange.fire(new e6(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class WIe extends ge{constructor(e,t,i){super(),this._configuration=e;const n=this._configuration.options,o=n.get(133),r=n.get(77);this._linesLayout=new uS(t,n.get(61),r.top,r.bottom),this._scrollable=this._register(new VIe(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Uw(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(105)?BIe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(61)&&this._linesLayout.setLineHeight(t.get(61)),e.hasChanged(77)){const i=t.get(77);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(133)){const i=t.get(133),n=i.contentWidth,o=i.height,r=this._scrollable.getScrollDimensions(),a=r.contentWidth;this._scrollable.setScrollDimensions(new Uw(n,r.contentWidth,o,this._getContentHeight(n,o,a)))}else this._updateHeight();e.hasChanged(105)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const n=this._configuration.options.get(94);return n.horizontal===2||e>=t?0:n.horizontalScrollbarSize}_getContentHeight(e,t,i){const n=this._configuration.options;let o=this._linesLayout.getLinesTotalHeight();return n.get(96)?o+=Math.max(0,t-n.get(61)-n.get(77).bottom):o+=this._getHorizontalScrollbarHeight(e,i),o}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,n=e.contentWidth;this._scrollable.setScrollDimensions(new Uw(t,e.contentWidth,i,this._getContentHeight(t,i,n)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new ZK(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new ZK(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,i=t.get(134),n=t.get(46),o=t.get(133);if(i.isViewportWrapping){const r=t.get(67);return e>o.contentWidth+n.typicalHalfwidthCharacterWidth&&r.enabled&&r.side==="right"?e+o.verticalScrollbarWidth:e}else{const r=t.get(95)*n.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+r+o.verticalScrollbarWidth,a)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Uw(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),n=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-n,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class HIe{constructor(e,t,i,n,o){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=n,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const n=e.range,o=e.options;let r;if(o.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new se(n.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new se(n.endLineNumber,this.model.getLineMaxColumn(n.endLineNumber)),1);r=new M(a.lineNumber,a.column,l.lineNumber,l.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(n,1);i=new IJ(r,o),this._decorationsCache[t]=i}return i}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e){const t=new M(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(t).inlineDecorations[0]}_getDecorationsInRange(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,CT(this.configuration.options)),i=e.startLineNumber,n=e.endLineNumber,o=[];let r=0;const a=[];for(let l=i;l<=n;l++)a[l-i]=[];for(let l=0,c=t.length;l<c;l++){const d=t[l],f=d.options;if(!f6(this.model,d))continue;const g=this._getOrCreateViewModelDecoration(d),m=g.range;if(o[r++]=g,f.inlineClassName){const _=new oy(m,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),C=Math.max(i,m.startLineNumber),S=Math.min(n,m.endLineNumber);for(let x=C;x<=S;x++)a[x-i].push(_)}if(f.beforeContentClassName&&i<=m.startLineNumber&&m.startLineNumber<=n){const _=new oy(new M(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),f.beforeContentClassName,1);a[m.startLineNumber-i].push(_)}if(f.afterContentClassName&&i<=m.endLineNumber&&m.endLineNumber<=n){const _=new oy(new M(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),f.afterContentClassName,2);a[m.endLineNumber-i].push(_)}}return{decorations:o,inlineDecorations:a}}}function f6(s,e){return!(e.options.hideInCommentTokens&&g6(s,e)||e.options.hideInStringTokens&&p6(s,e))}function g6(s,e){return fte(s,e.range,t=>t===1)}function p6(s,e){return fte(s,e.range,t=>t===2)}function fte(s,e,t){for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const n=s.tokenization.getLineTokens(i),o=i===e.startLineNumber,r=i===e.endLineNumber;let a=o?n.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<n.getCount()&&!(r&&n.getStartOffset(a)>e.endColumn-1);){if(!t(n.getStandardTokenType(a)))return!1;a++}}return!0}function R4(s,e){return s===null?e?lI.INSTANCE:cI.INSTANCE:new zIe(s,e)}class zIe{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const n=i>0?this._projectionData.breakOffsets[i-1]:0,o=this._projectionData.breakOffsets[i];let r;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,d)=>new uu(0,0,c+1,this._projectionData.injectionOptions[d],0));r=uu.applyInjectedText(e.getLineContent(t),a).substring(n,o)}else r=e.getValueInRange({startLineNumber:t,startColumn:n+1,endLineNumber:t,endColumn:o+1});return i>0&&(r=mG(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const n=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],n),n[0]}getViewLinesData(e,t,i,n,o,r,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions;let f=null;if(c){f=[];let m=0,_=0;for(let C=0;C<l.getOutputLineCount();C++){const S=new Array;f[C]=S;const x=C>0?l.breakOffsets[C-1]:0,L=l.breakOffsets[C];for(;_<c.length;){const k=d[_].content.length,T=c[_]+m,A=T+k;if(T>L)break;if(x<A){const O=d[_];if(O.inlineClassName){const I=C>0?l.wrappedTextIndentLength:0,R=I+Math.max(T-x,0),B=I+Math.min(A-x,L);R!==B&&S.push(new mSe(R,B,O.inlineClassName,O.inlineClassNameAffectsLetterSpacing))}}if(A<=L)m+=k,_++;else break}}}let g;c?g=e.tokenization.getLineTokens(t).withInserted(c.map((m,_)=>({offset:m,text:d[_].content,tokenMetadata:Os.defaultTokenMetadata}))):g=e.tokenization.getLineTokens(t);for(let m=i;m<i+n;m++){const _=o+m-i;if(!r[_]){a[_]=null;continue}a[_]=this._getViewLineData(g,f?f[m]:null,m)}}_getViewLineData(e,t,i){this._assertVisible();const n=this._projectionData,o=i>0?n.wrappedTextIndentLength:0,r=i>0?n.breakOffsets[i-1]:0,a=n.breakOffsets[i],l=e.sliceAndInflate(r,a,o);let c=l.getLineContent();i>0&&(c=mG(n.wrappedTextIndentLength)+c);const d=this._projectionData.getMinOutputOffset(i)+1,f=c.length+1,g=i+1<this.getViewLineCount(),m=i===0?0:n.breakOffsetsVisibleColumn[i-1];return new LB(c,g,d,f,m,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){const n=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(n)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class lI{constructor(){}isVisible(){return!0}setVisible(e){return e?this:cI.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const n=e.tokenization.getLineTokens(t),o=n.getLineContent();return new LB(o,!1,1,o.length+1,0,n.inflate(),null)}getViewLinesData(e,t,i,n,o,r,a){if(!r[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new se(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}}lI.INSTANCE=new lI;class cI{constructor(){}isVisible(){return!1}setVisible(e){return e?lI.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,n,o,r,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}cI.INSTANCE=new cI;const A4=[""];function mG(s){if(s>=A4.length)for(let e=1;e<=s;e++)A4[e]=UIe(e);return A4[s]}function UIe(s){return new Array(s+1).join(" ")}class $Ie{constructor(e,t,i,n,o,r,a,l,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=n,this.fontInfo=o,this.tabSize=r,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new KIe(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),n=this.model.getInjectedTextDecorations(this._editorId),o=i.length,r=this.createLineBreaksComputer(),a=new Ry(uu.fromDecorations(n));for(let C=0;C<o;C++){const S=a.takeWhile(x=>x.lineNumber===C+1);r.addRequest(i[C],S,t?t[C]:null)}const l=r.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(C=>this.model.getDecorationRange(C)).sort(M.compareRangesUsingStarts);let f=1,g=0,m=-1,_=m+1<d.length?g+1:o+2;for(let C=0;C<o;C++){const S=C+1;S===_&&(m++,f=d[m].startLineNumber,g=d[m].endLineNumber,_=m+1<d.length?g+1:o+2);const x=S>=f&&S<=g,L=R4(l[C],!x);c[C]=L.getViewLineCount(),this.modelLineProjections[C]=L}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new Aye(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(g=>this.model.validateRange(g)),i=jIe(t),n=this.hiddenAreasDecorationIds.map(g=>this.model.getDecorationRange(g)).sort(M.compareRangesUsingStarts);if(i.length===n.length){let g=!1;for(let m=0;m<i.length;m++)if(!i[m].equalsRange(n[m])){g=!0;break}if(!g)return!1}const o=i.map(g=>({range:g,options:Gt.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,o);const r=i;let a=1,l=0,c=-1,d=c+1<r.length?l+1:this.modelLineProjections.length+2,f=!1;for(let g=0;g<this.modelLineProjections.length;g++){const m=g+1;m===d&&(c++,a=r[c].startLineNumber,l=r[c].endLineNumber,d=c+1<r.length?l+1:this.modelLineProjections.length+2);let _=!1;if(m>=a&&m<=l?this.modelLineProjections[g].isVisible()&&(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!1),_=!0):(f=!0,this.modelLineProjections[g].isVisible()||(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!0),_=!0)),_){const C=this.modelLineProjections[g].getViewLineCount();this.projectedModelLineLineCounts.setValue(g,C)}}return f||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,n){const o=this.fontInfo.equals(e),r=this.wrappingStrategy===t,a=this.wrappingColumn===i,l=this.wrappingIndent===n;if(o&&r&&a&&l)return!1;const c=o&&r&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=n;let d=null;if(c){d=[];for(let f=0,g=this.modelLineProjections.length;f<g;f++)d[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,d),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const n=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new z3(n,o)}onModelLinesInserted(e,t,i,n){if(!e||e<=this._validModelVersionId)return null;const o=t>2&&!this.modelLineProjections[t-2].isVisible(),r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let d=0,f=n.length;d<f;d++){const g=R4(n[d],!o);l.push(g);const m=g.getViewLineCount();a+=m,c[d]=m}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new U3(r,r+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const n=t-1,o=this.modelLineProjections[n].getViewLineCount(),r=this.modelLineProjections[n].isVisible(),a=R4(i,r);this.modelLineProjections[n]=a;const l=this.modelLineProjections[n].getViewLineCount();let c=!1,d=0,f=-1,g=0,m=-1,_=0,C=-1;o>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=d+l-1,_=f+1,C=_+(o-l)-1,c=!0):o<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=d+o-1,g=f+1,m=g+(l-o)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=d+l-1),this.projectedModelLineLineCounts.setValue(n,l);const S=d<=f?new Kee(d,f-d+1):null,x=g<=m?new U3(g,m):null,L=_<=C?new z3(_,C):null;return[c,S,x,L]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.guides.getActiveIndentGuide(n.lineNumber,o.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,n=t.remainder;return new _G(i+1,n)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new se(e.modelLineNumber,n)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new se(e.modelLineNumber,n)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),n=this.getViewLineInfo(t),o=new Array;let r=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=n.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const d=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,f=l===n.modelLineNumber?n.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let g=d;g<f;g++)a.push(new _G(l,g))}if(!c.isVisible()&&r){const d=new se(l-1,this.model.getLineMaxColumn(l-1)+1),f=M.fromPositions(r,d);o.push(new vG(f,a)),a=[],r=null}else c.isVisible()&&!r&&(r=new se(l,1))}if(r){const l=M.fromPositions(r,this.getModelEndPositionOfViewLine(n));o.push(new vG(l,a))}return o}getViewLinesBracketGuides(e,t,i,n){const o=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,r=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,o,n);for(const d of a.viewLines){const g=c[d.modelLineNumber-l].map(m=>{if(m.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,m.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||m.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,m.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!m.horizontalLine)return m;let _=-1;if(m.column!==-1){const x=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,m.column);if(x.lineNumber===d.modelLineWrappedLineIdx)_=x.column;else if(x.lineNumber<d.modelLineWrappedLineIdx)_=this.getMinColumnOfViewLine(d);else if(x.lineNumber>d.modelLineWrappedLineIdx)return}const C=this.convertModelPositionToViewPosition(d.modelLineNumber,m.horizontalLine.endColumn),S=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,m.horizontalLine.endColumn);return S.lineNumber===d.modelLineWrappedLineIdx?new _m(m.visibleColumn,_,m.className,new ly(m.horizontalLine.top,C.column),-1,-1):S.lineNumber<d.modelLineWrappedLineIdx||m.visibleColumn!==-1?void 0:new _m(m.visibleColumn,_,m.className,new ly(m.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});r.push(g.filter(m=>!!m))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),n=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let o=[];const r=[],a=[],l=i.lineNumber-1,c=n.lineNumber-1;let d=null;for(let _=l;_<=c;_++){const C=this.modelLineProjections[_];if(C.isVisible()){const S=C.getViewLineNumberOfModelPosition(0,_===l?i.column:1),x=C.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(_+1)),L=x-S+1;let k=0;L>1&&C.getViewLineMinColumn(this.model,_+1,x)===1&&(k=S===0?1:2),r.push(L),a.push(k),d===null&&(d=new se(_+1,0))}else d!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,_)),d=null)}d!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,n.lineNumber)),d=null);const f=t-e+1,g=new Array(f);let m=0;for(let _=0,C=o.length;_<C;_++){let S=o[_];const x=Math.min(f-m,r[_]),L=a[_];let k;L===2?k=0:L===1?k=1:k=x;for(let T=0;T<x;T++)T===k&&(S=0),g[m++]=S}return g}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.projectedModelLineLineCounts.getIndexOf(e-1);let o=e;const r=n.index,a=n.remainder,l=[];for(let c=r,d=this.model.getLineCount();c<d;c++){const f=this.modelLineProjections[c];if(!f.isVisible())continue;const g=c===r?a:0;let m=f.getViewLineCount()-g,_=!1;if(o+m>t&&(_=!0,m=t-o+1),f.getViewLinesData(this.model,c+1,g,m,o-e,i,l),o+=m,_)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const n=this.projectedModelLineLineCounts.getIndexOf(e-1),o=n.index,r=n.remainder,a=this.modelLineProjections[o],l=a.getViewLineMinColumn(this.model,o+1,r),c=a.getViewLineMaxColumn(this.model,o+1,r);t<l&&(t=l),t>c&&(t=c);const d=a.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new se(o+1,d)).equals(i)?new se(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),n=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new M(i.lineNumber,i.column,n.lineNumber,n.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),n=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new se(i.modelLineNumber,n))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new M(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2){const n=this.model.validatePosition(new se(e,t)),o=n.lineNumber,r=n.column;let a=o-1,l=!1;for(;a>0&&!this.modelLineProjections[a].isVisible();)a--,l=!0;if(a===0&&!this.modelLineProjections[a].isVisible())return new se(1,1);const c=1+this.projectedModelLineLineCounts.getPrefixSum(a);let d;return l?d=this.modelLineProjections[a].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(a+1),i):d=this.modelLineProjections[o-1].getViewPositionOfModelPosition(c,r,i),d}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return M.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new M(i.lineNumber,i.column,n.lineNumber,n.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const o=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(o,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;const n=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(n,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i){const n=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),o=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(o.lineNumber-n.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new M(n.lineNumber,1,o.lineNumber,o.column),t,i);let r=[];const a=n.lineNumber-1,l=o.lineNumber-1;let c=null;for(let m=a;m<=l;m++)if(this.modelLineProjections[m].isVisible())c===null&&(c=new se(m+1,m===a?n.column:1));else if(c!==null){const C=this.model.getLineMaxColumn(m);r=r.concat(this.model.getDecorationsInRange(new M(c.lineNumber,c.column,m,C),t,i)),c=null}c!==null&&(r=r.concat(this.model.getDecorationsInRange(new M(c.lineNumber,c.column,o.lineNumber,o.column),t,i)),c=null),r.sort((m,_)=>{const C=M.compareRangesUsingStarts(m.range,_.range);return C===0?m.id<_.id?-1:m.id>_.id?1:0:C});const d=[];let f=0,g=null;for(const m of r){const _=m.id;g!==_&&(g=_,d[f++]=m)}return d}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function jIe(s){if(s.length===0)return[];const e=s.slice();e.sort(M.compareRangesUsingStarts);const t=[];let i=e[0].startLineNumber,n=e[0].endLineNumber;for(let o=1,r=e.length;o<r;o++){const a=e[o];a.startLineNumber>n+1?(t.push(new M(i,1,n,1)),i=a.startLineNumber,n=a.endLineNumber):a.endLineNumber>n&&(n=a.endLineNumber)}return t.push(new M(i,1,n,1)),t}class _G{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class vG{constructor(e,t){this.modelRange=e,this.viewLines=t}}class KIe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class qIe{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new GIe(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,n){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,n)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new z3(t,i)}onModelLinesInserted(e,t,i,n){return new U3(t,i)}onModelLineChanged(e,t,i){return[!1,new Kee(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,n=new Array(i);for(let o=0;o<i;o++)n[o]=0;return n}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new LB(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const n=this.model.getLineCount();e=Math.min(Math.max(1,e),n),t=Math.min(Math.max(1,t),n);const o=[];for(let r=e;r<=t;r++){const a=r-e;o[a]=i[a]?this.getViewLineData(r):null}return o}getDecorationsInRange(e,t,i){return this.model.getDecorationsInRange(e,t,i)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class GIe{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}class YIe extends ge{constructor(e,t,i,n,o,r,a,l){if(super(),this.languageConfigurationService=a,this._themeService=l,this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new sTe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Hv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._tokenizeViewportSoon=this._register(new Xi(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new Xi(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=m6.create(this.model),this.model.isTooLargeForTokenization())this._lines=new qIe(this.model);else{const c=this._configuration.options,d=c.get(46),f=c.get(127),g=c.get(134),m=c.get(126);this._lines=new $Ie(this._editorId,this.model,n,o,d,this.model.getOptions().tabSize,f,g.wrappingColumn,m)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new x0(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new WIe(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(c=>{c.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),c.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new JEe(c)),this._eventDispatcher.emitOutgoingEvent(new i6(c.oldScrollWidth,c.oldScrollLeft,c.oldScrollHeight,c.oldScrollTop,c.scrollWidth,c.scrollLeft,c.scrollHeight,c.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(c=>{this._eventDispatcher.emitOutgoingEvent(c)})),this._decorations=new HIe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(c=>{try{const d=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(d,c)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(bL.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new iTe)})),this._register(this._themeService.onDidColorThemeChange(c=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new eTe(c))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new M(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),i=this._toModelVisibleRanges(t);for(const n of i)this.model.tokenization.tokenizeViewport(n.startLineNumber,n.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new QEe(e)),this._eventDispatcher.emitOutgoingEvent(new t6(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new qEe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new GEe)}_onConfigurationChanged(e,t){let i=null;if(this._viewportStart.isValid){const d=new se(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber));i=this.coordinatesConverter.convertViewPositionToModelPosition(d)}let n=!1;const o=this._configuration.options,r=o.get(46),a=o.get(127),l=o.get(134),c=o.get(126);if(this._lines.setWrappingSettings(r,a,l.wrappingColumn,c)&&(e.emitViewEvent(new Nk),e.emitViewEvent(new Rk),e.emitViewEvent(new zv(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(n=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(83)&&(this._decorations.reset(),e.emitViewEvent(new zv(null))),e.emitViewEvent(new YEe(t)),this.viewLayout.onConfigurationChanged(t),n&&i){const d=this.coordinatesConverter.convertModelPositionToViewPosition(i),f=this.viewLayout.getVerticalOffsetForLineNumber(d.lineNumber);this.viewLayout.setScrollPosition({scrollTop:f+this._viewportStart.startLineDelta},1)}Hv.shouldRecreate(t)&&(this.cursorConfig=new Hv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const i=this._eventDispatcher.beginEmitViewEvents();let n=!1,o=!1;const r=e instanceof Dm?e.rawContentChangedEvent.changes:e.changes,a=e instanceof Dm?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const f of r)switch(f.changeType){case 4:{for(let g=0;g<f.detail.length;g++){const m=f.detail[g];let _=f.injectedTexts[g];_&&(_=_.filter(C=>!C.ownerId||C.ownerId===this._editorId)),l.addRequest(m,_,null)}break}case 2:{let g=null;f.injectedText&&(g=f.injectedText.filter(m=>!m.ownerId||m.ownerId===this._editorId)),l.addRequest(f.detail,g,null);break}}const c=l.finalize(),d=new Ry(c);for(const f of r)switch(f.changeType){case 1:{this._lines.onModelFlushed(),i.emitViewEvent(new Nk),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const g=this._lines.onModelLinesDeleted(a,f.fromLineNumber,f.toLineNumber);g!==null&&(i.emitViewEvent(g),this.viewLayout.onLinesDeleted(g.fromLineNumber,g.toLineNumber)),n=!0;break}case 4:{const g=d.takeCount(f.detail.length),m=this._lines.onModelLinesInserted(a,f.fromLineNumber,f.toLineNumber,g);m!==null&&(i.emitViewEvent(m),this.viewLayout.onLinesInserted(m.fromLineNumber,m.toLineNumber)),n=!0;break}case 2:{const g=d.dequeue(),[m,_,C,S]=this._lines.onModelLineChanged(a,f.lineNumber,g);o=m,_&&i.emitViewEvent(_),C&&(i.emitViewEvent(C),this.viewLayout.onLinesInserted(C.fromLineNumber,C.toLineNumber)),S&&(i.emitViewEvent(S),this.viewLayout.onLinesDeleted(S.fromLineNumber,S.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!n&&o&&(i.emitViewEvent(new Rk),i.emitViewEvent(new zv(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const i=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(i){const n=this.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),o=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:o+this._viewportStart.startLineDelta},1)}}try{const i=this._eventDispatcher.beginEmitViewEvents();e instanceof Dm&&i.emitOutgoingEvent(new hTe(e.contentChangedEvent)),this._cursor.onModelContentChanged(i,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let i=0,n=e.ranges.length;i<n;i++){const o=e.ranges[i],r=this.coordinatesConverter.convertModelPositionToViewPosition(new se(o.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new se(o.toLineNumber,this.model.getLineMaxColumn(o.toLineNumber))).lineNumber;t[i]={fromLineNumber:r,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new tTe(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitOutgoingEvent(new gTe(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new XEe),this.cursorConfig=new Hv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new dTe(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new Hv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new uTe(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new Nk),t.emitViewEvent(new Rk),t.emitViewEvent(new zv(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Hv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new fTe(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new zv(e)),this._eventDispatcher.emitOutgoingEvent(new cTe(e))}))}setHiddenAreas(e){let t=!1;try{const i=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(i.emitViewEvent(new Nk),i.emitViewEvent(new Rk),i.emitViewEvent(new zv(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new aTe)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(133),t=this._configuration.options.get(61),i=Math.max(20,Math.round(e.height/t)),n=this.viewLayout.getLinesViewportData(),o=Math.max(1,n.completelyVisibleStartLineNumber-i),r=Math.min(this.getLineCount(),n.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new M(o,this.getLineMinColumn(o),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];const n=[];let o=0,r=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let d=0,f=i.length;d<f;d++){const g=i[d].startLineNumber,m=i[d].endLineNumber;m<r||g>l||(r<g&&(n[o++]=new M(r,a,g-1,this.model.getLineMaxColumn(g-1))),r=m+1,a=1)}return(r<l||r===l&&a<c)&&(n[o++]=new M(r,a,l,c)),n}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new M(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,n=t.completelyVisibleEndLineNumber;return new M(i,this.getLineMinColumn(i),n,this.getLineMaxColumn(n))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),n=this.coordinatesConverter.convertViewPositionToModelPosition(new se(i,this.getLineMinColumn(i))),o=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:n,firstPositionDeltaTop:o}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),n=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:n}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,n){return this._lines.getViewLinesBracketGuides(e,t,i,n)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Lr(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=dd(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const n=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,n)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const i=this.model.mightContainRTL(),n=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new qa(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,i,n,r.tokens,t,o,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const n=this._lines.getViewLinesData(e,t,i);return new pSe(this.getTabSize(),n)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,CT(this._configuration.options)),i=new ZIe;for(const n of t){const o=n.options,r=o.overviewRuler;if(!r)continue;const a=r.position;if(a===0)continue;const l=r.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.startLineNumber,n.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.endLineNumber,n.range.endColumn);i.accept(l,o.zIndex,c,d,a)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const i=t.options.overviewRuler;i&&i.invalidateCachedColor();const n=t.options.minimap;n&&n.invalidateCachedColor()}}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}deduceModelPositionRelativeToViewPosition(e,t,i){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const r=this.model.getOffsetAt(n)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,i){const n=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(M.compareRangesUsingStarts);let o=!1,r=!1;for(const l of e)l.isEmpty()?o=!0:r=!0;if(!r){if(!t)return"";const l=e.map(d=>d.startLineNumber);let c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+n);return c}if(o&&t){const l=[];let c=0;for(const d of e){const f=d.startLineNumber;d.isEmpty()?f!==c&&l.push(this.model.getLineContent(f)):l.push(this.model.getValueInRange(d,i?2:0)),c=f}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===xl||e.length!==1)return null;let n=e[0];if(n.isEmpty()){if(!t)return null;const d=n.startLineNumber;n=new M(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const o=this._configuration.options.get(46),r=this._getColorMap(),l=/[:;\\\/<>]/.test(o.fontFamily)||o.fontFamily===ma.fontFamily;let c;return l?c=ma.fontFamily:(c=o.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${ma.fontFamily}`),{mode:i,html:`<div style="color: ${r[1]};background-color: ${r[2]};font-family: ${c};font-weight: ${o.fontWeight};font-size: ${o.fontSize}px;line-height: ${o.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(n,r)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,n=e.startColumn,o=e.endLineNumber,r=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=o;c++){const d=this.model.tokenization.getLineTokens(c),f=d.getLineContent(),g=c===i?n-1:0,m=c===o?r-1:f.length;f===""?l+="<br>":l+=OIe(f,d.inflate(),t,g,m,a,mo)}return l}_getColorMap(){const e=Fn.getColorMap(),t=["#000000"];if(e)for(let i=1,n=e.length;i<n;i++)t[i]=oe.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(n=>this._cursor.setStates(n,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(n=>this._cursor.setSelections(n,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new lTe);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(n=>this._cursor.executeEdits(n,e,t,i))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,n,o){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,i,n,o))}paste(e,t,i,n){this._executeCursorEdit(o=>this._cursor.paste(o,e,t,i,n))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,i,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new M(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(n=>n.emitViewEvent(new VE(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new M(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(n=>n.emitViewEvent(new VE(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,n,o){this._withViewEventsCollector(r=>r.emitViewEvent(new VE(e,!1,i,null,n,t,o)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new nTe),this._eventDispatcher.emitOutgoingEvent(new rTe))}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class m6{constructor(e,t,i,n,o){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=n,this._startLineDelta=o}static create(e){const t=e._setTrackedRange(null,new M(1,1,1,1),1);return new m6(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new se(t,e.getLineMinColumn(t))),n=e.model._setTrackedRange(this._modelTrackedRange,new M(i.lineNumber,i.column,i.lineNumber,i.column),1),o=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=n,this._startLineDelta=r-o}invalidate(){this._isValid=!1}}class ZIe{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,n,o){const r=this._asMap[e];if(r){const a=r.data,l=a[a.length-3],c=a[a.length-1];if(l===o&&c+1>=i){n>c&&(a[a.length-1]=n);return}a.push(o,i,n)}else{const a=new NJ(e,t,[o,i,n]);this._asMap[e]=a,this.asArray.push(a)}}}class oR{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}var dS;(function(s){s[s.Ignore=0]="Ignore",s[s.Info=1]="Info",s[s.Warning=2]="Warning",s[s.Error=3]="Error"})(dS||(dS={}));(function(s){const e="error",t="warning",i="warn",n="info",o="ignore";function r(l){return l?mb(e,l)?s.Error:mb(t,l)||mb(i,l)?s.Warning:mb(n,l)?s.Info:s.Ignore:s.Ignore}s.fromValue=r;function a(l){switch(l){case s.Error:return e;case s.Warning:return t;case s.Info:return n;default:return o}}s.toString=a})(dS||(dS={}));const Pn=dS;var gte=Pn;const gs=bi("notificationService");class QIe{}class _y{constructor(e,t,i,n,o){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=n,this.wrappedTextIndentLength=o}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let n=this.breakOffsets[e]-t;return e>0&&(n+=this.wrappedTextIndentLength),n}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let n=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&n>this.injectionOffsets[o];o++)n<this.injectionOffsets[o]+this.injectionOptions[o].content.length?n=this.injectionOffsets[o]:n-=this.injectionOptions[o].content.length;return n}translateToOutputPosition(e,t=2){let i=e;if(this.injectionOffsets!==null)for(let n=0;n<this.injectionOffsets.length&&!(e<this.injectionOffsets[n]||t!==1&&e===this.injectionOffsets[n]);n++)i+=this.injectionOptions[n].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,n=this.breakOffsets.length-1,o=0,r=0;for(;i<=n;){o=i+(n-i)/2|0;const l=this.breakOffsets[o];if(r=o>0?this.breakOffsets[o-1]:0,t===0)if(e<=r)n=o-1;else if(e>l)i=o+1;else break;else if(e<r)n=o-1;else if(e>=l)i=o+1;else break}let a=e-r;return o>0&&(a+=this.wrappedTextIndentLength),new Bk(o,a)}normalizeOutputPosition(e,t,i){if(this.injectionOffsets!==null){const n=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(n,i);if(o!==n)return this.offsetInInputWithInjectionsToOutputPosition(o,i)}if(i===0){if(e>0&&t===this.getMinOutputOffset(e))return new Bk(e-1,this.getMaxOutputOffset(e-1))}else if(i===1){const n=this.getOutputLineCount()-1;if(e<n&&t===this.getMaxOutputOffset(e))return new Bk(e+1,this.getMinOutputOffset(e+1))}return new Bk(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2){if(e===i.offsetInInputWithInjections+i.length&&bG(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let n=i.offsetInInputWithInjections;if(CG(this.injectionOptions[i.injectedTextIndex].cursorStops))return n;let o=i.injectedTextIndex-1;for(;o>=0&&this.injectionOffsets[o]===this.injectionOffsets[i.injectedTextIndex]&&!(bG(this.injectionOptions[o].cursorStops)||(n-=this.injectionOptions[o].content.length,CG(this.injectionOptions[o].cursorStops)));)o--;return n}}else if(t===1||t===4){let n=i.offsetInInputWithInjections+i.length,o=i.injectedTextIndex;for(;o+1<this.injectionOffsets.length&&this.injectionOffsets[o+1]===this.injectionOffsets[o];)n+=this.injectionOptions[o+1].content.length,o++;return n}else if(t===0||t===3){let n=i.offsetInInputWithInjections,o=i.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)n-=this.injectionOptions[o-1].content.length,o--;return n}gN()}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),n=this.getInjectedTextAtOffset(i);return n?{options:this.injectionOptions[n.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let n=0;for(let o=0;o<t.length;o++){const r=i[o].content.length,a=t[o]+n,l=t[o]+n+r;if(a>e)break;if(e<=l)return{injectedTextIndex:o,offsetInInputWithInjections:a,length:r};n+=r}}}}function bG(s){return s==null?!0:s===Yc.Right||s===Yc.Both}function CG(s){return s==null?!0:s===Yc.Left||s===Yc.Both}class Bk{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new se(e+this.outputLineIndex,this.outputOffset+1)}}class _6{constructor(e,t){this.classifier=new XIe(e,t)}static create(e){return new _6(e.get(122),e.get(121))}createLineBreaksComputer(e,t,i,n){const o=[],r=[],a=[];return{addRequest:(l,c,d)=>{o.push(l),r.push(c),a.push(d)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,c=[];for(let d=0,f=o.length;d<f;d++){const g=r[d],m=a[d];m&&!m.injectionOptions&&!g?c[d]=JIe(this.classifier,m,o[d],t,i,l,n):c[d]=eNe(this.classifier,o[d],g,t,i,l,n)}return Q3.length=0,X3.length=0,c}}}}class XIe extends iC{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let Q3=[],X3=[];function JIe(s,e,t,i,n,o,r){if(n===-1)return null;const a=t.length;if(a<=1)return null;const l=e.breakOffsets,c=e.breakOffsetsVisibleColumn,d=pte(t,i,n,o,r),f=n-d,g=Q3,m=X3;let _=0,C=0,S=0,x=n;const L=l.length;let k=0;if(k>=0){let T=Math.abs(c[k]-x);for(;k+1<L;){const A=Math.abs(c[k+1]-x);if(A>=T)break;T=A,k++}}for(;k<L;){let T=k<0?0:l[k],A=k<0?0:c[k];C>T&&(T=C,A=S);let O=0,I=0,R=0,B=0;if(A<=x){let q=A,te=T===0?0:t.charCodeAt(T-1),U=T===0?0:s.get(te),X=!0;for(let le=T;le<a;le++){const be=le,pe=t.charCodeAt(le);let ke,He;if(Ms(pe)?(le++,ke=0,He=2):(ke=s.get(pe),He=vy(pe,q,i,o)),be>C&&J3(te,U,pe,ke)&&(O=be,I=q),q+=He,q>x){be>C?(R=be,B=q-He):(R=le+1,B=q),q-I>f&&(O=0),X=!1;break}te=pe,U=ke}if(X){_>0&&(g[_]=l[l.length-1],m[_]=c[l.length-1],_++);break}}if(O===0){let q=A,te=t.charCodeAt(T),U=s.get(te),X=!1;for(let le=T-1;le>=C;le--){const be=le+1,pe=t.charCodeAt(le);if(pe===9){X=!0;break}let ke,He;if(Bm(pe)?(le--,ke=0,He=2):(ke=s.get(pe),He=Ng(pe)?o:1),q<=x){if(R===0&&(R=be,B=q),q<=x-f)break;if(J3(pe,ke,te,U)){O=be,I=q;break}}q-=He,te=pe,U=ke}if(O!==0){const le=f-(B-I);if(le<=i){const be=t.charCodeAt(R);let pe;Ms(be)?pe=2:pe=vy(be,B,i,o),le-pe<0&&(O=0)}}if(X){k--;continue}}if(O===0&&(O=R,I=B),O<=C){const q=t.charCodeAt(C);Ms(q)?(O=C+2,I=S+2):(O=C+1,I=S+vy(q,S,i,o))}for(C=O,g[_]=O,S=I,m[_]=I,_++,x=I+f;k<0||k<L&&c[k]<I;)k++;let z=Math.abs(c[k]-x);for(;k+1<L;){const q=Math.abs(c[k+1]-x);if(q>=z)break;z=q,k++}}return _===0?null:(g.length=_,m.length=_,Q3=e.breakOffsets,X3=e.breakOffsetsVisibleColumn,e.breakOffsets=g,e.breakOffsetsVisibleColumn=m,e.wrappedTextIndentLength=d,e)}function eNe(s,e,t,i,n,o,r){const a=uu.applyInjectedText(e,t);let l,c;if(t&&t.length>0?(l=t.map(I=>I.options),c=t.map(I=>I.column-1)):(l=null,c=null),n===-1)return l?new _y(c,l,[a.length],[],0):null;const d=a.length;if(d<=1)return l?new _y(c,l,[a.length],[],0):null;const f=pte(a,i,n,o,r),g=n-f,m=[],_=[];let C=0,S=0,x=0,L=n,k=a.charCodeAt(0),T=s.get(k),A=vy(k,0,i,o),O=1;Ms(k)&&(A+=1,k=a.charCodeAt(1),T=s.get(k),O++);for(let I=O;I<d;I++){const R=I,B=a.charCodeAt(I);let z,q;Ms(B)?(I++,z=0,q=2):(z=s.get(B),q=vy(B,A,i,o)),J3(k,T,B,z)&&(S=R,x=A),A+=q,A>L&&((S===0||A-x>g)&&(S=R,x=A-q),m[C]=S,_[C]=x,C++,L=x+g,S=0),k=B,T=z}return C===0&&(!t||t.length===0)?null:(m[C]=d,_[C]=A,new _y(c,l,m,_,f))}function vy(s,e,t,i){return s===9?t-e%t:Ng(s)||s<32?i:1}function wG(s,e){return e-s%e}function J3(s,e,t,i){return t!==32&&(e===2&&i!==2||e!==1&&i===1||e===3&&i!==2||i===3&&e!==1)}function pte(s,e,t,i,n){let o=0;if(n!==0){const r=Lr(s);if(r!==-1){for(let l=0;l<r;l++){const c=s.charCodeAt(l)===9?wG(o,e):1;o+=c}const a=n===3?2:n===2?1:0;for(let l=0;l<a;l++){const c=wG(o,e);o+=c}o+i>t&&(o=0)}}return o}var M4;const O4=(M4=window.trustedTypes)===null||M4===void 0?void 0:M4.createPolicy("domLineBreaksComputer",{createHTML:s=>s});class v6{static create(){return new v6}constructor(){}createLineBreaksComputer(e,t,i,n){const o=[],r=[];return{addRequest:(a,l,c)=>{o.push(a),r.push(l)},finalize:()=>tNe(o,e,t,i,n,r)}}}function tNe(s,e,t,i,n,o){var r;function a(R){const B=o[R];if(B){const z=uu.applyInjectedText(s[R],B),q=B.map(U=>U.options),te=B.map(U=>U.column-1);return new _y(te,q,[z.length],[],0)}else return null}if(i===-1){const R=[];for(let B=0,z=s.length;B<z;B++)R[B]=a(B);return R}const l=Math.round(i*e.typicalHalfwidthCharacterWidth),d=Math.round(t*(n===3?2:n===2?1:0)),f=Math.ceil(e.spaceWidth*d),g=document.createElement("div");Fo(g,e);const m=Rg(1e4),_=[],C=[],S=[],x=[],L=[];for(let R=0;R<s.length;R++){const B=uu.applyInjectedText(s[R],o[R]);let z=0,q=0,te=l;if(n!==0)if(z=Lr(B),z===-1)z=0;else{for(let be=0;be<z;be++){const pe=B.charCodeAt(be)===9?t-q%t:1;q+=pe}const le=Math.ceil(e.spaceWidth*q);le+e.typicalFullwidthCharacterWidth>l?(z=0,q=0):te=l-le}const U=B.substr(z),X=iNe(U,q,t,te,m,f);_[R]=z,C[R]=q,S[R]=U,x[R]=X[0],L[R]=X[1]}const k=m.build(),T=(r=O4==null?void 0:O4.createHTML(k))!==null&&r!==void 0?r:k;g.innerHTML=T,g.style.position="absolute",g.style.top="10000",g.style.wordWrap="break-word",document.body.appendChild(g);const A=document.createRange(),O=Array.prototype.slice.call(g.children,0),I=[];for(let R=0;R<s.length;R++){const B=O[R],z=nNe(A,B,S[R],x[R]);if(z===null){I[R]=a(R);continue}const q=_[R],te=C[R]+d,U=L[R],X=[];for(let ke=0,He=z.length;ke<He;ke++)X[ke]=U[z[ke]];if(q!==0)for(let ke=0,He=z.length;ke<He;ke++)z[ke]+=q;let le,be;const pe=o[R];pe?(le=pe.map(ke=>ke.options),be=pe.map(ke=>ke.column-1)):(le=null,be=null),I[R]=new _y(be,le,z,X,te)}return document.body.removeChild(g),I}function iNe(s,e,t,i,n,o){if(o!==0){const g=String(o);n.appendASCIIString('<div style="text-indent: -'),n.appendASCIIString(g),n.appendASCIIString("px; padding-left: "),n.appendASCIIString(g),n.appendASCIIString("px; box-sizing: border-box; width:")}else n.appendASCIIString('<div style="width:');n.appendASCIIString(String(i)),n.appendASCIIString('px;">');const r=s.length;let a=e,l=0;const c=[],d=[];let f=0<r?s.charCodeAt(0):0;n.appendASCIIString("<span>");for(let g=0;g<r;g++){g!==0&&g%16384===0&&n.appendASCIIString("</span><span>"),c[g]=l,d[g]=a;const m=f;f=g+1<r?s.charCodeAt(g+1):0;let _=1,C=1;switch(m){case 9:_=t-a%t,C=_;for(let S=1;S<=_;S++)S<_?n.write1(160):n.appendASCII(32);break;case 32:f===32?n.write1(160):n.appendASCII(32);break;case 60:n.appendASCIIString("&lt;");break;case 62:n.appendASCIIString("&gt;");break;case 38:n.appendASCIIString("&amp;");break;case 0:n.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:n.write1(65533);break;default:Ng(m)&&C++,m<32?n.write1(9216+m):n.write1(m)}l+=_,a+=C}return n.appendASCIIString("</span>"),c[s.length]=l,d[s.length]=a,n.appendASCIIString("</div>"),[c,d]}function nNe(s,e,t,i){if(t.length<=1)return null;const n=Array.prototype.slice.call(e.children,0),o=[];try{e7(s,n,i,0,null,t.length-1,null,o)}catch(r){return console.log(r),null}return o.length===0?null:(o.push(t.length),o)}function e7(s,e,t,i,n,o,r,a){if(i===o||(n=n||P4(s,e,t[i],t[i+1]),r=r||P4(s,e,t[o],t[o+1]),Math.abs(n[0].top-r[0].top)<=.1))return;if(i+1===o){a.push(o);return}const l=i+(o-i)/2|0,c=P4(s,e,t[l],t[l+1]);e7(s,e,t,i,n,l,c,a),e7(s,e,t,l,c,o,r,a)}function P4(s,e,t,i){return s.setStart(e[t/16384|0].firstChild,t%16384),s.setEnd(e[i/16384|0].firstChild,i%16384),s.getClientRects()}var sNe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},oh=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},oNe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let rNe=0;class aNe{constructor(e,t,i,n,o){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=n,this.listenersToRemove=o}dispose(){Ni(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let k0=class cb extends ge{constructor(e,t,i,n,o,r,a,l,c,d,f,g){super(),this.languageConfigurationService=f,this._deliveryQueue=new BX,this._onDidDispose=this._register(new J),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new yG({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new yG({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onWillType=this._onWillType.event,this._onDidType=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new J({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection();const m=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=m.overflowWidgetsDomNode,delete m.overflowWidgetsDomNode,this._id=++rNe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,m,d)),this._register(this._configuration.onDidChange(S=>{this._onDidChangeConfiguration.fire(S);const x=this._configuration.options;if(S.hasChanged(133)){const L=x.get(133);this._onDidLayoutChange.fire(L)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=o,this._commandService=r,this._themeService=l,this._register(new lNe(this,this._contextKeyService)),this._register(new cNe(this,this._contextKeyService,g)),this._instantiationService=n.createChild(new oR([jt,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new uNe(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let _;Array.isArray(i.contributions)?_=i.contributions:_=Sm.getEditorContributions();for(const S of _){if(this._contributions[S.id]){Yt(new Error(`Cannot have two contributions with the same id ${S.id}`));continue}try{const x=this._instantiationService.createInstance(S.ctor,this);this._contributions[S.id]=x}catch(x){Yt(x)}}Sm.getEditorActions().forEach(S=>{if(this._actions[S.id]){Yt(new Error(`Cannot have two actions with the same id ${S.id}`));return}const x=new qee(S.id,S.label,S.alias,zr(S.precondition),()=>this._instantiationService.invokeFunction(L=>Promise.resolve(S.runEditorCommand(L,this,null))),this._contextKeyService);this._actions[x.id]=x});const C=()=>!this._configuration.options.get(83)&&this._configuration.options.get(32).enabled;this._register(new yLe(this._domElement,{onDragEnter:()=>{},onDragOver:S=>{if(!C())return;const x=this.getTargetAtClientPoint(S.clientX,S.clientY);x!=null&&x.position&&this.showDropIndicatorAt(x.position)},onDrop:S=>oNe(this,void 0,void 0,function*(){if(!C()||(this.removeDropIndicator(),!S.dataTransfer))return;const x=this.getTargetAtClientPoint(S.clientX,S.clientY);x!=null&&x.position&&this._onDropIntoEditor.fire({position:x.position,event:S})}),onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}get isSimpleWidget(){return this._configuration.isSimpleWidget}_createConfiguration(e,t,i){return new R3(e,t,this._domElement,i)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return lL.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,i=e.length;t<i;t++){const n=e[t];this._contributions[n].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Ii.getWordAtPosition(this._modelData.model,this._configuration.options.get(119),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){!this._modelData||this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const i=this.hasTextFocus(),n=this._detachModel();this._attachModel(t),i&&this.hasModel()&&this.focus();const o={oldModelUrl:n?n.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(o),this._postDetachModelCleanup(n)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,n){const o=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,n)}getTopForLineNumber(e,t=!1){return this._modelData?cb._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?cb._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,n=!1){const o=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,n)}getBottomForLineNumber(e,t=!1){return this._modelData?cb._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}setHiddenAreas(e){var t;(t=this._modelData)===null||t===void 0||t.viewModel.setHiddenAreas(e.map(i=>M.lift(i)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return ks.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(!!this._modelData){if(!se.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,n){if(!this._modelData)return;if(!M.isIRange(e))throw new Error("Invalid arguments");const o=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",i,r,t,n)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new M(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,n){if(!se.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new M(e.lineNumber,e.column,e.lineNumber,e.column),t,i,n)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const i=et.isISelection(e),n=M.isIRange(e);if(!i&&!n)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(n){const o={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(o,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new et(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,n){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new M(e,1,t,1),i,!1,n)}revealRange(e,t=0,i=!1,n=!0){this._revealRange(e,i?1:0,n,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,n){if(!M.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(M.lift(e),t,i,n)}setSelections(e,t="api",i=0){if(!!this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let n=0,o=e.length;n<o;n++)if(!et.isISelection(e[n]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(!!this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(!!this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){!this._modelData||this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const o of t){const r=this._contributions[o];typeof r.saveViewState=="function"&&(e[o]=r.saveViewState())}const i=this._modelData.viewModel.saveCursorState(),n=this._modelData.viewModel.saveState();return{cursorState:i,viewState:n,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]);const n=t.contributionsState||{},o=Object.keys(this._contributions);for(let a=0,l=o.length;a<l;a++){const c=o[a],d=this._contributions[c];typeof d.restoreViewState=="function"&&d.restoreViewState(n[c])}const r=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(r)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let i=0,n=t.length;i<n;i++){const o=t[i];e.push(this._actions[o])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,i){switch(i=i||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const o=i;this._type(e,o.text||"");return}case"replacePreviousChar":{const o=i;this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);return}case"compositionType":{const o=i;this._compositionType(e,o.text||"",o.replacePrevCharCnt||0,o.replaceNextCharCnt||0,o.positionDelta||0);return}case"paste":{const o=i;this._paste(e,o.text||"",o.pasteOnNewLine||!1,o.multicursorText||null,o.mode||null);return}case"cut":this._cut(e);return}const n=this.getAction(t);if(n){Promise.resolve(n.run()).then(void 0,Yt);return}!this._modelData||this._triggerEditorCommand(e,t,i)||this._triggerCommand(t,i)}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){!this._modelData||(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){!this._modelData||(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,n,o){!this._modelData||this._modelData.viewModel.compositionType(t,i,n,o,e)}_paste(e,t,i,n,o){if(!this._modelData||t.length===0)return;const r=this._modelData.viewModel,a=r.getSelection().getStartPosition();r.paste(t,i,n,e);const l=r.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new M(a.lineNumber,a.column,l.lineNumber,l.column),languageId:o})}_cut(e){!this._modelData||this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const n=Sm.getEditorCommand(t);return n?(i=i||{},i.source=e,this._instantiationService.invokeFunction(o=>{Promise.resolve(n.runEditorCommand(o,this,i)).then(void 0,Yt)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(83)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(83)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(83))return!1;let n;return i?Array.isArray(i)?n=()=>i:n=i:n=()=>null,this._modelData.viewModel.executeEdits(e,t,n),!0}executeCommand(e,t){!this._modelData||this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){!this._modelData||this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new dNe(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,CT(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,CT(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(133)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,n=i.get(133),o=cb._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft();return{top:o,left:r,height:i.get(61)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Fo(e,this._configuration.options.get(46))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount()),e.onBeforeAttached();const i=new YIe(this._id,this._configuration,e,v6.create(),_6.create(this._configuration.options),r=>cu(r),this.languageConfigurationService,this._themeService);t.push(e.onWillDispose(()=>this.setModel(null))),t.push(i.onEvent(r=>{switch(r.kind){case 0:this._onDidContentSizeChange.fire(r);break;case 1:this._editorTextFocus.setValue(r.hasFocus);break;case 2:this._onDidScrollChange.fire(r);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{r.reachedMaxCursorCount&&this._notificationService.warn(b("cursors.maximum","The number of cursors has been limited to {0}.",x0.MAX_CURSOR_COUNT));const a=[];for(let d=0,f=r.selections.length;d<f;d++)a[d]=r.selections[d].getPosition();const l={position:a[0],secondaryPositions:a.slice(1),reason:r.reason,source:r.source};this._onDidChangeCursorPosition.fire(l);const c={selection:r.selections[0],secondarySelections:r.selections.slice(1),modelVersionId:r.modelVersionId,oldSelections:r.oldSelections,oldModelVersionId:r.oldModelVersionId,source:r.source,reason:r.reason};this._onDidChangeCursorSelection.fire(c);break}case 7:this._onDidChangeModelDecorations.fire(r.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(r.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(r.event);break;case 10:this._onDidChangeModelContent.fire(r.event);break;case 11:this._onDidChangeModelOptions.fire(r.event);break;case 12:this._onDidChangeModelTokens.fire(r.event);break}}));const[n,o]=this._createView(i);if(o){this._domElement.appendChild(n.domNode.domNode);let r=Object.keys(this._contentWidgets);for(let a=0,l=r.length;a<l;a++){const c=r[a];n.addContentWidget(this._contentWidgets[c])}r=Object.keys(this._overlayWidgets);for(let a=0,l=r.length;a<l;a++){const c=r[a];n.addOverlayWidget(this._overlayWidgets[c])}n.render(!1,!0),n.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new aNe(e,i,n,o,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(o,r,a,l)=>{this._paste("keyboard",o,r,a,l)},type:o=>{this._type("keyboard",o)},compositionType:(o,r,a,l)=>{this._compositionType("keyboard",o,r,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(o,r,a,l)=>{const c={text:o,pasteOnNewLine:r,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:o=>{const r={text:o};this._commandService.executeCommand("type",r)},compositionType:(o,r,a,l)=>{if(a||l){const c={text:o,replacePrevCharCnt:r,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:o,replaceCharCnt:r};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new eR(e.coordinatesConverter);return i.onKeyDown=o=>this._onKeyDown.fire(o),i.onKeyUp=o=>this._onKeyUp.fire(o),i.onContextMenu=o=>this._onContextMenu.fire(o),i.onMouseMove=o=>this._onMouseMove.fire(o),i.onMouseLeave=o=>this._onMouseLeave.fire(o),i.onMouseDown=o=>this._onMouseDown.fire(o),i.onMouseUp=o=>this._onMouseUp.fire(o),i.onMouseDrag=o=>this._onMouseDrag.fire(o),i.onMouseDrop=o=>this._onMouseDrop.fire(o),i.onMouseDropCanceled=o=>this._onMouseDropCanceled.fire(o),i.onMouseWheel=o=>this._onMouseWheel.fire(o),[new HEe(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new M(e.lineNumber,e.column,e.lineNumber,e.column),options:cb.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}};k0.dropIntoEditorDecorationOptions=Gt.register({description:"workbench-dnd-target",className:"dnd-target"});k0=sNe([oh(3,Zt),oh(4,Vi),oh(5,fs),oh(6,jt),oh(7,cn),oh(8,gs),oh(9,nf),oh(10,os),oh(11,ct)],k0);class yG extends ge{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new J(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new J(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class lNe extends ge{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=$.editorSimpleInput.bindTo(t),this._editorFocus=$.focus.bindTo(t),this._textInputFocus=$.textInputFocus.bindTo(t),this._editorTextFocus=$.editorTextFocus.bindTo(t),this._editorTabMovesFocus=$.tabMovesFocus.bindTo(t),this._editorReadonly=$.readOnly.bindTo(t),this._inDiffEditor=$.inDiffEditor.bindTo(t),this._editorColumnSelection=$.columnSelection.bindTo(t),this._hasMultipleSelections=$.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=$.hasNonEmptySelection.bindTo(t),this._canUndo=$.canUndo.bindTo(t),this._canRedo=$.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(132)),this._editorReadonly.set(e.get(83)),this._inDiffEditor.set(e.get(56)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class cNe extends ge{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=$.languageId.bindTo(t),this._hasCompletionItemProvider=$.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=$.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=$.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=$.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=$.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=$.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=$.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=$.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=$.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=$.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=$.hasReferenceProvider.bindTo(t),this._hasRenameProvider=$.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=$.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=$.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=$.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=$.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=$.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=$.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=$.isInWalkThroughSnippet.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(i.completionProvider.onDidChange(n)),this._register(i.codeActionProvider.onDidChange(n)),this._register(i.codeLensProvider.onDidChange(n)),this._register(i.definitionProvider.onDidChange(n)),this._register(i.declarationProvider.onDidChange(n)),this._register(i.implementationProvider.onDidChange(n)),this._register(i.typeDefinitionProvider.onDidChange(n)),this._register(i.hoverProvider.onDidChange(n)),this._register(i.documentHighlightProvider.onDidChange(n)),this._register(i.documentSymbolProvider.onDidChange(n)),this._register(i.referenceProvider.onDidChange(n)),this._register(i.renameProvider.onDidChange(n)),this._register(i.documentFormattingEditProvider.onDidChange(n)),this._register(i.documentRangeFormattingEditProvider.onDidChange(n)),this._register(i.signatureHelpProvider.onDidChange(n)),this._register(i.inlayHintsProvider.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Xt.walkThroughSnippet)})}}class uNe extends ge{constructor(e){super(),this._onChange=this._register(new J),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(zm(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}class dNe{constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}get length(){return this._decorationIds.length}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(n=>{this._isChangingDecorations||e.call(t,n)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const n=e.getDecorationRange(i);n&&t.push(n)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}}}const hNe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),fNe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function F4(s){return hNe+encodeURIComponent(s.toString())+fNe}const gNe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),pNe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function mNe(s){return gNe+encodeURIComponent(s.toString())+pNe}Cn((s,e)=>{const t=s.getColor(fee);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const i=s.getColor(od);i&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${F4(i)}") repeat-x bottom left; }`);const n=s.getColor(QLe);n&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${n}; }`);const o=s.getColor(b0);o&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${o}; }`);const r=s.getColor(Ha);r&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${F4(r)}") repeat-x bottom left; }`);const a=s.getColor(XLe);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const l=s.getColor(qT);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);const c=s.getColor(jr);c&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${F4(c)}") repeat-x bottom left; }`);const d=s.getColor(JLe);d&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${d}; }`);const f=s.getColor(txe);f&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${f}; }`);const g=s.getColor(exe);g&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${mNe(g)}") no-repeat bottom left; }`);const m=s.getColor(nke);m&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${m.rgba.a}; }`);const _=s.getColor(ike);_&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${_}; }`);const C=s.getColor(za)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${C}}`)});class an{constructor(e,t,i){const n=o=>this.emitter.fire(o);this.emitter=new J({onFirstListenerAdd:()=>e.addEventListener(t,n,i),onLastListenerRemove:()=>e.removeEventListener(t,n,i)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function t7(s){return s.preventDefault(),s.stopPropagation(),s}var cC=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o};const _Ne=!1;var uI;(function(s){s.North="north",s.South="south",s.East="east",s.West="west"})(uI||(uI={}));let vNe=4;const bNe=new J;let CNe=300;const wNe=new J;class b6{constructor(){this.disposables=new Ae}get onPointerMove(){return this.disposables.add(new an(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new an(window,"mouseup")).event}dispose(){this.disposables.dispose()}}cC([Ss],b6.prototype,"onPointerMove",null);cC([Ss],b6.prototype,"onPointerUp",null);class C6{constructor(e){this.el=e,this.disposables=new Ae}get onPointerMove(){return this.disposables.add(new an(this.el,vn.Change)).event}get onPointerUp(){return this.disposables.add(new an(this.el,vn.End)).event}dispose(){this.disposables.dispose()}}cC([Ss],C6.prototype,"onPointerMove",null);cC([Ss],C6.prototype,"onPointerUp",null);class dI{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}cC([Ss],dI.prototype,"onPointerMove",null);cC([Ss],dI.prototype,"onPointerUp",null);const SG="pointer-events-disabled";class Ro extends ge{constructor(e,t,i){super(),this.hoverDelay=CNe,this.hoverDelayer=this._register(new _d(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new J),this._onDidStart=this._register(new J),this._onDidChange=this._register(new J),this._onDidReset=this._register(new J),this._onDidEnd=this._register(new J),this.orthogonalStartSashDisposables=this._register(new Ae),this.orthogonalStartDragHandleDisposables=this._register(new Ae),this.orthogonalEndSashDisposables=this._register(new Ae),this.orthogonalEndDragHandleDisposables=this._register(new Ae),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=Se(e,Pe(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),mi&&this.el.classList.add("mac");const n=this._register(new an(this.el,"mousedown")).event;this._register(n(f=>this.onPointerStart(f,new b6),this));const o=this._register(new an(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));const r=this._register(new an(this.el,"mouseenter")).event;this._register(r(()=>Ro.onMouseEnter(this)));const a=this._register(new an(this.el,"mouseleave")).event;this._register(a(()=>Ro.onMouseLeave(this))),this._register(Zi.addTarget(this.el));const l=gt.map(this._register(new an(this.el,vn.Start)).event,f=>{var g;return Object.assign(Object.assign({},f),{target:(g=f.initialTarget)!==null&&g!==void 0?g:null})});this._register(l(f=>this.onPointerStart(f,new C6(this.el)),this));const c=this._register(new an(this.el,vn.Tap)).event,d=gt.map(gt.filter(gt.debounce(c,(f,g)=>{var m;return{event:g,count:((m=f==null?void 0:f.count)!==null&&m!==void 0?m:0)+1}},250),({count:f})=>f===2),({event:f})=>{var g;return Object.assign(Object.assign({},f),{target:(g=f.initialTarget)!==null&&g!==void 0?g:null})});this._register(d(this.onPointerDoublePress,this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=vNe,this._register(bNe.event(f=>{this.size=f,this.layout()}))),this._register(wNe.event(f=>this.hoverDelay=f)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",_Ne),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=Se(this.el,Pe(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(ni(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new an(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Ro.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new an(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Ro.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=Se(this.el,Pe(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(ni(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new an(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Ro.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new an(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Ro.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){qi.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const _=this.getOrthogonalSash(e);_&&(i=!0,e.__orthogonalSashEvent=!0,_.onPointerStart(e,new dI(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new dI(t))),!this.state)return;const n=bLe("iframe");for(const _ of n)_.classList.add(SG);const o=e.pageX,r=e.pageY,a=e.altKey,l={startX:o,currentX:o,startY:r,currentY:r,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=Il(this.el),d=()=>{let _="";i?_="all-scroll":this.orientation===1?this.state===1?_="s-resize":this.state===2?_="n-resize":_=mi?"row-resize":"ns-resize":this.state===1?_="e-resize":this.state===2?_="w-resize":_=mi?"col-resize":"ew-resize",c.textContent=`* { cursor: ${_} !important; }`},f=new Ae;d(),i||this.onDidEnablementChange.event(d,null,f);const g=_=>{qi.stop(_,!1);const C={startX:o,currentX:_.pageX,startY:r,currentY:_.pageY,altKey:a};this._onDidChange.fire(C)},m=_=>{qi.stop(_,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),f.dispose();for(const C of n)C.classList.remove(SG)};t.onPointerMove(g,null,f),t.onPointerUp(m,null,f),f.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Ro.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Ro.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Ro.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}class Wg{constructor(e,t,i){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=i}static capture(e){let t=null,i=0;if(e.getScrollTop()!==0){const n=e.getVisibleRanges();if(n.length>0){t=n[0].getStartPosition();const o=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-o}}return new Wg(t,i,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i)}}const CL={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Ur.text},$p={CurrentDragAndDropData:void 0};var LG,xG;class yNe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class SNe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?eB(e,this._value,0,e.length,this._from,this._to):aL(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class LNe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?eB(e,this._value,0,e.length,this._from,this._to):aL(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class xNe{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new LNe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return l3(e,this._value.scheme);if(this._states[this._stateIdx]===2)return l3(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Py(e,this._value.query);if(this._states[this._stateIdx]===5)return Py(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class Vk{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class Jb{constructor(e){this._iter=e}static forUris(e=()=>!1,t=()=>!1){return new Jb(new xNe(e,t))}static forStrings(){return new Jb(new yNe)}static forConfigKeys(){return new Jb(new SNe)}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let n;this._root||(this._root=new Vk,this._root.segment=i.value());const o=[];for(n=this._root;;){const a=i.cmp(n.segment);if(a>0)n.left||(n.left=new Vk,n.left.segment=i.value()),o.push([-1,n]),n=n.left;else if(a<0)n.right||(n.right=new Vk,n.right.segment=i.value()),o.push([1,n]),n=n.right;else if(i.hasNext())i.next(),n.mid||(n.mid=new Vk,n.mid.segment=i.value()),o.push([0,n]),n=n.mid;else break}const r=n.value;n.value=t,n.key=e;for(let a=o.length-1;a>=0;a--){const l=o[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const d=o[a][0],f=o[a+1][0];if(d===1&&f===1)o[a][1]=l.rotateLeft();else if(d===-1&&f===-1)o[a][1]=l.rotateRight();else if(d===1&&f===-1)l.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=l.rotateLeft();else if(d===-1&&f===1)l.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return r}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const n=t.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var i;const n=this._iter.reset(e),o=[];let r=this._root;for(;r;){const a=n.cmp(r.segment);if(a>0)o.push([-1,r]),r=r.left;else if(a<0)o.push([1,r]),r=r.right;else if(n.hasNext())n.next(),o.push([0,r]),r=r.mid;else break}if(!!r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const a=this._min(r.right),{key:l,value:c,segment:d}=a;this._delete(a.key,!1),r.key=l,r.value=c,r.segment=d}else{const a=(i=r.left)!==null&&i!==void 0?i:r.right;if(o.length>0){const[l,c]=o[o.length-1];switch(l){case-1:c.left=a;break;case 0:c.mid=a;break;case 1:c.right=a;break}}else this._root=a}for(let a=o.length-1;a>=0;a--){const l=o[a][1];l.updateHeight();const c=l.balanceFactor();if(c>1?(l.right.balanceFactor()>=0||(l.right=l.right.rotateRight()),o[a][1]=l.rotateLeft()):c<-1&&(l.left.balanceFactor()<=0||(l.left=l.left.rotateLeft()),o[a][1]=l.rotateRight()),a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,n;for(;i;){const o=t.cmp(i.segment);if(o>0)i=i.left;else if(o<0)i=i.right;else if(t.hasNext())t.next(),n=i.value||n,i=i.mid;else break}return i&&i.value||n}findSuperstr(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const n=t.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else return i.mid?this._entries(i.mid):void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){!e||(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}class DNe{constructor(e,t){this.uri=e,this.value=t}}class er{constructor(e,t){this[LG]="ResourceMap",e instanceof er?(this.map=new Map(e.map),this.toKey=t!=null?t:er.defaultToKey):(this.map=new Map,this.toKey=e!=null?e:er.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new DNe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,n]of this.map)e(n.value,n.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(LG=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}er.defaultToKey=s=>s.toString();class kNe{constructor(){this[xG]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(!!i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let n=this._map.get(e);if(n)n.value=t,i!==0&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(n);break;case 1:this.addItemFirst(n);break;case 2:this.addItemLast(n);break;default:this.addItemLast(n);break}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(!!t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const o={value:i.key,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return n}values(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const o={value:i.value,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return n}entries(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const o={value:[i.key,i.value],done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return n}[(xG=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(i.previous=n,n.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,n=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=n,n.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class tp extends kNe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}function w6(...s){return function(e,t){for(let i=0,n=s.length;i<n;i++){const o=s[i](e,t);if(o)return o}return null}}mte.bind(void 0,!1);const rR=mte.bind(void 0,!0);function mte(s,e,t){if(!t||t.length<e.length)return null;let i;return s?i=tB(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function _te(s,e){const t=e.toLowerCase().indexOf(s.toLowerCase());return t===-1?null:[{start:t,end:t+s.length}]}function vte(s,e){return i7(s.toLowerCase(),e.toLowerCase(),0,0)}function i7(s,e,t,i){if(t===s.length)return[];if(i===e.length)return null;if(s[t]===e[i]){let n=null;return(n=i7(s,e,t+1,i+1))?L6({start:i,end:i+1},n):null}return i7(s,e,t,i+1)}function y6(s){return 97<=s&&s<=122}function aR(s){return 65<=s&&s<=90}function S6(s){return 48<=s&&s<=57}function bte(s){return s===32||s===9||s===10||s===13}const Cte=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(s=>Cte.add(s.charCodeAt(0)));function hI(s){return bte(s)||Cte.has(s)}function ENe(s,e){return s===e||hI(s)&&hI(e)}function wte(s){return y6(s)||aR(s)||S6(s)}function L6(s,e){return e.length===0?e=[s]:s.end===e[0].start?e[0].start=s.start:e.unshift(s),e}function yte(s,e){for(let t=e;t<s.length;t++){const i=s.charCodeAt(t);if(aR(i)||S6(i)||t>0&&!wte(s.charCodeAt(t-1)))return t}return s.length}function n7(s,e,t,i){if(t===s.length)return[];if(i===e.length)return null;if(s[t]!==e[i].toLowerCase())return null;{let n=null,o=i+1;for(n=n7(s,e,t+1,i+1);!n&&(o=yte(e,o))<e.length;)n=n7(s,e,t+1,o),o++;return n===null?null:L6({start:i,end:i+1},n)}}function TNe(s){let e=0,t=0,i=0,n=0,o=0;for(let d=0;d<s.length;d++)o=s.charCodeAt(d),aR(o)&&e++,y6(o)&&t++,wte(o)&&i++,S6(o)&&n++;const r=e/s.length,a=t/s.length,l=i/s.length,c=n/s.length;return{upperPercent:r,lowerPercent:a,alphaPercent:l,numericPercent:c}}function INe(s){const{upperPercent:e,lowerPercent:t}=s;return t===0&&e>.6}function NNe(s){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:n}=s;return t>.2&&e<.8&&i>.6&&n<.2}function RNe(s){let e=0,t=0,i=0,n=0;for(let o=0;o<s.length;o++)i=s.charCodeAt(o),aR(i)&&e++,y6(i)&&t++,bte(i)&&n++;return(e===0||t===0)&&n===0?s.length<=30:e<=5}function Ste(s,e){if(!e||(e=e.trim(),e.length===0)||!RNe(s)||e.length>60)return null;const t=TNe(e);if(!NNe(t)){if(!INe(t))return null;e=e.toLowerCase()}let i=null,n=0;for(s=s.toLowerCase();n<e.length&&(i=n7(s,e,0,n))===null;)n=yte(e,n+1);return i}function ANe(s,e,t=!1){if(!e||e.length===0)return null;let i=null,n=0;for(s=s.toLowerCase(),e=e.toLowerCase();n<e.length&&(i=s7(s,e,0,n,t))===null;)n=Lte(e,n+1);return i}function s7(s,e,t,i,n){if(t===s.length)return[];if(i===e.length)return null;if(ENe(s.charCodeAt(t),e.charCodeAt(i))){let o=null,r=i+1;if(o=s7(s,e,t+1,i+1,n),!n)for(;!o&&(r=Lte(e,r))<e.length;)o=s7(s,e,t+1,r,n),r++;return o===null?null:L6({start:i,end:i+1},o)}else return null}function Lte(s,e){for(let t=e;t<s.length;t++)if(hI(s.charCodeAt(t))||t>0&&hI(s.charCodeAt(t-1)))return t;return s.length}const MNe=w6(rR,Ste,_te),ONe=w6(rR,Ste,vte),DG=new tp(1e4);function kG(s,e,t=!1){if(typeof s!="string"||typeof e!="string")return null;let i=DG.get(s);i||(i=new RegExp(j1e(s),"i"),DG.set(s,i));const n=i.exec(e);return n?[{start:n.index,end:n.index+n[0].length}]:t?ONe(s,e):MNe(s,e)}function PNe(s,e,t,i,n,o){const r=Math.min(13,s.length);for(;t<r;t++){const a=E0(s,e,t,i,n,o,{firstMatchCanBeWeak:!1,boostFullMatch:!0});if(a)return a}return[0,o]}function lR(s){if(typeof s>"u")return[];const e=[],t=s[1];for(let i=s.length-1;i>1;i--){const n=s[i]+t,o=e[e.length-1];o&&o.end===n?o.end=n+1:e.push({start:n,end:n+1})}return e}const ug=128;function x6(){const s=[],e=[];for(let t=0;t<=ug;t++)e[t]=0;for(let t=0;t<=ug;t++)s.push(e.slice(0));return s}function xte(s){const e=[];for(let t=0;t<=s;t++)e[t]=0;return e}const Dte=xte(2*ug),o7=xte(2*ug),rh=x6(),jp=x6(),Wk=x6();function Hk(s,e){if(e<0||e>=s.length)return!1;const t=s.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!oB(t)}}function EG(s,e){if(e<0||e>=s.length)return!1;switch(s.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function HE(s,e,t){return e[s]!==t[s]}function FNe(s,e,t,i,n,o,r=!1){for(;e<t&&n<o;)s[e]===i[n]&&(r&&(Dte[e]=n),e+=1),n+=1;return e===t}var ou;(function(s){s.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}s.isDefault=e})(ou||(ou={}));class D6{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}}D6.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};function E0(s,e,t,i,n,o,r=D6.default){const a=s.length>ug?ug:s.length,l=i.length>ug?ug:i.length;if(t>=a||o>=l||a-t>l-o||!FNe(e,t,a,n,o,l,!0))return;BNe(a,l,t,o,e,n);let c=1,d=1,f=t,g=o;const m=[!1];for(c=1,f=t;f<a;c++,f++){const L=Dte[f],k=o7[f],T=f+1<a?o7[f+1]:l;for(d=L-o+1,g=L;g<T;d++,g++){let A=Number.MIN_SAFE_INTEGER,O=!1;g<=k&&(A=VNe(s,e,f,t,i,n,g,l,o,rh[c-1][d-1]===0,m));let I=0;A!==Number.MAX_SAFE_INTEGER&&(O=!0,I=A+jp[c-1][d-1]);const R=g>L,B=R?jp[c][d-1]+(rh[c][d-1]>0?-5:0):0,z=g>L+1&&rh[c][d-1]>0,q=z?jp[c][d-2]+(rh[c][d-2]>0?-5:0):0;if(z&&(!R||q>=B)&&(!O||q>=I))jp[c][d]=q,Wk[c][d]=3,rh[c][d]=0;else if(R&&(!O||B>=I))jp[c][d]=B,Wk[c][d]=2,rh[c][d]=0;else if(O)jp[c][d]=I,Wk[c][d]=1,rh[c][d]=rh[c-1][d-1]+1;else throw new Error("not possible")}}if(!m[0]&&!r.firstMatchCanBeWeak)return;c--,d--;const _=[jp[c][d],o];let C=0,S=0;for(;c>=1;){let L=d;do{const k=Wk[c][L];if(k===3)L=L-2;else if(k===2)L=L-1;else break}while(L>=1);C>1&&e[t+c-1]===n[o+d-1]&&!HE(L+o-1,i,n)&&C+1>rh[c][L]&&(L=d),L===d?C++:C=1,S||(S=L),c--,d=L-1,_.push(d)}l===a&&r.boostFullMatch&&(_[0]+=2);const x=S-a;return _[0]-=x,_}function BNe(s,e,t,i,n,o){let r=s-1,a=e-1;for(;r>=t&&a>=i;)n[r]===o[a]&&(o7[r]=a,r--),a--}function VNe(s,e,t,i,n,o,r,a,l,c,d){if(e[t]!==o[r])return Number.MIN_SAFE_INTEGER;let f=1,g=!1;return r===t-i?f=s[t]===n[r]?7:5:HE(r,n,o)&&(r===0||!HE(r-1,n,o))?(f=s[t]===n[r]?7:5,g=!0):Hk(o,r)&&(r===0||!Hk(o,r-1))?f=5:(Hk(o,r-1)||EG(o,r-1))&&(f=5,g=!0),f>1&&t===i&&(d[0]=!0),g||(g=HE(r,n,o)||Hk(o,r-1)||EG(o,r-1)),t===i?r>l&&(f-=g?3:5):c?f+=g?2:0:f+=g?0:1,r+1===a&&(f-=g?3:5),f}function WNe(s,e,t,i,n,o,r){return HNe(s,e,t,i,n,o,!0,r)}function HNe(s,e,t,i,n,o,r,a){let l=E0(s,e,t,i,n,o,a);if(l&&!r)return l;if(s.length>=3){const c=Math.min(7,s.length-1);for(let d=t+1;d<c;d++){const f=zNe(s,d);if(f){const g=E0(f,f.toLowerCase(),t,i,n,o,a);g&&(g[0]-=3,(!l||g[0]>l[0])&&(l=g))}}}return l}function zNe(s,e){if(e+1>=s.length)return;const t=s[e],i=s[e+1];if(t!==i)return s.slice(0,e)+i+t+s.slice(e+2)}const by="$(",k6=new RegExp(`\\$\\(${yr.iconNameExpression}(?:${yr.iconModifierExpression})?\\)`,"g"),UNe=new RegExp(yr.iconNameCharacter),$Ne=new RegExp(`(\\\\)?${k6.source}`,"g");function jNe(s){return s.replace($Ne,(e,t)=>t?e:`\\${e}`)}const KNe=new RegExp(`\\\\${k6.source}`,"g");function qNe(s){return s.replace(KNe,e=>`\\${e}`)}const GNe=new RegExp(`(\\s)?(\\\\)?${k6.source}(\\s)?`,"g");function E6(s){return s.indexOf(by)===-1?s:s.replace(GNe,(e,t,i,n)=>i?e:t||n||"")}function Kv(s){const e=s.indexOf(by);return e===-1?{text:s}:YNe(s,e)}function YNe(s,e){const t=[];let i="";function n(g){if(g){i+=g;for(const m of g)t.push(a)}}let o=-1,r="",a=0,l,c,d=e;const f=s.length;for(n(s.substr(0,e));d<f;){if(l=s[d],c=s[d+1],l===by[0]&&c===by[1])o=d,n(r),r=by,d++;else if(l===")"&&o!==-1){const g=d-o+1;a+=g,o=-1,r=""}else o!==-1?UNe.test(l)?r+=l:(n(r),o=-1,r=""):n(l);d++}return n(r),{text:i,iconOffsets:t}}function zk(s,e,t=!1){const{text:i,iconOffsets:n}=e;if(!n||n.length===0)return kG(s,i,t);const o=vN(i," "),r=i.length-o.length,a=kG(s,o,t);if(a)for(const l of a){const c=n[l.start+r]+r;l.start+=c,l.end+=c}return a}class Wr{constructor(e="",t=!1){var i,n,o;if(this.value=e,typeof this.value!="string")throw iu("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(i=t.isTrusted)!==null&&i!==void 0?i:void 0,this.supportThemeIcons=(n=t.supportThemeIcons)!==null&&n!==void 0?n:!1,this.supportHtml=(o=t.supportHtml)!==null&&o!==void 0?o:!1)}appendText(e,t=0){return this.value+=ZNe(this.supportThemeIcons?jNe(e):e).replace(/([ \t]+)/g,(i,n)=>"&nbsp;".repeat(n.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(ja(t),"g");return e.replace(i,(n,o)=>e.charAt(o-1)!=="\\"?`\\${n}`:n)}}function T0(s){return kte(s)?!s.value:Array.isArray(s)?s.every(T0):!0}function kte(s){return s instanceof Wr?!0:s&&typeof s=="object"?typeof s.value=="string"&&(typeof s.isTrusted=="boolean"||s.isTrusted===void 0)&&(typeof s.supportThemeIcons=="boolean"||s.supportThemeIcons===void 0):!1}function ZNe(s){return s.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function Uk(s){return s.replace(/"/g,"&quot;")}function B4(s){return s&&s.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function QNe(s){const e=[],t=s.split("|").map(n=>n.trim());s=t[0];const i=t[1];if(i){const n=/height=(\d+)/.exec(i),o=/width=(\d+)/.exec(i),r=n?n[1]:"",a=o?o[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(r));l&&e.push(`width="${a}"`),c&&e.push(`height="${r}"`)}return{href:s,dimensions:e}}var r7=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};function XNe(s,e){Kr(e)?s.title=E6(e):e!=null&&e.markdownNotSupportedFallback?s.title=e.markdownNotSupportedFallback:s.removeAttribute("title")}class JNe{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}update(e,t,i){var n;return r7(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let o;if(e===void 0||Kr(e)||e instanceof HTMLElement)o=e;else if(!bT(e.markdown))o=(n=e.markdown)!==null&&n!==void 0?n:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(b("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new _o;const r=this._cancellationTokenSource.token;if(o=yield e.markdown(r),o===void 0&&(o=e.markdownNotSupportedFallback),this.isDisposed||r.isCancellationRequested)return}this.show(o,t,i)})}show(e,t,i){const n=this._hoverWidget;if(this.hasContent(e)){const o=Object.assign({content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!n},i);this._hoverWidget=this.hoverDelegate.showHover(o,t)}n==null||n.dispose()}hasContent(e){return e?kte(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function Ete(s,e,t,i){let n,o;const r=(f,g)=>{var m;f&&(o==null||o.dispose(),o=void 0),g&&(n==null||n.dispose(),n=void 0),(m=s.onDidHideHover)===null||m===void 0||m.call(s)},a=(f,g,m)=>new Za(()=>r7(this,void 0,void 0,function*(){(!o||o.isDisposed)&&(o=new JNe(s,m||e,f>0),yield o.update(t,g,i))}),f),l=()=>{if(n)return;const f=new Ae,g=C=>r(!1,C.fromElement===e);f.add(Le(e,it.MOUSE_LEAVE,g,!0));const m=()=>r(!0,!0);f.add(Le(e,it.MOUSE_DOWN,m,!0));const _={targetElements:[e],dispose:()=>{}};if(s.placement===void 0||s.placement==="mouse"){const C=S=>{_.x=S.x+10,S.target instanceof HTMLElement&&S.target.classList.contains("action-label")&&r(!0,!0)};f.add(Le(e,it.MOUSE_MOVE,C,!0))}f.add(a(s.delay,!1,_)),n=f},c=Le(e,it.MOUSE_OVER,l,!0);return{show:f=>{r(!1,!0),a(0,f)},hide:()=>{r(!0,!0)},update:(f,g)=>r7(this,void 0,void 0,function*(){t=f,yield o==null?void 0:o.update(t,void 0,g)}),dispose:()=>{c.dispose(),r(!0,!0)}}}class Yu extends ge{constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof _a&&this._register(t.onDidChange(n=>{!this.element||this.handleActionChangeEvent(n)}))}get action(){return this._action}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new _0)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Zi.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,Ka&&this._register(Le(e,it.DRAG_START,n=>{var o;return(o=n.dataTransfer)===null||o===void 0?void 0:o.setData(CL.TEXT,this._action.label)}))),this._register(Le(t,vn.Tap,n=>this.onClick(n,!0))),this._register(Le(t,it.MOUSE_DOWN,n=>{i||qi.stop(n,!0),this._action.enabled&&n.button===0&&t.classList.add("active")})),mi&&this._register(Le(t,it.CONTEXT_MENU,n=>{n.button===0&&n.ctrlKey===!0&&this.onClick(n)})),this._register(Le(t,it.CLICK,n=>{qi.stop(n,!0),this.options&&this.options.isMenu||this.onClick(n)})),this._register(Le(t,it.DBLCLICK,n=>{qi.stop(n,!0)})),[it.MOUSE_UP,it.MOUSE_OUT].forEach(n=>{this._register(Le(t,n,o=>{qi.stop(o),t.classList.remove("active")}))})}onClick(e,t=!1){var i;qi.stop(e,!0);const n=Ba(this._context)?!((i=this.options)===null||i===void 0)&&i.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,n)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getTooltip(){return this.getAction().tooltip}updateTooltip(){var e;if(!this.element)return;const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.element.setAttribute("aria-label",t),this.options.hoverDelegate?(this.element.title="",this.customHover?this.customHover.update(t):(this.customHover=Ete(this.options.hoverDelegate,this.element,t),this._store.add(this.customHover))):this.element.title=t}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class hS extends Yu{constructor(e,t,i={}){super(e,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=Se(this.element,Pe("a.action-label"))),this.label&&(this._action.id===Bo.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(Se(this.element,Pe("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}getTooltip(){let e=null;return this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=b({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e!=null?e:void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)===null||e===void 0||e.classList.remove("codicon")}updateEnabled(){var e,t;this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)===null||e===void 0||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)===null||t===void 0||t.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var eRe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class Cd extends ge{constructor(e,t={}){var i,n,o,r,a,l;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new J),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new J({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new J),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new J),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(i=t.context)!==null&&i!==void 0?i:null,this._orientation=(n=this.options.orientation)!==null&&n!==void 0?n:0,this._triggerKeys={keyDown:(r=(o=this.options.triggerKeys)===null||o===void 0?void 0:o.keyDown)!==null&&r!==void 0?r:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new _0,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(f=>this._onDidRun.fire(f))),this._register(this._actionRunner.onBeforeRun(f=>this._onBeforeRun.fire(f))),this._actionIds=[],this.viewItems=[],this.viewItemDisposables=new Map,this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let c,d;switch(this._orientation){case 0:c=[15],d=[17];break;case 1:c=[16],d=[18],this.domNode.className+=" vertical";break}this._register(Le(this.domNode,it.KEY_DOWN,f=>{const g=new kn(f);let m=!0;const _=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;c&&(g.equals(c[0])||g.equals(c[1]))?m=this.focusPrevious():d&&(g.equals(d[0])||g.equals(d[1]))?m=this.focusNext():g.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():g.equals(14)?m=this.focusFirst():g.equals(13)?m=this.focusLast():g.equals(2)&&_ instanceof Yu&&_.trapsArrowNavigation?m=this.focusNext():this.isTriggerKeyEvent(g)?this._triggerKeys.keyDown?this.doTrigger(g):this.triggerKeyDown=!0:m=!1,m&&(g.preventDefault(),g.stopPropagation())})),this._register(Le(this.domNode,it.KEY_UP,f=>{const g=new kn(f);this.isTriggerKeyEvent(g)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(g)),g.preventDefault(),g.stopPropagation()):(g.equals(2)||g.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(zm(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{($b()===this.domNode||!Uh($b(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(i=>i instanceof Yu&&i.isEnabled());t instanceof Yu&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Yu&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Uh($b(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const i=Array.isArray(e)?e:[e];let n=Ig(t.index)?t.index:null;i.forEach(o=>{const r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation");let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o)),a||(a=new hS(this.context,o,Object.assign({hoverDelegate:this.options.hoverDelegate},t))),this.options.allowContextMenu||this.viewItemDisposables.set(a,Le(r,it.CONTEXT_MENU,l=>{qi.stop(l,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(r),this.focusable&&a instanceof Yu&&this.viewItems.length===0&&a.setFocusable(!0),n===null||n<0||n>=this.actionsList.children.length?(this.actionsList.appendChild(r),this.viewItems.push(a),this._actionIds.push(o.id)):(this.actionsList.insertBefore(r,this.actionsList.children[n]),this.viewItems.splice(n,0,a),this._actionIds.splice(n,0,o.id),n++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){Ni(this.viewItems),this.viewItemDisposables.forEach(e=>e.dispose()),this.viewItemDisposables.clear(),this.viewItems=[],this._actionIds=[],Ts(this.actionsList),this.refreshRole()}length(){return this.viewItems.length}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const n=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=n===-1?void 0:n,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Bo.ID));return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Bo.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){var n;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((n=this.viewItems[this.previouslyFocusedItem])===null||n===void 0||n.blur());const o=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(o){let r=!0;bT(o.focus)||(r=!1),this.options.focusOnlyEnabledItems&&bT(o.isEnabled)&&!o.isEnabled()&&(r=!1),o.action.id===Bo.ID&&(r=!1),r?(i||this.previouslyFocusedItem!==this.focusedItem)&&(o.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Yu){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}run(e,t){return eRe(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){Ni(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const tRe={IconContribution:"base.contributions.icons"};var TG;(function(s){function e(t,i){let n=t.defaults;for(;Pi.isThemeIcon(n);){const o=k_.getIcon(n.id);if(!o)return;n=o.defaults}return n}s.getDefinition=e})(TG||(TG={}));var IG;(function(s){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(n=>({format:n.format,location:n.location.toString()}))}}s.toJSONObject=e;function t(i){const n=o=>Kr(o)?o:void 0;if(i&&Array.isArray(i.src)&&i.src.every(o=>Kr(o.format)&&Kr(o.location)))return{weight:n(i.weight),style:n(i.style),src:i.src.map(o=>({format:o.format,location:yt.parse(o.location)}))}}s.fromJSONObject=t})(IG||(IG={}));class iRe{constructor(){this._onDidChange=new J,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:b("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:b("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${yr.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,n){const o=this.iconsById[e];if(o){if(i&&!o.description){o.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return o}const r={id:e,description:i,defaults:t,deprecationMessage:n};this.iconsById[e]=r;const a={$ref:"#/definitions/icons"};return n&&(a.deprecationMessage=n),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(o,r)=>o.id.localeCompare(r.id),t=o=>{for(;Pi.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const n=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(const o of n.filter(r=>!!r.description).sort(e))i.push(`|<i class="${t(o)}"></i>|${o.id}|${Pi.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const o of n.filter(r=>!Pi.isThemeIcon(r.defaults)).sort(e))i.push(`|<i class="${t(o)}"></i>|${o.id}|`);return i.join(`
`)}}const k_=new iRe;Wn.add(tRe.IconContribution,k_);function Ls(s,e,t,i){return k_.registerIcon(s,e,t,i)}function Tte(){return k_}function nRe(){for(const s of w.getAll())k_.registerIcon(s.id,s.definition,s.description)}nRe();const Ite="vscode://schemas/icons",Nte=Wn.as(xN.JSONContribution);Nte.registerSchema(Ite,k_.getIconSchema());const NG=new Xi(()=>Nte.notifySchemaChanged(Ite),200);k_.onDidChange(()=>{NG.isScheduled()||NG.schedule()});const Rte=Ls("widget-close",w.close,b("widgetClose","Icon for the close action in widgets."));Ls("goto-previous-location",w.arrowUp,b("previousChangeIcon","Icon for goto previous editor location."));Ls("goto-next-location",w.arrowDown,b("nextChangeIcon","Icon for goto next editor location."));Pi.modify(w.sync,"spin");Pi.modify(w.loading,"spin");var sRe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},oRe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},rRe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})},V4;const $k=3;class mw{constructor(e,t,i,n){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=i,this.modifiedLineEnd=n}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class W4{constructor(e){this.entries=e}}const aRe=Ls("diff-review-insert",w.add,b("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),lRe=Ls("diff-review-remove",w.remove,b("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),cRe=Ls("diff-review-close",w.close,b("diffReviewCloseIcon","Icon for 'Close' in diff review."));let fI=class Zp extends ge{constructor(e,t){super(),this._languageService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=Di(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=Di(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new Cd(this.actionBarContainer.domNode)),this._actionBar.push(new _a("diffreview.close",b("label.close","Close"),"close-diff-review "+Pi.asClassName(cRe),!0,()=>rRe(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=Di(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=Di(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new vL(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{!this._isVisible||(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{!this._isVisible||this._render()})),this._register(Ps(this.domNode.domNode,"click",i=>{i.preventDefault();const n=jJ(i.target,"diff-review-row");n&&this._goToRow(n)})),this._register(Ps(this.domNode.domNode,"keydown",i=>{(i.equals(18)||i.equals(2066)||i.equals(530))&&(i.preventDefault(),this._goToRow(this._getNextRow())),(i.equals(16)||i.equals(2064)||i.equals(528))&&(i.preventDefault(),this._goToRow(this._getPrevRow())),(i.equals(9)||i.equals(2057)||i.equals(521)||i.equals(1033))&&(i.preventDefault(),this.hide()),(i.equals(10)||i.equals(3))&&(i.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let i=-1;for(let n=0,o=this._diffs.length;n<o;n++)if(this._diffs[n]===this._currentDiff){i=n;break}e=this._diffs.length+i-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new se(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let i=-1;for(let n=0,o=this._diffs.length;n<o;n++)if(this._diffs[n]===this._currentDiff){i=n;break}e=i+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new se(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1;const t=this._getCurrentFocusedRow();if(t){const i=parseInt(t.getAttribute("data-line"),10);isNaN(i)||(e=i)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new se(e,1)),this._diffEditor.revealPosition(new se(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){const e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){const e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){const e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){const t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,i){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(i),this._content.setHeight(i),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel();return!t||!i?[]:Zp._mergeAdjacent(e,t.getLineCount(),i.getLineCount())}static _mergeAdjacent(e,t,i){if(!e||e.length===0)return[];const n=[];let o=0;for(let c=0,d=e.length;c<d;c++){const f=e[c],g=f.originalStartLineNumber,m=f.originalEndLineNumber,_=f.modifiedStartLineNumber,C=f.modifiedEndLineNumber,S=[];let x=0;{const L=m===0?g:g-1,k=C===0?_:_-1;let T=1,A=1;if(c>0){const R=e[c-1];R.originalEndLineNumber===0?T=R.originalStartLineNumber+1:T=R.originalEndLineNumber+1,R.modifiedEndLineNumber===0?A=R.modifiedStartLineNumber+1:A=R.modifiedEndLineNumber+1}let O=L-$k+1,I=k-$k+1;if(O<T){const R=T-O;O=O+R,I=I+R}if(I<A){const R=A-I;O=O+R,I=I+R}S[x++]=new mw(O,L,I,k)}m!==0&&(S[x++]=new mw(g,m,0,0)),C!==0&&(S[x++]=new mw(0,0,_,C));{const L=m===0?g+1:m+1,k=C===0?_+1:C+1;let T=t,A=i;if(c+1<d){const R=e[c+1];R.originalEndLineNumber===0?T=R.originalStartLineNumber:T=R.originalStartLineNumber-1,R.modifiedEndLineNumber===0?A=R.modifiedStartLineNumber:A=R.modifiedStartLineNumber-1}let O=L+$k-1,I=k+$k-1;if(O>T){const R=T-O;O=O+R,I=I+R}if(I>A){const R=A-I;O=O+R,I=I+R}S[x++]=new mw(L,O,k,I)}n[o++]=new W4(S)}let r=n[0].entries;const a=[];let l=0;for(let c=1,d=n.length;c<d;c++){const f=n[c].entries,g=r[r.length-1],m=f[0];if(g.getType()===0&&m.getType()===0&&m.originalLineStart<=g.originalLineEnd){r[r.length-1]=new mw(g.originalLineStart,m.originalLineEnd,g.modifiedLineStart,m.modifiedLineEnd),r=r.concat(f.slice(1));continue}a[l++]=new W4(r),r=f}return a[l++]=new W4(r),a}_findDiffIndex(e){const t=e.lineNumber;for(let i=0,n=this._diffs.length;i<n;i++){const o=this._diffs[i].entries,r=o[o.length-1].modifiedLineEnd;if(t<=r)return i}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),i=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel(),o=i.getOptions(),r=n.getOptions();if(!this._isVisible||!i||!n){Ts(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries,c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),c.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),Fo(c,t.get(46));let d=0,f=0,g=0,m=0;for(let I=0,R=l.length;I<R;I++){const B=l[I],z=B.originalLineStart,q=B.originalLineEnd,te=B.modifiedLineStart,U=B.modifiedLineEnd;z!==0&&(d===0||z<d)&&(d=z),q!==0&&(f===0||q>f)&&(f=q),te!==0&&(g===0||te<g)&&(g=te),U!==0&&(m===0||U>m)&&(m=U)}const _=document.createElement("div");_.className="diff-review-row";const C=document.createElement("div");C.className="diff-review-cell diff-review-summary";const S=f-d+1,x=m-g+1;C.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${d},${S} +${g},${x} @@`)),_.setAttribute("data-line",String(g));const L=I=>I===0?b("no_lines_changed","no lines changed"):I===1?b("one_line_changed","1 line changed"):b("more_lines_changed","{0} lines changed",I),k=L(S),T=L(x);_.setAttribute("aria-label",b({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,d,k,g,T)),_.appendChild(C),_.setAttribute("role","listitem"),c.appendChild(_);const A=t.get(61);let O=g;for(let I=0,R=l.length;I<R;I++){const B=l[I];Zp._renderSection(c,B,O,A,this._width,e,i,o,t,n,r,this._languageService.languageIdCodec),B.modifiedLineStart!==0&&(O=B.modifiedLineEnd)}Ts(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}static _renderSection(e,t,i,n,o,r,a,l,c,d,f,g){const m=t.getType();let _="diff-review-row",C="";const S="diff-review-spacer";let x=null;switch(m){case 1:_="diff-review-row line-insert",C=" char-insert",x=aRe;break;case 2:_="diff-review-row line-delete",C=" char-delete",x=lRe;break}const L=t.originalLineStart,k=t.originalLineEnd,T=t.modifiedLineStart,A=t.modifiedLineEnd,O=Math.max(A-T,k-L),I=r.get(133),R=I.glyphMarginWidth+I.lineNumbersWidth,B=c.get(133),z=10+B.glyphMarginWidth+B.lineNumbersWidth;for(let q=0;q<=O;q++){const te=L===0?0:L+q,U=T===0?0:T+q,X=document.createElement("div");X.style.minWidth=o+"px",X.className=_,X.setAttribute("role","listitem"),U!==0&&(i=U),X.setAttribute("data-line",String(i));const le=document.createElement("div");le.className="diff-review-cell",le.style.height=`${n}px`,X.appendChild(le);const be=document.createElement("span");be.style.width=R+"px",be.style.minWidth=R+"px",be.className="diff-review-line-number"+C,te!==0?be.appendChild(document.createTextNode(String(te))):be.innerText="\xA0",le.appendChild(be);const pe=document.createElement("span");pe.style.width=z+"px",pe.style.minWidth=z+"px",pe.style.paddingRight="10px",pe.className="diff-review-line-number"+C,U!==0?pe.appendChild(document.createTextNode(String(U))):pe.innerText="\xA0",le.appendChild(pe);const ke=document.createElement("span");if(ke.className=S,x){const Ue=document.createElement("span");Ue.className=Pi.asClassName(x),Ue.innerText="\xA0\xA0",ke.appendChild(Ue)}else ke.innerText="\xA0\xA0";le.appendChild(ke);let He;if(U!==0){let Ue=this._renderLine(d,c,f.tabSize,U,g);Zp._ttPolicy&&(Ue=Zp._ttPolicy.createHTML(Ue)),le.insertAdjacentHTML("beforeend",Ue),He=d.getLineContent(U)}else{let Ue=this._renderLine(a,r,l.tabSize,te,g);Zp._ttPolicy&&(Ue=Zp._ttPolicy.createHTML(Ue)),le.insertAdjacentHTML("beforeend",Ue),He=a.getLineContent(te)}He.length===0&&(He=b("blankLine","blank"));let Ge="";switch(m){case 0:te===U?Ge=b({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",He,te):Ge=b("equalLine","{0} original line {1} modified line {2}",He,te,U);break;case 1:Ge=b("insertLine","+ {0} modified line {1}",He,U);break;case 2:Ge=b("deleteLine","- {0} original line {1}",He,te);break}X.setAttribute("aria-label",Ge),e.appendChild(X)}}static _renderLine(e,t,i,n,o){const r=e.getLineContent(n),a=t.get(46),l=Os.createEmpty(r,o),c=qa.isBasicASCII(r,e.mightContainNonBasicASCII()),d=qa.containsRTL(r,c,e.mightContainRTL());return IN(new ep(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,r,!1,c,d,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(107),t.get(90),t.get(85),t.get(47)!==Va.OFF,null)).html}};fI._ttPolicy=(V4=window.trustedTypes)===null||V4===void 0?void 0:V4.createPolicy("diffReview",{createHTML:s=>s});fI=sRe([oRe(1,Vn)],fI);Cn((s,e)=>{const t=s.getColor(kee);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const i=s.getColor(rC);i&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${i} 0 -6px 6px -6px inset; }`)});class uRe extends ot{constructor(){super({id:"editor.action.diffReview.next",label:b("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:Je.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const i=Ate(e);i&&i.diffReviewNext()}}class dRe extends ot{constructor(){super({id:"editor.action.diffReview.prev",label:b("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:Je.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const i=Ate(e);i&&i.diffReviewPrev()}}function Ate(s){const e=s.get(Vi),t=e.listDiffEditors(),i=e.getActiveCodeEditor();if(!i)return null;for(let n=0,o=t.length;n<o;n++){const r=t[n];if(r.getModifiedEditor().getId()===i.getId()||r.getOriginalEditor().getId()===i.getId())return r}return null}We(uRe);We(dRe);const hRe="editorWorkerService",Ml=bi(hRe),E_=bi("contextViewService"),sf=bi("contextMenuService");var H4=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class fRe extends ge{constructor(e,t,i,n,o,r){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=i,this.diff=n,this._contextMenuService=o,this._clipboardService=r,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=w.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=i.getOption(61),l=i.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const c=[],d=n.modifiedEndLineNumber===0;c.push(new _a("diff.clipboard.copyDeletedContent",d?n.originalEndLineNumber>n.modifiedStartLineNumber?b("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):b("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):n.originalEndLineNumber>n.modifiedStartLineNumber?b("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):b("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>H4(this,void 0,void 0,function*(){const C=new M(n.originalStartLineNumber,1,n.originalEndLineNumber+1,1),S=n.originalModel.getValueInRange(C);yield this._clipboardService.writeText(S)})));let f=0,g;n.originalEndLineNumber>n.modifiedStartLineNumber&&(g=new _a("diff.clipboard.copyDeletedLineContent",d?b("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",n.originalStartLineNumber):b("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",n.originalStartLineNumber),void 0,!0,()=>H4(this,void 0,void 0,function*(){const C=n.originalModel.getLineContent(n.originalStartLineNumber+f);if(C===""){const S=n.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(S===0?`
`:`\r
`)}else yield this._clipboardService.writeText(C)})),c.push(g)),i.getOption(83)||c.push(new _a("diff.inline.revertChange",b("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>H4(this,void 0,void 0,function*(){const C=new M(n.originalStartLineNumber,1,n.originalEndLineNumber,n.originalModel.getLineMaxColumn(n.originalEndLineNumber)),S=n.originalModel.getValueInRange(C);if(n.modifiedEndLineNumber===0){const x=i.getModel().getLineMaxColumn(n.modifiedStartLineNumber);i.executeEdits("diffEditor",[{range:new M(n.modifiedStartLineNumber,x,n.modifiedStartLineNumber,x),text:l+S}])}else{const x=i.getModel().getLineMaxColumn(n.modifiedEndLineNumber);i.executeEdits("diffEditor",[{range:new M(n.modifiedStartLineNumber,1,n.modifiedEndLineNumber,x),text:S}])}})));const _=(C,S)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:C,y:S}),getActions:()=>(g&&(g.label=d?b("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",n.originalStartLineNumber+f):b("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",n.originalStartLineNumber+f)),c),autoSelectFirstItem:!0})};this._register(Ps(this._diffActions,"mousedown",C=>{const{top:S,height:x}=Oo(this._diffActions),L=Math.floor(a/3);C.preventDefault(),_(C.posx,S+x+L)})),this._register(i.onMouseMove(C=>{C.target.type===8||C.target.type===5?C.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,f=this._updateLightBulbPosition(this._marginDomNode,C.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(i.onMouseDown(C=>{!C.event.rightButton||(C.target.type===8||C.target.type===5)&&C.target.detail.viewZoneId===this._viewZoneId&&(C.event.preventDefault(),f=this._updateLightBulbPosition(this._marginDomNode,C.event.browserEvent.y,a),_(C.event.posx,C.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,i){const{top:n}=Oo(e),o=t-n,r=Math.floor(o/i),a=r*i;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let c=0;c<this.diff.viewLineCounts.length;c++)if(l+=this.diff.viewLineCounts[c],r<l)return c}return r}}const of=bi("clipboardService"),Mte=bi("progressService");Object.freeze({total(){},worked(){},done(){}});class T_{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}T_.None=Object.freeze({report(){}});const ip=bi("editorProgressService");var gRe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ah=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},z4;class RG{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const i of this._zones)t.removeZone(i)}),this._zones=[],this._zonesMap={},e.changeDecorations(t=>{this._decorations=t.deltaDecorations(this._decorations,[])})}apply(e,t,i,n){const o=n?Wg.capture(e):null;e.changeViewZones(r=>{var a;for(const l of this._zones)r.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,c=i.zones.length;l<c;l++){const d=i.zones[l];d.suppressMouseDown=!0;const f=r.addZone(d);this._zones.push(f),this._zonesMap[String(f)]=!0,i.zones[l].diff&&d.marginDomNode&&(d.suppressMouseDown=!1,((a=i.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new fRe(f,d.marginDomNode,e,i.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),o==null||o.restore(e),e.changeDecorations(r=>{this._decorations=r.deltaDecorations(this._decorations,i.decorations)}),t==null||t.setZones(i.overviewZones)}}let pRe=0;const mRe=Ls("diff-insert",w.add,b("diffInsertIcon","Line decoration for inserts in the diff editor.")),Ote=Ls("diff-remove",w.remove,b("diffRemoveIcon","Line decoration for removals in the diff editor.")),AG=(z4=window.trustedTypes)===null||z4===void 0?void 0:z4.createPolicy("diffEditorWidget",{createHTML:s=>s});let Hg=class Eo extends ge{constructor(e,t,i,n,o,r,a,l,c,d,f,g){super(),this._editorProgressService=g,this._onDidDispose=this._register(new J),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new J),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new J),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=o,this._codeEditorService=l,this._contextKeyService=this._register(r.createScoped(e)),this._instantiationService=a.createChild(new oR([jt,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=c,this._notificationService=d,this._id=++pRe,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=PG(t,{enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new Xi(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=Eo._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=Di(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(Ps(this._overviewDomElement,it.POINTER_DOWN,_=>{this._modifiedEditor.delegateVerticalScrollbarPointerDown(_)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new RG(f,n),this._modifiedEditorState=new RG(f,n),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new cee(this._containerDomElement,t.dimension)),this._register(this._elementSizeObserver.onDidChange(()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,i.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,i.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(fI,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new kh(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new OG(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(c.onDidColorThemeChange(_=>{this._strategy&&this._strategy.applyColors(_)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=Eo._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const m=Sm.getDiffEditorContributions();for(const _ of m)try{this._register(a.createInstance(_.ctor,this))}catch(C){Yt(C)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let i="monaco-diff-editor monaco-editor-background ";return t&&(i+="side-by-side "),i+=HT(e.type),i}_disposeOverviewRulers(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose(),this._originalOverviewRuler=null),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose(),this._modifiedOverviewRuler=null)}_createOverviewRulers(){!this._options.renderOverviewRuler||(ny(!this._originalOverviewRuler&&!this._modifiedOverviewRuler),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const i=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(i.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(i.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(i.onDidChangeConfiguration(o=>{!i.getModel()||(o.hasChanged(46)&&this._updateDecorationsRunner.schedule(),o.hasChanged(134)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(i.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(i.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const n=this._contextKeyService.createKey("isInDiffLeftEditor",i.hasWidgetFocus());return this._register(i.onDidFocusEditorWidget(()=>n.set(!0))),this._register(i.onDidBlurEditorWidget(()=>n.set(!1))),this._register(i.onDidContentSizeChange(o=>{const r=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Eo.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),i}_createRightHandSideEditor(e,t){const i=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(i.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(i.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(i.onDidChangeConfiguration(o=>{!i.getModel()||(o.hasChanged(46)&&this._updateDecorationsRunner.schedule(),o.hasChanged(134)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(i.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(i.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(i.onDidChangeModelOptions(o=>{o.tabSize&&this._updateDecorationsRunner.schedule()}));const n=this._contextKeyService.createKey("isInDiffRightEditor",i.hasWidgetFocus());return this._register(i.onDidFocusEditorWidget(()=>n.set(!0))),this._register(i.onDidBlurEditorWidget(()=>n.set(!1))),this._register(i.onDidContentSizeChange(o=>{const r=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Eo.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),this._register(i.onMouseDown(o=>{var r,a;if(!o.event.rightButton&&o.target.position&&((r=o.target.element)===null||r===void 0?void 0:r.className.includes("arrow-revert-change"))){const l=o.target.position.lineNumber,c=(a=this._diffComputationResult)===null||a===void 0?void 0:a.changes.find(d=>d.modifiedStartLineNumber===l-1||d.modifiedStartLineNumber===l);c&&this.revertChange(c),o.event.stopPropagation(),this._updateDecorations();return}})),i}revertChange(e){const t=this._modifiedEditor,i=this._originalEditor.getModel(),n=this._modifiedEditor.getModel();if(!i||!n||!t)return;const o=e.originalEndLineNumber>0?new M(e.originalStartLineNumber,1,e.originalEndLineNumber,i.getLineMaxColumn(e.originalEndLineNumber)):null,r=o?i.getValueInRange(o):null,a=e.modifiedEndLineNumber>0?new M(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber,n.getLineMaxColumn(e.modifiedEndLineNumber)):null,l=n.getEOL();if(e.originalEndLineNumber===0&&a){let c=a;e.modifiedStartLineNumber>1?c=a.setStartPosition(e.modifiedStartLineNumber-1,n.getLineMaxColumn(e.modifiedStartLineNumber-1)):e.modifiedEndLineNumber<n.getLineCount()&&(c=a.setEndPosition(e.modifiedEndLineNumber+1,1)),t.executeEdits("diffEditor",[{range:c,text:""}])}else if(e.modifiedEndLineNumber===0&&r!==null){const c=e.modifiedStartLineNumber<n.getLineCount()?new se(e.modifiedStartLineNumber+1,1):new se(e.modifiedStartLineNumber,n.getLineMaxColumn(e.modifiedStartLineNumber));t.executeEdits("diffEditor",[{range:M.fromPositions(c,c),text:e.modifiedStartLineNumber<n.getLineCount()?r+l:l+r}])}else a&&r!==null&&t.executeEdits("diffEditor",[{range:a,text:r}])}_createInnerEditor(e,t,i,n){return e.createInstance(k0,t,i,n)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return lL.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=PG(e,this._options),i=wRe(this._options,t);this._options=t;const n=i.ignoreTrimWhitespace||i.renderIndicators||i.renderMarginRevertIcon,o=this._isVisible&&(i.maxComputationTime||i.maxFileSize);n?this._beginUpdateDecorations():o&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),i.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new kh(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new OG(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=Eo._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),i.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._disposeOverviewRulers(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._createOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e,t="api"){this._modifiedEditor.setPosition(e,t)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e,t="api"){this._modifiedEditor.setSelection(e,t)}setSelections(e,t="api"){this._modifiedEditor.setSelections(e,t)}revealLines(e,t,i=0){this._modifiedEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._modifiedEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._modifiedEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,n=!0){this._modifiedEditor.revealRange(e,t,i,n)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,i){this._modifiedEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._modifiedEditor.createDecorationsCollection(e)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),i=Eo.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Eo.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:Eo.ONE_OVERVIEW_WIDTH,right:i+Eo.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:Eo.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),Eo.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const i=this._diffComputationToken,n=this._options.maxFileSize*1024*1024,o=r=>{const a=r.getValueLength();return n===0||a<=n};if(!o(e)||!o(t)){(!Eo._equals(e.uri,this._lastOriginalWarning)||!Eo._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(b("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(r=>{i===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=r,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},r=>{i===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),i=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),n=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,this._options.renderMarginRevertIcon,t,i);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,n.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,n.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:(t.wordWrapOverride1="off",t.wordWrapOverride2="off"),e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.dropIntoEditor={enabled:!t.readOnly},t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=fu.revealHorizontalRightPadding.defaultValue+Eo.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),i=this._getReviewHeight(),n=this._strategy.layout();this._originalDomNode.style.width=n+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-n+"px",this._modifiedDomNode.style.left=n+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-i+"px",this._overviewDomElement.style.width=Eo.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-Eo.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(Eo.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:n,height:t-i}),this._modifiedEditor.layout({width:e-n-(this._options.renderOverviewRuler?Eo.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-i}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-i,e,i),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),i=this._modifiedEditor.getScrollHeight(),n=Math.max(0,e.height),o=Math.max(0,n-2*0),r=i>0?o/i:0,a=Math.max(0,Math.floor(e.height*r)),l=Math.floor(t*r);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const i=this._diffComputationResult?this._diffComputationResult.changes:[];if(i.length===0||e<t(i[0]))return null;let n=0,o=i.length-1;for(;n<o;){const r=Math.floor((n+o)/2),a=t(i[r]),l=r+1<=o?t(i[r+1]):1073741824;e<a?o=r-1:e>=l?n=r+1:(n=r,o=r)}return i[n]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;const i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),n=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,r=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-i;return a<=o?n+Math.min(a,r):n+r-o+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;const i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),n=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,r=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=r?i+Math.min(a,o):i+o-r+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};Hg.ONE_OVERVIEW_WIDTH=15;Hg.ENTIRE_DIFF_OVERVIEW_WIDTH=30;Hg.UPDATE_DIFF_DECORATIONS_DELAY=200;Hg=gRe([ah(3,of),ah(4,Ml),ah(5,jt),ah(6,Zt),ah(7,Vi),ah(8,cn),ah(9,gs),ah(10,sf),ah(11,ip)],Hg);class Pte extends ge{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=e.getColor(Txe)||(e.getColor(gee)||M3).transparent(2),i=e.getColor(Ixe)||(e.getColor(pee)||O3).transparent(2),n=!t.equals(this._insertColor)||!i.equals(this._removeColor);return this._insertColor=t,this._removeColor=i,n}getEditorsDiffDecorations(e,t,i,n,o,r){r=r.sort((d,f)=>d.afterLineNumber-f.afterLineNumber),o=o.sort((d,f)=>d.afterLineNumber-f.afterLineNumber);const a=this._getViewZones(e,o,r,i),l=this._getOriginalEditorDecorations(a,e,t,i),c=this._getModifiedEditorDecorations(a,e,t,i,n);return{original:{decorations:l.decorations,overviewZones:l.overviewZones,zones:a.original},modified:{decorations:c.decorations,overviewZones:c.overviewZones,zones:a.modified}}}}class MG{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class vm{constructor(e,t,i,n,o){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=i,this._originalEditor=n,this._modifiedEditor=o}static _getViewLineCount(e,t,i){const n=e.getModel(),o=e._getViewModel();if(n&&o){const r=fS(n,o,t,i);return r.endLineNumber-r.startLineNumber+1}return i-t+1}getViewZones(){const e=this._originalEditor.getOption(61),t=this._modifiedEditor.getOption(61),i=this._originalEditor.getOption(134).wrappingColumn!==-1,n=this._modifiedEditor.getOption(134).wrappingColumn!==-1,o=i||n,r=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,c={original:[],modified:[]};let d=0,f=0,g=0,m=0,_=0,C=0;const S=(O,I)=>O.afterLineNumber-I.afterLineNumber,x=(O,I)=>{if(I.domNode===null&&O.length>0){const R=O[O.length-1];if(R.afterLineNumber===I.afterLineNumber&&R.domNode===null){R.heightInLines+=I.heightInLines;return}}O.push(I)},L=new MG(this._modifiedForeignVZ),k=new MG(this._originalForeignVZ);let T=1,A=1;for(let O=0,I=this._lineChanges.length;O<=I;O++){const R=O<I?this._lineChanges[O]:null;R!==null?(g=R.originalStartLineNumber+(R.originalEndLineNumber>0?-1:0),m=R.modifiedStartLineNumber+(R.modifiedEndLineNumber>0?-1:0),f=R.originalEndLineNumber>0?vm._getViewLineCount(this._originalEditor,R.originalStartLineNumber,R.originalEndLineNumber):0,d=R.modifiedEndLineNumber>0?vm._getViewLineCount(this._modifiedEditor,R.modifiedStartLineNumber,R.modifiedEndLineNumber):0,_=Math.max(R.originalStartLineNumber,R.originalEndLineNumber),C=Math.max(R.modifiedStartLineNumber,R.modifiedEndLineNumber)):(g+=1e7+f,m+=1e7+d,_=g,C=m);let B=[],z=[];if(o){let U;R?R.originalEndLineNumber>0?U=R.originalStartLineNumber-T:U=R.modifiedStartLineNumber-A:U=r.getLineCount()-T+1;for(let X=0;X<U;X++){const le=T+X,be=A+X,pe=a.getModelLineViewLineCount(le),ke=l.getModelLineViewLineCount(be);pe<ke?B.push({afterLineNumber:le,heightInLines:ke-pe,domNode:null,marginDomNode:null}):pe>ke&&z.push({afterLineNumber:be,heightInLines:pe-ke,domNode:null,marginDomNode:null})}R&&(T=(R.originalEndLineNumber>0?R.originalEndLineNumber:R.originalStartLineNumber)+1,A=(R.modifiedEndLineNumber>0?R.modifiedEndLineNumber:R.modifiedStartLineNumber)+1)}for(;L.current&&L.current.afterLineNumber<=C;){let U;L.current.afterLineNumber<=m?U=g-m+L.current.afterLineNumber:U=_;let X=null;R&&R.modifiedStartLineNumber<=L.current.afterLineNumber&&L.current.afterLineNumber<=R.modifiedEndLineNumber&&(X=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),B.push({afterLineNumber:U,heightInLines:L.current.height/t,domNode:null,marginDomNode:X}),L.advance()}for(;k.current&&k.current.afterLineNumber<=_;){let U;k.current.afterLineNumber<=g?U=m-g+k.current.afterLineNumber:U=C,z.push({afterLineNumber:U,heightInLines:k.current.height/e,domNode:null}),k.advance()}if(R!==null&&gI(R)){const U=this._produceOriginalFromDiff(R,f,d);U&&B.push(U)}if(R!==null&&pI(R)){const U=this._produceModifiedFromDiff(R,f,d);U&&z.push(U)}let q=0,te=0;for(B=B.sort(S),z=z.sort(S);q<B.length&&te<z.length;){const U=B[q],X=z[te],le=U.afterLineNumber-g,be=X.afterLineNumber-m;le<be?(x(c.original,U),q++):be<le?(x(c.modified,X),te++):U.shouldNotShrink?(x(c.original,U),q++):X.shouldNotShrink?(x(c.modified,X),te++):U.heightInLines>=X.heightInLines?(U.heightInLines-=X.heightInLines,te++):(X.heightInLines-=U.heightInLines,q++)}for(;q<B.length;)x(c.original,B[q]),q++;for(;te<z.length;)x(c.modified,z[te]),te++}return{original:vm._ensureDomNodes(c.original),modified:vm._ensureDomNodes(c.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=Vte()),t))}}function wh(s,e,t,i,n){return{range:new M(s,e,t,i),options:n}}const _r={arrowRevertChange:Gt.register({description:"diff-editor-arrow-revert-change",glyphMarginClassName:"arrow-revert-change "+Pi.asClassName(w.arrowRight)}),charDelete:Gt.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:Gt.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:Gt.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:Gt.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:Gt.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:Gt.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+Pi.asClassName(mRe),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:Gt.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:Gt.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+Pi.asClassName(Ote),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:Gt.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})};class kh extends Pte{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new Ro(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(i=>this._onSashDrag(i)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const i=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Hg.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let n=Math.floor((e||.5)*i);const o=Math.floor(.5*i);return n=this._disableSash?o:n||o,i>kh.MINIMUM_EDITOR_WIDTH*2?(n<kh.MINIMUM_EDITOR_WIDTH&&(n=kh.MINIMUM_EDITOR_WIDTH),n>i-kh.MINIMUM_EDITOR_WIDTH&&(n=i-kh.MINIMUM_EDITOR_WIDTH)):n=o,this._sashPosition!==n&&(this._sashPosition=n),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const i=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Hg.ENTIRE_DIFF_OVERVIEW_WIDTH:0),n=this.layout((this._startSashPosition+(e.currentX-e.startX))/i);this._sashRatio=n/i,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,i){const n=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new _Re(e,t,i,n,o).getViewZones()}_getOriginalEditorDecorations(e,t,i,n){const o=this._dataSource.getOriginalEditor(),r=String(this._removeColor),a={decorations:[],overviewZones:[]},l=o.getModel(),c=o._getViewModel();for(const d of t)if(pI(d)){a.decorations.push({range:new M(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:n?_r.lineDeleteWithSign:_r.lineDelete}),(!gI(d)||!d.charChanges)&&a.decorations.push(wh(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824,_r.charDeleteWholeLine));const f=fS(l,c,d.originalStartLineNumber,d.originalEndLineNumber);if(a.overviewZones.push(new rS(f.startLineNumber,f.endLineNumber,0,r)),d.charChanges){for(const g of d.charChanges)if(Bte(g))if(i)for(let m=g.originalStartLineNumber;m<=g.originalEndLineNumber;m++){let _,C;m===g.originalStartLineNumber?_=g.originalStartColumn:_=l.getLineFirstNonWhitespaceColumn(m),m===g.originalEndLineNumber?C=g.originalEndColumn:C=l.getLineLastNonWhitespaceColumn(m),a.decorations.push(wh(m,_,m,C,_r.charDelete))}else a.decorations.push(wh(g.originalStartLineNumber,g.originalStartColumn,g.originalEndLineNumber,g.originalEndColumn,_r.charDelete))}}return a}_getModifiedEditorDecorations(e,t,i,n,o){const r=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},c=r.getModel(),d=r._getViewModel();for(const f of t){if(o)if(f.modifiedEndLineNumber>0)l.decorations.push({range:new M(f.modifiedStartLineNumber,1,f.modifiedStartLineNumber,1),options:_r.arrowRevertChange});else{const g=e.modified.find(m=>m.afterLineNumber===f.modifiedStartLineNumber);g&&(g.marginDomNode=CRe())}if(gI(f)){l.decorations.push({range:new M(f.modifiedStartLineNumber,1,f.modifiedEndLineNumber,1073741824),options:n?_r.lineInsertWithSign:_r.lineInsert}),(!pI(f)||!f.charChanges)&&l.decorations.push(wh(f.modifiedStartLineNumber,1,f.modifiedEndLineNumber,1073741824,_r.charInsertWholeLine));const g=fS(c,d,f.modifiedStartLineNumber,f.modifiedEndLineNumber);if(l.overviewZones.push(new rS(g.startLineNumber,g.endLineNumber,0,a)),f.charChanges){for(const m of f.charChanges)if(Fte(m))if(i)for(let _=m.modifiedStartLineNumber;_<=m.modifiedEndLineNumber;_++){let C,S;_===m.modifiedStartLineNumber?C=m.modifiedStartColumn:C=c.getLineFirstNonWhitespaceColumn(_),_===m.modifiedEndLineNumber?S=m.modifiedEndColumn:S=c.getLineLastNonWhitespaceColumn(_),l.decorations.push(wh(_,C,_,S,_r.charInsert))}else l.decorations.push(wh(m.modifiedStartLineNumber,m.modifiedStartColumn,m.modifiedEndLineNumber,m.modifiedEndColumn,_r.charInsert))}}}return l}}kh.MINIMUM_EDITOR_WIDTH=100;class _Re extends vm{constructor(e,t,i,n,o){super(e,t,i,n,o)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,i){return i>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i-t,domNode:null}:null}_produceModifiedFromDiff(e,t,i){return t>i?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-i,domNode:null}:null}}class OG extends Pte{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(i=>{this._decorationsLeft!==i.decorationsLeft&&(this._decorationsLeft=i.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,i,n){const o=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new vRe(e,t,i,o,r,n).getViewZones()}_getOriginalEditorDecorations(e,t,i,n){const o=String(this._removeColor),r={decorations:[],overviewZones:[]},a=this._dataSource.getOriginalEditor(),l=a.getModel(),c=a._getViewModel();let d=0;for(const f of t)if(pI(f)){for(r.decorations.push({range:new M(f.originalStartLineNumber,1,f.originalEndLineNumber,1073741824),options:_r.lineDeleteMargin});d<e.modified.length;){const _=e.modified[d];if(_.diff&&_.diff.originalStartLineNumber>=f.originalStartLineNumber)break;d++}let g=0;if(d<e.modified.length){const _=e.modified[d];_.diff&&_.diff.originalStartLineNumber===f.originalStartLineNumber&&_.diff.originalEndLineNumber===f.originalEndLineNumber&&_.diff.modifiedStartLineNumber===f.modifiedStartLineNumber&&_.diff.modifiedEndLineNumber===f.modifiedEndLineNumber&&(g=_.heightInLines)}const m=fS(l,c,f.originalStartLineNumber,f.originalEndLineNumber);r.overviewZones.push(new rS(m.startLineNumber,m.endLineNumber,g,o))}return r}_getModifiedEditorDecorations(e,t,i,n,o){const r=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},c=r.getModel(),d=r._getViewModel();for(const f of t)if(gI(f)){l.decorations.push({range:new M(f.modifiedStartLineNumber,1,f.modifiedEndLineNumber,1073741824),options:n?_r.lineInsertWithSign:_r.lineInsert});const g=fS(c,d,f.modifiedStartLineNumber,f.modifiedEndLineNumber);if(l.overviewZones.push(new rS(g.startLineNumber,g.endLineNumber,0,a)),f.charChanges){for(const m of f.charChanges)if(Fte(m))if(i)for(let _=m.modifiedStartLineNumber;_<=m.modifiedEndLineNumber;_++){let C,S;_===m.modifiedStartLineNumber?C=m.modifiedStartColumn:C=c.getLineFirstNonWhitespaceColumn(_),_===m.modifiedEndLineNumber?S=m.modifiedEndColumn:S=c.getLineLastNonWhitespaceColumn(_),l.decorations.push(wh(_,C,_,S,_r.charInsert))}else l.decorations.push(wh(m.modifiedStartLineNumber,m.modifiedStartColumn,m.modifiedEndLineNumber,m.modifiedEndColumn,_r.charInsert))}else l.decorations.push(wh(f.modifiedStartLineNumber,1,f.modifiedEndLineNumber,1073741824,_r.charInsertWholeLine))}return l}layout(){return Math.max(5,this._decorationsLeft)}}class vRe extends vm{constructor(e,t,i,n,o,r){super(e,t,i,n,o),this._originalModel=n.getModel(),this._renderIndicators=r,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,i){const n=document.createElement("div");return n.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i,domNode:document.createElement("div"),marginDomNode:n}}_produceModifiedFromDiff(e,t,i){const n=document.createElement("div");n.className=`view-lines line-delete ${Lm}`;const o=document.createElement("div");o.className="inline-deleted-margin-view-zone";const r={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:n,marginDomNode:o,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(r),r}_finalize(e){const t=this._modifiedEditor.getOptions(),i=this._modifiedEditor.getModel().getOptions().tabSize,n=t.get(46),o=t.get(29),r=n.typicalHalfwidthCharacterWidth,a=t.get(95),l=this._originalModel.mightContainNonBasicASCII(),c=this._originalModel.mightContainRTL(),d=t.get(61),g=t.get(133).decorationsWidth,m=t.get(107),_=t.get(90),C=t.get(85),S=t.get(47),x=this._lineBreaksComputer.finalize();let L=0;for(let k=0;k<this._pendingLineChange.length;k++){const T=this._pendingLineChange[k],A=this._pendingViewZones[k],O=A.domNode;Fo(O,n);const I=A.marginDomNode;Fo(I,n);const R=[];if(T.charChanges)for(const be of T.charChanges)Bte(be)&&R.push(new oy(new M(be.originalStartLineNumber,be.originalStartColumn,be.originalEndLineNumber,be.originalEndColumn),"char-delete",0));const B=R.length>0,z=Rg(1e4);let q=0,te=0,U=null;for(let be=T.originalStartLineNumber;be<=T.originalEndLineNumber;be++){const pe=be-T.originalStartLineNumber,ke=this._originalModel.tokenization.getLineTokens(be),He=ke.getLineContent(),Ge=x[L++],Ue=pa.filter(R,be,1,He.length+1);if(Ge){let ce=0;for(const $e of Ge.breakOffsets){const tt=ke.sliceAndInflate(ce,$e,0),_e=He.substring(ce,$e);q=Math.max(q,this._renderOriginalLine(te++,_e,tt,pa.extractWrapped(Ue,ce,$e),B,l,c,n,o,d,g,m,_,C,S,i,z,I)),ce=$e}for(U||(U=[]);U.length<pe;)U[U.length]=1;U[pe]=Ge.breakOffsets.length,A.heightInLines+=Ge.breakOffsets.length-1;const ue=document.createElement("div");ue.className="gutter-delete",e.original.push({afterLineNumber:be,afterColumn:0,heightInLines:Ge.breakOffsets.length-1,domNode:Vte(),marginDomNode:ue})}else q=Math.max(q,this._renderOriginalLine(te++,He,ke,Ue,B,l,c,n,o,d,g,m,_,C,S,i,z,I))}q+=a;const X=z.build(),le=AG?AG.createHTML(X):X;if(O.innerHTML=le,A.minWidthInPx=q*r,U){const be=T.originalEndLineNumber-T.originalStartLineNumber;for(;U.length<=be;)U[U.length]=1}A.diff.viewLineCounts=U}e.original.sort((k,T)=>k.afterLineNumber-T.afterLineNumber)}_renderOriginalLine(e,t,i,n,o,r,a,l,c,d,f,g,m,_,C,S,x,L){x.appendASCIIString('<div class="view-line'),o||x.appendASCIIString(" char-delete"),x.appendASCIIString('" style="top:'),x.appendASCIIString(String(e*d)),x.appendASCIIString('px;width:1000000px;">');const k=qa.isBasicASCII(t,r),T=qa.containsRTL(t,k,a),A=uL(new ep(l.isMonospace&&!c,l.canUseHalfwidthRightwardsArrow,t,!1,k,T,0,i,n,S,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,g,m,_,C!==Va.OFF,null),x);if(x.appendASCIIString("</div>"),this._renderIndicators){const O=document.createElement("div");O.className=`delete-sign ${Pi.asClassName(Ote)}`,O.setAttribute("style",`position:absolute;top:${e*d}px;width:${f}px;height:${d}px;right:0;`),L.appendChild(O)}return A.characterMapping.getHorizontalOffset(A.characterMapping.length)}}function bRe(s,e){return ho(s,e,["off","on","inherit"])}function gI(s){return s.modifiedEndLineNumber>0}function pI(s){return s.originalEndLineNumber>0}function Fte(s){return s.modifiedStartLineNumber===s.modifiedEndLineNumber?s.modifiedEndColumn-s.modifiedStartColumn>0:s.modifiedEndLineNumber-s.modifiedStartLineNumber>0}function Bte(s){return s.originalStartLineNumber===s.originalEndLineNumber?s.originalEndColumn-s.originalStartColumn>0:s.originalEndLineNumber-s.originalStartLineNumber>0}function Vte(){const s=document.createElement("div");return s.className="diagonal-fill",s}function CRe(){const s=document.createElement("div");return s.className="arrow-revert-change "+Pi.asClassName(w.arrowRight),Pe("div",{},s)}function fS(s,e,t,i){const n=s.getLineCount();return t=Math.min(n,Math.max(1,t)),i=Math.min(n,Math.max(1,i)),e.coordinatesConverter.convertModelRangeToViewRange(new M(t,s.getLineMinColumn(t),i,s.getLineMaxColumn(i)))}function PG(s,e){return{enableSplitViewResizing:xt(s.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:xt(s.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:xt(s.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:m5(s.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:m5(s.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:xt(s.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:xt(s.renderIndicators,e.renderIndicators),originalEditable:xt(s.originalEditable,e.originalEditable),diffCodeLens:xt(s.diffCodeLens,e.diffCodeLens),renderOverviewRuler:xt(s.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:bRe(s.diffWordWrap,e.diffWordWrap)}}function wRe(s,e){return{enableSplitViewResizing:s.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:s.renderSideBySide!==e.renderSideBySide,renderMarginRevertIcon:s.renderMarginRevertIcon!==e.renderMarginRevertIcon,maxComputationTime:s.maxComputationTime!==e.maxComputationTime,maxFileSize:s.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:s.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:s.renderIndicators!==e.renderIndicators,originalEditable:s.originalEditable!==e.originalEditable,diffCodeLens:s.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:s.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:s.diffWordWrap!==e.diffWordWrap}}Cn((s,e)=>{const t=s.getColor(gee);t&&e.addRule(`.monaco-editor .char-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`);const i=s.getColor(xxe)||t;i&&e.addRule(`.monaco-editor .line-insert, .monaco-diff-editor .line-insert { background-color: ${i}; }`);const n=s.getColor(kxe)||i;n&&(e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${n}; }`),e.addRule(`.monaco-editor .gutter-insert, .monaco-diff-editor .gutter-insert { background-color: ${n}; }`));const o=s.getColor(pee);o&&e.addRule(`.monaco-editor .char-delete, .monaco-diff-editor .char-delete { background-color: ${o}; }`);const r=s.getColor(Dxe)||o;r&&e.addRule(`.monaco-editor .line-delete, .monaco-diff-editor .line-delete { background-color: ${r}; }`);const a=s.getColor(Exe)||r;a&&(e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${a}; }`),e.addRule(`.monaco-editor .gutter-delete, .monaco-diff-editor .gutter-delete { background-color: ${a}; }`));const l=s.getColor(Nxe);l&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${Vo(s.type)?"dashed":"solid"} ${l}; }`);const c=s.getColor(Rxe);c&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${Vo(s.type)?"dashed":"solid"} ${c}; }`);const d=s.getColor(rC);d&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${d}; }`);const f=s.getColor(Axe);f&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${f}; }`);const g=s.getColor(hm);g&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${g};
			}
		`);const m=s.getColor(fm);m&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${m};
			}
		`);const _=s.getColor(gm);_&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${_};
			}
		`);const C=s.getColor(Mxe);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${C} 12.5%,
			#0000 12.5%, #0000 50%,
			${C} 50%, ${C} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});var yRe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},SRe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},LRe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let a7=class extends ge{constructor(e){super(),this._themeService=e,this._onCodeEditorAdd=this._register(new J),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new J),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new J),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new J),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new Sr,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorationsByType(e))))}setModelProperty(e,t,i){const n=e.toString();let o;this._modelProperties.has(n)?o=this._modelProperties.get(n):(o=new Map,this._modelProperties.set(n,o)),o.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}openCodeEditor(e,t,i){return LRe(this,void 0,void 0,function*(){for(const n of this._codeEditorOpenHandlers){const o=yield n(e,t,i);if(o!==null)return o}return null})}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return ni(t)}};a7=yRe([SRe(0,cn)],a7);var xRe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},FG=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},DRe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let mI=class extends a7{constructor(e,t){super(t),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this.registerCodeEditorOpenHandler((i,n,o)=>DRe(this,void 0,void 0,function*(){return n?this.doOpenEditor(n,i):null}))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const o=t.resource.scheme;if(o===Xt.http||o===Xt.https)return ZJ(t.resource.toString()),e}return null}const n=t.options?t.options.selection:null;if(n)if(typeof n.endLineNumber=="number"&&typeof n.endColumn=="number")e.setSelection(n),e.revealRangeInCenter(n,1);else{const o={lineNumber:n.startLineNumber,column:n.startColumn};e.setPosition(o),e.revealPositionInCenter(o,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};mI=xRe([FG(0,jt),FG(1,cn)],mI);ki(Vi,mI);const uC=bi("layoutService");var Wte=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Hte=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let _I=class{constructor(e){this._codeEditorService=e,this.onDidLayout=gt.None,this.offset={top:0,quickPickTop:0}}get dimension(){return this._dimension||(this._dimension=RN(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}};_I=Wte([Hte(0,Vi)],_I);let l7=class extends _I{constructor(e,t){super(t),this._container=e}get hasContainer(){return!1}get container(){return this._container}};l7=Wte([Hte(1,Vi)],l7);ki(uC,_I);const wL=bi("dialogService");var kRe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},BG=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},jk=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};function Kk(s){return s.scheme===Xt.file?s.fsPath:s.path}let zte=0;class qk{constructor(e,t,i,n,o,r,a){this.id=++zte,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=n,this.groupOrder=o,this.sourceId=r,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class VG{constructor(e,t){this.resourceLabel=e,this.reason=t}}class WG{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,n]of this.elements)(n.reason===0?e:t).push(n.resourceLabel);const i=[];return e.length>0&&i.push(b({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(b({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class ERe{constructor(e,t,i,n,o,r,a){this.id=++zte,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=n,this.groupOrder=o,this.sourceId=r,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new WG),this.removedResources.has(t)||this.removedResources.set(t,new VG(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new WG),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new VG(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Ute{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,n=this._past.length;i<n;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new dte(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,n=0,o=-1;for(let a=0,l=this._past.length;a<l;a++,n++){const c=this._past[a];i&&(n>=t||c.id!==e.elements[n])&&(i=!1,o=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let a=this._future.length-1;a>=0;a--,n++){const l=this._future[a];i&&(n>=t||l.id!==e.elements[n])&&(i=!1,r=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}o!==-1&&(this._past=this._past.slice(0,o)),r!==-1&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class U4{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const $te=new Ute("","");$te.locked=!0;let c7=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=D0.None,i=Ju.None){if(e.type===0){const n=Kk(e.resource),o=this.getUriComparisonKey(e.resource);this._pushElement(new qk(e,n,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const n=new Set,o=[],r=[];for(const a of e.resources){const l=Kk(a),c=this.getUriComparisonKey(a);n.has(c)||(n.add(c),o.push(l),r.push(c))}o.length===1?this._pushElement(new qk(e,o[0],r[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new ERe(e,o,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const n=e.resourceLabels[t],o=e.strResources[t];let r;this._editStacks.has(o)?r=this._editStacks.get(o):(r=new Ute(n,o),this._editStacks.set(o,r)),r.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const n=i.getClosestPastElement();return n?n.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const o of i){const r=Kk(o.resource),a=this.getUriComparisonKey(o.resource),l=new qk(o,r,a,0,0,0,0);n.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitPastWorkspaceElement(e,n)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const o of i){const r=Kk(o.resource),a=this.getUriComparisonKey(o.resource),l=new qk(o,r,a,0,0,0,0);n.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitFutureWorkspaceElement(e,n)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const n=this.getUriComparisonKey(e);this._editStacks.has(n)&&this._editStacks.get(n).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new dte(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,o]of this._editStacks){const r=o.getClosestPastElement();!r||r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,i=n)}return[t,i]}canUndo(e){if(e instanceof Ju){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){Yt(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,n,o){const r=this._acquireLocks(i);let a;try{a=t()}catch(l){return r(),n.dispose(),this._onError(l,e)}return a?a.then(()=>(r(),n.dispose(),o()),l=>(r(),n.dispose(),this._onError(l,e))):(r(),n.dispose(),o())}_invokeWorkspacePrepare(e){return jk(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return ge.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?ge.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(ge.None);const i=e.actual.prepareUndoRedo();return i?q8(i)?t(i):i.then(n=>t(n)):t(ge.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||$te);return new U4(t)}_tryToSplitAndUndo(e,t,i,n){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(n),new Gk(this._undo(e,0,!0));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(n),new Gk}_checkWorkspaceUndo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,b({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,b({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndUndo(e,t,null,b({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const r=[];for(const a of i.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,b({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,b({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const n=this._getAffectedEditStacks(t),o=this._checkWorkspaceUndo(e,t,n,!1);return o?o.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,n,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(!!i){if(i===e){const n=t.getSecondClosestPastElement();if(n&&n.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,i,n){return jk(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(Pn.Info,b("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[b({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",i.editStacks.length),b("nok","Undo this File"),b("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const l=this._checkWorkspaceUndo(e,t,i,!1);if(l)return l.returnValue;n=!0}let o;try{o=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const r=this._checkWorkspaceUndo(e,t,i,!0);if(r)return o.dispose(),r.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,o,()=>this._continueUndoInGroup(t.groupId,n))})}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=b({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new U4([e]),n,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,o]of this._editStacks){const r=o.getClosestPastElement();!r||r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,i=n)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof Ju){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const n=this._editStacks.get(e),o=n.getClosestPastElement();if(!o)return;if(o.groupId){const[a,l]=this._findClosestUndoElementInGroup(o.groupId);if(o!==a&&l)return this._undo(l,t,i)}if((o.sourceId!==t||o.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,o);try{return o.type===1?this._workspaceUndo(e,o,i):this._resourceUndo(n,o,i)}finally{}}_confirmAndContinueUndo(e,t,i){return jk(this,void 0,void 0,function*(){if((yield this._dialogService.show(Pn.Info,b("confirmDifferentSource","Would you like to undo '{0}'?",i.label),[b("confirmDifferentSource.yes","Yes"),b("confirmDifferentSource.no","No")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,o]of this._editStacks){const r=o.getClosestFutureElement();!r||r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,i=n)}return[t,i]}canRedo(e){if(e instanceof Ju){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,n){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(n),new Gk(this._redo(e));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(n),new Gk}_checkWorkspaceRedo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,b({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,b({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndRedo(e,t,null,b({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const r=[];for(const a of i.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,b({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,b({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),n=this._checkWorkspaceRedo(e,t,i,!1);return n?n.returnValue:this._executeWorkspaceRedo(e,t,i)}_executeWorkspaceRedo(e,t,i){return jk(this,void 0,void 0,function*(){let n;try{n=yield this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const o=this._checkWorkspaceRedo(e,t,i,!0);if(o)return n.dispose(),o.returnValue;for(const r of i.editStacks)r.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,n,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=b({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new U4([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,o]of this._editStacks){const r=o.getClosestFutureElement();!r||r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,i=n)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Ju){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(!!i){if(i.groupId){const[n,o]=this._findClosestRedoElementInGroup(i.groupId);if(i!==n&&o)return this._redo(o)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};c7=kRe([BG(0,wL),BG(1,gs)],c7);class Gk{constructor(e){this.returnValue=e}}ki(sR,c7);function ca(s,e,t){return Math.min(Math.max(s,e),t)}class jte{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class TRe{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}var HG=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const Ol=bi("openerService"),IRe=Object.freeze({_serviceBrand:void 0,registerOpener(){return ge.None},registerValidator(){return ge.None},registerExternalUriResolver(){return ge.None},setDefaultExternalOpener(){},registerExternalOpener(){return ge.None},open(){return HG(this,void 0,void 0,function*(){return!1})},resolveExternalUri(s){return HG(this,void 0,void 0,function*(){return{resolved:s,dispose(){}}})}});function T6(s,e){return yt.isUri(s)?mb(s.scheme,e):tB(s,e+":")}function zG(s,...e){return e.some(t=>T6(s,t))}function Kte(s){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(s.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},s=s.with({fragment:""})),{selection:e,uri:s}}var NRe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},RRe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const Pl=bi("ILanguageFeatureDebounceService");var vI;(function(s){const e=new WeakMap;let t=0;function i(n){let o=e.get(n);return o===void 0&&(o=++t,e.set(n,o)),o}s.of=i})(vI||(vI={}));class ARe{constructor(e,t,i,n,o,r){this._logService=e,this._name=t,this._registry=i,this._default=n,this._min=o,this._max=r,this._cache=new tp(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>EN(vI.of(i),t),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?ca(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let n=this._cache.get(i);n||(n=new TRe(6),this._cache.set(i,n));const o=ca(n.update(t),this._min,this._max);return T6(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${o}ms`),o}_overall(){const e=new jte;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return ca(e,this._min,this._max)}}let u7=class{constructor(e){this._logService=e,this._data=new Map}for(e,t,i){var n,o,r;const a=(n=i==null?void 0:i.min)!==null&&n!==void 0?n:50,l=(o=i==null?void 0:i.max)!==null&&o!==void 0?o:Math.pow(a,2),c=(r=i==null?void 0:i.key)!==null&&r!==void 0?r:void 0,d=`${vI.of(e)},${a}${c?","+c:""}`;let f=this._data.get(d);return f||(f=new ARe(this._logService,t,e,this._overallAverage()|0||a*1.5,a,l),this._data.set(d,f)),f}_overallAverage(){const e=new jte;for(const t of this._data.values())e.update(t.default());return e.value}};u7=NRe([RRe(0,fc)],u7);ki(Pl,u7,!0);const yL=bi("IWorkspaceEditService");class dC{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(km.is(t))return km.lift(t);if(e0.is(t))return e0.lift(t);throw new Error("Unsupported edit")})}}class km extends dC{constructor(e,t,i=void 0,n){super(n),this.resource=e,this.textEdit=t,this.versionId=i}static is(e){return e instanceof km?!0:$r(e)&&yt.isUri(e.resource)&&$r(e.textEdit)}static lift(e){return e instanceof km?e:new km(e.resource,e.textEdit,e.versionId,e.metadata)}}class e0 extends dC{constructor(e,t,i={},n){super(n),this.oldResource=e,this.newResource=t,this.options=i}static is(e){return e instanceof e0?!0:$r(e)&&(Boolean(e.newResource)||Boolean(e.oldResource))}static lift(e){return e instanceof e0?e:new e0(e.oldResource,e.newResource,e.options,e.metadata)}}const I6=Object.freeze({id:"editor",order:5,type:"object",title:b("editorConfigurationTitle","Editor"),scope:5}),bI=Object.assign(Object.assign({},I6),{properties:{"editor.tabSize":{type:"number",default:Mo.tabSize,minimum:1,markdownDescription:b("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:Mo.insertSpaces,markdownDescription:b("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:Mo.detectIndentation,markdownDescription:b("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:Mo.trimAutoWhitespace,description:b("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Mo.largeFileOptimizations,description:b("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:b("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[b("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),b("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),b("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:b("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[b("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),b("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),b("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:b("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:b("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:b("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:["array","null"],default:null,description:b("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:b("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:b("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:b("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:b("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:b("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:b("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:b("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:b("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:!0,description:b("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:b("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:b("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:b("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[b("wordWrap.off","Lines will never wrap."),b("wordWrap.on","Lines will wrap at the viewport width."),b("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function MRe(s){return typeof s.type<"u"||typeof s.anyOf<"u"}for(const s of pb){const e=s.schema;if(typeof e<"u")if(MRe(e))bI.properties[`editor.${s.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(bI.properties[t]=e[t])}let Yk=null;function qte(){return Yk===null&&(Yk=Object.create(null),Object.keys(bI.properties).forEach(s=>{Yk[s]=!0})),Yk}function ORe(s){return qte()[`editor.${s}`]||!1}function PRe(s){return qte()[`diffEditor.${s}`]||!1}const FRe=Wn.as(tf.Configuration);FRe.registerConfiguration(bI);class Nn{static insert(e,t){return{range:new M(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}class ha{constructor(e={},t=[],i=[]){this._contents=e,this._keys=t,this._overrides=i,this.frozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?DK(this.contents,e):this.contents}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?DK(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=vh(this.contents),i=vh(this.overrides),n=[...this.keys];for(const o of e)if(!o.isEmpty()){this.mergeContents(t,o.contents);for(const r of o.overrides){const[a]=i.filter(l=>$a(l.identifiers,r.identifiers));a?(this.mergeContents(a.contents,r.contents),a.keys.push(...r.keys),a.keys=Kh(a.keys)):i.push(vh(r))}for(const r of o.keys)n.indexOf(r)===-1&&n.push(r)}return new ha(t,n,i)}freeze(){return this.frozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const n of Kh([...Object.keys(this.contents),...Object.keys(t)])){let o=this.contents[n];const r=t[n];r&&(typeof o=="object"&&typeof r=="object"?(o=vh(o),this.mergeContents(o,r)):o=r),i[n]=o}return new ha(i,this.keys,this.overrides)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&$r(e[i])&&$r(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=vh(t[i])}}checkAndFreeze(e){return this.frozen&&!Object.isFrozen(e)?SCe(e):e}getContentsForOverrideIdentifer(e){let t=null,i=null;const n=o=>{o&&(i?this.mergeContents(i,o):i=vh(o))};for(const o of this.overrides)$a(o.identifiers,[e])?t=o.contents:o.identifiers.includes(e)&&n(o.contents);return n(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),fB(this.contents,e,t,i=>{throw new Error(i)})}removeValue(e){this.removeKey(e)&&Vwe(this.contents,e)}addKey(e){let t=this.keys.length;for(let i=0;i<t;i++)e.indexOf(this.keys[i])===0&&(t=i);this.keys.splice(t,1,e)}removeKey(e){const t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class cR{constructor(e,t,i,n,o=new ha,r=new ha,a=new er,l=new ha,c=new er,d=!0){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=n,this._remoteUserConfiguration=o,this._workspaceConfiguration=r,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this._freeze=d,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new er,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let n;i.resource?(n=this._memoryConfigurationByResource.get(i.resource),n||(n=new ha,this._memoryConfigurationByResource.set(i.resource,n))):n=this._memoryConfiguration,t===void 0?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const n=this.getConsolidatedConfigurationModel(e,t,i),o=this.getFolderConfigurationModelForResource(t.resource,i),r=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=t.overrideIdentifier?this._defaultConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),l=this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration.freeze().getValue(e),c=this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration.freeze().getValue(e),d=t.overrideIdentifier?this.userConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.userConfiguration.freeze().getValue(e),f=t.overrideIdentifier?this.localUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.localUserConfiguration.freeze().getValue(e),g=t.overrideIdentifier?this.remoteUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.remoteUserConfiguration.freeze().getValue(e),m=i?t.overrideIdentifier?this._workspaceConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,_=o?t.overrideIdentifier?o.freeze().override(t.overrideIdentifier).getValue(e):o.freeze().getValue(e):void 0,C=t.overrideIdentifier?r.override(t.overrideIdentifier).getValue(e):r.getValue(e),S=n.getValue(e),x=Kh(n.overrides.map(L=>L.identifiers).flat()).filter(L=>n.getOverrideValue(e,L)!==void 0);return{defaultValue:a,policyValue:l,applicationValue:c,userValue:d,userLocalValue:f,userRemoteValue:g,workspaceValue:m,workspaceFolderValue:_,memoryValue:C,value:S,default:a!==void 0?{value:this._defaultConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._defaultConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,policy:l!==void 0?{value:l}:void 0,application:c!==void 0?{value:c,override:t.overrideIdentifier?this.applicationConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,user:d!==void 0?{value:this.userConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.userConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userLocal:f!==void 0?{value:this.localUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.localUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userRemote:g!==void 0?{value:this.remoteUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.remoteUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspace:m!==void 0?{value:this._workspaceConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._workspaceConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspaceFolder:_!==void 0?{value:o==null?void 0:o.freeze().getValue(e),override:t.overrideIdentifier?o==null?void 0:o.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,memory:C!==void 0?{value:r.getValue(e),override:t.overrideIdentifier?r.getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,overrideIdentifiers:x.length?x:void 0}}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let n=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(n=n.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(n=n.merge(this._policyConfiguration)),n}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const n=t.getFolder(e);n&&(i=this.getFolderConsolidatedConfiguration(n.uri)||i);const o=this._memoryConfigurationByResource.get(e);o&&(i=i.merge(o))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:n,keys:o}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:o}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),i=this.parseConfigurationModel(e.policy),n=this.parseConfigurationModel(e.application),o=this.parseConfigurationModel(e.user),r=this.parseConfigurationModel(e.workspace),a=e.folders.reduce((l,c)=>(l.set(yt.revive(c[0]),this.parseConfigurationModel(c[1])),l),new er);return new cR(t,i,n,o,new ha,r,a,new ha,new er,!1)}static parseConfigurationModel(e){return new ha(e.contents,e.keys,e.overrides).freeze()}}class BRe{constructor(e,t,i,n){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this._previousConfiguration=void 0;const o=new Set;e.keys.forEach(a=>o.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>o.add(l))),this.affectedKeys=[...o.values()];const r=new ha;this.affectedKeys.forEach(a=>r.setValue(a,{})),this.affectedKeysTree=r.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=cR.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var i;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const n=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(i=this.previous)===null||i===void 0?void 0:i.workspace):void 0,o=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Sl(n,o)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let i=hJ({[t]:!0},()=>{}),n;for(;typeof i=="object"&&(n=Object.keys(i)[0]);){if(e=e[n],!e)return!1;i=i[n]}return!0}}const VRe=/^(cursor|delete)/;class WRe extends ge{constructor(e,t,i,n,o){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=n,this._logService=o,this._onDidUpdateKeybindings=this._register(new J),this._currentChord=null,this._currentChordChecker=new cL,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Ib.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Za,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:gt.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(!!i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[n]=i.getDispatchParts();if(n===null)return this._log("\\ Keyboard event cannot be dispatched"),null;const o=this._contextKeyService.getContext(t),r=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(o,r,n)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(b("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const i=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-i>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[n]=i.getSingleModifierDispatchParts();if(n)return this._ignoreSingleModifiers.has(n)?(this._log(`+ Ignoring single modifier ${n} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Ib.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Ib.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${n}.`),this._currentSingleModifier=n,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):n===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${n} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[o]=i.getParts();return this._ignoreSingleModifiers=new Ib(o),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){let n=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let o=null,r=null;if(i){const[d]=e.getSingleModifierDispatchParts();o=d,r=d}else[o]=e.getDispatchParts(),r=this._currentChord?this._currentChord.keypress:null;if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),n;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,r,o);return this._logService.trace("KeybindingService#dispatch",l,c==null?void 0:c.commandId),c&&c.enterChord?(n=!0,this._enterChordMode(o,l),this._log("+ Entering chord mode..."),n):(this._currentChord&&(!c||!c.commandId)&&(this._log(`+ Leaving chord mode: Nothing bound to "${this._currentChord.label} ${l}".`),this._notificationService.status(b("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),n=!0),this._leaveChordMode(),c&&c.commandId&&(c.bubble||(n=!0),this._log(`+ Invoking command ${c.commandId}.`),typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,d=>this._notificationService.warn(d)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,d=>this._notificationService.warn(d)),VRe.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding"})),n)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class Ib{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}Ib.EMPTY=new Ib(null);const xs=bi("keybindingService");class Cy{constructor(e,t,i){this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const n of e){const o=n.command;o&&o.charAt(0)!=="-"&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Cy.handleRemovals([].concat(e).concat(t));for(let n=0,o=this._keybindings.length;n<o;n++){const r=this._keybindings[n];r.keypressParts.length!==0&&(r.when&&r.when.type===0||this._addKeyPress(r.keypressParts[0],r))}}static _isTargetedForRemoval(e,t,i,n){return!(t&&e.keypressParts[0]!==t||i&&e.keypressParts[1]!==i||n&&(!e.when||!xLe(n,e.when)))}static handleRemovals(e){const t=new Map;for(let n=0,o=e.length;n<o;n++){const r=e[n];if(r.command&&r.command.charAt(0)==="-"){const a=r.command.substring(1);t.has(a)?t.get(a).push(r):t.set(a,[r])}}if(t.size===0)return e;const i=[];for(let n=0,o=e.length;n<o;n++){const r=e[n];if(!r.command||r.command.length===0){i.push(r);continue}if(r.command.charAt(0)==="-")continue;const a=t.get(r.command);if(!a||!r.isDefault){i.push(r);continue}let l=!1;for(const c of a){const d=c.keypressParts[0],f=c.keypressParts[1],g=c.when;if(this._isTargetedForRemoval(r,d,f,g)){l=!0;break}}if(!l){i.push(r);continue}}return i}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let n=i.length-1;n>=0;n--){const o=i[n];if(o.command===t.command)continue;const r=o.keypressParts.length>1,a=t.keypressParts.length>1;r&&a&&o.keypressParts[1]!==t.keypressParts[1]||Cy.whenIsEntirelyIncluded(o.when,t.when)&&this._removeFromLookupMap(o)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,n=t.length;i<n;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:JJ(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(typeof i>"u"||i.length===0)return null;if(i.length===1)return i[0];for(let n=i.length-1;n>=0;n--){const o=i[n];if(t.contextMatchesRules(o.when))return o}return i[i.length-1]}resolve(e,t,i){this._log(`| Resolving ${i}${t?` chorded from ${t}`:""}`);let n=null;if(t!==null){const r=this._map.get(t);if(typeof r>"u")return this._log("\\ No keybinding entries."),null;n=[];for(let a=0,l=r.length;a<l;a++){const c=r[a];c.keypressParts[1]===i&&n.push(c)}}else{const r=this._map.get(i);if(typeof r>"u")return this._log("\\ No keybinding entries."),null;n=r}const o=this._findCommand(e,n);return o?t===null&&o.keypressParts.length>1&&o.keypressParts[1]!==null?(this._log(`\\ From ${n.length} keybinding entries, matched chord, when: ${UG(o.when)}, source: ${$G(o)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${n.length} keybinding entries, matched ${o.command}, when: ${UG(o.when)}, source: ${$G(o)}.`),{enterChord:!1,leaveChord:o.keypressParts.length>1,commandId:o.command,commandArgs:o.commandArgs,bubble:o.bubble}):(this._log(`\\ From ${n.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const n=t[i];if(!!Cy._contextMatchesRules(e,n.when))return n}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function UG(s){return s?`${s.serialize()}`:"no when condition"}function $G(s){return s.extensionId?s.isBuiltinExtension?`built-in extension ${s.extensionId}`:`user extension ${s.extensionId}`:s.isDefault?"built-in":"user"}class jG{constructor(e,t,i,n,o,r,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?d7(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=d7(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=n,this.isDefault=o,this.extensionId=r,this.isBuiltinExtension=a}}function d7(s){const e=[];for(let t=0,i=s.length;t<i;t++){const n=s[t];if(!n)return e;e.push(n)}return e}class uR{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=i(a);if(l===null)return null;n[o]=URe(a,l,this.modifierLabels[e])}return n.join(" ")}}const N6=new uR({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:b({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:b({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:b({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:b({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:b({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:b({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:b({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:b({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),HRe=new uR({ctrlKey:b({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:b({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:b({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:b({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:b({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:b({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:b({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:b({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:b({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:b({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:b({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:b({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),zRe=new uR({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});new uR({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function URe(s,e,t){if(e===null)return"";const i=[];return s.ctrlKey&&i.push(t.ctrlKey),s.shiftKey&&i.push(t.shiftKey),s.altKey&&i.push(t.altKey),s.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class $Re extends TSe{constructor(e,t){if(super(),t.length===0)throw iu("parts");this._os=e,this._parts=t}getLabel(){return N6.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return HRe.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:zRe.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new ESe(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class gS extends $Re{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return um.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":um.toString(e.keyCode)}_getElectronAccelerator(e){return um.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return gS.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=um.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=Q8[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof Wm)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Wm(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const i=d7(e.map(n=>this._resolveSimpleUserBinding(n)));return i.length>0?[new gS(new MT(i),t)]:[]}}const I0=bi("labelService"),pS=bi("contextService");function KG(s){const e=s;return typeof(e==null?void 0:e.id)=="string"&&yt.isUri(e.uri)}function jRe(s){if(s.configuration)return{id:s.id,configPath:s.configuration};if(s.folders.length===1)return{id:s.id,uri:s.folders[0].uri}}class KRe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const h7="code-workspace";b("codeWorkspace","Code Workspace");var bs;(function(s){s.noSelection=b("noSelection","No selection"),s.singleSelectionRange=b("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),s.singleSelection=b("singleSelection","Line {0}, Column {1}"),s.multiSelectionRange=b("multiSelectionRange","{0} selections ({1} characters selected)"),s.multiSelection=b("multiSelection","{0} selections"),s.emergencyConfOn=b("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),s.openingDocs=b("openingDocs","Now opening the Editor Accessibility documentation page."),s.readonlyDiffEditor=b("readonlyDiffEditor"," in a read-only pane of a diff editor."),s.editableDiffEditor=b("editableDiffEditor"," in a pane of a diff editor."),s.readonlyEditor=b("readonlyEditor"," in a read-only code editor"),s.editableEditor=b("editableEditor"," in a code editor"),s.changeConfigToOnMac=b("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),s.changeConfigToOnWinLinux=b("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),s.auto_on=b("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),s.auto_off=b("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),s.tabFocusModeOnMsg=b("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),s.tabFocusModeOnMsgNoKb=b("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),s.tabFocusModeOffMsg=b("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),s.tabFocusModeOffMsgNoKb=b("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),s.openDocMac=b("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),s.openDocWinLinux=b("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),s.outroMsg=b("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),s.showAccessibilityHelpAction=b("showAccessibilityHelpAction","Show Accessibility Help")})(bs||(bs={}));var f7;(function(s){s.inspectTokensAction=b("inspectTokens","Developer: Inspect Tokens")})(f7||(f7={}));var CI;(function(s){s.gotoLineActionLabel=b("gotoLineActionLabel","Go to Line/Column...")})(CI||(CI={}));var g7;(function(s){s.helpQuickAccessActionLabel=b("helpQuickAccess","Show all Quick Access Providers")})(g7||(g7={}));var wI;(function(s){s.quickCommandActionLabel=b("quickCommandActionLabel","Command Palette"),s.quickCommandHelp=b("quickCommandActionHelp","Show And Run Commands")})(wI||(wI={}));var mS;(function(s){s.quickOutlineActionLabel=b("quickOutlineActionLabel","Go to Symbol..."),s.quickOutlineByCategoryActionLabel=b("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(mS||(mS={}));var yI;(function(s){s.editorViewAccessibleLabel=b("editorViewAccessibleLabel","Editor content"),s.accessibilityHelpMessage=b("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(yI||(yI={}));var p7;(function(s){s.toggleHighContrast=b("toggleHighContrast","Toggle High Contrast Theme")})(p7||(p7={}));var m7;(function(s){s.bulkEditServiceSummary=b("bulkEditServiceSummary","Made {0} edits in {1} files")})(m7||(m7={}));const Gte=bi("workspaceTrustManagementService");var No;(function(s){function e(o,r){if(o.start>=r.end||r.start>=o.end)return{start:0,end:0};const a=Math.max(o.start,r.start),l=Math.min(o.end,r.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}s.intersect=e;function t(o){return o.end-o.start<=0}s.isEmpty=t;function i(o,r){return!t(e(o,r))}s.intersects=i;function n(o,r){const a=[],l={start:o.start,end:Math.min(r.start,o.end)},c={start:Math.max(r.end,o.start),end:o.end};return t(l)||a.push(l),t(c)||a.push(c),a}s.relativeComplement=n})(No||(No={}));var dg;(function(s){s[s.AVOID=0]="AVOID",s[s.ALIGN=1]="ALIGN"})(dg||(dg={}));function Nb(s,e,t){const i=t.mode===dg.ALIGN?t.offset:t.offset+t.size,n=t.mode===dg.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=s-i?i:e<=n?n-e:Math.max(s-e,0):e<=n?n-e:e<=s-i?i:0}class N0 extends ge{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=ge.None,this.toDisposeOnSetContainer=ge.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=Pe(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,Vr(this.view),this.setContainer(e,t),this._register(ni(()=>this.setContainer(null,1)))}setContainer(e,t){var i;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(i=this.shadowRootHostElement)===null||i===void 0||i.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=Pe(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=qRe,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(Pe("slot"))}else this.container.appendChild(this.view);const n=new Ae;N0.BUBBLE_UP_EVENTS.forEach(o=>{n.add(Ps(this.container,o,r=>{this.onDOMEvent(r,!1)}))}),N0.BUBBLE_DOWN_EVENTS.forEach(o=>{n.add(Ps(this.container,o,r=>{this.onDOMEvent(r,!0)},!0))}),this.toDisposeOnSetContainer=n}}show(e){var t,i;this.isVisible()&&this.hide(),Ts(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Wa(this.view),this.toDisposeOnClean=e.render(this.view)||ge.None,this.delegate=e,this.doLayout(),(i=(t=this.delegate).focus)===null||i===void 0||i.call(t)}getViewElement(){return this.view}layout(){if(!!this.isVisible()){if(this.delegate.canRelayout===!1&&!(gd&&DB.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(GJ(e)){const f=Oo(e),g=hLe(e);t={top:f.top*g,left:f.left*g,width:f.width*g,height:f.height*g}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const i=ec(this.view),n=k3(this.view),o=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;if(a===0){const f={offset:t.top-window.pageYOffset,size:t.height,position:o===0?0:1},g={offset:t.left,size:t.width,position:r===0?0:1,mode:dg.ALIGN};l=Nb(window.innerHeight,n,f)+window.pageYOffset,No.intersects({start:l,end:l+n},{start:f.offset,end:f.offset+f.size})&&(g.mode=dg.AVOID),c=Nb(window.innerWidth,i,g)}else{const f={offset:t.left,size:t.width,position:r===0?0:1},g={offset:t.top,size:t.height,position:o===0?0:1,mode:dg.ALIGN};c=Nb(window.innerWidth,i,f),No.intersects({start:c,end:c+i},{start:f.offset,end:f.offset+f.size})&&(g.mode=dg.AVOID),l=Nb(window.innerHeight,n,g)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(o===0?"bottom":"top"),this.view.classList.add(r===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const d=Oo(this.container);this.view.style.top=`${l-(this.useFixedPosition?Oo(this.view).top:d.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Oo(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Vr(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!Uh(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}N0.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];N0.BUBBLE_DOWN_EVENTS=["click"];const qRe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var GRe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},YRe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let _7=class extends ge{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=ge.None,this.container=e.hasContainer?e.container:null,this.contextView=this._register(new N0(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,i){t?(t!==this.container||this.shadowRoot!==i)&&(this.container=t,this.setContainer(t,i?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.shadowRoot=i,this.contextView.show(e);const n=ni(()=>{this.currentViewDisposable===n&&this.hideContextView()});return this.currentViewDisposable=n,n}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};_7=GRe([YRe(0,uC)],_7);var qG=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const Zk="**",GG="/",zE="[/\\\\]",UE="[^/\\\\]",ZRe=/\//g;function YG(s,e){switch(s){case 0:return"";case 1:return`${UE}*?`;default:return`(?:${zE}|${UE}+${zE}${e?`|${zE}${UE}+`:""})*?`}}function ZG(s,e){if(!s)return[];const t=[];let i=!1,n=!1,o="";for(const r of s){switch(r){case e:if(!i&&!n){t.push(o),o="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":n=!0;break;case"]":n=!1;break}o+=r}return o&&t.push(o),t}function Yte(s){if(!s)return"";let e="";const t=ZG(s,GG);if(t.every(i=>i===Zk))e=".*";else{let i=!1;t.forEach((n,o)=>{if(n===Zk){if(i)return;e+=YG(2,o===t.length-1)}else{let r=!1,a="",l=!1,c="";for(const d of n){if(d!=="}"&&r){a+=d;continue}if(l&&(d!=="]"||!c)){let f;d==="-"?f=d:(d==="^"||d==="!")&&!c?f="^":d===GG?f="":f=ja(d),c+=f;continue}switch(d){case"{":r=!0;continue;case"[":l=!0;continue;case"}":{const g=`(?:${ZG(a,",").map(m=>Yte(m)).join("|")})`;e+=g,r=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=UE;continue;case"*":e+=YG(1);continue;default:e+=ja(d)}}o<t.length-1&&(t[o+1]!==Zk||o+2<t.length)&&(e+=zE)}i=n===Zk})}return e}const QRe=/^\*\*\/\*\.[\w\.-]+$/,XRe=/^\*\*\/([\w\.-]+)\/?$/,JRe=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,e2e=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,t2e=/^\*\*((\/[\w\.-]+)+)\/?$/,i2e=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,QG=new tp(1e4),XG=function(){return!1},fd=function(){return null};function R6(s,e){if(!s)return fd;let t;typeof s!="string"?t=s.pattern:t=s,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let n=QG.get(i);if(n)return JG(n,s);let o;return QRe.test(t)?n=n2e(t.substr(4),t):(o=XRe.exec($4(t,e)))?n=s2e(o[1],t):(e.trimForExclusions?e2e:JRe).test(t)?n=o2e(t,e):(o=t2e.exec($4(t,e)))?n=eY(o[1].substr(1),t,!0):(o=i2e.exec($4(t,e)))?n=eY(o[1],t,!1):n=r2e(t),QG.set(i,n),JG(n,s)}function JG(s,e){if(typeof e=="string")return s;const t=function(i,n){return G3(i,e.base,!Wo)?s(i.substr(e.base.length+1),n):null};return t.allBasenames=s.allBasenames,t.allPaths=s.allPaths,t.basenames=s.basenames,t.patterns=s.patterns,t}function $4(s,e){return e.trimForExclusions&&s.endsWith("/**")?s.substr(0,s.length-2):s}function n2e(s,e){return function(t,i){return typeof t=="string"&&t.endsWith(s)?e:null}}function s2e(s,e){const t=`/${s}`,i=`\\${s}`,n=function(r,a){return typeof r!="string"?null:a?a===s?e:null:r===s||r.endsWith(t)||r.endsWith(i)?e:null},o=[s];return n.basenames=o,n.patterns=[e],n.allBasenames=o,n}function o2e(s,e){const t=Qte(s.slice(1,-1).split(",").map(a=>R6(a,e)).filter(a=>a!==fd),s),i=t.length;if(!i)return fd;if(i===1)return t[0];const n=function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return s;return null},o=t.find(a=>!!a.allBasenames);o&&(n.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(n.allPaths=r),n}function eY(s,e,t){const i=cd===ws.sep,n=i?s:s.replace(ZRe,cd),o=cd+n,r=ws.sep+s;let a;return t?a=function(l,c){return typeof l=="string"&&(l===n||l.endsWith(o)||!i&&(l===s||l.endsWith(r)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===n||!i&&l===s)?e:null},a.allPaths=[(t?"*/":"./")+s],a}function r2e(s){try{const e=new RegExp(`^${Yte(s)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?s:null}}catch{return fd}}function a2e(s,e,t){return!s||typeof e!="string"?!1:Zte(s)(e,void 0,t)}function Zte(s,e={}){if(!s)return XG;if(typeof s=="string"||l2e(s)){const t=R6(s,e);if(t===fd)return XG;const i=function(n,o){return!!t(n,o)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return c2e(s,e)}function l2e(s){const e=s;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function c2e(s,e){const t=Qte(Object.getOwnPropertyNames(s).map(a=>u2e(a,s[a],e)).filter(a=>a!==fd)),i=t.length;if(!i)return fd;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(d,f){let g;for(let m=0,_=t.length;m<_;m++){const C=t[m](d,f);if(typeof C=="string")return C;m3(C)&&(g||(g=[]),g.push(C))}return g?(()=>qG(this,void 0,void 0,function*(){for(const m of g){const _=yield m;if(typeof _=="string")return _}return null}))():null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((d,f)=>f.allPaths?d.concat(f.allPaths):d,[]);return c.length&&(a.allPaths=c),a}const n=function(a,l,c){let d,f;for(let g=0,m=t.length;g<m;g++){const _=t[g];_.requiresSiblings&&c&&(l||(l=wm(a)),d||(d=l.substr(0,l.length-I1e(a).length)));const C=_(a,l,d,c);if(typeof C=="string")return C;m3(C)&&(f||(f=[]),f.push(C))}return f?(()=>qG(this,void 0,void 0,function*(){for(const g of f){const m=yield g;if(typeof m=="string")return m}return null}))():null},o=t.find(a=>!!a.allBasenames);o&&(n.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(n.allPaths=r),n}function u2e(s,e,t){if(e===!1)return fd;const i=R6(s,t);if(i===fd)return fd;if(typeof e=="boolean")return i;if(e){const n=e.when;if(typeof n=="string"){const o=(r,a,l,c)=>{if(!c||!i(r,a))return null;const d=n.replace("$(basename)",l),f=c(d);return m3(f)?f.then(g=>g?s:null):f?s:null};return o.requiresSiblings=!0,o}}return i}function Qte(s,e){const t=s.filter(a=>!!a.basenames);if(t.length<2)return s;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let n;if(e){n=[];for(let a=0,l=i.length;a<l;a++)n.push(e)}else n=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const o=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const f=a.charCodeAt(d-1);if(f===47||f===92)break}l=a.substr(d)}const c=i.indexOf(l);return c!==-1?n[c]:null};o.basenames=i,o.patterns=n,o.allBasenames=i;const r=s.filter(a=>!a.basenames);return r.push(o),r}let R0=[],A6=[],Xte=[];function Qk(s,e=!1){d2e(s,!1,e)}function d2e(s,e,t){const i=h2e(s,e);R0.push(i),i.userConfigured?Xte.push(i):A6.push(i),t&&!i.userConfigured&&R0.forEach(n=>{n.mime===i.mime||n.userConfigured||(i.extension&&n.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&n.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&n.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&n.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function h2e(s,e){return{id:s.id,mime:s.mime,filename:s.filename,extension:s.extension,filepattern:s.filepattern,firstline:s.firstline,userConfigured:e,filenameLowercase:s.filename?s.filename.toLowerCase():void 0,extensionLowercase:s.extension?s.extension.toLowerCase():void 0,filepatternLowercase:s.filepattern?Zte(s.filepattern.toLowerCase()):void 0,filepatternOnPath:s.filepattern?s.filepattern.indexOf(ws.sep)>=0:!1}}function f2e(){R0=R0.filter(s=>s.userConfigured),A6=[]}function g2e(s,e){return p2e(s,e).map(t=>t.id)}function p2e(s,e){let t;if(s)switch(s.scheme){case Xt.file:t=s.fsPath;break;case Xt.data:{t=Bg.parseMetaData(s).get(Bg.META_DATA_LABEL);break}case Xt.vscodeNotebookCell:t=void 0;break;default:t=s.path}if(!t)return[{id:"unknown",mime:Ur.unknown}];t=t.toLowerCase();const i=wm(t),n=tY(t,i,Xte);if(n)return[n,{id:xl,mime:Ur.text}];const o=tY(t,i,A6);if(o)return[o,{id:xl,mime:Ur.text}];if(e){const r=m2e(e);if(r)return[r,{id:xl,mime:Ur.text}]}return[{id:"unknown",mime:Ur.unknown}]}function tY(s,e,t){var i;let n,o,r;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){n=l;break}if(l.filepattern&&(!o||l.filepattern.length>o.filepattern.length)){const c=l.filepatternOnPath?s:e;!((i=l.filepatternLowercase)===null||i===void 0)&&i.call(l,c)&&(o=l)}l.extension&&(!r||l.extension.length>r.extension.length)&&e.endsWith(l.extensionLowercase)&&(r=l)}if(n)return n;if(o)return o;if(r)return r}function m2e(s){if(rB(s)&&(s=s.substr(1)),s.length>0)for(let e=R0.length-1;e>=0;e--){const t=R0[e];if(!t.firstline)continue;const i=s.match(t.firstline);if(i&&i.length>0)return t}}const Xk=Object.prototype.hasOwnProperty,iY="vs.editor.nullLanguage";class _2e{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(iY,0),this._register(xl,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||iY}}class _S extends ge{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new J),this.onDidChange=this._onDidChange.event,_S.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new _2e,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(g0.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){_S.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},f2e();const e=[].concat(g0.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(n=>{this._lowercaseNameMap[n.toLowerCase()]=i.identifier}),i.mimetypes.forEach(n=>{this._mimeTypesMap[n]=i.identifier})}),Wn.as(tf.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;Xk.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let n=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),n=t.mimetypes[0]),n||(n=`text/x-${i}`,e.mimetypes.push(n)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)Qk({id:i,mime:n,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)Qk({id:i,mime:n,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)Qk({id:i,mime:n,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);q1e(l)||Qk({id:i,mime:n,firstline:l},this._warnOnOverwrite)}catch(l){Yt(l)}}e.aliases.push(i);let o=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?o=[null]:o=t.aliases),o!==null)for(const a of o)!a||a.length===0||e.aliases.push(a);const r=o!==null&&o.length>0;if(!(r&&o[0]===null)){const a=(r?o[0]:null)||i;(r||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?Xk.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return Xk.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&Xk.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:g2e(e,t)}}_S.instanceCount=0;class vS extends ge{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new J),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onDidChange=this._register(new J({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,vS.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new _S(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){vS.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return DX(i,null)}createById(e){return new nY(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new nY(this.onDidChange,()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=xl),this._encounteredLanguages.has(e)||(this._encounteredLanguages.add(e),Fn.getOrCreate(e),this._onDidEncounterLanguage.fire(e)),e}}vS.instanceCount=0;class nY{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new J({onLastListenerRemove:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;const t=this._selector();t!==this.languageId&&(this.languageId=t,(e=this._emitter)===null||e===void 0||e.fire(this.languageId))}}function sY(s){let e=s.definition;for(;e instanceof w;)e=e.definition;return`.codicon-${s.id}:before { content: '${e.fontCharacter}'; }`}const v7=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,j4=/(&amp;)?(&amp;)([^\s&])/g;var SI;(function(s){s[s.Right=0]="Right",s[s.Left=1]="Left"})(SI||(SI={}));class t0 extends Cd{constructor(e,t,i={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const n=document.createElement("div");n.classList.add("monaco-menu"),n.setAttribute("role","presentation"),super(n,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,i,o),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...mi||Wo?[10]:[]],keyDown:!0}}),this.menuElement=n,this.actionsList.tabIndex=0,this.menuDisposables=this._register(new Ae),this.initializeOrUpdateStyleSheet(e,{}),this._register(Zi.addTarget(n)),Le(n,it.KEY_DOWN,a=>{new kn(a).equals(2)&&a.preventDefault()}),i.enableMnemonics&&this.menuDisposables.add(Le(n,it.KEY_DOWN,a=>{const l=a.key.toLocaleLowerCase();if(this.mnemonics.has(l)){qi.stop(a,!0);const c=this.mnemonics.get(l);if(c.length===1&&(c[0]instanceof oY&&c[0].container&&this.focusItemByElement(c[0].container),c[0].onClick(a)),c.length>1){const d=c.shift();d&&d.container&&(this.focusItemByElement(d.container),c.push(d)),this.mnemonics.set(l,c)}}})),Wo&&this._register(Le(n,it.KEY_DOWN,a=>{const l=new kn(a);l.equals(14)||l.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),qi.stop(a,!0)):(l.equals(13)||l.equals(12))&&(this.focusedItem=0,this.focusPrevious(),qi.stop(a,!0))})),this._register(Le(this.domNode,it.MOUSE_OUT,a=>{const l=a.relatedTarget;Uh(l,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(Le(this.actionsList,it.MOUSE_OVER,a=>{let l=a.target;if(!(!l||!Uh(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}})),this._register(Zi.addTarget(this.actionsList)),this._register(Le(this.actionsList,vn.Tap,a=>{let l=a.initialTarget;if(!(!l||!Uh(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}}));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new vL(n,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const r=this.scrollableElement.getDomNode();r.style.position="",this._register(Le(n,vn.Change,a=>{qi.stop(a,!0);const l=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:l-a.translationY})})),this._register(Le(r,it.MOUSE_UP,a=>{a.preventDefault()})),n.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var l;return!((l=i.submenuIds)===null||l===void 0)&&l.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof K4)).forEach((a,l,c)=>{a.updatePositionInSet(l+1,c.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(Ky(e)?this.styleSheet=Il(e):(t0.globalStyleSheet||(t0.globalStyleSheet=Il()),this.styleSheet=t0.globalStyleSheet)),this.styleSheet.textContent=b2e(t,Ky(e))}style(e){const t=this.getContainer();this.initializeOrUpdateStyleSheet(t,e);const i=e.foregroundColor?`${e.foregroundColor}`:"",n=e.backgroundColor?`${e.backgroundColor}`:"",o=e.borderColor?`1px solid ${e.borderColor}`:"",r="5px",a=e.shadowColor?`0 2px 8px ${e.shadowColor}`:"";t.style.outline=o,t.style.borderRadius=r,t.style.color=i,t.style.backgroundColor=n,t.style.boxShadow=a,this.viewItems&&this.viewItems.forEach(l=>{(l instanceof b7||l instanceof K4)&&l.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof Bo)return new K4(t.context,e,{icon:!0});if(e instanceof Yy){const n=new oY(e,e.actions,i,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const o=n.getMnemonic();if(o&&n.isEnabled()){let r=[];this.mnemonics.has(o)&&(r=this.mnemonics.get(o)),r.push(n),this.mnemonics.set(o,r)}}return n}else{const n={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const r=t.getKeyBinding(e);if(r){const a=r.getLabel();a&&(n.keybinding=a)}}const o=new b7(t.context,e,n);if(t.enableMnemonics){const r=o.getMnemonic();if(r&&o.isEnabled()){let a=[];this.mnemonics.has(r)&&(a=this.mnemonics.get(r)),a.push(o),this.mnemonics.set(r,a)}}return o}}}class b7 extends Yu{constructor(e,t,i={}){if(i.isMenu=!0,super(t,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){const n=this.getAction().label;if(n){const o=v7.exec(n);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Xi(()=>{!this.element||(this._register(Le(this.element,it.MOUSE_UP,n=>{if(qi.stop(n,!0),Ka){if(new nd(n).rightButton)return;this.onClick(n)}else setTimeout(()=>{this.onClick(n)},0)})),this._register(Le(this.element,it.CONTEXT_MENU,n=>{qi.stop(n,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=Se(this.element,Pe("a.action-menu-item")),this._action.id===Bo.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=Se(this.item,Pe("span.menu-item-check"+w.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=Se(this.item,Pe("span.action-label")),this.options.label&&this.options.keybinding&&(Se(this.item,Pe("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(!!this.label&&this.options.label){Ts(this.label);let t=E6(this.getAction().label);if(t){const i=v2e(t);this.options.enableMnemonics||(t=i),this.label.setAttribute("aria-label",i.replace(/&&/g,"&"));const n=v7.exec(t);if(n){t=J8(t),j4.lastIndex=0;let o=j4.exec(t);for(;o&&o[1];)o=j4.exec(t);const r=a=>a.replace(/&amp;&amp;/g,"&amp;");o?this.label.append(vN(r(t.substr(0,o.index))," "),Pe("u",{"aria-hidden":"true"},o[3]),QX(r(t.substr(o.index+o[0].length))," ")):this.label.innerText=r(t).trim(),(e=this.item)===null||e===void 0||e.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,n=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",o=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=i?i.toString():"",this.item.style.outline=n,this.item.style.outlineOffset=o),this.check&&(this.check.style.color=t?t.toString():"")}style(e){this.menuStyle=e,this.applyStyle()}}class oY extends b7{constructor(e,t,i,n){super(e,e,n),this.submenuActions=t,this.parentData=i,this.submenuOptions=n,this.mysubmenu=null,this.submenuDisposables=this._register(new Ae),this.mouseOver=!1,this.expandDirection=n&&n.expandDirection!==void 0?n.expandDirection:SI.Right,this.showScheduler=new Xi(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Xi(()=>{this.element&&!Uh($b(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Se(this.item,Pe("span.submenu-indicator"+w.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(Le(this.element,it.KEY_UP,t=>{const i=new kn(t);(i.equals(17)||i.equals(3))&&(qi.stop(t,!0),this.createSubmenu(!0))})),this._register(Le(this.element,it.KEY_DOWN,t=>{const i=new kn(t);$b()===this.item&&(i.equals(17)||i.equals(3))&&qi.stop(t,!0)})),this._register(Le(this.element,it.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(Le(this.element,it.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(Le(this.element,it.FOCUS_OUT,t=>{this.element&&!Uh($b(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){qi.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,n){const o={top:0,left:0};return o.left=Nb(e.width,t.width,{position:n===SI.Right?0:1,offset:i.left,size:i.width}),o.left>=i.left&&o.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(o.left=i.left+10),i.top+=10,i.height=0),o.top=Nb(e.height,t.height,{position:0,offset:i.top,size:0}),o.top+t.height===i.top&&o.top+i.height+t.height<=e.height&&(o.top+=i.height),o}createSubmenu(e=!0){if(!!this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Se(this.element,Pe("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new t0(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new AN],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const n=this.element.getBoundingClientRect(),o={top:n.top-i,left:n.left,height:n.height+2*i,width:n.width},r=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new ln(window.innerWidth,window.innerHeight),ln.lift(r),o,this.expandDirection);this.submenuContainer.style.left=`${l-r.left}px`,this.submenuContainer.style.top=`${a-r.top}px`,this.submenuDisposables.add(Le(this.submenuContainer,it.KEY_UP,c=>{new kn(c).equals(15)&&(qi.stop(c,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(Le(this.submenuContainer,it.KEY_DOWN,c=>{new kn(c).equals(15)&&qi.stop(c,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){var e;if(super.applyStyle(),!this.menuStyle)return;const i=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=i?`${i}`:""),(e=this.parentData.submenu)===null||e===void 0||e.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class K4 extends hS{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function v2e(s){const e=v7,t=e.exec(s);if(!t)return s;const i=!t[1];return s.replace(e,i?"$2$3":"").trim()}function b2e(s,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${sY(w.menuSelection)}
${sY(w.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = \u221A\u03C6 */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .6em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const i=s.scrollbarShadow;i&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${i} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${i} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${i} 6px 6px 6px -6px inset;
				}
			`);const n=s.scrollbarSliderBackground;n&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${n};
				}
			`);const o=s.scrollbarSliderHoverBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${o};
				}
			`);const r=s.scrollbarSliderActiveBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return t}function Wc(s,e){const t=Object.create(null);for(const i in e){const n=e[i];n&&(t[i]=fh(n,s))}return t}function M6(s,e,t){function i(){const n=Wc(s.getColorTheme(),e);typeof t=="function"?t(n):t.style(n)}return i(),s.onDidColorThemeChange(i)}function C2e(s,e,t){return M6(e,{badgeBackground:(t==null?void 0:t.badgeBackground)||yb,badgeForeground:(t==null?void 0:t.badgeForeground)||Sb,badgeBorder:si},s)}function Zm(s,e,t){return M6(e,Object.assign(Object.assign({},dR),t||{}),s)}const dR={listFocusBackground:Oxe,listFocusForeground:Pxe,listFocusOutline:Fxe,listActiveSelectionBackground:Bh,listActiveSelectionForeground:rd,listActiveSelectionIconForeground:Pw,listFocusAndSelectionOutline:Bxe,listFocusAndSelectionBackground:Bh,listFocusAndSelectionForeground:rd,listInactiveSelectionBackground:Vxe,listInactiveSelectionIconForeground:Hxe,listInactiveSelectionForeground:Wxe,listInactiveFocusBackground:zxe,listInactiveFocusOutline:Uxe,listHoverBackground:$xe,listHoverForeground:jxe,listDropBackground:Kxe,listSelectionOutline:En,listHoverOutline:En,listFilterWidgetBackground:qxe,listFilterWidgetOutline:Gxe,listFilterWidgetNoMatchesOutline:Yxe,listFilterWidgetShadow:Zxe,treeIndentGuidesStroke:Qxe,tableColumnsBorder:Xxe,tableOddRowsBackgroundColor:Jxe,inputActiveOptionBorder:$T,inputActiveOptionForeground:KT,inputActiveOptionBackground:jT,inputBackground:KN,inputForeground:qN,inputBorder:GN,inputValidationInfoBackground:NB,inputValidationInfoForeground:RB,inputValidationInfoBorder:AB,inputValidationWarningBackground:MB,inputValidationWarningForeground:OB,inputValidationWarningBorder:PB,inputValidationErrorBackground:FB,inputValidationErrorForeground:BB,inputValidationErrorBorder:VB},w2e={shadowColor:Qc,borderColor:eDe,foregroundColor:tDe,backgroundColor:iDe,selectionForegroundColor:nDe,selectionBackgroundColor:sDe,selectionBorderColor:oDe,separatorColor:rDe,scrollbarShadow:rC,scrollbarSliderBackground:hm,scrollbarSliderHoverBackground:fm,scrollbarSliderActiveBackground:gm};function y2e(s,e,t){return M6(e,Object.assign(Object.assign({},w2e),t),s)}class S2e{constructor(e,t,i,n,o){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=n,this.themeService=o,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let i;const n=GJ(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:o=>{const r=e.getMenuClassName?e.getMenuClassName():"";r&&(o.className+=" "+r),this.options.blockMouse&&(this.block=o.appendChild(Pe(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",Le(this.block,it.MOUSE_DOWN,c=>c.stopPropagation()));const a=new Ae,l=e.actionRunner||new _0;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),i=new t0(o,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:c=>this.keybindingService.lookupKeybinding(c.id)}),a.add(y2e(i,this.themeService)),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(Le(window,it.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(Le(window,it.MOUSE_DOWN,c=>{if(c.defaultPrevented)return;const d=new nd(c);let f=d.target;if(!d.rightButton){for(;f;){if(f===o)return;f=f.parentElement}this.contextViewService.hideContextView(!0)}})),nu(a,i)},focus:()=>{i==null||i.focus(!!e.autoSelectFirstItem)},onHide:o=>{var r;(r=e.onHide)===null||r===void 0||r.call(e,!!o),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},n,!!n)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!Dd(e.error)&&this.notificationService.error(e.error)}}var L2e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},_w=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let C7=class extends ge{constructor(e,t,i,n,o){super(),this._onDidShowContextMenu=new J,this._onDidHideContextMenu=new J,this.contextMenuHandler=new S2e(i,e,t,n,o)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{var i;(i=e.onHide)===null||i===void 0||i.call(e,t),this._onDidHideContextMenu.fire()}})),ag.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};C7=L2e([_w(0,gu),_w(1,gs),_w(2,E_),_w(3,xs),_w(4,cn)],C7);function LI(s){let e=JSON.parse(s);return e=w7(e),e}function w7(s,e=0){if(!s||e>200)return s;if(typeof s=="object"){switch(s.$mid){case 1:return yt.revive(s);case 2:return new RegExp(s.source,s.flags);case 14:return new Date(s.source)}if(s instanceof yN||s instanceof Uint8Array)return s;if(Array.isArray(s))for(let t=0;t<s.length;++t)s[t]=w7(s[t],e+1);else for(const t in s)Object.hasOwnProperty.call(s,t)&&(s[t]=w7(s[t],e+1))}return s}var xI;(function(s){s[s.API=0]="API",s[s.USER=1]="USER"})(xI||(xI={}));var O6=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},DI=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},om=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let y7=class{constructor(e){this._commandService=e}open(e,t){return om(this,void 0,void 0,function*(){if(!T6(e,Xt.command))return!1;if(!(t!=null&&t.allowCommands))return!0;typeof e=="string"&&(e=yt.parse(e));let i=[];try{i=LI(decodeURIComponent(e.query))}catch{try{i=LI(e.query)}catch{}}return Array.isArray(i)||(i=[i]),yield this._commandService.executeCommand(e.path,...i),!0})}};y7=O6([DI(0,fs)],y7);let S7=class{constructor(e){this._editorService=e}open(e,t){return om(this,void 0,void 0,function*(){typeof e=="string"&&(e=yt.parse(e));const{selection:i,uri:n}=Kte(e);return e=n,e.scheme===Xt.file&&(e=GTe(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:i,source:t!=null&&t.fromUserGesture?xI.USER:xI.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};S7=O6([DI(0,Vi)],S7);let L7=class{constructor(e,t){this._openers=new Sr,this._validators=new Sr,this._resolvers=new Sr,this._resolvedUriTargets=new er(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Sr,this._defaultExternalOpener={openExternal:i=>om(this,void 0,void 0,function*(){return zG(i,Xt.http,Xt.https)?ZJ(i):window.location.href=i,!0})},this._openers.push({open:(i,n)=>om(this,void 0,void 0,function*(){return(n==null?void 0:n.openExternal)||zG(i,Xt.mailto,Xt.http,Xt.https,Xt.vsls)?(yield this._doOpenExternal(i,n),!0):!1})}),this._openers.push(new y7(t)),this._openers.push(new S7(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var i;return om(this,void 0,void 0,function*(){const n=typeof e=="string"?yt.parse(e):e,o=(i=this._resolvedUriTargets.get(n))!==null&&i!==void 0?i:e;for(const r of this._validators)if(!(yield r.shouldOpen(o,t)))return!1;for(const r of this._openers)if(yield r.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return om(this,void 0,void 0,function*(){for(const i of this._resolvers)try{const n=yield i.resolveExternalUri(e,t);if(n)return this._resolvedUriTargets.has(n.resolved)||this._resolvedUriTargets.set(n.resolved,e),n}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return om(this,void 0,void 0,function*(){const i=typeof e=="string"?yt.parse(e):e;let n;try{n=(yield this.resolveExternalUri(i,t)).resolved}catch{n=i}let o;if(typeof e=="string"&&i.toString()===n.toString()?o=e:o=encodeURI(n.toString(!0)),t!=null&&t.allowContributedOpeners){const r=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(o,{sourceUri:i,preferredOpenerId:r},ri.None))return!0}return this._defaultExternalOpener.openExternal(o,{sourceUri:i},ri.None)})}dispose(){this._validators.clear()}};L7=O6([DI(0,Vi),DI(1,fs)],L7);var Bn;(function(s){s[s.Hint=1]="Hint",s[s.Info=2]="Info",s[s.Warning=4]="Warning",s[s.Error=8]="Error"})(Bn||(Bn={}));(function(s){function e(r,a){return a-r}s.compare=e;const t=Object.create(null);t[s.Error]=b("sev.error","Error"),t[s.Warning]=b("sev.warning","Warning"),t[s.Info]=b("sev.info","Info");function i(r){return t[r]||""}s.toString=i;function n(r){switch(r){case Pn.Error:return s.Error;case Pn.Warning:return s.Warning;case Pn.Info:return s.Info;case Pn.Ignore:return s.Hint}}s.fromSeverity=n;function o(r){switch(r){case s.Error:return Pn.Error;case s.Warning:return Pn.Warning;case s.Info:return Pn.Info;case s.Hint:return Pn.Ignore}}s.toSeverity=o})(Bn||(Bn={}));var kI;(function(s){const e="";function t(n){return i(n,!0)}s.makeKey=t;function i(n,o){const r=[e];return n.source?r.push(n.source.replace("\xA6","\\\xA6")):r.push(e),n.code?typeof n.code=="string"?r.push(n.code.replace("\xA6","\\\xA6")):r.push(n.code.value.replace("\xA6","\\\xA6")):r.push(e),n.severity!==void 0&&n.severity!==null?r.push(Bn.toString(n.severity)):r.push(e),n.message&&o?r.push(n.message.replace("\xA6","\\\xA6")):r.push(e),n.startLineNumber!==void 0&&n.startLineNumber!==null?r.push(n.startLineNumber.toString()):r.push(e),n.startColumn!==void 0&&n.startColumn!==null?r.push(n.startColumn.toString()):r.push(e),n.endLineNumber!==void 0&&n.endLineNumber!==null?r.push(n.endLineNumber.toString()):r.push(e),n.endColumn!==void 0&&n.endColumn!==null?r.push(n.endColumn.toString()):r.push(e),r.push(e),r.join("\xA6")}s.makeKeyOptionalMessage=i})(kI||(kI={}));const Td=bi("markerService");var x2e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},rY=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};class D2e extends ge{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(ni(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const i=[...this._markersData.keys()];this._markersData.clear();const n=this.model.deltaDecorations(i,t);for(let o=0;o<n.length;o++)this._markersData.set(n[o],e[o]);return i.length!==0||n.length!==0}getMarker(e){return this._markersData.get(e.id)}}let x7=class extends ge{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new J),this._markerDecorations=new er,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new D2e(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var t;const i=this._markerDecorations.get(e.uri);i&&(i.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Xt.inMemory||e.uri.scheme===Xt.internal||e.uri.scheme===Xt.vscode)&&((t=this._markerService)===null||t===void 0||t.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500}),i=t.map(n=>({range:this._createDecorationRange(e.model,n),options:this._createDecorationOption(n)}));e.update(t,i)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let i=M.lift(t);if(t.severity===Bn.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const n=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(n===1||i.endColumn>=n)return i;const o=e.getWordAtPosition(i.getStartPosition());o&&(i=new M(i.startLineNumber,o.startColumn,i.endLineNumber,o.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&i.startLineNumber===i.endLineNumber){const n=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);n<i.endColumn&&(i=new M(i.startLineNumber,n,i.endLineNumber,i.endColumn),t.startColumn=n)}return i}_createDecorationOption(e){let t,i,n,o,r;switch(e.severity){case Bn.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",n=0;break;case Bn.Warning:t="squiggly-warning",i=Yn(cke),n=20,r={color:Yn(lDe),position:Ll.Inline};break;case Bn.Info:t="squiggly-info",i=Yn(uke),n=10;break;case Bn.Error:default:t="squiggly-error",i=Yn(lke),n=30,r={color:Yn(aDe),position:Ll.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(o="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(o="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:El.Right},minimap:r,zIndex:n,inlineClassName:o}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};x7=x2e([rY(0,Hn),rY(1,Td)],x7);class wy{constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}static create(e,t){return new wy(e,new EI(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new M(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,i,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber,[n,o,r]=this._tokens.split(t,e.startColumn-1,i,e.endColumn-1);return[new wy(this._startLineNumber,n),new wy(this._startLineNumber+r,o)]}applyEdit(e,t){const[i,n,o]=Gm(t);this.acceptEdit(e,i,n,o,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,i,n,o){this._acceptDeleteRange(e),this._acceptInsertText(new se(e.startLineNumber,e.startColumn),t,i,n,o),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;if(i<0){const o=i-t;this._startLineNumber-=o;return}const n=this._tokens.getMaxDeltaLine();if(!(t>=n+1)){if(t<0&&i>=n+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const o=-t;this._startLineNumber-=o,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,i,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,i,e.endColumn-1)}}_acceptInsertText(e,t,i,n,o){if(t===0&&i===0)return;const r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();r>=a+1||this._tokens.acceptInsertText(r,e.column-1,t,i,n,o)}}class EI{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let i=0;i<this._tokenCount;i++)t.push(`(${this._getDeltaLine(i)+e},${this._getStartCharacter(i)}-${this._getEndCharacter(i)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),n=this._getEndCharacter(e-1);return new M(0,t+1,i,n+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){const n=t+Math.floor((i-t)/2),o=this._getDeltaLine(n);if(o<e)t=n+1;else if(o>e)i=n-1;else{let r=n;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let a=n;for(;a<i&&this._getDeltaLine(a+1)===e;)a++;return new aY(this._tokens.subarray(4*r,4*a+4))}}return this._getDeltaLine(t)===e?new aY(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,n){const o=this._tokens,r=this._tokenCount;let a=0,l=!1,c=0;for(let d=0;d<r;d++){const f=4*d,g=o[f],m=o[f+1],_=o[f+2],C=o[f+3];if((g>e||g===e&&_>=t)&&(g<i||g===i&&m<=n))l=!0;else{if(a===0&&(c=g),l){const S=4*a;o[S]=g-c,o[S+1]=m,o[S+2]=_,o[S+3]=C}a++}}return this._tokenCount=a,c}split(e,t,i,n){const o=this._tokens,r=this._tokenCount,a=[],l=[];let c=a,d=0,f=0;for(let g=0;g<r;g++){const m=4*g,_=o[m],C=o[m+1],S=o[m+2],x=o[m+3];if(_>e||_===e&&S>=t){if(_<i||_===i&&C<=n)continue;c!==l&&(c=l,d=0,f=_)}c[d++]=_-f,c[d++]=C,c[d++]=S,c[d++]=x}return[new EI(new Uint32Array(a)),new EI(new Uint32Array(l)),f]}acceptDeleteRange(e,t,i,n,o){const r=this._tokens,a=this._tokenCount,l=n-t;let c=0,d=!1;for(let f=0;f<a;f++){const g=4*f;let m=r[g],_=r[g+1],C=r[g+2];const S=r[g+3];if(m<t||m===t&&C<=i){c++;continue}else if(m===t&&_<i)m===n&&C>o?C-=o-i:C=i;else if(m===t&&_===i)if(m===n&&C>o)C-=o-i;else{d=!0;continue}else if(m<n||m===n&&_<o)if(m===n&&C>o)m===t?(_=i,C=_+(C-o)):(_=0,C=_+(C-o));else{d=!0;continue}else if(m>n){if(l===0&&!d){c=a;break}m-=l}else if(m===n&&_>=o)e&&m===0&&(_+=e,C+=e),m-=l,_-=o-i,C-=o-i;else throw new Error("Not possible!");const x=4*c;r[x]=m,r[x+1]=_,r[x+2]=C,r[x+3]=S,c++}this._tokenCount=c}acceptInsertText(e,t,i,n,o,r){const a=i===0&&n===1&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){const f=4*d;let g=l[f],m=l[f+1],_=l[f+2];if(!(g<e||g===e&&_<t)){if(g===e&&_===t)if(a)_+=1;else continue;else if(g===e&&m<t&&t<_)i===0?_+=n:_=t;else{if(g===e&&m===t&&a)continue;if(g===e)if(g+=i,i===0)m+=n,_+=n;else{const C=_-m;m=o+(m-t),_=m+C}else g+=i}l[f]=g,l[f+1]=m,l[f+2]=_}}}}class aY{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var k2e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},q4=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let D7=class{constructor(e,t,i,n){this._legend=e,this._themeService=t,this._languageService=i,this._logService=n,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new yh}getMetadata(e,t,i){const n=this._languageService.languageIdCodec.encodeLanguageId(i),o=this._hashTable.get(e,t,n);let r;if(o)r=o.metadata,this._logService.getLevel()===Zc.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${fo.getForeground(r)}, fontStyle ${fo.getFontStyle(r).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let f=0;c>0&&f<this._legend.tokenModifiers.length;f++)c&1&&l.push(this._legend.tokenModifiers[f]),c=c>>1;c>0&&this._logService.getLevel()===Zc.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);if(typeof d>"u")r=2147483647;else{if(r=0,typeof d.italic<"u"){const f=(d.italic?1:0)<<11;r|=f|1}if(typeof d.bold<"u"){const f=(d.bold?2:0)<<11;r|=f|2}if(typeof d.underline<"u"){const f=(d.underline?4:0)<<11;r|=f|4}if(typeof d.strikethrough<"u"){const f=(d.strikethrough?8:0)<<11;r|=f|8}if(d.foreground){const f=d.foreground<<15;r|=f|16}r===0&&(r=2147483647)}}else this._logService.getLevel()===Zc.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),r=2147483647,a="not-in-legend";this._hashTable.add(e,t,n,r),this._logService.getLevel()===Zc.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${fo.getForeground(r)}, fontStyle ${fo.getFontStyle(r).toString(2)}`)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,console.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,n,o){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,console.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${n} is outside the previous data (length ${o}).`))}};D7=k2e([q4(1,cn),q4(2,Vn),q4(3,fc)],D7);function Jte(s,e,t){const i=s.data,n=s.data.length/5|0,o=Math.max(Math.ceil(n/1024),400),r=[];let a=0,l=1,c=0;for(;a<n;){const d=a;let f=Math.min(d+o,n);if(f<n){let L=f;for(;L-1>d&&i[5*L]===0;)L--;if(L-1===d){let k=f;for(;k+1<n&&i[5*k]===0;)k++;f=k}else f=L}let g=new Uint32Array((f-d)*4),m=0,_=0,C=0,S=0;for(;a<f;){const L=5*a,k=i[L],T=i[L+1],A=l+k|0,O=k===0?c+T|0:T,I=i[L+2],R=O+I|0,B=i[L+3],z=i[L+4];if(R<=O)e.warnInvalidLengthSemanticTokens(A,O+1);else if(C===A&&S>O)e.warnOverlappingSemanticTokens(A,O+1);else{const q=e.getMetadata(B,z,t);q!==2147483647&&(_===0&&(_=A),g[m]=A-_,g[m+1]=O,g[m+2]=R,g[m+3]=q,m+=4,C=A,S=R)}l=A,c=O,a++}m!==g.length&&(g=g.subarray(0,m));const x=wy.create(_,g);r.push(x)}return r}class E2e{constructor(e,t,i,n){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=n,this.next=null}}class yh{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=yh._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<yh._SIZES.length?2/3*this._currentLength:0),this._elements=[],yh._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const n=this._hashFunc(e,t,i);let o=this._elements[n];for(;o;){if(o.tokenTypeIndex===e&&o.tokenModifierSet===t&&o.languageId===i)return o;o=o.next}return null}add(e,t,i,n){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const o=this._elements;this._currentLengthIndex++,this._currentLength=yh._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<yh._SIZES.length?2/3*this._currentLength:0),this._elements=[],yh._nullOutEntries(this._elements,this._currentLength);for(const r of o){let a=r;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new E2e(e,t,i,n))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}yh._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function T2e(s){for(let e=0,t=s.length;e<t;e+=4){const i=s[e+0],n=s[e+1],o=s[e+2],r=s[e+3];s[e+0]=r,s[e+1]=o,s[e+2]=n,s[e+3]=i}}function I2e(s){const e=new Uint8Array(s.buffer,s.byteOffset,s.length*4);return bX()||T2e(e),yN.wrap(e)}function eie(s){const e=new Uint32Array(N2e(s));let t=0;if(e[t++]=s.id,s.type==="full")e[t++]=1,e[t++]=s.data.length,e.set(s.data,t),t+=s.data.length;else{e[t++]=2,e[t++]=s.deltas.length;for(const i of s.deltas)e[t++]=i.start,e[t++]=i.deleteCount,i.data?(e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length):e[t++]=0}return I2e(e)}function N2e(s){let e=0;if(e+=1+1,s.type==="full")e+=1+s.data.length;else{e+=1,e+=(1+1+1)*s.deltas.length;for(const t of s.deltas)t.data&&(e+=t.data.length)}return e}var zg=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};function hR(s){return s&&!!s.data}function tie(s){return s&&Array.isArray(s.edits)}class R2e{constructor(e,t,i){this.provider=e,this.tokens=t,this.error=i}}function iie(s,e){return s.has(e)}function A2e(s,e){const t=s.orderedGroups(e);return t.length>0?t[0]:[]}function nie(s,e,t,i,n){return zg(this,void 0,void 0,function*(){const o=A2e(s,e),r=yield Promise.all(o.map(a=>zg(this,void 0,void 0,function*(){let l,c=null;try{l=yield a.provideDocumentSemanticTokens(e,a===t?i:null,n)}catch(d){c=d,l=null}return(!l||!hR(l)&&!tie(l))&&(l=null),new R2e(a,l,c)})));for(const a of r){if(a.error)throw a.error;if(a.tokens)return a}return r.length>0?r[0]:null})}function M2e(s,e){const t=s.orderedGroups(e);return t.length>0?t[0]:null}class O2e{constructor(e,t){this.provider=e,this.tokens=t}}function P2e(s,e){return s.has(e)}function sie(s,e){const t=s.orderedGroups(e);return t.length>0?t[0]:[]}function P6(s,e,t,i){return zg(this,void 0,void 0,function*(){const n=sie(s,e),o=yield Promise.all(n.map(r=>zg(this,void 0,void 0,function*(){let a;try{a=yield r.provideDocumentRangeSemanticTokens(e,t,i)}catch(l){Ys(l),a=null}return(!a||!hR(a))&&(a=null),new O2e(r,a)})));for(const r of o)if(r.tokens)return r;return o.length>0?o[0]:null})}Li.registerCommand("_provideDocumentSemanticTokensLegend",(s,...e)=>zg(void 0,void 0,void 0,function*(){const[t]=e;Qi(t instanceof yt);const i=s.get(Hn).getModel(t);if(!i)return;const{documentSemanticTokensProvider:n}=s.get(ct),o=M2e(n,i);return o?o[0].getLegend():s.get(fs).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));Li.registerCommand("_provideDocumentSemanticTokens",(s,...e)=>zg(void 0,void 0,void 0,function*(){const[t]=e;Qi(t instanceof yt);const i=s.get(Hn).getModel(t);if(!i)return;const{documentSemanticTokensProvider:n}=s.get(ct);if(!iie(n,i))return s.get(fs).executeCommand("_provideDocumentRangeSemanticTokens",t,i.getFullModelRange());const o=yield nie(n,i,null,null,ri.None);if(!o)return;const{provider:r,tokens:a}=o;if(!a||!hR(a))return;const l=eie({id:0,type:"full",data:a.data});return a.resultId&&r.releaseDocumentSemanticTokens(a.resultId),l}));Li.registerCommand("_provideDocumentRangeSemanticTokensLegend",(s,...e)=>zg(void 0,void 0,void 0,function*(){const[t,i]=e;Qi(t instanceof yt);const n=s.get(Hn).getModel(t);if(!n)return;const{documentRangeSemanticTokensProvider:o}=s.get(ct),r=sie(o,n);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!i||!M.isIRange(i))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const a=yield P6(o,n,M.lift(i),ri.None);if(!!a)return a.provider.getLegend()}));Li.registerCommand("_provideDocumentRangeSemanticTokens",(s,...e)=>zg(void 0,void 0,void 0,function*(){const[t,i]=e;Qi(t instanceof yt),Qi(M.isIRange(i));const n=s.get(Hn).getModel(t);if(!n)return;const{documentRangeSemanticTokensProvider:o}=s.get(ct),r=yield P6(o,n,M.lift(i),ri.None);if(!(!r||!r.tokens))return eie({id:0,type:"full",data:r.tokens.data})}));var F6=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},br=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};function Uf(s){return s.toString()}function lY(s){const e=new TN,t=s.createSnapshot();let i;for(;i=t.read();)e.update(i);return e.digest()}class F2e{constructor(e,t,i){this._modelEventListeners=new Ae,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(n=>i(e,n)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}const B2e=Wo||mi?1:2;class V2e{constructor(e,t,i,n,o,r,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=n,this.heapSize=o,this.sha1=r,this.versionId=a,this.alternativeVersionId=l}}let TI=class $w extends ge{constructor(e,t,i,n,o,r,a,l,c){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=i,this._logService=n,this._undoRedoService=o,this._languageService=r,this._languageConfigurationService=a,this._languageFeatureDebounceService=l,this._onModelAdded=this._register(new J),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new J),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new J),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new W2e(this._themeService,this._languageService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new E7(this._semanticStyling,this,this._themeService,this._configurationService,this._languageFeatureDebounceService,c))}static _readModelOptions(e,t){var i;let n=Mo.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const m=parseInt(e.editor.tabSize,10);isNaN(m)||(n=m),n<1&&(n=1)}let o=n;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const m=parseInt(e.editor.indentSize,10);isNaN(m)||(o=m),o<1&&(o=1)}let r=Mo.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:Boolean(e.editor.insertSpaces));let a=B2e;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=Mo.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(c=e.editor.trimAutoWhitespace==="false"?!1:Boolean(e.editor.trimAutoWhitespace));let d=Mo.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(d=e.editor.detectIndentation==="false"?!1:Boolean(e.editor.detectIndentation));let f=Mo.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(f=e.editor.largeFileOptimizations==="false"?!1:Boolean(e.editor.largeFileOptimizations));let g=Mo.bracketPairColorizationOptions;return((i=e.editor)===null||i===void 0?void 0:i.bracketPairColorization)&&typeof e.editor.bracketPairColorization=="object"&&(g={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:n,indentSize:o,insertSpaces:r,detectIndentation:d,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:f,bracketPairColorizationOptions:g}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:gl===3||gl===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){let n=this._modelCreationOptionsByLanguageAndResource[e+t];if(!n){const o=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),r=this._getEOL(t,e);n=$w._readModelOptions({editor:o,eol:r},i),this._modelCreationOptionsByLanguageAndResource[e+t]=n}return n}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){const o=t[i],r=this._models[o],a=r.model.getLanguageId(),l=r.model.uri,c=e[a+l],d=this.getCreationOptions(a,l,r.model.isForSimpleWidget);$w._setModelOptionsForModel(r.model,d,c)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&Sl(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Uf(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Uf(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Uf(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,n)=>i.time-n.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,n){const o=this.getCreationOptions(t,i,n),r=new Qh(e,t,o,i,this._undoRedoService,this._languageService,this._languageConfigurationService);if(i&&this._disposedModels.has(Uf(i))){const c=this._removeDisposedModel(i),d=this._undoRedoService.getElements(i),f=lY(r)===c.sha1;if(f||c.sharesUndoRedoStack){for(const g of d.past)Ch(g)&&g.matchesResource(i)&&g.setModel(r);for(const g of d.future)Ch(g)&&g.matchesResource(i)&&g.setModel(r);this._undoRedoService.setElementsValidFlag(i,!0,g=>Ch(g)&&g.matchesResource(i)),f&&(r._overwriteVersionId(c.versionId),r._overwriteAlternativeVersionId(c.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=Uf(r.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new F2e(r,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,i,n=!1){let o;return t?(o=this._createModelData(e,t.languageId,i,n),this.setMode(o.model,t)):o=this._createModelData(e,xl,i,n),this._onModelAdded.fire(o.model),o.model}setMode(e,t){if(!t)return;const i=this._models[Uf(e.uri)];!i||i.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){const o=t[i];e.push(this._models[o].model)}return e}getModel(e){const t=Uf(e),i=this._models[t];return i?i.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Xt.file||e.scheme===Xt.vscodeRemote||e.scheme===Xt.vscodeUserData||e.scheme===Xt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Uf(e.uri),i=this._models[t],n=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let o=!1,r=0;if(n||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const c of l.past)Ch(c)&&c.matchesResource(e.uri)&&(o=!0,r+=c.heapSize(e.uri),c.setModel(e.uri));for(const c of l.future)Ch(c)&&c.matchesResource(e.uri)&&(o=!0,r+=c.heapSize(e.uri),c.setModel(e.uri))}}const a=$w.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(o)if(!n&&r>a){const l=i.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>Ch(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new V2e(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),n,r,lY(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!n){const l=i.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,n=e.getLanguageId(),o=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget);$w._setModelOptionsForModel(e,r,o),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}};TI.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;TI=F6([br(0,Ai),br(1,DJ),br(2,cn),br(3,fc),br(4,sR),br(5,Vn),br(6,os),br(7,Pl),br(8,ct)],TI);const B6="editor.semanticHighlighting";function k7(s,e,t){var i;const n=(i=t.getValue(B6,{overrideIdentifier:s.getLanguageId(),resource:s.uri}))===null||i===void 0?void 0:i.enabled;return typeof n=="boolean"?n:e.getColorTheme().semanticHighlighting}let E7=class extends ge{constructor(e,t,i,n,o,r){super(),this._watchers=Object.create(null),this._semanticStyling=e;const a=d=>{this._watchers[d.uri.toString()]=new bS(d,this._semanticStyling,i,o,r)},l=(d,f)=>{f.dispose(),delete this._watchers[d.uri.toString()]},c=()=>{for(const d of t.getModels()){const f=this._watchers[d.uri.toString()];k7(d,i,n)?f||a(d):f&&l(d,f)}};this._register(t.onModelAdded(d=>{k7(d,i,n)&&a(d)})),this._register(t.onModelRemoved(d=>{const f=this._watchers[d.uri.toString()];f&&l(d,f)})),this._register(n.onDidChangeConfiguration(d=>{d.affectsConfiguration(B6)&&c()})),this._register(i.onDidColorThemeChange(c))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}};E7=F6([br(1,Hn),br(2,cn),br(3,Ai),br(4,Pl),br(5,ct)],E7);class W2e extends ge{constructor(e,t,i){super(),this._themeService=e,this._languageService=t,this._logService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new D7(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}}class H2e{constructor(e,t,i){this.provider=e,this.resultId=t,this.data=i}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}let bS=class Qp extends ge{constructor(e,t,i,n,o){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=t,this._provider=o.documentSemanticTokensProvider,this._debounceInformation=n.for(this._provider,"DocumentSemanticTokens",{min:Qp.REQUEST_MIN_DELAY,max:Qp.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new Xi(()=>this._fetchDocumentSemanticTokensNow(),Qp.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=()=>{Ni(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};r(),this._register(this._provider.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(i.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!iie(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}const e=new _o,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,i=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,n=nie(this._provider,this._model,t,i,e.token);this._currentDocumentRequestCancellationTokenSource=e;const o=[],r=this._model.onDidChangeContent(l=>{o.push(l)}),a=new qr(!1);n.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,o);else{const{provider:c,tokens:d}=l,f=this._semanticStyling.get(c);this._setDocumentSemanticTokens(c,d||null,f,o)}},l=>{l&&(Dd(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||Yt(l),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),o.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,i,n,o){o=Math.min(o,i.length-n,e.length-t);for(let r=0;r<o;r++)i[n+r]=e[t+r]}_setDocumentSemanticTokens(e,t,i,n){const o=this._currentDocumentResponse,r=()=>{n.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!i){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),r();return}if(tie(t)){if(!o){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:o.data};else{let a=0;for(const g of t.edits)a+=(g.data?g.data.length:0)-g.deleteCount;const l=o.data,c=new Uint32Array(l.length+a);let d=l.length,f=c.length;for(let g=t.edits.length-1;g>=0;g--){const m=t.edits[g];if(m.start>l.length){i.warnInvalidEditStart(o.resultId,t.resultId,g,m.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}const _=d-(m.start+m.deleteCount);_>0&&(Qp._copy(l,d-_,c,f-_,_),f-=_),m.data&&(Qp._copy(m.data,0,c,f-m.data.length,m.data.length),f-=m.data.length),d=m.start}d>0&&Qp._copy(l,0,c,0,d),t={resultId:t.resultId,data:c}}}if(hR(t)){this._currentDocumentResponse=new H2e(e,t.resultId,t.data);const a=Jte(t,i,this._model.getLanguageId());if(n.length>0)for(const l of n)for(const c of a)for(const d of l.changes)c.applyEdit(d.range,d.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);r()}};bS.REQUEST_MIN_DELAY=300;bS.REQUEST_MAX_DELAY=2e3;bS=F6([br(2,cn),br(3,Pl),br(4,ct)],bS);const z2e=new RegExp(`(\\\\)?\\$\\((${yr.iconNameExpression}(?:${yr.iconModifierExpression})?)\\)`,"g");function Em(s){const e=new Array;let t,i=0,n=0;for(;(t=z2e.exec(s))!==null;){n=t.index||0,e.push(s.substring(i,n)),i=(t.index||0)+t[0].length;const[,o,r]=t;e.push(o?`$(${r})`:U2e({id:r}))}return i<s.length&&e.push(s.substring(i)),e}function U2e(s){const e=Pe("span");return e.classList.add(...yr.asClassNameArray(s)),e}const $2e={buttonBackground:oe.fromHex("#0E639C"),buttonHoverBackground:oe.fromHex("#006BB3"),buttonSeparator:oe.white,buttonForeground:oe.white};class cY extends ge{constructor(e,t){super(),this._onDidClick=this._register(new J),this.options=t||Object.create(null),xd(this.options,$2e,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(Zi.addTarget(this._element)),[it.CLICK,vn.Tap].forEach(i=>{this._register(Le(this._element,i,n=>{if(!this.enabled){qi.stop(n);return}this._onDidClick.fire(n)}))}),this._register(Le(this._element,it.KEY_DOWN,i=>{const n=new kn(i);let o=!1;this.enabled&&(n.equals(3)||n.equals(10))?(this._onDidClick.fire(i),o=!0):n.equals(9)&&(this._element.blur(),o=!0),o&&qi.stop(n,!0)})),this._register(Le(this._element,it.MOUSE_OVER,i=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(Le(this._element,it.MOUSE_OUT,i=>{this.applyStyles()})),this.focusTracker=this._register(zm(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.setHoverBackground()})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.applyStyles()})),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const i=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=i?"1px":"",this._element.style.borderStyle=i?"solid":"",this._element.style.borderColor=i}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?Mg(this._element,...Em(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}const j2e={badgeBackground:oe.fromHex("#4D4D4D"),badgeForeground:oe.fromHex("#FFFFFF")};class T7{constructor(e,t){this.count=0,this.options=t||Object.create(null),xd(this.options,j2e,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=Se(e,Pe(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=bl(this.countFormat,this.count),this.element.title=bl(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",i=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=i?"1px":"",this.element.style.borderStyle=i?"solid":"",this.element.style.borderColor=i}}}const uY="done",dY="active",G4="infinite",Y4="infinite-long-running",hY="discrete",K2e={progressBarBackground:oe.fromHex("#0E70C0")};class fR extends ge{constructor(e,t){super(),this.options=t||Object.create(null),xd(this.options,K2e,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this.showDelayedScheduler=this._register(new Xi(()=>Wa(this.element),0)),this.longRunningScheduler=this._register(new Xi(()=>this.infiniteLongRunning(),fR.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(dY,G4,Y4,hY),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(uY),this.element.classList.contains(G4)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(hY,uY,Y4),this.element.classList.add(dY,G4),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(Y4)}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}fR.LONG_RUNNING_INFINITE_THRESHOLD=1e4;class V6{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const oie=new V6("id#");const Z4={},q2e=new V6("quick-input-button-icon-");function I7(s){if(!s)return;let e;const t=s.dark.toString();return Z4[t]?e=Z4[t]:(e=q2e.nextId(),E3(`.${e}, .hc-light .${e}`,`background-image: ${Um(s.light||s.dark)}`),E3(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Um(s.dark)}`),Z4[t]=e),e}const G2e={ctrlCmd:!1,alt:!1};var CS;(function(s){s[s.Blur=1]="Blur",s[s.Gesture=2]="Gesture",s[s.Other=3]="Other"})(CS||(CS={}));var Vc;(function(s){s[s.NONE=0]="NONE",s[s.FIRST=1]="FIRST",s[s.SECOND=2]="SECOND",s[s.LAST=3]="LAST"})(Vc||(Vc={}));function Y2e(s,e={}){const t=W6(e);return t.textContent=s,t}function rie(s,e={}){const t=W6(e);return aie(t,Q2e(s,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function W6(s){const e=s.inline?"span":"div",t=document.createElement(e);return s.className&&(t.className=s.className),t}class Z2e{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function aie(s,e,t,i){let n;if(e.type===2)n=document.createTextNode(e.content||"");else if(e.type===3)n=document.createElement("b");else if(e.type===4)n=document.createElement("i");else if(e.type===7&&i)n=document.createElement("code");else if(e.type===5&&t){const o=document.createElement("a");t.disposables.add(Ps(o,"click",r=>{t.callback(String(e.index),r)})),n=o}else e.type===8?n=document.createElement("br"):e.type===1&&(n=s);n&&s!==n&&s.appendChild(n),n&&Array.isArray(e.children)&&e.children.forEach(o=>{aie(n,o,t,i)})}function Q2e(s,e){const t={type:1,children:[]};let i=0,n=t;const o=[],r=new Z2e(s);for(;!r.eos();){let a=r.next();const l=a==="\\"&&N7(r.peek(),e)!==0;if(l&&(a=r.next()),!l&&X2e(a,e)&&a===r.peek()){r.advance(),n.type===2&&(n=o.pop());const c=N7(a,e);if(n.type===c||n.type===5&&c===6)n=o.pop();else{const d={type:c,children:[]};c===5&&(d.index=i,i++),n.children.push(d),o.push(n),n=d}}else if(a===`
`)n.type===2&&(n=o.pop()),n.children.push({type:8});else if(n.type!==2){const c={type:2,content:a};n.children.push(c),o.push(n),n=c}else n.content+=a}return n.type===2&&(n=o.pop()),t}function X2e(s,e){return N7(s,e)!==0}function N7(s,e){switch(s){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}class J2e{constructor(e,t=0,i=e.length,n=t-1){this.items=e,this.start=t,this.end=i,this.index=n}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class eAe{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new J2e(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const vw=Pe,tAe={inputBackground:oe.fromHex("#3C3C3C"),inputForeground:oe.fromHex("#CCCCCC"),inputValidationInfoBorder:oe.fromHex("#55AAFF"),inputValidationInfoBackground:oe.fromHex("#063B49"),inputValidationWarningBorder:oe.fromHex("#B89500"),inputValidationWarningBackground:oe.fromHex("#352A05"),inputValidationErrorBorder:oe.fromHex("#BE1100"),inputValidationErrorBackground:oe.fromHex("#5A1D1D")};class lie extends gc{constructor(e,t,i){var n;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new J),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new J),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i||Object.create(null),xd(this.options,tAe,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(n=this.options.tooltip)!==null&&n!==void 0?n:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Se(e,vw(".monaco-inputbox.idle"));const o=this.options.flexibleHeight?"textarea":"input",r=Se(this.element,vw(".ibwrapper"));if(this.input=Se(r,vw(o+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Se(r,vw("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new zee(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Se(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));const a=this._register(new an(document,"selectionchange")),l=gt.filter(a.event,()=>{const c=document.getSelection();return(c==null?void 0:c.anchorNode)===r});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Cd(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:k3(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return ec(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const i=parseFloat(this.mirror.style.paddingLeft||"")||0,n=parseFloat(this.mirror.style.paddingRight||"")||0;t=i+n}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=i.border?`1px solid ${i.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=ec(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:n=>{if(!this.message)return null;e=Se(n,vw(".monaco-inputbox-container")),t();const o={inline:!0,className:"monaco-inputbox-message"},r=this.message.formatContent?rie(this.message.content,o):Y2e(this.message.content,o);r.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return r.style.backgroundColor=a.background?a.background.toString():"",r.style.color=a.foreground?a.foreground.toString():"",r.style.border=a.border?`1px solid ${a.border}`:"",Se(e,r),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=b("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=b("alertWarningMessage","Warning: {0}",this.message.content):i=b("alertInfoMessage","Info: {0}",this.message.content),go(i),this.state="open"}_hideMessage(){!this.contextViewProvider||(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText="\xA0",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",i=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=i?"1px":"",this.element.style.borderStyle=i?"solid":"",this.element.style.borderColor=i}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=k3(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,n=t.selectionEnd,o=t.value;i!==null&&n!==null&&(this.value=o.substr(0,i)+e+o.substr(n),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class cie extends lie{constructor(e,t,i){const n=b({key:"history.inputbox.hint",comment:["Text will be prefixed with \u21C5 plus a single space, then used as a hint where input field keeps history"]},"for history"),o=` or \u21C5 ${n}`,r=` (\u21C5 ${n})`;super(e,t,i),this._onDidFocus=this._register(new J),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new J),this.onDidBlur=this._onDidBlur.event,this.history=new eAe(i.history,100);const a=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(o)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?o:r,c=this.placeholder+l;i.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=c:this.setPlaceHolder(c)}};this.observer=new MutationObserver((l,c)=>{l.forEach(d=>{d.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=c=>{if(this.placeholder.endsWith(c)){const d=this.placeholder.slice(0,this.placeholder.length-c.length);return i.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1};l(r)||l(o)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,FT(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,FT(this.value))}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}const iAe=Pe;class nAe extends ge{constructor(e){super(),this.parent=e,this.onKeyDown=t=>Le(this.inputBox.inputElement,it.KEY_DOWN,i=>{t(new kn(i))}),this.onMouseDown=t=>Le(this.inputBox.inputElement,it.MOUSE_DOWN,i=>{t(new nd(i))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=Se(this.parent,iAe(".quick-input-box")),this.inputBox=this._register(new lie(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Pn.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Pn.Info?1:e===Pn.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Pn.Info?1:e===Pn.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}class Qm{constructor(e,t){var i;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(i=t==null?void 0:t.supportIcons)!==null&&i!==void 0?i:!1,this.domNode=Se(e,Pe("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",n){e||(e=""),n&&(e=Qm.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&Sl(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const i of this.highlights){if(i.end===i.start)continue;if(t<i.start){const r=this.text.substring(t,i.start);e.push(Pe("span",void 0,...this.supportIcons?Em(r):[r])),t=i.end}const n=this.text.substring(i.start,i.end),o=Pe("span.highlight",void 0,...this.supportIcons?Em(n):[n]);i.extraClasses&&o.classList.add(...i.extraClasses),e.push(o),t=i.end}if(t<this.text.length){const i=this.text.substring(t);e.push(Pe("span",void 0,...this.supportIcons?Em(i):[i]))}Mg(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let i=0,n=0;return e.replace(/\r\n|\r|\n/g,(o,r)=>{n=o===`\r
`?-1:0,r+=i;for(const a of t)a.end<=r||(a.start>=r&&(a.start+=n),a.end>=r&&(a.end+=n));return i+=n,"\u23CE"})}}class Q4{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class II extends ge{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new Q4(Se(e,Pe(".monaco-icon-label")))),this.labelContainer=Se(this.domNode.element,Pe(".monaco-icon-label-container"));const i=Se(this.labelContainer,Pe("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new Q4(Se(this.labelContainer,Pe("span.monaco-icon-description-container")))),(t==null?void 0:t.supportHighlights)||(t==null?void 0:t.supportIcons)?this.nameNode=new rAe(i,!!t.supportIcons):this.nameNode=new sAe(i),t!=null&&t.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new Qm(Se(this.descriptionContainer.element,Pe("span.label-description")),{supportIcons:!!t.supportIcons}):this.descriptionNodeFactory=()=>this._register(new Q4(Se(this.descriptionContainer.element,Pe("span.label-description")))),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,i){const n=["monaco-icon-label"];i&&(i.extraClasses&&n.push(...i.extraClasses),i.italic&&n.push("italic"),i.strikethrough&&n.push("strikethrough")),this.domNode.className=n.join(" "),this.setupHover(i!=null&&i.descriptionTitle?this.labelContainer:this.element,i==null?void 0:i.title),this.nameNode.setLabel(e,i),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof Qm?(this.descriptionNode.set(t||"",i?i.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,i==null?void 0:i.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(i==null?void 0:i.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)XNe(e,t);else{const n=Ete(this.hoverDelegate,e,t);n&&this.customHovers.set(e,n)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class sAe{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Sl(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=Se(this.container,Pe("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const n=e[i],o=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${i}`;Se(this.container,Pe("a.label-name",{id:o,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},n)),i<e.length-1&&Se(this.container,Pe("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function oAe(s,e,t){if(!t)return;let i=0;return s.map(n=>{const o={start:i,end:i+n.length},r=t.map(a=>No.intersect(o,a)).filter(a=>!No.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=o.end+e.length,r})}class rAe{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Sl(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new Qm(Se(this.container,Pe("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=(t==null?void 0:t.separator)||"/",n=oAe(e,i,t==null?void 0:t.matches);for(let o=0;o<e.length;o++){const r=e[o],a=n?n[o]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${o}`,c=Pe("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":o,role:"treeitem"});new Qm(Se(this.container,c),{supportIcons:this.supportIcons}).set(r,a,void 0,t==null?void 0:t.labelEscapeNewLines),o<e.length-1&&Se(c,Pe("span.label-separator",void 0,i))}}}}const Jk=Pe;class H6{constructor(e,t,i){this.os=t,this.keyElements=new Set,this.options=i||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=Se(e,Jk(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&H6.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(Se(this.domNode,Jk("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Ts(this.domNode),this.keyElements.clear()}renderPart(e,t,i){const n=N6.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,n.ctrlKey,Boolean(i==null?void 0:i.ctrlKey),n.separator),t.shiftKey&&this.renderKey(e,n.shiftKey,Boolean(i==null?void 0:i.shiftKey),n.separator),t.altKey&&this.renderKey(e,n.altKey,Boolean(i==null?void 0:i.altKey),n.separator),t.metaKey&&this.renderKey(e,n.metaKey,Boolean(i==null?void 0:i.metaKey),n.separator);const o=t.keyLabel;o&&this.renderKey(e,o,Boolean(i==null?void 0:i.keyCode),"")}renderKey(e,t,i,n){Se(e,this.createKeyElement(t,i?".highlight":"")),n&&Se(e,Jk("span.monaco-keybinding-key-separator",void 0,n))}renderUnbound(e){Se(e,this.createKeyElement(b("unbound","Unbound")))}createKeyElement(e,t=""){const i=Jk("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),i}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Sl(e.firstPart,t.firstPart)&&Sl(e.chordPart,t.chordPart)}}const fY=new vg(()=>{const s=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:s,collatorIsNumeric:s.resolvedOptions().numeric}});new vg(()=>({collator:new Intl.Collator(void 0,{numeric:!0})}));new vg(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function aAe(s,e,t=!1){const i=s||"",n=e||"",o=fY.value.collator.compare(i,n);return fY.value.collatorIsNumeric&&o===0&&i!==n?i<n?-1:1:o}function lAe(s,e,t){const i=s.toLowerCase(),n=e.toLowerCase(),o=cAe(s,e,t);if(o)return o;const r=i.endsWith(t),a=n.endsWith(t);if(r!==a)return r?-1:1;const l=aAe(i,n);return l!==0?l:i.localeCompare(n)}function cAe(s,e,t){const i=s.toLowerCase(),n=e.toLowerCase(),o=i.startsWith(t),r=n.startsWith(t);if(o!==r)return o?-1:1;if(o&&r){if(i.length<n.length)return-1;if(i.length>n.length)return 1}return 0}var uie=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},uAe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const zu=Pe;class dAe{constructor(e){this.hidden=!1,this._onChecked=new J,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class SL{get templateId(){return SL.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=Se(e,zu(".quick-input-list-entry"));const i=Se(t.entry,zu("label.quick-input-list-label"));t.toDisposeTemplate.push(Ps(i,it.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=Se(i,zu("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(Ps(t.checkbox,it.CHANGE,c=>{t.element.checked=t.checkbox.checked}));const n=Se(i,zu(".quick-input-list-rows")),o=Se(n,zu(".quick-input-list-row")),r=Se(n,zu(".quick-input-list-row"));t.label=new II(o,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=Se(o,zu(".quick-input-list-entry-keybinding"));t.keybinding=new H6(a,gl);const l=Se(r,zu(".quick-input-list-label-meta"));return t.detail=new II(l,{supportHighlights:!0,supportIcons:!0}),t.separator=Se(t.entry,zu(".quick-input-list-separator")),t.actionBar=new Cd(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,i){i.toDisposeElement=Ni(i.toDisposeElement),i.element=e,i.checkbox.checked=e.checked,i.toDisposeElement.push(e.onChecked(c=>i.checkbox.checked=c));const{labelHighlights:n,descriptionHighlights:o,detailHighlights:r}=e,a=Object.create(null);a.matches=n||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=o||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,i.label.setLabel(e.saneLabel,e.saneDescription,a),i.keybinding.set(e.item.keybinding),e.saneDetail&&i.detail.setLabel(e.saneDetail,void 0,{matches:r,title:e.saneDetail}),e.separator&&e.separator.label?(i.separator.textContent=e.separator.label,i.separator.style.display=""):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),i.actionBar.clear();const l=e.item.buttons;l&&l.length?(i.actionBar.push(l.map((c,d)=>{let f=c.iconClass||(c.iconPath?I7(c.iconPath):void 0);c.alwaysVisible&&(f=f?`${f} always-visible`:"always-visible");const g=new _a(`id-${d}`,"",f,!0,()=>uAe(this,void 0,void 0,function*(){e.fireButtonTriggered({button:c,item:e.item})}));return g.tooltip=c.tooltip||"",g}),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){i.toDisposeElement=Ni(i.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=Ni(e.toDisposeElement),e.toDisposeTemplate=Ni(e.toDisposeTemplate)}}SL.ID="listelement";class hAe{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return SL.ID}}var cs;(function(s){s[s.First=1]="First",s[s.Second=2]="Second",s[s.Last=3]="Last",s[s.Next=4]="Next",s[s.Previous=5]="Previous",s[s.NextPage=6]="NextPage",s[s.PreviousPage=7]="PreviousPage"})(cs||(cs={}));class z6{constructor(e,t,i){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new J,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new J,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new J,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new J,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new J,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new J,this.onKeyDown=this._onKeyDown.event,this._onLeave=new J,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=Se(this.parent,zu(".quick-input-list"));const n=new hAe,o=new pAe;this.list=i.createList("QuickInput",this.container,n,[new SL],{identityProvider:{getId:r=>r.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:o}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(r=>{const a=new kn(r);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(mi?r.metaKey:r.ctrlKey)&&this.list.setFocus(mr(this.list.length));break;case 16:{const l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break}case 18:{const l=this.list.getFocus();l.length===1&&l[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(r=>{r.browserEvent.button!==2&&r.browserEvent.preventDefault()})),this.disposables.push(Le(this.container,it.CLICK,r=>{(r.x||r.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(r=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(r=>{typeof r.index=="number"&&(r.browserEvent.preventDefault(),this.list.setSelection([r.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return gt.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return gt.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let i=0,n=e.length;i<n;i++){const o=e[i];if(!o.hidden)if(o.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let i=0,n=t.length;i<n;i++)t[i].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let i=0,n=t.length;i<n;i++)t[i].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=Ni(this.elementDisposables);const t=i=>this.fireButtonTriggered(i);this.inputElements=e,this.elements=e.reduce((i,n,o)=>{var r,a,l;if(n.type!=="separator"){const c=o&&e[o-1],d=n.label&&n.label.replace(/\r?\n/g," "),f=Kv(d).text.trim(),g=n.meta&&n.meta.replace(/\r?\n/g," "),m=n.description&&n.description.replace(/\r?\n/g," "),_=n.detail&&n.detail.replace(/\r?\n/g," "),C=n.ariaLabel||[d,m,_].map(x=>B1e(x)).filter(x=>!!x).join(", "),S=this.parent.classList.contains("show-checkboxes");i.push(new dAe({hasCheckbox:S,index:o,item:n,saneLabel:d,saneSortLabel:f,saneMeta:g,saneAriaLabel:C,saneDescription:m,saneDetail:_,labelHighlights:(r=n.highlights)===null||r===void 0?void 0:r.label,descriptionHighlights:(a=n.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=n.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:c&&c.type==="separator"?c:void 0,fireButtonTriggered:t}))}return i},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(i=>i.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((i,n,o)=>(i.set(n.item,o),i),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const i of e)t.add(i);for(const i of this.elements)i.checked=t.has(i.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===cs.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=cs.First),e===cs.Previous&&this.list.getFocus()[0]===0&&(e=cs.Last),e===cs.Second&&this.list.length<2&&(e=cs.First),e){case cs.First:this.list.focusFirst();break;case cs.Second:this.list.focusNth(1);break;case cs.Last:this.list.focusLast();break;case cs.Next:this.list.focusNext();break;case cs.Previous:this.list.focusPrevious();break;case cs.NextPage:this.list.focusNextPage();break;case cs.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const o=n.index&&this.inputElements[n.index-1];n.separator=o&&o.type==="separator"?o:void 0});else{let n;this.elements.forEach(o=>{let r;this.matchOnLabelMode==="fuzzy"?r=this.matchOnLabel?zr(zk(e,Kv(o.saneLabel))):void 0:r=this.matchOnLabel?zr(fAe(t,Kv(o.saneLabel))):void 0;const a=this.matchOnDescription?zr(zk(e,Kv(o.saneDescription||""))):void 0,l=this.matchOnDetail?zr(zk(e,Kv(o.saneDetail||""))):void 0,c=this.matchOnMeta?zr(zk(e,Kv(o.saneMeta||""))):void 0;if(r||a||l||c?(o.labelHighlights=r,o.descriptionHighlights=a,o.detailHighlights=l,o.hidden=!1):(o.labelHighlights=void 0,o.descriptionHighlights=void 0,o.detailHighlights=void 0,o.hidden=!o.item.alwaysShow),o.separator=void 0,!this.sortByLabel){const d=o.index&&this.inputElements[o.index-1];n=d&&d.type==="separator"?d:n,n&&!o.hidden&&(o.separator=n,n=void 0)}})}const i=this.elements.filter(n=>!n.hidden);if(this.sortByLabel&&e){const n=e.toLowerCase();i.sort((o,r)=>gAe(o,r,n))}return this.elementsToIndexes=i.reduce((n,o,r)=>(n.set(o.item,r),n),new Map),this.list.splice(0,this.list.length,i),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(i.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const i of e)i.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=Ni(this.elementDisposables),this.disposables=Ni(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}uie([Ss],z6.prototype,"onDidChangeFocus",null);uie([Ss],z6.prototype,"onDidChangeSelection",null);function fAe(s,e){const{text:t,iconOffsets:i}=e;if(!i||i.length===0)return gY(s,t);const n=vN(t," "),o=t.length-n.length,r=gY(s,n);if(r)for(const a of r){const l=i[a.start+o]+o;a.start+=l,a.end+=l}return r}function gY(s,e){const t=e.toLowerCase().indexOf(s.toLowerCase());return t!==-1?[{start:t,end:t+s.length}]:null}function gAe(s,e,t){const i=s.labelHighlights||[],n=e.labelHighlights||[];return i.length&&!n.length?-1:!i.length&&n.length?1:i.length===0&&n.length===0?0:lAe(s.saneSortLabel,e.saneSortLabel,t)}class pAe{getWidgetAriaLabel(){return b("quickInput","Quick Input")}getAriaLabel(e){var t;return!((t=e.separator)===null||t===void 0)&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!!e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}}var pY=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const Na=Pe,R7={iconClass:w.quickInputBack.classNames,tooltip:b("quickInput.back","Back"),handle:-1};class gR extends ge{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=gR.noPromptMessage,this._severity=Pn.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new J),this.onDidHideEmitter=this._register(new J),this.onDisposeEmitter=this._register(new J),this.visibleDisposables=this._register(new Ae),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!gd;this._ignoreFocusOut=e&&!gd,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){!this.visible||this.ui.hide()}didHide(e=CS.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="\xA0");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new Za,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const n=this.buttons.filter(r=>r===R7);this.ui.leftActionBar.push(n.map((r,a)=>{const l=new _a(`id-${a}`,"",r.iconClass||I7(r.iconPath),!0,()=>pY(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(r)}));return l.tooltip=r.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const o=this.buttons.filter(r=>r!==R7);this.ui.rightActionBar.push(o.map((r,a)=>{const l=new _a(`id-${a}`,"",r.iconClass||I7(r.iconPath),!0,()=>pY(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(r)}));return l.tooltip=r.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,Mg(this.ui.message,...Em(i))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?b("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Pn.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}gR.noPromptMessage=b("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class wS extends gR{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new J),this.onWillAcceptEmitter=this._register(new J),this.onDidAcceptEmitter=this._register(new J),this.onDidCustomEmitter=this._register(new J),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?Vc.NONE:Vc.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new J),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new J),this.onDidTriggerItemButtonEmitter=this._register(new J),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?G2e:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(cs.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(cs.Next),this.canSelectMany&&this.ui.list.domFocus(),qi.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(cs.Previous):this.ui.list.focus(cs.Last),this.canSelectMany&&this.ui.list.domFocus(),qi.stop(e,!0);break;case 12:this.ui.list.focus(cs.NextPage),this.canSelectMany&&this.ui.list.domFocus(),qi.stop(e,!0);break;case 11:this.ui.list.focus(cs.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),qi.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(cs.First),qi.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(cs.Last),qi.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&$a(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&$a(e,this._selectedItems,(i,n)=>i===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||this.selectedItemsToConfirm!==this._selectedItems&&$a(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return Le(this.ui.container,it.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new kn(e),i=t.keyCode;this._quickNavigate.keybindings.some(r=>{const[a,l]=r.getParts();return l?!1:a.shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&i===6||a.ctrlKey&&i===5||a.metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const i={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let n=this.ariaLabel;if(n||(n=this.placeholder||wS.DEFAULT_ARIA_LABEL,this.title&&(n+=` - ${this.title}`)),this.ui.inputBox.ariaLabel!==n&&(this.ui.inputBox.ariaLabel=n),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case Vc.NONE:this._itemActivation=Vc.FIRST;break;case Vc.SECOND:this.ui.list.focus(cs.Second),this._itemActivation=Vc.FIRST;break;case Vc.LAST:this.ui.list.focus(cs.Last),this._itemActivation=Vc.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(cs.First)),this.keepScrollPosition&&(this.scrollTop=e)}}wS.DEFAULT_ARIA_LABEL=b("quickInputBox.ariaLabel","Type to narrow down results.");class pR extends ge{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new J),this.onDidCustomEmitter=this._register(new J),this.onDidTriggerButtonEmitter=this._register(new J),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new J),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new J),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(Le(window,it.KEY_DOWN,e,!0)),this._register(Le(window,it.KEY_UP,e,!0)),this._register(Le(window,it.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=Se(this.parentElement,Na(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=Il(e),i=Se(e,Na(".quick-input-titlebar")),n=this._register(new Cd(i));n.domNode.classList.add("quick-input-left-action-bar");const o=Se(i,Na(".quick-input-title")),r=this._register(new Cd(i));r.domNode.classList.add("quick-input-right-action-bar");const a=Se(e,Na(".quick-input-description")),l=Se(e,Na(".quick-input-header")),c=Se(l,Na("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",b("quickInput.checkAll","Toggle all checkboxes")),this._register(Ps(c,it.CHANGE,z=>{const q=c.checked;I.setAllVisibleChecked(q)})),this._register(Le(c,it.CLICK,z=>{(z.x||z.y)&&m.setFocus()}));const d=Se(l,Na(".quick-input-description")),f=Se(l,Na(".quick-input-and-message")),g=Se(f,Na(".quick-input-filter")),m=this._register(new nAe(g));m.setAttribute("aria-describedby",`${this.idPrefix}message`);const _=Se(g,Na(".quick-input-visible-count"));_.setAttribute("aria-live","polite"),_.setAttribute("aria-atomic","true");const C=new T7(_,{countFormat:b({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),S=Se(g,Na(".quick-input-count"));S.setAttribute("aria-live","polite");const x=new T7(S,{countFormat:b({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),L=Se(l,Na(".quick-input-action")),k=new cY(L);k.label=b("ok","OK"),this._register(k.onDidClick(z=>{this.onDidAcceptEmitter.fire()}));const T=Se(l,Na(".quick-input-action")),A=new cY(T);A.label=b("custom","Custom"),this._register(A.onDidClick(z=>{this.onDidCustomEmitter.fire()}));const O=Se(f,Na(`#${this.idPrefix}message.quick-input-message`)),I=this._register(new z6(e,this.idPrefix+"list",this.options));this._register(I.onChangedAllVisibleChecked(z=>{c.checked=z})),this._register(I.onChangedVisibleCount(z=>{C.setCount(z)})),this._register(I.onChangedCheckedCount(z=>{x.setCount(z)})),this._register(I.onLeave(()=>{setTimeout(()=>{m.setFocus(),this.controller instanceof wS&&this.controller.canSelectMany&&I.clearFocus()},0)})),this._register(I.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const R=new fR(e);R.getContainer().classList.add("quick-input-progress");const B=zm(e);return this._register(B),this._register(Le(e,it.FOCUS,z=>{this.previousFocusElement=z.relatedTarget instanceof HTMLElement?z.relatedTarget:void 0},!0)),this._register(B.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(CS.Blur),this.previousFocusElement=void 0})),this._register(Le(e,it.FOCUS,z=>{m.setFocus()})),this._register(Le(e,it.KEY_DOWN,z=>{const q=new kn(z);switch(q.keyCode){case 3:qi.stop(z,!0),this.onDidAcceptEmitter.fire();break;case 9:qi.stop(z,!0),this.hide(CS.Gesture);break;case 2:if(!q.altKey&&!q.ctrlKey&&!q.metaKey){const te=[".action-label.codicon"];e.classList.contains("show-checkboxes")?te.push("input"):te.push("input[type=text]"),this.getUI().list.isDisplayed()&&te.push(".monaco-list");const U=e.querySelectorAll(te.join(", "));q.shiftKey&&q.target===U[0]?(qi.stop(z,!0),U[U.length-1].focus()):!q.shiftKey&&q.target===U[U.length-1]&&(qi.stop(z,!0),U[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:n,titleBar:i,title:o,description1:a,description2:d,rightActionBar:r,checkAll:c,filterContainer:g,inputBox:m,visibleCountContainer:_,visibleCount:C,countContainer:S,count:x,okContainer:L,ok:k,message:O,customButtonContainer:T,customButton:A,list:I,progressBar:R,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:z=>this.show(z),hide:()=>this.hide(),setVisibilities:z=>this.setVisibilities(z),setComboboxAccessibility:z=>this.setComboboxAccessibility(z),setEnabled:z=>this.setEnabled(z),setContextKey:z=>this.options.setContextKey(z)},this.updateStyles(),this.ui}pick(e,t={},i=ri.None){return new Promise((n,o)=>{let r=d=>{var f;r=n,(f=t.onKeyMods)===null||f===void 0||f.call(t,a.keyMods),n(d)};if(i.isCancellationRequested){r(void 0);return}const a=this.createQuickPick();let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)r(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(r(d),a.hide())}}),a.onDidChangeActive(d=>{const f=d[0];f&&t.onDidFocus&&t.onDidFocus(f)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const f=d[0];f&&(r(f),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},d),{removeItem:()=>{const f=a.items.indexOf(d.item);if(f!==-1){const g=a.items.slice(),m=g.splice(f,1),_=a.activeItems.filter(S=>S!==m[0]),C=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=g,_&&(a.activeItems=_),a.keepScrollPosition=C}}}))),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{Ni(c),r(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,f])=>{l=f,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(g=>g.type!=="separator"&&g.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{o(d),a.hide()})})}createQuickPick(){const e=this.getUI();return new wS(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const i=this.controller;this.controller=e,i&&i.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Pn.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Mg(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const n=this.options.backKeybindingLabel();R7.tooltip=n?b("quickInput.backWithKeybinding","Back ({0})",n):b("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const i=this.controller;if(i){const n=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!n){let o=this.previousFocusElement;for(;o&&!o.offsetParent;)o=zr(o.parentElement);o!=null&&o.offsetParent?(o.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}i.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,pR.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,contrastBorder:n,widgetShadow:o}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=i?i.toString():"",this.ui.container.style.border=n?`1px solid ${n}`:"",this.ui.container.style.boxShadow=o?`0 0 8px 2px ${o}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const r=[];this.styles.list.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const a=r.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}pR.MAX_WIDTH=600;class mAe{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(n=>n.splice(e,t,i))}}class qv extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function mY(s,e){const t=[];for(const i of e){if(s.start>=i.range.end)continue;if(s.end<i.range.start)break;const n=No.intersect(s,i.range);No.isEmpty(n)||t.push({range:n,size:i.size})}return t}function A7({start:s,end:e},t){return{start:s+t,end:e+t}}function _Ae(s){const e=[];let t=null;for(const i of s){const n=i.range.start,o=i.range.end,r=i.size;if(t&&r===t.size){t.range.end=o;continue}t={range:{start:n,end:o},size:r},e.push(t)}return e}function vAe(...s){return _Ae(s.reduce((e,t)=>e.concat(t),[]))}class _Y{constructor(){this.groups=[],this._size=0}splice(e,t,i=[]){const n=i.length-t,o=mY({start:0,end:e},this.groups),r=mY({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:A7(l.range,n),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=vAe(o,a,r),this._size=this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,i=0;for(const n of this.groups){const o=n.range.end-n.range.start,r=i+o*n.size;if(e<r)return t+Math.floor((e-i)/n.size);t+=o,i=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const n of this.groups){const o=n.range.end-n.range.start,r=i+o;if(e<r)return t+(e-i)*n.size;t+=o*n.size,i=r}return-1}}function bAe(s){var e;try{(e=s.parentElement)===null||e===void 0||e.removeChild(s)}catch{}}class CAe{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const i=Pe(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(i);t={domNode:i,templateId:e,templateData:o}}return t}release(e){!e||this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(t.classList.remove("scrolling"),bAe(t)),this.getTemplateCache(i).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var np=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o};const Fu={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(s){return[s]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class LL{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class wAe{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class yAe{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function SAe(s,e){return Array.isArray(s)&&Array.isArray(e)?$a(s,e):s===e}class LAe{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,n)=>n,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class pc{constructor(e,t,i,n=Fu){var o,r,a,l,c,d,f,g,m,_;if(this.virtualDelegate=t,this.domId=`list_id_${++pc.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new _d(50),this.splicing=!1,this.dragOverAnimationStopDisposable=ge.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=ge.None,this.onDragLeaveTimeout=ge.None,this.disposables=new Ae,this._onDidChangeContentHeight=new J,this._horizontalScrolling=!1,n.horizontalScrolling&&n.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new _Y;for(const S of i)this.renderers.set(S.templateId,S);this.cache=this.disposables.add(new CAe(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof n.mouseSupport=="boolean"?n.mouseSupport:!0),this._horizontalScrolling=(o=n.horizontalScrolling)!==null&&o!==void 0?o:Fu.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof n.additionalScrollHeight>"u"?0:n.additionalScrollHeight,this.accessibilityProvider=new LAe(n.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((r=n.transformOptimization)!==null&&r!==void 0?r:Fu.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(Zi.addTarget(this.rowsContainer)),this.scrollable=new _L({forceIntegerValues:!0,smoothScrollDuration:(a=n.smoothScrolling)!==null&&a!==void 0&&a?125:0,scheduleAtNextAnimationFrame:S=>cu(S)}),this.scrollableElement=this.disposables.add(new QB(this.rowsContainer,{alwaysConsumeMouseWheel:(l=n.alwaysConsumeMouseWheel)!==null&&l!==void 0?l:Fu.alwaysConsumeMouseWheel,horizontal:1,vertical:(c=n.verticalScrollMode)!==null&&c!==void 0?c:Fu.verticalScrollMode,useShadows:(d=n.useShadows)!==null&&d!==void 0?d:Fu.useShadows,mouseWheelScrollSensitivity:n.mouseWheelScrollSensitivity,fastScrollSensitivity:n.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(Le(this.rowsContainer,vn.Change,S=>this.onTouchChange(S))),this.disposables.add(Le(this.scrollableElement.getDomNode(),"scroll",S=>S.target.scrollTop=0)),this.disposables.add(Le(this.domNode,"dragover",S=>this.onDragOver(this.toDragEvent(S)))),this.disposables.add(Le(this.domNode,"drop",S=>this.onDrop(this.toDragEvent(S)))),this.disposables.add(Le(this.domNode,"dragleave",S=>this.onDragLeave(this.toDragEvent(S)))),this.disposables.add(Le(this.domNode,"dragend",S=>this.onDragEnd(S))),this.setRowLineHeight=(f=n.setRowLineHeight)!==null&&f!==void 0?f:Fu.setRowLineHeight,this.setRowHeight=(g=n.setRowHeight)!==null&&g!==void 0?g:Fu.setRowHeight,this.supportDynamicHeights=(m=n.supportDynamicHeights)!==null&&m!==void 0?m:Fu.supportDynamicHeights,this.dnd=(_=n.dnd)!==null&&_!==void 0?_:Fu.dnd,this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:u4(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},r=No.intersect(n,o),a=new Map;for(let O=r.end-1;O>=r.start;O--){const I=this.items[O];if(I.dragStartDisposable.dispose(),I.checkedDisposable.dispose(),I.row){let R=a.get(I.templateId);R||(R=[],a.set(I.templateId,R));const B=this.renderers.get(I.templateId);B&&B.disposeElement&&B.disposeElement(I.element,O,I.row.templateData,I.size),R.push(I.row)}I.row=null}const l={start:e+t,end:this.items.length},c=No.intersect(l,n),d=No.relativeComplement(l,n),f=i.map(O=>({id:String(this.itemId++),element:O,templateId:this.virtualDelegate.getTemplateId(O),size:this.virtualDelegate.getHeight(O),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(O),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:ge.None,checkedDisposable:ge.None}));let g;e===0&&t>=this.items.length?(this.rangeMap=new _Y,this.rangeMap.splice(0,0,f),g=this.items,this.items=f):(this.rangeMap.splice(e,t,f),g=this.items.splice(e,t,...f));const m=i.length-t,_=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),C=A7(c,m),S=No.intersect(_,C);for(let O=S.start;O<S.end;O++)this.updateItemInDOM(this.items[O],O);const x=No.relativeComplement(C,_);for(const O of x)for(let I=O.start;I<O.end;I++)this.removeItemFromDOM(I);const L=d.map(O=>A7(O,m)),T=[{start:e,end:e+i.length},...L].map(O=>No.intersect(_,O)),A=this.getNextToLastElement(T);for(const O of T)for(let I=O.start;I<O.end;I++){const R=this.items[I],B=a.get(R.templateId),z=B==null?void 0:B.pop();this.insertItemInDOM(I,A,z)}for(const O of a.values())for(const I of O)this.cache.release(I);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),g.map(O=>O.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=cu(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(!!this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:typeof e=="number"?e:fLe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:u4(this.domNode)})}render(e,t,i,n,o,r=!1){const a=this.getRenderRange(t,i),l=No.relativeComplement(a,e),c=No.relativeComplement(e,a),d=this.getNextToLastElement(l);if(r){const f=No.intersect(e,a);for(let g=f.start;g<f.end;g++)this.updateItemInDOM(this.items[g],g)}for(const f of l)for(let g=f.start;g<f.end;g++)this.insertItemInDOM(g,d);for(const f of c)for(let g=f.start;g<f.end;g++)this.removeItemFromDOM(g);n!==void 0&&(this.rowsContainer.style.left=`-${n}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t,i){const n=this.items[e];n.row||(n.row=i!=null?i:this.cache.alloc(n.templateId));const o=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",o);const r=this.accessibilityProvider.isChecked(n.element);if(typeof r=="boolean")n.row.domNode.setAttribute("aria-checked",String(!!r));else if(r){const c=d=>n.row.domNode.setAttribute("aria-checked",String(!!d));c(r.value),n.checkedDisposable=r.onDidChange(c)}n.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(n.row.domNode,t):this.rowsContainer.appendChild(n.row.domNode)),this.updateItemInDOM(n,e);const a=this.renderers.get(n.templateId);if(!a)throw new Error(`No renderer found for template id ${n.templateId}`);a==null||a.renderElement(n.element,e,n.row.templateData,n.size);const l=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!l,l&&(n.dragStartDisposable=Le(n.row.domNode,"dragstart",c=>this.onDragStart(n.element,l,c))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=Ka?"-moz-fit-content":"fit-content",e.width=u4(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return gt.map(this.disposables.add(new an(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return gt.map(this.disposables.add(new an(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return gt.filter(gt.map(this.disposables.add(new an(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return gt.map(this.disposables.add(new an(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return gt.map(this.disposables.add(new an(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return gt.any(gt.map(this.disposables.add(new an(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),gt.map(this.disposables.add(new an(this.domNode,vn.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return gt.map(this.disposables.add(new an(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return gt.map(this.disposables.add(new an(this.rowsContainer,vn.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){var n,o;if(!i.dataTransfer)return;const r=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(CL.TEXT,t),i.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(r,i)),typeof a>"u"&&(a=String(r.length));const l=Pe(".monaco-drag-image");l.textContent=a,document.body.appendChild(l),i.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>document.body.removeChild(l),0)}this.currentDragData=new LL(r),$p.CurrentDragAndDropData=new wAe(r),(o=(n=this.dnd).onDragStart)===null||o===void 0||o.call(n,this.currentDragData,i)}onDragOver(e){var t;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),$p.CurrentDragAndDropData&&$p.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if($p.CurrentDragAndDropData)this.currentDragData=$p.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new yAe}const i=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof i=="boolean"?i:i.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof i!="boolean"&&i.effect===0?"copy":"move";let n;if(typeof i!="boolean"&&i.feedback?n=i.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=Kh(n).filter(o=>o>=-1&&o<this.length).sort((o,r)=>o-r),n=n[0]===-1?[-1]:n,SAe(this.currentDragFeedback,n))return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=ni(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const o of n){const r=this.items[o];r.dropTarget=!0,(t=r.row)===null||t===void 0||t.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=ni(()=>{var o;for(const r of n){const a=this.items[r];a.dropTarget=!1,(o=a.row)===null||o===void 0||o.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Vm(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((i=(t=this.dnd).onDragLeave)===null||i===void 0||i.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,$p.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){var t,i;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,$p.CurrentDragAndDropData=void 0,(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=ge.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=$J(this.domNode).top;this.dragOverAnimationDisposable=CLe(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Vm(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;i instanceof HTMLElement&&i!==this.rowsContainer&&t.contains(i);){const n=i.getAttribute("data-index");if(n){const o=Number(n);if(!isNaN(o))return o}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const n=this.getRenderRange(e,t);let o,r;e===this.elementTop(n.start)?(o=n.start,r=0):n.end-n.start>1&&(o=n.start+1,r=this.elementTop(o)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let d=l.start;d<l.end;d++){const f=this.probeDynamicHeight(d);f!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=f,c=c||f!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const d=No.relativeComplement(n,l);for(const g of d)for(let m=g.start;m<g.end;m++)this.items[m].row&&this.removeItemFromDOM(m);const f=No.relativeComplement(l,n);for(const g of f)for(let m=g.start;m<g.end;m++){const _=m+1,C=_<this.items.length?this.items[_].row:null,S=C?C.domNode:null;this.insertItemInDOM(m,S)}for(let g=l.start;g<l.end;g++)this.items[g].row&&this.updateItemInDOM(this.items[g],g);if(typeof o=="number"){const g=this.scrollable.getFutureScrollPosition().scrollTop-e,m=this.elementTop(o)-r+g;this.setScrollTop(m,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var t,i,n;const o=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(o.element);if(c!==null){const d=o.size;return o.size=c,o.lastDynamicHeightWidth=this.renderWidth,c-d}}if(!o.hasDynamicHeight||o.lastDynamicHeightWidth===this.renderWidth||!!this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(o.element))return 0;const r=o.size;if(!this.setRowHeight&&o.row){const c=o.row.domNode.offsetHeight;return o.size=c,o.lastDynamicHeightWidth=this.renderWidth,c-r}const a=this.cache.alloc(o.templateId);a.domNode.style.height="",this.rowsContainer.appendChild(a.domNode);const l=this.renderers.get(o.templateId);return l&&(l.renderElement(o.element,e,a.templateData,void 0),(t=l.disposeElement)===null||t===void 0||t.call(l,o.element,e,a.templateData,void 0)),o.size=a.domNode.offsetHeight,(n=(i=this.virtualDelegate).setDynamicHeight)===null||n===void 0||n.call(i,o.element,o.size),o.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(a.domNode),this.cache.release(a),o.size-r}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const i=this.items[t.end];return!i||!i.row?null:i.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e;if(this.items){for(const t of this.items)if(t.row){const i=this.renderers.get(t.row.templateId);i&&((e=i.disposeElement)===null||e===void 0||e.call(i,t.element,-1,t.row.templateData,void 0),i.disposeTemplate(t.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),Ni(this.disposables)}}pc.InstanceCount=0;np([Ss],pc.prototype,"onMouseClick",null);np([Ss],pc.prototype,"onMouseDblClick",null);np([Ss],pc.prototype,"onMouseMiddleClick",null);np([Ss],pc.prototype,"onMouseDown",null);np([Ss],pc.prototype,"onMouseOver",null);np([Ss],pc.prototype,"onContextMenu",null);np([Ss],pc.prototype,"onTouchStart",null);np([Ss],pc.prototype,"onTap",null);var I_=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},vY=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class xAe{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const n=this.renderedElements.findIndex(o=>o.templateData===i);if(n>=0){const o=this.renderedElements[n];this.trait.unrender(i),o.index=t}else{const o={index:t,templateData:i};this.renderedElements.push(o)}this.trait.renderIndex(t,i)}splice(e,t,i){const n=[];for(const o of this.renderedElements)o.index<e?n.push(o):o.index>=e+t&&n.push({index:o.index+i-t,templateData:o.templateData});this.renderedElements=n}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}class NI{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new J,this.onChange=this._onChange.event}get name(){return this._trait}get renderer(){return new xAe(this)}splice(e,t,i){var n;t=Math.max(0,Math.min(t,this.length-e));const o=i.length-t,r=e+t,a=[...this.sortedIndexes.filter(c=>c<e),...i.map((c,d)=>c?d+e:-1).filter(c=>c!==-1),...this.sortedIndexes.filter(c=>c>=r).map(c=>c+o)],l=this.length+o;if(this.sortedIndexes.length>0&&a.length===0&&l>0){const c=(n=this.sortedIndexes.find(d=>d>=e))!==null&&n!==void 0?n:l-1;a.push(Math.min(c,l-1))}this.renderer.splice(e,t,i.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(CY),t)}_set(e,t,i){const n=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=M7(o,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:i}),n}get(){return this.indexes}contains(e){return U8(this.sortedIndexes,e,CY)>=0}dispose(){Ni(this._onChange)}}I_([Ss],NI.prototype,"renderer",null);class DAe extends NI{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class X4{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,i.map(()=>!1));const n=this.trait.get().map(r=>this.identityProvider.getId(this.view.element(r)).toString()),o=i.map(r=>n.indexOf(this.identityProvider.getId(r).toString())>-1);this.trait.splice(e,t,o)}}function Xm(s){return s.tagName==="INPUT"||s.tagName==="TEXTAREA"}function Rb(s){return s.classList.contains("monaco-editor")?!0:s.classList.contains("monaco-list")||!s.parentElement?!1:Rb(s.parentElement)}function die(s){return s.tagName==="A"&&s.classList.contains("monaco-button")||s.tagName==="DIV"&&s.classList.contains("monaco-button-dropdown")?!0:s.classList.contains("monaco-list")||!s.parentElement?!1:die(s.parentElement)}class hie{constructor(e,t,i){this.list=e,this.view=t,this.disposables=new Ae,this.multipleSelectionDisposables=new Ae,this.onKeyDown.filter(n=>n.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===9).on(this.onEscape,this,this.disposables),i.multipleSelectionSupport!==!1&&this.onKeyDown.filter(n=>(mi?n.metaKey:n.ctrlKey)&&n.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return this.disposables.add(gt.chain(this.disposables.add(new an(this.view.domNode,"keydown")).event).filter(e=>!Xm(e.target)).map(e=>new kn(e)))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(mi?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(mr(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}I_([Ss],hie.prototype,"onKeyDown",null);var Lg;(function(s){s[s.Automatic=0]="Automatic",s[s.Trigger=1]="Trigger"})(Lg||(Lg={}));var Ab;(function(s){s[s.Idle=0]="Idle",s[s.Typing=1]="Typing"})(Ab||(Ab={}));const kAe=new class{mightProducePrintableCharacter(s){return s.ctrlKey||s.metaKey||s.altKey?!1:s.keyCode>=31&&s.keyCode<=56||s.keyCode>=21&&s.keyCode<=30||s.keyCode>=93&&s.keyCode<=102||s.keyCode>=80&&s.keyCode<=90}};class EAe{constructor(e,t,i,n,o){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=n,this.delegate=o,this.enabled=!1,this.state=Ab.Idle,this.mode=Lg.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Ae,this.disposables=new Ae,this.updateOptions(e.options)}updateOptions(e){var t,i;!((t=e.typeNavigationEnabled)!==null&&t!==void 0)||t?this.enable():this.disable(),this.mode=(i=e.typeNavigationMode)!==null&&i!==void 0?i:Lg.Automatic}enable(){if(this.enabled)return;let e=!1;const t=this.enabledDisposables.add(gt.chain(this.enabledDisposables.add(new an(this.view.domNode,"keydown")).event)).filter(o=>!Xm(o.target)).filter(()=>this.mode===Lg.Automatic||this.triggered).map(o=>new kn(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(t7).map(o=>o.browserEvent.key).event,i=gt.debounce(t,()=>null,800,void 0,void 0,this.enabledDisposables);gt.reduce(gt.any(t,i),(o,r)=>r===null?null:(o||"")+r,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){!this.enabled||(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const i=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));i&&go(i)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=Ab.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,n=this.state===Ab.Idle?1:0;this.state=Ab.Typing;for(let o=0;o<this.list.length;o++){const r=(i+o+n)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),l=a&&a.toString();if(typeof l>"u"||rR(e,l)){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class TAe{constructor(e,t){this.list=e,this.view=t,this.disposables=new Ae,this.disposables.add(gt.chain(this.disposables.add(new an(t.domNode,"keydown")).event)).filter(n=>!Xm(n.target)).map(n=>new kn(n)).filter(n=>n.keyCode===2&&!n.ctrlKey&&!n.metaKey&&!n.shiftKey&&!n.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const n=i.querySelector("[tabIndex]");if(!n||!(n instanceof HTMLElement)||n.tabIndex===-1)return;const o=window.getComputedStyle(n);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),n.focus())}dispose(){this.disposables.dispose()}}function fie(s){return mi?s.browserEvent.metaKey:s.browserEvent.ctrlKey}function gie(s){return s.browserEvent.shiftKey}function IAe(s){return s instanceof MouseEvent&&s.button===2}const bY={isSelectionSingleChangeEvent:fie,isSelectionRangeChangeEvent:gie};class pie{constructor(e){this.list=e,this.disposables=new Ae,this._onPointer=new J,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||bY),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Zi.addTarget(e.getHTMLElement()))),gt.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||bY))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Rb(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Rb(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Xm(e.browserEvent.target)||Rb(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),IAe(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Xm(e.browserEvent.target)||Rb(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof i>"u"){const d=this.list.getFocus()[0];i=d!=null?d:t,this.list.setAnchor(i)}const n=Math.min(i,t),o=Math.max(i,t),r=mr(n,o+1),a=this.list.getSelection(),l=AAe(M7(a,[i]),i);if(l.length===0)return;const c=M7(r,MAe(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const n=this.list.getSelection(),o=n.filter(r=>r!==t);this.list.setFocus([t]),this.list.setAnchor(t),n.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}}class mie{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&(e.listBackground.isOpaque()?i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):mi||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionOutline&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { outline-color: ${e.listFocusAndSelectionOutline} !important; }`),e.listFocusAndSelectionBackground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&i.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.tableColumnsBorder&&i.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),e.tableOddRowsBackgroundColor&&i.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=i.join(`
`)}}const NAe={listFocusBackground:oe.fromHex("#7FB0D0"),listActiveSelectionBackground:oe.fromHex("#0E639C"),listActiveSelectionForeground:oe.fromHex("#FFFFFF"),listActiveSelectionIconForeground:oe.fromHex("#FFFFFF"),listFocusAndSelectionOutline:oe.fromHex("#90C2F9"),listFocusAndSelectionBackground:oe.fromHex("#094771"),listFocusAndSelectionForeground:oe.fromHex("#FFFFFF"),listInactiveSelectionBackground:oe.fromHex("#3F3F46"),listInactiveSelectionIconForeground:oe.fromHex("#FFFFFF"),listHoverBackground:oe.fromHex("#2A2D2E"),listDropBackground:oe.fromHex("#383B3D"),treeIndentGuidesStroke:oe.fromHex("#a9a9a9"),tableColumnsBorder:oe.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:oe.fromHex("#cccccc").transparent(.04)},RAe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function AAe(s,e){const t=s.indexOf(e);if(t===-1)return[];const i=[];let n=t-1;for(;n>=0&&s[n]===e-(t-n);)i.push(s[n--]);for(i.reverse(),n=t;n<s.length&&s[n]===e+(n-t);)i.push(s[n++]);return i}function M7(s,e){const t=[];let i=0,n=0;for(;i<s.length||n<e.length;)if(i>=s.length)t.push(e[n++]);else if(n>=e.length)t.push(s[i++]);else if(s[i]===e[n]){t.push(s[i]),i++,n++;continue}else s[i]<e[n]?t.push(s[i++]):t.push(e[n++]);return t}function MAe(s,e){const t=[];let i=0,n=0;for(;i<s.length||n<e.length;)if(i>=s.length)t.push(e[n++]);else if(n>=e.length)t.push(s[i++]);else if(s[i]===e[n]){i++,n++;continue}else s[i]<e[n]?t.push(s[i++]):n++;return t}const CY=(s,e)=>s-e;class OAe{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,n){let o=0;for(const r of this.renderers)r.renderElement(e,t,i[o++],n)}disposeElement(e,t,i,n){var o;let r=0;for(const a of this.renderers)(o=a.disposeElement)===null||o===void 0||o.call(a,e,t,i[r],n),r+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class PAe{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,i){const n=this.accessibilityProvider.getAriaLabel(e);n?i.setAttribute("aria-label",n):i.removeAttribute("aria-label");const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?i.setAttribute("aria-level",`${o}`):i.removeAttribute("aria-level")}disposeTemplate(e){}}class FAe{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var i,n;(n=(i=this.dnd).onDragStart)===null||n===void 0||n.call(i,e,t)}onDragOver(e,t,i,n){return this.dnd.onDragOver(e,t,i,n)}onDragLeave(e,t,i,n){var o,r;(r=(o=this.dnd).onDragLeave)===null||r===void 0||r.call(o,e,t,i,n)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}drop(e,t,i,n){this.dnd.drop(e,t,i,n)}}class mu{constructor(e,t,i,n,o=RAe){var r,a,l,c;this.user=e,this._options=o,this.focus=new NI("focused"),this.anchor=new NI("anchor"),this.eventBufferer=new Y8,this._ariaLabel="",this.disposables=new Ae,this._onDidDispose=new J,this.onDidDispose=this._onDidDispose.event;const d=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(r=this._options.accessibilityProvider)===null||r===void 0?void 0:r.getWidgetRole():"list";this.selection=new DAe(d!=="listbox"),xd(o,NAe,!1);const f=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(f.push(new PAe(this.accessibilityProvider)),(l=(a=this.accessibilityProvider).onDidChangeActiveDescendant)===null||l===void 0||l.call(a,this.onDidChangeActiveDescendant,this,this.disposables)),n=n.map(m=>new OAe(m.templateId,[...f,m]));const g=Object.assign(Object.assign({},o),{dnd:o.dnd&&new FAe(this,o.dnd)});if(this.view=new pc(t,i,n,g),this.view.domNode.setAttribute("role",d),o.styleController)this.styleController=o.styleController(this.view.domId);else{const m=Il(this.view.domNode);this.styleController=new mie(m,this.view.domId)}if(this.spliceable=new mAe([new X4(this.focus,this.view,o.identityProvider),new X4(this.selection,this.view,o.identityProvider),new X4(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new TAe(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new hie(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){const m=o.keyboardNavigationDelegate||kAe;this.typeNavigationController=new EAe(this,this.view,o.keyboardNavigationLabelProvider,(c=o.keyboardNavigationEventFilter)!==null&&c!==void 0?c:()=>!0,m),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return gt.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return gt.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=this.disposables.add(gt.chain(this.disposables.add(new an(this.view.domNode,"keydown")).event)).map(o=>new kn(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(t7).filter(()=>!1).event,i=this.disposables.add(gt.chain(this.disposables.add(new an(this.view.domNode,"keyup")).event)).forEach(()=>e=!1).map(o=>new kn(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(t7).map(({browserEvent:o})=>{const r=this.getFocus(),a=r.length?r[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,c=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:c,browserEvent:o}}).event,n=this.disposables.add(gt.chain(this.view.onContextMenu)).filter(o=>!e).map(({element:o,index:r,browserEvent:a})=>({element:o,index:r,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return gt.any(t,i,n)}get onKeyDown(){return this.disposables.add(new an(this.view.domNode,"keydown")).event}get onDidFocus(){return gt.signal(this.disposables.add(new an(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new pie(this)}updateOptions(e={}){var t,i;this._options=Object.assign(Object.assign({},this._options),e),(t=this.typeNavigationController)===null||t===void 0||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(i=this.keyboardController)===null||i===void 0||i.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new qv(this.user,`Invalid start index: ${e}`);if(t<0)throw new qv(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new qv(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new qv(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return DX(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new qv(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,n){if(this.length===0)return;const o=this.focus.get(),r=this.findNextIndex(o.length>0?o[0]+e:0,t,n);r>-1&&this.setFocus([r],i)}focusPrevious(e=1,t=!1,i,n){if(this.length===0)return;const o=this.focus.get(),r=this.findPreviousIndex(o.length>0?o[0]-e:0,t,n);r>-1&&this.setFocus([r],i)}focusNextPage(e,t){return vY(this,void 0,void 0,function*(){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const n=this.getFocus()[0];if(n!==i&&(n===void 0||i>n)){const o=this.findPreviousIndex(i,!1,t);o>-1&&n!==o?this.setFocus([o],e):this.setFocus([i],e)}else{const o=this.view.getScrollTop();let r=o+this.view.renderHeight;i>n&&(r-=this.view.elementHeight(i)),this.view.setScrollTop(r),this.view.getScrollTop()!==o&&(this.setFocus([]),yield Ag(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return vY(this,void 0,void 0,function*(){let i;const n=this.view.getScrollTop();n===0?i=this.view.indexAt(n):i=this.view.indexAfter(n-1);const o=this.getFocus()[0];if(o!==i&&(o===void 0||o>=i)){const r=this.findNextIndex(i,!1,t);r>-1&&o!==r?this.setFocus([r],e):this.setFocus([i],e)}else{const r=n;this.view.setScrollTop(n-this.view.renderHeight),this.view.getScrollTop()!==r&&(this.setFocus([]),yield Ag(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const n=this.findNextIndex(e,!1,i);n>-1&&this.setFocus([n],t)}findNextIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new qv(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),n=this.view.elementTop(e),o=this.view.elementHeight(e);if(Ig(t)){const r=o-this.view.renderHeight;this.view.setScrollTop(r*ca(t,0,1)+n)}else{const r=n+o,a=i+this.view.renderHeight;n<i&&r>=a||(n<i||r>=a&&o>=this.view.renderHeight?this.view.setScrollTop(n):r>=a&&this.view.setScrollTop(r-this.view.renderHeight))}}getHTMLElement(){return this.view.domNode}getElementID(e){return this.view.getElementDomId(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let i;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}I_([Ss],mu.prototype,"onDidChangeFocus",null);I_([Ss],mu.prototype,"onDidChangeSelection",null);I_([Ss],mu.prototype,"onContextMenu",null);I_([Ss],mu.prototype,"onKeyDown",null);I_([Ss],mu.prototype,"onDidFocus",null);class BAe{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:ge.None}}renderElement(e,t,i,n){if(i.disposable&&i.disposable.dispose(),!i.data)return;const o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,i.data,n);const r=new _o,a=o.resolve(e,r.token);i.disposable={dispose:()=>r.cancel()},this.renderer.renderPlaceholder(e,i.data),a.then(l=>this.renderer.renderElement(l,e,i.data,n))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class VAe{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function WAe(s,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new VAe(s,e.accessibilityProvider)})}class HAe{constructor(e,t,i,n,o={}){const r=()=>this.model,a=n.map(l=>new BAe(l,r));this.list=new mu(e,t,i,a,WAe(r,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return gt.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return gt.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return gt.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(n=>this._model.get(n)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,mr(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const zAe={separatorBorder:oe.transparent};class _ie{constructor(e,t,i,n){this.container=e,this.view=t,this.disposable=n,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var i,n;e!==this.visible&&(e?(this.size=ca(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),(n=(i=this.view).setVisible)===null||n===void 0||n.call(i,e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class UAe extends _ie{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class $Ae extends _ie{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var mh;(function(s){s[s.Idle=0]="Idle",s[s.Busy=1]="Busy"})(mh||(mh={}));var RI;(function(s){s.Distribute={type:"distribute"};function e(i){return{type:"split",index:i}}s.Split=e;function t(i){return{type:"invisible",cachedVisibleSize:i}}s.Invisible=t})(RI||(RI={}));class vie extends ge{constructor(e,t={}){var i,n,o,r,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=mh.Idle,this._onDidSashChange=this._register(new J),this._onDidSashReset=this._register(new J),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(i=t.orientation)!==null&&i!==void 0?i:0,this.inverseAltBehavior=(n=t.inverseAltBehavior)!==null&&n!==void 0?n:!1,this.proportionalLayout=(o=t.proportionalLayout)!==null&&o!==void 0?o:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Se(this.el,Pe(".sash-container")),this.viewContainer=Pe(".split-view-container"),this.scrollable=new _L({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:cu}),this.scrollableElement=this._register(new QB(this.viewContainer,{vertical:this.orientation===0?(r=t.scrollbarVisibility)!==null&&r!==void 0?r:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(l=>{this.viewContainer.scrollTop=l.scrollTop,this.viewContainer.scrollLeft=l.scrollLeft})),Se(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||zAe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((l,c)=>{const d=fa(l.visible)||l.visible?l.size:{type:"invisible",cachedVisibleSize:l.size},f=l.view;this.doAddView(f,d,c,!0)}),this.contentSize=this.viewItems.reduce((l,c)=>l+c.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,n){this.doAddView(e,t,i,n)}layout(e,t){const i=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let n=0;n<this.viewItems.length;n++){const o=this.viewItems[n];o.size=ca(Math.round(this.proportions[n]*e),o.minimumSize,o.maximumSize)}else{const n=mr(this.viewItems.length),o=n.filter(a=>this.viewItems[a].priority===1),r=n.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,o,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const n=this.sashItems.findIndex(a=>a.sash===e),o=nu(Le(document.body,"keydown",a=>r(this.sashDragState.current,a.altKey)),Le(document.body,"keyup",()=>r(this.sashDragState.current,!1))),r=(a,l)=>{const c=this.viewItems.map(_=>_.size);let d=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(n===this.sashItems.length-1){const C=this.viewItems[n];d=(C.minimumSize-C.size)/2,f=(C.maximumSize-C.size)/2}else{const C=this.viewItems[n+1];d=(C.size-C.maximumSize)/2,f=(C.size-C.minimumSize)/2}let g,m;if(!l){const _=mr(n,-1),C=mr(n+1,this.viewItems.length),S=_.reduce((R,B)=>R+(this.viewItems[B].minimumSize-c[B]),0),x=_.reduce((R,B)=>R+(this.viewItems[B].viewMaximumSize-c[B]),0),L=C.length===0?Number.POSITIVE_INFINITY:C.reduce((R,B)=>R+(c[B]-this.viewItems[B].minimumSize),0),k=C.length===0?Number.NEGATIVE_INFINITY:C.reduce((R,B)=>R+(c[B]-this.viewItems[B].viewMaximumSize),0),T=Math.max(S,k),A=Math.min(L,x),O=this.findFirstSnapIndex(_),I=this.findFirstSnapIndex(C);if(typeof O=="number"){const R=this.viewItems[O],B=Math.floor(R.viewMinimumSize/2);g={index:O,limitDelta:R.visible?T-B:T+B,size:R.size}}if(typeof I=="number"){const R=this.viewItems[I],B=Math.floor(R.viewMinimumSize/2);m={index:I,limitDelta:R.visible?A+B:A-B,size:R.size}}}this.sashDragState={start:a,current:a,index:n,sizes:c,minDelta:d,maxDelta:f,alt:l,snapBefore:g,snapAfter:m,disposable:o}};r(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:n,alt:o,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const d=e-i,f=this.resize(t,d,n,void 0,void 0,r,a,l,c);if(o){const g=t===this.sashItems.length-1,m=this.viewItems.map(k=>k.size),_=g?t:t+1,C=this.viewItems[_],S=C.size-C.maximumSize,x=C.size-C.minimumSize,L=g?t-1:t+1;this.resize(L,-f,m,void 0,void 0,S,x)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=ca(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(this.state!==mh.Idle)throw new Error("Cant modify splitview");if(this.state=mh.Busy,e<0||e>=this.viewItems.length)return;const i=mr(this.viewItems.length).filter(a=>a!==e),n=[...i.filter(a=>this.viewItems[a].priority===1),e],o=i.filter(a=>this.viewItems[a].priority===2),r=this.viewItems[e];t=Math.round(t),t=ca(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(n,o),this.state=mh.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=ca(i,a.minimumSize,a.maximumSize);const n=mr(this.viewItems.length),o=n.filter(a=>this.viewItems[a].priority===1),r=n.filter(a=>this.viewItems[a].priority===2);this.relayout(o,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,n){if(this.state!==mh.Idle)throw new Error("Cant modify splitview");this.state=mh.Busy;const o=Pe(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(i));const r=e.onDidChange(g=>this.onViewChange(d,g)),a=ni(()=>this.viewContainer.removeChild(o)),l=nu(r,a);let c;typeof t=="number"?c=t:t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize;const d=this.orientation===0?new UAe(o,e,c,l):new $Ae(o,e,c,l);if(this.viewItems.splice(i,0,d),this.viewItems.length>1){const g={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},m=this.orientation===0?new Ro(this.sashContainer,{getHorizontalSashTop:R=>this.getSashPosition(R),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},g),{orientation:1})):new Ro(this.sashContainer,{getVerticalSashLeft:R=>this.getSashPosition(R),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},g),{orientation:0})),_=this.orientation===0?R=>({sash:m,start:R.startY,current:R.currentY,alt:R.altKey}):R=>({sash:m,start:R.startX,current:R.currentX,alt:R.altKey}),S=gt.map(m.onDidStart,_)(this.onSashStart,this),L=gt.map(m.onDidChange,_)(this.onSashChange,this),T=gt.map(m.onDidEnd,()=>this.sashItems.findIndex(R=>R.sash===m))(this.onSashEnd,this),A=m.onDidReset(()=>{const R=this.sashItems.findIndex(U=>U.sash===m),B=mr(R,-1),z=mr(R+1,this.viewItems.length),q=this.findFirstSnapIndex(B),te=this.findFirstSnapIndex(z);typeof q=="number"&&!this.viewItems[q].visible||typeof te=="number"&&!this.viewItems[te].visible||this._onDidSashReset.fire(R)}),O=nu(S,L,T,A,m),I={sash:m,disposable:O};this.sashItems.splice(i-1,0,I)}o.appendChild(e.element);let f;typeof t!="number"&&t.type==="split"&&(f=[t.index]),n||this.relayout([i],f),this.state=mh.Idle,!n&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const i=this.viewItems.reduce((n,o)=>n+o.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(d=>d.size),n,o,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const d=mr(e,-1),f=mr(e+1,this.viewItems.length);if(o)for(const I of o)HP(d,I),HP(f,I);if(n)for(const I of n)dk(d,I),dk(f,I);const g=d.map(I=>this.viewItems[I]),m=d.map(I=>i[I]),_=f.map(I=>this.viewItems[I]),C=f.map(I=>i[I]),S=d.reduce((I,R)=>I+(this.viewItems[R].minimumSize-i[R]),0),x=d.reduce((I,R)=>I+(this.viewItems[R].maximumSize-i[R]),0),L=f.length===0?Number.POSITIVE_INFINITY:f.reduce((I,R)=>I+(i[R]-this.viewItems[R].minimumSize),0),k=f.length===0?Number.NEGATIVE_INFINITY:f.reduce((I,R)=>I+(i[R]-this.viewItems[R].maximumSize),0),T=Math.max(S,k,r),A=Math.min(L,x,a);let O=!1;if(l){const I=this.viewItems[l.index],R=t>=l.limitDelta;O=R!==I.visible,I.setVisible(R,l.size)}if(!O&&c){const I=this.viewItems[c.index],R=t<c.limitDelta;O=R!==I.visible,I.setVisible(R,c.size)}if(O)return this.resize(e,t,i,n,o,r,a);t=ca(t,T,A);for(let I=0,R=t;I<g.length;I++){const B=g[I],z=ca(m[I]+R,B.minimumSize,B.maximumSize),q=z-m[I];R-=q,B.size=z}for(let I=0,R=t;I<_.length;I++){const B=_[I],z=ca(C[I]-R,B.minimumSize,B.maximumSize),q=z-C[I];R+=q,B.size=z}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const n=mr(this.viewItems.length-1,-1),o=n.filter(a=>this.viewItems[a].priority===1),r=n.filter(a=>this.viewItems[a].priority===2);for(const a of r)HP(n,a);for(const a of o)dk(n,a);typeof e=="number"&&dk(n,e);for(let a=0;i!==0&&a<n.length;a++){const l=this.viewItems[n[a]],c=ca(l.size+i,l.minimumSize,l.maximumSize),d=c-l.size;i-=d,l.size=c}}layoutViews(){this.contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),n=[...this.viewItems].reverse();e=!1;const o=n.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const r=n.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const f=!(t[l]&&r[l+1]),g=!(i[l]&&o[l+1]);if(f&&g){const m=mr(l,-1),_=mr(l+1,this.viewItems.length),C=this.findFirstSnapIndex(m),S=this.findFirstSnapIndex(_),x=typeof C=="number"&&!this.viewItems[C].visible,L=typeof S=="number"&&!this.viewItems[S].visible;x&&o[l]&&(a>0||this.startSnappingEnabled)?c.state=1:L&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else f&&!g?c.state=1:!f&&g?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(!!i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}dispose(){super.dispose(),Ni(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}class xL{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=xL.TemplateId,this.renderedTemplates=new Set;const n=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(const o of e){const r=n.get(o.templateId);if(!r)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(r)}}renderTemplate(e){const t=Se(e,Pe(".monaco-table-tr")),i=[],n=[];for(let r=0;r<this.columns.length;r++){const a=this.renderers[r],l=Se(t,Pe(".monaco-table-td",{"data-col-index":r}));l.style.width=`${this.getColumnSize(r)}px`,i.push(l),n.push(a.renderTemplate(l))}const o={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(o),o}renderElement(e,t,i,n){for(let o=0;o<this.columns.length;o++){const a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,i.cellTemplateData[o],n)}}disposeElement(e,t,i,n){for(let o=0;o<this.columns.length;o++){const r=this.renderers[o];if(r.disposeElement){const l=this.columns[o].project(e);r.disposeElement(l,t,i.cellTemplateData[o],n)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Ts(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}}xL.TemplateId="row";function jAe(s){return{getHeight(e){return s.getHeight(e)},getTemplateId(){return xL.TemplateId}}}class KAe{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new J,this.onDidLayout=this._onDidLayout.event,this.element=Pe(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:gt.None}layout(e){this._onDidLayout.fire([this.index,e])}}class mR{constructor(e,t,i,n,o,r){this.virtualDelegate=i,this.domId=`table_id_${++mR.InstanceCount}`,this.disposables=new Ae,this.cachedWidth=0,this.cachedHeight=0,this.domNode=Se(t,Pe(`.monaco-table.${this.domId}`));const a=n.map((d,f)=>new KAe(d,f)),l={size:a.reduce((d,f)=>d+f.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new vie(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new xL(n,o,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new mu(e,this.domNode,jAe(i),[c],r)),gt.any(...a.map(d=>d.onDidLayout))(([d,f])=>c.layoutColumn(d,f),null,this.disposables),this.splitview.onDidSashReset(d=>{const f=n.reduce((m,_)=>m+_.weight,0),g=n[d].weight/f*this.cachedWidth;this.splitview.resizeView(d,g)},null,this.disposables),this.styleElement=Il(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}mR.InstanceCount=0;const qAe={inputActiveOptionBorder:oe.fromHex("#007ACC00"),inputActiveOptionForeground:oe.fromHex("#FFFFFF"),inputActiveOptionBackground:oe.fromHex("#0E639C50")};class DL extends gc{constructor(e){super(),this._onChange=this._register(new J),this.onChange=this._onChange.event,this._onKeyDown=this._register(new J),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},qAe),e),this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...yr.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,i=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),i.preventDefault())}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,i=>{if(i.keyCode===10||i.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),i.preventDefault(),i.stopPropagation();return}this._onKeyDown.fire(i)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const GAe=b("caseDescription","Match Case"),YAe=b("wordsDescription","Match Whole Word"),ZAe=b("regexDescription","Use Regular Expression");class bie extends DL{constructor(e){super({icon:w.caseSensitive,title:GAe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Cie extends DL{constructor(e){super({icon:w.wholeWord,title:YAe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class wie extends DL{constructor(e){super({icon:w.regex,title:ZAe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}const QAe=b("defaultLabel","input");class XAe extends gc{constructor(e,t,i,n){var o;super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalToggles=[],this._onDidOptionChange=this._register(new J),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new J),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new J),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new J),this._onKeyUp=this._register(new J),this._onCaseSensitiveKeyDown=this._register(new J),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new J),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||QAe,this.inputActiveOptionBorder=n.inputActiveOptionBorder,this.inputActiveOptionForeground=n.inputActiveOptionForeground,this.inputActiveOptionBackground=n.inputActiveOptionBackground,this.inputBackground=n.inputBackground,this.inputForeground=n.inputForeground,this.inputBorder=n.inputBorder,this.inputValidationInfoBorder=n.inputValidationInfoBorder,this.inputValidationInfoBackground=n.inputValidationInfoBackground,this.inputValidationInfoForeground=n.inputValidationInfoForeground,this.inputValidationWarningBorder=n.inputValidationWarningBorder,this.inputValidationWarningBackground=n.inputValidationWarningBackground,this.inputValidationWarningForeground=n.inputValidationWarningForeground,this.inputValidationErrorBorder=n.inputValidationErrorBorder,this.inputValidationErrorBackground=n.inputValidationErrorBackground,this.inputValidationErrorForeground=n.inputValidationErrorForeground;const r=n.appendCaseSensitiveLabel||"",a=n.appendWholeWordsLabel||"",l=n.appendRegexLabel||"",c=n.history||[],d=!!n.flexibleHeight,f=!!n.flexibleWidth,g=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new cie(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:c,showHistoryHint:n.showHistoryHint,flexibleHeight:d,flexibleWidth:f,flexibleMaxHeight:g})),this.regex=this._register(new wie({appendTitle:l,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(_=>{this._onDidOptionChange.fire(_),!_&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(_=>{this._onRegexKeyDown.fire(_)})),this.wholeWords=this._register(new Cie({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(_=>{this._onDidOptionChange.fire(_),!_&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new bie({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(_=>{this._onDidOptionChange.fire(_),!_&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(_=>{this._onCaseSensitiveKeyDown.fire(_)}));const m=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,_=>{if(_.equals(15)||_.equals(17)||_.equals(9)){const C=m.indexOf(document.activeElement);if(C>=0){let S=-1;_.equals(17)?S=(C+1)%m.length:_.equals(15)&&(C===0?S=m.length-1:S=C-1),_.equals(9)?(m[C].blur(),this.inputBox.focus()):S>=0&&m[S].focus(),qi.stop(_,!0)}}}),this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this._showOptionButtons?"block":"none",this.controls.appendChild(this.caseSensitive.domNode),this.controls.appendChild(this.wholeWords.domNode),this.controls.appendChild(this.regex.domNode),this._showOptionButtons||(this.caseSensitive.domNode.style.display="none",this.wholeWords.domNode.style.display="none",this.regex.domNode.style.display="none");for(const _ of(o=n==null?void 0:n.additionalToggles)!==null&&o!==void 0?o:[])this._register(_),this.controls.appendChild(_.domNode),this._register(_.onChange(C=>{this._onDidOptionChange.fire(C),!C&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(_);this.additionalToggles.length>0&&(this.controls.style.display="block"),this.inputBox.paddingRight=(this._showOptionButtons?this.caseSensitive.width()+this.wholeWords.width()+this.regex.width():0)+this.additionalToggles.reduce((_,C)=>_+C.width(),0),this.domNode.appendChild(this.controls),e==null||e.appendChild(this.domNode),this._register(Le(this.inputBox.inputElement,"compositionstart",_=>{this.imeSessionInProgress=!0})),this._register(Le(this.inputBox.inputElement,"compositionend",_=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,_=>this._onKeyDown.fire(_)),this.onkeyup(this.inputBox.inputElement,_=>this._onKeyUp.fire(_)),this.oninput(this.inputBox.inputElement,_=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,_=>this._onMouseDown.fire(_))}get onDidChange(){return this.inputBox.onDidChange}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable();for(const e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable();for(const e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);for(const i of this.additionalToggles)i.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}var bm;(function(s){s[s.Unknown=0]="Unknown",s[s.Twistie=1]="Twistie",s[s.Element=2]="Element",s[s.Filter=3]="Filter"})(bm||(bm={}));class vl extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class U6{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function $6(s){return typeof s=="object"&&"visibility"in s&&"data"in s}function yS(s){switch(s){case!0:return 1;case!1:return 0;default:return s}}function J4(s){return typeof s.collapsible=="boolean"}class JAe{constructor(e,t,i,n={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new Y8,this._onDidChangeCollapseState=new J,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new J,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new J,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new _d(CJ),this.collapseByDefault=typeof n.collapseByDefault>"u"?!1:n.collapseByDefault,this.filter=n.filter,this.autoExpandSingleChildren=typeof n.autoExpandSingleChildren>"u"?!1:n.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=fi.empty(),n={}){if(e.length===0)throw new vl(this.user,"Invalid tree location");n.diffIdentityProvider?this.spliceSmart(n.diffIdentityProvider,e,t,i,n):this.spliceSimple(e,t,i,n)}spliceSmart(e,t,i,n,o,r){var a;n===void 0&&(n=fi.empty()),r===void 0&&(r=(a=o.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,i,n,o);const c=[...n],d=t[t.length-1],f=new Qu({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,d),...c,...l.children.slice(d+i)].map(S=>e.getId(S.element).toString())}).ComputeDiff(!1);if(f.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,i,c,o);const g=t.slice(0,-1),m=(S,x,L)=>{if(r>0)for(let k=0;k<L;k++)S--,x--,this.spliceSmart(e,[...g,S,0],Number.MAX_SAFE_INTEGER,c[x].children,o,r-1)};let _=Math.min(l.children.length,d+i),C=c.length;for(const S of f.changes.sort((x,L)=>L.originalStart-x.originalStart))m(_,C,_-(S.originalStart+S.originalLength)),_=S.originalStart,C=S.modifiedStart-d,this.spliceSimple([...g,_],S.originalLength,fi.slice(c,C,C+S.modifiedLength),o);m(_,C,_)}spliceSimple(e,t,i=fi.empty(),{onDidCreateNode:n,onDidDeleteNode:o,diffIdentityProvider:r}){const{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),f=[],g=fi.map(i,I=>this.createTreeNode(I,a,a.visible?1:0,c,f,n)),m=e[e.length-1],_=a.children.length>0;let C=0;for(let I=m;I>=0&&I<a.children.length;I--){const R=a.children[I];if(R.visible){C=R.visibleChildIndex;break}}const S=[];let x=0,L=0;for(const I of g)S.push(I),L+=I.renderNodeCount,I.visible&&(I.visibleChildIndex=C+x++);const k=dK(a.children,m,t,S);r?a.lastDiffIds?dK(a.lastDiffIds,m,t,S.map(I=>r.getId(I.element).toString())):a.lastDiffIds=a.children.map(I=>r.getId(I.element).toString()):a.lastDiffIds=void 0;let T=0;for(const I of k)I.visible&&T++;if(T!==0)for(let I=m+S.length;I<a.children.length;I++){const R=a.children[I];R.visible&&(R.visibleChildIndex-=T)}if(a.visibleChildrenCount+=x-T,c&&d){const I=k.reduce((R,B)=>R+(B.visible?B.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,L-I),this.list.splice(l,I,f)}if(k.length>0&&o){const I=R=>{o(R),R.children.forEach(I)};k.forEach(I)}this._onDidSplice.fire({insertedNodes:S,deletedNodes:k});const A=a.children.length>0;_!==A&&this.setCollapsible(e.slice(0,-1),A);let O=a;for(;O;){if(O.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}O=O.parent}}rerender(e){if(e.length===0)throw new vl(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:n}=this.getTreeNodeWithListIndex(e);t.visible&&n&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:n}=this.getTreeNodeWithListIndex(e);return i&&n?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsible);const n={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,n))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsed);const o={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){const{node:i,listIndex:n,revealed:o}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(i,n,o,t);if(i!==this.root&&this.autoExpandSingleChildren&&r&&!J4(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return r}_setListNodeCollapseState(e,t,i,n){const o=this._setNodeCollapseState(e,n,!1);if(!i||!e.visible||!o)return o;const r=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=r-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),o}_setNodeCollapseState(e,t,i){let n;if(e===this.root?n=!1:(J4(t)?(n=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(n=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):n=!1,n&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!J4(t)&&t.recursive)for(const o of e.children)n=this._setNodeCollapseState(o,t,!0)||n;return n}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,n,o,r){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,n&&o.push(a);const c=e.children||fi.empty(),d=n&&l!==0&&!a.collapsed,f=fi.map(c,_=>this.createTreeNode(_,a,l,d,o,r));let g=0,m=1;for(const _ of f)a.children.push(_),m+=_.renderNodeCount,_.visible&&(_.visibleChildIndex=g++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=g,a.visible=l===2?g>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=m):(a.renderNodeCount=0,n&&o.pop()),r==null||r(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,n=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,e.renderNodeCount=0,!1;n&&i.push(e)}const r=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,o,i,n&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=i.length-r):(e.renderNodeCount=0,n&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):$6(i)?(e.filterData=i.data,yS(i.visibility)):(e.filterData=void 0,yS(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...n]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(n,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...n]=e;if(i<0||i>t.children.length)throw new vl(this.user,"Invalid tree location");return this.getTreeNode(n,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:n,visible:o}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new vl(this.user,"Invalid tree location");const a=t.children[r];return{node:a,listIndex:i,revealed:n,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,n=!0,o=!0){const[r,...a]=e;if(r<0||r>t.children.length)throw new vl(this.user,"Invalid tree location");for(let l=0;l<r;l++)i+=t.children[l].renderNodeCount;return n=n&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:n,visible:o}:this.getParentNodeWithListIndex(a,t.children[r],i+1,n,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:uCe(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class eMe{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);!i||(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);!i||i.forEach(t)}}globalThis&&globalThis.__awaiter;class tMe extends LL{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function eF(s){return s instanceof LL?new tMe(s):s}class iMe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=ge.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,n;(n=(i=this.dnd).onDragStart)===null||n===void 0||n.call(i,eF(e),t)}onDragOver(e,t,i,n,o=!0){const r=this.dnd.onDragOver(eF(e),t&&t.element,i,n),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return r;if(a&&typeof r!="boolean"&&r.autoExpand&&(this.autoExpandDisposable=Vm(()=>{const g=this.modelProvider(),m=g.getNodeLocation(t);g.isCollapsed(m)&&g.setCollapsed(m,!1),this.autoExpandNode=void 0},500)),typeof r=="boolean"||!r.accept||typeof r.bubble>"u"||r.feedback){if(!o){const g=typeof r=="boolean"?r:r.accept,m=typeof r=="boolean"?void 0:r.effect;return{accept:g,effect:m,feedback:[i]}}return r}if(r.bubble===1){const g=this.modelProvider(),m=g.getNodeLocation(t),_=g.getParentNodeLocation(m),C=g.getNode(_),S=_&&g.getListIndex(_);return this.onDragOver(e,C,S,n,!1)}const l=this.modelProvider(),c=l.getNodeLocation(t),d=l.getListIndex(c),f=l.getListRenderCount(c);return Object.assign(Object.assign({},r),{feedback:mr(d,d+f)})}drop(e,t,i,n){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(eF(e),t&&t.element,i,n)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}}function nMe(s,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new iMe(s,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const i=s(),n=i.getNodeLocation(t),o=i.getParentNodeLocation(n);return i.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}})})}class j6{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,n;(n=(i=this.delegate).setDynamicHeight)===null||n===void 0||n.call(i,e.element,t)}}var SS;(function(s){s.None="none",s.OnHover="onHover",s.Always="always"})(SS||(SS={}));class sMe{constructor(e,t=[]){this._elements=t,this.disposables=new Ae,this.onDidChange=gt.forEach(e,i=>this._elements=i,this.disposables)}get elements(){return this._elements}dispose(){this.disposables.dispose()}}class LS{constructor(e,t,i,n,o={}){var r;this.renderer=e,this.modelProvider=t,this.activeNodes=n,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=LS.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new eMe,this.activeIndentNodes=new Set,this.indentGuidesDisposable=ge.None,this.disposables=new Ae,this.templateId=e.templateId,this.updateOptions(o),gt.map(i,a=>a.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(r=e.onDidChangeTwistieState)===null||r===void 0||r.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=ca(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==SS.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const i=new Ae;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Se(e,Pe(".monaco-tl-row")),i=Se(t,Pe(".monaco-tl-indent")),n=Se(t,Pe(".monaco-tl-twistie")),o=Se(t,Pe(".monaco-tl-contents")),r=this.renderer.renderTemplate(o);return{container:e,indent:i,twistie:n,indentGuidesDisposable:ge.None,templateData:r}}renderElement(e,t,i,n){typeof n=="number"&&(this.renderedNodes.set(e,{templateData:i,height:n}),this.renderedElements.set(e.element,e));const o=LS.DefaultIndent+(e.depth-1)*this.indent;i.twistie.style.paddingLeft=`${o}px`,i.indent.style.width=`${o+this.indent-16}px`,this.renderTwistie(e,i),typeof n=="number"&&this.renderIndentGuides(e,i),this.renderer.renderElement(e,t,i.templateData,n)}disposeElement(e,t,i,n){var o,r;i.indentGuidesDisposable.dispose(),(r=(o=this.renderer).disposeElement)===null||r===void 0||r.call(o,e,t,i.templateData,n),typeof n=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);!t||this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);!t||(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...w.treeItemExpanded.classNamesArray);let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...w.treeItemExpanded.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(Ts(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new Ae,n=this.modelProvider();let o=e;for(;;){const r=n.getNodeLocation(o),a=n.getParentNodeLocation(r);if(!a)break;const l=n.getNode(a),c=Pe(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&c.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(c):t.indent.insertBefore(c,t.indent.firstElementChild),this.renderedIndentGuides.add(l,c),i.add(ni(()=>this.renderedIndentGuides.delete(l,c))),o=l}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach(n=>{const o=i.getNodeLocation(n);try{const r=i.getParentNodeLocation(o);n.collapsible&&n.children.length>0&&!n.collapsed?t.add(n):r&&t.add(i.getNode(r))}catch{}}),this.activeIndentNodes.forEach(n=>{t.has(n)||this.renderedIndentGuides.forEach(n,o=>o.classList.remove("active"))}),t.forEach(n=>{this.activeIndentNodes.has(n)||this.renderedIndentGuides.forEach(n,o=>o.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Ni(this.disposables)}}LS.DefaultIndent=8;class oMe{constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Ae,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}filter(e,t){let i=1;if(this._filter){const r=this._filter.filter(e,t);if(typeof r=="boolean"?i=r?1:0:$6(r)?i=yS(r.visibility):i=r,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:ou.Default,visibility:i};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),o=Array.isArray(n)?n:[n];for(const r of o){const a=r&&r.toString();if(typeof a>"u")return{data:ou.Default,visibility:i};const l=E0(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,o.length===1?{data:l,visibility:i}:{data:{label:a,score:l},visibility:i}}return this.tree.findMode===ad.Filter?2:{data:ou.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){Ni(this.disposables)}}var ad;(function(s){s[s.Highlight=0]="Highlight",s[s.Filter=1]="Filter"})(ad||(ad={}));class rMe{constructor(e,t,i,n,o){var r;this.tree=e,this.view=i,this.filter=n,this.contextViewProvider=o,this._pattern="",this.width=0,this._onDidChangeMode=new J,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangePattern=new J,this._onDidChangeOpenState=new J,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Ae,this.disposables=new Ae,this._mode=(r=e.options.defaultFindMode)!==null&&r!==void 0?r:ad.Highlight,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var e,t;const i=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&i?(e=this.widget)===null||e===void 0||e.showMessage({type:2,content:b("not found","No elements found.")}):(t=this.widget)===null||t===void 0||t.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this._mode===ad.Filter||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!ou.isDefault(e.filterData)}style(e){var t;this.styles=e,(t=this.widget)===null||t===void 0||t.style(e)}layout(e){var t;this.width=e,(t=this.widget)===null||t===void 0||t.layout(e)}dispose(){this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function wY(s){let e=bm.Unknown;return d4(s.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=bm.Twistie:d4(s.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=bm.Element:d4(s.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=bm.Filter),{browserEvent:s.browserEvent,element:s.element?s.element.element:null,target:e}}function $E(s,e){e(s),s.children.forEach(t=>$E(t,e))}class tF{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new J,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){!(t!=null&&t.__forceEvent)&&$a(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const n=this;this._onDidChange.fire({get elements(){return n.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=d=>l.delete(d);t.forEach(d=>$E(d,c)),this.set([...l.values()]);return}const i=new Set,n=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>$E(l,n));const o=new Map,r=l=>o.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>$E(l,r));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const f=o.get(c);f&&a.push(f)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class aMe extends pie{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(die(e.browserEvent.target)||Xm(e.browserEvent.target)||Rb(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,n=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let o=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,o&&!n&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const r=this.tree.model,a=r.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),r.setCollapsed(a,void 0,l),o&&n)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class lMe extends mu{constructor(e,t,i,n,o,r,a,l){super(e,t,i,n,l),this.focusTrait=o,this.selectionTrait=r,this.anchorTrait=a}createMouseController(e){return new aMe(this,e.tree)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const n=[],o=[];let r;i.forEach((a,l)=>{this.focusTrait.has(a)&&n.push(e+l),this.selectionTrait.has(a)&&o.push(e+l),this.anchorTrait.has(a)&&(r=e+l)}),n.length>0&&super.setFocus(Kh([...super.getFocus(),...n])),o.length>0&&super.setSelection(Kh([...super.getSelection(),...o])),typeof r=="number"&&super.setAnchor(r)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(n=>this.element(n)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(n=>this.element(n)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class yie{constructor(e,t,i,n,o={}){var r;this._user=e,this._options=o,this.eventBufferer=new Y8,this.onDidChangeFindOpenState=gt.None,this.disposables=new Ae,this._onWillRefilter=new J,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new J;const a=new j6(i),l=new mK,c=new mK,d=this.disposables.add(new sMe(c.event));this.renderers=n.map(m=>new LS(m,()=>this.model,l.event,d,o));for(const m of this.renderers)this.disposables.add(m);let f;o.keyboardNavigationLabelProvider&&(f=new oMe(this,o.keyboardNavigationLabelProvider,o.filter),o=Object.assign(Object.assign({},o),{filter:f}),this.disposables.add(f)),this.focus=new tF(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new tF(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new tF(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new lMe(e,t,a,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},nMe(()=>this.model,o)),{tree:this})),this.model=this.createModel(e,this.view,o),l.input=this.model.onDidChangeCollapseState;const g=gt.forEach(this.model.onDidSplice,m=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(m),this.selection.onDidModelSplice(m)})},this.disposables);if(g(()=>null,null,this.disposables),c.input=gt.chain(gt.any(g,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const m=new Set;for(const _ of this.focus.getNodes())m.add(_);for(const _ of this.selection.getNodes())m.add(_);return[...m.values()]}).event,o.keyboardSupport!==!1){const m=gt.chain(this.view.onKeyDown).filter(_=>!Xm(_.target)).map(_=>new kn(_));m.filter(_=>_.keyCode===15).on(this.onLeftArrow,this,this.disposables),m.filter(_=>_.keyCode===17).on(this.onRightArrow,this,this.disposables),m.filter(_=>_.keyCode===10).on(this.onSpace,this,this.disposables)}((r=o.findWidgetEnabled)!==null&&r!==void 0?r:!0)&&o.keyboardNavigationLabelProvider&&o.contextViewProvider?(this.findController=new rMe(this,this.model,this.view,f,o.contextViewProvider),this.focusNavigationFilter=m=>this.findController.shouldAllowFocus(m),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode):this.onDidChangeFindMode=gt.None,this.styleElement=Il(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===SS.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return gt.filter(gt.map(this.view.onMouseDblClick,wY),e=>e.target!==bm.Filter)}get onPointer(){return gt.map(this.view.onPointer,wY)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return gt.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.mode)!==null&&t!==void 0?t:ad.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===SS.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){var i;this.view.layout(e,t),Ig(t)&&((i=this.findController)===null||i===void 0||i.layout(t))}style(e){var t;const i=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${i}:hover .monaco-tl-indent > .indent-guide, .monaco-list${i}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),n.push(`.monaco-list${i} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),(t=this.findController)===null||t===void 0||t.style(e),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const i=e.map(o=>this.model.getNode(o));this.selection.set(i,t);const n=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(n,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const i=e.map(o=>this.model.getNode(o));this.focus.set(i,t);const n=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(n,t,!0)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);i!==-1&&this.view.reveal(i,t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!0)){const r=this.model.getParentNodeLocation(n);if(!r)return;const a=this.model.getListIndex(r);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!1)){if(!i.children.some(l=>l.visible))return;const[r]=this.view.getFocus(),a=r+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i),o=e.browserEvent.altKey;this.model.setCollapsed(n,void 0,o)}dispose(){Ni(this.disposables),this.view.dispose()}}class K6{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new JAe(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(n,o){return i.sorter.compare(n.element,o.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=fi.empty(),i={}){const n=this.getElementLocation(e);this._setChildren(n,this.preserveCollapseState(t),i)}_setChildren(e,t=fi.empty(),i){const n=new Set,o=new Set,r=l=>{var c;if(l.element===null)return;const d=l;if(n.add(d.element),this.nodes.set(d.element,d),this.identityProvider){const f=this.identityProvider.getId(d.element).toString();o.add(f),this.nodesByIdentity.set(f,d)}(c=i.onDidCreateNode)===null||c===void 0||c.call(i,d)},a=l=>{var c;if(l.element===null)return;const d=l;if(n.has(d.element)||this.nodes.delete(d.element),this.identityProvider){const f=this.identityProvider.getId(d.element).toString();o.has(f)||this.nodesByIdentity.delete(f)}(c=i.onDidDeleteNode)===null||c===void 0||c.call(i,d)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},i),{onDidCreateNode:r,onDidDeleteNode:a}))}preserveCollapseState(e=fi.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),fi.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const r=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(r)}if(!i)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const n=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible,o=typeof t.collapsed<"u"?t.collapsed:i.collapsed;return Object.assign(Object.assign({},t),{collapsible:n,collapsed:o,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getElementLocation(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new vl(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new vl(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new vl(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),n=this.model.getParentNodeLocation(i);return this.model.getNode(n).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new vl(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function jE(s){const e=[s.element],t=s.incompressible||!1;return{element:{elements:e,incompressible:t},children:fi.map(fi.from(s.children),jE),collapsible:s.collapsible,collapsed:s.collapsed}}function KE(s){const e=[s.element],t=s.incompressible||!1;let i,n;for(;[n,i]=fi.consume(fi.from(s.children),2),!(n.length!==1||n[0].incompressible);)s=n[0],e.push(s.element);return{element:{elements:e,incompressible:t},children:fi.map(fi.concat(n,i),KE),collapsible:s.collapsible,collapsed:s.collapsed}}function O7(s,e=0){let t;return e<s.element.elements.length-1?t=[O7(s,e+1)]:t=fi.map(fi.from(s.children),i=>O7(i,0)),e===0&&s.element.incompressible?{element:s.element.elements[e],children:t,incompressible:!0,collapsible:s.collapsible,collapsed:s.collapsed}:{element:s.element.elements[e],children:t,collapsible:s.collapsible,collapsed:s.collapsed}}function yY(s){return O7(s,0)}function Sie(s,e,t){return s.element===e?Object.assign(Object.assign({},s),{children:t}):Object.assign(Object.assign({},s),{children:fi.map(fi.from(s.children),i=>Sie(i,e,t))})}const cMe=s=>({getId(e){return e.elements.map(t=>s.getId(t).toString()).join("\0")}});class uMe{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new K6(e,t,i),this.enabled=typeof i.compressionEnabled>"u"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=fi.empty(),i){const n=i.diffIdentityProvider&&cMe(i.diffIdentityProvider);if(e===null){const m=fi.map(t,this.enabled?KE:jE);this._setChildren(null,m,{diffIdentityProvider:n,diffDepth:1/0});return}const o=this.nodes.get(e);if(!o)throw new Error("Unknown compressed tree node");const r=this.model.getNode(o),a=this.model.getParentNodeLocation(o),l=this.model.getNode(a),c=yY(r),d=Sie(c,e,t),f=(this.enabled?KE:jE)(d),g=l.children.map(m=>m===r?f:m);this._setChildren(l.element,g,{diffIdentityProvider:n,diffDepth:r.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,n=fi.map(i,yY),o=fi.map(n,e?KE:jE);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const n=new Set,o=a=>{for(const l of a.element.elements)n.add(l),this.nodes.set(l,a.element)},r=a=>{for(const l of a.element.elements)n.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},i),{onDidCreateNode:o,onDidDeleteNode:r}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getCompressedNode(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new vl(this.user,`Tree element not found: ${e}`);return t}}const dMe=s=>s[s.length-1];class q6{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new q6(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function hMe(s,e){return{splice(t,i,n){e.splice(t,i,n.map(o=>s.map(o)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function fMe(s,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(s(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(s(t),i)}}})}class gMe{constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||dMe;const n=o=>this.elementMapper(o.elements);this.nodeMapper=new U6(o=>new q6(n,o)),this.model=new uMe(e,hMe(this.nodeMapper,t),fMe(n,i))}get onDidSplice(){return gt.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return gt.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return gt.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=fi.empty(),i={}){this.model.setChildren(e,t,i)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var pMe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o};class G6 extends yie{constructor(e,t,i,n,o={}){super(e,t,i,n,o),this.user=e}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=fi.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new K6(e,t,i)}}class Lie{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){const o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);o.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,n)):(i.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,i.data,n))}disposeElement(e,t,i,n){var o,r,a,l;i.compressedTreeNode?(r=(o=this.renderer).disposeCompressedElements)===null||r===void 0||r.call(o,i.compressedTreeNode,t,i.data,n):(l=(a=this.renderer).disposeElement)===null||l===void 0||l.call(a,e,t,i.data,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}pMe([Ss],Lie.prototype,"compressedTreeNodeProvider",null);function mMe(s,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=s().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}})}class xie extends G6{constructor(e,t,i,n,o={}){const r=()=>this,a=n.map(l=>new Lie(r,l));super(e,t,i,a,mMe(r,o))}setChildren(e,t=fi.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new gMe(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var $f=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};function iF(s){return Object.assign(Object.assign({},s),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function P7(s,e){return e.parent?e.parent===s?!0:P7(s,e.parent):!1}function _Me(s,e){return s===e||P7(s,e)||P7(e,s)}class Y6{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new Y6(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class vMe{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...w.treeItemLoading.classNamesArray),!0):(t.classList.remove(...w.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,i,n){var o,r;(r=(o=this.renderer).disposeElement)===null||r===void 0||r.call(o,this.nodeMapper.map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function SY(s){return{browserEvent:s.browserEvent,elements:s.elements.map(e=>e.element)}}function LY(s){return{browserEvent:s.browserEvent,element:s.element&&s.element.element,target:s.target}}class bMe extends LL{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function nF(s){return s instanceof LL?new bMe(s):s}class CMe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,n;(n=(i=this.dnd).onDragStart)===null||n===void 0||n.call(i,nF(e),t)}onDragOver(e,t,i,n,o=!0){return this.dnd.onDragOver(nF(e),t&&t.element,i,n)}drop(e,t,i,n){this.dnd.drop(nF(e),t&&t.element,i,n)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}}function Die(s){return s&&Object.assign(Object.assign({},s),{collapseByDefault:!0,identityProvider:s.identityProvider&&{getId(e){return s.identityProvider.getId(e.element)}},dnd:s.dnd&&new CMe(s.dnd),multipleSelectionController:s.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return s.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return s.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:s.accessibilityProvider&&Object.assign(Object.assign({},s.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:s.accessibilityProvider.getRole?e=>s.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:s.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=s.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return s.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return s.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:s.accessibilityProvider.getWidgetRole?()=>s.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:s.accessibilityProvider.getAriaLevel&&(e=>s.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:s.accessibilityProvider.getActiveDescendantId&&(e=>s.accessibilityProvider.getActiveDescendantId(e.element))}),filter:s.filter&&{filter(e,t){return s.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:s.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},s.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return s.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof s.expandOnlyOnTwistieClick>"u"?void 0:typeof s.expandOnlyOnTwistieClick!="function"?s.expandOnlyOnTwistieClick:e=>s.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:s.additionalScrollHeight})}function F7(s,e){e(s),s.children.forEach(t=>F7(t,e))}class kie{constructor(e,t,i,n,o,r={}){this.user=e,this.dataSource=o,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new J,this._onDidChangeNodeSlowState=new J,this.nodeMapper=new U6(a=>new Y6(a)),this.disposables=new Ae,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.sorter=r.sorter,this.collapseByDefault=r.collapseByDefault,this.tree=this.createTree(e,t,i,n,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.root=iF({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return gt.map(this.tree.onDidChangeFocus,SY)}get onDidChangeSelection(){return gt.map(this.tree.onDidChangeSelection,SY)}get onMouseDblClick(){return gt.map(this.tree.onMouseDblClick,LY)}get onPointer(){return gt.map(this.tree.onPointer,LY)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,i,n,o){const r=new j6(i),a=n.map(c=>new vMe(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=Die(o)||{};return new G6(e,t,r,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return $f(this,void 0,void 0,function*(){this.refreshPromises.forEach(n=>n.cancel()),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,i=!1,n,o){return $f(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new vl(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield gt.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(yield this.refreshAndRenderNode(r,t,n,o),i)try{this.tree.rerender(r)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}expand(e,t=!1){return $f(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new vl(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield gt.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(yield this.root.refreshPromise,yield gt.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const n=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(yield this.root.refreshPromise,yield gt.toPromise(this._onDidRender.event)),n})}setSelection(e,t){const i=e.map(n=>this.getDataNode(n));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(n=>this.getDataNode(n));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new vl(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,i,n){return $f(this,void 0,void 0,function*(){yield this.refreshNode(e,t,i),this.render(e,i,n)})}refreshNode(e,t,i){return $f(this,void 0,void 0,function*(){let n;if(this.subTreeRefreshPromises.forEach((o,r)=>{!n&&_Me(r,e)&&(n=o.then(()=>this.refreshNode(e,t,i)))}),n)return n;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0;return}return this.doRefreshSubTree(e,t,i)})}doRefreshSubTree(e,t,i){return $f(this,void 0,void 0,function*(){let n;e.refreshPromise=new Promise(o=>n=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const o=yield this.doRefreshNode(e,t,i);e.stale=!1,yield _3.settled(o.map(r=>this.doRefreshSubTree(r,t,i)))}finally{n()}})}doRefreshNode(e,t,i){return $f(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let n;if(!e.hasChildren)n=Promise.resolve(fi.empty());else{const o=this.doGetChildren(e);if(fK(o))n=Promise.resolve(o);else{const r=Ag(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),n=o.finally(()=>r.cancel())}}try{const o=yield n;return this.setChildren(e,o,t,i)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Dd(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return fK(i)?this.processChildren(i):(t=qs(()=>$f(this,void 0,void 0,function*(){return this.processChildren(yield i)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Yt))}setChildren(e,t,i,n){const o=[...t];if(e.children.length===0&&o.length===0)return[];const r=new Map,a=new Map;for(const d of e.children)if(r.set(d.element,d),this.identityProvider){const f=this.tree.isCollapsed(d);a.set(d.id,{node:d,collapsed:f})}const l=[],c=o.map(d=>{const f=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const C=iF({element:d,parent:e,hasChildren:f});return f&&this.collapseByDefault&&!this.collapseByDefault(d)&&(C.collapsedByDefault=!1,l.push(C)),C}const g=this.identityProvider.getId(d).toString(),m=a.get(g);if(m){const C=m.node;return r.delete(C.element),this.nodes.delete(C.element),this.nodes.set(d,C),C.element=d,C.hasChildren=f,i?m.collapsed?(C.children.forEach(S=>F7(S,x=>this.nodes.delete(x.element))),C.children.splice(0,C.children.length),C.stale=!0):l.push(C):f&&this.collapseByDefault&&!this.collapseByDefault(d)&&(C.collapsedByDefault=!1,l.push(C)),C}const _=iF({element:d,parent:e,id:g,hasChildren:f});return n&&n.viewState.focus&&n.viewState.focus.indexOf(g)>-1&&n.focus.push(_),n&&n.viewState.selection&&n.viewState.selection.indexOf(g)>-1&&n.selection.push(_),n&&n.viewState.expanded&&n.viewState.expanded.indexOf(g)>-1?l.push(_):f&&this.collapseByDefault&&!this.collapseByDefault(d)&&(_.collapsedByDefault=!1,l.push(_)),_});for(const d of r.values())F7(d,f=>this.nodes.delete(f.element));for(const d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].collapsedByDefault=!1,l.push(c[0])),l}render(e,t,i){const n=e.children.map(r=>this.asTreeElement(r,t)),o=i&&Object.assign(Object.assign({},i),{diffIdentityProvider:i.diffIdentityProvider&&{getId(r){return i.diffIdentityProvider.getId(r.element)}}});this.tree.setChildren(e===this.root?null:e,n,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:i=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?fi.map(e.children,n=>this.asTreeElement(n,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class Z6{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new Z6(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class wMe{constructor(e,t,i,n){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderCompressedElements(e,t,i,n){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...w.treeItemLoading.classNamesArray),!0):(t.classList.remove(...w.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,i,n){var o,r;(r=(o=this.renderer).disposeElement)===null||r===void 0||r.call(o,this.nodeMapper.map(e),t,i.templateData,n)}disposeCompressedElements(e,t,i,n){var o,r;(r=(o=this.renderer).disposeCompressedElements)===null||r===void 0||r.call(o,this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=Ni(this.disposables)}}function yMe(s){const e=s&&Die(s);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return s.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}})})}class SMe extends kie{constructor(e,t,i,n,o,r,a={}){super(e,t,i,o,r,a),this.compressionDelegate=n,this.compressibleNodeMapper=new U6(l=>new Z6(l)),this.filter=a.filter}createTree(e,t,i,n,o){const r=new j6(i),a=n.map(c=>new wMe(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=yMe(o)||{};return new xie(e,t,r,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const i=g=>this.identityProvider.getId(g).toString(),n=g=>{const m=new Set;for(const _ of g){const C=this.tree.getCompressedTreeNode(_===this.root?null:_);if(!!C.element)for(const S of C.element.elements)m.add(i(S.element))}return m},o=n(this.tree.getSelection()),r=n(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const c=this.getFocus();let d=!1;const f=g=>{const m=g.element;if(m)for(let _=0;_<m.elements.length;_++){const C=i(m.elements[_].element),S=m.elements[m.elements.length-1].element;o.has(C)&&a.indexOf(S)===-1&&(a.push(S),l=!0),r.has(C)&&c.indexOf(S)===-1&&(c.push(S),d=!0)}g.children.forEach(f)};f(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),d&&this.setFocus(c)}processChildren(e){return this.filter&&(e=fi.filter(e,t=>{const i=this.filter.filter(t,1),n=LMe(i);if(n===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return n===1})),super.processChildren(e)}}function LMe(s){return typeof s=="boolean"?s?1:0:$6(s)?yS(s.visibility):yS(s)}class xMe extends yie{constructor(e,t,i,n,o,r={}){super(e,t,i,n,r),this.user=e,this.dataSource=o,this.identityProvider=r.identityProvider}createModel(e,t,i){return new K6(e,t,i)}}new st("isMac",mi,b("isMac","Whether the operating system is macOS"));new st("isLinux",Wo,b("isLinux","Whether the operating system is Linux"));const _R=new st("isWindows",mo,b("isWindows","Whether the operating system is Windows"));new st("isWeb",Xg,b("isWeb","Whether the platform is a web browser"));new st("isMacNative",mi&&!Xg,b("isMacNative","Whether the operating system is macOS on a non-browser platform"));new st("isIOS",gd,b("isIOS","Whether the operating system is iOS"));new st("isDevelopment",!1,!0);new st("productQualityType","",b("productQualityType","Quality type of VS Code"));const Eie="inputFocus";new st(Eie,!1,b("inputFocus","Whether keyboard focus is inside an input box"));var Id=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Ri=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const Fl=bi("listService");let B7=class{constructor(e){this._themeService=e,this.disposables=new Ae,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(e){var t,i;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(i=this._lastFocusedWidget)===null||i===void 0||i.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const n=new mie(Il(),"");this.disposables.add(Zm(n,this._themeService))}if(this.lists.some(n=>n.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),nu(e.onDidFocus(()=>this.setLastFocusedList(e)),ni(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(n=>n!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}};B7=Id([Ri(0,cn)],B7);const Tie=new st("listFocus",!0),vR=new st("listSupportsMultiselect",!0),Iie=Je.and(Tie,Je.not(Eie)),Q6=new st("listHasSelectionOrFocus",!1),X6=new st("listDoubleSelection",!1),J6=new st("listMultiSelection",!1),bR=new st("listSelectionNavigation",!1),DMe=new st("listSupportsFind",!0),eV=new st("treeElementCanCollapse",!1),kMe=new st("treeElementHasParent",!1),tV=new st("treeElementCanExpand",!1),EMe=new st("treeElementHasChild",!1),TMe=new st("treeFindOpen",!1),Nie="listTypeNavigationMode",Rie="listAutomaticKeyboardNavigation";function CR(s,e){const t=s.createScoped(e.getHTMLElement());return Tie.bindTo(t),t}const N_="workbench.list.multiSelectModifier",V7="workbench.list.openMode",kl="workbench.list.horizontalScrolling",iV="workbench.list.defaultFindMode",nV="workbench.list.keyboardNavigation",xS="workbench.tree.indent",AI="workbench.tree.renderIndentGuides",du="workbench.list.smoothScrolling",wd="workbench.list.mouseWheelScrollSensitivity",yd="workbench.list.fastScrollSensitivity",MI="workbench.tree.expandMode";function Sd(s){return s.getValue(N_)==="alt"}class IMe extends ge{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Sd(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(N_)&&(this.useAltAsMultipleSelectionModifier=Sd(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:fie(e)}isSelectionRangeChangeEvent(e){return gie(e)}}function wR(s,e){var t;const i=s.get(Ai),n=s.get(xs),o=new Ae;return[Object.assign(Object.assign({},e),{keyboardNavigationDelegate:{mightProducePrintableCharacter(a){return n.mightProducePrintableCharacter(a)}},smoothScrolling:Boolean(i.getValue(du)),mouseWheelScrollSensitivity:i.getValue(wd),fastScrollSensitivity:i.getValue(yd),multipleSelectionController:(t=e.multipleSelectionController)!==null&&t!==void 0?t:o.add(new IMe(i)),keyboardNavigationEventFilter:AMe(n)}),o]}let W7=class extends mu{constructor(e,t,i,n,o,r,a,l,c,d){const f=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:Boolean(c.getValue(kl)),[g,m]=d.invokeFunction(wR,o);super(e,t,i,n,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Wc(l.getColorTheme(),dR)),g),{horizontalScrolling:f})),this.disposables.add(m),this.contextKeyService=CR(r,this),this.themeService=l,this.listSupportsMultiSelect=vR.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),bR.bindTo(this.contextKeyService).set(Boolean(o.selectionNavigation)),this.listHasSelectionOrFocus=Q6.bindTo(this.contextKeyService),this.listDoubleSelection=X6.bindTo(this.contextKeyService),this.listMultiSelection=J6.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Sd(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const C=this.getSelection(),S=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(C.length>0||S.length>0),this.listMultiSelection.set(C.length>1),this.listDoubleSelection.set(C.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const C=this.getSelection(),S=this.getFocus();this.listHasSelectionOrFocus.set(C.length>0||S.length>0)})),this.disposables.add(c.onDidChangeConfiguration(C=>{C.affectsConfiguration(N_)&&(this._useAltAsMultipleSelectionModifier=Sd(c));let S={};if(C.affectsConfiguration(kl)&&this.horizontalScrolling===void 0){const x=Boolean(c.getValue(kl));S=Object.assign(Object.assign({},S),{horizontalScrolling:x})}if(C.affectsConfiguration(du)){const x=Boolean(c.getValue(du));S=Object.assign(Object.assign({},S),{smoothScrolling:x})}if(C.affectsConfiguration(wd)){const x=c.getValue(wd);S=Object.assign(Object.assign({},S),{mouseWheelScrollSensitivity:x})}if(C.affectsConfiguration(yd)){const x=c.getValue(yd);S=Object.assign(Object.assign({},S),{fastScrollSensitivity:x})}Object.keys(S).length>0&&this.updateOptions(S)})),this.navigator=new Aie(this,Object.assign({configurationService:c},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Zm(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};W7=Id([Ri(5,jt),Ri(6,Fl),Ri(7,cn),Ri(8,Ai),Ri(9,Zt)],W7);let xY=class extends HAe{constructor(e,t,i,n,o,r,a,l,c,d){const f=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:Boolean(c.getValue(kl)),[g,m]=d.invokeFunction(wR,o);super(e,t,i,n,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Wc(l.getColorTheme(),dR)),g),{horizontalScrolling:f})),this.disposables=new Ae,this.disposables.add(m),this.contextKeyService=CR(r,this),this.themeService=l,this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=vR.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),bR.bindTo(this.contextKeyService).set(Boolean(o.selectionNavigation)),this._useAltAsMultipleSelectionModifier=Sd(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),o.overrideStyles&&this.disposables.add(Zm(this,l,o.overrideStyles)),this.disposables.add(c.onDidChangeConfiguration(C=>{C.affectsConfiguration(N_)&&(this._useAltAsMultipleSelectionModifier=Sd(c));let S={};if(C.affectsConfiguration(kl)&&this.horizontalScrolling===void 0){const x=Boolean(c.getValue(kl));S=Object.assign(Object.assign({},S),{horizontalScrolling:x})}if(C.affectsConfiguration(du)){const x=Boolean(c.getValue(du));S=Object.assign(Object.assign({},S),{smoothScrolling:x})}if(C.affectsConfiguration(wd)){const x=c.getValue(wd);S=Object.assign(Object.assign({},S),{mouseWheelScrollSensitivity:x})}if(C.affectsConfiguration(yd)){const x=c.getValue(yd);S=Object.assign(Object.assign({},S),{fastScrollSensitivity:x})}Object.keys(S).length>0&&this.updateOptions(S)})),this.navigator=new Aie(this,Object.assign({configurationService:c},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Zm(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};xY=Id([Ri(5,jt),Ri(6,Fl),Ri(7,cn),Ri(8,Ai),Ri(9,Zt)],xY);let DY=class extends mR{constructor(e,t,i,n,o,r,a,l,c,d,f){const g=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:Boolean(d.getValue(kl)),[m,_]=f.invokeFunction(wR,r);super(e,t,i,n,o,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Wc(c.getColorTheme(),dR)),m),{horizontalScrolling:g})),this.disposables.add(_),this.contextKeyService=CR(a,this),this.themeService=c,this.listSupportsMultiSelect=vR.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),bR.bindTo(this.contextKeyService).set(Boolean(r.selectionNavigation)),this.listHasSelectionOrFocus=Q6.bindTo(this.contextKeyService),this.listDoubleSelection=X6.bindTo(this.contextKeyService),this.listMultiSelection=J6.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Sd(d),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const S=this.getSelection(),x=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(S.length>0||x.length>0),this.listMultiSelection.set(S.length>1),this.listDoubleSelection.set(S.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const S=this.getSelection(),x=this.getFocus();this.listHasSelectionOrFocus.set(S.length>0||x.length>0)})),this.disposables.add(d.onDidChangeConfiguration(S=>{S.affectsConfiguration(N_)&&(this._useAltAsMultipleSelectionModifier=Sd(d));let x={};if(S.affectsConfiguration(kl)&&this.horizontalScrolling===void 0){const L=Boolean(d.getValue(kl));x=Object.assign(Object.assign({},x),{horizontalScrolling:L})}if(S.affectsConfiguration(du)){const L=Boolean(d.getValue(du));x=Object.assign(Object.assign({},x),{smoothScrolling:L})}if(S.affectsConfiguration(wd)){const L=d.getValue(wd);x=Object.assign(Object.assign({},x),{mouseWheelScrollSensitivity:L})}if(S.affectsConfiguration(yd)){const L=d.getValue(yd);x=Object.assign(Object.assign({},x),{fastScrollSensitivity:L})}Object.keys(x).length>0&&this.updateOptions(x)})),this.navigator=new NMe(this,Object.assign({configurationService:d},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Zm(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};DY=Id([Ri(6,jt),Ri(7,Fl),Ri(8,cn),Ri(9,Ai),Ri(10,Zt)],DY);class sV extends ge{constructor(e,t){var i;super(),this.widget=e,this._onDidOpen=this._register(new J),this.onDidOpen=this._onDidOpen.event,this._register(gt.filter(this.widget.onDidChangeSelection,n=>n.browserEvent instanceof KeyboardEvent)(n=>this.onSelectionFromKeyboard(n))),this._register(this.widget.onPointer(n=>this.onPointer(n.element,n.browserEvent))),this._register(this.widget.onMouseDblClick(n=>this.onMouseDblClick(n.element,n.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t==null?void 0:t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(V7))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(V7))!=="doubleClick"}))):this.openOnSingleClick=(i=t==null?void 0:t.openOnSingleClick)!==null&&i!==void 0?i:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,n=typeof t.pinned=="boolean"?t.pinned:!i,o=!1;this._open(this.getSelectedElement(),i,n,o,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const n=t.button===1,o=!0,r=n,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const o=!1,r=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}_open(e,t,i,n,o){!e||this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:n,element:e,browserEvent:o})}}class Aie extends sV{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class NMe extends sV{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class RMe extends sV{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function AMe(s){let e=!1;return t=>{if(t.toKeybinding().isModifierKey())return!1;if(e)return e=!1,!1;const i=s.softDispatch(t,t.target);return i!=null&&i.enterChord?(e=!0,!1):(e=!1,!i)}}let kY=class extends G6{constructor(e,t,i,n,o,r,a,l,c,d){const{options:f,getTypeNavigationMode:g,disposable:m}=r.invokeFunction(kL,o);super(e,t,i,n,f),this.disposables.add(m),this.internals=new Jm(this,o,g,o.overrideStyles,a,l,c,d),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};kY=Id([Ri(5,Zt),Ri(6,jt),Ri(7,Fl),Ri(8,cn),Ri(9,Ai)],kY);let EY=class extends xie{constructor(e,t,i,n,o,r,a,l,c,d){const{options:f,getTypeNavigationMode:g,disposable:m}=r.invokeFunction(kL,o);super(e,t,i,n,f),this.disposables.add(m),this.internals=new Jm(this,o,g,o.overrideStyles,a,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};EY=Id([Ri(5,Zt),Ri(6,jt),Ri(7,Fl),Ri(8,cn),Ri(9,Ai)],EY);let TY=class extends xMe{constructor(e,t,i,n,o,r,a,l,c,d,f){const{options:g,getTypeNavigationMode:m,disposable:_}=a.invokeFunction(kL,r);super(e,t,i,n,o,g),this.disposables.add(_),this.internals=new Jm(this,r,m,r.overrideStyles,l,c,d,f),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};TY=Id([Ri(6,Zt),Ri(7,jt),Ri(8,Fl),Ri(9,cn),Ri(10,Ai)],TY);let H7=class extends kie{constructor(e,t,i,n,o,r,a,l,c,d,f){const{options:g,getTypeNavigationMode:m,disposable:_}=a.invokeFunction(kL,r);super(e,t,i,n,o,g),this.disposables.add(_),this.internals=new Jm(this,r,m,r.overrideStyles,l,c,d,f),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};H7=Id([Ri(6,Zt),Ri(7,jt),Ri(8,Fl),Ri(9,cn),Ri(10,Ai)],H7);let IY=class extends SMe{constructor(e,t,i,n,o,r,a,l,c,d,f,g){const{options:m,getTypeNavigationMode:_,disposable:C}=l.invokeFunction(kL,a);super(e,t,i,n,o,r,m),this.disposables.add(C),this.internals=new Jm(this,a,_,a.overrideStyles,c,d,f,g),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};IY=Id([Ri(7,Zt),Ri(8,jt),Ri(9,Fl),Ri(10,cn),Ri(11,Ai)],IY);function Mie(s){const e=s.getValue(iV);if(e==="highlight")return ad.Highlight;if(e==="filter")return ad.Filter;const t=s.getValue(nV);if(t==="simple"||t==="highlight")return ad.Highlight;if(t==="filter")return ad.Filter}function kL(s,e){var t;const i=s.get(Ai),n=s.get(E_),o=s.get(jt),r=s.get(Zt),a=()=>{const g=o.getContextKeyValue(Nie);if(g==="automatic")return Lg.Automatic;if(g==="trigger"||o.getContextKeyValue(Rie)===!1)return Lg.Trigger},l=e.horizontalScrolling!==void 0?e.horizontalScrolling:Boolean(i.getValue(kl)),[c,d]=r.invokeFunction(wR,e),f=e.additionalScrollHeight;return{getTypeNavigationMode:a,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},c),{indent:typeof i.getValue(xS)=="number"?i.getValue(xS):void 0,renderIndentGuides:i.getValue(AI),smoothScrolling:Boolean(i.getValue(du)),defaultFindMode:Mie(i),horizontalScrolling:l,additionalScrollHeight:f,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(t=e.expandOnlyOnTwistieClick)!==null&&t!==void 0?t:i.getValue(MI)==="doubleClick",contextViewProvider:n})}}let Jm=class{constructor(e,t,i,n,o,r,a,l){var c;this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=CR(o,e),this.listSupportsMultiSelect=vR.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),bR.bindTo(this.contextKeyService).set(Boolean(t.selectionNavigation)),this.listSupportFindWidget=DMe.bindTo(this.contextKeyService),this.listSupportFindWidget.set((c=t.findWidgetEnabled)!==null&&c!==void 0?c:!0),this.hasSelectionOrFocus=Q6.bindTo(this.contextKeyService),this.hasDoubleSelection=X6.bindTo(this.contextKeyService),this.hasMultiSelection=J6.bindTo(this.contextKeyService),this.treeElementCanCollapse=eV.bindTo(this.contextKeyService),this.treeElementHasParent=kMe.bindTo(this.contextKeyService),this.treeElementCanExpand=tV.bindTo(this.contextKeyService),this.treeElementHasChild=EMe.bindTo(this.contextKeyService),this.treeFindOpen=TMe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Sd(l),this.updateStyleOverrides(n);const f=()=>{const m=e.getFocus()[0];if(!m)return;const _=e.getNode(m);this.treeElementCanCollapse.set(_.collapsible&&!_.collapsed),this.treeElementHasParent.set(!!e.getParentElement(m)),this.treeElementCanExpand.set(_.collapsible&&_.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(m))},g=new Set;g.add(Nie),g.add(Rie),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection(()=>{const m=e.getSelection(),_=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(m.length>0||_.length>0),this.hasMultiSelection.set(m.length>1),this.hasDoubleSelection.set(m.length===2)})}),e.onDidChangeFocus(()=>{const m=e.getSelection(),_=e.getFocus();this.hasSelectionOrFocus.set(m.length>0||_.length>0),f()}),e.onDidChangeCollapseState(f),e.onDidChangeModel(f),e.onDidChangeFindOpenState(m=>this.treeFindOpen.set(m)),l.onDidChangeConfiguration(m=>{let _={};if(m.affectsConfiguration(N_)&&(this._useAltAsMultipleSelectionModifier=Sd(l)),m.affectsConfiguration(xS)){const C=l.getValue(xS);_=Object.assign(Object.assign({},_),{indent:C})}if(m.affectsConfiguration(AI)){const C=l.getValue(AI);_=Object.assign(Object.assign({},_),{renderIndentGuides:C})}if(m.affectsConfiguration(du)){const C=Boolean(l.getValue(du));_=Object.assign(Object.assign({},_),{smoothScrolling:C})}if((m.affectsConfiguration(iV)||m.affectsConfiguration(nV))&&e.updateOptions({defaultFindMode:Mie(l)}),m.affectsConfiguration(kl)&&t.horizontalScrolling===void 0){const C=Boolean(l.getValue(kl));_=Object.assign(Object.assign({},_),{horizontalScrolling:C})}if(m.affectsConfiguration(MI)&&t.expandOnlyOnTwistieClick===void 0&&(_=Object.assign(Object.assign({},_),{expandOnlyOnTwistieClick:l.getValue(MI)==="doubleClick"})),m.affectsConfiguration(wd)){const C=l.getValue(wd);_=Object.assign(Object.assign({},_),{mouseWheelScrollSensitivity:C})}if(m.affectsConfiguration(yd)){const C=l.getValue(yd);_=Object.assign(Object.assign({},_),{fastScrollSensitivity:C})}Object.keys(_).length>0&&e.updateOptions(_)}),this.contextKeyService.onDidChangeContext(m=>{m.affectsSome(g)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new RMe(e,Object.assign({configurationService:l},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){Ni(this.styler),this.styler=e?Zm(this.tree,this.themeService,e):ge.None}dispose(){this.disposables=Ni(this.disposables),Ni(this.styler),this.styler=void 0}};Jm=Id([Ri(4,jt),Ri(5,Fl),Ri(6,cn),Ri(7,Ai)],Jm);const MMe=Wn.as(tf.Configuration);MMe.registerConfiguration({id:"workbench",order:7,title:b("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[N_]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[b("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),b("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:b({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[V7]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:b({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[kl]:{type:"boolean",default:!1,description:b("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[xS]:{type:"number",default:8,minimum:4,maximum:40,description:b("tree indent setting","Controls tree indentation in pixels.")},[AI]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:b("render tree indent guides","Controls whether the tree should render indent guides.")},[du]:{type:"boolean",default:!1,description:b("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[wd]:{type:"number",default:1,markdownDescription:b("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[yd]:{type:"number",default:5,description:b("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[iV]:{type:"string",enum:["highlight","filter"],enumDescriptions:[b("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),b("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:b("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[nV]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[b("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),b("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),b("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:b("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:b("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' instead.")},[MI]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:b("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var z7;(function(s){s[s.PRESERVE=0]="PRESERVE",s[s.LAST=1]="LAST"})(z7||(z7={}));const R_={Quickaccess:"workbench.contributions.quickaccess"};class OMe{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),ni(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return oL([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}Wn.add(R_.Quickaccess,new OMe);const rf=bi("quickInputService");var PMe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},NY=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let U7=class extends ge{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Wn.as(R_.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var n;const[o,r]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a==null?void 0:a.descriptor;if(a&&r&&l===r){e!==r.prefix&&!(i!=null&&i.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,r,i);return}if(r&&!(i!=null&&i.preserveValue)){let m;if(a&&l&&l!==r){const _=a.value.substr(l.prefix.length);_&&(m=`${r.prefix}${_}`)}if(!m){const _=o==null?void 0:o.defaultFilterValue;_===z7.LAST?m=this.lastAcceptedPickerValues.get(r):typeof _=="string"&&(m=`${r.prefix}${_}`)}typeof m=="string"&&(e=m)}const c=new Ae,d=c.add(this.quickInputService.createQuickPick());d.value=e,this.adjustValueSelection(d,r,i),d.placeholder=r==null?void 0:r.placeholder,d.quickNavigate=i==null?void 0:i.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!a,(typeof(i==null?void 0:i.itemActivation)=="number"||(i==null?void 0:i.quickNavigateConfiguration))&&(d.itemActivation=(n=i==null?void 0:i.itemActivation)!==null&&n!==void 0?n:Vc.SECOND),d.contextKey=r==null?void 0:r.contextKey,d.filterValue=m=>m.substring(r?r.prefix.length:0),r!=null&&r.placeholder&&(d.ariaLabel=r==null?void 0:r.placeholder);let f;t&&(f=new mB,c.add(qh(d.onWillAccept)(m=>{m.veto(),d.hide()}))),c.add(this.registerPickerListeners(d,o,r,e));const g=c.add(new _o);if(o&&c.add(o.provide(d,g.token)),qh(d.onDidHide)(()=>{d.selectedItems.length===0&&g.cancel(),c.dispose(),f==null||f.complete(d.selectedItems.slice(0))}),d.show(),t)return f==null?void 0:f.p}adjustValueSelection(e,t,i){var n;let o;i!=null&&i.preserveValue?o=[e.value.length,e.value.length]:o=[(n=t==null?void 0:t.prefix.length)!==null&&n!==void 0?n:0,e.value.length],e.valueSelection=o}registerPickerListeners(e,t,i,n){const o=new Ae,r=this.visibleQuickAccess={picker:e,descriptor:i,value:n};return o.add(ni(()=>{r===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(a=>{const[l]=this.getOrInstantiateProvider(a);l!==t?this.show(a,{preserveValue:!0}):r.value=a})),i&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),o}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let i=this.mapProviderToDescriptor.get(t);return i||(i=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,i)),[i,t]}};U7=PMe([NY(0,rf),NY(1,Zt)],U7);var FMe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},bw=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let $7=class extends ELe{constructor(e,t,i,n,o){super(i),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=n,this.layoutService=o,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(U7))),this._quickAccess}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:o=>this.setContextKey(o),returnFocus:()=>e.focus(),createList:(o,r,a,l,c)=>this.instantiationService.createInstance(W7,o,r,a,l,c),styles:this.computeStyles()},n=this._register(new pR(Object.assign(Object.assign({},i),t)));return n.layout(e.dimension,e.offset.quickPickTop),this._register(e.onDidLayout(o=>n.layout(o,e.offset.quickPickTop))),this._register(n.onShow(()=>this.resetContextKeys())),this._register(n.onHide(()=>this.resetContextKeys())),n}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new st(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t==null||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},i=ri.None){return this.controller.pick(e,t,i)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},Wc(this.theme,{quickInputBackground:_q,quickInputForeground:nxe,quickInputTitleBackground:sxe,contrastBorder:si,widgetShadow:Qc})),inputBox:Wc(this.theme,{inputForeground:qN,inputBackground:KN,inputBorder:GN,inputValidationInfoBackground:NB,inputValidationInfoForeground:RB,inputValidationInfoBorder:AB,inputValidationWarningBackground:MB,inputValidationWarningForeground:OB,inputValidationWarningBorder:PB,inputValidationErrorBackground:FB,inputValidationErrorForeground:BB,inputValidationErrorBorder:VB}),countBadge:Wc(this.theme,{badgeBackground:yb,badgeForeground:Sb,badgeBorder:si}),button:Wc(this.theme,{buttonForeground:Ow,buttonBackground:A3,buttonHoverBackground:YLe,buttonBorder:si}),progressBar:Wc(this.theme,{progressBarBackground:ZLe}),keybindingLabel:Wc(this.theme,{keybindingLabelBackground:axe,keybindingLabelForeground:lxe,keybindingLabelBorder:cxe,keybindingLabelBottomBorder:uxe,keybindingLabelShadow:Qc}),list:Wc(this.theme,{listBackground:_q,listInactiveFocusForeground:Fw,listInactiveSelectionIconForeground:Bw,listInactiveFocusBackground:Vw,listFocusOutline:En,listInactiveFocusOutline:En,pickerGroupBorder:rxe,pickerGroupForeground:oxe})}}};$7=FMe([bw(0,Zt),bw(1,jt),bw(2,cn),bw(3,nf),bw(4,uC)],$7);var Oie=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},rm=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let j7=class extends $7{constructor(e,t,i,n,o,r){super(t,i,n,o,new l7(e.getContainerDomNode(),r)),this.host=void 0;const a=A0.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return l.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus(),offset:{top:0,quickPickTop:0}}}else this.host=void 0}createController(){return super.createController(this.host)}};j7=Oie([rm(1,Zt),rm(2,jt),rm(3,cn),rm(4,nf),rm(5,Vi)],j7);let K7=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(j7,e);this.mapEditorToService.set(e,t),qh(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},i=ri.None){return this.activeService.pick(e,t,i)}createQuickPick(){return this.activeService.createQuickPick()}};K7=Oie([rm(0,Zt),rm(1,Vi)],K7);class A0{constructor(e){this.editor=e,this.widget=new yR(this.editor)}static get(e){return e.getContribution(A0.ID)}dispose(){this.widget.dispose()}}A0.ID="editor.controller.quickInput";class yR{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return yR.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}yR.ID="editor.contrib.quickInputWidget";Ei(A0.ID,A0);class BMe{constructor(e,t,i,n,o){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=n,this.background=o}}function VMe(s){if(!s||!Array.isArray(s))return[];const e=[];let t=0;for(let i=0,n=s.length;i<n;i++){const o=s[i];let r=-1;if(typeof o.fontStyle=="string"){r=0;const c=o.fontStyle.split(" ");for(let d=0,f=c.length;d<f;d++)switch(c[d]){case"italic":r=r|1;break;case"bold":r=r|2;break;case"underline":r=r|4;break;case"strikethrough":r=r|8;break}}let a=null;typeof o.foreground=="string"&&(a=o.foreground);let l=null;typeof o.background=="string"&&(l=o.background),e[t++]=new BMe(o.token||"",i,r,a,l)}return e}function WMe(s,e){s.sort((d,f)=>{const g=jMe(d.token,f.token);return g!==0?g:d.index-f.index});let t=0,i="000000",n="ffffff";for(;s.length>=1&&s[0].token==="";){const d=s.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(i=d.foreground),d.background!==null&&(n=d.background)}const o=new zMe;for(const d of e)o.getId(d);const r=o.getId(i),a=o.getId(n),l=new oV(t,r,a),c=new rV(l);for(let d=0,f=s.length;d<f;d++){const g=s[d];c.insert(g.token,g.fontStyle,o.getId(g.foreground),o.getId(g.background))}return new Pie(o,c)}const HMe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class zMe{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(HMe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=oe.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class Pie{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(VMe(e),t)}static createFromParsedTokenTheme(e,t){return WMe(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i>"u"){const n=this._match(t),o=$Me(t);i=(n.metadata|o<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const UMe=/\b(comment|string|regex|regexp)\b/;function $Me(s){const e=s.match(UMe);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function jMe(s,e){return s<e?-1:s>e?1:0}class oV{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new oV(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class rV{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let i,n;t===-1?(i=e,n=""):(i=e.substring(0,t),n=e.substring(t+1));const o=this._children.get(i);return typeof o<"u"?o.match(n):this._mainRule}insert(e,t,i,n){if(e===""){this._mainRule.acceptOverwrite(t,i,n);return}const o=e.indexOf(".");let r,a;o===-1?(r=e,a=""):(r=e.substring(0,o),a=e.substring(o+1));let l=this._children.get(r);typeof l>"u"&&(l=new rV(this._mainRule.clone()),this._children.set(r,l)),l.insert(a,t,i,n)}}function KMe(s){const e=[];for(let t=1,i=s.length;t<i;t++){const n=s[t];e[t]=`.mtk${t} { color: ${n}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const qMe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Es]:"#FFFFFE",[za]:"#000000",[WB]:"#E5EBF1",[pL]:"#D3D3D3",[mL]:"#939393",[HB]:"#ADD6FF4D"}},GMe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Es]:"#1E1E1E",[za]:"#D4D4D4",[WB]:"#3A3D41",[pL]:"#404040",[mL]:"#707070",[HB]:"#ADD6FF26"}},YMe={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Es]:"#000000",[za]:"#FFFFFF",[pL]:"#FFFFFF",[mL]:"#FFFFFF"}},ZMe={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Es]:"#FFFFFF",[za]:"#292929",[pL]:"#292929",[mL]:"#292929"}};function QMe(s){const e=new J,t=Tte();return t.onDidChange(()=>e.fire()),s==null||s.onDidProductIconThemeChange(()=>e.fire()),{onDidChange:e.event,getCSS(){const i=s?s.getProductIconTheme():new Fie,n={},o=a=>{const l=i.getIcon(a);if(!l)return;const c=l.font;return c?(n[c.id]=c.definition,`.codicon-${a.id}:before { content: '${l.fontCharacter}'; font-family: ${dq(c.id)}; }`):`.codicon-${a.id}:before { content: '${l.fontCharacter}'; }`},r=[];for(const a of t.getIcons()){const l=o(a);l&&r.push(l)}for(const a in n){const l=n[a],c=l.weight?`font-weight: ${l.weight};`:"",d=l.style?`font-style: ${l.style};`:"",f=l.src.map(g=>`${Um(g.location)} format('${g.format}')`).join(", ");r.push(`@font-face { src: ${f}; font-family: ${dq(a)};${c}${d} font-display: block; }`)}return r.join(`
`)}}}class Fie{getIcon(e){const t=Tte();let i=e.defaults;for(;Pi.isThemeIcon(i);){const n=t.getIcon(i.id);if(!n)return;i=n.defaults}return i}}const Eh="vs",i0="vs-dark",Tm="hc-black",Im="hc-light",Bie=Wn.as(dee.ColorContribution),XMe=Wn.as(eee.ThemingContribution);class Vie{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(qE(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,oe.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=q7(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,oe.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=Bie.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case Eh:return Cl.LIGHT;case Tm:return Cl.HIGH_CONTRAST_DARK;case Im:return Cl.HIGH_CONTRAST_LIGHT;default:return Cl.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const o=q7(this.themeData.base);e=o.rules,o.encodedTokensColors&&(t=o.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],n=this.themeData.colors["editor.background"];if(i||n){const o={token:""};i&&(o.foreground=i),n&&(o.background=n),e.push(o)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=Pie.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const o=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=fo.getForeground(o),a=fo.getFontStyle(o);return{foreground:r,italic:Boolean(a&1),bold:Boolean(a&2),underline:Boolean(a&4),strikethrough:Boolean(a&8)}}}function qE(s){return s===Eh||s===i0||s===Tm||s===Im}function q7(s){switch(s){case Eh:return qMe;case i0:return GMe;case Tm:return YMe;case Im:return ZMe}}function eE(s){const e=q7(s);return new Vie(s,e)}class JMe extends ge{constructor(){super(),this._onColorThemeChange=this._register(new J),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new J),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new Fie,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Eh,eE(Eh)),this._knownThemes.set(i0,eE(i0)),this._knownThemes.set(Tm,eE(Tm)),this._knownThemes.set(Im,eE(Im));const e=QMe(this);this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Eh),this._onOSSchemeChanged(),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),aB("(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return Ky(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Il(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),ge.None}_registerShadowDomContainer(e){const t=Il(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!qE(t.base)&&!qE(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new Vie(e,t)),qE(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Eh),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=window.matchMedia("(forced-colors: active)").matches;if(e!==Vo(this._theme.type)){let t;Zy(this._theme.type)?t=e?Tm:i0:t=e?Im:Eh,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};XMe.getThemingParticipants().forEach(r=>r(this._theme,i,this._environment));const n=[];for(const r of Bie.getColors()){const a=this._theme.getColor(r.id,!0);a&&n.push(`${uee(r.id)}: ${a.toString()};`)}i.addRule(`.monaco-editor { ${n.join(`
`)} }`);const o=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(KMe(o)),this._themeCSS=e.join(`
`),this._updateCSS(),Fn.setColorMap(o),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const Xa=bi("themeService");var eOe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},sF=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let G7=class extends ge{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new J,this._onDidChangeReducedMotion=new J,this._accessibilityModeEnabledContext=hL.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire()),r.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),n(),this._register(this.onDidChangeScreenReaderOptimized(()=>n()));const o=window.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=o.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(o)}initReducedMotionListeners(e){if(!this._layoutService.hasContainer)return;this._register(Le(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.container.classList.toggle("reduce-motion",i),this._layoutService.container.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};G7=eOe([sF(0,jt),sF(1,uC),sF(2,Ai)],G7);var jw=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})},Mb;(function(s){s[s.None=0]="None",s[s.Initialized=1]="Initialized",s[s.Closed=2]="Closed"})(Mb||(Mb={}));class n0 extends ge{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new J),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Mb.None,this.cache=new Map,this.flushDelayer=new cye(n0.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,i;(t=e.changed)===null||t===void 0||t.forEach((n,o)=>this.accept(o,n)),(i=e.deleted)===null||i===void 0||i.forEach(n=>this.accept(n,void 0))}accept(e,t){if(this.state===Mb.Closed)return;let i=!1;Ba(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire(e)}get(e,t){const i=this.cache.get(e);return Ba(i)?t:i}getBoolean(e,t){const i=this.get(e);return Ba(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return Ba(i)?t:parseInt(i,10)}set(e,t){return jw(this,void 0,void 0,function*(){if(this.state===Mb.Closed)return;if(Ba(t))return this.delete(e);const i=String(t);if(this.cache.get(e)!==i)return this.cache.set(e,i),this.pendingInserts.set(e,i),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}delete(e){return jw(this,void 0,void 0,function*(){if(!(this.state===Mb.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return jw(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return jw(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}n0.DEFAULT_FLUSH_DELAY=100;class oF{constructor(){this.onDidChangeItemsExternal=gt.None,this.items=new Map}updateItems(e){var t,i;return jw(this,void 0,void 0,function*(){(t=e.insert)===null||t===void 0||t.forEach((n,o)=>this.items.set(o,n)),(i=e.delete)===null||i===void 0||i.forEach(n=>this.items.delete(n))})}}const tE="__$__targetStorageMarker",mc=bi("storageService");var OI;(function(s){s[s.NONE=0]="NONE",s[s.SHUTDOWN=1]="SHUTDOWN"})(OI||(OI={}));class SR extends ge{constructor(e={flushInterval:SR.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new yT),this.onDidChangeValue=this._onDidChangeValue.event,this._onDidChangeTarget=this._register(new yT),this._onWillSaveState=this._register(new J),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}emitDidChangeValue(e,t){if(t===tE){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,i){var n;return(n=this.getStorage(t))===null||n===void 0?void 0:n.get(e,i)}getBoolean(e,t,i){var n;return(n=this.getStorage(t))===null||n===void 0?void 0:n.getBoolean(e,i)}getNumber(e,t,i){var n;return(n=this.getStorage(t))===null||n===void 0?void 0:n.getNumber(e,i)}store(e,t,i,n){if(Ba(t)){this.remove(e,i);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,i,n),(o=this.getStorage(i))===null||o===void 0||o.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var i;this.updateKeyTarget(e,t,void 0),(i=this.getStorage(t))===null||i===void 0||i.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i){var n,o;const r=this.getKeyTargets(t);typeof i=="number"?r[e]!==i&&(r[e]=i,(n=this.getStorage(t))===null||n===void 0||n.set(tE,JSON.stringify(r))):typeof r[e]=="number"&&(delete r[e],(o=this.getStorage(t))===null||o===void 0||o.set(tE,JSON.stringify(r)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.get(tE,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}SR.DEFAULT_FLUSH_INTERVAL=60*1e3;class tOe extends SR{constructor(){super(),this.applicationStorage=this._register(new n0(new oF)),this.profileStorage=this._register(new n0(new oF)),this.workspaceStorage=this._register(new n0(new oF)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}var aV=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},s0=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let Y7=class{constructor(e,t){this._commandService=e,this._hiddenStates=new PI(t)}createMenu(e,t,i){return new Z7(e,this._hiddenStates,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},i),this._commandService,t,this)}};Y7=aV([s0(0,fs),s0(1,mc)],Y7);let PI=class Kw{constructor(e){this._storageService=e,this._disposables=new Ae,this._onDidChange=new J,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1;try{const t=e.get(Kw._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(t=>{if(t.key===Kw._key){if(!this._ignoreChangeEvent)try{const i=e.get(Kw._key,0,"{}");this._data=JSON.parse(i)}catch(i){console.log("FAILED to read storage after UPDATE",i)}this._onDidChange.fire()}}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}isHidden(e,t){var i,n;return(n=(i=this._data[e.id])===null||i===void 0?void 0:i.includes(t))!==null&&n!==void 0?n:!1}updateHidden(e,t,i){const n=this._data[e.id];if(i)n?n.indexOf(t)<0&&n.push(t):this._data[e.id]=[t];else if(n){const o=n.indexOf(t);o>=0&&dCe(n,o),n.length===0&&delete this._data[e.id]}this._persist()}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(Kw._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};PI._key="menu.hiddenCommands";PI=aV([s0(0,mc)],PI);let Z7=class ub{constructor(e,t,i,n,o,r){this._id=e,this._hiddenStates=t,this._options=i,this._commandService=n,this._contextKeyService=o,this._menuService=r,this._disposables=new Ae,this._menuGroups=[],this._contextKeys=new Set,this._build();const a=new Xi(()=>{this._build(),this._onDidChange.fire(this)},i.eventDebounceDelay);this._disposables.add(a),this._disposables.add(Dl.onDidChangeMenu(d=>{d.has(e)&&a.schedule()}));const l=this._disposables.add(new Ae),c=()=>{const d=new Xi(()=>this._onDidChange.fire(this),i.eventDebounceDelay);l.add(d),l.add(o.onDidChangeContext(f=>{f.affectsSome(this._contextKeys)&&d.schedule()})),l.add(t.onDidChange(()=>{d.schedule()}))};this._onDidChange=new J({onFirstListenerAdd:c,onLastListenerRemove:l.clear.bind(l)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=Dl.getMenuItems(this._id);let t;e.sort(ub._compareMenuItems);for(const i of e){const n=i.group||"";(!t||t[0]!==n)&&(t=[n,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeys(i)}}_collectContextKeys(e){if(ub._fillInKbExprKeys(e.when,this._contextKeys),wb(e)){if(e.command.precondition&&ub._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;ub._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&Dl.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(const i of this._menuGroups){const[n,o]=i,r=[],a=[];for(const l of o)if(this._contextKeyService.contextMatchesRules(l.when)){let c;if(wb(l)){const f=iOe(this._id,l.command,this._hiddenStates);c=new Pg(l.command,l.alt,e,f,this._contextKeyService,this._commandService)}else c=new IB(l,this._menuService,this._contextKeyService,e),c.actions.length===0&&(c.dispose(),c=void 0);c&&a.push(c)}a.length>0&&t.push([n,a]),r.length>0}return t}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}static _compareMenuItems(e,t){const i=e.group,n=t.group;if(i!==n){if(i){if(!n)return-1}else return 1;if(i==="navigation")return-1;if(n==="navigation")return 1;const a=i.localeCompare(n);if(a!==0)return a}const o=e.order||0,r=t.order||0;return o<r?-1:o>r?1:ub._compareTitles(wb(e)?e.command.title:e.title,wb(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,n=typeof t=="string"?t:t.original;return i.localeCompare(n)}};Z7=aV([s0(3,fs),s0(4,jt),s0(5,L_)],Z7);function iOe(s,e,t){const i=`${s.id}/${e.id}`,n=typeof e.title=="string"?e.title:e.title.value,o=fq({id:i,label:b("hide.label","Hide '{0}'",n),run(){t.updateHidden(s,e.id,!0)}}),r=fq({id:i,label:n,get checked(){return!t.isHidden(s,e.id)},run(){const a=!t.isHidden(s,e.id);t.updateHidden(s,e.id,a)}});return{hide:o,toggle:r,get isHidden(){return!r.checked}}}var nOe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},RY=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},Gv=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let Q7=class extends ge{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],(Gh||cB)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){const e=()=>{const t=new mB;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(i=>Gv(this,void 0,void 0,function*(){(!(i instanceof Error)||i.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(i)}))};this.layoutService.hasContainer&&(this._register(Le(this.layoutService.container,"click",e)),this._register(Le(this.layoutService.container,"keydown",e)))}writeText(e,t){return Gv(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return yield navigator.clipboard.writeText(e)}catch(o){console.error(o)}const i=document.activeElement,n=document.body.appendChild(Pe("textarea",{"aria-hidden":!0}));n.style.height="1px",n.style.width="1px",n.style.position="absolute",n.value=e,n.focus(),n.select(),document.execCommand("copy"),i instanceof HTMLElement&&i.focus(),document.body.removeChild(n)})}readText(e){return Gv(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return Gv(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return Gv(this,void 0,void 0,function*(){this.findText=e})}readResources(){return Gv(this,void 0,void 0,function*(){return this.resources})}};Q7=nOe([RY(0,uC),RY(1,fc)],Q7);var sOe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},oOe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const yy="data-keybinding-context";class lV{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return Object.assign({},this._value)}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}}class M0 extends lV{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}M0.INSTANCE=new M0;class DS extends lV{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=Jb.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(n=>{if(n.source===7){const o=Array.from(fi.map(this._values,([r])=>r));this._values.clear(),i.fire(new MY(o))}else{const o=[];for(const r of n.affectedKeys){const a=`config.${r}`,l=this._values.findSuperstr(a);l!==void 0&&(o.push(...fi.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(o.push(a),this._values.delete(a))}i.fire(new MY(o))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(DS._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(DS._keyPrefix.length),i=this._configurationService.getValue(t);let n;switch(typeof i){case"number":case"boolean":case"string":n=i;break;default:Array.isArray(i)?n=JSON.stringify(i):n=i}return this._values.set(e,n),n}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}DS._keyPrefix="config.";class rOe{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class AY{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class MY{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class aOe{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function lOe(s,e){return s.allKeysContainedIn(new Set(Object.keys(e)))}class Wie{constructor(e){this._onDidChangeContext=new yT({merge:t=>new aOe(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new rOe(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new cOe(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);!i||i.setValue(e,t)&&this._onDidChangeContext.fire(new AY(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new AY(e))}getContext(e){return this._isDisposed?M0.INSTANCE:this.getContextValuesContainer(uOe(e))}}let X7=class extends Wie{constructor(e){super(0),this._contexts=new Map,this._toDispose=new Ae,this._lastContextId=0;const t=new DS(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?M0.INSTANCE:this._contexts.get(e)||M0.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new lV(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};X7=sOe([oOe(0,Ai)],X7);class cOe extends Wie{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new tr,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(yy)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(yy,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;lOe(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(yy),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?M0.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function uOe(s){for(;s;){if(s.hasAttribute(yy)){const e=s.getAttribute(yy);return e?parseInt(e,10):NaN}s=s.parentElement}return 0}function dOe(s,e,t){s.get(jt).createKey(String(e),hOe(t))}function hOe(s){return AX(s,e=>{if(typeof e=="object"&&e.$mid===1)return yt.revive(e).toString();if(e instanceof yt)return e.toString()})}Li.registerCommand(DLe,dOe);Li.registerCommand({id:"getContextKeyInfo",handler(){return[...st.all()].sort((s,e)=>s.key.localeCompare(e.key))},description:{description:b("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Li.registerCommand("_generateContextKeyInfo",function(){const s=[],e=new Set;for(const t of st.all())e.has(t.key)||(e.add(t.key),s.push(t));s.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(s,void 0,2))});class fOe{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}}class gOe{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(this._hashFn(t),n),n.incoming.set(this._hashFn(e),i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new fOe(e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}, (incoming)[${[...i.incoming.keys()].join(", ")}], (outgoing)[${[...i.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(const[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const o=this._findCycle(n,t);if(o)return o;t.delete(i)}}}class OY extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class cV{constructor(e=new oR,t=!1,i){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=i,this._services.set(Zt,this)}createChild(e){return new cV(e,this._strict,this)}invokeFunction(e,...t){const i=ic.traceInvocation(e);let n=!1;try{return e({get:r=>{if(n)throw c1e("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(r,i);if(!a)throw new Error(`[invokeFunction] unknown service '${r}'`);return a}},...t)}finally{n=!0,i.stop()}}createInstance(e,...t){let i,n;return e instanceof qu?(i=ic.traceCreation(e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=ic.traceCreation(e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){const n=Gc.getServiceDependencies(e).sort((a,l)=>a.index-l.index),o=[];for(const a of n){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(l)}const r=n.length>0?n[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const a=r-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,r)}return new e(...t,...o)}_setServiceInstance(e,t){if(this._services.get(e)instanceof qu)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){const i=this._getServiceInstanceOrDescriptor(e);return i instanceof qu?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){const n=new gOe(a=>a.id.toString());let o=0;const r=[{id:e,desc:t,_trace:i}];for(;r.length;){const a=r.pop();if(n.lookupOrInsertNode(a),o++>1e3)throw new OY(n);for(const l of Gc.getServiceDependencies(a.desc.ctor)){const c=this._getServiceInstanceOrDescriptor(l.id);if(c||this._throwIfStrict(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`,!0),c instanceof qu){const d={id:l.id,desc:c,_trace:a._trace.branch(l.id,!0)};n.insertEdge(a,d),r.push(d)}}}for(;;){const a=n.roots();if(a.length===0){if(!n.isEmpty())throw new OY(n);break}for(const{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof qu){const d=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,d)}n.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,o){if(this._services.get(e)instanceof qu)return this._createServiceInstance(t,i,n,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,o);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],i,n){if(i){const o=new vg(()=>this._createInstance(e,t,n));return new Proxy(Object.create(null),{get(r,a){if(a in r)return r[a];const l=o.value;let c=l[a];return typeof c!="function"||(c=c.bind(l),r[a]=c),c},set(r,a,l){return o.value[a]=l,!0}})}else return this._createInstance(e,t,n)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}class ic{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return ic._None}static traceCreation(e){return ic._None}branch(e,t){const i=new ic(2,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;ic._totals+=e;let t=!1;function i(o,r){const a=[],l=new Array(o+1).join("	");for(const[c,d,f]of r._dep)if(d&&f){t=!0,a.push(`${l}CREATES -> ${c}`);const g=i(o+1,f);g&&a.push(g)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const n=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${ic._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(n.join(`
`))}}ic._None=new class extends ic{constructor(){super(-1,null)}stop(){}branch(){return this}};ic._totals=0;class pOe{constructor(){this._byResource=new er,this._byOwner=new Map}set(e,t,i){let n=this._byResource.get(e);n||(n=new Map,this._byResource.set(e,n)),n.set(t,i);let o=this._byOwner.get(t);o||(o=new er,this._byOwner.set(t,o)),o.set(e,i)}get(e,t){const i=this._byResource.get(e);return i==null?void 0:i.get(t)}delete(e,t){let i=!1,n=!1;const o=this._byResource.get(e);o&&(i=o.delete(t));const r=this._byOwner.get(t);if(r&&(n=r.delete(e)),i!==n)throw new Error("illegal state");return i&&n}values(e){var t,i,n,o;return typeof e=="string"?(i=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&i!==void 0?i:fi.empty():yt.isUri(e)?(o=(n=this._byResource.get(e))===null||n===void 0?void 0:n.values())!==null&&o!==void 0?o:fi.empty():fi.map(fi.concat(...this._byOwner.values()),r=>r[1])}}class mOe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new er,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const n=this._resourceStats(t);this._add(n),this._data.set(t,n)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===Xt.inMemory||e.scheme===Xt.walkThrough||e.scheme===Xt.walkThroughSnippet||e.scheme===Xt.vscodeSourceControl)return t;for(const{severity:i}of this._service.read({resource:e}))i===Bn.Error?t.errors+=1:i===Bn.Warning?t.warnings+=1:i===Bn.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Qf{constructor(){this._onMarkerChanged=new b1e({delay:0,merge:Qf._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new pOe,this._stats=new mOe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(xX(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const n=[];for(const o of i){const r=Qf._toMarker(e,t,o);r&&n.push(r)}this._data.set(t,e,n),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:n,severity:o,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:f,relatedInformation:g,tags:m}=i;if(!!r)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,f=f>0?f:c,{resource:t,owner:e,code:n,severity:o,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:f,relatedInformation:g,tags:m}}changeAll(e,t){const i=[],n=this._data.values(e);if(n)for(const o of n){const r=fi.first(o);r&&(i.push(r.resource),this._data.delete(r.resource,e))}if(Po(t)){const o=new er;for(const{resource:r,marker:a}of t){const l=Qf._toMarker(e,r,a);if(!l)continue;const c=o.get(r);c?c.push(l):(o.set(r,[l]),i.push(r))}for(const[r,a]of o)this._data.set(r,e,a)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:n,take:o}=e;if((!o||o<0)&&(o=-1),t&&i){const r=this._data.get(i,t);if(r){const a=[];for(const l of r)if(Qf._accept(l,n)){const c=a.push(l);if(o>0&&c===o)break}return a}else return[]}else if(!t&&!i){const r=[];for(const a of this._data.values())for(const l of a)if(Qf._accept(l,n)){const c=r.push(l);if(o>0&&c===o)return r}return r}else{const r=this._data.values(i!=null?i:t),a=[];for(const l of r)for(const c of l)if(Qf._accept(c,n)){const d=a.push(c);if(o>0&&d===o)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new er;for(const i of e)for(const n of i)t.set(n,!0);return Array.from(t.keys())}}function Hie(s,e,t,i,n,o){if(Array.isArray(s)){let r=0;for(const a of s){const l=Hie(a,e,t,i,n,o);if(l===10)return l;l>r&&(r=l)}return r}else{if(typeof s=="string")return i?s==="*"?5:s===t?10:0:0;if(s){const{language:r,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=s;if(!i&&!c)return 0;d&&n&&(e=n);let f=0;if(l)if(l===e.scheme)f=10;else if(l==="*")f=5;else return 0;if(r)if(r===t)f=10;else if(r==="*")f=Math.max(f,5);else return 0;if(d)if(d===o)f=10;else if(d==="*"&&o!==void 0)f=Math.max(f,5);else return 0;if(a){let g;if(typeof a=="string"?g=a:g=Object.assign(Object.assign({},a),{base:UX(a.base)}),g===e.fsPath||a2e(g,e.fsPath))f=10;else return 0}return f}else return 0}}function zie(s){return typeof s=="string"?!1:Array.isArray(s)?s.every(zie):!!s.exclusive}class PY{constructor(e,t,i,n){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=n}equals(e){var t,i;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)===null||t===void 0?void 0:t.toString())===((i=e.notebookUri)===null||i===void 0?void 0:i.toString())}}class $n{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new J,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),ni(()=>{if(i){const n=this._entries.indexOf(i);n>=0&&(this._entries.splice(n,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,i=>t.push(i.provider)),t}orderedGroups(e){const t=[];let i,n;return this._orderedForEach(e,o=>{i&&n===o._score?i.push(o.provider):(n=o._score,i=[o.provider],t.push(i))}),t}_orderedForEach(e,t){this._updateScores(e);for(const i of this._entries)i._score>0&&t(i)}_updateScores(e){var t,i;const n=(t=this._notebookInfoResolver)===null||t===void 0?void 0:t.call(this,e.uri),o=n?new PY(e.uri,e.getLanguageId(),n.uri,n.type):new PY(e.uri,e.getLanguageId(),void 0,void 0);if(!(!((i=this._lastCandidate)===null||i===void 0)&&i.equals(o))){this._lastCandidate=o;for(const r of this._entries)if(r._score=Hie(r.selector,o.uri,o.languageId,wwe(e),o.notebookUri,o.notebookType),zie(r.selector)&&r._score>0){for(const a of this._entries)a._score=0;r._score=1e3;break}this._entries.sort($n._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}class _Oe{constructor(){this.referenceProvider=new $n(this._score.bind(this)),this.renameProvider=new $n(this._score.bind(this)),this.codeActionProvider=new $n(this._score.bind(this)),this.definitionProvider=new $n(this._score.bind(this)),this.typeDefinitionProvider=new $n(this._score.bind(this)),this.declarationProvider=new $n(this._score.bind(this)),this.implementationProvider=new $n(this._score.bind(this)),this.documentSymbolProvider=new $n(this._score.bind(this)),this.inlayHintsProvider=new $n(this._score.bind(this)),this.colorProvider=new $n(this._score.bind(this)),this.codeLensProvider=new $n(this._score.bind(this)),this.documentFormattingEditProvider=new $n(this._score.bind(this)),this.documentRangeFormattingEditProvider=new $n(this._score.bind(this)),this.onTypeFormattingEditProvider=new $n(this._score.bind(this)),this.signatureHelpProvider=new $n(this._score.bind(this)),this.hoverProvider=new $n(this._score.bind(this)),this.documentHighlightProvider=new $n(this._score.bind(this)),this.selectionRangeProvider=new $n(this._score.bind(this)),this.foldingRangeProvider=new $n(this._score.bind(this)),this.linkProvider=new $n(this._score.bind(this)),this.inlineCompletionsProvider=new $n(this._score.bind(this)),this.completionProvider=new $n(this._score.bind(this)),this.linkedEditingRangeProvider=new $n(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new $n(this._score.bind(this)),this.documentSemanticTokensProvider=new $n(this._score.bind(this)),this.documentOnDropEditProvider=new $n(this._score.bind(this)),this.documentPasteEditProvider=new $n(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)===null||t===void 0?void 0:t.call(this,e)}}ki(ct,_Oe,!0);class vOe extends ha{constructor(e={}){const t=Wn.as(tf.Configuration).getConfigurationProperties(),i=Object.keys(t),n=Object.create(null),o=[];for(const r in t){const a=e[r],l=a!==void 0?a:t[r].default;fB(n,r,l,c=>console.error(`Conflict in default settings: ${c}`))}for(const r of Object.keys(n))Vy.test(r)&&o.push({identifiers:mJ(r),keys:Object.keys(n[r]),contents:hJ(n[r],a=>console.error(`Conflict in default settings file: ${a}`))});super(n,i,o)}}var sp=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Jo=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},Uie=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class bOe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new J}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let J7=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new g1e(new bOe(t))):Promise.reject(new Error("Model not found"))}};J7=sp([Jo(0,Hn)],J7);class LR{show(){return LR.NULL_PROGRESS_RUNNER}showWhile(e,t){return Uie(this,void 0,void 0,function*(){yield e})}}LR.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class COe{withProgress(e,t,i){return t({report:()=>{}})}}class wOe{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,i,n){return Promise.resolve({choice:0})}}class xR{info(e){return this.notify({severity:Pn.Info,message:e})}warn(e){return this.notify({severity:Pn.Warning,message:e})}error(e){return this.notify({severity:Pn.Error,message:e})}notify(e){switch(e.severity){case Pn.Error:console.error(e.message);break;case Pn.Warning:console.warn(e.message);break;default:console.log(e.message);break}return xR.NO_OP}status(e,t){return ge.None}}xR.NO_OP=new QIe;let e9=class{constructor(e){this._onWillExecuteCommand=new J,this._onDidExecuteCommand=new J,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=Li.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const n=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(n)}catch(n){return Promise.reject(n)}}};e9=sp([Jo(0,Zt)],e9);let O0=class extends WRe{constructor(e,t,i,n,o,r){super(e,t,i,n,o),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=m=>{const _=new Ae;_.add(Le(m,it.KEY_DOWN,C=>{const S=new kn(C);this._dispatch(S,S.target)&&(S.preventDefault(),S.stopPropagation())})),_.add(Le(m,it.KEY_UP,C=>{const S=new kn(C);this._singleModifierDispatch(S,S.target)&&S.preventDefault()})),this._domNodeListeners.push(new yOe(m,_))},l=m=>{for(let _=0;_<this._domNodeListeners.length;_++){const C=this._domNodeListeners[_];C.domNode===m&&(this._domNodeListeners.splice(_,1),C.dispose())}},c=m=>{m.getOption(56)||a(m.getContainerDomNode())},d=m=>{m.getOption(56)||l(m.getContainerDomNode())};this._register(r.onCodeEditorAdd(c)),this._register(r.onCodeEditorRemove(d)),r.listCodeEditors().forEach(c);const f=m=>{a(m.getContainerDomNode())},g=m=>{l(m.getContainerDomNode())};this._register(r.onDiffEditorAdd(f)),this._register(r.onDiffEditorRemove(g)),r.listDiffEditors().forEach(f)}addDynamicKeybinding(e,t,i,n){return nu(Li.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:n}]))}addDynamicKeybindings(e){const t=e.map(i=>{var n,o;const r=x3(i.keybinding,gl);return{keybinding:(n=r==null?void 0:r.parts)!==null&&n!==void 0?n:null,command:(o=i.command)!==null&&o!==void 0?o:null,commandArgs:i.commandArgs,when:i.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),ni(()=>{for(let i=0;i<this._dynamicKeybindings.length;i++)if(this._dynamicKeybindings[i]===t[0]){this._dynamicKeybindings.splice(i,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(ya.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Cy(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let n=0;for(const o of e){const r=o.when||void 0,a=o.keybinding;if(!a)i[n++]=new jG(void 0,o.command,o.commandArgs,r,t,null,!1);else{const l=gS.resolveUserBinding(a,gl);for(const c of l)i[n++]=new jG(c,o.command,o.commandArgs,r,t,null,!1)}}return i}resolveKeyboardEvent(e){const t=new Wm(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new gS(t,gl)}};O0=sp([Jo(0,jt),Jo(1,fs),Jo(2,gu),Jo(3,gs),Jo(4,fc),Jo(5,Vi)],O0);class yOe extends ge{constructor(e,t){super(),this.domNode=e,this._register(t)}}function FY(s){return s&&typeof s=="object"&&(!s.overrideIdentifier||typeof s.overrideIdentifier=="string")&&(!s.resource||s.resource instanceof yt)}class $ie{constructor(){this._onDidChangeConfiguration=new J,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new cR(new vOe,new ha,new ha,new ha)}getValue(e,t){const i=typeof e=="string"?e:void 0,n=FY(e)?e:FY(t)?t:{};return this._configuration.getValue(i,n,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const n of e){const[o,r]=n;this.getValue(o)!==r&&(this._configuration.updateValue(o,r),i.push(o))}if(i.length>0){const n=new BRe({keys:i,overrides:[]},t,this._configuration);n.source=8,n.sourceConfig=null,this._onDidChangeConfiguration.fire(n)}return Promise.resolve()}updateValue(e,t,i,n){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}}let t9=class{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new J,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(i,n)=>t.affectsConfiguration(n)})})}getValue(e,t,i){const o=(se.isIPosition(t)?t:null)?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0;return typeof o>"u"?this.configurationService.getValue():this.configurationService.getValue(o)}};t9=sp([Jo(0,Ai)],t9);let i9=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:Wo||mi?`
`:`\r
`}};i9=sp([Jo(0,Ai)],i9);class SOe{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class kS{constructor(){const e=yt.from({scheme:kS.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new KRe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===kS.SCHEME?this.workspace.folders[0]:null}}kS.SCHEME="inmemory";function FI(s,e,t){if(!e||!(s instanceof $ie))return;const i=[];Object.keys(e).forEach(n=>{ORe(n)&&i.push([`editor.${n}`,e[n]]),t&&PRe(n)&&i.push([`diffEditor.${n}`,e[n]])}),i.length>0&&s.updateValues(i)}let n9=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return Uie(this,void 0,void 0,function*(){const i=new Map;for(const r of e){if(!(r instanceof km))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(r.resource);if(!a)throw new Error("bad edit - model not found");if(typeof r.versionId=="number"&&a.getVersionId()!==r.versionId)throw new Error("bad state - model changed in the meantime");let l=i.get(a);l||(l=[],i.set(a,l)),l.push(Nn.replaceMove(M.lift(r.textEdit.range),r.textEdit.text))}let n=0,o=0;for(const[r,a]of i)r.pushStackElement(),r.pushEditOperations([],a,()=>[]),r.pushStackElement(),o+=1,n+=a.length;return{ariaSummary:bl(m7.bulkEditServiceSummary,n,o)}})}};n9=sp([Jo(0,Hn)],n9);class LOe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return Rl(e)}}let s9=class extends _7{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const n=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();n&&(t=n.getContainerDomNode())}return super.showContextView(e,t,i)}};s9=sp([Jo(0,uC),Jo(1,Vi)],s9);class xOe{constructor(){this._neverEmitter=new J,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class DOe extends vS{constructor(){super()}}class kOe extends Zye{constructor(){super(new Yye)}}let o9=class extends C7{constructor(e,t,i,n,o){super(e,t,i,n,o),this.configure({blockMouse:!1})}};o9=sp([Jo(0,gu),Jo(1,gs),Jo(2,E_),Jo(3,xs),Jo(4,cn)],o9);ki(Ai,$ie);ki(wB,t9);ki(DJ,i9);ki(pS,kS);ki(I0,LOe);ki(gu,SOe);ki(wL,wOe);ki(gs,xR);ki(Td,Qf);ki(Vn,DOe);ki(Xa,JMe);ki(fc,kOe);ki(Hn,TI);ki(EB,x7);ki(jt,X7);ki(Mte,COe);ki(ip,LR);ki(mc,tOe);ki(Ml,S3);ki(yL,n9);ki(Gte,xOe);ki(Yr,J7);ki(nf,G7);ki(Fl,B7);ki(fs,e9);ki(xs,O0);ki(rf,K7);ki(E_,s9);ki(Ol,L7);ki(of,Q7);ki(sf,o9);ki(L_,Y7);var Tt;(function(s){const e=new oR;for(const[r,a]of kK())e.set(r,a);const t=new cV(e,!0);e.set(Zt,t);function i(r){const a=e.get(r);if(!a)throw new Error("Missing service "+r);return a instanceof qu?t.invokeFunction(l=>l.get(r)):a}s.get=i;let n=!1;function o(r){if(n)return t;n=!0;for(const[a,l]of kK())e.get(a)||e.set(a,l);for(const a in r)if(r.hasOwnProperty(a)){const l=bi(a);e.get(l)instanceof qu&&e.set(l,r[a])}return t}s.initialize=o})(Tt||(Tt={}));var uV=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},xn=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let EOe=0,BY=!1;function TOe(s){if(!s){if(BY)return;BY=!0}SLe(s||document.body)}let BI=class extends k0{constructor(e,t,i,n,o,r,a,l,c,d,f,g){const m=Object.assign({},t);m.ariaLabel=m.ariaLabel||yI.editorViewAccessibleLabel,m.ariaLabel=m.ariaLabel+";"+yI.accessibilityHelpMessage,super(e,m,{},i,n,o,r,l,c,d,f,g),a instanceof O0?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,TOe(m.ariaContainerElement)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const n="DYNAMIC_"+ ++EOe,o=Je.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(n,e,t,o),n}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),ge.None;const t=e.id,i=e.label,n=Je.and(Je.equals("editorId",this.getId()),Je.deserialize(e.precondition)),o=e.keybindings,r=Je.and(n,Je.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(m,..._)=>Promise.resolve(e.run(this,..._)),d=new Ae,f=this.getId()+":"+t;if(d.add(Li.registerCommand(f,c)),a){const m={command:{id:f,title:i},when:n,group:a,order:l};d.add(Dl.appendMenuItem(G.EditorContext,m))}if(Array.isArray(o))for(const m of o)d.add(this._standaloneKeybindingService.addDynamicKeybinding(f,m,c,r));const g=new qee(f,i,i,n,c,this._contextKeyService);return this._actions[t]=g,d.add(ni(()=>{delete this._actions[t]})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof mI)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};BI=uV([xn(2,Zt),xn(3,Vi),xn(4,fs),xn(5,jt),xn(6,xs),xn(7,cn),xn(8,gs),xn(9,nf),xn(10,os),xn(11,ct)],BI);let r9=class extends BI{constructor(e,t,i,n,o,r,a,l,c,d,f,g,m,_,C){const S=Object.assign({},t);FI(d,S,!1);const x=l.registerEditorContainer(e);typeof S.theme=="string"&&l.setTheme(S.theme),typeof S.autoDetectHighContrast<"u"&&l.setAutoDetectHighContrast(Boolean(S.autoDetectHighContrast));const L=S.model;delete S.model,super(e,S,i,n,o,r,a,l,c,f,_,C),this._configurationService=d,this._standaloneThemeService=l,this._register(x);let k;if(typeof L>"u"){const T=m.getLanguageIdByMimeType(S.language)||S.language||xl;k=jie(g,m,S.value||"",T,void 0),this._ownsModel=!0}else k=L,this._ownsModel=!1;if(this._attachModel(k),k){const T={oldModelUrl:null,newModelUrl:k.uri};this._onDidChangeModel.fire(T)}}dispose(){super.dispose()}updateOptions(e){FI(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};r9=uV([xn(2,Zt),xn(3,Vi),xn(4,fs),xn(5,jt),xn(6,xs),xn(7,Xa),xn(8,gs),xn(9,Ai),xn(10,nf),xn(11,Hn),xn(12,Vn),xn(13,os),xn(14,ct)],r9);let a9=class extends Hg{constructor(e,t,i,n,o,r,a,l,c,d,f,g){const m=Object.assign({},t);FI(c,m,!0);const _=a.registerEditorContainer(e);typeof m.theme=="string"&&a.setTheme(m.theme),typeof m.autoDetectHighContrast<"u"&&a.setAutoDetectHighContrast(Boolean(m.autoDetectHighContrast)),super(e,m,{},g,o,n,i,r,a,l,d,f),this._configurationService=c,this._standaloneThemeService=a,this._register(_)}dispose(){super.dispose()}updateOptions(e){FI(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(BI,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};a9=uV([xn(2,Zt),xn(3,jt),xn(4,Ml),xn(5,Vi),xn(6,Xa),xn(7,gs),xn(8,Ai),xn(9,sf),xn(10,ip),xn(11,of)],a9);function jie(s,e,t,i,n){if(t=t||"",!i){const o=t.indexOf(`
`);let r=t;return o!==-1&&(r=t.substring(0,o)),VY(s,t,e.createByFilepathOrFirstLine(n||null,r),n)}return VY(s,t,e.createById(i),n)}function VY(s,e,t,i){return s.createModel(e,t,i)}function IOe(s,e,t){return Tt.initialize(t||{}).createInstance(r9,s,e)}function NOe(s){return Tt.get(Vi).onCodeEditorAdd(t=>{s(t)})}function ROe(s){return Tt.get(Vi).onDiffEditorAdd(t=>{s(t)})}function AOe(){return Tt.get(Vi).listCodeEditors()}function MOe(){return Tt.get(Vi).listDiffEditors()}function OOe(s,e,t){return Tt.initialize(t||{}).createInstance(a9,s,e)}function POe(s,e){return new _we(s,e)}function FOe(s){if(typeof s.id!="string"||typeof s.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return Li.registerCommand(s.id,s.run)}function BOe(s){if(typeof s.id!="string"||typeof s.label!="string"||typeof s.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=Je.deserialize(s.precondition),t=(n,...o)=>Fs.runEditorCommand(n,o,e,(r,a,l)=>Promise.resolve(s.run(a,...l))),i=new Ae;if(i.add(Li.registerCommand(s.id,t)),s.contextMenuGroupId){const n={command:{id:s.id,title:s.label},when:e,group:s.contextMenuGroupId,order:s.contextMenuOrder||0};i.add(Dl.appendMenuItem(G.EditorContext,n))}if(Array.isArray(s.keybindings)){const n=Tt.get(xs);if(!(n instanceof O0))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const o=Je.and(e,Je.deserialize(s.keybindingContext));i.add(n.addDynamicKeybindings(s.keybindings.map(r=>({keybinding:r,command:s.id,when:o}))))}}return i}function VOe(s){return Kie([s])}function Kie(s){const e=Tt.get(xs);return e instanceof O0?e.addDynamicKeybindings(s.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:Je.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),ge.None)}function WOe(s,e,t){const i=Tt.get(Vn),n=i.getLanguageIdByMimeType(e)||e;return jie(Tt.get(Hn),i,s,n,t)}function HOe(s,e){const t=Tt.get(Vn);Tt.get(Hn).setMode(s,t.createById(e))}function zOe(s,e,t){s&&Tt.get(Td).changeOne(e,s.uri,t)}function UOe(s){Tt.get(Td).changeAll(s,[])}function $Oe(s){return Tt.get(Td).read(s)}function jOe(s){return Tt.get(Td).onMarkerChanged(s)}function KOe(s){return Tt.get(Hn).getModel(s)}function qOe(){return Tt.get(Hn).getModels()}function GOe(s){return Tt.get(Hn).onModelAdded(s)}function YOe(s){return Tt.get(Hn).onModelRemoved(s)}function ZOe(s){return Tt.get(Hn).onModelLanguageChanged(t=>{s({model:t.model,oldLanguage:t.oldLanguageId})})}function QOe(s){return tSe(Tt.get(Hn),Tt.get(os),s)}function XOe(s,e){const t=Tt.get(Vn),i=Tt.get(Xa);return i.registerEditorContainer(s),xB.colorizeElement(i,t,s,e)}function JOe(s,e,t){const i=Tt.get(Vn);return Tt.get(Xa).registerEditorContainer(document.body),xB.colorize(i,s,e,t)}function ePe(s,e,t=4){return Tt.get(Xa).registerEditorContainer(document.body),xB.colorizeModelLine(s,e,t)}function tPe(s){const e=Fn.get(s);return e||{getInitialState:()=>p0,tokenize:(t,i,n)=>gB(s,n)}}function iPe(s,e){Fn.getOrCreate(e);const t=tPe(e),i=md(s),n=[];let o=t.getInitialState();for(let r=0,a=i.length;r<a;r++){const l=i[r],c=t.tokenize(l,!0,o);n[r]=c.tokens,o=c.endState}return n}function nPe(s,e){Tt.get(Xa).defineTheme(s,e)}function sPe(s){Tt.get(Xa).setTheme(s)}function oPe(){h3.clearAllFontInfos()}function rPe(s,e){return Li.registerCommand({id:s,handler:e})}function aPe(){return{create:IOe,getEditors:AOe,getDiffEditors:MOe,onDidCreateEditor:NOe,onDidCreateDiffEditor:ROe,createDiffEditor:OOe,createDiffNavigator:POe,addCommand:FOe,addEditorAction:BOe,addKeybindingRule:VOe,addKeybindingRules:Kie,createModel:WOe,setModelLanguage:HOe,setModelMarkers:zOe,getModelMarkers:$Oe,removeAllMarkers:UOe,onDidChangeMarkers:jOe,getModels:qOe,getModel:KOe,onDidCreateModel:GOe,onWillDisposeModel:YOe,onDidChangeModelLanguage:ZOe,createWebWorker:QOe,colorizeElement:XOe,colorize:JOe,colorizeModelLine:ePe,tokenize:iPe,defineTheme:nPe,setTheme:sPe,remeasureFonts:oPe,registerCommand:rPe,AccessibilitySupport:x5,ContentWidgetPositionPreference:I5,CursorChangeReason:N5,DefaultEndOfLine:R5,EditorAutoIndentStrategy:M5,EditorOption:O5,EndOfLinePreference:P5,EndOfLineSequence:F5,MinimapPosition:j5,MouseTargetType:K5,OverlayWidgetPositionPreference:q5,OverviewRulerLane:G5,RenderLineNumbersType:Z5,RenderMinimap:Q5,ScrollbarVisibility:J5,ScrollType:X5,TextEditorCursorBlinkingStyle:s3,TextEditorCursorStyle:o3,TrackedRangeStickiness:r3,WrappingIndent:a3,InjectedTextCursorStops:V5,PositionAffinity:Y5,ConfigurationChangedEvent:MX,BareFontInfo:ym,FontInfo:d3,TextModelResolvedOptions:ME,FindMatch:By,ApplyUpdateResult:iy,EditorType:lL,EditorOptions:fu}}function lPe(s,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!s(t))return!1;return!0}function iE(s,e){return typeof s=="boolean"?s:e}function WY(s,e){return typeof s=="string"?s:e}function cPe(s){const e={};for(const t of s)e[t]=!0;return e}function HY(s,e=!1){e&&(s=s.map(function(i){return i.toLowerCase()}));const t=cPe(s);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function l9(s,e){e=e.replace(/@@/g,"");let t=0,i;do i=!1,e=e.replace(/@(\w+)/g,function(o,r){i=!0;let a="";if(typeof s[r]=="string")a=s[r];else if(s[r]&&s[r]instanceof RegExp)a=s[r].source;else throw s[r]===void 0?mn(s,"language definition does not contain attribute '"+r+"', used at: "+e):mn(s,"attribute reference '"+r+"' must be a string, used at: "+e);return ab(a)?"":"(?:"+a+")"}),t++;while(i&&t<5);e=e.replace(/\x01/g,"@");const n=(s.ignoreCase?"i":"")+(s.unicode?"u":"");return new RegExp(e,n)}function uPe(s,e,t,i){if(i<0)return s;if(i<e.length)return e[i];if(i>=100){i=i-100;const n=t.split(".");if(n.unshift(t),i<n.length)return n[i]}return null}function dPe(s,e,t,i){let n=-1,o=t,r=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(n=parseInt(r[3]),r[2]&&(n=n+100)),o=r[4]);let a="~",l=o;!o||o.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(r=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(a=r[1],l=r[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const d=HY(l.split("|"),s.ignoreCase);c=function(f){return a==="~"?d(f):!d(f)}}else if(a==="@"||a==="!@"){const d=s[l];if(!d)throw mn(s,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!lPe(function(g){return typeof g=="string"},d))throw mn(s,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const f=HY(d,s.ignoreCase);c=function(g){return a==="@"?f(g):!f(g)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const d=l9(s,"^"+l+"$");c=function(f){return a==="~"?d.test(f):!d.test(f)}}else c=function(d,f,g,m){return l9(s,"^"+Jf(s,l,f,g,m)+"$").test(d)};else if(l.indexOf("$")<0){const d=Cg(s,l);c=function(f){return a==="=="?f===d:f!==d}}else{const d=Cg(s,l);c=function(f,g,m,_,C){const S=Jf(s,d,g,m,_);return a==="=="?f===S:f!==S}}return n===-1?{name:t,value:i,test:function(d,f,g,m){return c(d,d,f,g,m)}}:{name:t,value:i,test:function(d,f,g,m){const _=uPe(d,f,g,n);return c(_||"",d,f,g,m)}}}function c9(s,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw mn(s,"a 'token' attribute must be of type string, in rule: "+e);{const i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw mn(s,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw mn(s,"the next state must be a string value in rule: "+e);{let n=t.next;if(!/^(@pop|@push|@popall)$/.test(n)&&(n[0]==="@"&&(n=n.substr(1)),n.indexOf("$")<0&&!CSe(s,Jf(s,n,"",[],""))))throw mn(s,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=n}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,s.usesEmbedded=!0),i}}else if(Array.isArray(t)){const i=[];for(let n=0,o=t.length;n<o;n++)i[n]=c9(s,e,t[n]);return{group:i}}else if(t.cases){const i=[];for(const o in t.cases)if(t.cases.hasOwnProperty(o)){const r=c9(s,e,t.cases[o]);o==="@default"||o==="@"||o===""?i.push({test:void 0,value:r,name:o}):o==="@eos"?i.push({test:function(a,l,c,d){return d},value:r,name:o}):i.push(dPe(s,e,o,r))}const n=s.defaultToken;return{test:function(o,r,a,l){for(const c of i)if(!c.test||c.test(o,r,a,l))return c.value;return n}}}else throw mn(s,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class hPe{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw mn(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=l9(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")")}setAction(e,t){this.action=c9(e,this.name,t)}}function qie(s,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={};t.languageId=s,t.includeLF=iE(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=iE(e.ignoreCase,!1),t.unicode=iE(e.unicode,!1),t.tokenPostfix=WY(e.tokenPostfix,"."+t.languageId),t.defaultToken=WY(e.defaultToken,"source"),t.usesEmbedded=!1;const i=e;i.languageId=s,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function n(r,a,l){for(const c of l){let d=c.include;if(d){if(typeof d!="string")throw mn(t,"an 'include' attribute must be a string at: "+r);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw mn(t,"include target '"+d+"' is not defined at: "+r);n(r+"."+d,a,e.tokenizer[d])}else{const f=new hPe(r);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(f.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")f.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const g=c[1];g.next=c[2],f.setAction(i,g)}else throw mn(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else f.setAction(i,c[1]);else{if(!c.regex)throw mn(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r);c.name&&typeof c.name=="string"&&(f.name=c.name),c.matchOnlyAtStart&&(f.matchOnlyAtLineStart=iE(c.matchOnlyAtLineStart,!1)),f.setRegex(i,c.regex),f.setAction(i,c.action)}a.push(f)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw mn(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const r in e.tokenizer)if(e.tokenizer.hasOwnProperty(r)){t.start||(t.start=r);const a=e.tokenizer[r];t.tokenizer[r]=new Array,n("tokenizer."+r,t.tokenizer[r],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw mn(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const o=[];for(const r of e.brackets){let a=r;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw mn(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")o.push({token:a.token+t.tokenPostfix,open:Cg(t,a.open),close:Cg(t,a.close)});else throw mn(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=o,t.noThrow=!0,t}var fPe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};function gPe(s){g0.registerLanguage(s)}function pPe(){let s=[];return s=s.concat(g0.getLanguages()),s}function mPe(s){return Tt.get(Vn).languageIdCodec.encodeLanguageId(s)}function _Pe(s,e){const i=Tt.get(Vn).onDidEncounterLanguage(n=>{n===s&&(i.dispose(),e())});return i}function vPe(s,e){if(!Tt.get(Vn).isRegisteredLanguageId(s))throw new Error(`Cannot set configuration for unknown language ${s}`);return Tt.get(os).register(s,e,100)}class bPe{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if(typeof this._actual.tokenize=="function")return ES.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const n=this._actual.tokenizeEncoded(e,i);return new _N(n.tokens,n.endState)}}class ES{constructor(e,t,i,n){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=n}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let n=0;for(let o=0,r=e.length;o<r;o++){const a=e[o];let l=a.startIndex;o===0?l=0:l<n&&(l=n),i[o]=new Ay(l,a.scopes,t),n=l}return i}static adaptTokenize(e,t,i,n){const o=t.tokenize(i,n),r=ES._toClassicTokens(o.tokens,e);let a;return o.endState.equals(n)?a=n:a=o.endState,new X8(r,a)}tokenize(e,t,i){return ES.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),n=this._standaloneThemeService.getColorTheme().tokenTheme,o=[];let r=0,a=0;for(let c=0,d=t.length;c<d;c++){const f=t[c],g=n.match(i,f.scopes);if(r>0&&o[r-1]===g)continue;let m=f.startIndex;c===0?m=0:m<a&&(m=a),o[r++]=m,o[r++]=g,a=m}const l=new Uint32Array(r);for(let c=0;c<r;c++)l[c]=o[c];return l}tokenizeEncoded(e,t,i){const n=this._actual.tokenize(e,i),o=this._toBinaryTokens(this._languageService.languageIdCodec,n.tokens);let r;return n.endState.equals(i)?r=i:r=n.endState,new _N(o,r)}}function CPe(s){return typeof s.getInitialState=="function"}function wPe(s){return"tokenizeEncoded"in s}function Gie(s){return s&&typeof s.then=="function"}function yPe(s){const e=Tt.get(Xa);if(s){const t=[null];for(let i=1,n=s.length;i<n;i++)t[i]=oe.fromHex(s[i]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function Yie(s,e){return wPe(e)?new bPe(s,e):new ES(s,e,Tt.get(Vn),Tt.get(Xa))}function dV(s,e){const t={createTokenizationSupport:()=>fPe(this,void 0,void 0,function*(){const i=yield Promise.resolve(e.create());return i?CPe(i)?Yie(s,i):new $y(Tt.get(Vn),Tt.get(Xa),s,qie(s,i),Tt.get(Ai)):null})};return Fn.registerFactory(s,t)}function SPe(s,e){if(!Tt.get(Vn).isRegisteredLanguageId(s))throw new Error(`Cannot set tokens provider for unknown language ${s}`);return Gie(e)?dV(s,{create:()=>e}):Fn.register(s,Yie(s,e))}function LPe(s,e){const t=i=>new $y(Tt.get(Vn),Tt.get(Xa),s,qie(s,i),Tt.get(Ai));return Gie(e)?dV(s,{create:()=>e}):Fn.register(s,t(e))}function xPe(s,e){return Tt.get(ct).referenceProvider.register(s,e)}function DPe(s,e){return Tt.get(ct).renameProvider.register(s,e)}function kPe(s,e){return Tt.get(ct).signatureHelpProvider.register(s,e)}function EPe(s,e){return Tt.get(ct).hoverProvider.register(s,{provideHover:(i,n,o)=>{const r=i.getWordAtPosition(n);return Promise.resolve(e.provideHover(i,n,o)).then(a=>{if(!!a)return!a.range&&r&&(a.range=new M(n.lineNumber,r.startColumn,n.lineNumber,r.endColumn)),a.range||(a.range=new M(n.lineNumber,n.column,n.lineNumber,n.column)),a})}})}function TPe(s,e){return Tt.get(ct).documentSymbolProvider.register(s,e)}function IPe(s,e){return Tt.get(ct).documentHighlightProvider.register(s,e)}function NPe(s,e){return Tt.get(ct).linkedEditingRangeProvider.register(s,e)}function RPe(s,e){return Tt.get(ct).definitionProvider.register(s,e)}function APe(s,e){return Tt.get(ct).implementationProvider.register(s,e)}function MPe(s,e){return Tt.get(ct).typeDefinitionProvider.register(s,e)}function OPe(s,e){return Tt.get(ct).codeLensProvider.register(s,e)}function PPe(s,e,t){return Tt.get(ct).codeActionProvider.register(s,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(n,o,r,a)=>{const c=Tt.get(Td).read({resource:n.uri}).filter(d=>M.areIntersectingOrTouching(d,o));return e.provideCodeActions(n,o,{markers:c,only:r.only,trigger:r.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function FPe(s,e){return Tt.get(ct).documentFormattingEditProvider.register(s,e)}function BPe(s,e){return Tt.get(ct).documentRangeFormattingEditProvider.register(s,e)}function VPe(s,e){return Tt.get(ct).onTypeFormattingEditProvider.register(s,e)}function WPe(s,e){return Tt.get(ct).linkProvider.register(s,e)}function HPe(s,e){return Tt.get(ct).completionProvider.register(s,e)}function zPe(s,e){return Tt.get(ct).colorProvider.register(s,e)}function UPe(s,e){return Tt.get(ct).foldingRangeProvider.register(s,e)}function $Pe(s,e){return Tt.get(ct).declarationProvider.register(s,e)}function jPe(s,e){return Tt.get(ct).selectionRangeProvider.register(s,e)}function KPe(s,e){return Tt.get(ct).documentSemanticTokensProvider.register(s,e)}function qPe(s,e){return Tt.get(ct).documentRangeSemanticTokensProvider.register(s,e)}function GPe(s,e){return Tt.get(ct).inlineCompletionsProvider.register(s,e)}function YPe(s,e){return Tt.get(ct).inlayHintsProvider.register(s,e)}function ZPe(){return{register:gPe,getLanguages:pPe,onLanguage:_Pe,getEncodedLanguageId:mPe,setLanguageConfiguration:vPe,setColorMap:yPe,registerTokensProviderFactory:dV,setTokensProvider:SPe,setMonarchTokensProvider:LPe,registerReferenceProvider:xPe,registerRenameProvider:DPe,registerCompletionItemProvider:HPe,registerSignatureHelpProvider:kPe,registerHoverProvider:EPe,registerDocumentSymbolProvider:TPe,registerDocumentHighlightProvider:IPe,registerLinkedEditingRangeProvider:NPe,registerDefinitionProvider:RPe,registerImplementationProvider:APe,registerTypeDefinitionProvider:MPe,registerCodeLensProvider:OPe,registerCodeActionProvider:PPe,registerDocumentFormattingEditProvider:FPe,registerDocumentRangeFormattingEditProvider:BPe,registerOnTypeFormattingEditProvider:VPe,registerLinkProvider:WPe,registerColorProvider:zPe,registerFoldingRangeProvider:UPe,registerDeclarationProvider:$Pe,registerSelectionRangeProvider:jPe,registerDocumentSemanticTokensProvider:KPe,registerDocumentRangeSemanticTokensProvider:qPe,registerInlineCompletionsProvider:GPe,registerInlayHintsProvider:YPe,DocumentHighlightKind:A5,CompletionItemKind:k5,CompletionItemTag:E5,CompletionItemInsertTextRule:DT,SymbolKind:i3,SymbolTag:n3,IndentAction:B5,CompletionTriggerKind:T5,SignatureHelpTriggerKind:t3,InlayHintKind:W5,InlineCompletionTriggerKind:H5,CodeActionTriggerType:D5,FoldingRangeKind:au}}const hV=bi("IEditorCancelService"),Zie=new st("cancellableOperation",!1,b("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));ki(hV,class{constructor(){this._tokens=new WeakMap}add(s,e){let t=this._tokens.get(s);t||(t=s.invokeWithinContext(n=>{const o=Zie.bindTo(n.get(jt)),r=new Sr;return{key:o,tokens:r}}),this._tokens.set(s,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(s){const e=this._tokens.get(s);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class QPe extends _o{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(i=>i.get(hV).add(e,this))}dispose(){this._unregister(),super.dispose()}}Be(new class extends Fs{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Zie})}runEditorCommand(s,e){s.get(hV).cancel(e)}});class TS{constructor(e,t){if(this.flags=t,(this.flags&1)!==0){const i=e.getModel();this.modelVersionId=i?bl("{0}#{1}",i.uri.toString(),i.getVersionId()):null}else this.modelVersionId=null;(this.flags&4)!==0?this.position=e.getPosition():this.position=null,(this.flags&2)!==0?this.selection=e.getSelection():this.selection=null,(this.flags&8)!==0?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof TS))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new TS(e,this.flags))}}class e_ extends QPe{constructor(e,t,i,n){super(e,n),this._listener=new Ae,t&4&&this._listener.add(e.onDidChangeCursorPosition(o=>{(!i||!M.containsPosition(i,o.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(o=>{(!i||!M.containsRange(i,o.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(o=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(o=>this.cancel())),this._listener.add(e.onDidChangeModelContent(o=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class fV extends _o{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}function Xh(s){return s&&typeof s.getEditorType=="function"?s.getEditorType()===lL.ICodeEditor:!1}function Qie(s){return s&&typeof s.getEditorType=="function"?s.getEditorType()===lL.IDiffEditor:!1}function Xie(s){return Xh(s)?s:Qie(s)?s.getModifiedEditor():null}class P0{static _handleEolEdits(e,t){let i;const n=[];for(const o of t)typeof o.eol=="number"&&(i=o.eol),o.range&&typeof o.text=="string"&&n.push(o);return typeof i=="number"&&e.hasModel()&&e.getModel().pushEOL(i),n}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),n=i.validateRange(t.range);return i.getFullModelRange().equalsRange(n)}static execute(e,t,i){i&&e.pushUndoStop();const n=P0._handleEolEdits(e,t);n.length===1&&P0._isFullModelReplaceEdit(e,n[0])?e.executeEdits("formatEditsCommand",n.map(o=>Nn.replace(M.lift(o.range),o.text))):e.executeEdits("formatEditsCommand",n.map(o=>Nn.replaceMove(M.lift(o.range),o.text))),i&&e.pushUndoStop()}}class rF{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var hu=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};function gV(s){if(s=s.filter(n=>n.range),!s.length)return;let{range:e}=s[0];for(let n=1;n<s.length;n++)e=M.plusRange(e,s[n].range);const{startLineNumber:t,endLineNumber:i}=e;t===i?s.length===1?go(b("hint11","Made 1 formatting edit on line {0}",t)):go(b("hintn1","Made {0} formatting edits on line {1}",s.length,t)):s.length===1?go(b("hint1n","Made 1 formatting edit between lines {0} and {1}",t,i)):go(b("hintnn","Made {0} formatting edits between lines {1} and {2}",s.length,t,i))}function Jie(s,e,t){const i=[],n=new Set,o=s.ordered(t);for(const a of o)i.push(a),a.extensionId&&n.add(rF.toKey(a.extensionId));const r=e.ordered(t);for(const a of r){if(a.extensionId){if(n.has(rF.toKey(a.extensionId)))continue;n.add(rF.toKey(a.extensionId))}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,d){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,d)}})}return i}class t_{static setFormatterSelector(e){return{dispose:t_._selectors.unshift(e)}}static select(e,t,i){return hu(this,void 0,void 0,function*(){if(e.length===0)return;const n=fi.first(t_._selectors);if(n)return yield n(e,t,i)})}}t_._selectors=new Sr;function ene(s,e,t,i,n,o){return hu(this,void 0,void 0,function*(){const r=s.get(Zt),{documentRangeFormattingEditProvider:a}=s.get(ct),l=Xh(e)?e.getModel():e,c=a.ordered(l),d=yield t_.select(c,l,i);d&&(n.report(d),yield r.invokeFunction(XPe,d,e,t,o))})}function XPe(s,e,t,i,n){return hu(this,void 0,void 0,function*(){const o=s.get(Ml);let r,a;Xh(t)?(r=t.getModel(),a=new e_(t,5,void 0,n)):(r=t,a=new fV(t,n));const l=[];let c=0;for(const _ of $8(i).sort(M.compareRangesUsingStarts))c>0&&M.areIntersectingOrTouching(l[c-1],_)?l[c-1]=M.fromPositions(l[c-1].getStartPosition(),_.getEndPosition()):c=l.push(_);const d=_=>hu(this,void 0,void 0,function*(){return(yield e.provideDocumentRangeFormattingEdits(r,_,r.getFormattingOptions(),a.token))||[]}),f=(_,C)=>{if(!_.length||!C.length)return!1;const S=_.reduce((x,L)=>M.plusRange(x,L.range),_[0].range);if(!C.some(x=>M.intersectRanges(S,x.range)))return!1;for(const x of _)for(const L of C)if(M.intersectRanges(x.range,L.range))return!0;return!1},g=[],m=[];try{for(const _ of l){if(a.token.isCancellationRequested)return!0;m.push(yield d(_))}for(let _=0;_<l.length;++_)for(let C=_+1;C<l.length;++C){if(a.token.isCancellationRequested)return!0;if(f(m[_],m[C])){const S=M.plusRange(l[_],l[C]),x=yield d(S);l.splice(C,1),l.splice(_,1),l.push(S),m.splice(C,1),m.splice(_,1),m.push(x),_=0,C=0}}for(const _ of m){if(a.token.isCancellationRequested)return!0;const C=yield o.computeMoreMinimalEdits(r.uri,_);C&&g.push(...C)}}finally{a.dispose()}if(g.length===0)return!1;if(Xh(t))P0.execute(t,g,!0),gV(g),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:_}]=g,C=new et(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn);r.pushEditOperations([C],g.map(S=>({text:S.text,range:M.lift(S.range),forceMoveMarkers:!0})),S=>{for(const{range:x}of S)if(M.areIntersectingOrTouching(x,C))return[new et(x.startLineNumber,x.startColumn,x.endLineNumber,x.endColumn)];return null})}return!0})}function JPe(s,e,t,i,n){return hu(this,void 0,void 0,function*(){const o=s.get(Zt),r=s.get(ct),a=Xh(e)?e.getModel():e,l=Jie(r.documentFormattingEditProvider,r.documentRangeFormattingEditProvider,a),c=yield t_.select(l,a,t);c&&(i.report(c),yield o.invokeFunction(e4e,c,e,t,n))})}function e4e(s,e,t,i,n){return hu(this,void 0,void 0,function*(){const o=s.get(Ml);let r,a;Xh(t)?(r=t.getModel(),a=new e_(t,5,void 0,n)):(r=t,a=new fV(t,n));let l;try{const c=yield e.provideDocumentFormattingEdits(r,r.getFormattingOptions(),a.token);if(l=yield o.computeMoreMinimalEdits(r.uri,c),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(Xh(t))P0.execute(t,l,i!==2),i!==2&&(gV(l),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:c}]=l,d=new et(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn);r.pushEditOperations([d],l.map(f=>({text:f.text,range:M.lift(f.range),forceMoveMarkers:!0})),f=>{for(const{range:g}of f)if(M.areIntersectingOrTouching(g,d))return[new et(g.startLineNumber,g.startColumn,g.endLineNumber,g.endColumn)];return null})}return!0})}function t4e(s,e,t,i,n,o){return hu(this,void 0,void 0,function*(){const r=e.documentRangeFormattingEditProvider.ordered(t);for(const a of r){const l=yield Promise.resolve(a.provideDocumentRangeFormattingEdits(t,i,n,o)).catch(Ys);if(Po(l))return yield s.computeMoreMinimalEdits(t.uri,l)}})}function i4e(s,e,t,i,n){return hu(this,void 0,void 0,function*(){const o=Jie(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const r of o){const a=yield Promise.resolve(r.provideDocumentFormattingEdits(t,i,n)).catch(Ys);if(Po(a))return yield s.computeMoreMinimalEdits(t.uri,a)}})}function tne(s,e,t,i,n,o,r){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,n,o,r)).catch(Ys).then(l=>s.computeMoreMinimalEdits(t.uri,l))}Li.registerCommand("_executeFormatRangeProvider",function(s,...e){return hu(this,void 0,void 0,function*(){const[t,i,n]=e;Qi(yt.isUri(t)),Qi(M.isIRange(i));const o=s.get(Yr),r=s.get(Ml),a=s.get(ct),l=yield o.createModelReference(t);try{return t4e(r,a,l.object.textEditorModel,M.lift(i),n,ri.None)}finally{l.dispose()}})});Li.registerCommand("_executeFormatDocumentProvider",function(s,...e){return hu(this,void 0,void 0,function*(){const[t,i]=e;Qi(yt.isUri(t));const n=s.get(Yr),o=s.get(Ml),r=s.get(ct),a=yield n.createModelReference(t);try{return i4e(o,r,a.object.textEditorModel,i,ri.None)}finally{a.dispose()}})});Li.registerCommand("_executeFormatOnTypeProvider",function(s,...e){return hu(this,void 0,void 0,function*(){const[t,i,n,o]=e;Qi(yt.isUri(t)),Qi(se.isIPosition(i)),Qi(typeof n=="string");const r=s.get(Yr),a=s.get(Ml),l=s.get(ct),c=yield r.createModelReference(t);try{return tne(a,l,c.object.textEditorModel,se.lift(i),n,o,ri.None)}finally{c.dispose()}})});var aF;fu.wrappingIndent.defaultValue=0;fu.glyphMargin.defaultValue=!1;fu.autoIndent.defaultValue=3;fu.overviewRulerLanes.defaultValue=2;t_.setFormatterSelector((s,e,t)=>Promise.resolve(s[0]));const xr=GX();xr.editor=aPe();xr.languages=ZPe();const ine=xr.CancellationTokenSource,nne=xr.Emitter,sne=xr.KeyCode,one=xr.KeyMod,rne=xr.Position,ane=xr.Range,lne=xr.Selection,cne=xr.SelectionDirection,une=xr.MarkerSeverity,dne=xr.MarkerTag,hne=xr.Uri,fne=xr.Token,gne=xr.editor,pne=xr.languages;(((aF=ss.MonacoEnvironment)===null||aF===void 0?void 0:aF.globalAPI)||typeof define=="function"&&define.amd)&&(self.monaco=xr);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const EL=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:ine,Emitter:nne,KeyCode:sne,KeyMod:one,Position:rne,Range:ane,Selection:lne,SelectionDirection:cne,MarkerSeverity:une,MarkerTag:dne,Uri:hne,Token:fne,editor:gne,languages:pne},Symbol.toStringTag,{value:"Module"})),n4e="modulepreload",s4e=function(s){return"/examples/"+s},zY={},ht=function(e,t,i){if(!t||t.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=s4e(o),o in zY)return;zY[o]=!0;const r=o.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(!!i)for(let d=n.length-1;d>=0;d--){const f=n[d];if(f.href===o&&(!r||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":n4e,r||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),r)return new Promise((d,f)=>{c.addEventListener("load",d),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var o4e=Object.defineProperty,r4e=Object.getOwnPropertyDescriptor,a4e=Object.getOwnPropertyNames,l4e=Object.prototype.hasOwnProperty,UY=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of a4e(e))!l4e.call(s,n)&&n!==t&&o4e(s,n,{get:()=>e[n],enumerable:!(i=r4e(e,n))||i.enumerable});return s},c4e=(s,e,t)=>(UY(s,e,"default"),t&&UY(t,e,"default")),qw={};c4e(qw,EL);var mne={},lF={},_ne=class{constructor(s){jn(this,"_languageId");jn(this,"_loadingTriggered");jn(this,"_lazyLoadPromise");jn(this,"_lazyLoadPromiseResolve");jn(this,"_lazyLoadPromiseReject");this._languageId=s,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((e,t)=>{this._lazyLoadPromiseResolve=e,this._lazyLoadPromiseReject=t})}static getOrCreate(s){return lF[s]||(lF[s]=new _ne(s)),lF[s]}load(){return this._loadingTriggered||(this._loadingTriggered=!0,mne[this._languageId].loader().then(s=>this._lazyLoadPromiseResolve(s),s=>this._lazyLoadPromiseReject(s))),this._lazyLoadPromise}};function vt(s){const e=s.id;mne[e]=s,qw.languages.register(s);const t=_ne.getOrCreate(e);qw.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),qw.languages.onLanguage(e,async()=>{const i=await t.load();qw.languages.setLanguageConfiguration(e,i.conf)})}vt({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>ht(()=>import("./abap.84ac76dc.js"),[])});vt({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>ht(()=>import("./apex.5b1e333f.js"),[])});vt({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>ht(()=>import("./azcli.eaf9c859.js"),[])});vt({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>ht(()=>import("./bat.1caadee3.js"),[])});vt({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>ht(()=>import("./bicep.434f44e9.js"),[])});vt({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>ht(()=>import("./cameligo.beb2d4cb.js"),[])});vt({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>ht(()=>import("./clojure.d12dc50e.js"),[])});vt({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>ht(()=>import("./coffee.d7316c35.js"),[])});vt({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>ht(()=>import("./cpp.de981d2a.js"),[])});vt({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>ht(()=>import("./cpp.de981d2a.js"),[])});vt({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>ht(()=>import("./csharp.747a590a.js"),[])});vt({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>ht(()=>import("./csp.ff79e571.js"),[])});vt({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>ht(()=>import("./css.0d9e4a06.js"),[])});vt({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>ht(()=>import("./cypher.8d586804.js"),[])});vt({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>ht(()=>import("./dart.64d76701.js"),[])});vt({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>ht(()=>import("./dockerfile.c0cbba33.js"),[])});vt({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>ht(()=>import("./ecl.b1dcaf02.js"),[])});vt({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>ht(()=>import("./elixir.0394cc28.js"),[])});vt({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>ht(()=>import("./flow9.9ed3549a.js"),[])});vt({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>ht(()=>import("./fsharp.0eb5016a.js"),[])});vt({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>ht(()=>import("./freemarker2.ec98aa33.js"),[]).then(s=>s.TagAutoInterpolationDollar)});vt({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>ht(()=>import("./freemarker2.ec98aa33.js"),[]).then(s=>s.TagAngleInterpolationDollar)});vt({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>ht(()=>import("./freemarker2.ec98aa33.js"),[]).then(s=>s.TagBracketInterpolationDollar)});vt({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>ht(()=>import("./freemarker2.ec98aa33.js"),[]).then(s=>s.TagAngleInterpolationBracket)});vt({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>ht(()=>import("./freemarker2.ec98aa33.js"),[]).then(s=>s.TagBracketInterpolationBracket)});vt({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>ht(()=>import("./freemarker2.ec98aa33.js"),[]).then(s=>s.TagAutoInterpolationDollar)});vt({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>ht(()=>import("./freemarker2.ec98aa33.js"),[]).then(s=>s.TagAutoInterpolationBracket)});vt({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>ht(()=>import("./go.5f96fd9d.js"),[])});vt({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>ht(()=>import("./graphql.1bbd04ca.js"),[])});vt({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>ht(()=>import("./handlebars.0334f9e6.js"),[])});vt({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>ht(()=>import("./hcl.0e7c0d3b.js"),[])});vt({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>ht(()=>import("./html.151e3cc0.js"),[])});vt({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>ht(()=>import("./ini.0a6c6cb1.js"),[])});vt({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>ht(()=>import("./java.f4c04d7a.js"),[])});vt({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>ht(()=>import("./javascript.3df305a2.js"),["assets/javascript.3df305a2.js","assets/typescript.bb5d05a7.js"])});vt({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>ht(()=>import("./julia.28ba6463.js"),[])});vt({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>ht(()=>import("./kotlin.fbd58327.js"),[])});vt({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>ht(()=>import("./less.5015b5dd.js"),[])});vt({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>ht(()=>import("./lexon.480613e5.js"),[])});vt({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>ht(()=>import("./lua.e9f32a07.js"),[])});vt({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>ht(()=>import("./liquid.d15a8d75.js"),[])});vt({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>ht(()=>import("./m3.8933317c.js"),[])});vt({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>ht(()=>import("./markdown.ab7b569c.js"),[])});vt({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>ht(()=>import("./mips.359d6bc7.js"),[])});vt({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>ht(()=>import("./msdax.a1e62321.js"),[])});vt({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>ht(()=>import("./mysql.f8c94695.js"),[])});vt({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>ht(()=>import("./objective-c.c5e942a0.js"),[])});vt({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>ht(()=>import("./pascal.b0dec16a.js"),[])});vt({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>ht(()=>import("./pascaligo.b5ba2dd8.js"),[])});vt({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:()=>ht(()=>import("./perl.9cf315d1.js"),[])});vt({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>ht(()=>import("./pgsql.538b0de9.js"),[])});vt({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>ht(()=>import("./php.b36f0866.js"),[])});vt({id:"pla",extensions:[".pla"],loader:()=>ht(()=>import("./pla.411b1395.js"),[])});vt({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>ht(()=>import("./postiats.091324f1.js"),[])});vt({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>ht(()=>import("./powerquery.36e1692e.js"),[])});vt({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>ht(()=>import("./powershell.db664d91.js"),[])});vt({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>ht(()=>import("./protobuf.caf99254.js"),[])});vt({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>ht(()=>import("./pug.7e754d7c.js"),[])});vt({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>ht(()=>import("./python.3f9c8be7.js"),[])});vt({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>ht(()=>import("./qsharp.9f5a1998.js"),[])});vt({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>ht(()=>import("./r.c73210b2.js"),[])});vt({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>ht(()=>import("./razor.4cb9f1c0.js"),[])});vt({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>ht(()=>import("./redis.f1cf3bc2.js"),[])});vt({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>ht(()=>import("./redshift.2d7388a9.js"),[])});vt({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>ht(()=>import("./restructuredtext.de72b364.js"),[])});vt({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>ht(()=>import("./ruby.a3bbe8f4.js"),[])});vt({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>ht(()=>import("./rust.9301f2b7.js"),[])});vt({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>ht(()=>import("./sb.d3d36a0d.js"),[])});vt({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>ht(()=>import("./scala.a58c8111.js"),[])});vt({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>ht(()=>import("./scheme.0b55739a.js"),[])});vt({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>ht(()=>import("./scss.863a9576.js"),[])});vt({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>ht(()=>import("./shell.2223f2ff.js"),[])});vt({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>ht(()=>import("./solidity.5b2e26fa.js"),[])});vt({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>ht(()=>import("./sophia.29695d8e.js"),[])});vt({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>ht(()=>import("./sparql.7ab6d404.js"),[])});vt({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>ht(()=>import("./sql.6fdc9fb2.js"),[])});vt({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:()=>ht(()=>import("./st.d826407d.js"),[])});vt({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>ht(()=>import("./swift.b4c2c0da.js"),[])});vt({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>ht(()=>import("./systemverilog.7bb80481.js"),[])});vt({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>ht(()=>import("./systemverilog.7bb80481.js"),[])});vt({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>ht(()=>import("./tcl.5a904b51.js"),[])});vt({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>ht(()=>import("./twig.443ec7fb.js"),[])});vt({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>ht(()=>import("./typescript.bb5d05a7.js"),[])});vt({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>ht(()=>import("./vb.89070d85.js"),[])});vt({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>ht(()=>import("./xml.997384b7.js"),[])});vt({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>ht(()=>import("./yaml.2ede2517.js"),[])});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var u4e=Object.defineProperty,d4e=Object.getOwnPropertyDescriptor,h4e=Object.getOwnPropertyNames,f4e=Object.prototype.hasOwnProperty,$Y=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of h4e(e))!f4e.call(s,n)&&n!==t&&u4e(s,n,{get:()=>e[n],enumerable:!(i=d4e(e,n))||i.enumerable});return s},g4e=(s,e,t)=>($Y(s,e,"default"),t&&$Y(t,e,"default")),hC={};g4e(hC,EL);var pV=class{constructor(s,e,t){jn(this,"_onDidChange",new hC.Emitter);jn(this,"_options");jn(this,"_modeConfiguration");jn(this,"_languageId");this._languageId=s,this.setOptions(e),this.setModeConfiguration(t)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(s){this._options=s||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(s){this.setOptions(s)}setModeConfiguration(s){this._modeConfiguration=s||Object.create(null),this._onDidChange.fire(this)}},mV={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},_V={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},vne=new pV("css",mV,_V),bne=new pV("scss",mV,_V),Cne=new pV("less",mV,_V);hC.languages.css={cssDefaults:vne,lessDefaults:Cne,scssDefaults:bne};function vV(){return ht(()=>import("./cssMode.62ff6ad1.js"),[])}hC.languages.onLanguage("less",()=>{vV().then(s=>s.setupMode(Cne))});hC.languages.onLanguage("scss",()=>{vV().then(s=>s.setupMode(bne))});hC.languages.onLanguage("css",()=>{vV().then(s=>s.setupMode(vne))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var p4e=Object.defineProperty,m4e=Object.getOwnPropertyDescriptor,_4e=Object.getOwnPropertyNames,v4e=Object.prototype.hasOwnProperty,jY=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of _4e(e))!v4e.call(s,n)&&n!==t&&p4e(s,n,{get:()=>e[n],enumerable:!(i=m4e(e,n))||i.enumerable});return s},b4e=(s,e,t)=>(jY(s,e,"default"),t&&jY(t,e,"default")),DR={};b4e(DR,EL);var C4e=class{constructor(s,e,t){jn(this,"_onDidChange",new DR.Emitter);jn(this,"_options");jn(this,"_modeConfiguration");jn(this,"_languageId");this._languageId=s,this.setOptions(e),this.setModeConfiguration(t)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(s){this._options=s||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(s){this._modeConfiguration=s||Object.create(null),this._onDidChange.fire(this)}},w4e={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},kR={format:w4e,suggest:{},data:{useDefaultDataProvider:!0}};function ER(s){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:s===Sy,documentFormattingEdits:s===Sy,documentRangeFormattingEdits:s===Sy}}var Sy="html",KY="handlebars",qY="razor",wne=TR(Sy,kR,ER(Sy)),y4e=wne.defaults,yne=TR(KY,kR,ER(KY)),S4e=yne.defaults,Sne=TR(qY,kR,ER(qY)),L4e=Sne.defaults;DR.languages.html={htmlDefaults:y4e,razorDefaults:L4e,handlebarDefaults:S4e,htmlLanguageService:wne,handlebarLanguageService:yne,razorLanguageService:Sne,registerHTMLLanguageService:TR};function x4e(){return ht(()=>import("./htmlMode.61511c1b.js"),[])}function TR(s,e=kR,t=ER(s)){const i=new C4e(s,e,t);let n;const o=DR.languages.onLanguage(s,async()=>{n=(await x4e()).setupMode(i)});return{defaults:i,dispose(){o.dispose(),n==null||n.dispose(),n=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var D4e=Object.defineProperty,k4e=Object.getOwnPropertyDescriptor,E4e=Object.getOwnPropertyNames,T4e=Object.prototype.hasOwnProperty,GY=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of E4e(e))!T4e.call(s,n)&&n!==t&&D4e(s,n,{get:()=>e[n],enumerable:!(i=k4e(e,n))||i.enumerable});return s},I4e=(s,e,t)=>(GY(s,e,"default"),t&&GY(t,e,"default")),TL={};I4e(TL,EL);var N4e=class{constructor(s,e,t){jn(this,"_onDidChange",new TL.Emitter);jn(this,"_diagnosticsOptions");jn(this,"_modeConfiguration");jn(this,"_languageId");this._languageId=s,this.setDiagnosticsOptions(e),this.setModeConfiguration(t)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(s){this._diagnosticsOptions=s||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(s){this._modeConfiguration=s||Object.create(null),this._onDidChange.fire(this)}},R4e={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},A4e={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},Lne=new N4e("json",R4e,A4e);TL.languages.json={jsonDefaults:Lne};function M4e(){return ht(()=>import("./jsonMode.9f7d5d4d.js"),[])}TL.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});TL.languages.onLanguage("json",()=>{M4e().then(s=>s.setupMode(Lne))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var O4e=Object.defineProperty,P4e=Object.getOwnPropertyDescriptor,F4e=Object.getOwnPropertyNames,B4e=Object.prototype.hasOwnProperty,YY=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of F4e(e))!B4e.call(s,n)&&n!==t&&O4e(s,n,{get:()=>e[n],enumerable:!(i=P4e(e,n))||i.enumerable});return s},V4e=(s,e,t)=>(YY(s,e,"default"),t&&YY(t,e,"default")),W4e="4.5.5",F0={};V4e(F0,EL);var xne=(s=>(s[s.None=0]="None",s[s.CommonJS=1]="CommonJS",s[s.AMD=2]="AMD",s[s.UMD=3]="UMD",s[s.System=4]="System",s[s.ES2015=5]="ES2015",s[s.ESNext=99]="ESNext",s))(xne||{}),Dne=(s=>(s[s.None=0]="None",s[s.Preserve=1]="Preserve",s[s.React=2]="React",s[s.ReactNative=3]="ReactNative",s[s.ReactJSX=4]="ReactJSX",s[s.ReactJSXDev=5]="ReactJSXDev",s))(Dne||{}),kne=(s=>(s[s.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",s[s.LineFeed=1]="LineFeed",s))(kne||{}),Ene=(s=>(s[s.ES3=0]="ES3",s[s.ES5=1]="ES5",s[s.ES2015=2]="ES2015",s[s.ES2016=3]="ES2016",s[s.ES2017=4]="ES2017",s[s.ES2018=5]="ES2018",s[s.ES2019=6]="ES2019",s[s.ES2020=7]="ES2020",s[s.ESNext=99]="ESNext",s[s.JSON=100]="JSON",s[s.Latest=99]="Latest",s))(Ene||{}),Tne=(s=>(s[s.Classic=1]="Classic",s[s.NodeJs=2]="NodeJs",s))(Tne||{}),Ine=class{constructor(s,e,t,i){jn(this,"_onDidChange",new F0.Emitter);jn(this,"_onDidExtraLibsChange",new F0.Emitter);jn(this,"_extraLibs");jn(this,"_removedExtraLibs");jn(this,"_eagerModelSync");jn(this,"_compilerOptions");jn(this,"_diagnosticsOptions");jn(this,"_workerOptions");jn(this,"_onDidExtraLibsChangeTimeout");jn(this,"_inlayHintsOptions");this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(s),this.setDiagnosticsOptions(e),this.setWorkerOptions(t),this.setInlayHintsOptions(i),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(s,e){let t;if(typeof e>"u"?t=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t=e,this._extraLibs[t]&&this._extraLibs[t].content===s)return{dispose:()=>{}};let i=1;return this._removedExtraLibs[t]&&(i=this._removedExtraLibs[t]+1),this._extraLibs[t]&&(i=this._extraLibs[t].version+1),this._extraLibs[t]={content:s,version:i},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let n=this._extraLibs[t];!n||n.version===i&&(delete this._extraLibs[t],this._removedExtraLibs[t]=i,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(s){for(const e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),s&&s.length>0)for(const e of s){const t=e.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,i=e.content;let n=1;this._removedExtraLibs[t]&&(n=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:i,version:n}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(s){this._compilerOptions=s||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(s){this._diagnosticsOptions=s||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(s){this._workerOptions=s||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(s){this._inlayHintsOptions=s||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(s){}setEagerModelSync(s){this._eagerModelSync=s}getEagerModelSync(){return this._eagerModelSync}},H4e=W4e,Nne=new Ine({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{}),Rne=new Ine({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{}),z4e=()=>IR().then(s=>s.getTypeScriptWorker()),U4e=()=>IR().then(s=>s.getJavaScriptWorker());F0.languages.typescript={ModuleKind:xne,JsxEmit:Dne,NewLineKind:kne,ScriptTarget:Ene,ModuleResolutionKind:Tne,typescriptVersion:H4e,typescriptDefaults:Nne,javascriptDefaults:Rne,getTypeScriptWorker:z4e,getJavaScriptWorker:U4e};function IR(){return ht(()=>import("./tsMode.b8887266.js"),[])}F0.languages.onLanguage("typescript",()=>IR().then(s=>s.setupTypeScript(Nne)));F0.languages.onLanguage("javascript",()=>IR().then(s=>s.setupJavaScript(Rne)));var $4e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},j4e=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},NR=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const RR=new st("selectionAnchorSet",!1);let Jh=class Ane{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=RR.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(e){return e.getContribution(Ane.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(et.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new Wr().appendText(b("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),go(b("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(et.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};Jh.ID="editor.contrib.selectionAnchorController";Jh=$4e([j4e(1,jt)],Jh);class K4e extends ot{constructor(){super({id:"editor.action.setSelectionAnchor",label:b("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2080),weight:100}})}run(e,t){var i;return NR(this,void 0,void 0,function*(){(i=Jh.get(t))===null||i===void 0||i.setSelectionAnchor()})}}class q4e extends ot{constructor(){super({id:"editor.action.goToSelectionAnchor",label:b("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:RR})}run(e,t){var i;return NR(this,void 0,void 0,function*(){(i=Jh.get(t))===null||i===void 0||i.goToSelectionAnchor()})}}class G4e extends ot{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:b("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:RR,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2089),weight:100}})}run(e,t){var i;return NR(this,void 0,void 0,function*(){(i=Jh.get(t))===null||i===void 0||i.selectFromAnchorToCursor()})}}class Y4e extends ot{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:b("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:RR,kbOpts:{kbExpr:$.editorTextFocus,primary:9,weight:100}})}run(e,t){var i;return NR(this,void 0,void 0,function*(){(i=Jh.get(t))===null||i===void 0||i.cancelSelectionAnchor()})}}Ei(Jh.ID,Jh);We(K4e);We(q4e);We(G4e);We(Y4e);const Z4e=j("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},b("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class Q4e extends ot{constructor(){super({id:"editor.action.jumpToBracket",label:b("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:$.editorTextFocus,primary:3160,weight:100}})}run(e,t){var i;(i=ru.get(t))===null||i===void 0||i.jumpToBracket()}}class X4e extends ot{constructor(){super({id:"editor.action.selectToBracket",label:b("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){var n;let o=!0;i&&i.selectBrackets===!1&&(o=!1),(n=ru.get(t))===null||n===void 0||n.selectToBracket(o)}}class J4e{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}class ru extends ge{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new Xi(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(66),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(66)&&(this._matchBrackets=this._editor.getOption(66),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(ru.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(i=>{const n=i.getStartPosition(),o=e.bracketPairs.matchBracket(n);let r=null;if(o)o[0].containsPosition(n)&&!o[1].containsPosition(n)?r=o[1].getStartPosition():o[1].containsPosition(n)&&(r=o[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(n);if(a)r=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(n);l&&l.range&&(r=l.range.getStartPosition())}}return r?new et(r.lineNumber,r.column,r.lineNumber,r.column):new et(n.lineNumber,n.column,n.lineNumber,n.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach(n=>{const o=n.getStartPosition();let r=t.bracketPairs.matchBracket(o);if(!r&&(r=t.bracketPairs.findEnclosingBrackets(o),!r)){const c=t.bracketPairs.findNextBracket(o);c&&c.range&&(r=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(r){r.sort(M.compareRangesUsingStarts);const[c,d]=r;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(o)){const f=a;a=l,l=f}}a&&l&&i.push(new et(a.lineNumber,a.column,l.lineNumber,l.column))}),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const i of this._lastBracketsData){const n=i.brackets;n&&(e[t++]={range:n[0],options:i.options},e[t++]={range:n[1],options:i.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),i=t.getVersionId();let n=[];this._lastVersionId===i&&(n=this._lastBracketsData);const o=[];let r=0;for(let f=0,g=e.length;f<g;f++){const m=e[f];m.isEmpty()&&(o[r++]=m.getStartPosition())}o.length>1&&o.sort(se.compare);const a=[];let l=0,c=0;const d=n.length;for(let f=0,g=o.length;f<g;f++){const m=o[f];for(;c<d&&n[c].position.isBefore(m);)c++;if(c<d&&n[c].position.equals(m))a[l++]=n[c];else{let _=t.bracketPairs.matchBracket(m,20),C=ru._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!_&&this._matchBrackets==="always"&&(_=t.bracketPairs.findEnclosingBrackets(m,20),C=ru._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new J4e(m,_,C)}}this._lastBracketsData=a,this._lastVersionId=i}}ru.ID="editor.contrib.bracketMatchingController";ru._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Gt.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Yn(Z4e),position:El.Center}});ru._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Gt.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});Ei(ru.ID,ru);We(X4e);We(Q4e);Cn((s,e)=>{const t=s.getColor(XDe);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const i=s.getColor(Eee);i&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${i}; }`)});Dl.appendMenuItem(G.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:b({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class eFe{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const i=this._selection.startLineNumber,n=this._selection.startColumn,o=this._selection.endColumn;if(!(this._isMovingLeft&&n===1)&&!(!this._isMovingLeft&&o===e.getLineMaxColumn(i)))if(this._isMovingLeft){const r=new M(i,n-1,i,n),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new M(i,o,i,o),a)}else{const r=new M(i,o,i,o+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new M(i,n,i,n),a)}}computeCursorState(e,t){return this._isMovingLeft?new et(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new et(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class Mne extends ot{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const i=[],n=t.getSelections();for(const o of n)i.push(new eFe(o,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class tFe extends Mne{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:b("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:$.writable})}}class iFe extends Mne{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:b("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:$.writable})}}We(tFe);We(iFe);class nFe extends ot{constructor(){super({id:"editor.action.transposeLetters",label:b("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:$.writable,kbOpts:{kbExpr:$.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const i=t.getModel(),n=[],o=t.getSelections();for(const r of o){if(!r.isEmpty())continue;const a=r.startLineNumber,l=r.startColumn,c=i.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;const d=l===c?r.getPosition():Bi.rightPosition(i,r.getPosition().lineNumber,r.getPosition().column),f=Bi.leftPosition(i,d),g=Bi.leftPosition(i,f),m=i.getValueInRange(M.fromPositions(g,f)),_=i.getValueInRange(M.fromPositions(f,d)),C=M.fromPositions(g,d);n.push(new ro(C,_+m))}n.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop())}}We(nFe);var sFe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const i_="9_cutcopypaste",oFe=tu||document.queryCommandSupported("cut"),One=tu||document.queryCommandSupported("copy"),rFe=typeof navigator.clipboard>"u"||Ka?document.queryCommandSupported("paste"):!0;function bV(s){return s.register(),s}const aFe=oFe?bV(new nC({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:tu?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:G.MenubarEditMenu,group:"2_ccp",title:b({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:G.EditorContext,group:i_,title:b("actions.clipboard.cutLabel","Cut"),when:$.writable,order:1},{menuId:G.CommandPalette,group:"",title:b("actions.clipboard.cutLabel","Cut"),order:1},{menuId:G.SimpleEditorContext,group:i_,title:b("actions.clipboard.cutLabel","Cut"),when:$.writable,order:1}]})):void 0,lFe=One?bV(new nC({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:tu?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:G.MenubarEditMenu,group:"2_ccp",title:b({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:G.EditorContext,group:i_,title:b("actions.clipboard.copyLabel","Copy"),order:2},{menuId:G.CommandPalette,group:"",title:b("actions.clipboard.copyLabel","Copy"),order:1},{menuId:G.SimpleEditorContext,group:i_,title:b("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Dl.appendMenuItem(G.MenubarEditMenu,{submenu:G.MenubarCopy,title:{value:b("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});Dl.appendMenuItem(G.EditorContext,{submenu:G.EditorContextCopy,title:{value:b("copy as","Copy As"),original:"Copy As"},group:i_,order:3});Dl.appendMenuItem(G.EditorContext,{submenu:G.EditorContextShare,title:{value:b("share","Share"),original:"Share"},group:"11_share",order:-1});const cF=rFe?bV(new nC({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:tu?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:G.MenubarEditMenu,group:"2_ccp",title:b({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:G.EditorContext,group:i_,title:b("actions.clipboard.pasteLabel","Paste"),when:$.writable,order:4},{menuId:G.CommandPalette,group:"",title:b("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:G.SimpleEditorContext,group:i_,title:b("actions.clipboard.pasteLabel","Paste"),when:$.writable,order:4}]})):void 0;class cFe extends ot{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:b("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:$.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(33)&&t.getSelection().isEmpty()||(B3.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),B3.forceCopyWithSyntaxHighlighting=!1)}}function Pne(s,e){!s||(s.addImplementation(1e4,"code-editor",(t,i)=>{const n=t.get(Vi).getFocusedCodeEditor();if(n&&n.hasTextFocus()){const o=n.getOption(33),r=n.getSelection();return r&&r.isEmpty()&&!o||document.execCommand(e),!0}return!1}),s.addImplementation(0,"generic-dom",(t,i)=>(document.execCommand(e),!0)))}Pne(aFe,"cut");Pne(lFe,"copy");cF&&(cF.addImplementation(1e4,"code-editor",(s,e)=>{const t=s.get(Vi),i=s.get(of),n=t.getFocusedCodeEditor();return n&&n.hasTextFocus()?!document.execCommand("paste")&&Xg?(()=>sFe(void 0,void 0,void 0,function*(){const r=yield i.readText();if(r!==""){const a=eS.INSTANCE.get(r);let l=!1,c=null,d=null;a&&(l=n.getOption(33)&&!!a.isFromEmptySelection,c=typeof a.multicursorText<"u"?a.multicursorText:null,d=a.mode),n.trigger("keyboard","paste",{text:r,pasteOnNewLine:l,multicursorText:c,mode:d})}}))():!0:!1}),cF.addImplementation(0,"generic-dom",(s,e)=>(document.execCommand("paste"),!0)));One&&We(cFe);class vi{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+vi.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new vi(this.value+vi.sep+e)}}vi.sep=".";vi.None=new vi("@@none@@");vi.Empty=new vi("");vi.QuickFix=new vi("quickfix");vi.Refactor=new vi("refactor");vi.Source=new vi("source");vi.SourceOrganizeImports=vi.Source.append("organizeImports");vi.SourceFixAll=vi.Source.append("fixAll");var ir;(function(s){s.Refactor="refactor",s.RefactorPreview="refactor preview",s.Lightbulb="lightbulb",s.Default="other (default)",s.SourceAction="source action",s.QuickFix="quick fix action",s.FixAll="fix all",s.OrganizeImports="organize imports",s.AutoFix="auto fix",s.QuickFixHover="quick fix hover window",s.OnSave="save participants",s.ProblemsView="problems view"})(ir||(ir={}));function uFe(s,e){return!(s.include&&!s.include.intersects(e)||s.excludes&&s.excludes.some(t=>Fne(e,t,s.include))||!s.includeSourceActions&&vi.Source.contains(e))}function dFe(s,e){const t=e.kind?new vi(e.kind):void 0;return!(s.include&&(!t||!s.include.contains(t))||s.excludes&&t&&s.excludes.some(i=>Fne(t,i,s.include))||!s.includeSourceActions&&t&&vi.Source.contains(t)||s.onlyIncludePreferredActions&&!e.isPreferred)}function Fne(s,e,t){return!(!e.contains(s)||t&&e.contains(t))}class ed{constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}static fromUser(e,t){return!e||typeof e!="object"?new ed(t.kind,t.apply,!1):new ed(ed.getKindFromUser(e,t.kind),ed.getApplyFromUser(e,t.apply),ed.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new vi(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}var CV=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const Bne="editor.action.codeAction",Vne="editor.action.refactor",hFe="editor.action.refactor.preview",Wne="editor.action.sourceAction",wV="editor.action.organizeImports",yV="editor.action.fixAll";class Hne{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return CV(this,void 0,void 0,function*(){if(((t=this.provider)===null||t===void 0?void 0:t.resolveCodeAction)&&!this.action.edit){let i;try{i=yield this.provider.resolveCodeAction(this.action,e)}catch(n){Ys(n)}i&&(this.action.edit=i.edit)}return this})}}class SV extends ge{constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(SV.codeActionsComparator),this.validActions=this.allActions.filter(({action:n})=>!n.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:Po(e.diagnostics)?Po(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:Po(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&vi.QuickFix.contains(new vi(e.kind))&&!!e.isPreferred)}}const ZY={actions:[],documentation:void 0};function LV(s,e,t,i,n,o){var r;const a=i.filter||{},l={only:(r=a.include)===null||r===void 0?void 0:r.value,trigger:i.type},c=new fV(e,o),d=fFe(s,e,a),f=new Ae,g=d.map(_=>CV(this,void 0,void 0,function*(){try{n.report(_);const C=yield _.provideCodeActions(e,t,l,c.token);if(C&&f.add(C),c.token.isCancellationRequested)return ZY;const S=((C==null?void 0:C.actions)||[]).filter(L=>L&&dFe(a,L)),x=gFe(_,S,a.include);return{actions:S.map(L=>new Hne(L,_)),documentation:x}}catch(C){if(Dd(C))throw C;return Ys(C),ZY}})),m=s.onDidChange(()=>{const _=s.all(e);$a(_,d)||c.cancel()});return Promise.all(g).then(_=>{const C=_.map(x=>x.actions).flat(),S=oL(_.map(x=>x.documentation));return new SV(C,S,f)}).finally(()=>{m.dispose(),c.dispose()})}function fFe(s,e,t){return s.all(e).filter(i=>i.providedCodeActionKinds?i.providedCodeActionKinds.some(n=>uFe(t,new vi(n))):!0)}function gFe(s,e,t){if(!s.documentation)return;const i=s.documentation.map(n=>({kind:new vi(n.kind),command:n.command}));if(t){let n;for(const o of i)o.kind.contains(t)&&(n?n.kind.contains(o.kind)&&(n=o):n=o);if(n)return n==null?void 0:n.command}for(const n of e)if(!!n.kind){for(const o of i)if(o.kind.contains(new vi(n.kind)))return o.command}}Li.registerCommand("_executeCodeActionProvider",function(s,e,t,i,n){return CV(this,void 0,void 0,function*(){if(!(e instanceof yt))throw iu();const{codeActionProvider:o}=s.get(ct),r=s.get(Hn).getModel(e);if(!r)throw iu();const a=et.isISelection(t)?et.liftSelection(t):M.isIRange(t)?r.validateRange(t):void 0;if(!a)throw iu();const l=typeof i=="string"?new vi(i):void 0,c=yield LV(o,r,a,{type:1,triggerAction:ir.Default,filter:{includeSourceActions:!0,include:l}},T_.None,ri.None),d=[],f=Math.min(c.validActions.length,typeof n=="number"?n:0);for(let g=0;g<f;g++)d.push(c.validActions[g].resolve(ri.None));try{return yield Promise.all(d),c.validActions.map(g=>g.action)}finally{setTimeout(()=>c.dispose(),100)}})});var pFe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},mFe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let Ca=class u9{constructor(e,t){this._messageWidget=new tr,this._messageListeners=new Ae,this._editor=e,this._visible=u9.MESSAGE_VISIBLE.bindTo(t)}static get(e){return e.getContribution(u9.ID)}dispose(){this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){go(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new QY(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new Za(()=>this.closeMessage(),3e3));let i;this._messageListeners.add(this._editor.onMouseMove(n=>{!n.target.position||(i?i.containsPosition(n.target.position)||this.closeMessage():i=new M(t.lineNumber-3,1,n.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(QY.fadeOut(this._messageWidget.value))}};Ca.ID="editor.contrib.messageController";Ca.MESSAGE_VISIBLE=new st("messageVisible",!1,b("messageVisible","Whether the editor is currently showing an inline message"));Ca=pFe([mFe(1,jt)],Ca);const _Fe=Fs.bindToContribution(Ca.get);Be(new _Fe({id:"leaveEditorMessage",precondition:Ca.MESSAGE_VISIBLE,handler:s=>s.closeMessage(),kbOpts:{weight:100+30,primary:9}}));class QY{constructor(e,{lineNumber:t,column:i},n){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const r=document.createElement("div");r.classList.add("message"),r.textContent=n,this._domNode.appendChild(r);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}}Ei(Ca.ID,Ca);var zne=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},dh=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},vFe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const fC={Visible:new st("CodeActionMenuVisible",!1,b("CodeActionMenuVisible","Whether the code action list widget is visible"))};class uF extends _a{constructor(e,t){super(e.command?e.command.id:e.title,bFe(e.title),void 0,!e.disabled,t),this.action=e}}function bFe(s){return s.replace(/\r\n|\r|\n/g," ")}const CFe="codeActionWidget",dF=26;let d9=class{constructor(e,t){this.acceptKeybindings=e,this.keybindingService=t}get templateId(){return CFe}renderTemplate(e){const t=Object.create(null);return t.disposables=[],t.root=e,t.text=document.createElement("span"),e.append(t.text),t}renderElement(e,t,i){const n=i,o=e.title,r=e.isEnabled,a=e.isSeparator,l=e.isDocumentation;n.text.textContent=o,r?n.root.classList.remove("option-disabled"):(n.root.classList.add("option-disabled"),n.root.style.backgroundColor="transparent !important"),a&&(n.root.classList.add("separator"),n.root.style.height="10px"),l||(()=>{var d,f;const[g,m]=this.acceptKeybindings;n.root.title=b({key:"label",comment:['placeholders are keybindings, e.g "F2 to Refactor, Shift+F2 to Preview"']},"{0} to Refactor, {1} to Preview",(d=this.keybindingService.lookupKeybinding(g))===null||d===void 0?void 0:d.getLabel(),(f=this.keybindingService.lookupKeybinding(m))===null||f===void 0?void 0:f.getLabel())})()}disposeTemplate(e){e.disposables=Ni(e.disposables)}};d9=zne([dh(1,xs)],d9);let VI=class h9 extends ge{constructor(e,t,i,n,o,r,a,l,c,d){super(),this._editor=e,this._delegate=t,this._contextMenuService=i,this._languageFeaturesService=o,this._telemetryService=r,this._configurationService=l,this._contextViewService=c,this._contextKeyService=d,this._showingActions=this._register(new tr),this.codeActionList=this._register(new tr),this.options=[],this._visible=!1,this.viewItems=[],this.hasSeperator=!1,this._keybindingResolver=new AR({getKeybindings:()=>n.getKeybindings()}),this._ctxMenuWidgetVisible=fC.Visible.bindTo(this._contextKeyService),this.listRenderer=new d9(["onEnterSelectCodeAction","onEnterSelectCodeActionWithPreview"],n)}get isVisible(){return this._visible}isCodeActionWidgetEnabled(e){return this._configurationService.getValue("editor.experimental.useCustomCodeActionMenu",{resource:e.uri})}_onListSelection(e){e.elements.length&&e.elements.forEach(t=>{t.isEnabled&&(t.action.run(),this.hideCodeActionWidget())})}_onListHover(e){var t,i,n,o;e.element?!((i=e.element)===null||i===void 0)&&i.isEnabled?((n=this.codeActionList.value)===null||n===void 0||n.setFocus([e.element.index]),this.focusedEnabledItem=this.viewItems.indexOf(e.element),this.currSelectedItem=e.element.index):(this.currSelectedItem=void 0,(o=this.codeActionList.value)===null||o===void 0||o.setFocus([e.element.index])):(this.currSelectedItem=void 0,(t=this.codeActionList.value)===null||t===void 0||t.setFocus([]))}renderCodeActionMenuList(e,t){var i;const n=new Ae,o=document.createElement("div"),r=document.createElement("div");this.block=e.appendChild(r),this.block.classList.add("context-view-block"),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",n.add(Le(this.block,it.MOUSE_DOWN,g=>g.stopPropagation())),o.id="codeActionMenuWidget",o.classList.add("codeActionMenuWidget"),e.appendChild(o),this.codeActionList.value=new mu("codeActionWidget",o,{getHeight(g){return g.isSeparator?10:dF},getTemplateId(g){return"codeActionWidget"}},[this.listRenderer],{keyboardSupport:!1}),n.add(this.codeActionList.value.onMouseOver(g=>this._onListHover(g))),n.add(this.codeActionList.value.onDidChangeFocus(g=>{var m;return(m=this.codeActionList.value)===null||m===void 0?void 0:m.domFocus()})),n.add(this.codeActionList.value.onDidChangeSelection(g=>this._onListSelection(g))),n.add(this._editor.onDidLayoutChange(g=>this.hideCodeActionWidget())),t.forEach((g,m)=>{const _=g.class==="separator";let C=!1;g instanceof uF&&(C=g.action.kind===h9.documentationID),_&&(this.hasSeperator=!0);const S={title:g.label,detail:g.tooltip,action:t[m],isEnabled:g.enabled,isSeparator:_,index:m,isDocumentation:C};g.enabled&&this.viewItems.push(S),this.options.push(S)}),this.codeActionList.value.splice(0,this.codeActionList.value.length,this.options);const a=this.hasSeperator?(t.length-1)*dF+10:t.length*dF;o.style.height=String(a)+"px",this.codeActionList.value.layout(a);const l=[];this.options.forEach((g,m)=>{var _,C;if(!this.codeActionList.value)return;const S=(C=document.getElementById((_=this.codeActionList.value)===null||_===void 0?void 0:_.getElementID(m)))===null||C===void 0?void 0:C.getElementsByTagName("span")[0].offsetWidth;l.push(Number(S))});const c=Math.max(...l);o.style.width=c+52+"px",(i=this.codeActionList.value)===null||i===void 0||i.layout(a,c),this.viewItems.length<1||this.viewItems.every(g=>g.isDocumentation)?this.currSelectedItem=void 0:(this.focusedEnabledItem=0,this.currSelectedItem=this.viewItems[0].index,this.codeActionList.value.setFocus([this.currSelectedItem])),this.codeActionList.value.domFocus();const d=zm(e),f=d.onDidBlur(()=>{this.hideCodeActionWidget()});return n.add(f),n.add(d),this._ctxMenuWidgetVisible.set(!0),n}focusPrevious(){var e;if(typeof this.focusedEnabledItem>"u")this.focusedEnabledItem=this.viewItems[0].index;else if(this.viewItems.length<1)return!1;const t=this.focusedEnabledItem;let i;do this.focusedEnabledItem=this.focusedEnabledItem-1,this.focusedEnabledItem<0&&(this.focusedEnabledItem=this.viewItems.length-1),i=this.viewItems[this.focusedEnabledItem],(e=this.codeActionList.value)===null||e===void 0||e.setFocus([i.index]),this.currSelectedItem=i.index;while(this.focusedEnabledItem!==t&&(!i.isEnabled||i.action.id===Bo.ID));return!0}focusNext(){var e;if(typeof this.focusedEnabledItem>"u")this.focusedEnabledItem=this.viewItems.length-1;else if(this.viewItems.length<1)return!1;const t=this.focusedEnabledItem;let i;do this.focusedEnabledItem=(this.focusedEnabledItem+1)%this.viewItems.length,i=this.viewItems[this.focusedEnabledItem],(e=this.codeActionList.value)===null||e===void 0||e.setFocus([i.index]),this.currSelectedItem=i.index;while(this.focusedEnabledItem!==t&&(!i.isEnabled||i.action.id===Bo.ID));return!0}navigateListWithKeysUp(){this.focusPrevious()}navigateListWithKeysDown(){this.focusNext()}onEnterSet(){var e;typeof this.currSelectedItem=="number"&&((e=this.codeActionList.value)===null||e===void 0||e.setSelection([this.currSelectedItem]))}dispose(){super.dispose()}hideCodeActionWidget(){this._ctxMenuWidgetVisible.reset(),this.options=[],this.viewItems=[],this.focusedEnabledItem=0,this.currSelectedItem=void 0,this.hasSeperator=!1,this._contextViewService.hideContextView({source:this})}codeActionTelemetry(e,t,i){this._telemetryService.publicLog2("codeAction.applyCodeAction",{codeActionFrom:e,validCodeActions:i.validActions.length,cancelled:t})}show(e,t,i,n){return vFe(this,void 0,void 0,function*(){const o=this._editor.getModel();if(!o)return;const r=n.includeDisabledActions?t.allActions:t.validActions;if(!r.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,FX();this._visible=!0,this._showingActions.value=t;const a=this.getMenuActions(e,r,t.documentation),l=se.isIPosition(i)?this._toCoords(i):i||{x:0,y:0},c=this._keybindingResolver.getResolver(),d=this._editor.getOption(117);this.isCodeActionWidgetEnabled(o)?this._contextViewService.showContextView({getAnchor:()=>l,render:f=>this.renderCodeActionMenuList(f,a),onHide:f=>{const g=n.fromLightbulb?ir.Lightbulb:e.triggerAction;this.codeActionTelemetry(g,f,t),this._visible=!1,this._editor.focus()}},this._editor.getDomNode(),!1):this._contextMenuService.showContextMenu({domForShadowRoot:d?this._editor.getDomNode():void 0,getAnchor:()=>l,getActions:()=>a,onHide:f=>{const g=n.fromLightbulb?ir.Lightbulb:e.triggerAction;this.codeActionTelemetry(g,f,t),this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:f=>f instanceof uF?c(f.action):void 0})})}getMenuActions(e,t,i){var n,o;const r=d=>new uF(d.action,()=>this._delegate.onSelectCodeAction(d,e)),a=t.map(r),l=[...i],c=this._editor.getModel();if(c&&a.length)for(const d of this._languageFeaturesService.codeActionProvider.all(c))d._getAdditionalMenuItems&&l.push(...d._getAdditionalMenuItems({trigger:e.type,only:(o=(n=e.filter)===null||n===void 0?void 0:n.include)===null||o===void 0?void 0:o.value},t.map(f=>f.action)));return l.length&&a.push(new Bo,...l.map(d=>r(new Hne({title:d.title,command:d,kind:h9.documentationID},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=Oo(this._editor.getDomNode()),n=i.left+t.left,o=i.top+t.top+t.height;return{x:n,y:o}}};VI.documentationID="_documentation";VI=zne([dh(2,sf),dh(3,xs),dh(4,ct),dh(5,gu),dh(6,cn),dh(7,Ai),dh(8,E_),dh(9,jt)],VI);class AR{constructor(e){this._keybindingProvider=e}getResolver(){const e=new d0(()=>this._keybindingProvider.getKeybindings().filter(t=>AR.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let i=t.commandArgs;return t.command===wV?i={kind:vi.SourceOrganizeImports.value}:t.command===yV&&(i={kind:vi.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},ed.fromUser(i,{kind:vi.None,apply:"never"}))}));return t=>{if(t.kind){const i=this.bestKeybindingForCodeAction(t,e.getValue());return i==null?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new vi(e.kind);return t.filter(n=>n.kind.contains(i)).filter(n=>n.preferred?e.isPreferred:!0).reduceRight((n,o)=>n?n.kind.contains(o.kind)?o:n:o,void 0)}}AR.codeActionCommands=[Vne,Bne,Wne,wV,yV];var wFe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},yFe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},Ly;(function(s){s.Hidden={type:0};class e{constructor(i,n,o,r){this.actions=i,this.trigger=n,this.editorPosition=o,this.widgetPosition=r,this.type=1}}s.Showing=e})(Ly||(Ly={}));let WI=class Une extends ge{constructor(e,t,i,n){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=i,this._keybindingService=n,this._onClick=this._register(new J),this.onClick=this._onClick.event,this._state=Ly.Hidden,this._domNode=document.createElement("div"),this._domNode.className=w.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(o=>{const r=this._editor.getModel();(this.state.type!==1||!r||this.state.editorPosition.lineNumber>=r.getLineCount())&&this.hide()})),Zi.ignoreTarget(this._domNode),this._register(lLe(this._domNode,o=>{if(this.state.type!==1)return;this._editor.focus(),o.preventDefault();const{top:r,height:a}=Oo(this._domNode),l=this._editor.getOption(61);let c=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(c+=l),this._onClick.fire({x:o.posx,y:r+a+c,actions:this.state.actions,trigger:this.state.trigger})})),this._register(Le(this._domNode,"mouseenter",o=>{(o.buttons&1)===1&&this.hide()})),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(59)&&!this._editor.getOption(59).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,i){if(e.validActions.length<=0)return this.hide();const n=this._editor.getOptions();if(!n.get(59).enabled)return this.hide();const o=this._editor.getModel();if(!o)return this.hide();const{lineNumber:r,column:a}=o.validatePosition(i),l=o.getOptions().tabSize,c=n.get(46),d=o.getLineContent(r),f=tR(d,l),g=c.spaceWidth*f>22,m=C=>C>2&&this._editor.getTopForLineNumber(C)===this._editor.getTopForLineNumber(C-1);let _=r;if(!g){if(r>1&&!m(r-1))_-=1;else if(!m(r+1))_+=1;else if(a*c.spaceWidth<22)return this.hide()}this.state=new Ly.Showing(e,t,i,{position:{lineNumber:_,column:1},preference:Une._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=Ly.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...w.lightBulb.classNamesArray),this._domNode.classList.add(...w.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=b("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(...w.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...w.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=b("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=b("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};WI._posPref=[0];WI=wFe([yFe(3,xs)],WI);Cn((s,e)=>{var t;const i=(t=s.getColor(Es))===null||t===void 0?void 0:t.transparent(.7),n=s.getColor(Sxe);n&&e.addRule(`
		.monaco-editor .contentWidgets ${w.lightBulb.cssSelector} {
			color: ${n};
			background-color: ${i};
		}`);const o=s.getColor(Lxe);o&&e.addRule(`
		.monaco-editor .contentWidgets ${w.lightbulbAutofix.cssSelector} {
			color: ${o};
			background-color: ${i};
		}`)});var SFe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},LFe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},hF=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})},xFe=globalThis&&globalThis.__classPrivateFieldSet||function(s,e,t,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(s,t):n?n.value=t:e.set(s,t),t},DFe=globalThis&&globalThis.__classPrivateFieldGet||function(s,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!i:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(s):i?i.value:e.get(s)},GE;let f9=class extends ge{constructor(e,t,i,n,o){super(),this._editor=e,this.delegate=n,this._activeCodeActions=this._register(new tr),this.previewOn=!1,GE.set(this,!1),this._codeActionWidget=new d0(()=>this._register(o.createInstance(VI,this._editor,{onSelectCodeAction:(r,a)=>hF(this,void 0,void 0,function*(){this.previewOn?this.delegate.applyCodeAction(r,!0,Boolean(this.previewOn)):this.delegate.applyCodeAction(r,!0,Boolean(a.preview)),this.previewOn=!1})}))),this._lightBulbWidget=new d0(()=>{const r=this._register(o.createInstance(WI,this._editor,t,i));return this._register(r.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1,fromLightbulb:!0}))),r})}dispose(){xFe(this,GE,!0,"f"),super.dispose()}hideCodeActionWidget(){this._codeActionWidget.hasValue()&&this._codeActionWidget.getValue().hideCodeActionWidget()}onEnter(){this._codeActionWidget.hasValue()&&this._codeActionWidget.getValue().onEnterSet()}onPreviewEnter(){this.previewOn=!0,this.onEnter()}navigateList(e){this._codeActionWidget.hasValue()&&(e?this._codeActionWidget.getValue().navigateListWithKeysUp():this._codeActionWidget.getValue().navigateListWithKeysDown())}update(e){var t,i,n,o,r;return hF(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let a;try{a=yield e.actions}catch(l){Yt(l);return}if(!DFe(this,GE,"f"))if(this._lightBulbWidget.getValue().update(a,e.trigger,e.position),e.trigger.type===1){if(!((i=e.trigger.filter)===null||i===void 0)&&i.include){const c=this.tryGetValidActionToApply(e.trigger,a);if(c){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(c,!1,!1)}finally{a.dispose()}return}if(e.trigger.context){const d=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,a);if(d&&d.action.disabled){(n=Ca.get(this._editor))===null||n===void 0||n.showMessage(d.action.disabled,e.trigger.context.position),a.dispose();return}}}const l=!!(!((o=e.trigger.filter)===null||o===void 0)&&o.include);if(e.trigger.context&&(!a.allActions.length||!l&&!a.validActions.length)){(r=Ca.get(this._editor))===null||r===void 0||r.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=a,a.dispose();return}this._activeCodeActions.value=a,this._codeActionWidget.getValue().show(e.trigger,a,e.position,{includeDisabledActions:l,fromLightbulb:!1})}else this._codeActionWidget.getValue().isVisible?a.dispose():this._activeCodeActions.value=a})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(!!t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:i})=>i.disabled)}tryGetValidActionToApply(e,t){if(!!t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,i,n){return hF(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,i,n)})}};GE=new WeakMap;f9=SFe([LFe(4,Zt)],f9);var fF=globalThis&&globalThis.__classPrivateFieldGet||function(s,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!i:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(s):i?i.value:e.get(s)},kFe=globalThis&&globalThis.__classPrivateFieldSet||function(s,e,t,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(s,t):n?n.value=t:e.set(s,t),t},db;const $ne=new st("supportedCodeAction","");class EFe extends ge{constructor(e,t,i,n=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=n,this._autoTriggerTimer=this._register(new Za),this._register(this._markerService.onMarkerChanged(o=>this._onMarkerChanges(o))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();!t||e.some(i=>nte(i,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:ir.Default})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:ir.Default})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(!!t)for(const i of this._markerService.read({resource:t.uri})){const n=t.validateRange(i);if(M.intersectRanges(n,e))return M.lift(n)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=this._editor.getSelection();if(i.isEmpty()&&e.type===2){const{lineNumber:n,column:o}=i.getPosition(),r=t.getLineContent(n);if(r.length===0)return;if(o===1){if(/\s/.test(r[0]))return}else if(o===t.getLineMaxColumn(n)){if(/\s/.test(r[r.length-1]))return}else if(/\s/.test(r[o-2])&&/\s/.test(r[o-1]))return}return i}_createEventAndSignalChange(e,t){const i=this._editor.getModel();if(!t||!i){this._signalChange(void 0);return}const n=this._getRangeOfMarker(t),o=n?n.getStartPosition():t.getStartPosition(),r={trigger:e,selection:t,position:o};return this._signalChange(r),r}}var am;(function(s){s.Empty={type:0};class e{constructor(i,n,o,r){this.trigger=i,this.rangeOrSelection=n,this.position=o,this._cancellablePromise=r,this.type=1,this.actions=r.catch(a=>{if(Dd(a))return TFe;throw a})}cancel(){this._cancellablePromise.cancel()}}s.Triggered=e})(am||(am={}));const TFe={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class IFe extends ge{constructor(e,t,i,n,o){super(),this._editor=e,this._registry=t,this._markerService=i,this._progressService=o,this._codeActionOracle=this._register(new tr),this._state=am.Empty,this._onDidChangeState=this._register(new J),this.onDidChangeState=this._onDidChangeState.event,db.set(this,!1),this._supportedCodeActions=$ne.bindTo(n),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._update()}dispose(){fF(this,db,"f")||(kFe(this,db,!0,"f"),super.dispose(),this.setState(am.Empty,!0))}_update(){if(fF(this,db,"f"))return;this._codeActionOracle.value=void 0,this.setState(am.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(83)){const t=[];for(const i of this._registry.all(e))Array.isArray(i.providedCodeActionKinds)&&t.push(...i.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new EFe(this._editor,this._markerService,i=>{var n;if(!i){this.setState(am.Empty);return}const o=qs(r=>LV(this._registry,e,i.selection,i.trigger,T_.None,r));i.trigger.type===1&&((n=this._progressService)===null||n===void 0||n.showWhile(o,250)),this.setState(new am.Triggered(i.trigger,i.selection,i.position,o))},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:ir.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)===null||t===void 0||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!fF(this,db,"f")&&this._onDidChangeState.fire(e))}}db=new WeakMap;var NFe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Cw=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},jne=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};function IL(s){return Je.regex($ne.keys()[0],new RegExp("(\\s|^)"+ja(s.value)+"\\b"))}function Kne(s,e,t,i){const n=ed.fromUser(e,{kind:vi.Refactor,apply:"never"});return A_(s,typeof(e==null?void 0:e.kind)=="string"?n.preferred?b("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",e.kind):b("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",e.kind):n.preferred?b("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):b("editor.action.refactor.noneMessage","No refactorings available"),{include:vi.Refactor.contains(n.kind)?n.kind:vi.None,onlyIncludePreferredActions:n.preferred},n.apply,t,i)}const MR={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:b("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:b("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[b("args.schema.apply.first","Always apply the first returned code action."),b("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),b("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:b("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let Ug=class qne extends ge{constructor(e,t,i,n,o,r){super(),this._instantiationService=o,this._editor=e,this._model=this._register(new IFe(this._editor,r.codeActionProvider,t,i,n)),this._register(this._model.onDidChangeState(a=>this.update(a))),this._ui=new d0(()=>this._register(new f9(e,gC.Id,NL.Id,{applyCodeAction:(a,l,c)=>jne(this,void 0,void 0,function*(){try{yield this._applyCodeAction(a,c)}finally{l&&this._trigger({type:2,triggerAction:ir.QuickFix,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(qne.ID)}update(e){this._ui.getValue().update(e)}hideCodeActionMenu(){this._ui.hasValue()&&this._ui.getValue().hideCodeActionWidget()}navigateCodeActionList(e){this._ui.hasValue()&&this._ui.getValue().navigateList(e)}selectedOption(){this._ui.hasValue()&&this._ui.getValue().onEnter()}selectedOptionWithPreview(){this._ui.hasValue()&&this._ui.getValue().onPreviewEnter()}showCodeActions(e,t,i){return this._ui.getValue().showCodeActionList(e,t,i,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,i,n,o){var r;if(!this._editor.hasModel())return;(r=Ca.get(this._editor))===null||r===void 0||r.closeMessage();const a=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:i,autoApply:n,context:{notAvailableMessage:e,position:a},preview:o})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e,t){return this._instantiationService.invokeFunction(RFe,e,g9.FromCodeActions,{preview:t,editor:this._editor})}};Ug.ID="editor.contrib.quickFixController";Ug=NFe([Cw(1,Td),Cw(2,jt),Cw(3,ip),Cw(4,Zt),Cw(5,ct)],Ug);var g9;(function(s){s.OnSave="onSave",s.FromProblemsView="fromProblemsView",s.FromCodeActions="fromCodeActions"})(g9||(g9={}));function RFe(s,e,t,i){return jne(this,void 0,void 0,function*(){const n=s.get(yL),o=s.get(fs),r=s.get(gu),a=s.get(gs);if(r.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),yield e.resolve(ri.None),e.action.edit&&(yield n.apply(dC.convert(e.action.edit),{editor:i==null?void 0:i.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:!0,showPreview:i==null?void 0:i.preview})),e.action.command)try{yield o.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(l){const c=AFe(l);a.error(typeof c=="string"?c:b("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function AFe(s){return typeof s=="string"?s:s instanceof Error&&typeof s.message=="string"?s.message:void 0}function A_(s,e,t,i,n=!1,o=ir.Default){if(s.hasModel()){const r=Ug.get(s);r==null||r.manualTriggerAtCurrentPosition(e,o,t,i,n)}}class gC extends ot{constructor(){super({id:gC.Id,label:b("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:Je.and($.writable,$.hasCodeActionsProvider),kbOpts:{kbExpr:$.editorTextFocus,primary:2132,weight:100}})}run(e,t){return A_(t,b("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,!1,ir.QuickFix)}}gC.Id="editor.action.quickFix";class MFe extends Fs{constructor(){super({id:Bne,precondition:Je.and($.writable,$.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:MR}]}})}runEditorCommand(e,t,i){const n=ed.fromUser(i,{kind:vi.Empty,apply:"ifSingle"});return A_(t,typeof(i==null?void 0:i.kind)=="string"?n.preferred?b("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",i.kind):b("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",i.kind):n.preferred?b("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):b("editor.action.codeAction.noneMessage","No code actions available"),{include:n.kind,includeSourceActions:!0,onlyIncludePreferredActions:n.preferred},n.apply)}}class OFe extends ot{constructor(){super({id:Vne,label:b("refactor.label","Refactor..."),alias:"Refactor...",precondition:Je.and($.writable,$.hasCodeActionsProvider),kbOpts:{kbExpr:$.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:Je.and($.writable,IL(vi.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:MR}]}})}run(e,t,i){return Kne(t,i,!1,ir.Refactor)}}class PFe extends ot{constructor(){super({id:hFe,label:b("refactor.preview.label","Refactor with Preview..."),alias:"Refactor Preview...",precondition:Je.and($.writable,$.hasCodeActionsProvider),description:{description:"Refactor Preview...",args:[{name:"args",schema:MR}]}})}run(e,t,i){return Kne(t,i,!0,ir.RefactorPreview)}}class FFe extends ot{constructor(){super({id:Wne,label:b("source.label","Source Action..."),alias:"Source Action...",precondition:Je.and($.writable,$.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:Je.and($.writable,IL(vi.Source))},description:{description:"Source Action...",args:[{name:"args",schema:MR}]}})}run(e,t,i){const n=ed.fromUser(i,{kind:vi.Source,apply:"never"});return A_(t,typeof(i==null?void 0:i.kind)=="string"?n.preferred?b("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",i.kind):b("editor.action.source.noneMessage.kind","No source actions for '{0}' available",i.kind):n.preferred?b("editor.action.source.noneMessage.preferred","No preferred source actions available"):b("editor.action.source.noneMessage","No source actions available"),{include:vi.Source.contains(n.kind)?n.kind:vi.None,includeSourceActions:!0,onlyIncludePreferredActions:n.preferred},n.apply,void 0,ir.SourceAction)}}class BFe extends ot{constructor(){super({id:wV,label:b("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:Je.and($.writable,IL(vi.SourceOrganizeImports)),kbOpts:{kbExpr:$.editorTextFocus,primary:1581,weight:100}})}run(e,t){return A_(t,b("editor.action.organize.noneMessage","No organize imports action available"),{include:vi.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",void 0,ir.OrganizeImports)}}class VFe extends ot{constructor(){super({id:yV,label:b("fixAll.label","Fix All"),alias:"Fix All",precondition:Je.and($.writable,IL(vi.SourceFixAll))})}run(e,t){return A_(t,b("fixAll.noneMessage","No fix all action available"),{include:vi.SourceFixAll,includeSourceActions:!0},"ifSingle",void 0,ir.FixAll)}}class NL extends ot{constructor(){super({id:NL.Id,label:b("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:Je.and($.writable,IL(vi.QuickFix)),kbOpts:{kbExpr:$.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return A_(t,b("editor.action.autoFix.noneMessage","No auto fixes available"),{include:vi.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",void 0,ir.AutoFix)}}NL.Id="editor.action.autoFix";const RL=Fs.bindToContribution(Ug.get),AL=100+90;Be(new RL({id:"hideCodeActionMenuWidget",precondition:fC.Visible,handler(s){s.hideCodeActionMenu()},kbOpts:{weight:AL,primary:9,secondary:[1033]}}));Be(new RL({id:"focusPreviousCodeAction",precondition:fC.Visible,handler(s){s.navigateCodeActionList(!0)},kbOpts:{weight:AL+1e5,primary:16,secondary:[2064]}}));Be(new RL({id:"focusNextCodeAction",precondition:fC.Visible,handler(s){s.navigateCodeActionList(!1)},kbOpts:{weight:AL+1e5,primary:18,secondary:[2066]}}));Be(new RL({id:"onEnterSelectCodeAction",precondition:fC.Visible,handler(s){s.selectedOption()},kbOpts:{weight:AL+1e5,primary:3,secondary:[1026]}}));Be(new RL({id:"onEnterSelectCodeActionWithPreview",precondition:fC.Visible,handler(s){s.selectedOptionWithPreview()},kbOpts:{weight:AL+1e5,primary:2051}}));Wn.as(tf.Configuration).registerConfiguration(Object.assign(Object.assign({},I6),{properties:{"editor.experimental.useCustomCodeActionMenu":{type:"boolean",tags:["experimental"],scope:5,description:b("codeActionWidget","Enabling this adjusts how the code action menu is rendered."),default:!1}}}));Ei(Ug.ID,Ug);We(gC);We(OFe);We(PFe);We(FFe);We(BFe);We(NL);We(VFe);Be(new MFe);var XY=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class p9{constructor(){this.lenses=[],this._disposables=new Ae}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const i of e.lenses)this.lenses.push({symbol:i,provider:t})}}function Gne(s,e,t){return XY(this,void 0,void 0,function*(){const i=s.ordered(e),n=new Map,o=new p9,r=i.map((a,l)=>XY(this,void 0,void 0,function*(){n.set(a,l);try{const c=yield Promise.resolve(a.provideCodeLenses(e,t));c&&o.add(c,a)}catch(c){Ys(c)}}));return yield Promise.all(r),o.lenses=o.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:n.get(a.provider)<n.get(l.provider)?-1:n.get(a.provider)>n.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),o})}Li.registerCommand("_executeCodeLensProvider",function(s,...e){let[t,i]=e;Qi(yt.isUri(t)),Qi(typeof i=="number"||!i);const{codeLensProvider:n}=s.get(ct),o=s.get(Hn).getModel(t);if(!o)throw iu();const r=[],a=new Ae;return Gne(n,o,ri.None).then(l=>{a.add(l);const c=[];for(const d of l.lenses)i==null||Boolean(d.symbol.command)?r.push(d.symbol):i-- >0&&d.provider.resolveCodeLens&&c.push(Promise.resolve(d.provider.resolveCodeLens(o,d.symbol,ri.None)).then(f=>r.push(f||d.symbol)));return Promise.all(c)}).then(()=>r).finally(()=>{setTimeout(()=>a.dispose(),100)})});var WFe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},HFe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const Yne=bi("ICodeLensCache");class JY{constructor(e,t){this.lineCount=e,this.data=t}}let m9=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new tp(20,.75);const t="codelens/cache";Hy(()=>e.remove(t,1));const i="codelens/cache2",n=e.get(i,1,"{}");this._deserialize(n),qh(e.onWillSaveState)(o=>{o.reason===OI.SHUTDOWN&&e.store(i,this._serialize(),1,1)})}put(e,t){const i=t.lenses.map(r=>{var a;return{range:r.symbol.range,command:r.symbol.command&&{id:"",title:(a=r.symbol.command)===null||a===void 0?void 0:a.title}}}),n=new p9;n.add({lenses:i,dispose:()=>{}},this._fakeProvider);const o=new JY(e.getLineCount(),n);this._cache.set(e.uri.toString(),o)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,i]of this._cache){const n=new Set;for(const o of i.data.lenses)n.add(o.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...n.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const i in t){const n=t[i],o=[];for(const a of n.lines)o.push({range:new M(a,1,a,11)});const r=new p9;r.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(i,new JY(n.lineCount,r))}}catch{}}};m9=WFe([HFe(0,mc)],m9);ki(Yne,m9);class zFe{constructor(e,t,i){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class OR{constructor(e,t,i){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${OR._idPool++}`,this.updatePosition(i),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();const i=[];let n=!1;for(let o=0;o<e.length;o++){const r=e[o];if(!!r&&(n=!0,r.command)){const a=Em(r.command.title.trim());r.command.id?(i.push(Pe("a",{id:String(o),title:r.command.tooltip,role:"button"},...a)),this._commands.set(String(o),r.command)):i.push(Pe("span",{title:r.command.tooltip},...a)),o+1<e.length&&i.push(Pe("span",void 0,"\xA0|\xA0"))}}n?(Mg(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):Mg(this._domNode,Pe("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}OR._idPool=0;class gF{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let i=0,n=t.length;i<n;i++)this._addDecorationsCallbacks[i](t[i])}}class eZ{constructor(e,t,i,n,o,r,a){this._isDisposed=!1,this._editor=t,this._className=i,this._data=e,this._decorationIds=[];let l;const c=[];this._data.forEach((d,f)=>{d.symbol.command&&c.push(d.symbol),n.addDecoration({range:d.symbol.range,options:Gt.EMPTY},g=>this._decorationIds[f]=g),l?l=M.plusRange(l,d.symbol.range):l=M.lift(d.symbol.range)}),this._viewZone=new zFe(l.startLineNumber-1,r,a),this._viewZoneId=o.addZone(this._viewZone),c.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(c,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new OR(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t==null||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const i=this._editor.getModel().getDecorationRange(e),n=this._data[t].symbol;return!!(i&&M.isEmpty(n.range)===i.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((i,n)=>{t.addDecoration({range:i.symbol.range,options:Gt.EMPTY},o=>this._decorationIds[n]=o)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const i=e[t];if(i){const{symbol:n}=this._data[t];n.command=i.command||n.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var UFe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ww=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},$Fe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let B0=class{constructor(e,t,i,n,o,r){this._editor=e,this._languageFeaturesService=t,this._commandService=n,this._notificationService=o,this._codeLensCache=r,this._disposables=new Ae,this._localToDispose=new Ae,this._lenses=[],this._oldCodeLensModels=new Ae,this._provideCodeLensDebounce=i.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=i.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new Xi(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(46)||a.hasChanged(16)||a.hasChanged(15))&&this._updateLensStyle(),a.hasChanged(14)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+_B(this._editor.getId()).toString(16),this._styleElement=Il(Ky(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(61)/this._editor.getOption(48));let t=this._editor.getOption(16);return(!t||t<5)&&(t=this._editor.getOption(48)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(15),n=this._editor.getOption(46),o=`--codelens-font-family${this._styleClassName}`,r=`--codelens-font-features${this._styleClassName}`;let a=`
		.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(t*.5)}px; font-feature-settings: var(${r}) }
		.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }
		`;i&&(a+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${o}), ${ma.fontFamily}}`),this._styleElement.textContent=a,this._editor.getContainerDomNode().style.setProperty(o,i!=null?i:"inherit"),this._editor.getContainerDomNode().style.setProperty(r,n.fontFeatureSettings),this._editor.changeViewZones(l=>{for(const c of this._lenses)c.updateHeight(e,l)})}_localDispose(){var e,t,i;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(i=this._currentCodeLensModel)===null||i===void 0||i.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&this._localToDispose.add(Vm(()=>{const n=this._codeLensCache.get(e);t===n&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(const n of this._languageFeaturesService.codeLensProvider.all(e))if(typeof n.onDidChange=="function"){const o=n.onDidChange(()=>i.schedule());this._localToDispose.add(o)}const i=new Xi(()=>{var n;const o=Date.now();(n=this._getCodeLensModelPromise)===null||n===void 0||n.cancel(),this._getCodeLensModelPromise=qs(r=>Gne(this._languageFeaturesService.codeLensProvider,e,r)),this._getCodeLensModelPromise.then(r=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=r,this._codeLensCache.put(e,r);const a=this._provideCodeLensDebounce.update(e,Date.now()-o);i.delay=a,this._renderCodeLensSymbols(r),this._resolveCodeLensesInViewportSoon()},Yt)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(i),this._localToDispose.add(ni(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(n=>{this._editor.changeViewZones(o=>{const r=[];let a=-1;this._lenses.forEach(c=>{!c.isValid()||a===c.getLineNumber()?r.push(c):(c.update(o),a=c.getLineNumber())});const l=new gF;r.forEach(c=>{c.dispose(l,o),this._lenses.splice(this._lenses.indexOf(c),1)}),l.commit(n)})}),i.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{i.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(n=>{n.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(ni(()=>{if(this._editor.getModel()){const n=Wg.capture(this._editor);this._editor.changeDecorations(o=>{this._editor.changeViewZones(r=>{this._disposeAllLenses(o,r)})}),n.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(n=>{if(n.target.type!==9)return;let o=n.target.element;if((o==null?void 0:o.tagName)==="SPAN"&&(o=o.parentElement),(o==null?void 0:o.tagName)==="A")for(const r of this._lenses){const a=r.getCommand(o);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),i.schedule()}_disposeAllLenses(e,t){const i=new gF;for(const n of this._lenses)n.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),i=[];let n;for(const a of e.lenses){const l=a.symbol.range.startLineNumber;l<1||l>t||(n&&n[n.length-1].symbol.range.startLineNumber===l?n.push(a):(n=[a],i.push(n)))}const o=Wg.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const c=new gF;let d=0,f=0;for(;f<i.length&&d<this._lenses.length;){const g=i[f][0].symbol.range.startLineNumber,m=this._lenses[d].getLineNumber();m<g?(this._lenses[d].dispose(c,l),this._lenses.splice(d,1)):m===g?(this._lenses[d].updateCodeLensSymbols(i[f],c),f++,d++):(this._lenses.splice(d,0,new eZ(i[f],this._editor,this._styleClassName,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++,f++)}for(;d<this._lenses.length;)this._lenses[d].dispose(c,l),this._lenses.splice(d,1);for(;f<i.length;)this._lenses.push(new eZ(i[f],this._editor,this._styleClassName,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),f++;c.commit(a)})}),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const i=[],n=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(t);l&&(i.push(l),n.push(a))}),i.length===0)return;const o=Date.now(),r=qs(a=>{const l=i.map((c,d)=>{const f=new Array(c.length),g=c.map((m,_)=>!m.symbol.command&&typeof m.provider.resolveCodeLens=="function"?Promise.resolve(m.provider.resolveCodeLens(t,m.symbol,a)).then(C=>{f[_]=C},Ys):(f[_]=m.symbol,Promise.resolve(void 0)));return Promise.all(g).then(()=>{!a.isCancellationRequested&&!n[d].isDisposed()&&n[d].updateCommands(f)})});return Promise.all(l)});this._resolveCodeLensesPromise=r,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(t,Date.now()-o);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{Yt(a),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getModel(){return this._currentCodeLensModel}};B0.ID="css.editor.codeLens";B0=UFe([ww(1,ct),ww(2,Pl),ww(3,fs),ww(4,gs),ww(5,Yne)],B0);Ei(B0.ID,B0);We(class extends ot{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:$.hasCodeLensProvider,label:b("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return $Fe(this,void 0,void 0,function*(){if(!t.hasModel())return;const i=e.get(rf),n=e.get(fs),o=e.get(gs),r=t.getSelection().positionLineNumber,a=t.getContribution(B0.ID);if(!a)return;const l=a.getModel();if(!l)return;const c=[];for(const f of l.lenses)f.symbol.command&&f.symbol.range.startLineNumber===r&&c.push({label:f.symbol.command.title,command:f.symbol.command});if(c.length===0)return;const d=yield i.pick(c,{canPickMany:!1});if(!!d){if(l.isDisposed)return yield n.executeCommand(this.id);try{yield n.executeCommand(d.command.id,...d.command.arguments||[])}catch(f){o.error(f)}}})}});function jFe(s,e,t){const i=[],o=s.ordered(e).reverse().map(r=>Promise.resolve(r.provideDocumentColors(e,t)).then(a=>{if(Array.isArray(a))for(const l of a)i.push({colorInfo:l,provider:r})}));return Promise.all(o).then(()=>i)}function tZ(s,e,t,i){return Promise.resolve(t.provideColorPresentations(s,e,i))}Li.registerCommand("_executeDocumentColorProvider",function(s,...e){const[t]=e;if(!(t instanceof yt))throw iu();const{colorProvider:i}=s.get(ct),n=s.get(Hn).getModel(t);if(!n)throw iu();const o=[],a=i.ordered(n).reverse().map(l=>Promise.resolve(l.provideDocumentColors(n,ri.None)).then(c=>{if(Array.isArray(c))for(const d of c)o.push({range:d.range,color:[d.color.red,d.color.green,d.color.blue,d.color.alpha]})}));return Promise.all(a).then(()=>o)});Li.registerCommand("_executeColorPresentationProvider",function(s,...e){const[t,i]=e,{uri:n,range:o}=i;if(!(n instanceof yt)||!Array.isArray(t)||t.length!==4||!M.isIRange(o))throw iu();const[r,a,l,c]=t,{colorProvider:d}=s.get(ct),f=s.get(Hn).getModel(n);if(!f)throw iu();const g={range:o,color:{red:r,green:a,blue:l,alpha:c}},m=[],C=d.ordered(f).reverse().map(S=>Promise.resolve(S.provideColorPresentations(f,g,ri.None)).then(x=>{Array.isArray(x)&&m.push(...x)}));return Promise.all(C).then(()=>m)});var KFe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},pF=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},qFe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const Zne=Object.create({}),GFe=500;let n_=class Qne extends ge{constructor(e,t,i,n){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=i,this._localToDispose=this._register(new Ae),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new fL(this._editor),this._colorDecorationClassRefs=this._register(new Ae),this._debounceInformation=n.for(i.colorProvider,"Document Colors",{min:Qne.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(i.colorProvider.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{const o=this._isEnabled;this._isEnabled=this.isEnabled(),o!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&typeof i=="object"){const n=i.colorDecorators;if(n&&n.enable!==void 0&&!n.enable)return n.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Za,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}beginCompute(){this._computePromise=qs(e=>qFe(this,void 0,void 0,function*(){const t=this._editor.getModel();if(!t)return Promise.resolve([]);const i=new qr(!1),n=yield jFe(this._languageFeaturesService.colorProvider,t,e);return this._debounceInformation.update(t,i.elapsed()),n})),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},Yt)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(i=>({range:{startLineNumber:i.colorInfo.range.startLineNumber,startColumn:i.colorInfo.range.startColumn,endLineNumber:i.colorInfo.range.endLineNumber,endColumn:i.colorInfo.range.endColumn},options:Gt.EMPTY}));this._editor.changeDecorations(i=>{this._decorationsIds=i.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((n,o)=>this._colorDatas.set(n,e[o]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[];for(let i=0;i<e.length&&t.length<GFe;i++){const{red:n,green:o,blue:r,alpha:a}=e[i].colorInfo.color,l=new pi(Math.round(n*255),Math.round(o*255),Math.round(r*255),a),c=`rgba(${l.r}, ${l.g}, ${l.b}, ${l.a})`,d=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:c}));t.push({range:{startLineNumber:e[i].colorInfo.range.startLineNumber,startColumn:e[i].colorInfo.range.startColumn,endLineNumber:e[i].colorInfo.range.endLineNumber,endColumn:e[i].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:swe,inlineClassName:`${d.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:Zne}}})}this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const i=t.getDecorationsInRange(M.fromPositions(e,e)).filter(n=>this._colorDatas.has(n.id));return i.length===0?null:this._colorDatas.get(i[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};n_.ID="editor.contrib.colorDetector";n_.RECOMPUTE_TIME=1e3;n_=KFe([pF(1,Ai),pF(2,ct),pF(3,Pl)],n_);Ei(n_.ID,n_);class YFe{constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new J,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new J,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new J,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let i=0;i<this.colorPresentations.length;i++)if(t.toLowerCase()===this.colorPresentations[i].label){this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}const Jc=Pe;class ZFe extends ge{constructor(e,t,i){super(),this.model=t,this.domNode=Jc(".colorpicker-header"),Se(e,this.domNode),this.pickedColorNode=Se(this.domNode,Jc(".picked-color"));const n=b("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",n);const o=Se(this.domNode,Jc(".original-color"));o.style.backgroundColor=oe.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(jm)||oe.white,this._register(Cn((r,a)=>{this.backgroundColor=r.getColor(jm)||oe.white})),this._register(Le(this.pickedColorNode,it.CLICK,()=>this.model.selectNextColorPresentation())),this._register(Le(o,it.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=oe.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=oe.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(Jc(".codicon.codicon-color-mode"))}}class QFe extends ge{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this.domNode=Jc(".colorpicker-body"),Se(e,this.domNode),this.saturationBox=new XFe(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new JFe(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new e5e(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const i=this.model.color.hsva;this.model.color=new oe(new sd(i.h,e,t,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new oe(new sd(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,i=(1-e)*360;this.model.color=new oe(new sd(i===360?0:i,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class XFe extends ge{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new J,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new J,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Jc(".saturation-wrap"),Se(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",Se(this.domNode,this.canvas),this.selection=Jc(".saturation-selection"),Se(this.domNode,this.selection),this.layout(),this._register(Le(this.domNode,it.POINTER_DOWN,n=>this.onPointerDown(n))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new oC);const t=Oo(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>this.onDidChangePosition(n.pageX-t.left,n.pageY-t.top),()=>null);const i=Le(document,it.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const i=Math.max(0,Math.min(1,e/this.width)),n=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,n),this._onDidChange.fire({s:i,v:n})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new oe(new sd(e.h,1,1,1)),i=this.canvas.getContext("2d"),n=i.createLinearGradient(0,0,this.canvas.width,0);n.addColorStop(0,"rgba(255, 255, 255, 1)"),n.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),n.addColorStop(1,"rgba(255, 255, 255, 0)");const o=i.createLinearGradient(0,0,0,this.canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this.canvas.width,this.canvas.height),i.fillStyle=oe.Format.CSS.format(t),i.fill(),i.fillStyle=n,i.fill(),i.fillStyle=o,i.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class Xne extends ge{constructor(e,t){super(),this.model=t,this._onDidChange=new J,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new J,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Se(e,Jc(".strip")),this.overlay=Se(this.domNode,Jc(".overlay")),this.slider=Se(this.domNode,Jc(".slider")),this.slider.style.top="0px",this._register(Le(this.domNode,it.POINTER_DOWN,i=>this.onPointerDown(i))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new oC),i=Oo(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,o=>this.onDidChangeTop(o.pageY-i.top),()=>null);const n=Le(document,it.POINTER_UP,()=>{this._onColorFlushed.fire(),n.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class JFe extends Xne{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:i,b:n}=e.rgba,o=new oe(new pi(t,i,n,1)),r=new oe(new pi(t,i,n,0));this.overlay.style.background=`linear-gradient(to bottom, ${o} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}}class e5e extends Xne{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class t5e extends gc{constructor(e,t,i,n){super(),this.model=t,this.pixelRatio=i,this._register(f0.onDidChange(()=>this.layout()));const o=Jc(".colorpicker-widget");e.appendChild(o);const r=new ZFe(o,this.model,n);this.body=new QFe(o,this.model,this.pixelRatio),this._register(r),this._register(this.body)}layout(){this.body.layout()}}var i5e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},n5e=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},iZ=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class s5e{constructor(e,t,i,n){this.owner=e,this.range=t,this.model=i,this.provider=n,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let _9=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=1}computeSync(e,t){return[]}computeAsync(e,t,i){return us.fromPromise(this._computeAsync(e,t,i))}_computeAsync(e,t,i){return iZ(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const n=n_.get(this._editor);if(!n)return[];for(const o of t){if(!n.isColorDecoration(o))continue;const r=n.getColorData(o.range.getStartPosition());if(r)return[yield this._createColorHover(this._editor.getModel(),r.colorInfo,r.provider)]}return[]})}_createColorHover(e,t,i){return iZ(this,void 0,void 0,function*(){const n=e.getValueInRange(t.range),{red:o,green:r,blue:a,alpha:l}=t.color,c=new pi(Math.round(o*255),Math.round(r*255),Math.round(a*255),l),d=new oe(c),f=yield tZ(e,t,i,ri.None),g=new YFe(d,[],0);return g.colorPresentations=f||[],g.guessColorPresentation(d,n),new s5e(this,M.lift(t.range),g,i)})}renderHoverParts(e,t){if(t.length===0||!this._editor.hasModel())return ge.None;const i=new Ae,n=t[0],o=this._editor.getModel(),r=n.model,a=i.add(new t5e(e.fragment,r,this._editor.getOption(131),this._themeService));e.setColorPicker(a);let l=new M(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn);const c=()=>{let f,g;if(r.presentation.textEdit){f=[r.presentation.textEdit],g=new M(r.presentation.textEdit.range.startLineNumber,r.presentation.textEdit.range.startColumn,r.presentation.textEdit.range.endLineNumber,r.presentation.textEdit.range.endColumn);const m=this._editor.getModel()._setTrackedRange(null,g,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",f),g=this._editor.getModel()._getTrackedRange(m)||g}else f=[{range:l,text:r.presentation.label,forceMoveMarkers:!1}],g=l.setEndPosition(l.endLineNumber,l.startColumn+r.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",f);r.presentation.additionalTextEdits&&(f=[...r.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",f),e.hide()),this._editor.pushUndoStop(),l=g},d=f=>tZ(o,{range:l,color:{red:f.rgba.r/255,green:f.rgba.g/255,blue:f.rgba.b/255,alpha:f.rgba.a}},n.provider,ri.None).then(g=>{r.colorPresentations=g||[]});return i.add(r.onColorFlushed(f=>{d(f).then(c)})),i.add(r.onDidChangeColor(d)),i}};_9=i5e([n5e(1,cn)],_9);function v9(s,e){return!!s[e]}class mF{constructor(e,t){this.target=e.target,this.hasTriggerModifier=v9(e.event,t.triggerModifier),this.hasSideBySideModifier=v9(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class nZ{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=v9(e,t.triggerModifier)}}class nE{constructor(e,t,i,n){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=n}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function sZ(s){return s==="altKey"?mi?new nE(57,"metaKey",6,"altKey"):new nE(5,"ctrlKey",6,"altKey"):mi?new nE(6,"altKey",57,"metaKey"):new nE(6,"altKey",5,"ctrlKey")}class xV extends ge{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new J),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new J),this.onExecute=this._onExecute.event,this._onCancel=this._register(new J),this.onCancel=this._onCancel.event,this._editor=e,this._opts=sZ(this._editor.getOption(72)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(72)){const i=sZ(this._editor.getOption(72));if(this._opts.equals(i))return;this._opts=i,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new mF(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new mF(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new mF(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new nZ(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new nZ(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var o5e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},lh=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let s_=class extends k0{constructor(e,t,i,n,o,r,a,l,c,d,f,g){super(e,Object.assign(Object.assign({},i.getRawOptions()),{overflowWidgetsDomNode:i.getOverflowWidgetsDomNode()}),{},n,o,r,a,l,c,d,f,g),this._parentEditor=i,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(i.onDidChangeConfiguration(m=>this._onParentConfigurationChanged(m)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){xd(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};s_=o5e([lh(3,Zt),lh(4,Vi),lh(5,fs),lh(6,jt),lh(7,cn),lh(8,gs),lh(9,nf),lh(10,os),lh(11,ct)],s_);const oZ=new oe(new pi(0,122,204)),r5e={showArrow:!0,showFrame:!0,className:"",frameColor:oZ,arrowColor:oZ,keepEditorSelection:!1},a5e="vs.editor.contrib.zoneWidget";class l5e{constructor(e,t,i,n,o,r){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=i,this.heightInLines=n,this._onDomNodeTop=o,this._onComputedHeight=r}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class c5e{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class PR{constructor(e){this._editor=e,this._ruleName=PR._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),cq(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){cq(this._ruleName),E3(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:M.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}}PR._IdGenerator=new V6(".arrow-decoration-");class u5e{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new Ae,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=vh(t),xd(this.options,r5e,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(i=>{const n=this._getWidth(i);this.domNode.style.width=n+"px",this.domNode.style.left=this._getLeft(i)+"px",this._onWidth(n)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new PR(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){const t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const i=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(i))}this._resizeSash&&this._resizeSash.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(!!e)return e.getStartPosition()}show(e,t){const i=M.isIRange(e)?M.lift(e):M.fromPositions(e);this._isShowing=!0,this._showImpl(i,t),this._isShowing=!1,this._positionMarkerId.set([{range:i,options:Gt.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){const e=this.editor.getOption(61);let t=0;if(this.options.showArrow){const i=Math.round(e/3);t+=2*i}if(this.options.showFrame){const i=Math.round(e/9);t+=2*i}return t}_showImpl(e,t){const i=e.getStartPosition(),n=this.editor.getLayoutInfo(),o=this._getWidth(n);this.domNode.style.width=`${o}px`,this.domNode.style.left=this._getLeft(n)+"px";const r=document.createElement("div");r.style.overflow="hidden";const a=this.editor.getOption(61),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let c=0,d=0;if(this._arrow&&this.options.showArrow&&(c=Math.round(a/3),this._arrow.height=c,this._arrow.show(i)),this.options.showFrame&&(d=Math.round(a/9)),this.editor.changeViewZones(m=>{this._viewZone&&m.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new l5e(r,i.lineNumber,i.column,t,_=>this._onViewZoneTop(_),_=>this._onViewZoneHeight(_)),this._viewZone.id=m.addZone(this._viewZone),this._overlayWidget=new c5e(a5e+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const m=this.options.frameWidth?this.options.frameWidth:d;this.container.style.borderTopWidth=m+"px",this.container.style.borderBottomWidth=m+"px"}const f=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=c+"px",this.container.style.height=f+"px",this.container.style.overflow="hidden"),this._doLayout(f,o),this.options.keepEditorSelection||this.editor.setSelection(e);const g=this.editor.getModel();if(g){const m=e.endLineNumber+1;m<=g.getLineCount()?this.revealLine(m,!1):this.revealLine(g.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){!this.container||(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Ro(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const i=(t.currentY-e.startY)/this.editor.getOption(61),n=i<0?Math.ceil(i):Math.floor(i),o=e.heightInLines+n;o>5&&o<35&&this._relayout(o)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}class d5e extends _0{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new J),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=Se(e,Pe(".monaco-dropdown")),this._label=Se(this._element,Pe(".dropdown-label"));let i=t.labelRenderer;i||(i=o=>(o.textContent=t.label||"",null));for(const o of[it.CLICK,it.MOUSE_DOWN,vn.Tap])this._register(Le(this.element,o,r=>qi.stop(r,!0)));for(const o of[it.MOUSE_DOWN,vn.Tap])this._register(Le(this._label,o,r=>{r instanceof MouseEvent&&(r.detail>1||r.button!==0)||(this.visible?this.hide():this.show())}));this._register(Le(this._label,it.KEY_UP,o=>{const r=new kn(o);(r.equals(3)||r.equals(10))&&(qi.stop(o,!0),this.visible?this.hide():this.show())}));const n=i(this._label);n&&this._register(n),this._register(Zi.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class h5e extends d5e{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class Jne extends Yu{constructor(e,t,i,n=Object.create(null)){super(null,e,n),this.actionItem=null,this._onDidChangeVisibility=this._register(new J),this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=n,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=o=>{this.element=Se(o,Pe("a.action-label"));let r=[];return typeof this.options.classNames=="string"?r=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(r=this.options.classNames),r.find(a=>a==="icon")||r.push("codicon"),this.element.classList.add(...r),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",this.element.ariaLabel=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),n={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new h5e(e,n)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{var r;(r=this.element)===null||r===void 0||r.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const o=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return o.options.anchorAlignmentProvider()}})}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.getAction().tooltip?e=this.getAction().tooltip:this.getAction().label&&(e=this.getAction().label),e!=null?e:void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const i=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",i),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",i)}}var DV=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},fl=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},ese=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};function f5e(s,e,t,i,n,o,r){const a=s.getActions(e);return p5e(a,t,!1,typeof i=="string"?c=>c===i:i,n,o,r),g5e(a)}function g5e(s){const e=new Ae;for(const[,t]of s)for(const i of t)e.add(i);return e}function p5e(s,e,t,i=a=>a==="navigation",n=Number.MAX_SAFE_INTEGER,o=()=>!1,r=!1){let a,l;Array.isArray(e)?(a=e,l=e):(a=e.primary,l=e.secondary);const c=new Set;for(const[d,f]of s){let g;i(d)?(g=a,g.length>0&&r&&g.push(new Bo)):(g=l,g.length>0&&g.push(new Bo));for(let m of f){t&&(m=m instanceof Pg&&m.alt?m.alt:m);const _=g.push(m);m instanceof Yy&&c.add({group:d,action:m,index:_-1})}}for(const{group:d,action:f,index:g}of c){const m=i(d)?a:l,_=f.actions;(_.length<=1||m.length+_.length-2<=n)&&o(f,d,m.length)&&m.splice(g,1,..._)}if(a!==l&&a.length>n){const d=a.splice(n,a.length-n);l.unshift(...d,new Bo)}}let V0=class extends hS{constructor(e,t,i,n,o,r,a){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable,keybinding:t==null?void 0:t.keybinding,hoverDelegate:t==null?void 0:t.hoverDelegate}),this._keybindingService=i,this._notificationService=n,this._contextKeyService=o,this._themeService=r,this._contextMenuService=a,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new tr),this._altKey=ag.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return ese(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,i=this._altKey.keyStatus.altKey||(mo||Wo)&&this._altKey.keyStatus.shiftKey;const n=()=>{var o;const r=t&&i&&!!(!((o=this._commandAction.alt)===null||o===void 0)&&o.enabled);r!==this._wantsAltCommand&&(this._wantsAltCommand=r,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(o=>{i=o.altKey||(mo||Wo)&&o.shiftKey,n()})),this._register(Le(e,"mouseleave",o=>{t=!1,n()})),this._register(Le(e,"mouseenter",o=>{t=!0,n()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var e;const t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),i=t&&t.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let o=i?b("titleAndKb","{0} ({1})",n,i):n;if(!this._wantsAltCommand&&((e=this._menuItemAction.alt)===null||e===void 0?void 0:e.enabled)){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?b("titleAndKb","{0} ({1})",r,l):r;o=b("titleAndKbAndAlt",`{0}
[{1}] {2}`,o,N6.modifierLabels[gl].altKey,c)}return o}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:i,label:n}=this;if(!i||!n)return;const o=this._commandAction.checked&&((t=e.toggled)===null||t===void 0?void 0:t.icon)?e.toggled.icon:e.icon;if(!!o)if(Pi.isThemeIcon(o)){const r=Pi.asClassNameArray(o);n.classList.add(...r),this._itemClassDispose.value=ni(()=>{n.classList.remove(...r)})}else n.style.backgroundImage=Zy(this._themeService.getColorTheme().type)?Um(o.dark):Um(o.light),n.classList.add("icon"),this._itemClassDispose.value=nu(ni(()=>{n.style.backgroundImage="",n.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};V0=DV([fl(2,xs),fl(3,gs),fl(4,jt),fl(5,cn),fl(6,sf)],V0);let b9=class extends Jne{constructor(e,t,i,n){var o,r;const a=Object.assign({},t!=null?t:Object.create(null),{menuAsChild:(o=t==null?void 0:t.menuAsChild)!==null&&o!==void 0?o:!1,classNames:(r=t==null?void 0:t.classNames)!==null&&r!==void 0?r:Pi.isThemeIcon(e.item.icon)?Pi.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},i,a),this._contextMenuService=i,this._themeService=n}render(e){super.render(e),Qi(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!Pi.isThemeIcon(i)){this.element.classList.add("icon");const n=()=>{this.element&&(this.element.style.backgroundImage=Zy(this._themeService.getColorTheme().type)?Um(i.dark):Um(i.light))};n(),this._register(this._themeService.onDidColorThemeChange(()=>{n()}))}}};b9=DV([fl(2,sf),fl(3,cn)],b9);let C9=class extends Yu{constructor(e,t,i,n,o,r,a,l){var c,d,f;super(null,e),this._keybindingService=i,this._notificationService=n,this._contextMenuService=o,this._menuService=r,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let g;const m=l.get(this._storageKey,1);m&&(g=e.actions.find(C=>m===C.id)),g||(g=e.actions[0]),this._defaultAction=this._instaService.createInstance(V0,g,{keybinding:this._getDefaultActionKeybindingLabel(g)});const _=Object.assign({},t!=null?t:Object.create(null),{menuAsChild:(c=t==null?void 0:t.menuAsChild)!==null&&c!==void 0?c:!0,classNames:(d=t==null?void 0:t.classNames)!==null&&d!==void 0?d:["codicon","codicon-chevron-down"],actionRunner:(f=t==null?void 0:t.actionRunner)!==null&&f!==void 0?f:new _0});this._dropdown=new Jne(e,e.actions,this._contextMenuService,_),this._dropdown.actionRunner.onDidRun(C=>{C.action instanceof Pg&&this.update(C.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(V0,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends _0{runAction(t,i){return ese(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(_Le(this._container,Pe(".action-container")))}_getDefaultActionKeybindingLabel(e){var t;let i;if(!((t=this._options)===null||t===void 0)&&t.renderKeybindingWithDefaultActionLabel){const n=this._keybindingService.lookupKeybinding(e.id);n&&(i=`(${n.getLabel()})`)}return i}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=Pe(".action-container");this._defaultAction.render(Se(this._container,t)),this._register(Le(t,it.KEY_DOWN,n=>{const o=new kn(n);o.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),o.stopPropagation())}));const i=Pe(".dropdown-action-container");this._dropdown.render(Se(this._container,i)),this._register(Le(i,it.KEY_DOWN,n=>{var o;const r=new kn(n);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(o=this._defaultAction.element)===null||o===void 0||o.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};C9=DV([fl(2,xs),fl(3,gs),fl(4,sf),fl(5,L_),fl(6,Zt),fl(7,mc)],C9);function m5e(s,e,t){return e instanceof Pg?s.createInstance(V0,e,t):e instanceof IB?e.item.rememberDefaultAction?s.createInstance(C9,e,t):s.createInstance(b9,e,t):void 0}var tse=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ise=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const nse=bi("IPeekViewService");ki(nse,class{constructor(){this._widgets=new Map}addExclusiveWidget(s,e){const t=this._widgets.get(s);t&&(t.listener.dispose(),t.widget.dispose());const i=()=>{const n=this._widgets.get(s);n&&n.widget===e&&(n.listener.dispose(),this._widgets.delete(s))};this._widgets.set(s,{widget:e,listener:e.onDidClose(i)})}});var Gr;(function(s){s.inPeekEditor=new st("inReferenceSearchEditor",!0,b("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),s.notInPeekEditor=s.inPeekEditor.toNegated()})(Gr||(Gr={}));let IS=class{constructor(e,t){e instanceof s_&&Gr.inPeekEditor.bindTo(t)}dispose(){}};IS.ID="editor.contrib.referenceController";IS=tse([ise(1,jt)],IS);Ei(IS.ID,IS);function _5e(s){const e=s.get(Vi).getFocusedCodeEditor();return e instanceof s_?e.getParentEditor():e}const v5e={headerBackgroundColor:oe.white,primaryHeadingColor:oe.fromHex("#333333"),secondaryHeadingColor:oe.fromHex("#6c6c6cb3")};let HI=class extends u5e{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new J,this.onDidClose=this._onDidClose.event,xd(this.options,v5e,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=Pe(".head"),this._bodyElement=Pe(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const i=Pe(".peekview-title");this.options.supportOnTitleClick&&(i.classList.add("clickable"),Ps(i,"click",r=>this._onTitleClick(r))),Se(this._headElement,i),this._fillTitleIcon(i),this._primaryHeading=Pe("span.filename"),this._secondaryHeading=Pe("span.dirname"),this._metaHeading=Pe("span.meta"),Se(i,this._primaryHeading,this._secondaryHeading,this._metaHeading);const n=Pe(".peekview-actions");Se(this._headElement,n);const o=this._getActionBarOptions();this._actionbarWidget=new Cd(n,o),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new _a("peekview.close",b("label.close","Close"),w.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:m5e.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Ts(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Wa(this._metaHeading)):Vr(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const i=Math.ceil(this.editor.getOption(61)*1.2),n=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(n,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};HI=tse([ise(2,Zt)],HI);const b5e=j("peekViewTitle.background",{dark:pt(jr,.1),light:pt(jr,.1),hcDark:null,hcLight:null},b("peekViewTitleBackground","Background color of the peek view title area.")),sse=j("peekViewTitleLabel.foreground",{dark:oe.white,light:oe.black,hcDark:oe.white,hcLight:za},b("peekViewTitleForeground","Color of the peek view title.")),ose=j("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},b("peekViewTitleInfoForeground","Color of the peek view title info.")),C5e=j("peekView.border",{dark:jr,light:jr,hcDark:si,hcLight:si},b("peekViewBorder","Color of the peek view borders and arrow.")),w5e=j("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:oe.black,hcLight:oe.white},b("peekViewResultsBackground","Background color of the peek view result list."));j("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:oe.white,hcLight:za},b("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));j("peekViewResult.fileForeground",{dark:oe.white,light:"#1E1E1E",hcDark:oe.white,hcLight:za},b("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));j("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},b("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));j("peekViewResult.selectionForeground",{dark:oe.white,light:"#6C6C6C",hcDark:oe.white,hcLight:za},b("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const sE=j("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:oe.black,hcLight:oe.white},b("peekViewEditorBackground","Background color of the peek view editor."));j("peekViewEditorGutter.background",{dark:sE,light:sE,hcDark:sE,hcLight:sE},b("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));j("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},b("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));j("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},b("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));j("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:En,hcLight:En},b("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var y5e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class $g{constructor(e,t,i,n){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=n,this.id=oie.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?b({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",Rl(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):b("aria.oneReference","symbol in {0} on line {1} at column {2}",Rl(this.uri),this.range.startLineNumber,this.range.startColumn)}}class S5e{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:n,startColumn:o,endLineNumber:r,endColumn:a}=e,l=i.getWordUntilPosition({lineNumber:n,column:o-t}),c=new M(n,l.startColumn,n,o),d=new M(r,a,r,1073741824),f=i.getValueInRange(c).replace(/^\s+/,""),g=i.getValueInRange(e),m=i.getValueInRange(d).replace(/\s+$/,"");return{value:f+g+m,highlight:{start:f.length,end:f.length+g.length}}}}class NS{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new er}dispose(){Ni(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?b("aria.fileReferences.1","1 symbol in {0}, full path {1}",Rl(this.uri),this.uri.fsPath):b("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Rl(this.uri),this.uri.fsPath)}resolve(e){return y5e(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const i=yield e.createModelReference(t.uri);this._previews.set(t.uri,new S5e(i))}catch(i){Yt(i)}return this})}}class va{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new J,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;e.sort(va._compareReferences);let n;for(const o of e)if((!n||!bn.isEqual(n.uri,o.uri,!0))&&(n=new NS(this,o.uri),this.groups.push(n)),n.children.length===0||va._compareReferences(o,n.children[n.children.length-1])!==0){const r=new $g(i===o,n,o,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(r),n.children.push(r)}}dispose(){Ni(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new va(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?b("aria.result.0","No results found"):this.references.length===1?b("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?b("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):b("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:i}=e;let n=i.children.indexOf(e);const o=i.children.length,r=i.parent.groups.length;return r===1||t&&n+1<o||!t&&n>0?(t?n=(n+1)%o:n=(n+o-1)%o,i.children[n]):(n=i.parent.groups.indexOf(i),t?(n=(n+1)%r,i.parent.groups[n].children[0]):(n=(n+r-1)%r,i.parent.groups[n].children[i.parent.groups[n].children.length-1]))}nearestReference(e,t){const i=this.references.map((n,o)=>({idx:o,prefixLen:Fm(n.uri.toString(),e.toString()),offsetDist:Math.abs(n.range.startLineNumber-t.lineNumber)*100+Math.abs(n.range.startColumn-t.column)})).sort((n,o)=>n.prefixLen>o.prefixLen?-1:n.prefixLen<o.prefixLen?1:n.offsetDist<o.offsetDist?-1:n.offsetDist>o.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&M.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return bn.compare(e.uri,t.uri)||M.compareRangesUsingStarts(e.range,t.range)}}var FR=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},RS=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let w9=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof va||e instanceof NS}getChildren(e){if(e instanceof va)return e.groups;if(e instanceof NS)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};w9=FR([RS(0,Yr)],w9);class L5e{getHeight(){return 23}getTemplateId(e){return e instanceof NS?AS.id:ML.id}}let y9=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof $g){const i=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(i)return i.value}return Rl(e.uri)}};y9=FR([RS(0,xs)],y9);class x5e{getId(e){return e instanceof $g?e.id:e.uri}}let S9=class extends ge{constructor(e,t,i){super(),this._labelService=t;const n=document.createElement("div");n.classList.add("reference-file"),this.file=this._register(new II(n,{supportHighlights:!0})),this.badge=new T7(Se(n,Pe(".count"))),this._register(C2e(this.badge,i)),e.appendChild(n)}set(e,t){const i=nR(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(i,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const n=e.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat(b("referencesCount","{0} references",n)):this.badge.setTitleFormat(b("referenceCount","{0} reference",n))}};S9=FR([RS(1,I0),RS(2,cn)],S9);let AS=class rse{constructor(e){this._instantiationService=e,this.templateId=rse.id}renderTemplate(e){return this._instantiationService.createInstance(S9,e)}renderElement(e,t,i){i.set(e.element,lR(e.filterData))}disposeTemplate(e){e.dispose()}};AS.id="FileReferencesRenderer";AS=FR([RS(0,Zt)],AS);class D5e{constructor(e){this.label=new Qm(e)}set(e,t){var i;const n=(i=e.parent.getPreview(e))===null||i===void 0?void 0:i.preview(e.range);if(!n||!n.value)this.label.set(`${Rl(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:o,highlight:r}=n;t&&!ou.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(o,lR(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(o,[r]))}}}class ML{constructor(){this.templateId=ML.id}renderTemplate(e){return new D5e(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(){}}ML.id="OneReferenceRenderer";class k5e{getWidgetAriaLabel(){return b("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var E5e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ch=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},rZ=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class BR{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new Ae,this._callOnModelChange=new Ae,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(!!e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],i=[];for(let n=0,o=e.children.length;n<o;n++){const r=e.children[n];this._decorationIgnoreSet.has(r.id)||r.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:r.range,options:BR.DecorationOptions}),i.push(n))}this._editor.changeDecorations(n=>{const o=n.deltaDecorations([],t);for(let r=0;r<o.length;r++)this._decorations.set(o[r],e.children[i[r]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(!!t){for(const[i,n]of this._decorations){const o=t.getDecorationRange(i);if(!o)continue;let r=!1;if(!M.equalsRange(o,n.range)){if(M.spansMultipleLines(o))r=!0;else{const a=n.range.endColumn-n.range.startColumn,l=o.endColumn-o.startColumn;a!==l&&(r=!0)}r?(this._decorationIgnoreSet.add(n.id),e.push(i)):n.range=o}}for(let i=0,n=e.length;i<n;i++)this._decorations.delete(e[i]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}BR.DecorationOptions=Gt.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class T5e{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const n=JSON.parse(e);t=n.ratio,i=n.heightInLines}catch{}return{ratio:t||.7,heightInLines:i||18}}}class I5e extends H7{}let L9=class extends HI{constructor(e,t,i,n,o,r,a,l,c,d,f,g){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=o,this._instantiationService=r,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=c,this._keybindingService=d,this._languageService=f,this._languageConfigurationService=g,this._disposeOnNewModel=new Ae,this._callOnDispose=new Ae,this._onDidSelectReference=new J,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new ln(0,0),this._applyTheme(n.getColorTheme()),this._callOnDispose.add(n.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),Ni(this._preview),Ni(this._previewNotAvailableMessage),Ni(this._tree),Ni(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(C5e)||oe.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(b5e)||oe.transparent,primaryHeadingColor:e.getColor(sse),secondaryHeadingColor:e.getColor(ose)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=Se(e,Pe("div.messages")),Vr(this._messageContainer),this._splitView=new vie(e,{orientation:1}),this._previewContainer=Se(e,Pe("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(s_,this._previewContainer,t,this.editor),Vr(this._previewContainer),this._previewNotAvailableMessage=new Qh(b("missingPreviewMessage","no preview available"),xl,Qh.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=Se(e,Pe("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new k5e,keyboardNavigationLabelProvider:this._instantiationService.createInstance(y9),identityProvider:new x5e,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:w5e}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Ps(this._treeContainer,"keydown",o=>{o.equals(9)&&(this._keybindingService.dispatchEvent(o,o.target),o.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(I5e,"ReferencesWidget",this._treeContainer,new L5e,[this._instantiationService.createInstance(AS),this._instantiationService.createInstance(ML)],this._instantiationService.createInstance(w9),i),this._splitView.addView({onDidChange:gt.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:o=>{this._preview.layout({height:this._dim.height,width:o})}},RI.Distribute),this._splitView.addView({onDidChange:gt.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:o=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${o}px`,this._tree.layout(this._dim.height,o)}},RI.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const n=(o,r)=>{o instanceof $g&&(r==="show"&&this._revealReference(o,!1),this._onDidSelectReference.fire({element:o,kind:r,source:"tree"}))};this._tree.onDidOpen(o=>{o.sideBySide?n(o.element,"side"):o.editorOptions.pinned?n(o.element,"goto"):n(o.element,"show")}),Vr(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new ln(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{!this._model||(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=b("noResults","No results"),Wa(this._messageContainer),Promise.resolve(void 0)):(Vr(this._messageContainer),this._decorationsManager=new BR(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:i}=e;if(t.detail!==2)return;const n=this._getFocusedReference();!n||this._onDidSelectReference.fire({element:{uri:n.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Wa(this._treeContainer),Wa(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof $g)return e;if(e instanceof NS&&e.children.length>0)return e.children[0]}revealReference(e){return rZ(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return rZ(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==Xt.inMemory?this.setTitle(jTe(e.uri),this._uriLabel.getUriLabel(nR(e.uri))):this.setTitle(b("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const n=yield i;if(!this._model){n.dispose();return}Ni(this._previewModelReference);const o=n.object;if(o){const r=this._preview.getModel()===o.textEditorModel?0:1,a=M.lift(e.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(o.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,r)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()})}};L9=E5e([ch(3,cn),ch(4,Yr),ch(5,Zt),ch(6,nse),ch(7,I0),ch(8,sR),ch(9,xs),ch(10,Vn),ch(11,os)],L9);var N5e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Yv=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},aZ=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const M_=new st("referenceSearchVisible",!1,b("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let jg=class x9{constructor(e,t,i,n,o,r,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=n,this._notificationService=o,this._instantiationService=r,this._storageService=a,this._configurationService=l,this._disposables=new Ae,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=M_.bindTo(i)}static get(e){return e.getContribution(x9.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let n;if(this._widget&&(n=this._widget.position),this.closeWidget(),!!n&&e.containsPosition(n))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const o="peekViewLayout",r=T5e.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(L9,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(b("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{const{element:c,kind:d}=l;if(!!c)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":i?this._gotoReference(c):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)===null||c===void 0||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(b("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const d=this._editor.getModel().uri,f=new se(e.startLineNumber,e.startColumn),g=this._model.nearestReference(d,f);if(g)return this._widget.setSelection(g).then(()=>{this._widget&&this._editor.getOption(79)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){!this._widget||(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return aZ(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const n=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(n),yield this._gotoReference(n),o?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()})}revealReference(e){return aZ(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,i;(t=this._widget)===null||t===void 0||t.dispose(),(i=this._model)===null||i===void 0||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=M.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t,selectionSource:"code.jump"}},this._editor).then(i=>{var n;if(this._ignoreModelChangeEvent=!1,!i||!this._widget){this.closeWidget();return}if(this._editor===i)this._widget.show(t),this._widget.focusOnReferenceTree();else{const o=x9.get(i),r=this._model.clone();this.closeWidget(),i.focus(),o==null||o.toggleWidget(t,qs(a=>Promise.resolve(r)),(n=this._peekMode)!==null&&n!==void 0?n:!1)}},i=>{this._ignoreModelChangeEvent=!1,Yt(i)})}openReference(e,t,i){t||this.closeWidget();const{uri:n,range:o}=e;this._editorService.openCodeEditor({resource:n,options:{selection:o,selectionSource:"code.jump",pinned:i}},this._editor,t)}};jg.ID="editor.contrib.referencesController";jg=N5e([Yv(2,jt),Yv(3,Vi),Yv(4,gs),Yv(5,Zt),Yv(6,mc),Yv(7,Ai)],jg);function O_(s,e){const t=_5e(s);if(!t)return;const i=jg.get(t);i&&e(i)}ya.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Is(2089,60),when:Je.or(M_,Gr.inPeekEditor),handler(s){O_(s,e=>{e.changeFocusBetweenPreviewAndReferences()})}});ya.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:Je.or(M_,Gr.inPeekEditor),handler(s){O_(s,e=>{e.goToNextOrPreviousReference(!0)})}});ya.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:Je.or(M_,Gr.inPeekEditor),handler(s){O_(s,e=>{e.goToNextOrPreviousReference(!1)})}});Li.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Li.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Li.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Li.registerCommand("closeReferenceSearch",s=>O_(s,e=>e.closeWidget()));ya.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:Je.and(Gr.inPeekEditor,Je.not("config.editor.stablePeek"))});ya.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:Je.and(M_,Je.not("config.editor.stablePeek"))});ya.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:Je.and(M_,Iie,eV.negate(),tV.negate()),handler(s){var e;const i=(e=s.get(Fl).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(i)&&i[0]instanceof $g&&O_(s,n=>n.revealReference(i[0]))}});ya.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:Je.and(M_,Iie,eV.negate(),tV.negate()),handler(s){var e;const i=(e=s.get(Fl).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(i)&&i[0]instanceof $g&&O_(s,n=>n.openReference(i[0],!0,!0))}});Li.registerCommand("openReference",s=>{var e;const i=(e=s.get(Fl).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(i)&&i[0]instanceof $g&&O_(s,n=>n.openReference(i[0],!1,!0))});var ase=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Gw=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const kV=new st("hasSymbols",!1,b("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),VR=bi("ISymbolNavigationService");let D9=class{constructor(e,t,i,n){this._editorService=t,this._notificationService=i,this._keybindingService=n,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=kV.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new k9(this._editorService),n=i.onDidChange(o=>{if(this._ignoreEditorChange)return;const r=this._editorService.getActiveCodeEditor();if(!r)return;const a=r.getModel(),l=r.getPosition();if(!a||!l)return;let c=!1,d=!1;for(const f of t.references)if(nte(f.uri,a.uri))c=!0,d=d||M.containsPosition(f.range,l);else if(c)break;(!c||!d)&&this.reset()});this._currentState=nu(i,n)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:M.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?b("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):b("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};D9=ase([Gw(0,jt),Gw(1,Vi),Gw(2,gs),Gw(3,xs)],D9);ki(VR,D9,!0);Be(new class extends Fs{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:kV,kbOpts:{weight:100,primary:70}})}runEditorCommand(s,e){return s.get(VR).revealNext(e)}});ya.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:kV,primary:9,handler(s){s.get(VR).reset()}});let k9=class{constructor(e){this._listener=new Map,this._disposables=new Ae,this._onDidChange=new J,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),Ni(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,nu(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};k9=ase([Gw(0,Vi)],k9);var lse=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};function OL(s,e,t,i){const o=t.ordered(s).map(r=>Promise.resolve(i(r,s,e)).then(void 0,a=>{Ys(a)}));return Promise.all(o).then(r=>{const a=[];for(const l of r)Array.isArray(l)?a.push(...l):l&&a.push(l);return a})}function EV(s,e,t,i){return OL(e,t,s,(n,o,r)=>n.provideDefinition(o,r,i))}function cse(s,e,t,i){return OL(e,t,s,(n,o,r)=>n.provideDeclaration(o,r,i))}function use(s,e,t,i){return OL(e,t,s,(n,o,r)=>n.provideImplementation(o,r,i))}function dse(s,e,t,i){return OL(e,t,s,(n,o,r)=>n.provideTypeDefinition(o,r,i))}function WR(s,e,t,i,n){return OL(e,t,s,(o,r,a)=>lse(this,void 0,void 0,function*(){const l=yield o.provideReferences(r,a,{includeDeclaration:!0},n);if(!i||!l||l.length!==2)return l;const c=yield o.provideReferences(r,a,{includeDeclaration:!1},n);return c&&c.length===1?c:l}))}function PL(s){return lse(this,void 0,void 0,function*(){const e=yield s(),t=new va(e,""),i=t.references.map(n=>n.link);return t.dispose(),i})}Ed("_executeDefinitionProvider",(s,e,t)=>{const i=s.get(ct),n=EV(i.definitionProvider,e,t,ri.None);return PL(()=>n)});Ed("_executeTypeDefinitionProvider",(s,e,t)=>{const i=s.get(ct),n=dse(i.typeDefinitionProvider,e,t,ri.None);return PL(()=>n)});Ed("_executeDeclarationProvider",(s,e,t)=>{const i=s.get(ct),n=cse(i.declarationProvider,e,t,ri.None);return PL(()=>n)});Ed("_executeReferenceProvider",(s,e,t)=>{const i=s.get(ct),n=WR(i.referenceProvider,e,t,!1,ri.None);return PL(()=>n)});Ed("_executeImplementationProvider",(s,e,t)=>{const i=s.get(ct),n=use(i.implementationProvider,e,t,ri.None);return PL(()=>n)});var lc=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})},_F,vF,bF,CF,wF,yF,SF,LF;Dl.appendMenuItem(G.EditorContext,{submenu:G.EditorContextPeek,title:b("peek.submenu","Peek"),group:"navigation",order:100});const hse=new Set;function _u(s){const e=new s;return ree(e),hse.add(e.id),e}class MS{constructor(e,t){this.model=e,this.position=t}static is(e){return!e||typeof e!="object"?!1:!!(e instanceof MS||se.isIPosition(e.position)&&e.model)}}class cc extends ot{constructor(e,t){super(t),this.configuration=e}run(e,t,i){if(!t.hasModel())return Promise.resolve(void 0);const n=e.get(gs),o=e.get(Vi),r=e.get(ip),a=e.get(VR),l=e.get(ct),c=t.getModel(),d=t.getPosition(),f=MS.is(i)?i:new MS(c,d),g=new e_(t,5),m=pB(this._getLocationModel(l,f.model,f.position,g.token),g.token).then(_=>lc(this,void 0,void 0,function*(){var C;if(!_||g.token.isCancellationRequested)return;go(_.ariaMessage);let S;if(_.referenceAt(c.uri,d)){const L=this._getAlternativeCommand(t);!cc._activeAlternativeCommands.has(L)&&hse.has(L)&&(S=t.getAction(L))}const x=_.references.length;if(x===0){if(!this.configuration.muteMessage){const L=c.getWordAtPosition(d);(C=Ca.get(t))===null||C===void 0||C.showMessage(this._getNoResultFoundMessage(L),d)}}else if(x===1&&S)cc._activeAlternativeCommands.add(this.id),S.run().finally(()=>{cc._activeAlternativeCommands.delete(this.id)});else return this._onResult(o,a,t,_)}),_=>{n.error(_)}).finally(()=>{g.dispose()});return r.showWhile(m,250),m}_onResult(e,t,i,n){return lc(this,void 0,void 0,function*(){const o=this._getGoToPreference(i);if(!(i instanceof s_)&&(this.configuration.openInPeek||o==="peek"&&n.references.length>1))this._openInPeek(i,n);else{const r=n.firstReference(),a=n.references.length>1&&o==="gotoAndPeek",l=yield this._openReference(i,e,r,this.configuration.openToSide,!a);a&&l?this._openInPeek(l,n):n.dispose(),o==="goto"&&t.put(r)}})}_openReference(e,t,i,n,o){return lc(this,void 0,void 0,function*(){let r;if(H1e(i)&&(r=i.targetSelectionRange),r||(r=i.range),!r)return;const a=yield t.openCodeEditor({resource:i.uri,options:{selection:M.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,n);if(!!a){if(o){const l=a.getModel(),c=a.createDecorationsCollection([{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&c.clear()},350)}return a}})}_openInPeek(e,t){const i=jg.get(e);i&&e.hasModel()?i.toggleWidget(e.getSelection(),qs(n=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}}cc._activeAlternativeCommands=new Set;class FL extends cc{_getLocationModel(e,t,i,n){return lc(this,void 0,void 0,function*(){return new va(yield EV(e.definitionProvider,t,i,n),b("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?b("noResultWord","No definition found for '{0}'",e.word):b("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(53).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(53).multipleDefinitions}}const fse=Xg&&!uB()?2118:70;_u((_F=class E9 extends FL{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:E9.id,label:b("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:Je.and($.hasDefinitionProvider,$.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$.editorTextFocus,primary:fse,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),Li.registerCommandAlias("editor.action.goToDeclaration",E9.id)}},_F.id="editor.action.revealDefinition",_F));_u((vF=class T9 extends FL{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:T9.id,label:b("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:Je.and($.hasDefinitionProvider,$.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,fse),weight:100}}),Li.registerCommandAlias("editor.action.openDeclarationToTheSide",T9.id)}},vF.id="editor.action.revealDefinitionAside",vF));_u((bF=class I9 extends FL{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:I9.id,label:b("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:Je.and($.hasDefinitionProvider,Gr.notInPeekEditor,$.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:G.EditorContextPeek,group:"peek",order:2}}),Li.registerCommandAlias("editor.action.previewDeclaration",I9.id)}},bF.id="editor.action.peekDefinition",bF));class gse extends cc{_getLocationModel(e,t,i,n){return lc(this,void 0,void 0,function*(){return new va(yield cse(e.declarationProvider,t,i,n),b("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?b("decl.noResultWord","No declaration found for '{0}'",e.word):b("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(53).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(53).multipleDeclarations}}_u((CF=class pse extends gse{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:pse.id,label:b("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:Je.and($.hasDeclarationProvider,$.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?b("decl.noResultWord","No declaration found for '{0}'",e.word):b("decl.generic.noResults","No declaration found")}},CF.id="editor.action.revealDeclaration",CF));_u(class extends gse{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:b("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:Je.and($.hasDeclarationProvider,Gr.notInPeekEditor,$.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:G.EditorContextPeek,group:"peek",order:3}})}});class mse extends cc{_getLocationModel(e,t,i,n){return lc(this,void 0,void 0,function*(){return new va(yield dse(e.typeDefinitionProvider,t,i,n),b("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?b("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):b("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(53).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(53).multipleTypeDefinitions}}_u((wF=class _se extends mse{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:_se.ID,label:b("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:Je.and($.hasTypeDefinitionProvider,$.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},wF.ID="editor.action.goToTypeDefinition",wF));_u((yF=class vse extends mse{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:vse.ID,label:b("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:Je.and($.hasTypeDefinitionProvider,Gr.notInPeekEditor,$.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:G.EditorContextPeek,group:"peek",order:4}})}},yF.ID="editor.action.peekTypeDefinition",yF));class bse extends cc{_getLocationModel(e,t,i,n){return lc(this,void 0,void 0,function*(){return new va(yield use(e.implementationProvider,t,i,n),b("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?b("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):b("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(53).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(53).multipleImplementations}}_u((SF=class Cse extends bse{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Cse.ID,label:b("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:Je.and($.hasImplementationProvider,$.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},SF.ID="editor.action.goToImplementation",SF));_u((LF=class wse extends bse{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:wse.ID,label:b("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:Je.and($.hasImplementationProvider,Gr.notInPeekEditor,$.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:G.EditorContextPeek,group:"peek",order:5}})}},LF.ID="editor.action.peekImplementation",LF));class yse extends cc{_getNoResultFoundMessage(e){return e?b("references.no","No references found for '{0}'",e.word):b("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(53).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(53).multipleReferences}}_u(class extends yse{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:b("goToReferences.label","Go to References"),alias:"Go to References",precondition:Je.and($.hasReferenceProvider,Gr.notInPeekEditor,$.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,i,n){return lc(this,void 0,void 0,function*(){return new va(yield WR(e.referenceProvider,t,i,!0,n),b("ref.title","References"))})}});_u(class extends yse{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:b("references.action.label","Peek References"),alias:"Peek References",precondition:Je.and($.hasReferenceProvider,Gr.notInPeekEditor,$.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:G.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,i,n){return lc(this,void 0,void 0,function*(){return new va(yield WR(e.referenceProvider,t,i,!1,n),b("ref.title","References"))})}});class R5e extends cc{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",label:b("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:Je.and(Gr.notInPeekEditor,$.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}_getLocationModel(e,t,i,n){return lc(this,void 0,void 0,function*(){return new va(this._references,b("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&b("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(53).multipleReferences}_getAlternativeCommand(){return""}}Li.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:yt},{name:"position",description:"The position at which to start",constraint:se.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(s,e,t,i,n,o,r)=>lc(void 0,void 0,void 0,function*(){Qi(yt.isUri(e)),Qi(se.isIPosition(t)),Qi(Array.isArray(i)),Qi(typeof n>"u"||typeof n=="string"),Qi(typeof r>"u"||typeof r=="boolean");const a=s.get(Vi),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(Xh(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const d=new class extends R5e{_getNoResultFoundMessage(f){return o||super._getNoResultFoundMessage(f)}}({muteMessage:!Boolean(o),openInPeek:Boolean(r),openToSide:!1},i,n);c.get(Zt).invokeFunction(d.run.bind(d),l)})})});Li.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:yt},{name:"position",description:"The position at which to start",constraint:se.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(s,e,t,i,n)=>lc(void 0,void 0,void 0,function*(){s.get(fs).executeCommand("editor.action.goToLocations",e,t,i,n,void 0,!0)})});Li.registerCommand({id:"editor.action.findReferences",handler:(s,e,t)=>{Qi(yt.isUri(e)),Qi(se.isIPosition(t));const i=s.get(ct),n=s.get(Vi);return n.openCodeEditor({resource:e},n.getFocusedCodeEditor()).then(o=>{if(!Xh(o)||!o.hasModel())return;const r=jg.get(o);if(!r)return;const a=qs(c=>WR(i.referenceProvider,o.getModel(),se.lift(t),!1,c).then(d=>new va(d,b("ref.title","References")))),l=new M(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(l,a,!1))})}});Li.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");Dl.appendMenuItems([{id:G.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:b({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:G.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:b({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:G.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:b({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:G.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:b({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:G.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:b({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var A5e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},xF=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let o_=class YE{constructor(e,t,i,n){this.textModelResolverService=t,this.languageService=i,this.languageFeaturesService=n,this.toUnhook=new Ae,this.toUnhookForKeyboard=new Ae,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const o=new xV(e);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown(([r,a])=>{this.startFindDefinitionFromMouse(r,zr(a))})),this.toUnhook.add(o.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},a=>{this.removeLinkDecorations(),Yt(a)})})),this.toUnhook.add(o.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(YE.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const i=e.target.position;this.startFindDefinition(i)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const i=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return Promise.resolve(0);this.currentWordAtPosition=i;const n=new TS(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=qs(o=>this.findDefinition(e,o)),this.previousPromise.then(o=>{if(!o||!o.length||!n.validate(this.editor)){this.removeLinkDecorations();return}if(o.length>1)this.addDecoration(new M(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),new Wr().appendText(b("multipleResults","Click to show {0} definitions.",o.length)));else{const r=o[0];if(!r.uri)return;this.textModelResolverService.createModelReference(r.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:l}}=a,{startLineNumber:c}=r.range;if(c<1||c>l.getLineCount()){a.dispose();return}const d=this.getPreviewValue(l,c,r);let f;r.originSelectionRange?f=M.lift(r.originSelectionRange):f=new M(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);const g=this.languageService.guessLanguageIdByFilepathOrFirstLine(l.uri);this.addDecoration(f,new Wr().appendCodeblock(g||"",d)),a.dispose()})}}).then(void 0,Yt)}getPreviewValue(e,t,i){let n=i.range;return n.endLineNumber-n.startLineNumber>=YE.MAX_SOURCE_PREVIEW_LINES&&(n=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,n)}stripIndentationFromPreviewRange(e,t,i){let o=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<i.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);o=Math.min(o,l)}return e.getValueInRange(i).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const i=e.getLineFirstNonWhitespaceColumn(t),n=Math.min(e.getLineCount(),t+YE.MAX_SOURCE_PREVIEW_LINES);let o=t+1;for(;o<n;o++){const r=e.getLineFirstNonWhitespaceColumn(o);if(i===r)break}return new M(t,1,o+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([i])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?EV(this.languageFeaturesService.definitionProvider,i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(i=>{const n=!t&&this.editor.getOption(80)&&!this.isInPeekEditor(i);return new FL({openToSide:t,openInPeek:n,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(i,this.editor)})}isInPeekEditor(e){const t=e.get(jt);return Gr.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};o_.ID="editor.contrib.gotodefinitionatposition";o_.MAX_SOURCE_PREVIEW_LINES=8;o_=A5e([xF(1,Yr),xF(2,Vn),xF(3,ct)],o_);Ei(o_.ID,o_);Cn((s,e)=>{const t=s.getColor($B);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const oE=Pe;class Sse extends ge{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new vL(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}class TV extends ge{constructor(e,t,i){super(),this.actionContainer=Se(e,oE("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=Se(this.actionContainer,oE("a.action")),this.action.setAttribute("role","button"),t.iconClass&&Se(this.action,oE(`span.icon.${t.iconClass}`));const n=Se(this.action,oE("span"));n.textContent=i?`${t.label} (${i})`:t.label,this._register(Le(this.actionContainer,it.CLICK,o=>{o.stopPropagation(),o.preventDefault(),t.run(this.actionContainer)})),this._register(Le(this.actionContainer,it.KEY_UP,o=>{new kn(o).equals(3)&&(o.stopPropagation(),o.preventDefault(),t.run(this.actionContainer))})),this.setEnabled(!0)}static render(e,t,i){return new TV(e,t,i)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}var M5e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})},O5e=globalThis&&globalThis.__asyncValues||function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],t;return e?e.call(s):(s=typeof __values=="function"?__values(s):s[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=s[o]&&function(r){return new Promise(function(a,l){r=s[o](r),n(a,l,r.done,r.value)})}}function n(o,r,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},r)}};class P5e{constructor(e,t,i){this.value=e,this.isComplete=t,this.hasLoadingMessage=i}}class Lse extends ge{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new J),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new Xi(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new Xi(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new Xi(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(55).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=dye(e=>this._computer.computeAsync(e)),M5e(this,void 0,void 0,function*(){var e,t;try{try{for(var i=O5e(this._asyncIterable),n;n=yield i.next(),!n.done;){const o=n.value;o&&(this._result.push(o),this._fireResult())}}catch(o){e={error:o}}finally{try{n&&!n.done&&(t=i.return)&&(yield t.call(i))}finally{if(e)throw e.error}}this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(o){Yt(o)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new P5e(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}class DF{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class ZE{constructor(e,t,i){this.priority=e,this.owner=t,this.range=i,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}const P_=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}};class tc{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,i=this.value.charCodeAt(e),n;if(n=tc._table[i],typeof n=="number")return this.pos+=1,{type:n,pos:e,len:1};if(tc.isDigitCharacter(i)){n=8;do t+=1,i=this.value.charCodeAt(e+t);while(tc.isDigitCharacter(i));return this.pos+=t,{type:n,pos:e,len:t}}if(tc.isVariableCharacter(i)){n=9;do i=this.value.charCodeAt(e+ ++t);while(tc.isVariableCharacter(i)||tc.isDigitCharacter(i));return this.pos+=t,{type:n,pos:e,len:t}}n=10;do t+=1,i=this.value.charCodeAt(e+t);while(!isNaN(i)&&typeof tc._table[i]>"u"&&!tc.isDigitCharacter(i)&&!tc.isVariableCharacter(i));return this.pos+=t,{type:n,pos:e,len:t}}}tc._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class pC{constructor(){this._children=[]}appendChild(e){return e instanceof Hr&&this._children[this._children.length-1]instanceof Hr?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:i}=e,n=i.children.indexOf(e),o=i.children.slice(0);o.splice(n,1,...t),i._children=o,function r(a,l){for(const c of a)c.parent=l,r(c.children,c)}(t,i)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof BL)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class Hr extends pC{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Hr(this.value)}}class xse extends pC{}class nc extends xse{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof mC?this._children[0]:void 0}clone(){const e=new nc(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class mC extends pC{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof Hr&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new mC;return this.options.forEach(e.appendChild,e),e}}class IV extends pC{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let i=!1,n=e.replace(this.regexp,function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(o=>o instanceof Hc&&Boolean(o.elseValue))&&(n=this._replace([])),n}_replace(e){let t="";for(const i of this._children)if(i instanceof Hc){let n=e[i.index]||"";n=i.resolve(n),t+=n}else t+=i.toString();return t}toString(){return""}clone(){const e=new IV;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class Hc extends pC{constructor(e,t,i,n){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=n}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":Boolean(e)&&typeof this.ifValue=="string"?this.ifValue:!Boolean(e)&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(i=>i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((i,n)=>n===0?i.charAt(0).toLowerCase()+i.substr(1):i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}clone(){return new Hc(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class OS extends xse{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new Hr(t)],!0):!1}clone(){const e=new OS(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function lZ(s,e){const t=[...s];for(;t.length>0;){const i=t.shift();if(!e(i))break;t.unshift(...i.children)}}class BL extends pC{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(i){return i instanceof nc&&(e.push(i),t=!t||t.index<i.index?i:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk(n=>n===e?(i=!0,!1):(t+=n.len(),!0)),i?t:-1}fullLen(e){let t=0;return lZ([e],i=>(t+=i.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:i}=e;for(;i;)i instanceof nc&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof OS&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new BL;return this._children=this.children.map(t=>t.clone()),e}walk(e){lZ(this.children,e)}}class Kg{constructor(){this._scanner=new tc,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){const n=new BL;return this.parseFragment(e,n),this.ensureFinalTabstop(n,i!=null?i:!1,t!=null?t:!1),n}parseFragment(e,t){const i=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const n=new Map,o=[];t.walk(r=>(r instanceof nc&&(r.isFinalTabstop?n.set(0,void 0):!n.has(r.index)&&r.children.length>0?n.set(r.index,r.children):o.push(r)),!0));for(const r of o){const a=n.get(r.index);if(a){const l=new nc(r.index);l.transform=r.transform;for(const c of a)l.appendChild(c.clone());t.replace(r,[l])}}return t.children.slice(i)}ensureFinalTabstop(e,t,i){(t||i&&e.placeholders.length>0)&&(e.placeholders.find(o=>o.index===0)||e.appendChild(new nc(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const i=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),i}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const n=this._scanner.next();if(n.type!==0&&n.type!==4&&n.type!==5)return!1}this._token=this._scanner.next()}const i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Hr(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new nc(Number(t)):new OS(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);const o=new nc(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Hr("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){const r=new mC;for(;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(r),this._accept(4)))return e.appendChild(o),!0}return this._backTo(i),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(i)}_parseChoiceElement(e){const t=this._token,i=[];for(;!(this._token.type===2||this._token.type===7);){let n;if((n=this._accept(5,!0))?n=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||n:n=this._accept(void 0,!0),!n)return this._backTo(t),!1;i.push(n)}return i.length===0?(this._backTo(t),!1):(e.appendChild(new Hr(i.join(""))),!0)}_parseComplexVariable(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);const o=new OS(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Hr("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(i)}_parseTransform(e){const t=new IV;let i="",n="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,i+=o;continue}if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new Hr(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(i,n)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);const n=this._accept(8,!0);if(n)if(i){if(this._accept(4))return e.appendChild(new Hc(Number(n))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Hc(Number(n))),!0;else return this._backTo(t),!1;if(this._accept(6)){const o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Hc(Number(n),o)),!0)}else if(this._accept(11)){const o=this._until(4);if(o)return e.appendChild(new Hc(Number(n),void 0,o,void 0)),!0}else if(this._accept(12)){const o=this._until(4);if(o)return e.appendChild(new Hc(Number(n),void 0,void 0,o)),!0}else if(this._accept(13)){const o=this._until(1);if(o){const r=this._until(4);if(r)return e.appendChild(new Hc(Number(n),void 0,o,r)),!0}}else{const o=this._until(4);if(o)return e.appendChild(new Hc(Number(n),void 0,void 0,o)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Hr(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}const F5e=b("defaultLabel","input"),B5e=b("label.preserveCaseToggle","Preserve Case");class V5e extends DL{constructor(e){super({icon:w.preserveCase,title:B5e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class W5e extends gc{constructor(e,t,i,n){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new J),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new J),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new J),this._onInput=this._register(new J),this._onKeyUp=this._register(new J),this._onPreserveCaseKeyDown=this._register(new J),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||F5e,this.inputActiveOptionBorder=n.inputActiveOptionBorder,this.inputActiveOptionForeground=n.inputActiveOptionForeground,this.inputActiveOptionBackground=n.inputActiveOptionBackground,this.inputBackground=n.inputBackground,this.inputForeground=n.inputForeground,this.inputBorder=n.inputBorder,this.inputValidationInfoBorder=n.inputValidationInfoBorder,this.inputValidationInfoBackground=n.inputValidationInfoBackground,this.inputValidationInfoForeground=n.inputValidationInfoForeground,this.inputValidationWarningBorder=n.inputValidationWarningBorder,this.inputValidationWarningBackground=n.inputValidationWarningBackground,this.inputValidationWarningForeground=n.inputValidationWarningForeground,this.inputValidationErrorBorder=n.inputValidationErrorBorder,this.inputValidationErrorBackground=n.inputValidationErrorBackground,this.inputValidationErrorForeground=n.inputValidationErrorForeground;const o=n.appendPreserveCaseLabel||"",r=n.history||[],a=!!n.flexibleHeight,l=!!n.flexibleWidth,c=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new cie(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:r,showHistoryHint:n.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c})),this.preserveCase=this._register(new V5e({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(g=>{this._onPreserveCaseKeyDown.fire(g)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const d=[this.preserveCase.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){const m=d.indexOf(document.activeElement);if(m>=0){let _=-1;g.equals(17)?_=(m+1)%d.length:g.equals(15)&&(m===0?_=d.length-1:_=m-1),g.equals(9)?(d[m].blur(),this.inputBox.focus()):_>=0&&d[_].focus(),qi.stop(g,!0)}}});const f=document.createElement("div");f.className="controls",f.style.display=this._showOptionButtons?"block":"none",f.appendChild(this.preserveCase.domNode),this.domNode.appendChild(f),e==null||e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var Dse=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},kse=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const NV=new st("suggestWidgetVisible",!1,b("suggestWidgetVisible","Whether suggestion are visible")),RV="historyNavigationWidgetFocus",Ese="historyNavigationForwardsEnabled",Tse="historyNavigationBackwardsEnabled";let Nm;const rE=[];function Ise(s,e){if(rE.includes(e))throw new Error("Cannot register the same widget multiple times");rE.push(e);const t=new Ae,i=t.add(s.createScoped(e.element)),n=new st(RV,!1).bindTo(i),o=new st(Ese,!0).bindTo(i),r=new st(Tse,!0).bindTo(i),a=()=>{n.set(!0),Nm=e},l=()=>{n.set(!1),Nm===e&&(Nm=void 0)};return e.element===document.activeElement&&a(),t.add(e.onDidFocus(()=>a())),t.add(e.onDidBlur(()=>l())),t.add(ni(()=>{rE.splice(rE.indexOf(e),1),l()})),{scopedContextKeyService:i,historyNavigationForwardsEnablement:o,historyNavigationBackwardsEnablement:r,dispose(){t.dispose()}}}let N9=class extends XAe{constructor(e,t,i,n,o=!1){super(e,t,o,i),this._register(Ise(n,this.inputBox))}};N9=Dse([kse(3,jt)],N9);let R9=class extends W5e{constructor(e,t,i,n,o=!1){super(e,t,o,i),this._register(Ise(n,this.inputBox))}};R9=Dse([kse(3,jt)],R9);ya.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:Je.and(Je.has(RV),Je.equals(Tse,!0),NV.isEqualTo(!1)),primary:16,secondary:[528],handler:s=>{Nm&&Nm.showPreviousValue()}});ya.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:Je.and(Je.has(RV),Je.equals(Ese,!0),NV.isEqualTo(!1)),primary:18,secondary:[530],handler:s=>{Nm&&Nm.showNextValue()}});var xy=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const gi={Visible:NV,HasFocusedSuggestion:new st("suggestWidgetHasFocusedSuggestion",!1,b("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new st("suggestWidgetDetailsVisible",!1,b("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new st("suggestWidgetMultipleSuggestions",!1,b("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new st("suggestionMakesTextEdit",!0,b("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new st("acceptSuggestionOnEnter",!0,b("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new st("suggestionHasInsertAndReplaceRange",!1,b("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new st("suggestionInsertMode",void 0,{type:"string",description:b("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new st("suggestionCanResolve",!1,b("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},xg=new G("suggestWidgetStatusBar");class H5e{constructor(e,t,i,n){this.position=e,this.completion=t,this.container=i,this.provider=n,this.isInvalid=!1,this.score=ou.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,M.isIRange(t.range)?(this.editStart=new se(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new se(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new se(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||M.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new se(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new se(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new se(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||M.spansMultipleLines(t.range.insert)||M.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof n.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return xy(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(i=>{Object.assign(this.completion,i),this._isResolved=!0,t.dispose()},i=>{Dd(i)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class PS{constructor(e=2,t=new Set,i=new Set,n=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.showDeprecated=n}}PS.default=new PS;let z5e;function U5e(){return z5e}class $5e{constructor(e,t,i,n){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=n}}function AV(s,e,t,i=PS.default,n={triggerKind:0},o=ri.None){return xy(this,void 0,void 0,function*(){const r=new qr(!0);t=t.clone();const a=e.getWordAtPosition(t),l=a?new M(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):M.fromPositions(t),c={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},d=[],f=new Ae,g=[];let m=!1;const _=(S,x,L)=>{var k,T,A;let O=!1;if(!x)return O;for(const I of x.suggestions)if(!i.kindFilter.has(I.kind)){if(!i.showDeprecated&&((k=I==null?void 0:I.tags)===null||k===void 0?void 0:k.includes(1)))continue;I.range||(I.range=c),I.sortText||(I.sortText=typeof I.label=="string"?I.label:I.label.label),!m&&I.insertTextRules&&I.insertTextRules&4&&(m=Kg.guessNeedsClipboard(I.insertText)),d.push(new H5e(t,I,x,S)),O=!0}return q8(x)&&f.add(x),g.push({providerName:(T=S._debugDisplayName)!==null&&T!==void 0?T:"unknown_provider",elapsedProvider:(A=x.duration)!==null&&A!==void 0?A:-1,elapsedOverall:L.elapsed()}),O},C=(()=>xy(this,void 0,void 0,function*(){}))();for(const S of s.orderedGroups(e)){let x=!1;if(yield Promise.all(S.map(L=>xy(this,void 0,void 0,function*(){if(!(i.providerFilter.size>0&&!i.providerFilter.has(L)))try{const k=new qr(!0),T=yield L.provideCompletionItems(e,t,n,o);x=_(L,T,k)||x}catch(k){Ys(k)}}))),x||o.isCancellationRequested)break}return yield C,o.isCancellationRequested?(f.dispose(),Promise.reject(new Jg)):new $5e(d.sort(Nse(i.snippetSortOrder)),m,{entries:g,elapsed:r.elapsed()},f)})}function MV(s,e){if(s.sortTextLow&&e.sortTextLow){if(s.sortTextLow<e.sortTextLow)return-1;if(s.sortTextLow>e.sortTextLow)return 1}return s.textLabel<e.textLabel?-1:s.textLabel>e.textLabel?1:s.completion.kind-e.completion.kind}function j5e(s,e){if(s.completion.kind!==e.completion.kind){if(s.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return MV(s,e)}function K5e(s,e){if(s.completion.kind!==e.completion.kind){if(s.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return MV(s,e)}const HR=new Map;HR.set(0,j5e);HR.set(2,K5e);HR.set(1,MV);function Nse(s){return HR.get(s)}Li.registerCommand("_executeCompletionItemProvider",(s,...e)=>xy(void 0,void 0,void 0,function*(){const[t,i,n,o]=e;Qi(yt.isUri(t)),Qi(se.isIPosition(i)),Qi(typeof n=="string"||!n),Qi(typeof o=="number"||!o);const{completionProvider:r}=s.get(ct),a=yield s.get(Yr).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},c=[],d=yield AV(r,a.object.textEditorModel,se.lift(i),void 0,{triggerCharacter:n,triggerKind:n?1:0});for(const f of d.items)c.length<(o!=null?o:0)&&c.push(f.resolve(ri.None)),l.incomplete=l.incomplete||f.container.incomplete,l.suggestions.push(f.completion);try{return yield Promise.all(c),l}finally{setTimeout(()=>d.disposable.dispose(),100)}}finally{a.dispose()}}));function q5e(s,e){var t;(t=s.getContribution("editor.contrib.suggestController"))===null||t===void 0||t.triggerSuggest(new Set().add(e),void 0,!0)}class Ob{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}var OV=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},zI=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const cZ=Pe;let UI=class A9 extends ge{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._widget=this._register(this._instantiationService.createInstance(Rm,this._editor)),this._isChangingDecorations=!1,this._messages=[],this._messagesAreComplete=!1,this._participants=[];for(const n of P_.getAll())this._participants.push(this._instantiationService.createInstance(n,this._editor));this._participants.sort((n,o)=>n.hoverOrdinal-o.hoverOrdinal),this._computer=new $I(this._editor,this._participants),this._hoverOperation=this._register(new Lse(this._editor,this._computer)),this._register(this._hoverOperation.onResult(n=>{this._withResult(n.value,n.isComplete,n.hasLoadingMessage)})),this._register(this._editor.onDidChangeModelDecorations(()=>{this._isChangingDecorations||this._onModelDecorationsChanged()})),this._register(Ps(this._widget.getDomNode(),"keydown",n=>{n.equals(9)&&this.hide()})),this._register(Fn.onDidChange(()=>{this._widget.position&&this._computer.anchor&&this._messages.length>0&&(this._widget.clear(),this._renderMessages(this._computer.anchor,this._messages))}))}_onModelDecorationsChanged(){this._widget.position&&(this._hoverOperation.cancel(),this._widget.isColorPickerVisible||this._hoverOperation.start(0))}maybeShowAt(e){const t=[];for(const n of this._participants)if(n.suggestHoverAnchor){const o=n.suggestHoverAnchor(e);o&&t.push(o)}const i=e.target;if(i.type===6&&t.push(new DF(0,i.range)),i.type===7){const n=this._editor.getOption(46).typicalHalfwidthCharacterWidth/2;!i.detail.isAfterLines&&typeof i.detail.horizontalDistanceToText=="number"&&i.detail.horizontalDistanceToText<n&&t.push(new DF(0,i.range))}return t.length===0?!1:(t.sort((n,o)=>o.priority-n.priority),this._startShowingAt(t[0],0,!1),!0)}startShowingAtRange(e,t,i){this._startShowingAt(new DF(0,e),t,i)}_startShowingAt(e,t,i){if(!(this._computer.anchor&&this._computer.anchor.equals(e))){if(this._hoverOperation.cancel(),this._widget.position)if(!this._computer.anchor||!e.canAdoptVisibleHover(this._computer.anchor,this._widget.position))this.hide();else{const n=this._messages.filter(o=>o.isValidForHoverAnchor(e));if(n.length===0)this.hide();else{if(n.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,n)}}this._computer.anchor=e,this._computer.shouldFocus=i,this._hoverOperation.start(t)}}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._widget.hide()}isColorPickerVisible(){return this._widget.isColorPickerVisible}containsNode(e){return this._widget.getDomNode().contains(e)}_addLoadingMessage(e){if(this._computer.anchor){for(const t of this._participants)if(t.createLoadingMessage){const i=t.createLoadingMessage(this._computer.anchor);if(i)return e.slice(0).concat([i])}}return e}_withResult(e,t,i){this._messages=i?this._addLoadingMessage(e):e,this._messagesAreComplete=t,this._computer.anchor&&this._messages.length>0?this._renderMessages(this._computer.anchor,this._messages):t&&this.hide()}_renderMessages(e,t){const{showAtPosition:i,showAtRange:n,highlightRange:o}=A9.computeHoverRanges(e.range,t),r=new Ae,a=r.add(new M9(this._keybindingService)),l=document.createDocumentFragment();let c=null;const d={fragment:l,statusBar:a,setColorPicker:f=>c=f,onContentsChanged:()=>this._widget.onContentsChanged(),hide:()=>this.hide()};for(const f of this._participants){const g=t.filter(m=>m.owner===f);g.length>0&&r.add(f.renderHoverParts(d,g))}if(a.hasContent&&l.appendChild(a.hoverElement),l.hasChildNodes()){if(o){const f=this._editor.createDecorationsCollection();try{this._isChangingDecorations=!0,f.set([{range:o,options:A9._DECORATION_OPTIONS}])}finally{this._isChangingDecorations=!1}r.add(ni(()=>{try{this._isChangingDecorations=!0,f.clear()}finally{this._isChangingDecorations=!1}}))}this._widget.showAt(l,new G5e(c,i,n,this._editor.getOption(55).above,this._computer.shouldFocus,r))}else r.dispose()}static computeHoverRanges(e,t){const i=e.startLineNumber;let n=e.startColumn,o=e.endColumn,r=t[0].range,a=null;for(const l of t)r=M.plusRange(r,l.range),l.range.startLineNumber===i&&l.range.endLineNumber===i&&(n=Math.min(n,l.range.startColumn),o=Math.max(o,l.range.endColumn)),l.forceShowAtRange&&(a=l.range);return{showAtPosition:a?a.getStartPosition():new se(e.startLineNumber,n),showAtRange:a||new M(i,n,i,o),highlightRange:r}}};UI._DECORATION_OPTIONS=Gt.register({description:"content-hover-highlight",className:"hoverHighlight"});UI=OV([zI(1,Zt),zI(2,xs)],UI);class G5e{constructor(e,t,i,n,o,r){this.colorPicker=e,this.showAtPosition=t,this.showAtRange=i,this.preferAbove=n,this.stoleFocus=o,this.disposables=r}}let Rm=class Rse extends ge{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this.allowEditorOverflow=!0,this._hoverVisibleKey=$.hoverVisible.bindTo(this._contextKeyService),this._hover=this._register(new Sse),this._visibleData=null,this._register(this._editor.onDidLayoutChange(()=>this._layout())),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(46)&&this._updateFont()})),this._setVisibleData(null),this._layout(),this._editor.addContentWidget(this)}get position(){var e,t;return(t=(e=this._visibleData)===null||e===void 0?void 0:e.showAtPosition)!==null&&t!==void 0?t:null}get isColorPickerVisible(){var e;return Boolean((e=this._visibleData)===null||e===void 0?void 0:e.colorPicker)}dispose(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),super.dispose()}getId(){return Rse.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){if(!this._visibleData)return null;let e=this._visibleData.preferAbove;return!e&&this._contextKeyService.getContextKeyValue(gi.Visible.key)&&(e=!0),{position:this._visibleData.showAtPosition,range:this._visibleData.showAtRange,preference:e?[1,2]:[2,1]}}_setVisibleData(e){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}_layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:i}=this._editor.getOption(46);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${i/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}showAt(e,t){this._setVisibleData(t),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this.onContentsChanged(),this._editor.render(),this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),t.colorPicker&&t.colorPicker.layout()}hide(){if(this._visibleData){const e=this._visibleData.stoleFocus;this._setVisibleData(null),this._editor.layoutContentWidget(this),e&&this._editor.focus()}}onContentsChanged(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged();const e=this._hover.scrollbar.getScrollDimensions();if(e.scrollWidth>e.width){const i=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingBottom!==i&&(this._hover.contentsDomNode.style.paddingBottom=i,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}clear(){this._hover.contentsDomNode.textContent=""}};Rm.ID="editor.contrib.contentHoverWidget";Rm=OV([zI(1,jt)],Rm);let M9=class extends ge{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=cZ("div.hover-row.status-bar"),this.actionsElement=Se(this.hoverElement,cZ("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(TV.render(this.actionsElement,e,i))}append(e){const t=Se(this.actionsElement,e);return this._hasContent=!0,t}};M9=OV([zI(0,xs)],M9);class $I{constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1}get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}static _getLineDecorations(e,t){if(t.type!==1)return[];const i=e.getModel(),n=t.range.startLineNumber;if(n>i.getLineCount())return[];const o=i.getLineMaxColumn(n);return e.getLineDecorations(n).filter(r=>{if(r.options.isWholeLine)return!0;const a=r.range.startLineNumber===n?r.range.startColumn:1,l=r.range.endLineNumber===n?r.range.endColumn:o;if(r.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return us.EMPTY;const i=$I._getLineDecorations(this._editor,t);return us.merge(this._participants.map(n=>n.computeAsync?n.computeAsync(t,i,e):us.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=$I._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return oL(t)}}let Ase={};(function(){function s(e,t){t(Ase)}s.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof s=="function"&&s.amd?s(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(ee,ie){for(var ne=0;ne<ie.length;ne++){var V=ie[ne];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(ee,V.key,V)}}function i(ee,ie,ne){return ie&&t(ee.prototype,ie),ne&&t(ee,ne),Object.defineProperty(ee,"prototype",{writable:!1}),ee}function n(ee,ie){if(!!ee){if(typeof ee=="string")return o(ee,ie);var ne=Object.prototype.toString.call(ee).slice(8,-1);if(ne==="Object"&&ee.constructor&&(ne=ee.constructor.name),ne==="Map"||ne==="Set")return Array.from(ee);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return o(ee,ie)}}function o(ee,ie){(ie==null||ie>ee.length)&&(ie=ee.length);for(var ne=0,V=new Array(ie);ne<ie;ne++)V[ne]=ee[ne];return V}function r(ee,ie){var ne=typeof Symbol<"u"&&ee[Symbol.iterator]||ee["@@iterator"];if(ne)return(ne=ne.call(ee)).next.bind(ne);if(Array.isArray(ee)||(ne=n(ee))||ie&&ee&&typeof ee.length=="number"){ne&&(ee=ne);var V=0;return function(){return V>=ee.length?{done:!0}:{done:!1,value:ee[V++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.defaults=a();function l(ee){e.defaults=ee}var c=/[&<>"']/,d=/[&<>"']/g,f=/[<>"']|&(?!#?\w+;)/,g=/[<>"']|&(?!#?\w+;)/g,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_=function(ie){return m[ie]};function C(ee,ie){if(ie){if(c.test(ee))return ee.replace(d,_)}else if(f.test(ee))return ee.replace(g,_);return ee}var S=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function x(ee){return ee.replace(S,function(ie,ne){return ne=ne.toLowerCase(),ne==="colon"?":":ne.charAt(0)==="#"?ne.charAt(1)==="x"?String.fromCharCode(parseInt(ne.substring(2),16)):String.fromCharCode(+ne.substring(1)):""})}var L=/(^|[^\[])\^/g;function k(ee,ie){ee=typeof ee=="string"?ee:ee.source,ie=ie||"";var ne={replace:function(W,Q){return Q=Q.source||Q,Q=Q.replace(L,"$1"),ee=ee.replace(W,Q),ne},getRegex:function(){return new RegExp(ee,ie)}};return ne}var T=/[^\w:]/g,A=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function O(ee,ie,ne){if(ee){var V;try{V=decodeURIComponent(x(ne)).replace(T,"").toLowerCase()}catch{return null}if(V.indexOf("javascript:")===0||V.indexOf("vbscript:")===0||V.indexOf("data:")===0)return null}ie&&!A.test(ne)&&(ne=q(ie,ne));try{ne=encodeURI(ne).replace(/%25/g,"%")}catch{return null}return ne}var I={},R=/^[^:]+:\/*[^/]*$/,B=/^([^:]+:)[\s\S]*$/,z=/^([^:]+:\/*[^/]*)[\s\S]*$/;function q(ee,ie){I[" "+ee]||(R.test(ee)?I[" "+ee]=ee+"/":I[" "+ee]=le(ee,"/",!0)),ee=I[" "+ee];var ne=ee.indexOf(":")===-1;return ie.substring(0,2)==="//"?ne?ie:ee.replace(B,"$1")+ie:ie.charAt(0)==="/"?ne?ie:ee.replace(z,"$1")+ie:ee+ie}var te={exec:function(){}};function U(ee){for(var ie=1,ne,V;ie<arguments.length;ie++){ne=arguments[ie];for(V in ne)Object.prototype.hasOwnProperty.call(ne,V)&&(ee[V]=ne[V])}return ee}function X(ee,ie){var ne=ee.replace(/\|/g,function(Q,Y,de){for(var ve=!1,rt=Y;--rt>=0&&de[rt]==="\\";)ve=!ve;return ve?"|":" |"}),V=ne.split(/ \|/),W=0;if(V[0].trim()||V.shift(),V.length>0&&!V[V.length-1].trim()&&V.pop(),V.length>ie)V.splice(ie);else for(;V.length<ie;)V.push("");for(;W<V.length;W++)V[W]=V[W].trim().replace(/\\\|/g,"|");return V}function le(ee,ie,ne){var V=ee.length;if(V===0)return"";for(var W=0;W<V;){var Q=ee.charAt(V-W-1);if(Q===ie&&!ne)W++;else if(Q!==ie&&ne)W++;else break}return ee.slice(0,V-W)}function be(ee,ie){if(ee.indexOf(ie[1])===-1)return-1;for(var ne=ee.length,V=0,W=0;W<ne;W++)if(ee[W]==="\\")W++;else if(ee[W]===ie[0])V++;else if(ee[W]===ie[1]&&(V--,V<0))return W;return-1}function pe(ee){ee&&ee.sanitize&&!ee.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function ke(ee,ie){if(ie<1)return"";for(var ne="";ie>1;)ie&1&&(ne+=ee),ie>>=1,ee+=ee;return ne+ee}function He(ee,ie,ne,V){var W=ie.href,Q=ie.title?C(ie.title):null,Y=ee[1].replace(/\\([\[\]])/g,"$1");if(ee[0].charAt(0)!=="!"){V.state.inLink=!0;var de={type:"link",raw:ne,href:W,title:Q,text:Y,tokens:V.inlineTokens(Y,[])};return V.state.inLink=!1,de}return{type:"image",raw:ne,href:W,title:Q,text:C(Y)}}function Ge(ee,ie){var ne=ee.match(/^(\s+)(?:```)/);if(ne===null)return ie;var V=ne[1];return ie.split(`
`).map(function(W){var Q=W.match(/^\s+/);if(Q===null)return W;var Y=Q[0];return Y.length>=V.length?W.slice(V.length):W}).join(`
`)}var Ue=function(){function ee(ne){this.options=ne||e.defaults}var ie=ee.prototype;return ie.space=function(V){var W=this.rules.block.newline.exec(V);if(W&&W[0].length>0)return{type:"space",raw:W[0]}},ie.code=function(V){var W=this.rules.block.code.exec(V);if(W){var Q=W[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:W[0],codeBlockStyle:"indented",text:this.options.pedantic?Q:le(Q,`
`)}}},ie.fences=function(V){var W=this.rules.block.fences.exec(V);if(W){var Q=W[0],Y=Ge(Q,W[3]||"");return{type:"code",raw:Q,lang:W[2]?W[2].trim():W[2],text:Y}}},ie.heading=function(V){var W=this.rules.block.heading.exec(V);if(W){var Q=W[2].trim();if(/#$/.test(Q)){var Y=le(Q,"#");(this.options.pedantic||!Y||/ $/.test(Y))&&(Q=Y.trim())}var de={type:"heading",raw:W[0],depth:W[1].length,text:Q,tokens:[]};return this.lexer.inline(de.text,de.tokens),de}},ie.hr=function(V){var W=this.rules.block.hr.exec(V);if(W)return{type:"hr",raw:W[0]}},ie.blockquote=function(V){var W=this.rules.block.blockquote.exec(V);if(W){var Q=W[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:W[0],tokens:this.lexer.blockTokens(Q,[]),text:Q}}},ie.list=function(V){var W=this.rules.block.list.exec(V);if(W){var Q,Y,de,ve,rt,lt,Re,Ye,wt,Ct,Qe,Mt,Ot=W[1].trim(),Mi=Ot.length>1,zt={type:"list",raw:"",ordered:Mi,start:Mi?+Ot.slice(0,-1):"",loose:!1,items:[]};Ot=Mi?"\\d{1,9}\\"+Ot.slice(-1):"\\"+Ot,this.options.pedantic&&(Ot=Mi?Ot:"[*+-]");for(var Fi=new RegExp("^( {0,3}"+Ot+")((?:[	 ][^\\n]*)?(?:\\n|$))");V&&(Mt=!1,!(!(W=Fi.exec(V))||this.rules.block.hr.test(V)));){if(Q=W[0],V=V.substring(Q.length),Ye=W[2].split(`
`,1)[0],wt=V.split(`
`,1)[0],this.options.pedantic?(ve=2,Qe=Ye.trimLeft()):(ve=W[2].search(/[^ ]/),ve=ve>4?1:ve,Qe=Ye.slice(ve),ve+=W[1].length),lt=!1,!Ye&&/^ *$/.test(wt)&&(Q+=wt+`
`,V=V.substring(wt.length+1),Mt=!0),!Mt)for(var Wi=new RegExp("^ {0,"+Math.min(3,ve-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),Ti=new RegExp("^ {0,"+Math.min(3,ve-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)");V&&(Ct=V.split(`
`,1)[0],Ye=Ct,this.options.pedantic&&(Ye=Ye.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Wi.test(Ye)||Ti.test(V)));){if(Ye.search(/[^ ]/)>=ve||!Ye.trim())Qe+=`
`+Ye.slice(ve);else if(!lt)Qe+=`
`+Ye;else break;!lt&&!Ye.trim()&&(lt=!0),Q+=Ct+`
`,V=V.substring(Ct.length+1)}zt.loose||(Re?zt.loose=!0:/\n *\n *$/.test(Q)&&(Re=!0)),this.options.gfm&&(Y=/^\[[ xX]\] /.exec(Qe),Y&&(de=Y[0]!=="[ ] ",Qe=Qe.replace(/^\[[ xX]\] +/,""))),zt.items.push({type:"list_item",raw:Q,task:!!Y,checked:de,loose:!1,text:Qe}),zt.raw+=Q}zt.items[zt.items.length-1].raw=Q.trimRight(),zt.items[zt.items.length-1].text=Qe.trimRight(),zt.raw=zt.raw.trimRight();var rs=zt.items.length;for(rt=0;rt<rs;rt++){this.lexer.state.top=!1,zt.items[rt].tokens=this.lexer.blockTokens(zt.items[rt].text,[]);var un=zt.items[rt].tokens.filter(function(Zs){return Zs.type==="space"}),Qn=un.every(function(Zs){for(var Uo=Zs.raw.split(""),ps=0,vo=r(Uo),sr;!(sr=vo()).done;){var Bs=sr.value;if(Bs===`
`&&(ps+=1),ps>1)return!0}return!1});!zt.loose&&un.length&&Qn&&(zt.loose=!0,zt.items[rt].loose=!0)}return zt}},ie.html=function(V){var W=this.rules.block.html.exec(V);if(W){var Q={type:"html",raw:W[0],pre:!this.options.sanitizer&&(W[1]==="pre"||W[1]==="script"||W[1]==="style"),text:W[0]};return this.options.sanitize&&(Q.type="paragraph",Q.text=this.options.sanitizer?this.options.sanitizer(W[0]):C(W[0]),Q.tokens=[],this.lexer.inline(Q.text,Q.tokens)),Q}},ie.def=function(V){var W=this.rules.block.def.exec(V);if(W){W[3]&&(W[3]=W[3].substring(1,W[3].length-1));var Q=W[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:Q,raw:W[0],href:W[2],title:W[3]}}},ie.table=function(V){var W=this.rules.block.table.exec(V);if(W){var Q={type:"table",header:X(W[1]).map(function(Re){return{text:Re}}),align:W[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:W[3]&&W[3].trim()?W[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(Q.header.length===Q.align.length){Q.raw=W[0];var Y=Q.align.length,de,ve,rt,lt;for(de=0;de<Y;de++)/^ *-+: *$/.test(Q.align[de])?Q.align[de]="right":/^ *:-+: *$/.test(Q.align[de])?Q.align[de]="center":/^ *:-+ *$/.test(Q.align[de])?Q.align[de]="left":Q.align[de]=null;for(Y=Q.rows.length,de=0;de<Y;de++)Q.rows[de]=X(Q.rows[de],Q.header.length).map(function(Re){return{text:Re}});for(Y=Q.header.length,ve=0;ve<Y;ve++)Q.header[ve].tokens=[],this.lexer.inline(Q.header[ve].text,Q.header[ve].tokens);for(Y=Q.rows.length,ve=0;ve<Y;ve++)for(lt=Q.rows[ve],rt=0;rt<lt.length;rt++)lt[rt].tokens=[],this.lexer.inline(lt[rt].text,lt[rt].tokens);return Q}}},ie.lheading=function(V){var W=this.rules.block.lheading.exec(V);if(W){var Q={type:"heading",raw:W[0],depth:W[2].charAt(0)==="="?1:2,text:W[1],tokens:[]};return this.lexer.inline(Q.text,Q.tokens),Q}},ie.paragraph=function(V){var W=this.rules.block.paragraph.exec(V);if(W){var Q={type:"paragraph",raw:W[0],text:W[1].charAt(W[1].length-1)===`
`?W[1].slice(0,-1):W[1],tokens:[]};return this.lexer.inline(Q.text,Q.tokens),Q}},ie.text=function(V){var W=this.rules.block.text.exec(V);if(W){var Q={type:"text",raw:W[0],text:W[0],tokens:[]};return this.lexer.inline(Q.text,Q.tokens),Q}},ie.escape=function(V){var W=this.rules.inline.escape.exec(V);if(W)return{type:"escape",raw:W[0],text:C(W[1])}},ie.tag=function(V){var W=this.rules.inline.tag.exec(V);if(W)return!this.lexer.state.inLink&&/^<a /i.test(W[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(W[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(W[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(W[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:W[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(W[0]):C(W[0]):W[0]}},ie.link=function(V){var W=this.rules.inline.link.exec(V);if(W){var Q=W[2].trim();if(!this.options.pedantic&&/^</.test(Q)){if(!/>$/.test(Q))return;var Y=le(Q.slice(0,-1),"\\");if((Q.length-Y.length)%2===0)return}else{var de=be(W[2],"()");if(de>-1){var ve=W[0].indexOf("!")===0?5:4,rt=ve+W[1].length+de;W[2]=W[2].substring(0,de),W[0]=W[0].substring(0,rt).trim(),W[3]=""}}var lt=W[2],Re="";if(this.options.pedantic){var Ye=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(lt);Ye&&(lt=Ye[1],Re=Ye[3])}else Re=W[3]?W[3].slice(1,-1):"";return lt=lt.trim(),/^</.test(lt)&&(this.options.pedantic&&!/>$/.test(Q)?lt=lt.slice(1):lt=lt.slice(1,-1)),He(W,{href:lt&&lt.replace(this.rules.inline._escapes,"$1"),title:Re&&Re.replace(this.rules.inline._escapes,"$1")},W[0],this.lexer)}},ie.reflink=function(V,W){var Q;if((Q=this.rules.inline.reflink.exec(V))||(Q=this.rules.inline.nolink.exec(V))){var Y=(Q[2]||Q[1]).replace(/\s+/g," ");if(Y=W[Y.toLowerCase()],!Y||!Y.href){var de=Q[0].charAt(0);return{type:"text",raw:de,text:de}}return He(Q,Y,Q[0],this.lexer)}},ie.emStrong=function(V,W,Q){Q===void 0&&(Q="");var Y=this.rules.inline.emStrong.lDelim.exec(V);if(!!Y&&!(Y[3]&&Q.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var de=Y[1]||Y[2]||"";if(!de||de&&(Q===""||this.rules.inline.punctuation.exec(Q))){var ve=Y[0].length-1,rt,lt,Re=ve,Ye=0,wt=Y[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(wt.lastIndex=0,W=W.slice(-1*V.length+ve);(Y=wt.exec(W))!=null;)if(rt=Y[1]||Y[2]||Y[3]||Y[4]||Y[5]||Y[6],!!rt){if(lt=rt.length,Y[3]||Y[4]){Re+=lt;continue}else if((Y[5]||Y[6])&&ve%3&&!((ve+lt)%3)){Ye+=lt;continue}if(Re-=lt,!(Re>0)){if(lt=Math.min(lt,lt+Re+Ye),Math.min(ve,lt)%2){var Ct=V.slice(1,ve+Y.index+lt);return{type:"em",raw:V.slice(0,ve+Y.index+lt+1),text:Ct,tokens:this.lexer.inlineTokens(Ct,[])}}var Qe=V.slice(2,ve+Y.index+lt-1);return{type:"strong",raw:V.slice(0,ve+Y.index+lt+1),text:Qe,tokens:this.lexer.inlineTokens(Qe,[])}}}}}},ie.codespan=function(V){var W=this.rules.inline.code.exec(V);if(W){var Q=W[2].replace(/\n/g," "),Y=/[^ ]/.test(Q),de=/^ /.test(Q)&&/ $/.test(Q);return Y&&de&&(Q=Q.substring(1,Q.length-1)),Q=C(Q,!0),{type:"codespan",raw:W[0],text:Q}}},ie.br=function(V){var W=this.rules.inline.br.exec(V);if(W)return{type:"br",raw:W[0]}},ie.del=function(V){var W=this.rules.inline.del.exec(V);if(W)return{type:"del",raw:W[0],text:W[2],tokens:this.lexer.inlineTokens(W[2],[])}},ie.autolink=function(V,W){var Q=this.rules.inline.autolink.exec(V);if(Q){var Y,de;return Q[2]==="@"?(Y=C(this.options.mangle?W(Q[1]):Q[1]),de="mailto:"+Y):(Y=C(Q[1]),de=Y),{type:"link",raw:Q[0],text:Y,href:de,tokens:[{type:"text",raw:Y,text:Y}]}}},ie.url=function(V,W){var Q;if(Q=this.rules.inline.url.exec(V)){var Y,de;if(Q[2]==="@")Y=C(this.options.mangle?W(Q[0]):Q[0]),de="mailto:"+Y;else{var ve;do ve=Q[0],Q[0]=this.rules.inline._backpedal.exec(Q[0])[0];while(ve!==Q[0]);Y=C(Q[0]),Q[1]==="www."?de="http://"+Y:de=Y}return{type:"link",raw:Q[0],text:Y,href:de,tokens:[{type:"text",raw:Y,text:Y}]}}},ie.inlineText=function(V,W){var Q=this.rules.inline.text.exec(V);if(Q){var Y;return this.lexer.state.inRawBlock?Y=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Q[0]):C(Q[0]):Q[0]:Y=C(this.options.smartypants?W(Q[0]):Q[0]),{type:"text",raw:Q[0],text:Y}}},ee}(),ce={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:te,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};ce._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ce._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,ce.def=k(ce.def).replace("label",ce._label).replace("title",ce._title).getRegex(),ce.bullet=/(?:[*+-]|\d{1,9}[.)])/,ce.listItemStart=k(/^( *)(bull) */).replace("bull",ce.bullet).getRegex(),ce.list=k(ce.list).replace(/bull/g,ce.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ce.def.source+")").getRegex(),ce._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ce._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ce.html=k(ce.html,"i").replace("comment",ce._comment).replace("tag",ce._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ce.paragraph=k(ce._paragraph).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex(),ce.blockquote=k(ce.blockquote).replace("paragraph",ce.paragraph).getRegex(),ce.normal=U({},ce),ce.gfm=U({},ce.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ce.gfm.table=k(ce.gfm.table).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex(),ce.gfm.paragraph=k(ce._paragraph).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",ce.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex(),ce.pedantic=U({},ce.normal,{html:k(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ce._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:te,paragraph:k(ce.normal._paragraph).replace("hr",ce.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ce.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var ue={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:te,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:te,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};ue._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",ue.punctuation=k(ue.punctuation).replace(/punctuation/g,ue._punctuation).getRegex(),ue.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,ue.escapedEmSt=/\\\*|\\_/g,ue._comment=k(ce._comment).replace("(?:-->|$)","-->").getRegex(),ue.emStrong.lDelim=k(ue.emStrong.lDelim).replace(/punct/g,ue._punctuation).getRegex(),ue.emStrong.rDelimAst=k(ue.emStrong.rDelimAst,"g").replace(/punct/g,ue._punctuation).getRegex(),ue.emStrong.rDelimUnd=k(ue.emStrong.rDelimUnd,"g").replace(/punct/g,ue._punctuation).getRegex(),ue._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ue._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ue._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ue.autolink=k(ue.autolink).replace("scheme",ue._scheme).replace("email",ue._email).getRegex(),ue._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ue.tag=k(ue.tag).replace("comment",ue._comment).replace("attribute",ue._attribute).getRegex(),ue._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ue._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ue._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ue.link=k(ue.link).replace("label",ue._label).replace("href",ue._href).replace("title",ue._title).getRegex(),ue.reflink=k(ue.reflink).replace("label",ue._label).replace("ref",ce._label).getRegex(),ue.nolink=k(ue.nolink).replace("ref",ce._label).getRegex(),ue.reflinkSearch=k(ue.reflinkSearch,"g").replace("reflink",ue.reflink).replace("nolink",ue.nolink).getRegex(),ue.normal=U({},ue),ue.pedantic=U({},ue.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:k(/^!?\[(label)\]\((.*?)\)/).replace("label",ue._label).getRegex(),reflink:k(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ue._label).getRegex()}),ue.gfm=U({},ue.normal,{escape:k(ue.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),ue.gfm.url=k(ue.gfm.url,"i").replace("email",ue.gfm._extended_email).getRegex(),ue.breaks=U({},ue.gfm,{br:k(ue.br).replace("{2,}","*").getRegex(),text:k(ue.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function $e(ee){return ee.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function tt(ee){var ie="",ne,V,W=ee.length;for(ne=0;ne<W;ne++)V=ee.charCodeAt(ne),Math.random()>.5&&(V="x"+V.toString(16)),ie+="&#"+V+";";return ie}var _e=function(){function ee(ne){this.tokens=[],this.tokens.links=Object.create(null),this.options=ne||e.defaults,this.options.tokenizer=this.options.tokenizer||new Ue,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var V={block:ce.normal,inline:ue.normal};this.options.pedantic?(V.block=ce.pedantic,V.inline=ue.pedantic):this.options.gfm&&(V.block=ce.gfm,this.options.breaks?V.inline=ue.breaks:V.inline=ue.gfm),this.tokenizer.rules=V}ee.lex=function(V,W){var Q=new ee(W);return Q.lex(V)},ee.lexInline=function(V,W){var Q=new ee(W);return Q.inlineTokens(V)};var ie=ee.prototype;return ie.lex=function(V){V=V.replace(/\r\n|\r/g,`
`),this.blockTokens(V,this.tokens);for(var W;W=this.inlineQueue.shift();)this.inlineTokens(W.src,W.tokens);return this.tokens},ie.blockTokens=function(V,W){var Q=this;W===void 0&&(W=[]),this.options.pedantic?V=V.replace(/\t/g,"    ").replace(/^ +$/gm,""):V=V.replace(/^( *)(\t+)/gm,function(Re,Ye,wt){return Ye+"    ".repeat(wt.length)});for(var Y,de,ve,rt;V;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Re){return(Y=Re.call({lexer:Q},V,W))?(V=V.substring(Y.raw.length),W.push(Y),!0):!1}))){if(Y=this.tokenizer.space(V)){V=V.substring(Y.raw.length),Y.raw.length===1&&W.length>0?W[W.length-1].raw+=`
`:W.push(Y);continue}if(Y=this.tokenizer.code(V)){V=V.substring(Y.raw.length),de=W[W.length-1],de&&(de.type==="paragraph"||de.type==="text")?(de.raw+=`
`+Y.raw,de.text+=`
`+Y.text,this.inlineQueue[this.inlineQueue.length-1].src=de.text):W.push(Y);continue}if(Y=this.tokenizer.fences(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.heading(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.hr(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.blockquote(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.list(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.html(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.def(V)){V=V.substring(Y.raw.length),de=W[W.length-1],de&&(de.type==="paragraph"||de.type==="text")?(de.raw+=`
`+Y.raw,de.text+=`
`+Y.raw,this.inlineQueue[this.inlineQueue.length-1].src=de.text):this.tokens.links[Y.tag]||(this.tokens.links[Y.tag]={href:Y.href,title:Y.title});continue}if(Y=this.tokenizer.table(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.lheading(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(ve=V,this.options.extensions&&this.options.extensions.startBlock&&function(){var Re=1/0,Ye=V.slice(1),wt=void 0;Q.options.extensions.startBlock.forEach(function(Ct){wt=Ct.call({lexer:this},Ye),typeof wt=="number"&&wt>=0&&(Re=Math.min(Re,wt))}),Re<1/0&&Re>=0&&(ve=V.substring(0,Re+1))}(),this.state.top&&(Y=this.tokenizer.paragraph(ve))){de=W[W.length-1],rt&&de.type==="paragraph"?(de.raw+=`
`+Y.raw,de.text+=`
`+Y.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=de.text):W.push(Y),rt=ve.length!==V.length,V=V.substring(Y.raw.length);continue}if(Y=this.tokenizer.text(V)){V=V.substring(Y.raw.length),de=W[W.length-1],de&&de.type==="text"?(de.raw+=`
`+Y.raw,de.text+=`
`+Y.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=de.text):W.push(Y);continue}if(V){var lt="Infinite loop on byte: "+V.charCodeAt(0);if(this.options.silent){console.error(lt);break}else throw new Error(lt)}}return this.state.top=!0,W},ie.inline=function(V,W){this.inlineQueue.push({src:V,tokens:W})},ie.inlineTokens=function(V,W){var Q=this;W===void 0&&(W=[]);var Y,de,ve,rt=V,lt,Re,Ye;if(this.tokens.links){var wt=Object.keys(this.tokens.links);if(wt.length>0)for(;(lt=this.tokenizer.rules.inline.reflinkSearch.exec(rt))!=null;)wt.includes(lt[0].slice(lt[0].lastIndexOf("[")+1,-1))&&(rt=rt.slice(0,lt.index)+"["+ke("a",lt[0].length-2)+"]"+rt.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(lt=this.tokenizer.rules.inline.blockSkip.exec(rt))!=null;)rt=rt.slice(0,lt.index)+"["+ke("a",lt[0].length-2)+"]"+rt.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(lt=this.tokenizer.rules.inline.escapedEmSt.exec(rt))!=null;)rt=rt.slice(0,lt.index)+"++"+rt.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;V;)if(Re||(Ye=""),Re=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Qe){return(Y=Qe.call({lexer:Q},V,W))?(V=V.substring(Y.raw.length),W.push(Y),!0):!1}))){if(Y=this.tokenizer.escape(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.tag(V)){V=V.substring(Y.raw.length),de=W[W.length-1],de&&Y.type==="text"&&de.type==="text"?(de.raw+=Y.raw,de.text+=Y.text):W.push(Y);continue}if(Y=this.tokenizer.link(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.reflink(V,this.tokens.links)){V=V.substring(Y.raw.length),de=W[W.length-1],de&&Y.type==="text"&&de.type==="text"?(de.raw+=Y.raw,de.text+=Y.text):W.push(Y);continue}if(Y=this.tokenizer.emStrong(V,rt,Ye)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.codespan(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.br(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.del(V)){V=V.substring(Y.raw.length),W.push(Y);continue}if(Y=this.tokenizer.autolink(V,tt)){V=V.substring(Y.raw.length),W.push(Y);continue}if(!this.state.inLink&&(Y=this.tokenizer.url(V,tt))){V=V.substring(Y.raw.length),W.push(Y);continue}if(ve=V,this.options.extensions&&this.options.extensions.startInline&&function(){var Qe=1/0,Mt=V.slice(1),Ot=void 0;Q.options.extensions.startInline.forEach(function(Mi){Ot=Mi.call({lexer:this},Mt),typeof Ot=="number"&&Ot>=0&&(Qe=Math.min(Qe,Ot))}),Qe<1/0&&Qe>=0&&(ve=V.substring(0,Qe+1))}(),Y=this.tokenizer.inlineText(ve,$e)){V=V.substring(Y.raw.length),Y.raw.slice(-1)!=="_"&&(Ye=Y.raw.slice(-1)),Re=!0,de=W[W.length-1],de&&de.type==="text"?(de.raw+=Y.raw,de.text+=Y.text):W.push(Y);continue}if(V){var Ct="Infinite loop on byte: "+V.charCodeAt(0);if(this.options.silent){console.error(Ct);break}else throw new Error(Ct)}}return W},i(ee,null,[{key:"rules",get:function(){return{block:ce,inline:ue}}}]),ee}(),Vt=function(){function ee(ne){this.options=ne||e.defaults}var ie=ee.prototype;return ie.code=function(V,W,Q){var Y=(W||"").match(/\S*/)[0];if(this.options.highlight){var de=this.options.highlight(V,Y);de!=null&&de!==V&&(Q=!0,V=de)}return V=V.replace(/\n$/,"")+`
`,Y?'<pre><code class="'+this.options.langPrefix+C(Y,!0)+'">'+(Q?V:C(V,!0))+`</code></pre>
`:"<pre><code>"+(Q?V:C(V,!0))+`</code></pre>
`},ie.blockquote=function(V){return`<blockquote>
`+V+`</blockquote>
`},ie.html=function(V){return V},ie.heading=function(V,W,Q,Y){if(this.options.headerIds){var de=this.options.headerPrefix+Y.slug(Q);return"<h"+W+' id="'+de+'">'+V+"</h"+W+`>
`}return"<h"+W+">"+V+"</h"+W+`>
`},ie.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},ie.list=function(V,W,Q){var Y=W?"ol":"ul",de=W&&Q!==1?' start="'+Q+'"':"";return"<"+Y+de+`>
`+V+"</"+Y+`>
`},ie.listitem=function(V){return"<li>"+V+`</li>
`},ie.checkbox=function(V){return"<input "+(V?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},ie.paragraph=function(V){return"<p>"+V+`</p>
`},ie.table=function(V,W){return W&&(W="<tbody>"+W+"</tbody>"),`<table>
<thead>
`+V+`</thead>
`+W+`</table>
`},ie.tablerow=function(V){return`<tr>
`+V+`</tr>
`},ie.tablecell=function(V,W){var Q=W.header?"th":"td",Y=W.align?"<"+Q+' align="'+W.align+'">':"<"+Q+">";return Y+V+("</"+Q+`>
`)},ie.strong=function(V){return"<strong>"+V+"</strong>"},ie.em=function(V){return"<em>"+V+"</em>"},ie.codespan=function(V){return"<code>"+V+"</code>"},ie.br=function(){return this.options.xhtml?"<br/>":"<br>"},ie.del=function(V){return"<del>"+V+"</del>"},ie.link=function(V,W,Q){if(V=O(this.options.sanitize,this.options.baseUrl,V),V===null)return Q;var Y='<a href="'+C(V)+'"';return W&&(Y+=' title="'+W+'"'),Y+=">"+Q+"</a>",Y},ie.image=function(V,W,Q){if(V=O(this.options.sanitize,this.options.baseUrl,V),V===null)return Q;var Y='<img src="'+V+'" alt="'+Q+'"';return W&&(Y+=' title="'+W+'"'),Y+=this.options.xhtml?"/>":">",Y},ie.text=function(V){return V},ee}(),Ne=function(){function ee(){}var ie=ee.prototype;return ie.strong=function(V){return V},ie.em=function(V){return V},ie.codespan=function(V){return V},ie.del=function(V){return V},ie.html=function(V){return V},ie.text=function(V){return V},ie.link=function(V,W,Q){return""+Q},ie.image=function(V,W,Q){return""+Q},ie.br=function(){return""},ee}(),bt=function(){function ee(){this.seen={}}var ie=ee.prototype;return ie.serialize=function(V){return V.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},ie.getNextSafeSlug=function(V,W){var Q=V,Y=0;if(this.seen.hasOwnProperty(Q)){Y=this.seen[V];do Y++,Q=V+"-"+Y;while(this.seen.hasOwnProperty(Q))}return W||(this.seen[V]=Y,this.seen[Q]=0),Q},ie.slug=function(V,W){W===void 0&&(W={});var Q=this.serialize(V);return this.getNextSafeSlug(Q,W.dryrun)},ee}(),mt=function(){function ee(ne){this.options=ne||e.defaults,this.options.renderer=this.options.renderer||new Vt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ne,this.slugger=new bt}ee.parse=function(V,W){var Q=new ee(W);return Q.parse(V)},ee.parseInline=function(V,W){var Q=new ee(W);return Q.parseInline(V)};var ie=ee.prototype;return ie.parse=function(V,W){W===void 0&&(W=!0);var Q="",Y,de,ve,rt,lt,Re,Ye,wt,Ct,Qe,Mt,Ot,Mi,zt,Fi,Wi,Ti,rs,un,Qn=V.length;for(Y=0;Y<Qn;Y++){if(Qe=V[Y],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Qe.type]&&(un=this.options.extensions.renderers[Qe.type].call({parser:this},Qe),un!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Qe.type))){Q+=un||"";continue}switch(Qe.type){case"space":continue;case"hr":{Q+=this.renderer.hr();continue}case"heading":{Q+=this.renderer.heading(this.parseInline(Qe.tokens),Qe.depth,x(this.parseInline(Qe.tokens,this.textRenderer)),this.slugger);continue}case"code":{Q+=this.renderer.code(Qe.text,Qe.lang,Qe.escaped);continue}case"table":{for(wt="",Ye="",rt=Qe.header.length,de=0;de<rt;de++)Ye+=this.renderer.tablecell(this.parseInline(Qe.header[de].tokens),{header:!0,align:Qe.align[de]});for(wt+=this.renderer.tablerow(Ye),Ct="",rt=Qe.rows.length,de=0;de<rt;de++){for(Re=Qe.rows[de],Ye="",lt=Re.length,ve=0;ve<lt;ve++)Ye+=this.renderer.tablecell(this.parseInline(Re[ve].tokens),{header:!1,align:Qe.align[ve]});Ct+=this.renderer.tablerow(Ye)}Q+=this.renderer.table(wt,Ct);continue}case"blockquote":{Ct=this.parse(Qe.tokens),Q+=this.renderer.blockquote(Ct);continue}case"list":{for(Mt=Qe.ordered,Ot=Qe.start,Mi=Qe.loose,rt=Qe.items.length,Ct="",de=0;de<rt;de++)Fi=Qe.items[de],Wi=Fi.checked,Ti=Fi.task,zt="",Fi.task&&(rs=this.renderer.checkbox(Wi),Mi?Fi.tokens.length>0&&Fi.tokens[0].type==="paragraph"?(Fi.tokens[0].text=rs+" "+Fi.tokens[0].text,Fi.tokens[0].tokens&&Fi.tokens[0].tokens.length>0&&Fi.tokens[0].tokens[0].type==="text"&&(Fi.tokens[0].tokens[0].text=rs+" "+Fi.tokens[0].tokens[0].text)):Fi.tokens.unshift({type:"text",text:rs}):zt+=rs),zt+=this.parse(Fi.tokens,Mi),Ct+=this.renderer.listitem(zt,Ti,Wi);Q+=this.renderer.list(Ct,Mt,Ot);continue}case"html":{Q+=this.renderer.html(Qe.text);continue}case"paragraph":{Q+=this.renderer.paragraph(this.parseInline(Qe.tokens));continue}case"text":{for(Ct=Qe.tokens?this.parseInline(Qe.tokens):Qe.text;Y+1<Qn&&V[Y+1].type==="text";)Qe=V[++Y],Ct+=`
`+(Qe.tokens?this.parseInline(Qe.tokens):Qe.text);Q+=W?this.renderer.paragraph(Ct):Ct;continue}default:{var Zs='Token with "'+Qe.type+'" type was not found.';if(this.options.silent){console.error(Zs);return}else throw new Error(Zs)}}}return Q},ie.parseInline=function(V,W){W=W||this.renderer;var Q="",Y,de,ve,rt=V.length;for(Y=0;Y<rt;Y++){if(de=V[Y],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[de.type]&&(ve=this.options.extensions.renderers[de.type].call({parser:this},de),ve!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(de.type))){Q+=ve||"";continue}switch(de.type){case"escape":{Q+=W.text(de.text);break}case"html":{Q+=W.html(de.text);break}case"link":{Q+=W.link(de.href,de.title,this.parseInline(de.tokens,W));break}case"image":{Q+=W.image(de.href,de.title,de.text);break}case"strong":{Q+=W.strong(this.parseInline(de.tokens,W));break}case"em":{Q+=W.em(this.parseInline(de.tokens,W));break}case"codespan":{Q+=W.codespan(de.text);break}case"br":{Q+=W.br();break}case"del":{Q+=W.del(this.parseInline(de.tokens,W));break}case"text":{Q+=W.text(de.text);break}default:{var lt='Token with "'+de.type+'" type was not found.';if(this.options.silent){console.error(lt);return}else throw new Error(lt)}}}return Q},ee}();function qe(ee,ie,ne){if(typeof ee>"u"||ee===null)throw new Error("marked(): input parameter is undefined or null");if(typeof ee!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ee)+", string expected");if(typeof ie=="function"&&(ne=ie,ie=null),ie=U({},qe.defaults,ie||{}),pe(ie),ne){var V=ie.highlight,W;try{W=_e.lex(ee,ie)}catch(ve){return ne(ve)}var Q=function(rt){var lt;if(!rt)try{ie.walkTokens&&qe.walkTokens(W,ie.walkTokens),lt=mt.parse(W,ie)}catch(Re){rt=Re}return ie.highlight=V,rt?ne(rt):ne(null,lt)};if(!V||V.length<3||(delete ie.highlight,!W.length))return Q();var Y=0;qe.walkTokens(W,function(ve){ve.type==="code"&&(Y++,setTimeout(function(){V(ve.text,ve.lang,function(rt,lt){if(rt)return Q(rt);lt!=null&&lt!==ve.text&&(ve.text=lt,ve.escaped=!0),Y--,Y===0&&Q()})},0))}),Y===0&&Q();return}try{var de=_e.lex(ee,ie);return ie.walkTokens&&qe.walkTokens(de,ie.walkTokens),mt.parse(de,ie)}catch(ve){if(ve.message+=`
Please report this to https://github.com/markedjs/marked.`,ie.silent)return"<p>An error occurred:</p><pre>"+C(ve.message+"",!0)+"</pre>";throw ve}}qe.options=qe.setOptions=function(ee){return U(qe.defaults,ee),l(qe.defaults),qe},qe.getDefaults=a,qe.defaults=e.defaults,qe.use=function(){for(var ee=arguments.length,ie=new Array(ee),ne=0;ne<ee;ne++)ie[ne]=arguments[ne];var V=U.apply(void 0,[{}].concat(ie)),W=qe.defaults.extensions||{renderers:{},childTokens:{}},Q;ie.forEach(function(Y){if(Y.extensions&&(Q=!0,Y.extensions.forEach(function(ve){if(!ve.name)throw new Error("extension name required");if(ve.renderer){var rt=W.renderers?W.renderers[ve.name]:null;rt?W.renderers[ve.name]=function(){for(var lt=arguments.length,Re=new Array(lt),Ye=0;Ye<lt;Ye++)Re[Ye]=arguments[Ye];var wt=ve.renderer.apply(this,Re);return wt===!1&&(wt=rt.apply(this,Re)),wt}:W.renderers[ve.name]=ve.renderer}if(ve.tokenizer){if(!ve.level||ve.level!=="block"&&ve.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");W[ve.level]?W[ve.level].unshift(ve.tokenizer):W[ve.level]=[ve.tokenizer],ve.start&&(ve.level==="block"?W.startBlock?W.startBlock.push(ve.start):W.startBlock=[ve.start]:ve.level==="inline"&&(W.startInline?W.startInline.push(ve.start):W.startInline=[ve.start]))}ve.childTokens&&(W.childTokens[ve.name]=ve.childTokens)})),Y.renderer&&function(){var ve=qe.defaults.renderer||new Vt,rt=function(Ye){var wt=ve[Ye];ve[Ye]=function(){for(var Ct=arguments.length,Qe=new Array(Ct),Mt=0;Mt<Ct;Mt++)Qe[Mt]=arguments[Mt];var Ot=Y.renderer[Ye].apply(ve,Qe);return Ot===!1&&(Ot=wt.apply(ve,Qe)),Ot}};for(var lt in Y.renderer)rt(lt);V.renderer=ve}(),Y.tokenizer&&function(){var ve=qe.defaults.tokenizer||new Ue,rt=function(Ye){var wt=ve[Ye];ve[Ye]=function(){for(var Ct=arguments.length,Qe=new Array(Ct),Mt=0;Mt<Ct;Mt++)Qe[Mt]=arguments[Mt];var Ot=Y.tokenizer[Ye].apply(ve,Qe);return Ot===!1&&(Ot=wt.apply(ve,Qe)),Ot}};for(var lt in Y.tokenizer)rt(lt);V.tokenizer=ve}(),Y.walkTokens){var de=qe.defaults.walkTokens;V.walkTokens=function(ve){Y.walkTokens.call(this,ve),de&&de.call(this,ve)}}Q&&(V.extensions=W),qe.setOptions(V)})},qe.walkTokens=function(ee,ie){for(var ne=function(){var Y=W.value;switch(ie.call(qe,Y),Y.type){case"table":{for(var de=r(Y.header),ve;!(ve=de()).done;){var rt=ve.value;qe.walkTokens(rt.tokens,ie)}for(var lt=r(Y.rows),Re;!(Re=lt()).done;)for(var Ye=Re.value,wt=r(Ye),Ct;!(Ct=wt()).done;){var Qe=Ct.value;qe.walkTokens(Qe.tokens,ie)}break}case"list":{qe.walkTokens(Y.items,ie);break}default:qe.defaults.extensions&&qe.defaults.extensions.childTokens&&qe.defaults.extensions.childTokens[Y.type]?qe.defaults.extensions.childTokens[Y.type].forEach(function(Mt){qe.walkTokens(Y[Mt],ie)}):Y.tokens&&qe.walkTokens(Y.tokens,ie)}},V=r(ee),W;!(W=V()).done;)ne()},qe.parseInline=function(ee,ie){if(typeof ee>"u"||ee===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof ee!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ee)+", string expected");ie=U({},qe.defaults,ie||{}),pe(ie);try{var ne=_e.lexInline(ee,ie);return ie.walkTokens&&qe.walkTokens(ne,ie.walkTokens),mt.parseInline(ne,ie)}catch(V){if(V.message+=`
Please report this to https://github.com/markedjs/marked.`,ie.silent)return"<p>An error occurred:</p><pre>"+C(V.message+"",!0)+"</pre>";throw V}},qe.Parser=mt,qe.parser=mt.parse,qe.Renderer=Vt,qe.TextRenderer=Ne,qe.Lexer=_e,qe.lexer=_e.lex,qe.Tokenizer=Ue,qe.Slugger=bt,qe.parse=qe;var Fe=qe.options,Wt=qe.setOptions,Kt=qe.use,It=qe.walkTokens,ai=qe.parseInline,Pt=qe,Ie=mt.parse,Xe=_e.lex;e.Lexer=_e,e.Parser=mt,e.Renderer=Vt,e.Slugger=bt,e.TextRenderer=Ne,e.Tokenizer=Ue,e.getDefaults=a,e.lexer=Xe,e.marked=qe,e.options=Fe,e.parse=Pt,e.parseInline=ai,e.parser=Ie,e.setOptions=Wt,e.use=Kt,e.walkTokens=It,Object.defineProperty(e,"__esModule",{value:!0})})})();var uZ=Ase||exports;function Y5e(s,e={},t={}){var i;const n=new Ae;let o=!1;const r=W6(e),a=function(C){let S;try{S=LI(decodeURIComponent(C))}catch{}return S?(S=AX(S,x=>{if(s.uris&&s.uris[x])return yt.revive(s.uris[x])}),encodeURIComponent(JSON.stringify(S))):C},l=function(C,S){const x=s.uris&&s.uris[C];let L=yt.revive(x);return S?C.startsWith(Xt.data+":")?C:(L||(L=yt.parse(C)),WJ.asBrowserUri(L).toString(!0)):!L||yt.parse(C).toString()===L.toString()?C:(L.query&&(L=L.with({query:a(L.query)})),L.toString())},c=new uZ.Renderer;c.image=(C,S,x)=>{let L=[],k=[];return C&&({href:C,dimensions:L}=QNe(C),k.push(`src="${Uk(C)}"`)),x&&k.push(`alt="${Uk(x)}"`),S&&k.push(`title="${Uk(S)}"`),L.length&&(k=k.concat(L)),"<img "+k.join(" ")+">"},c.link=(C,S,x)=>typeof C!="string"?"":(C===x&&(x=B4(x)),S=typeof S=="string"?Uk(B4(S)):"",C=B4(C),C=C.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${C}" title="${S||C}">${x}</a>`),c.paragraph=C=>`<p>${C}</p>`;const d=[];if(e.codeBlockRenderer&&(c.code=(C,S)=>{const x=oie.nextId(),L=e.codeBlockRenderer(S!=null?S:"",C);return d.push(L.then(k=>[x,k])),`<div class="code" data-code="${x}">${J8(C)}</div>`}),e.actionHandler){const C=e.actionHandler.disposables.add(new an(r,"click")),S=e.actionHandler.disposables.add(new an(r,"auxclick"));e.actionHandler.disposables.add(gt.any(C.event,S.event)(x=>{const L=new nd(x);if(!L.leftButton&&!L.middleButton)return;let k=L.target;if(!(k.tagName!=="A"&&(k=k.parentElement,!k||k.tagName!=="A")))try{let T=k.dataset.href;T&&(s.baseUri&&(T=kF(yt.from(s.baseUri),T)),e.actionHandler.callback(T,L))}catch(T){Yt(T)}finally{L.preventDefault()}}))}s.supportHtml||(t.sanitizer=C=>(s.isTrusted?C.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?C:"",t.sanitize=!0,t.silent=!0),t.renderer=c;let f=(i=s.value)!==null&&i!==void 0?i:"";f.length>1e5&&(f=`${f.substr(0,1e5)}\u2026`),s.supportThemeIcons&&(f=qNe(f));let g=uZ.parse(f,t);s.supportThemeIcons&&(g=Em(g).map(S=>typeof S=="string"?S:S.outerHTML).join(""));const _=new DOMParser().parseFromString(dZ(s,g),"text/html");if(_.body.querySelectorAll("img").forEach(C=>{const S=C.getAttribute("src");if(S){let x=S;try{s.baseUri&&(x=kF(yt.from(s.baseUri),x))}catch{}C.src=l(x,!0)}}),_.body.querySelectorAll("a").forEach(C=>{const S=C.getAttribute("href");if(C.setAttribute("href",""),!S||/^data:|javascript:/i.test(S)||/^command:/i.test(S)&&!s.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(S))C.replaceWith(...C.childNodes);else{let x=l(S,!1);s.baseUri&&(x=kF(yt.from(s.baseUri),S)),C.dataset.href=x}}),r.innerHTML=dZ(s,_.body.innerHTML),d.length>0&&Promise.all(d).then(C=>{var S,x;if(o)return;const L=new Map(C),k=r.querySelectorAll("div[data-code]");for(const T of k){const A=L.get((S=T.dataset.code)!==null&&S!==void 0?S:"");A&&Mg(T,A)}(x=e.asyncRenderCallback)===null||x===void 0||x.call(e)}),e.asyncRenderCallback)for(const C of r.getElementsByTagName("img")){const S=n.add(Le(C,"load",()=>{S.dispose(),e.asyncRenderCallback()}))}return{element:r,dispose:()=>{o=!0,n.dispose()}}}function kF(s,e){return/^\w[\w\d+.-]*:/.test(e)?e:s.path.endsWith("/")?Xq(s,e).toString():Xq(nR(s),e).toString()}function dZ(s,e){const{config:t,allowedSchemes:i}=Z5e(s);FJ("uponSanitizeAttribute",(o,r)=>{if(r.attrName==="style"||r.attrName==="class"){if(o.tagName==="SPAN"){if(r.attrName==="style"){r.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(r.attrValue);return}else if(r.attrName==="class"){r.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(r.attrValue);return}}r.keepAttr=!1;return}});const n=wLe(i);try{return sLe(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{BJ("uponSanitizeAttribute"),n.dispose()}}function Z5e(s){const e=[Xt.http,Xt.https,Xt.mailto,Xt.data,Xt.file,Xt.vscodeFileResource,Xt.vscodeRemote,Xt.vscodeRemoteResource];return s.isTrusted&&e.push(Xt.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var Q5e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},hZ=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},X5e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})},EF;let ef=class Mse{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new J,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const n=new Ae;return{element:n.add(Y5e(e,Object.assign(Object.assign({},this._getRenderOptions(e,n)),t),i)).element,dispose:()=>n.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:(i,n)=>X5e(this,void 0,void 0,function*(){var o,r,a;let l;i?l=this._languageService.getLanguageIdByLanguageName(i):this._options.editor&&(l=(o=this._options.editor.getModel())===null||o===void 0?void 0:o.getLanguageId()),l||(l=xl);const c=yield MIe(this._languageService,n,l),d=document.createElement("span");if(d.innerHTML=(a=(r=Mse._ttpTokenizer)===null||r===void 0?void 0:r.createHTML(c))!==null&&a!==void 0?a:c,this._options.editor){const f=this._options.editor.getOption(46);Fo(d,f)}else this._options.codeBlockFontFamily&&(d.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(d.style.fontSize=this._options.codeBlockFontSize),d}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>this._openerService.open(i,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(Yt),disposables:t}}}};ef._ttpTokenizer=(EF=window.trustedTypes)===null||EF===void 0?void 0:EF.createPolicy("tokenizeToString",{createHTML(s){return s}});ef=Q5e([hZ(1,Vn),hZ(2,Ol)],ef);const fZ=Pe;class o0 extends ge{constructor(e,t,i=IRe){super(),this._renderDisposeables=this._register(new Ae),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new Sse),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new ef({editor:this._editor},t,i)),this._computer=new J5e(this._editor),this._hoverOperation=this._register(new Lse(this._editor,this._computer)),this._register(this._hoverOperation.onResult(n=>{this._withResult(n.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(46)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return o0.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const n of t){const o=fZ("div.hover-row.markdown-hover"),r=Se(o,fZ("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(n.value));r.appendChild(a.element),i.appendChild(o)}this._updateContents(i),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),n=this._editor.getScrollTop(),o=this._editor.getOption(61),r=this._hover.containerDomNode.clientHeight,a=i-n-(r-o)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}}o0.ID="editor.contrib.modesGlyphHoverWidget";class J5e{constructor(e){this._editor=e,this._lineNumber=-1}get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}computeSync(){const e=n=>({value:n}),t=this._editor.getLineDecorations(this._lineNumber),i=[];if(!t)return i;for(const n of t){if(!n.options.glyphMarginClassName)continue;const o=n.options.glyphMarginHoverMessage;!o||T0(o)||i.push(...$8(o).map(e))}return i}}var e3e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class t3e{constructor(e,t,i){this.provider=e,this.hover=t,this.ordinal=i}}function i3e(s,e,t,i,n){return e3e(this,void 0,void 0,function*(){try{const o=yield Promise.resolve(s.provideHover(t,i,n));if(o&&s3e(o))return new t3e(s,o,e)}catch(o){Ys(o)}})}function PV(s,e,t,i){const o=s.ordered(e).map((r,a)=>i3e(r,a,e,t,i));return us.fromPromises(o).coalesce()}function n3e(s,e,t,i){return PV(s,e,t,i).map(n=>n.hover).toPromise()}Ed("_executeHoverProvider",(s,e,t)=>{const i=s.get(ct);return n3e(i.hoverProvider,e,t,ri.None)});function s3e(s){const e=typeof s.range<"u",t=typeof s.contents<"u"&&s.contents&&s.contents.length>0;return e&&t}var o3e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},aE=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const gZ=Pe;class td{constructor(e,t,i,n){this.owner=e,this.range=t,this.contents=i,this.ordinal=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let jI=class{constructor(e,t,i,n,o){this._editor=e,this._languageService=t,this._openerService=i,this._configurationService=n,this._languageFeaturesService=o,this.hoverOrdinal=2}createLoadingMessage(e){return new td(this,e.range,[new Wr().appendText(b("modesContentHover.loading","Loading..."))],2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),r=[];let a=1e3;const l=i.getLineLength(n),c=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),d=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:c});typeof d=="number"&&l>=d&&r.push(new td(this,e.range,[{value:b("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],a++));for(const f of t){const g=f.range.startLineNumber===n?f.range.startColumn:1,m=f.range.endLineNumber===n?f.range.endColumn:o,_=f.options.hoverMessage;if(!_||T0(_))continue;const C=new M(e.range.startLineNumber,g,e.range.startLineNumber,m);r.push(new td(this,C,$8(_),a++))}return r}computeAsync(e,t,i){if(!this._editor.hasModel()||e.type!==1)return us.EMPTY;const n=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(n))return us.EMPTY;const o=new se(e.range.startLineNumber,e.range.startColumn);return PV(this._languageFeaturesService.hoverProvider,n,o,i).filter(r=>!T0(r.hover.contents)).map(r=>{const a=r.hover.range?M.lift(r.hover.range):e.range;return new td(this,a,r.hover.contents,r.ordinal)})}renderHoverParts(e,t){return Ose(e,t,this._editor,this._languageService,this._openerService)}};jI=o3e([aE(1,Vn),aE(2,Ol),aE(3,Ai),aE(4,ct)],jI);function Ose(s,e,t,i,n){e.sort((r,a)=>r.ordinal-a.ordinal);const o=new Ae;for(const r of e)for(const a of r.contents){if(T0(a))continue;const l=gZ("div.hover-row.markdown-hover"),c=Se(l,gZ("div.hover-contents")),d=o.add(new ef({editor:t},i,n));o.add(d.onDidRenderAsync(()=>{c.className="hover-contents code-hover-contents",s.onContentsChanged()}));const f=o.add(d.render(a));c.appendChild(f.element),s.fragment.appendChild(l)}return o}var Pse=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},KI=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};class pZ{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let O9=class{constructor(e,t,i){this._markerService=t,this._configService=i,this._onDidChange=new J,this.onDidChange=this._onDidChange.event,this._dispoables=new Ae,this._markers=[],this._nextIdx=-1,yt.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const n=this._configService.getValue("problems.sortOrder"),o=(a,l)=>{let c=Py(a.resource.toString(),l.resource.toString());return c===0&&(n==="position"?c=M.compareRangesUsingStarts(a,l)||Bn.compare(a.severity,l.severity):c=Bn.compare(a.severity,l.severity)||M.compareRangesUsingStarts(a,l)),c},r=()=>{this._markers=this._markerService.read({resource:yt.isUri(e)?e:void 0,severities:Bn.Error|Bn.Warning|Bn.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(o)};r(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(r(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new pZ(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let n=!1,o=this._markers.findIndex(r=>r.resource.toString()===e.uri.toString());o<0&&(o=U8(this._markers,{resource:e.uri},(r,a)=>Py(r.resource.toString(),a.resource.toString())),o<0&&(o=~o));for(let r=o;r<this._markers.length;r++){let a=M.lift(this._markers[r]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new M(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=r,n=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}n||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(this._markers.length===0)return!1;const n=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),n!==this._nextIdx}find(e,t){let i=this._markers.findIndex(n=>n.resource.toString()===e.toString());if(!(i<0)){for(;i<this._markers.length;i++)if(M.containsPosition(this._markers[i],t))return new pZ(this._markers[i],i+1,this._markers.length)}}};O9=Pse([KI(1,Td),KI(2,Ai)],O9);const Fse=bi("IMarkerNavigationService");let P9=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new Sr}getMarkerList(e){for(const t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new O9(e,this._markerService,this._configService)}};P9=Pse([KI(0,Td),KI(1,Ai)],P9);ki(Fse,P9,!0);var F9;(function(s){function e(t){switch(t){case Pn.Ignore:return"severity-ignore "+w.info.classNames;case Pn.Info:return w.info.classNames;case Pn.Warning:return w.warning.classNames;case Pn.Error:return w.error.classNames;default:return""}}s.className=e})(F9||(F9={}));Cn((s,e)=>{const t=s.getColor(gDe);if(t){const o=w.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.text-search-provider-messages .providerMessage ${o},
			.extensions-viewlet > .extensions ${o} {
				color: ${t};
			}
		`)}const i=s.getColor(pDe);if(i){const o=w.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.extensions-viewlet > .extensions ${o},
			.extension-editor ${o},
			.text-search-provider-messages .providerMessage ${o},
			.preferences-editor ${o} {
				color: ${i};
			}
		`)}const n=s.getColor(mDe);if(n){const o=w.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.extensions-viewlet > .extensions ${o},
			.text-search-provider-messages .providerMessage ${o},
			.extension-editor ${o} {
				color: ${n};
			}
		`)}});var r3e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Zv=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};class a3e{constructor(e,t,i,n,o){this._openerService=n,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new Ae,this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(Ps(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&i(l)})),this._scrollable=new zee(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{r.style.left=`-${a.scrollLeft}px`,r.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){Ni(this._disposables)}update(e){const{source:t,message:i,relatedInformation:n,code:o}=e;let r=((t==null?void 0:t.length)||0)+2;o&&(typeof o=="string"?r+=o.length:r+=o.value.length);const a=md(i);this._lines=a.length,this._longestLineLength=0;for(const g of a)this._longestLineLength=Math.max(g.length+r,this._longestLineLength);Ts(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const g of a)l=document.createElement("div"),l.innerText=g,g===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||o){const g=document.createElement("span");if(g.classList.add("details"),l.appendChild(g),t){const m=document.createElement("span");m.innerText=t,m.classList.add("source"),g.appendChild(m)}if(o)if(typeof o=="string"){const m=document.createElement("span");m.innerText=`(${o})`,m.classList.add("code"),g.appendChild(m)}else{this._codeLink=Pe("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=_=>{this._openerService.open(o.target,{allowCommands:!0}),_.preventDefault(),_.stopPropagation()};const m=Se(this._codeLink,Pe("span"));m.innerText=o.value,g.appendChild(this._codeLink)}}if(Ts(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Po(n)){const g=this._relatedBlock.appendChild(document.createElement("div"));g.style.paddingTop=`${Math.floor(this._editor.getOption(61)*.66)}px`,this._lines+=1;for(const m of n){const _=document.createElement("div"),C=document.createElement("a");C.classList.add("filename"),C.innerText=`${this._labelService.getUriBasenameLabel(m.resource)}(${m.startLineNumber}, ${m.startColumn}): `,C.title=this._labelService.getUriLabel(m.resource),this._relatedDiagnostics.set(C,m);const S=document.createElement("span");S.innerText=m.message,_.appendChild(C),_.appendChild(S),this._lines+=1,g.appendChild(_)}}const c=this._editor.getOption(46),d=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),f=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:f})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Bn.Error:t=b("Error","Error");break;case Bn.Warning:t=b("Warning","Warning");break;case Bn.Info:t=b("Info","Info");break;case Bn.Hint:t=b("Hint","Hint");break}let i=b("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const n=this._editor.getModel();return n&&e.startLineNumber<=n.getLineCount()&&e.startLineNumber>=1&&(i=`${n.getLineContent(e.startLineNumber)}, ${i}`),i}}let W0=class Bse extends HI{constructor(e,t,i,n,o,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o),this._themeService=t,this._openerService=i,this._menuService=n,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new Ae,this._onDidSelectRelatedInformation=new J,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Bn.Warning,this._backgroundColor=oe.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(d3e);let t=B9,i=l3e;this._severity===Bn.Warning?(t=QE,i=c3e):this._severity===Bn.Info&&(t=V9,i=u3e);const n=e.getColor(t),o=e.getColor(i);this.style({arrowColor:n,frameColor:n,headerBackgroundColor:o,primaryHeadingColor:e.getColor(sse),secondaryHeadingColor:e.getColor(ose)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(n=>this.editor.focus()));const t=[],i=this._menuService.createMenu(Bse.TitleMenu,this._contextKeyService);f5e(i,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),i.dispose()}_fillTitleIcon(e){this._icon=Se(e,Pe(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new a3e(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const n=M.lift(e),o=this.editor.getPosition(),r=o&&n.containsPosition(o)?o:n.getStartPosition();super.show(r,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=i>1?b("problems","{0} of {1} problems",t,i):b("change","{0} of {1} problem",t,i);this.setTitle(Rl(a.uri),l)}this._icon.className=`codicon ${F9.className(Bn.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};W0.TitleMenu=new G("gotoErrorTitleMenu");W0=r3e([Zv(1,cn),Zv(2,Ol),Zv(3,L_),Zv(4,Zt),Zv(5,jt),Zv(6,I0)],W0);const mZ=Xy(od,fee),_Z=Xy(Ha,b0),vZ=Xy(jr,qT),B9=j("editorMarkerNavigationError.background",{dark:mZ,light:mZ,hcDark:si,hcLight:si},b("editorMarkerNavigationError","Editor marker navigation widget error color.")),l3e=j("editorMarkerNavigationError.headerBackground",{dark:pt(B9,.1),light:pt(B9,.1),hcDark:null,hcLight:null},b("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),QE=j("editorMarkerNavigationWarning.background",{dark:_Z,light:_Z,hcDark:si,hcLight:si},b("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),c3e=j("editorMarkerNavigationWarning.headerBackground",{dark:pt(QE,.1),light:pt(QE,.1),hcDark:"#0C141F",hcLight:pt(QE,.2)},b("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),V9=j("editorMarkerNavigationInfo.background",{dark:vZ,light:vZ,hcDark:si,hcLight:si},b("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),u3e=j("editorMarkerNavigationInfo.headerBackground",{dark:pt(V9,.1),light:pt(V9,.1),hcDark:null,hcLight:null},b("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),d3e=j("editorMarkerNavigation.background",{dark:Es,light:Es,hcDark:Es,hcLight:Es},b("editorMarkerNavigationBackground","Editor marker navigation widget background."));var h3e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},lE=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},Vse=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let qg=class XE{constructor(e,t,i,n,o){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=n,this._instantiationService=o,this._sessionDispoables=new Ae,this._editor=e,this._widgetVisible=Wse.bindTo(this._contextKeyService)}static get(e){return e.getContribution(XE.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(W0,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(i=>{var n,o,r;(!(!((n=this._model)===null||n===void 0)&&n.selected)||!M.containsPosition((o=this._model)===null||o===void 0?void 0:o.selected.marker,i.position))&&((r=this._model)===null||r===void 0||r.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const i=this._model.find(this._editor.getModel().uri,this._widget.position);i?this._widget.updateMarker(i.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(i=>{this._editorService.openCodeEditor({resource:i.resource,options:{pinned:!0,revealIfOpened:!0,selection:M.lift(i).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new se(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){var i,n;return Vse(this,void 0,void 0,function*(){if(this._editor.hasModel()){const o=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(o.move(e,this._editor.getModel(),this._editor.getPosition()),!o.selected)return;if(o.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=yield this._editorService.openCodeEditor({resource:o.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:o.selected.marker}},this._editor);r&&((i=XE.get(r))===null||i===void 0||i.close(),(n=XE.get(r))===null||n===void 0||n.nagivate(e,t))}else this._widget.showAtMarker(o.selected.marker,o.selected.index,o.selected.total)}})}};qg.ID="editor.contrib.markerController";qg=h3e([lE(1,Fse),lE(2,jt),lE(3,Vi),lE(4,Zt)],qg);class zR extends ot{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}run(e,t){var i;return Vse(this,void 0,void 0,function*(){t.hasModel()&&((i=qg.get(t))===null||i===void 0||i.nagivate(this._next,this._multiFile))})}}class Dg extends zR{constructor(){super(!0,!1,{id:Dg.ID,label:Dg.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:$.focus,primary:578,weight:100},menuOpts:{menuId:W0.TitleMenu,title:Dg.LABEL,icon:Ls("marker-navigation-next",w.arrowDown,b("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}Dg.ID="editor.action.marker.next";Dg.LABEL=b("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class Am extends zR{constructor(){super(!1,!1,{id:Am.ID,label:Am.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:$.focus,primary:1602,weight:100},menuOpts:{menuId:W0.TitleMenu,title:Am.LABEL,icon:Ls("marker-navigation-previous",w.arrowUp,b("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}Am.ID="editor.action.marker.prev";Am.LABEL=b("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class f3e extends zR{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:b("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:$.focus,primary:66,weight:100},menuOpts:{menuId:G.MenubarGoMenu,title:b({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class g3e extends zR{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:b("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:$.focus,primary:1090,weight:100},menuOpts:{menuId:G.MenubarGoMenu,title:b({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}Ei(qg.ID,qg);We(Dg);We(Am);We(f3e);We(g3e);const Wse=new st("markersNavigationVisible",!1),p3e=Fs.bindToContribution(qg.get);Be(new p3e({id:"closeMarkersNavigation",precondition:Wse,handler:s=>s.close(),kbOpts:{weight:100+50,kbExpr:$.focus,primary:9,secondary:[1033]}}));var m3e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},TF=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const Xl=Pe;class _3e{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const bZ={type:1,filter:{include:vi.QuickFix},triggerAction:ir.QuickFixHover};let W9=class{constructor(e,t,i,n){this._editor=e,this._markerDecorationsService=t,this._openerService=i,this._languageFeaturesService=n,this.hoverOrdinal=5,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),r=[];for(const a of t){const l=a.range.startLineNumber===n?a.range.startColumn:1,c=a.range.endLineNumber===n?a.range.endColumn:o,d=this._markerDecorationsService.getMarker(i.uri,a);if(!d)continue;const f=new M(e.range.startLineNumber,l,e.range.startLineNumber,c);r.push(new _3e(this,f,d))}return r}renderHoverParts(e,t){if(!t.length)return ge.None;const i=new Ae;t.forEach(o=>e.fragment.appendChild(this.renderMarkerHover(o,i)));const n=t.length===1?t[0]:t.sort((o,r)=>Bn.compare(o.marker.severity,r.marker.severity))[0];return this.renderMarkerStatusbar(e,n,i),i}renderMarkerHover(e,t){const i=Xl("div.hover-row"),n=Se(i,Xl("div.marker.hover-contents")),{source:o,message:r,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(n);const c=Se(n,Xl("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=r,o||a)if(a&&typeof a!="string"){const d=Xl("span");if(o){const _=Se(d,Xl("span"));_.innerText=o}const f=Se(d,Xl("a.code-link"));f.setAttribute("href",a.target.toString()),t.add(Le(f,"click",_=>{this._openerService.open(a.target,{allowCommands:!0}),_.preventDefault(),_.stopPropagation()}));const g=Se(f,Xl("span"));g.innerText=a.value;const m=Se(n,d);m.style.opacity="0.6",m.style.paddingLeft="6px"}else{const d=Se(n,Xl("span"));d.style.opacity="0.6",d.style.paddingLeft="6px",d.innerText=o&&a?`${o}(${a})`:o||`(${a})`}if(Po(l))for(const{message:d,resource:f,startLineNumber:g,startColumn:m}of l){const _=Se(n,Xl("div"));_.style.marginTop="8px";const C=Se(_,Xl("a"));C.innerText=`${Rl(f)}(${g}, ${m}): `,C.style.cursor="pointer",t.add(Le(C,"click",x=>{x.stopPropagation(),x.preventDefault(),this._openerService&&this._openerService.open(f,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:g,startColumn:m}}}).catch(Yt)}));const S=Se(_,Xl("span"));S.innerText=d,this._editor.applyFontInfo(S)}return i}renderMarkerStatusbar(e,t,i){if((t.marker.severity===Bn.Error||t.marker.severity===Bn.Warning||t.marker.severity===Bn.Info)&&e.statusBar.addAction({label:b("view problem","View Problem"),commandId:Dg.ID,run:()=>{var n;e.hide(),(n=qg.get(this._editor))===null||n===void 0||n.showAtMarker(t.marker),this._editor.focus()}}),!this._editor.getOption(83)){const n=e.statusBar.append(Xl("div"));this.recentMarkerCodeActionsInfo&&(kI.makeKey(this.recentMarkerCodeActionsInfo.marker)===kI.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(n.textContent=b("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?ge.None:i.add(Vm(()=>n.textContent=b("checkingForQuickFixes","Checking for quick fixes..."),200));n.textContent||(n.textContent=String.fromCharCode(160));const r=this.getCodeActions(t.marker);i.add(ni(()=>r.cancel())),r.then(a=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),n.textContent=b("noQuickFixes","No quick fixes available");return}n.style.display="none";let l=!1;i.add(ni(()=>{l||a.dispose()})),e.statusBar.addAction({label:b("quick fixes","Quick Fix..."),commandId:gC.Id,run:c=>{l=!0;const d=Ug.get(this._editor),f=Oo(c);e.hide(),d==null||d.showCodeActions(bZ,a,{x:f.left+6,y:f.top+f.height+6,width:f.width,height:f.height})}})},Yt)}}getCodeActions(e){return qs(t=>LV(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new M(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),bZ,T_.None,t))}};W9=m3e([TF(1,EB),TF(2,Ol),TF(3,ct)],W9);Cn((s,e)=>{const t=s.getColor($N);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const i=s.getColor(jN);i&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${i}; }`)});var v3e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},cE=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let Gg=class Hse{constructor(e,t,i,n,o){this._editor=e,this._instantiationService=t,this._openerService=i,this._languageService=n,this._toUnhook=new Ae,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(r=>{r.hasChanged(55)&&(this._unhookEvents(),this._hookEvents())})}static get(e){return e.getContribution(Hse.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(55);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(i=>this._onEditorMouseDown(i))),this._toUnhook.add(this._editor.onMouseUp(i=>this._onEditorMouseUp(i))),this._toUnhook.add(this._editor.onMouseMove(i=>this._onEditorMouseMove(i))),this._toUnhook.add(this._editor.onKeyDown(i=>this._onKeyDown(i)))):(this._toUnhook.add(this._editor.onMouseMove(i=>this._onEditorMouseMove(i))),this._toUnhook.add(this._editor.onKeyDown(i=>this._onKeyDown(i)))),this._toUnhook.add(this._editor.onMouseLeave(i=>this._onEditorMouseLeave(i))),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(i=>this._onEditorScrollChanged(i)))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target;if(t.type===9&&t.detail===Rm.ID){this._hoverClicked=!0;return}t.type===12&&t.detail===o0.ID||(t.type!==12&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseLeave(e){var t;const i=e.event.browserEvent.relatedTarget;!((t=this._contentWidget)===null||t===void 0)&&t.containsNode(i)||this._hideWidgets()}_onEditorMouseMove(e){var t,i,n,o,r;const a=e.target;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a.type===9&&a.detail===Rm.ID||this._isHoverSticky&&!(!((i=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||i===void 0)&&i.isCollapsed)||!this._isHoverSticky&&a.type===9&&a.detail===Rm.ID&&((n=this._contentWidget)===null||n===void 0?void 0:n.isColorPickerVisible())||this._isHoverSticky&&a.type===12&&a.detail===o0.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(o=this._glyphWidget)===null||o===void 0||o.hide();return}if(a.type===2&&a.position){(r=this._contentWidget)===null||r===void 0||r.hide(),this._glyphWidget||(this._glyphWidget=new o0(this._editor,this._languageService,this._openerService)),this._glyphWidget.startShowingAt(a.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,i;this._isMouseDown&&this._hoverClicked&&((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(i=this._contentWidget)===null||i===void 0||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(UI,this._editor)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,i){this._getOrCreateContentWidget().startShowingAtRange(e,t,i)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};Gg.ID="editor.contrib.hover";Gg=v3e([cE(1,Zt),cE(2,Ol),cE(3,Vn),cE(4,jt)],Gg);class b3e extends ot{constructor(){super({id:"editor.action.showHover",label:b({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;const i=Gg.get(t);if(!i)return;const n=t.getPosition(),o=new M(n.lineNumber,n.column,n.lineNumber,n.column),r=t.getOption(2)===2;i.showContentHover(o,1,r)}}class C3e extends ot{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:b({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){const i=Gg.get(t);if(!i)return;const n=t.getPosition();if(!n)return;const o=new M(n.lineNumber,n.column,n.lineNumber,n.column),r=o_.get(t);if(!r)return;r.startFindDefinitionFromCursor(n).then(()=>{i.showContentHover(o,1,!0)})}}Ei(Gg.ID,Gg);We(b3e);We(C3e);P_.register(jI);P_.register(W9);Cn((s,e)=>{const t=s.getColor(_xe);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const i=s.getColor(jm);i&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${i}; }`);const n=s.getColor(UB);n&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${n}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${n.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${n.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${n.transparent(.5)}; }`));const o=s.getColor($N);o&&e.addRule(`.monaco-editor .monaco-hover a { color: ${o}; }`);const r=s.getColor(jN);r&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${r}; }`);const a=s.getColor(zB);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const l=s.getColor(vxe);l&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);const c=s.getColor(hee);c&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${c}; }`)});class H9 extends ge{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=e.target;if(t.type!==6||!t.detail.injectedText||t.detail.injectedText.options.attachedData!==Zne||!t.range)return;const i=this._editor.getContribution(Gg.ID);if(!!i&&!i.isColorPickerVisible()){const n=new M(t.range.startLineNumber,t.range.startColumn+1,t.range.endLineNumber,t.range.endColumn+1);i.showContentHover(n,1,!1)}}}H9.ID="editor.contrib.colorContribution";Ei(H9.ID,H9);P_.register(_9);var zse=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};function FV(s){return{asString:()=>zse(this,void 0,void 0,function*(){return s}),asFile:()=>{},value:typeof s=="string"?s:void 0}}function w3e(s,e,t){return{asString:()=>zse(this,void 0,void 0,function*(){return""}),asFile:()=>({name:s,uri:e,data:t}),value:void 0}}class Use{constructor(){this._entries=new Map}get size(){return this._entries.size}has(e){return this._entries.has(this.toKey(e))}get(e){var t;return(t=this._entries.get(this.toKey(e)))===null||t===void 0?void 0:t[0]}append(e,t){const i=this._entries.get(e);i?i.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*entries(){for(const[e,t]of this._entries.entries())for(const i of t)yield[e,i]}values(){return Array.from(this._entries.values()).flat()}forEach(e){for(const[t,i]of this.entries())e(i,t)}toKey(e){return e.toLowerCase()}}const $se=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let s;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?s=crypto.getRandomValues.bind(crypto):s=function(i){for(let n=0;n<i.length;n++)i[n]=Math.floor(Math.random()*256);return i};const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){s(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let n=0,o="";return o+=t[e[n++]],o+=t[e[n++]],o+=t[e[n++]],o+=t[e[n++]],o+="-",o+=t[e[n++]],o+=t[e[n++]],o+="-",o+=t[e[n++]],o+=t[e[n++]],o+="-",o+=t[e[n++]],o+=t[e[n++]],o+="-",o+=t[e[n++]],o+=t[e[n++]],o+=t[e[n++]],o+=t[e[n++]],o+=t[e[n++]],o+=t[e[n++]],o}}(),qI={EDITORS:"CodeEditors",FILES:"CodeFiles"};function y3e(s){var e;const t=[];if(s.dataTransfer&&s.dataTransfer.types.length>0){const i=s.dataTransfer.getData(qI.EDITORS);if(i)try{t.push(...LI(i))}catch{}else try{const r=s.dataTransfer.getData(CL.RESOURCES);t.push(...S3e(r))}catch{}if(!((e=s.dataTransfer)===null||e===void 0)&&e.files)for(let r=0;r<s.dataTransfer.files.length;r++){const a=s.dataTransfer.files[r];if(a&&a.path)try{t.push({resource:yt.file(a.path),isExternal:!0,allowWorkspaceOpen:!0})}catch{}}const n=s.dataTransfer.getData(qI.FILES);if(n)try{const r=JSON.parse(n);for(const a of r)t.push({resource:yt.file(a),isExternal:!0,allowWorkspaceOpen:!0})}catch{}const o=Wn.as(jse.DragAndDropContribution).getAll();for(const r of o){const a=s.dataTransfer.getData(r.dataFormatKey);if(a)try{t.push(...r.getEditorInputs(a))}catch{}}}return t}function S3e(s){const e=[];if(s){const t=JSON.parse(s);for(const i of t)if(i.indexOf(":")>0){const{selection:n,uri:o}=Kte(yt.parse(i));e.push({resource:o,options:{selection:n}})}}return e}class L3e{constructor(){this._contributions=new Map}getAll(){return this._contributions.values()}}const jse={DragAndDropContribution:"workbench.contributions.dragAndDrop"};Wn.add(jse.DragAndDropContribution,new L3e);var x3e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};function z9(s){const e=new Use;for(const t of s.items){const i=t.type;if(t.kind==="string"){const n=new Promise(o=>t.getAsString(o));e.append(i,FV(n))}else if(t.kind==="file"){const n=t.getAsFile();n&&e.append(i,D3e(n))}}return e}function D3e(s){const e=s.path?yt.parse(s.path):void 0;return w3e(s.name,e,()=>x3e(this,void 0,void 0,function*(){return new Uint8Array(yield s.arrayBuffer())}))}const k3e=Object.freeze([qI.EDITORS,qI.FILES,CL.RESOURCES]);function E3e(s,e,t=!1){var i;if(e.dataTransfer&&(t||!s.has(Ur.uriList))){const n=y3e(e).filter(o=>o.resource).map(o=>o.resource.toString());for(const o of(i=e.dataTransfer)===null||i===void 0?void 0:i.items){const r=o.getAsFile();r&&n.push(r.path?yt.file(r.path).toString():r.name)}n.length&&s.replace(Ur.uriList,FV(BV.create(n)))}for(const n of k3e)s.delete(n)}const BV=Object.freeze({create:s=>Kh(s.map(e=>e.toString())).join(`\r
`),parse:s=>s.split(`\r
`).filter(e=>!e.startsWith("#"))});function CZ(s,e=mo){return $Te(s,e)?s.charAt(0).toUpperCase()+s.slice(1):s}var T3e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},I3e=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,CURSOR_INDEX:!0,CURSOR_NUMBER:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});class wZ{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const i=t.resolve(e);if(i!==void 0)return i}}}class yZ{constructor(e,t,i,n){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=n}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let i=this._model.getValueInRange(this._selection)||void 0,n=this._selection.startLineNumber!==this._selection.endLineNumber;if(!i&&this._overtypingCapturer){const o=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);o&&(i=o.value,n=o.multiline)}if(i&&n&&e.snippet){const o=this._model.getLineContent(this._selection.startLineNumber),r=on(o,0,this._selection.startColumn-1);let a=r;e.snippet.walk(c=>c===e?!1:(c instanceof Hr&&(a=on(md(c.value).pop())),!0));const l=Fm(a,r);i=i.replace(/(\r\n|\r|\n)(.*)/g,(c,d,f)=>`${d}${a.substr(l)}${f}`)}return i}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const i=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return i&&i.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}class SZ{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return wm(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const i=wm(this._model.uri.fsPath),n=i.lastIndexOf(".");return n<=0?i:i.slice(0,n)}else{if(t==="TM_DIRECTORY")return $X(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(nR(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class LZ{constructor(e,t,i,n){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=n}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(!!t){if(this._spread){const i=t.split(/\r\n|\n|\r/).filter(n=>!ZX(n));if(i.length===this._selectionCount)return i[this._selectionIdx]}return t}}}let GI=class{constructor(e,t,i){this._model=e,this._selection=t,this._languageConfigurationService=i}resolve(e){const{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),n=this._languageConfigurationService.getLanguageConfiguration(i).comments;if(!!n){if(t==="LINE_COMMENT")return n.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return n.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return n.blockCommentEndToken||void 0}}};GI=T3e([I3e(2,os)],GI);class eu{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return eu.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return eu.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return eu.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return eu.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}eu.dayNames=[b("Sunday","Sunday"),b("Monday","Monday"),b("Tuesday","Tuesday"),b("Wednesday","Wednesday"),b("Thursday","Thursday"),b("Friday","Friday"),b("Saturday","Saturday")];eu.dayNamesShort=[b("SundayShort","Sun"),b("MondayShort","Mon"),b("TuesdayShort","Tue"),b("WednesdayShort","Wed"),b("ThursdayShort","Thu"),b("FridayShort","Fri"),b("SaturdayShort","Sat")];eu.monthNames=[b("January","January"),b("February","February"),b("March","March"),b("April","April"),b("May","May"),b("June","June"),b("July","July"),b("August","August"),b("September","September"),b("October","October"),b("November","November"),b("December","December")];eu.monthNamesShort=[b("JanuaryShort","Jan"),b("FebruaryShort","Feb"),b("MarchShort","Mar"),b("AprilShort","Apr"),b("MayShort","May"),b("JuneShort","Jun"),b("JulyShort","Jul"),b("AugustShort","Aug"),b("SeptemberShort","Sep"),b("OctoberShort","Oct"),b("NovemberShort","Nov"),b("DecemberShort","Dec")];class xZ{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=jRe(this._workspaceService.getWorkspace());if(!!t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(KG(e))return wm(e.uri.path);let t=wm(e.configPath.path);return t.endsWith(h7)&&(t=t.substr(0,t.length-h7.length-1)),t}_resoveWorkspacePath(e){if(KG(e))return CZ(e.uri.fsPath);const t=wm(e.configPath.path);let i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?CZ(i):"/"}}class DZ{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return $se()}}var N3e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},R3e=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};class hl{constructor(e,t,i){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=i,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=cK(t.placeholders,nc.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const i of this._snippet.placeholders){const n=this._snippet.offset(i),o=this._snippet.fullLen(i),r=M.fromPositions(e.getPositionAt(this._offset+n),e.getPositionAt(this._offset+n+o)),a=i.isFinalTabstop?hl._decor.inactiveFinal:hl._decor.inactive,l=t.addDecoration(r,a);this._placeholderDecorations.set(i,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const n=[];for(const o of this._placeholderGroups[this._placeholderGroupsIdx])if(o.transform){const r=this._placeholderDecorations.get(o),a=this._editor.getModel().getDecorationRange(r),l=this._editor.getModel().getValueInRange(a),c=o.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<c.length;d++)c[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[d]);n.push(Nn.replace(a,c.join(this._editor.getModel().getEOL())))}n.length>0&&this._editor.executeEdits("snippet.placeholderTransform",n)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const i=this._editor.getModel().changeDecorations(n=>{const o=new Set,r=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);r.push(new et(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),n.changeDecorationOptions(l,a.isFinalTabstop?hl._decor.activeFinal:hl._decor.active),o.add(a);for(const d of this._snippet.enclosingPlaceholders(a)){const f=this._placeholderDecorations.get(d);n.changeDecorationOptions(f,d.isFinalTabstop?hl._decor.activeFinal:hl._decor.active),o.add(d)}}for(const[a,l]of this._placeholderDecorations)o.has(a)||n.changeDecorationOptions(l,a.isFinalTabstop?hl._decor.inactiveFinal:hl._decor.inactive);return r});return t?this.move(e):i!=null?i:[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof nc){const i=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(i).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){return this._snippet.placeholders.length===0||this._snippet.placeholders.length===1&&this._snippet.placeholders[0].isFinalTabstop}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let i;for(const n of t){if(n.isFinalTabstop)break;i||(i=[],e.set(n.index,i));const o=this._placeholderDecorations.get(n),r=this._editor.getModel().getDecorationRange(o);if(!r){e.delete(n.index);break}i.push(r)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(e!=null&&e.choice))return;const t=this._placeholderDecorations.get(e);if(!t)return;const i=this._editor.getModel().getDecorationRange(t);if(!!i)return{range:i,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof mC,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(i=>{for(const n of this._placeholderGroups[this._placeholderGroupsIdx]){const o=e.shift();console.assert(o._offset!==-1),console.assert(!o._placeholderDecorations);const r=o._snippet.placeholderInfo.last.index;for(const l of o._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=n.index+(r+1)/this._nestingLevel:l.index=n.index+l.index/this._nestingLevel;this._snippet.replace(n,o._snippet.children);const a=this._placeholderDecorations.get(n);i.removeDecoration(a),this._placeholderDecorations.delete(n);for(const l of o._snippet.placeholders){const c=o._snippet.offset(l),d=o._snippet.fullLen(l),f=M.fromPositions(t.getPositionAt(o._offset+c),t.getPositionAt(o._offset+c+d)),g=i.addDecoration(f,hl._decor.inactive);this._placeholderDecorations.set(l,g)}}this._placeholderGroups=cK(this._snippet.placeholders,nc.compareByIndex)})}}hl._decor={active:Gt.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Gt.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Gt.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Gt.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const kZ={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let YI=class hh{constructor(e,t,i=kZ,n){this._editor=e,this._template=t,this._options=i,this._languageConfigurationService=n,this._templateMerges=[],this._snippets=[]}static adjustWhitespace(e,t,i,n,o){const r=e.getLineContent(t.lineNumber),a=on(r,0,t.column-1);let l;return i.walk(c=>{if(!(c instanceof Hr)||c.parent instanceof mC)return!0;const d=c.value.split(/\r\n|\r|\n/);if(n){const g=i.offset(c);if(g===0)d[0]=e.normalizeIndentation(d[0]);else{l=l!=null?l:i.toString();const m=l.charCodeAt(g-1);(m===10||m===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let m=1;m<d.length;m++)d[m]=e.normalizeIndentation(a+d[m])}const f=d.join(e.getEOL());return f!==c.value&&(c.parent.replace(c,[new Hr(f)]),l=void 0),!0}),a}static adjustSelection(e,t,i,n){if(i!==0||n!==0){const{positionLineNumber:o,positionColumn:r}=t,a=r-i,l=r+n,c=e.validateRange({startLineNumber:o,startColumn:a,endLineNumber:o,endColumn:l});t=et.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,i,n,o,r,a,l,c){const d=[],f=[];if(!e.hasModel())return{edits:d,snippets:f};const g=e.getModel(),m=e.invokeWithinContext(T=>T.get(pS)),_=e.invokeWithinContext(T=>new SZ(T.get(I0),g)),C=()=>a,S=g.getValueInRange(hh.adjustSelection(g,e.getSelection(),i,0)),x=g.getValueInRange(hh.adjustSelection(g,e.getSelection(),0,n)),L=g.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),k=e.getSelections().map((T,A)=>({selection:T,idx:A})).sort((T,A)=>M.compareRangesUsingStarts(T.selection,A.selection));for(const{selection:T,idx:A}of k){let O=hh.adjustSelection(g,T,i,0),I=hh.adjustSelection(g,T,0,n);S!==g.getValueInRange(O)&&(O=T),x!==g.getValueInRange(I)&&(I=T);const R=T.setStartPosition(O.startLineNumber,O.startColumn).setEndPosition(I.endLineNumber,I.endColumn),B=new Kg().parse(t,!0,o),z=R.getStartPosition(),q=hh.adjustWhitespace(g,z,B,r||A>0&&L!==g.getLineFirstNonWhitespaceColumn(T.positionLineNumber),!0);B.resolveVariables(new wZ([_,new LZ(C,A,k.length,e.getOption(73)==="spread"),new yZ(g,T,A,l),new GI(g,T,c),new eu,new xZ(m),new DZ])),d[A]=Nn.replace(R,B.toString()),d[A].identifier={major:A,minor:0},d[A]._isTracked=!0,f[A]=new hl(e,B,q)}return{edits:d,snippets:f}}static createEditsAndSnippetsFromEdits(e,t,i,n,o,r,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const l=[],c=e.getModel(),d=new Kg,f=new BL,g=new wZ([e.invokeWithinContext(_=>new SZ(_.get(I0),c)),new LZ(()=>o,0,e.getSelections().length,e.getOption(73)==="spread"),new yZ(c,e.getSelection(),0,r),new GI(c,e.getSelection(),a),new eu,new xZ(e.invokeWithinContext(_=>_.get(pS))),new DZ]);t=t.sort((_,C)=>M.compareRangesUsingStarts(_.range,C.range));let m=0;for(let _=0;_<t.length;_++){const{range:C,template:S}=t[_];if(_>0){const T=t[_-1].range,A=M.fromPositions(T.getEndPosition(),C.getStartPosition()),O=new Hr(c.getValueInRange(A));f.appendChild(O),m+=O.value.length}d.parseFragment(S,f),f.resolveVariables(g);const x=f.toString(),L=x.slice(m);m=x.length;const k=Nn.replace(C,L);k.identifier={major:_,minor:0},k._isTracked=!0,l.push(k)}return d.ensureFinalTabstop(f,i,!0),{edits:l,snippets:[new hl(e,f,"")]}}dispose(){Ni(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?hh.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):hh.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,i=>{const n=i.filter(o=>!!o.identifier);for(let o=0;o<t.length;o++)t[o].initialize(n[o].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):n.map(o=>et.fromPositions(o.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=kZ){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:i,snippets:n}=hh.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",i,o=>{const r=o.filter(l=>!!l.identifier);for(let l=0;l<n.length;l++)n[l].initialize(r[l].textChange);const a=n[0].isTrivialSnippet;if(!a){for(const l of this._snippets)l.merge(n);console.assert(n.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):r.map(l=>et.fromPositions(l.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const i of this._snippets){const n=i.move(e);t.push(...n)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const i of this._snippets){const n=i.computePossibleSelections();if(t.size===0)for(const[o,r]of n){r.sort(M.compareRangesUsingStarts);for(const a of e)if(r[0].containsRange(a)){t.set(o,[]);break}}if(t.size===0)return!1;t.forEach((o,r)=>{o.push(...n.get(r))})}e.sort(M.compareRangesUsingStarts);for(const[i,n]of t){if(n.length!==e.length){t.delete(i);continue}n.sort(M.compareRangesUsingStarts);for(let o=0;o<n.length;o++)if(!n[o].containsRange(e[o])){t.delete(i);continue}}return t.size>0}};YI=N3e([R3e(3,os)],YI);var A3e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},uE=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const dE={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Gs=class Yw{constructor(e,t,i,n,o){this._editor=e,this._logService=t,this._languageFeaturesService=i,this._languageConfigurationService=o,this._snippetListener=new Ae,this._modelVersionId=-1,this._inSnippet=Yw.InSnippetMode.bindTo(n),this._hasNextTabstop=Yw.HasNextTabstop.bindTo(n),this._hasPrevTabstop=Yw.HasPrevTabstop.bindTo(n)}static get(e){return e.getContribution(Yw.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}apply(e,t){try{this._doInsert(e,typeof t>"u"?dE:Object.assign(Object.assign({},dE),t))}catch(i){this.cancel(),this._logService.error(i),this._logService.error("snippet_error"),this._logService.error("insert_edits=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}insert(e,t){try{this._doInsert(e,typeof t>"u"?dE:Object.assign(Object.assign({},dE),t))}catch(i){this.cancel(),this._logService.error(i),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var i;if(!!this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(Qi(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new YI(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),!((i=this._session)===null||i===void 0)&&i.hasChoice){this._choiceCompletionItemProvider={provideCompletionItems:(o,r)=>{if(!this._session||o!==this._editor.getModel()||!se.equals(this._editor.getPosition(),r))return;const{activeChoice:a}=this._session;if(!a||a.choice.options.length===0)return;const l=o.getValueInRange(a.range),c=Boolean(a.choice.options.find(f=>f.value===l)),d=[];for(let f=0;f<a.choice.options.length;f++){const g=a.choice.options[f];d.push({kind:13,label:g.value,insertText:g.value,sortText:"a".repeat(f+1),range:a.range,filterText:c?`${l}_${g.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:b("next","Go to next placeholder...")}})}return{suggestions:d}}};const n=this._languageFeaturesService.completionProvider.register({language:this._editor.getModel().getLanguageId(),pattern:this._editor.getModel().uri.fsPath,scheme:this._editor.getModel().uri.scheme},this._choiceCompletionItemProvider);this._snippetListener.add(n)}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:e}=this._session;if(!e||!this._choiceCompletionItemProvider){this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,queueMicrotask(()=>{q5e(this._editor,this._choiceCompletionItemProvider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}};Gs.ID="snippetController2";Gs.InSnippetMode=new st("inSnippetMode",!1,b("inSnippetMode","Whether the editor in current in snippet mode"));Gs.HasNextTabstop=new st("hasNextTabstop",!1,b("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));Gs.HasPrevTabstop=new st("hasPrevTabstop",!1,b("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));Gs=A3e([uE(1,fc),uE(2,ct),uE(3,jt),uE(4,os)],Gs);Ei(Gs.ID,Gs);const UR=Fs.bindToContribution(Gs.get);Be(new UR({id:"jumpToNextSnippetPlaceholder",precondition:Je.and(Gs.InSnippetMode,Gs.HasNextTabstop),handler:s=>s.next(),kbOpts:{weight:100+30,kbExpr:$.editorTextFocus,primary:2}}));Be(new UR({id:"jumpToPrevSnippetPlaceholder",precondition:Je.and(Gs.InSnippetMode,Gs.HasPrevTabstop),handler:s=>s.prev(),kbOpts:{weight:100+30,kbExpr:$.editorTextFocus,primary:1026}}));Be(new UR({id:"leaveSnippet",precondition:Gs.InSnippetMode,handler:s=>s.cancel(!0),kbOpts:{weight:100+30,kbExpr:$.editorTextFocus,primary:9,secondary:[1033]}}));Be(new UR({id:"acceptSnippet",precondition:Gs.InSnippetMode,handler:s=>s.finish()}));function Kse(s,e,t){const i=Gs.get(s);return i?(s.focus(),i.apply(t.map(n=>({range:et.liftSelection(n),template:e}))),i.isInSnippet()):!1}var M3e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},hE=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},EZ=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const IF="application/vnd.code.copyMetadata";let FS=class extends ge{constructor(e,t,i,n,o){super(),this._bulkEditService=t,this._clipboardService=i,this._configurationService=n,this._languageFeaturesService=o,this._editor=e;const r=e.getContainerDomNode();this._register(Le(r,"copy",a=>this.handleCopy(a))),this._register(Le(r,"cut",a=>this.handleCopy(a))),this._register(Le(r,"paste",a=>this.handlePaste(a),!0))}arePasteActionsEnabled(e){return this._configurationService.getValue("editor.experimental.pasteActions.enabled",{resource:e.uri})}handleCopy(e){var t;if(!e.clipboardData||!this._editor.hasTextFocus())return;const i=this._editor.getModel(),n=this._editor.getSelections();if(!i||!(n!=null&&n.length)||!this.arePasteActionsEnabled(i))return;const o=[...n],r=n[0],a=r.isEmpty();if(a){if(!this._editor.getOption(33))return;o[0]=new M(r.startLineNumber,0,r.startLineNumber,i.getLineLength(r.startLineNumber))}const l=this._languageFeaturesService.documentPasteEditProvider.ordered(i).filter(g=>!!g.prepareDocumentPaste);if(!l.length){this.setCopyMetadata(e.clipboardData,{wasFromEmptySelection:a});return}const c=z9(e.clipboardData),d=$se();this.setCopyMetadata(e.clipboardData,{id:d,wasFromEmptySelection:a});const f=qs(g=>EZ(this,void 0,void 0,function*(){const m=yield Promise.all(l.map(_=>_.prepareDocumentPaste(i,o,c,g)));for(const _ of m)_==null||_.forEach((C,S)=>{c.replace(S,C)});return c}));(t=this._currentClipboardItem)===null||t===void 0||t.dataTransferPromise.cancel(),this._currentClipboardItem={handle:d,dataTransferPromise:f}}setCopyMetadata(e,t){e.setData(IF,JSON.stringify(t))}handlePaste(e){var t,i,n;return EZ(this,void 0,void 0,function*(){if(!e.clipboardData||!this._editor.hasTextFocus())return;const o=this._editor.getSelections();if(!(o!=null&&o.length)||!this._editor.hasModel())return;const r=this._editor.getModel();if(!this.arePasteActionsEnabled(r))return;let a;const l=(t=e.clipboardData)===null||t===void 0?void 0:t.getData(IF);l&&typeof l=="string"&&(a=JSON.parse(l));const c=this._languageFeaturesService.documentPasteEditProvider.ordered(r);if(!c.length)return;e.preventDefault(),e.stopImmediatePropagation();const d=r.getVersionId(),f=new e_(this._editor,3);try{const g=z9(e.clipboardData);if((a==null?void 0:a.id)&&((i=this._currentClipboardItem)===null||i===void 0?void 0:i.handle)===a.id&&(yield this._currentClipboardItem.dataTransferPromise).forEach((S,x)=>{g.replace(x,S)}),!g.has(Ur.uriList)){const C=yield this._clipboardService.readResources();C.length&&g.append(Ur.uriList,FV(BV.create(C)))}g.delete(IF);for(const C of c){if(!C.pasteMimeTypes.some(x=>x.toLowerCase()===CL.FILES.toLowerCase()?[...g.values()].some(L=>L.asFile()):g.has(x)))continue;const S=yield C.provideDocumentPasteEdits(r,o,g,f.token);if(d!==r.getVersionId())return;if(S){Kse(this._editor,typeof S.insertText=="string"?Kg.escape(S.insertText):S.insertText.snippet,o),S.additionalEdit&&(yield this._bulkEditService.apply(dC.convert(S.additionalEdit),{editor:this._editor}));return}}const m=(n=g.get(Ur.text))!==null&&n!==void 0?n:g.get("text");if(!m)return;const _=yield m.asString();if(d!==r.getVersionId())return;this._editor.trigger("keyboard","paste",{text:_,pasteOnNewLine:a==null?void 0:a.wasFromEmptySelection,multicursorText:null})}finally{f.dispose()}})}};FS.ID="editor.contrib.copyPasteActionController";FS=M3e([hE(1,yL),hE(2,of),hE(3,Ai),hE(4,ct)],FS);Ei(FS.ID,FS);Wn.as(tf.Configuration).registerConfiguration(Object.assign(Object.assign({},I6),{properties:{"editor.experimental.pasteActions.enabled":{type:"boolean",scope:5,description:b("pasteActions","Enable/disable running edits from extensions on paste."),default:!1}}}));class hg{constructor(e,t,i){this.languageConfigurationService=i,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;const n=t.length,o=e.length;if(i+n>o)return!1;for(let r=0;r<n;r++){const a=e.charCodeAt(i+r),l=t.charCodeAt(r);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,i,n,o,r){const a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,d=e.endColumn,f=o.getLineContent(a),g=o.getLineContent(c);let m=f.lastIndexOf(t,l-1+t.length),_=g.indexOf(i,d-1-i.length);if(m!==-1&&_!==-1)if(a===c)f.substring(m+t.length,_).indexOf(i)>=0&&(m=-1,_=-1);else{const S=f.substring(m+t.length),x=g.substring(0,_);(S.indexOf(i)>=0||x.indexOf(i)>=0)&&(m=-1,_=-1)}let C;m!==-1&&_!==-1?(n&&m+t.length<f.length&&f.charCodeAt(m+t.length)===32&&(t=t+" "),n&&_>0&&g.charCodeAt(_-1)===32&&(i=" "+i,_-=1),C=hg._createRemoveBlockCommentOperations(new M(a,m+t.length+1,c,_+1),t,i)):(C=hg._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=C.length===1?i:null);for(const S of C)r.addTrackedEditOperation(S.range,S.text)}static _createRemoveBlockCommentOperations(e,t,i){const n=[];return M.isEmpty(e)?n.push(Nn.delete(new M(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(n.push(Nn.delete(new M(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),n.push(Nn.delete(new M(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),n}static _createAddBlockCommentOperations(e,t,i,n){const o=[];return M.isEmpty(e)?o.push(Nn.replace(new M(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(o.push(Nn.insert(new se(e.startLineNumber,e.startColumn),t+(n?" ":""))),o.push(Nn.insert(new se(e.endLineNumber,e.endColumn),(n?" ":"")+i))),o}getEditOperations(e,t){const i=this._selection.startLineNumber,n=this._selection.startColumn;e.tokenization.tokenizeIfCheap(i);const o=e.getLanguageIdAtPosition(i,n),r=this.languageConfigurationService.getLanguageConfiguration(o).comments;!r||!r.blockCommentStartToken||!r.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length===2){const n=i[0],o=i[1];return new et(n.range.endLineNumber,n.range.endColumn,o.range.startLineNumber,o.range.startColumn)}else{const n=i[0].range,o=this._usedEndToken?-this._usedEndToken.length-1:0;return new et(n.endLineNumber,n.endColumn+o,n.endLineNumber,n.endColumn+o)}}}class _h{constructor(e,t,i,n,o,r,a){this.languageConfigurationService=e,this._selection=t,this._tabSize=i,this._type=n,this._insertSpace=o,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,i,n){e.tokenization.tokenizeIfCheap(t);const o=e.getLanguageIdAtPosition(t,1),r=n.getLanguageConfiguration(o).comments,a=r?r.lineCommentToken:null;if(!a)return null;const l=[];for(let c=0,d=i-t+1;c<d;c++)l[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,i,n,o,r,a,l){let c=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let f=0,g=n.length;f<g;f++){const m=n[f],_=o+f;if(_===o&&a){m.ignore=!0;continue}const C=i.getLineContent(_),S=Lr(C);if(S===-1){m.ignore=r,m.commentStrOffset=C.length;continue}if(c=!1,m.ignore=!1,m.commentStrOffset=S,d&&!hg._haystackHasNeedleAtOffset(C,m.commentStr,S)&&(e===0?d=!1:e===1||(m.ignore=!0)),d&&t){const x=S+m.commentStrLength;x<C.length&&C.charCodeAt(x)===32&&(m.commentStrLength+=1)}}if(e===0&&c){d=!1;for(let f=0,g=n.length;f<g;f++)n[f].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:n}}static _gatherPreflightData(e,t,i,n,o,r,a,l){const c=_h._gatherPreflightCommentStrings(i,n,o,l);return c===null?{supported:!1}:_h._analyzeLines(e,t,i,c,n,r,a,l)}_executeLineComments(e,t,i,n){let o;i.shouldRemoveComments?o=_h._createRemoveLineCommentsOperations(i.lines,n.startLineNumber):(_h._normalizeInsertionPoint(e,i.lines,n.startLineNumber,this._tabSize),o=this._createAddLineCommentsOperations(i.lines,n.startLineNumber));const r=new se(n.positionLineNumber,n.positionColumn);for(let a=0,l=o.length;a<l;a++)t.addEditOperation(o[a].range,o[a].text),M.isEmpty(o[a].range)&&M.getStartPosition(o[a].range).equals(r)&&e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(o[a].text||"").length);this._selectionId=t.trackSelection(n)}_attemptRemoveBlockComment(e,t,i,n){let o=t.startLineNumber,r=t.endLineNumber;const a=n.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(o).lastIndexOf(i,a-1),c=e.getLineContent(r).indexOf(n,t.endColumn-1-i.length);return l!==-1&&c===-1&&(c=e.getLineContent(o).indexOf(n,l+i.length),r=o),l===-1&&c!==-1&&(l=e.getLineContent(r).lastIndexOf(i,c),o=r),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(o).indexOf(i),l!==-1&&(c=e.getLineContent(o).indexOf(n,l+i.length))),l!==-1&&e.getLineContent(o).charCodeAt(l+i.length)===32&&(i+=" "),c!==-1&&e.getLineContent(r).charCodeAt(c-1)===32&&(n=" "+n,c-=1),l!==-1&&c!==-1?hg._createRemoveBlockCommentOperations(new M(o,l+i.length+1,r,c+1),i,n):null}_executeBlockComment(e,t,i){e.tokenization.tokenizeIfCheap(i.startLineNumber);const n=e.getLanguageIdAtPosition(i.startLineNumber,1),o=this.languageConfigurationService.getLanguageConfiguration(n).comments;if(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)return;const r=o.blockCommentStartToken,a=o.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,i,r,a);if(!l){if(i.isEmpty()){const c=e.getLineContent(i.startLineNumber);let d=Lr(c);d===-1&&(d=c.length),l=hg._createAddBlockCommentOperations(new M(i.startLineNumber,d+1,i.startLineNumber,c.length+1),r,a,this._insertSpace)}else l=hg._createAddBlockCommentOperations(new M(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),r,a,this._insertSpace);l.length===1&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(i);for(const c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new M(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(i);return}i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const n=_h._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return n.supported?this._executeLineComments(e,t,n,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new et(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const i=[];for(let n=0,o=e.length;n<o;n++){const r=e[n];r.ignore||i.push(Nn.delete(new M(t+n,r.commentStrOffset+1,t+n,r.commentStrOffset+r.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){const i=[],n=this._insertSpace?" ":"";for(let o=0,r=e.length;o<r;o++){const a=e[o];a.ignore||i.push(Nn.insert(new se(t+o,a.commentStrOffset+1),a.commentStr+n))}return i}static nextVisibleColumn(e,t,i,n){return i?e+(t-e%t):e+n}static _normalizeInsertionPoint(e,t,i,n){let o=1073741824,r,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(i+l);let f=0;for(let g=0,m=t[l].commentStrOffset;f<o&&g<m;g++)f=_h.nextVisibleColumn(f,n,d.charCodeAt(g)===9,1);f<o&&(o=f)}o=Math.floor(o/n)*n;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(i+l);let f=0;for(r=0,a=t[l].commentStrOffset;f<o&&r<a;r++)f=_h.nextVisibleColumn(f,n,d.charCodeAt(r)===9,1);f>o?t[l].commentStrOffset=r-1:t[l].commentStrOffset=r}}}class VV extends ot{constructor(e,t){super(t),this._type=e}run(e,t){const i=e.get(os);if(!t.hasModel())return;const n=t.getModel(),o=[],r=n.getOptions(),a=t.getOption(19),l=t.getSelections().map((d,f)=>({selection:d,index:f,ignoreFirstLine:!1}));l.sort((d,f)=>M.compareRangesUsingStarts(d.selection,f.selection));let c=l[0];for(let d=1;d<l.length;d++){const f=l[d];c.selection.endLineNumber===f.selection.startLineNumber&&(c.index<f.index?f.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=f))}for(const d of l)o.push(new _h(i,d.selection,r.tabSize,this._type,a.insertSpace,a.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class O3e extends VV{constructor(){super(0,{id:"editor.action.commentLine",label:b("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:G.MenubarEditMenu,group:"5_insert",title:b({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class P3e extends VV{constructor(){super(1,{id:"editor.action.addCommentLine",label:b("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2081),weight:100}})}}class F3e extends VV{constructor(){super(2,{id:"editor.action.removeCommentLine",label:b("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2099),weight:100}})}}class B3e extends ot{constructor(){super({id:"editor.action.blockComment",label:b("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:G.MenubarEditMenu,group:"5_insert",title:b({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const i=e.get(os);if(!t.hasModel())return;const n=t.getOption(19),o=[],r=t.getSelections();for(const a of r)o.push(new hg(a,n.insertSpace,i));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}We(O3e);We(P3e);We(F3e);We(B3e);var V3e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Qv=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let H0=class qse{constructor(e,t,i,n,o,r,a){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=n,this._keybindingService=o,this._menuService=r,this._configurationService=a,this._toDispose=new Ae,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(l=>this._onContextMenu(l))),this._toDispose.add(this._editor.onMouseWheel(l=>{if(this._contextMenuIsBeingShownCount>0){const c=this._contextViewService.getContextViewElement(),d=l.srcElement;d.shadowRoot&&Hm(c)===d.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(l=>{!this._editor.getOption(20)||l.keyCode===58&&(l.preventDefault(),l.stopPropagation(),this.showContextMenu())}))}static get(e){return e.getContribution(qse.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu({x:e.event.posx-1,width:2,y:e.event.posy-1,height:2});if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let i=!1;for(const n of this._editor.getSelections())if(n.containsPosition(e.target.position)){i=!0;break}i||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?G.SimpleEditorContext:G.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const i=[],n=this._menuService.createMenu(t,this._contextKeyService),o=n.getActions({arg:e.uri});n.dispose();for(const r of o){const[,a]=r;let l=0;for(const c of a)if(c instanceof IB){const d=this._getMenuActions(e,c.item.submenu);d.length>0&&(i.push(new Yy(c.id,c.label,d)),l++)}else i.push(c),l++;l&&i.push(new Bo)}return i.length&&i.pop(),i}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const i=this._editor.getOption(55);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const o=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),r=Oo(this._editor.getDomNode()),a=r.left+o.left,l=r.top+o.top+o.height;t={x:a,y:l}}const n=this._editor.getOption(117)&&!gd;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:n?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:o=>{const r=this._keybindingFor(o);if(r)return new hS(o,o,{label:!0,keybinding:r.getLabel(),isMenu:!0});const a=o;return typeof a.getActionViewItem=="function"?a.getActionViewItem():new hS(o,o,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:o=>this._keybindingFor(o),onHide:o=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:i})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel())return;const t=this._editor.getOption(67);let i=0;const n=c=>({id:`menu-action-${++i}`,label:c.label,tooltip:"",class:void 0,enabled:typeof c.enabled>"u"?!0:c.enabled,checked:c.checked,run:c.run,dispose:()=>null}),o=(c,d)=>new Yy(`menu-action-${++i}`,c,d,void 0),r=(c,d,f,g,m)=>{if(!d)return n({label:c,enabled:d,run:()=>{}});const _=S=>()=>{this._configurationService.updateValue(f,S)},C=[];for(const S of m)C.push(n({label:S.label,checked:g===S.value,run:_(S.value)}));return o(c,C)},a=[];a.push(n({label:b("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new Bo),a.push(n({label:b("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(r(b("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:b("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:b("context.minimap.size.fill","Fill"),value:"fill"},{label:b("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(r(b("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:b("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:b("context.minimap.slider.always","Always"),value:"always"}]));const l=this._editor.getOption(117)&&!gd;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:c=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};H0.ID="editor.contrib.contextmenu";H0=V3e([Qv(1,sf),Qv(2,E_),Qv(3,jt),Qv(4,xs),Qv(5,L_),Qv(6,Ai)],H0);class W3e extends ot{constructor(){super({id:"editor.action.showContextMenu",label:b("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:$.textInputFocus,primary:1092,weight:100}})}run(e,t){var i;(i=H0.get(t))===null||i===void 0||i.showContextMenu()}}Ei(H0.ID,H0);We(W3e);class NF{constructor(e){this.selections=e}equals(e){const t=this.selections.length,i=e.selections.length;if(t!==i)return!1;for(let n=0;n<t;n++)if(!this.selections[n].equalsSelection(e.selections[n]))return!1;return!0}}class RF{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}}class r_ extends ge{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const i=new NF(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i)||(this._undoStack.push(new RF(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(e){return e.getContribution(r_.ID)}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new RF(new NF(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new RF(new NF(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}r_.ID="editor.contrib.cursorUndoRedoController";class H3e extends ot{constructor(){super({id:"cursorUndo",label:b("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:$.textInputFocus,primary:2099,weight:100}})}run(e,t,i){var n;(n=r_.get(t))===null||n===void 0||n.cursorUndo()}}class z3e extends ot{constructor(){super({id:"cursorRedo",label:b("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,i){var n;(n=r_.get(t))===null||n===void 0||n.cursorRedo()}}Ei(r_.ID,r_);We(H3e);We(z3e);class U3e{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){const i=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new M(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new et(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new et(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new et(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new et(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new et(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function Xv(s){return mi?s.altKey:s.ctrlKey}class $h extends ge{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(31)||this._editor.getOption(18)||(Xv(e)&&(this._modifierPressed=!0),this._mouseDown&&Xv(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(31)||this._editor.getOption(18)||(Xv(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===$h.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const n=(this._editor.getSelections()||[]).filter(o=>t.position&&o.containsPosition(t.position));if(n.length===1)this._dragSelection=n[0];else return}Xv(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new se(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let i=null;if(e.event.shiftKey){const n=this._editor.getSelection();if(n){const{selectionStartLineNumber:o,selectionStartColumn:r}=n;i=[new et(o,r,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map(n=>n.containsPosition(t)?new et(t.lineNumber,t.column,t.lineNumber,t.column):n);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(Xv(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand($h.ID,new U3e(this._dragSelection,t,Xv(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new M(e.lineNumber,e.column,e.lineNumber,e.column),options:$h._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}$h.ID="editor.contrib.dragAndDrop";$h.TRIGGER_KEY_VALUE=mi?6:5;$h._DECORATION_OPTIONS=Gt.register({description:"dnd-target",className:"dnd-target"});Ei($h.ID,$h);var Gse=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Zw=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},JE=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let BS=class extends ge{constructor(e,t,i,n,o){super(),this._bulkEditService=t,this._languageFeaturesService=i,this._progressService=n,this._register(e.onDropIntoEditor(r=>this.onDropIntoEditor(e,r.position,r.event))),this._languageFeaturesService.documentOnDropEditProvider.register("*",new U9(o))}onDropIntoEditor(e,t,i){return JE(this,void 0,void 0,function*(){if(!i.dataTransfer||!e.hasModel())return;const n=e.getModel(),o=n.getVersionId(),r=yield this.extractDataTransferData(i);if(r.size===0||e.getModel().getVersionId()!==o)return;const a=new e_(e,1);try{const l=this._languageFeaturesService.documentOnDropEditProvider.ordered(n),c=yield this._progressService.withProgress({location:15,delay:750,title:b("dropProgressTitle","Running drop handlers..."),cancellable:!0},()=>pB((()=>JE(this,void 0,void 0,function*(){for(const d of l){const f=yield d.provideDocumentOnDropEdits(n,t,r,a.token);if(a.token.isCancellationRequested)return;if(f)return f}}))(),a.token),()=>{a.cancel()});if(a.token.isCancellationRequested||e.getModel().getVersionId()!==o)return;if(c){const d=new M(t.lineNumber,t.column,t.lineNumber,t.column);Kse(e,typeof c.insertText=="string"?Kg.escape(c.insertText):c.insertText.snippet,[et.fromRange(d,0)]),c.additionalEdit&&(yield this._bulkEditService.apply(dC.convert(c.additionalEdit),{editor:e}));return}}finally{a.dispose()}})}extractDataTransferData(e){return JE(this,void 0,void 0,function*(){if(!e.dataTransfer)return new Use;const t=z9(e.dataTransfer);return E3e(t,e),t})}};BS.ID="editor.contrib.dropIntoEditorController";BS=Gse([Zw(1,yL),Zw(2,ct),Zw(3,Mte),Zw(4,pS)],BS);let U9=class{constructor(e){this._workspaceContextService=e}provideDocumentOnDropEdits(e,t,i,n){var o;return JE(this,void 0,void 0,function*(){const r=i.get(Ur.uriList);if(r){const l=yield r.asString(),c=this.getUriListInsertText(l);if(c)return{insertText:c}}const a=(o=i.get("text"))!==null&&o!==void 0?o:i.get(Ur.text);if(a)return{insertText:yield a.asString()}})}getUriListInsertText(e){const t=[];for(const i of BV.parse(e))try{t.push(yt.parse(i))}catch{}if(!!t.length)return t.map(i=>{const n=this._workspaceContextService.getWorkspaceFolder(i);if(n){const o=YTe(n.uri,i);if(o)return o}return i.fsPath}).join(" ")}};U9=Gse([Zw(0,pS)],U9);Ei(BS.ID,BS);class Xo{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const n=i.options;if(n===Xo._FIND_MATCH_DECORATION||n===Xo._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let n=0,o=this._decorations.length;n<o;n++){const r=this._editor.getModel().getDecorationRange(this._decorations[n]);if(e.equalsRange(r)){t=this._decorations[n],i=n+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(n=>{if(this._highlightedDecorationId!==null&&(n.changeDecorationOptions(this._highlightedDecorationId,Xo._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,n.changeDecorationOptions(this._highlightedDecorationId,Xo._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let o=this._editor.getModel().getDecorationRange(t);if(o.startLineNumber!==o.endLineNumber&&o.endColumn===1){const r=o.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(r);o=new M(o.startLineNumber,o.startColumn,r,a)}this._rangeHighlightDecorationId=n.addDecoration(o,Xo._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let n=Xo._FIND_MATCH_DECORATION;const o=[];if(e.length>1e3){n=Xo._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/c));let f=e[0].range.startLineNumber,g=e[0].range.endLineNumber;for(let m=1,_=e.length;m<_;m++){const C=e[m].range;g+d>=C.startLineNumber?C.endLineNumber>g&&(g=C.endLineNumber):(o.push({range:new M(f,1,g,1),options:Xo._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),f=C.startLineNumber,g=C.endLineNumber)}o.push({range:new M(f,1,g,1),options:Xo._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const r=new Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]={range:e[a].range,options:n};this._decorations=i.deltaDecorations(this._decorations,r),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>i.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>i.addDecoration(a,Xo._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const i=this._decorations[t],n=this._editor.getModel().getDecorationRange(i);if(!(!n||n.endLineNumber>e.lineNumber)){if(n.endLineNumber<e.lineNumber)return n;if(!(n.endColumn>e.column))return n}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,i=this._decorations.length;t<i;t++){const n=this._decorations[t],o=this._editor.getModel().getDecorationRange(n);if(!(!o||o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}Xo._CURRENT_FIND_MATCH_DECORATION=Gt.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Yn(jB),position:El.Center},minimap:{color:Yn(kb),position:Ll.Inline}});Xo._FIND_MATCH_DECORATION=Gt.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Yn(jB),position:El.Center},minimap:{color:Yn(kb),position:Ll.Inline}});Xo._FIND_MATCH_NO_OVERVIEW_DECORATION=Gt.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});Xo._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Gt.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Yn(jB),position:El.Center}});Xo._RANGE_HIGHLIGHT_DECORATION=Gt.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});Xo._FIND_SCOPE_DECORATION=Gt.register({description:"find-scope",className:"findScope",isWholeLine:!0});class $3e{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const i=[];for(let r=0;r<this._ranges.length;r++)i.push({range:this._ranges[r],text:this._replaceStrings[r]});i.sort((r,a)=>M.compareRangesUsingStarts(r.range,a.range));const n=[];let o=i[0];for(let r=1;r<i.length;r++)o.range.endLineNumber===i[r].range.startLineNumber&&o.range.endColumn===i[r].range.startColumn?(o.range=o.range.plusRange(i[r].range),o.text=o.text+i[r].text):(n.push(o),o=i[r]);n.push(o);for(const r of n)t.addEditOperation(r.range,r.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function Yse(s,e){if(s&&s[0]!==""){const t=TZ(s,e,"-"),i=TZ(s,e,"_");return t&&!i?IZ(s,e,"-"):!t&&i?IZ(s,e,"_"):s[0].toUpperCase()===s[0]?e.toUpperCase():s[0].toLowerCase()===s[0]?e.toLowerCase():J1e(s[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):s[0][0].toUpperCase()!==s[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function TZ(s,e,t){return s[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&s[0].split(t).length===e.split(t).length}function IZ(s,e,t){const i=e.split(t),n=s[0].split(t);let o="";return i.forEach((r,a)=>{o+=Yse([n[a]],r)+t}),o.slice(0,-1)}class NZ{constructor(e){this.staticValue=e,this.kind=0}}class j3e{constructor(e){this.pieces=e,this.kind=1}}class z0{constructor(e){!e||e.length===0?this._state=new NZ(""):e.length===1&&e[0].staticValue!==null?this._state=new NZ(e[0].staticValue):this._state=new j3e(e)}static fromStaticValue(e){return new z0([Mm.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?Yse(e,this._state.staticValue):this._state.staticValue;let i="";for(let n=0,o=this._state.pieces.length;n<o;n++){const r=this._state.pieces[n];if(r.staticValue!==null){i+=r.staticValue;continue}let a=z0._substitute(r.matchIndex,e);if(r.caseOps!==null&&r.caseOps.length>0){const l=[],c=r.caseOps.length;let d=0;for(let f=0,g=a.length;f<g;f++){if(d>=c){l.push(a.slice(f));break}switch(r.caseOps[d]){case"U":l.push(a[f].toUpperCase());break;case"u":l.push(a[f].toUpperCase()),d++;break;case"L":l.push(a[f].toLowerCase());break;case"l":l.push(a[f].toLowerCase()),d++;break;default:l.push(a[f])}}a=l.join("")}i+=a}return i}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let i="";for(;e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class Mm{constructor(e,t,i){this.staticValue=e,this.matchIndex=t,!i||i.length===0?this.caseOps=null:this.caseOps=i.slice(0)}static staticValue(e){return new Mm(e,-1,null)}static caseOps(e,t){return new Mm(null,e,t)}}class K3e{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Mm.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=Mm.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Mm.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new z0(this._result)}}function q3e(s){if(!s||s.length===0)return new z0(null);const e=[],t=new K3e(s);for(let i=0,n=s.length;i<n;i++){const o=s.charCodeAt(i);if(o===92){if(i++,i>=n)break;const r=s.charCodeAt(i);switch(r){case 92:t.emitUnchanged(i-1),t.emitStatic("\\",i+1);break;case 110:t.emitUnchanged(i-1),t.emitStatic(`
`,i+1);break;case 116:t.emitUnchanged(i-1),t.emitStatic("	",i+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(i-1),t.emitStatic("",i+1),e.push(String.fromCharCode(r));break}continue}if(o===36){if(i++,i>=n)break;const r=s.charCodeAt(i);if(r===36){t.emitUnchanged(i-1),t.emitStatic("$",i+1);continue}if(r===48||r===38){t.emitUnchanged(i-1),t.emitMatchIndex(0,i+1,e),e.length=0;continue}if(49<=r&&r<=57){let a=r-48;if(i+1<n){const l=s.charCodeAt(i+1);if(48<=l&&l<=57){i++,a=a*10+(l-48),t.emitUnchanged(i-2),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}t.emitUnchanged(i-1),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}}return t.finalize()}const op=new st("findWidgetVisible",!1);op.toNegated();const $R=new st("findInputFocussed",!1),WV=new st("replaceInputFocussed",!1),fE={primary:545,mac:{primary:2593}},gE={primary:565,mac:{primary:2613}},pE={primary:560,mac:{primary:2608}},mE={primary:554,mac:{primary:2602}},_E={primary:558,mac:{primary:2606}},_n={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},fg=19999,G3e=240;class Dy{constructor(e,t){this._toDispose=new Ae,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Za,this._decorations=new Xo(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new Xi(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(i=>{(i.reason===3||i.reason===5||i.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(i=>{this._ignoreModelContentChanged||(i.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(i=>this._onStateChanged(i))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,Ni(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||!this._editor.hasModel()||(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},G3e)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;typeof t<"u"?t!==null&&(Array.isArray(t)?i=t:i=[t]):i=this._decorations.getFindScopes(),i!==null&&(i=i.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new M(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const n=this._findMatches(i,!1,fg);this._decorations.set(n,i);const o=this._editor.getSelection();let r=this._decorations.getCurrentMatchesPosition(o);if(r===0&&n.length>0){const a=LX(n.map(l=>l.range),l=>M.compareRangesUsingStarts(l,o)>=0);r=a>0?a-1+1:r}this._state.changeMatchInfo(r,this._decorations.getCount(),void 0),e&&this._editor.getOption(37).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:n}=e;const o=this._editor.getModel();return t||n===1?(i===1?i=o.getLineCount():i--,n=o.getLineMaxColumn(i)):n--,new se(i,n)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<fg){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;const i=this._decorations.getFindScope(),n=Dy._getSearchRange(this._editor.getModel(),i);n.getEndPosition().isBefore(e)&&(e=n.getEndPosition()),e.isBefore(n.getStartPosition())&&(e=n.getEndPosition());const{lineNumber:o,column:r}=e,a=this._editor.getModel();let l=new se(o,r),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,!1)),!!c){if(!t&&!n.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:n}=e;const o=this._editor.getModel();return t||n===o.getLineMaxColumn(i)?(i===o.getLineCount()?i=1:i++,n=1):n++,new se(i,n)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const i=this._decorations.matchBeforePosition(e);i&&this._setCurrentFindMatch(i);return}if(this._decorations.getCount()<fg){let i=this._decorations.matchAfterPosition(e);i&&i.isEmpty()&&i.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),i=this._decorations.matchAfterPosition(e)),i&&this._setCurrentFindMatch(i);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,n=!1){if(this._cannotFind())return null;const o=this._decorations.getFindScope(),r=Dy._getSearchRange(this._editor.getModel(),o);r.getEndPosition().isBefore(e)&&(e=r.getStartPosition()),e.isBefore(r.getStartPosition())&&(e=r.getStartPosition());const{lineNumber:a,column:l}=e,c=this._editor.getModel();let d=new se(a,l),f=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,t);return i&&f&&f.range.isEmpty()&&f.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),f=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,t)),f?!n&&!r.containsRange(f.range)?this._getNextMatch(f.range.getEndPosition(),t,i,!0):f:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?q3e(this._state.replaceString):z0.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){const n=e.buildReplaceString(i.matches,this._state.preserveCase),o=new ro(t,n);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new se(t.startLineNumber,t.startColumn+n.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const n=(e||[null]).map(o=>Dy._getSearchRange(this._editor.getModel(),o));return this._editor.getModel().findMatches(this._state.searchString,n,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=fg?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new Gp(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(119):null).parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let f="mu";i.ignoreCase&&(f+="i"),i.global&&(f+="g"),i=new RegExp(i.source,f)}const n=this._editor.getModel(),o=n.getValue(1),r=n.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=o.replace(i,function(){return a.buildReplaceString(arguments,c)}):l=o.replace(i,a.buildReplaceString(null,c));const d=new YB(r,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),n=[];for(let r=0,a=i.length;r<a;r++)n[r]=t.buildReplaceString(i[r].matches,this._state.preserveCase);const o=new $3e(this._editor.getSelection(),i.map(r=>r.range),n);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let i=this._findMatches(e,!1,1073741824).map(o=>new et(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn));const n=this._editor.getSelection();for(let o=0,r=i.length;o<r;o++)if(i[o].equalsRange(n)){i=[n].concat(i.slice(0,o)).concat(i.slice(o+1));break}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}class jR extends gc{constructor(e,t,i,n){super(),this._hideSoon=this._register(new Xi(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const o=n.getColorTheme().getColor($T),r=n.getColorTheme().getColor(KT),a=n.getColorTheme().getColor(jT);this.caseSensitive=this._register(new bie({appendTitle:this._keybindingLabelFor(_n.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:o,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new Cie({appendTitle:this._keybindingLabelFor(_n.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:o,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new wie({appendTitle:this._keybindingLabelFor(_n.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:o,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let c=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,c=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,c=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,c=!0),!this._state.isRevealed&&c&&this._revealTemporarily()})),this._register(Le(this._domNode,it.MOUSE_LEAVE,l=>this._onMouseLeave())),this._register(Le(this._domNode,"mouseover",l=>this._onMouseOver())),this._applyTheme(n.getColorTheme()),this._register(n.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return jR.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){!this._isVisible||(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){const t={inputActiveOptionBorder:e.getColor($T),inputActiveOptionForeground:e.getColor(KT),inputActiveOptionBackground:e.getColor(jT)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}jR.ID="editor.contrib.findOptionsWidget";Cn((s,e)=>{const t=s.getColor(hs);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const i=s.getColor(Xc);i&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${i}; }`);const n=s.getColor(Qc);n&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${n}; }`);const o=s.getColor(si);o&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${o}; }`)});function vE(s,e){return s===1?!0:s===2?!1:e}class Y3e extends ge{constructor(){super(),this._onFindReplaceStateChange=this._register(new J),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return vE(this._isRegexOverride,this._isRegex)}get wholeWord(){return vE(this._wholeWordOverride,this._wholeWord)}get matchCase(){return vE(this._matchCaseOverride,this._matchCase)}get preserveCase(){return vE(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,i){const n={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,n.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,n.matchesCount=!0,o=!0),typeof i<"u"&&(M.equalsRange(this._currentMatch,i)||(this._currentMatch=i,n.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(n)}change(e,t,i=!0){var n;const o={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let r=!1;const a=this.isRegex,l=this.wholeWord,c=this.matchCase,d=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,o.searchString=!0,r=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,o.replaceString=!0,r=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,o.isRevealed=!0,r=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,o.isReplaceRevealed=!0,r=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((n=e.searchScope)===null||n===void 0)&&n.every(f=>{var g;return(g=this._searchScope)===null||g===void 0?void 0:g.some(m=>!M.equalsRange(m,f))})||(this._searchScope=e.searchScope,o.searchScope=!0,r=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,o.loop=!0,r=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,o.isSearching=!0,r=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,o.filters=!0,r=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(r=!0,o.isRegex=!0),l!==this.wholeWord&&(r=!0,o.wholeWord=!0),c!==this.matchCase&&(r=!0,o.matchCase=!0),d!==this.preserveCase&&(r=!0,o.preserveCase=!0),r&&this._onFindReplaceStateChange.fire(o)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=fg}}function RZ(s){var e,t;return((e=s.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=s.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var Z3e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const Q3e=Ls("find-selection",w.selection,b("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),AZ=Ls("find-collapsed",w.chevronRight,b("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),MZ=Ls("find-expanded",w.chevronDown,b("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),X3e=Ls("find-replace",w.replace,b("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),J3e=Ls("find-replace-all",w.replaceAll,b("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),e7e=Ls("find-previous-match",w.arrowUp,b("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),t7e=Ls("find-next-match",w.arrowDown,b("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),i7e=b("label.find","Find"),n7e=b("placeholder.find","Find"),s7e=b("label.previousMatchButton","Previous Match"),o7e=b("label.nextMatchButton","Next Match"),r7e=b("label.toggleSelectionFind","Find in Selection"),a7e=b("label.closeButton","Close"),l7e=b("label.replace","Replace"),c7e=b("placeholder.replace","Replace"),u7e=b("label.replaceButton","Replace"),d7e=b("label.replaceAllButton","Replace All"),h7e=b("label.toggleReplaceButton","Toggle Replace"),f7e=b("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",fg),g7e=b("label.matchesLocation","{0} of {1}"),OZ=b("label.noResults","No results"),Bu=419,p7e=275,m7e=p7e-54;let yw=69;const _7e=33,PZ="ctrlEnterReplaceAll.windows.donotask",FZ=mi?256:2048;class AF{constructor(e){this.afterLineNumber=e,this.heightInPx=_7e,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function BZ(s,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionStart>0){s.stopPropagation();return}}function VZ(s,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionEnd<t.value.length){s.stopPropagation();return}}class KR extends gc{constructor(e,t,i,n,o,r,a,l,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=n,this._keybindingService=o,this._contextKeyService=r,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(PZ,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new _d(500),this._register(ni(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(d=>this._onStateChanged(d))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(d=>{if(d.hasChanged(83)&&(this._codeEditor.getOption(83)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),d.hasChanged(133)&&this._tryUpdateWidgetWidth(),d.hasChanged(2)&&this.updateAccessibilitySupport(),d.hasChanged(37)){const f=this._codeEditor.getOption(37).addExtraSpaceOnTop;f&&!this._viewZone&&(this._viewZone=new AF(0),this._showViewZone()),!f&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>Z3e(this,void 0,void 0,function*(){if(this._isVisible){const d=yield this._controller.getGlobalBufferTerm();d&&d!==this._state.searchString&&(this._state.change({searchString:d},!1),this._findInput.select())}}))),this._findInputFocused=$R.bindTo(r),this._findFocusTracker=this._register(zm(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=WV.bindTo(r),this._replaceFocusTracker=this._register(zm(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(37).addExtraSpaceOnTop&&(this._viewZone=new AF(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{!this._isVisible||(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(d=>{if(d.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return KR.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(83)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=ec(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Yt)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=yw+"px",this._state.matchesCount>=fg?this._matchesCount.title=f7e:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=fg&&(t+="+");let i=String(this._state.matchesPosition);i==="0"&&(i="?"),e=bl(g7e,i,t)}else e=OZ;this._matchesCount.appendChild(document.createTextNode(e)),go(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),yw=Math.max(yw,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===OZ)return i===""?b("ariaSearchNoResultEmpty","{0} found",e):b("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const n=b("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();return o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1?`${o.getLineContent(t.startLineNumber)}, ${n}`:n}return b("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const i=!this._codeEditor.getOption(83);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(37).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const i=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=i;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(37).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const n=Oo(i),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),r=n.left+(o?o.left:0),a=o?o.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=$J(this._domNode).left;r>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());n.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(37).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const i=this._viewZone;this._viewZoneId!==void 0||!i||this._codeEditor.changeViewZones(n=>{i.heightInPx=this._getHeight(),this._viewZoneId=n.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(37).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new AF(0));const i=this._viewZone;this._codeEditor.changeViewZones(n=>{if(this._viewZoneId!==void 0){const o=this._getHeight();if(o===i.heightInPx)return;const r=o-i.heightInPx;i.heightInPx=o,n.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r);return}else{let o=this._getHeight();if(o-=this._codeEditor.getOption(77).top,o<=0)return;i.heightInPx=o,this._viewZoneId=n.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){const t={inputActiveOptionBorder:e.getColor($T),inputActiveOptionBackground:e.getColor(jT),inputActiveOptionForeground:e.getColor(KT),inputBackground:e.getColor(KN),inputForeground:e.getColor(qN),inputBorder:e.getColor(GN),inputValidationInfoBackground:e.getColor(NB),inputValidationInfoForeground:e.getColor(RB),inputValidationInfoBorder:e.getColor(AB),inputValidationWarningBackground:e.getColor(MB),inputValidationWarningForeground:e.getColor(OB),inputValidationWarningBorder:e.getColor(PB),inputValidationErrorBackground:e.getColor(FB),inputValidationErrorForeground:e.getColor(BB),inputValidationErrorBorder:e.getColor(VB)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!kB(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=e.width,n=e.minimap.minimapWidth;let o=!1,r=!1,a=!1;if(this._resized&&ec(this._domNode)>Bu){this._domNode.style.maxWidth=`${i-28-n-15}px`,this._replaceInput.width=ec(this._findInput.domNode);return}if(Bu+28+n>=i&&(r=!0),Bu+28+n-yw>=i&&(a=!0),Bu+28+n-yw>=i+50&&(o=!0),this._domNode.classList.toggle("collapsed-find-widget",o),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",r),!a&&!o&&(this._domNode.style.maxWidth=`${i-28-n-15}px`),this._resized){this._findInput.inputBox.layout();const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=ec(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(!!this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const i=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!M.equalsRange(t,i)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(FZ|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return BZ(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return VZ(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(FZ|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{mo&&tu&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(b("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(PZ,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return BZ(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return VZ(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new N9(null,this._contextViewProvider,{width:m7e,label:i7e,placeholder:n7e,appendCaseSensitiveLabel:this._keybindingLabelFor(_n.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(_n.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(_n.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(c){return{content:c.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>RZ(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),Wo&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new Jv({label:s7e+this._keybindingLabelFor(_n.PreviousMatchFindAction),icon:e7e,onTrigger:()=>{this._codeEditor.getAction(_n.PreviousMatchFindAction).run().then(void 0,Yt)}})),this._nextBtn=this._register(new Jv({label:o7e+this._keybindingLabelFor(_n.NextMatchFindAction),icon:t7e,onTrigger:()=>{this._codeEditor.getAction(_n.NextMatchFindAction).run().then(void 0,Yt)}}));const i=document.createElement("div");i.className="find-part",i.appendChild(this._findInput.domNode);const n=document.createElement("div");n.className="find-actions",i.appendChild(n),n.appendChild(this._matchesCount),n.appendChild(this._prevBtn.domNode),n.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new DL({icon:Q3e,title:r7e+this._keybindingLabelFor(_n.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){const l=this._codeEditor.getSelections();l.map(c=>(c.endColumn===1&&c.endLineNumber>c.startLineNumber&&(c=c.setEndPosition(c.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(c.endLineNumber-1))),c.isEmpty()?null:c)).filter(c=>!!c),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),n.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new Jv({label:a7e+this._keybindingLabelFor(_n.CloseFindWidgetCommand),icon:Rte,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),n.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new R9(null,void 0,{label:l7e,placeholder:c7e,appendPreserveCaseLabel:this._keybindingLabelFor(_n.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>RZ(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new Jv({label:u7e+this._keybindingLabelFor(_n.ReplaceOneAction),icon:X3e,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new Jv({label:d7e+this._keybindingLabelFor(_n.ReplaceAllAction),icon:J3e,onTrigger:()=>{this._controller.replaceAll()}}));const o=document.createElement("div");o.className="replace-part",o.appendChild(this._replaceInput.domNode);const r=document.createElement("div");r.className="replace-actions",o.appendChild(r),r.appendChild(this._replaceBtn.domNode),r.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new Jv({label:h7e,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=ec(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${Bu}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(i),this._domNode.appendChild(o),this._resizeSash=new Ro(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=Bu;this._register(this._resizeSash.onDidStart(()=>{a=ec(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;const c=a+l.startX-l.currentX;if(c<Bu)return;const d=parseFloat(NN(this._domNode).maxWidth)||0;c>d||(this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=ec(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=ec(this._domNode);if(l<Bu)return;let c=Bu;if(!this._resized||l===Bu){const d=this._codeEditor.getLayoutInfo();c=d.width-28-d.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=ec(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}KR.ID="editor.contrib.findWidget";class Jv extends gc{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+Pi.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,i=>{this._opts.onTrigger(),i.preventDefault()}),this.onkeydown(this._domNode,i=>{var n,o;if(i.equals(10)||i.equals(3)){this._opts.onTrigger(),i.preventDefault();return}(o=(n=this._opts).onKeyDown)===null||o===void 0||o.call(n,i)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...Pi.asClassNameArray(AZ)),this._domNode.classList.add(...Pi.asClassNameArray(MZ))):(this._domNode.classList.remove(...Pi.asClassNameArray(MZ)),this._domNode.classList.add(...Pi.asClassNameArray(AZ)))}}Cn((s,e)=>{const t=(_,C)=>{C&&e.addRule(`.monaco-editor ${_} { background-color: ${C}; }`)};t(".findMatch",s.getColor(Oh)),t(".currentFindMatch",s.getColor(fxe)),t(".findScope",s.getColor(gxe));const i=s.getColor(hs);t(".find-widget",i);const n=s.getColor(Qc);n&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${n}; }`);const o=s.getColor(pm);o&&e.addRule(`.monaco-editor .findMatch { border: 1px ${Vo(s.type)?"dotted":"solid"} ${o}; box-sizing: border-box; }`);const r=s.getColor(pxe);r&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${r}; padding: 1px; box-sizing: border-box; }`);const a=s.getColor(mxe);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${Vo(s.type)?"dashed":"solid"} ${a}; }`);const l=s.getColor(si);l&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${l}; }`);const c=s.getColor(Xc);c&&e.addRule(`.monaco-editor .find-widget { color: ${c}; }`);const d=s.getColor(GLe);d&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${d}; }`);const f=s.getColor(ixe);if(f)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${f}; }`);else{const _=s.getColor(Ah);_&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${_}; }`)}const g=s.getColor(P3);g&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${g} !important;
		}
	`);const m=s.getColor(wl);m&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${m}; }`)});var Zse=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ju=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},a_=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const v7e=524288;function $9(s,e="single",t=!1){if(!s.hasModel())return null;const i=s.getSelection();if(e==="single"&&i.startLineNumber===i.endLineNumber||e==="multiple"){if(i.isEmpty()){const n=s.getConfiguredWordAtPosition(i.getStartPosition());if(n&&t===!1)return n.word}else if(s.getModel().getValueLengthInRange(i)<v7e)return s.getModel().getValueInRange(i)}return null}let wa=class Qse extends ge{constructor(e,t,i,n){super(),this._editor=e,this._findWidgetVisible=op.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=n,this._updateHistoryDelayer=new _d(500),this._state=this._register(new Y3e),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(o=>this._onStateChanged(o))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const o=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),o&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(37).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(Qse.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!$R.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){const e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=ja(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return a_(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;const i=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){const n=$9(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);n&&(this._state.isRegex?i.searchString=ja(n):i.searchString=n)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const n=$9(this._editor,e.seedSearchStringFromSelection);n&&(i.searchString=n)}if(!i.searchString&&e.seedSearchStringFromGlobalClipboard){const n=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;n&&(i.searchString=n)}if(e.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope){const n=this._editor.getSelections();n.some(o=>!o.isEmpty())&&(i.searchScope=n)}i.loop=e.loop,this._state.change(i,!1),this._model||(this._model=new Dy(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return a_(this,void 0,void 0,function*(){return this._editor.getOption(37).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(37).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};wa.ID="editor.contrib.findController";wa=Zse([ju(1,jt),ju(2,mc),ju(3,of)],wa);let j9=class extends wa{constructor(e,t,i,n,o,r,a,l){super(e,i,a,l),this._contextViewService=t,this._keybindingService=n,this._themeService=o,this._notificationService=r,this._widget=null,this._findOptionsWidget=null}_start(e,t){const i=Object.create(null,{_start:{get:()=>super._start}});return a_(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const n=this._editor.getSelection();let o=!1;switch(this._editor.getOption(37).autoFindInSelection){case"always":o=!0;break;case"never":o=!1;break;case"multiline":{o=!!n&&n.startLineNumber!==n.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||o,yield i._start.call(this,e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new KR(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new jR(this._editor,this._state,this._keybindingService,this._themeService))}};j9=Zse([ju(1,E_),ju(2,jt),ju(3,xs),ju(4,cn),ju(5,gs),ju(6,mc),ju(7,of)],j9);const b7e=oee(new see({id:_n.StartFindAction,label:b("startFindAction","Find"),alias:"Find",precondition:Je.or($.focus,Je.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:G.MenubarEditMenu,group:"3_find",title:b({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));b7e.addImplementation(0,(s,e,t)=>{const i=wa.get(e);return i?i.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(37).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(37).loop}):!1});const C7e={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:b("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:b("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:b("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:b("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class w7e extends ot{constructor(){super({id:_n.StartFindWithArgs,label:b("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:C7e})}run(e,t,i){return a_(this,void 0,void 0,function*(){const n=wa.get(t);if(n){const o=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:i.replaceString!==void 0,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{};yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(i==null?void 0:i.findInSelection)||!1,loop:t.getOption(37).loop},o),n.setGlobalBufferTerm(n.getState().searchString)}})}}class y7e extends ot{constructor(){super({id:_n.StartFindWithSelection,label:b("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return a_(this,void 0,void 0,function*(){const i=wa.get(t);i&&(yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),i.setGlobalBufferTerm(i.getState().searchString))})}}class Xse extends ot{run(e,t){return a_(this,void 0,void 0,function*(){const i=wa.get(t);i&&!this._run(i)&&(yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),this._run(i))})}}class S7e extends Xse{constructor(){super({id:_n.NextMatchFindAction,label:b("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:$.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:Je.and($.focus,$R),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class L7e extends Xse{constructor(){super({id:_n.PreviousMatchFindAction,label:b("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:$.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:Je.and($.focus,$R),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class Jse extends ot{run(e,t){return a_(this,void 0,void 0,function*(){const i=wa.get(t);if(!i)return;const n=t.getOption(37).seedSearchStringFromSelection==="selection";let o=null;t.getOption(37).seedSearchStringFromSelection!=="never"&&(o=$9(t,"single",n)),o&&i.setSearchString(o),this._run(i)||(yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(37).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:n,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),this._run(i))})}}class x7e extends Jse{constructor(){super({id:_n.NextSelectionMatchFindAction,label:b("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:$.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class D7e extends Jse{constructor(){super({id:_n.PreviousSelectionMatchFindAction,label:b("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:$.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const k7e=oee(new see({id:_n.StartFindReplaceAction,label:b("startReplace","Replace"),alias:"Replace",precondition:Je.or($.focus,Je.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:G.MenubarEditMenu,group:"3_find",title:b({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));k7e.addImplementation(0,(s,e,t)=>{if(!e.hasModel()||e.getOption(83))return!1;const i=wa.get(e);if(!i)return!1;const n=e.getSelection(),o=i.isFindInputFocused(),r=!n.isEmpty()&&n.startLineNumber===n.endLineNumber&&e.getOption(37).seedSearchStringFromSelection!=="never"&&!o,a=o||r?2:1;return i.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(37).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(37).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(37).loop})});Ei(wa.ID,j9);We(w7e);We(y7e);We(S7e);We(L7e);We(x7e);We(D7e);const vu=Fs.bindToContribution(wa.get);Be(new vu({id:_n.CloseFindWidgetCommand,precondition:op,handler:s=>s.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:Je.and($.focus,Je.not("isComposing")),primary:9,secondary:[1033]}}));Be(new vu({id:_n.ToggleCaseSensitiveCommand,precondition:void 0,handler:s=>s.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:$.focus,primary:fE.primary,mac:fE.mac,win:fE.win,linux:fE.linux}}));Be(new vu({id:_n.ToggleWholeWordCommand,precondition:void 0,handler:s=>s.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:$.focus,primary:gE.primary,mac:gE.mac,win:gE.win,linux:gE.linux}}));Be(new vu({id:_n.ToggleRegexCommand,precondition:void 0,handler:s=>s.toggleRegex(),kbOpts:{weight:100+5,kbExpr:$.focus,primary:pE.primary,mac:pE.mac,win:pE.win,linux:pE.linux}}));Be(new vu({id:_n.ToggleSearchScopeCommand,precondition:void 0,handler:s=>s.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:$.focus,primary:mE.primary,mac:mE.mac,win:mE.win,linux:mE.linux}}));Be(new vu({id:_n.TogglePreserveCaseCommand,precondition:void 0,handler:s=>s.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:$.focus,primary:_E.primary,mac:_E.mac,win:_E.win,linux:_E.linux}}));Be(new vu({id:_n.ReplaceOneAction,precondition:op,handler:s=>s.replace(),kbOpts:{weight:100+5,kbExpr:$.focus,primary:3094}}));Be(new vu({id:_n.ReplaceOneAction,precondition:op,handler:s=>s.replace(),kbOpts:{weight:100+5,kbExpr:Je.and($.focus,WV),primary:3}}));Be(new vu({id:_n.ReplaceAllAction,precondition:op,handler:s=>s.replaceAll(),kbOpts:{weight:100+5,kbExpr:$.focus,primary:2563}}));Be(new vu({id:_n.ReplaceAllAction,precondition:op,handler:s=>s.replaceAll(),kbOpts:{weight:100+5,kbExpr:Je.and($.focus,WV),primary:void 0,mac:{primary:2051}}}));Be(new vu({id:_n.SelectAllMatchesAction,precondition:op,handler:s=>s.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:$.focus,primary:515}}));const WZ=65535,zc=16777215,HZ=4278190080;class MF{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,i=e%32;return(this._states[t]&1<<i)!==0}set(e,t){const i=e/32|0,n=e%32,o=this._states[i];t?this._states[i]=o|1<<n:this._states[i]=o&~(1<<n)}}class Fa{constructor(e,t,i){if(this.sourceAbbr={[0]:" ",[1]:"u",[2]:"r"},e.length!==t.length||e.length>WZ)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new MF(e.length),this._userDefinedStates=new MF(e.length),this._recoveredStates=new MF(e.length),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(i,n)=>{const o=e[e.length-1];return this.getStartLineNumber(o)<=i&&this.getEndLineNumber(o)>=n};for(let i=0,n=this._startIndexes.length;i<n;i++){const o=this._startIndexes[i],r=this._endIndexes[i];if(o>zc||r>zc)throw new Error("startLineNumber or endLineNumber must not exceed "+zc);for(;e.length>0&&!t(o,r);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=o+((a&255)<<24),this._endIndexes[i]=r+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&zc}getEndLineNumber(e){return this._endIndexes[e]&zc}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let n=0;n<this._types.length;n++)this._types[n]===e&&(this.setCollapsed(n,t),i=!0);return i}toRegion(e){return new E7e(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&HZ)>>>24)+((this._endIndexes[e]&HZ)>>>16);return t===WZ?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(i===0)return-1;for(;t<i;){const n=Math.floor((t+i)/2);e<this.getStartLineNumber(n)?i=n:t=n+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.sourceAbbr[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&zc,endLineNumber:this._endIndexes[e]&zc,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,i=new Uint32Array(t),n=new Uint32Array(t);let o=[],r=!1;for(let l=0;l<t;l++){const c=e[l];i[l]=c.startLineNumber,n[l]=c.endLineNumber,o.push(c.type),c.type&&(r=!0)}r||(o=void 0);const a=new Fa(i,n,o);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,i){i=i!=null?i:Number.MAX_VALUE;const n=(C,S)=>Array.isArray(C)?x=>x<S?C[x]:void 0:x=>x<S?C.toFoldRange(x):void 0,o=n(e,e.length),r=n(t,t.length);let a=0,l=0,c=o(0),d=r(0);const f=[];let g,m=0;const _=[];for(;c||d;){let C;if(d&&(!c||c.startLineNumber>=d.startLineNumber))c&&c.startLineNumber===d.startLineNumber?(d.source===1?C=d:(C=c,C.isCollapsed=d.isCollapsed&&c.endLineNumber===d.endLineNumber,C.source=0),c=o(++a)):(C=d,d.isCollapsed&&d.source===0&&(C.source=2)),d=r(++l);else{let S=l,x=d;for(;;){if(!x||x.startLineNumber>c.endLineNumber){C=c;break}if(x.source===1&&x.endLineNumber>c.endLineNumber)break;x=r(++S)}c=o(++a)}if(C){for(;g&&g.endLineNumber<C.startLineNumber;)g=f.pop();C.endLineNumber>C.startLineNumber&&C.startLineNumber>m&&C.endLineNumber<=i&&(!g||g.endLineNumber>=C.endLineNumber)&&(_.push(C),m=C.startLineNumber,g&&f.push(g),g=C)}}return _}}class E7e{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class T7e{constructor(e,t){this._updateEventEmitter=new J,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new Fa(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}get regions(){return this._regions}get textModel(){return this._textModel}toggleCollapseState(e){if(!e.length)return;e=e.sort((i,n)=>i.regionIndex-n.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let n=0,o=-1,r=-1;const a=l=>{for(;n<l;){const c=this._regions.getEndLineNumber(n),d=this._regions.isCollapsed(n);if(c<=o){const f=this.regions.getSource(n)!==0;i.changeDecorationOptions(this._editorDecorationIds[n],this._decorationProvider.getDecorationOption(d,c<=r,f))}d&&c>r&&(r=c),n++}};for(const l of e){const c=l.regionIndex,d=this._editorDecorationIds[c];if(d&&!t[d]){t[d]=!0,a(c);const f=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,f),o=Math.max(o,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,i=n=>{for(const o of e)if(!(o.startLineNumber>n.endLineNumber||n.startLineNumber>o.endLineNumber))return!0;return!1};for(let n=0;n<this._regions.length;n++){const o=this._regions.toFoldRange(n);(o.source===0||!i(o))&&t.push(o)}this.updatePost(Fa.fromFoldRanges(t))}update(e,t=[]){const i=this._currentFoldedOrManualRanges(t),n=Fa.sanitizeAndMerge(e,i,this._textModel.getLineCount());this.updatePost(Fa.fromFoldRanges(n))}updatePost(e){const t=[];let i=-1;for(let n=0,o=e.length;n<o;n++){const r=e.getStartLineNumber(n),a=e.getEndLineNumber(n),l=e.isCollapsed(n),c=e.getSource(n)!==0,d={startLineNumber:r,startColumn:this._textModel.getLineMaxColumn(r),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(l,a<=i,c)}),l&&a>i&&(i=a)}this._decorationProvider.changeDecorations(n=>this._editorDecorationIds=n.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e=[]){const t=(n,o)=>{for(const r of e)if(n<r&&r<=o)return!0;return!1},i=[];for(let n=0,o=this._regions.length;n<o;n++){let r=this.regions.isCollapsed(n);const a=this.regions.getSource(n);if(r||a!==0){const l=this._regions.toFoldRange(n),c=this._textModel.getDecorationRange(this._editorDecorationIds[n]);c&&(r&&(t(c.startLineNumber,c.endLineNumber)||c.endLineNumber-c.startLineNumber!==l.endLineNumber-l.startLineNumber)&&(r=!1),i.push({startLineNumber:c.startLineNumber,endLineNumber:c.endLineNumber,type:l.type,isCollapsed:r,source:a}))}}return i}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[];for(let i=0,n=e.length;i<n;i++){const o=e[i],r=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);t.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,isCollapsed:o.isCollapsed,source:o.source,checksum:r})}return t.length>0?t:void 0}applyMemento(e){var t,i;if(!Array.isArray(e))return;const n=[],o=this._textModel.getLineCount();for(const a of e){if(a.startLineNumber>=a.endLineNumber||a.startLineNumber<1||a.endLineNumber>o)continue;const l=this._getLinesChecksum(a.startLineNumber+1,a.endLineNumber);(!a.checksum||l===a.checksum)&&n.push({startLineNumber:a.startLineNumber,endLineNumber:a.endLineNumber,type:void 0,isCollapsed:(t=a.isCollapsed)!==null&&t!==void 0?t:!0,source:(i=a.source)!==null&&i!==void 0?i:0})}const r=Fa.sanitizeAndMerge(this._regions,n,o);this.updatePost(Fa.fromFoldRanges(r))}_getLinesChecksum(e,t){return _B(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const i=[];if(this._regions){let n=this._regions.findRange(e),o=1;for(;n>=0;){const r=this._regions.toRegion(n);(!t||t(r,o))&&i.push(r),o++,n=r.parentIndex}}return i}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const i=[],n=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const r=[];for(let a=n,l=this._regions.length;a<l;a++){const c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<o){for(;r.length>0&&!c.containedBy(r[r.length-1]);)r.pop();r.push(c),t(c,r.length)&&i.push(c)}else break}}else for(let r=n,a=this._regions.length;r<a;r++){const l=this._regions.toRegion(r);if(this._regions.getStartLineNumber(r)<o)(!t||t(l))&&i.push(l);else break}return i}}function I7e(s,e,t){const i=[];for(const n of t){const o=s.getRegionAtLine(n);if(o){const r=!o.isCollapsed;if(i.push(o),e>1){const a=s.getRegionsInside(o,(l,c)=>l.isCollapsed!==r&&c<e);i.push(...a)}}}s.toggleCollapseState(i)}function _C(s,e,t=Number.MAX_VALUE,i){const n=[];if(i&&i.length>0)for(const o of i){const r=s.getRegionAtLine(o);if(r&&(r.isCollapsed!==e&&n.push(r),t>1)){const a=s.getRegionsInside(r,(l,c)=>l.isCollapsed!==e&&c<t);n.push(...a)}}else{const o=s.getRegionsInside(null,(r,a)=>r.isCollapsed!==e&&a<t);n.push(...o)}s.toggleCollapseState(n)}function eoe(s,e,t,i){const n=[];for(const o of i){const r=s.getAllRegionsAtLine(o,(a,l)=>a.isCollapsed!==e&&l<=t);n.push(...r)}s.toggleCollapseState(n)}function N7e(s,e,t){const i=[];for(const n of t){const o=s.getAllRegionsAtLine(n,r=>r.isCollapsed!==e);o.length>0&&i.push(o[0])}s.toggleCollapseState(i)}function R7e(s,e,t,i){const n=(r,a)=>a===e&&r.isCollapsed!==t&&!i.some(l=>r.containsLine(l)),o=s.getRegionsInside(null,n);s.toggleCollapseState(o)}function toe(s,e,t){const i=[];for(const r of t){const a=s.getAllRegionsAtLine(r,void 0);a.length>0&&i.push(a[0])}const n=r=>i.every(a=>!a.containedBy(r)&&!r.containedBy(a))&&r.isCollapsed!==e,o=s.getRegionsInside(null,n);s.toggleCollapseState(o)}function HV(s,e,t){const i=s.textModel,n=s.regions,o=[];for(let r=n.length-1;r>=0;r--)if(t!==n.isCollapsed(r)){const a=n.getStartLineNumber(r);e.test(i.getLineContent(a))&&o.push(n.toRegion(r))}s.toggleCollapseState(o)}function zV(s,e,t){const i=s.regions,n=[];for(let o=i.length-1;o>=0;o--)t!==i.isCollapsed(o)&&e===i.getType(o)&&n.push(i.toRegion(o));s.toggleCollapseState(n)}function A7e(s,e){let t=null;const i=e.getRegionAtLine(s);if(i!==null&&(t=i.startLineNumber,s===t)){const n=i.parentIndex;n!==-1?t=e.regions.getStartLineNumber(n):t=null}return t}function M7e(s,e){let t=e.getRegionAtLine(s);if(t!==null&&t.startLineNumber===s){if(s!==t.startLineNumber)return t.startLineNumber;{const i=t.parentIndex;let n=0;for(i!==-1&&(n=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=n)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<s)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function O7e(s,e){let t=e.getRegionAtLine(s);if(t!==null&&t.startLineNumber===s){const i=t.parentIndex;let n=0;if(i!==-1)n=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;n=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=n)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>s)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class P7e{constructor(e){this._updateEventEmitter=new J,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||Gm(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let i=0,n=0,o=Number.MAX_VALUE,r=-1;const a=this._foldingModel.regions;for(;i<a.length;i++){if(!a.isCollapsed(i))continue;const l=a.getStartLineNumber(i)+1,c=a.getEndLineNumber(i);o<=l&&c<=r||(!e&&n<this._hiddenRanges.length&&this._hiddenRanges[n].startLineNumber===l&&this._hiddenRanges[n].endLineNumber===c?(t.push(this._hiddenRanges[n]),n++):(e=!0,t.push(new M(l,1,c,1))),o=l,r=c)}(this._hasLineChanges||e||n<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return zZ(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const i=this._foldingModel.textModel;let n=null;const o=r=>((!n||!F7e(r,n))&&(n=zZ(this._hiddenRanges,r)),n?n.startLineNumber-1:null);for(let r=0,a=e.length;r<a;r++){let l=e[r];const c=o(l.startLineNumber);c&&(l=l.setStartPosition(c,i.getLineMaxColumn(c)),t=!0);const d=o(l.endLineNumber);d&&(l=l.setEndPosition(d,i.getLineMaxColumn(d)),t=!0),e[r]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function F7e(s,e){return s>=e.startLineNumber&&s<=e.endLineNumber}function zZ(s,e){const t=LX(s,i=>e<i.startLineNumber)-1;return t>=0&&s[t].endLineNumber>=e?s[t]:null}const B7e=5e3,V7e="indent";class W7e{constructor(e,t,i){this.editorModel=e,this.languageConfigurationService=t,this.maxFoldingRegions=i,this.id=V7e}dispose(){}compute(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,n=i&&!!i.offSide,o=i&&i.markers;return Promise.resolve(z7e(this.editorModel,n,o,this.maxFoldingRegions,t))}}class H7e{constructor(e,t){this._notifyTooManyRegions=t,this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>zc||t>zc)return;const n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){var t;if(this._length<=this._foldingRangesLimit){const i=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let o=this._length-1,r=0;o>=0;o--,r++)i[r]=this._startIndexes[o],n[r]=this._endIndexes[o];return new Fa(i,n)}else{(t=this._notifyTooManyRegions)===null||t===void 0||t.call(this,this._foldingRangesLimit);let i=0,n=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const c=this._indentOccurrences[l];if(c){if(c+i>this._foldingRangesLimit){n=l;break}i+=c}}const o=e.getOptions().tabSize,r=new Uint32Array(this._foldingRangesLimit),a=new Uint32Array(this._foldingRangesLimit);for(let l=this._length-1,c=0;l>=0;l--){const d=this._startIndexes[l],f=e.getLineContent(d),g=tR(f,o);(g<n||g===n&&i++<this._foldingRangesLimit)&&(r[c]=d,a[c]=this._endIndexes[l],c++)}return new Fa(r,a)}}}function z7e(s,e,t,i,n){const o=s.getOptions().tabSize;i=i!=null?i:B7e;const r=new H7e(i,n);let a;t&&(a=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const l=[],c=s.getLineCount()+1;l.push({indent:-1,endAbove:c,line:c});for(let d=s.getLineCount();d>0;d--){const f=s.getLineContent(d),g=tR(f,o);let m=l[l.length-1];if(g===-1){e&&(m.endAbove=d);continue}let _;if(a&&(_=f.match(a)))if(_[1]){let C=l.length-1;for(;C>0&&l[C].indent!==-2;)C--;if(C>0){l.length=C+1,m=l[C],r.insertFirst(d,m.line,g),m.line=d,m.indent=g,m.endAbove=d;continue}}else{l.push({indent:-2,endAbove:d,line:d});continue}if(m.indent>g){do l.pop(),m=l[l.length-1];while(m.indent>g);const C=m.endAbove-1;C-d>=1&&r.insertFirst(d,C,g)}m.indent===g?m.endAbove=d:l.push({indent:g,endAbove:d,line:d})}return r.toIndentRanges(s)}const VL=Ls("folding-expanded",w.chevronDown,b("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),qR=Ls("folding-collapsed",w.chevronRight,b("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),ioe=Ls("folding-manual-collapsed",qR,b("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),UV=Ls("folding-manual-expanded",VL,b("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin."));class co{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,i){return t||this.showFoldingControls==="never"?co.HIDDEN_RANGE_DECORATION:e?i?this.showFoldingHighlights?co.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:co.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?co.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:co.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?i?co.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:co.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i?co.MANUALLY_EXPANDED_VISUAL_DECORATION:co.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}}co.COLLAPSED_VISUAL_DECORATION=Gt.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:Pi.asClassName(qR)});co.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Gt.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:Pi.asClassName(qR)});co.MANUALLY_COLLAPSED_VISUAL_DECORATION=Gt.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Pi.asClassName(VL)});co.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Gt.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:Pi.asClassName(ioe)});co.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Gt.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:Pi.asClassName(VL)});co.EXPANDED_VISUAL_DECORATION=Gt.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Pi.asClassName(VL)});co.MANUALLY_EXPANDED_VISUAL_DECORATION=Gt.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Pi.asClassName(UV)});co.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Gt.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:Pi.asClassName(UV)});co.HIDDEN_RANGE_DECORATION=Gt.register({description:"folding-hidden-range-decoration",stickiness:1});const U7e={},$7e="syntax";class j7e{constructor(e,t,i,n){this.editorModel=e,this.providers=t,this.limit=n,this.id=$7e;for(const o of t)typeof o.onDidChange=="function"&&(this.disposables||(this.disposables=new Ae),this.disposables.add(o.onDidChange(i)))}compute(e,t){return K7e(this.providers,this.editorModel,e).then(i=>i?G7e(i,this.limit,t):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}function K7e(s,e,t){let i=null;const n=s.map((o,r)=>Promise.resolve(o.provideFoldingRanges(e,U7e,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(i)||(i=[]);const l=e.getLineCount();for(const c of a)c.start>0&&c.end>c.start&&c.end<=l&&i.push({start:c.start,end:c.end,rank:r,kind:c.kind})}},Ys));return Promise.all(n).then(o=>i)}class q7e{constructor(e,t){this._notifyTooManyRegions=t,this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,n){if(e>zc||t>zc)return;const o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=n,this._types[o]=i,this._length++,n<30&&(this._nestingLevelCounts[n]=(this._nestingLevelCounts[n]||0)+1)}toIndentRanges(){var e;if(this._length<=this._foldingRangesLimit){const t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let n=0;n<this._length;n++)t[n]=this._startIndexes[n],i[n]=this._endIndexes[n];return new Fa(t,i,this._types)}else{(e=this._notifyTooManyRegions)===null||e===void 0||e.call(this,this._foldingRangesLimit);let t=0,i=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>this._foldingRangesLimit){i=a;break}t+=l}}const n=new Uint32Array(this._foldingRangesLimit),o=new Uint32Array(this._foldingRangesLimit),r=[];for(let a=0,l=0;a<this._length;a++){const c=this._nestingLevels[a];(c<i||c===i&&t++<this._foldingRangesLimit)&&(n[l]=this._startIndexes[a],o[l]=this._endIndexes[a],r[l]=this._types[a],l++)}return new Fa(n,o,r)}}}function G7e(s,e,t){const i=s.sort((a,l)=>{let c=a.start-l.start;return c===0&&(c=a.rank-l.rank),c}),n=new q7e(e,t);let o;const r=[];for(const a of i)if(!o)o=a,n.add(a.start,a.end,a.kind&&a.kind.value,r.length);else if(a.start>o.start)if(a.end<=o.end)r.push(o),o=a,n.add(a.start,a.end,a.kind&&a.kind.value,r.length);else{if(a.start>o.end){do o=r.pop();while(o&&a.start>o.end);o&&r.push(o),o=a}n.add(a.start,a.end,a.kind&&a.kind.value,r.length)}return n.toIndentRanges()}var Y7e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Sw=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const zo=new st("foldingEnabled",!1);let U0=class noe extends ge{constructor(e,t,i,n,o,r){super(),this.contextKeyService=t,this.languageConfigurationService=i,this.languageFeaturesService=r,this._tooManyRegionsNotified=!1,this.localToDispose=this._register(new Ae),this.editor=e;const a=this.editor.getOptions();this._isEnabled=a.get(39),this._useFoldingProviders=a.get(40)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(44),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(42),this._maxFoldingRegions=a.get(43),this.updateDebounceInfo=o.for(r.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new co(e),this.foldingDecorationProvider.showFoldingControls=a.get(101),this.foldingDecorationProvider.showFoldingHighlights=a.get(41),this.foldingEnabled=zo.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._notifyTooManyRegions=l=>{this._tooManyRegionsNotified||(n.notify({severity:Pn.Warning,sticky:!0,message:b("maximum fold ranges",`The number of foldable regions is limited to a maximum of {0}. Increase configuration option ['Folding Maximum Regions'](command:workbench.action.openSettings?["editor.foldingMaximumRegions"]) to enable more.`,l)}),this._tooManyRegionsNotified=!0)},this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(39)&&(this._isEnabled=this.editor.getOptions().get(39),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(43)&&(this._maxFoldingRegions=this.editor.getOptions().get(43),this._tooManyRegionsNotified=!1,this.onModelChanged()),l.hasChanged(101)||l.hasChanged(41)){const c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(101),this.foldingDecorationProvider.showFoldingHighlights=c.get(41),this.triggerFoldingModelChanged()}l.hasChanged(40)&&(this._useFoldingProviders=this.editor.getOptions().get(40)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(44)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(44)),l.hasChanged(42)&&(this._foldingImportsByDefault=this.editor.getOptions().get(42))})),this.onModelChanged()}static get(e){return e.getContribution(noe.ID)}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&!(!e||e.lineCount!==t.getLineCount())&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new T7e(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new P7e(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new _d(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new Xi(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new W7e(e,this.languageConfigurationService,this._maxFoldingRegions),this._useFoldingProviders&&this.foldingModel){const t=this.languageFeaturesService.foldingRangeProvider.ordered(this.foldingModel.textModel);t.length>0&&(this.rangeProvider=new j7e(e,t,()=>this.triggerFoldingModelChanged(),this._maxFoldingRegions))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new qr(!0),i=this.getRangeProvider(e.textModel),n=this.foldingRegionPromise=qs(o=>i.compute(o,this._notifyTooManyRegions));return n.then(o=>{if(o&&n===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const d=o.setCollapsedAllOfType(au.Imports.value,!0);d&&(r=Wg.capture(this.editor),this._currentModelHasFoldedImports=d)}const a=this.editor.getSelections(),l=a?a.map(d=>d.startLineNumber):[];e.update(o,l),r==null||r.restore(this.editor);const c=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=c)}return e})}).then(void 0,e=>(Yt(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();!e||e.then(t=>{if(t){const i=this.editor.getSelections();if(i&&i.length>0){const n=[];for(const o of i){const r=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(r)&&n.push(...t.getAllRegionsAtLine(r,a=>a.isCollapsed&&r>a.startLineNumber))}n.length&&(t.toggleCollapseState(n),this.reveal(i[0].getPosition()))}}}).then(void 0,Yt)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:{const n=e.target.detail,o=e.target.element.offsetLeft;if(n.offsetX-o<5)return;i=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const n=this.editor.getModel();if(n&&t.startColumn===n.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const i=this.mouseDownInfo.lineNumber,n=this.mouseDownInfo.iconClicked,o=e.target.range;if(!o||o.startLineNumber!==i)return;if(n){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||o.startColumn!==a.getLineMaxColumn(i))return}const r=t.getRegionAtLine(i);if(r&&r.startLineNumber===i){const a=r.isCollapsed;if(n||a){const l=e.event.altKey;let c=[];if(l){const d=g=>!g.containedBy(r)&&!r.containedBy(g),f=t.getRegionsInside(null,d);for(const g of f)g.isCollapsed&&c.push(g);c.length===0&&(c=f)}else{const d=e.event.middleButton||e.event.shiftKey;if(d)for(const f of t.getRegionsInside(r))f.isCollapsed===a&&c.push(f);(a||!d||c.length===0)&&c.push(r)}t.toggleCollapseState(c),this.reveal({lineNumber:i,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};U0.ID="editor.contrib.folding";U0=Y7e([Sw(1,jt),Sw(2,os),Sw(3,gs),Sw(4,Pl),Sw(5,ct)],U0);class nr extends ot{runEditorCommand(e,t,i){const n=e.get(os),o=U0.get(t);if(!o)return;const r=o.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(a=>{if(a){this.invoke(o,a,t,i,n);const l=t.getSelection();l&&o.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(i=>i.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(i=>i+1):this.getSelectedLines(t)}run(e,t){}}function soe(s){if(!fa(s)){if(!$r(s))return!1;const e=s;if(!fa(e.levels)&&!Ig(e.levels)||!fa(e.direction)&&!Kr(e.direction)||!fa(e.selectionLines)&&(!IX(e.selectionLines)||!e.selectionLines.every(Ig)))return!1}return!0}class Z7e extends nr{constructor(){super({id:"editor.unfold",label:b("unfoldAction.label","Unfold"),alias:"Unfold",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:soe,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){const o=n&&n.levels||1,r=this.getLineNumbers(n,i);n&&n.direction==="up"?eoe(t,!1,o,r):_C(t,!1,o,r)}}class Q7e extends nr{constructor(){super({id:"editor.unfoldRecursively",label:b("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2137),weight:100}})}invoke(e,t,i,n){_C(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class X7e extends nr{constructor(){super({id:"editor.fold",label:b("foldAction.label","Fold"),alias:"Fold",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:soe,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){const o=this.getLineNumbers(n,i),r=n&&n.levels,a=n&&n.direction;typeof r!="number"&&typeof a!="string"?N7e(t,!0,o):a==="up"?eoe(t,!0,r||1,o):_C(t,!0,r||1,o)}}class J7e extends nr{constructor(){super({id:"editor.toggleFold",label:b("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2090),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);I7e(t,1,n)}}class e9e extends nr{constructor(){super({id:"editor.foldRecursively",label:b("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2135),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);_C(t,!0,Number.MAX_VALUE,n)}}class t9e extends nr{constructor(){super({id:"editor.foldAllBlockComments",label:b("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2133),weight:100}})}invoke(e,t,i,n,o){if(t.regions.hasTypes())zV(t,au.Comment.value,!0);else{const r=i.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+ja(a.blockCommentStartToken));HV(t,l,!0)}}}}class i9e extends nr{constructor(){super({id:"editor.foldAllMarkerRegions",label:b("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2077),weight:100}})}invoke(e,t,i,n,o){if(t.regions.hasTypes())zV(t,au.Region.value,!0);else{const r=i.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);HV(t,l,!0)}}}}class n9e extends nr{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:b("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2078),weight:100}})}invoke(e,t,i,n,o){if(t.regions.hasTypes())zV(t,au.Region.value,!1);else{const r=i.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);HV(t,l,!1)}}}}class s9e extends nr{constructor(){super({id:"editor.foldAllExcept",label:b("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2131),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);toe(t,!0,n)}}class o9e extends nr{constructor(){super({id:"editor.unfoldAllExcept",label:b("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2129),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);toe(t,!1,n)}}class r9e extends nr{constructor(){super({id:"editor.foldAll",label:b("foldAllAction.label","Fold All"),alias:"Fold All",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2069),weight:100}})}invoke(e,t,i){_C(t,!0)}}class a9e extends nr{constructor(){super({id:"editor.unfoldAll",label:b("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2088),weight:100}})}invoke(e,t,i){_C(t,!1)}}class l_ extends nr{getFoldingLevel(){return parseInt(this.id.substr(l_.ID_PREFIX.length))}invoke(e,t,i){R7e(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}}l_.ID_PREFIX="editor.foldLevel";l_.ID=s=>l_.ID_PREFIX+s;class l9e extends nr{constructor(){super({id:"editor.gotoParentFold",label:b("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);if(n.length>0){const o=A7e(n[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class c9e extends nr{constructor(){super({id:"editor.gotoPreviousFold",label:b("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);if(n.length>0){const o=M7e(n[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class u9e extends nr{constructor(){super({id:"editor.gotoNextFold",label:b("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);if(n.length>0){const o=O7e(n[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class d9e extends nr{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:b("createManualFoldRange.label","Create Manual Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2130),weight:100}})}invoke(e,t,i){var n;const o=[],r=i.getSelections();if(r){for(const a of r){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(o.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),i.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(o.length>0){o.sort((l,c)=>l.startLineNumber-c.startLineNumber);const a=Fa.sanitizeAndMerge(t.regions,o,(n=i.getModel())===null||n===void 0?void 0:n.getLineCount());t.updatePost(Fa.fromFoldRanges(a))}}}}class h9e extends nr{constructor(){super({id:"editor.removeManualFoldingRanges",label:b("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2132),weight:100}})}invoke(e,t,i){const n=i.getSelections();if(n){const o=[];for(const r of n){const{startLineNumber:a,endLineNumber:l}=r;o.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(o),e.triggerFoldingModelChanged()}}}Ei(U0.ID,U0);We(Z7e);We(Q7e);We(X7e);We(e9e);We(r9e);We(a9e);We(t9e);We(i9e);We(n9e);We(s9e);We(o9e);We(J7e);We(l9e);We(c9e);We(u9e);We(d9e);We(h9e);for(let s=1;s<=7;s++)ree(new l_({id:l_.ID(s),label:b("foldLevelAction.label","Fold Level {0}",s),alias:`Fold Level ${s}`,precondition:zo,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2048|21+s),weight:100}}));const f9e=j("editor.foldBackground",{light:pt(Mh,.3),dark:pt(Mh,.3),hcDark:null,hcLight:null},b("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),g9e=j("editorGutter.foldingControlForeground",{dark:Ck,light:Ck,hcDark:Ck,hcLight:Ck},b("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));Cn((s,e)=>{const t=s.getColor(f9e);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const i=s.getColor(g9e);i&&e.addRule(`
		.monaco-editor .cldr${Pi.asCSSSelector(VL)},
		.monaco-editor .cldr${Pi.asCSSSelector(qR)},
		.monaco-editor .cldr${Pi.asCSSSelector(UV)},
		.monaco-editor .cldr${Pi.asCSSSelector(ioe)} {
			color: ${i} !important;
		}
		`)});class p9e extends ot{constructor(){super({id:"editor.action.fontZoomIn",label:b("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){Yh.setZoomLevel(Yh.getZoomLevel()+1)}}class m9e extends ot{constructor(){super({id:"editor.action.fontZoomOut",label:b("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){Yh.setZoomLevel(Yh.getZoomLevel()-1)}}class _9e extends ot{constructor(){super({id:"editor.action.fontZoomReset",label:b("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){Yh.setZoomLevel(0)}}We(p9e);We(m9e);We(_9e);var ooe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ZI=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},$V=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let VS=class{constructor(e,t,i){this._editor=e,this._languageFeaturesService=t,this._workerService=i,this._disposables=new Ae,this._sessionDisposables=new Ae,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(n=>{n.hasChanged(51)&&this._update()}))}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(51)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const i=new vb;for(const n of t.autoFormatTriggerCharacters)i.add(n.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(n=>{const o=n.charCodeAt(n.length-1);i.has(o)&&this._trigger(String.fromCharCode(o))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition(),n=new _o,o=this._editor.onDidChangeModelContent(r=>{if(r.isFlush){n.cancel(),o.dispose();return}for(let a=0,l=r.changes.length;a<l;a++)if(r.changes[a].range.endLineNumber<=i.lineNumber){n.cancel(),o.dispose();return}});tne(this._workerService,this._languageFeaturesService,t,i,e,t.getFormattingOptions(),n.token).then(r=>{n.token.isCancellationRequested||Po(r)&&(P0.execute(this._editor,r,!0),gV(r))}).finally(()=>{o.dispose()})}};VS.ID="editor.contrib.autoFormat";VS=ooe([ZI(1,ct),ZI(2,Ml)],VS);let WS=class{constructor(e,t,i){this.editor=e,this._languageFeaturesService=t,this._instantiationService=i,this._callOnDispose=new Ae,this._callOnModel=new Ae,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(50)&&(!this.editor.hasModel()||!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())||this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e))))}_trigger(e){!this.editor.hasModel()||this.editor.getSelections().length>1||this._instantiationService.invokeFunction(ene,this.editor,e,2,T_.None,ri.None).catch(Yt)}};WS.ID="editor.contrib.formatOnPaste";WS=ooe([ZI(1,ct),ZI(2,Zt)],WS);class v9e extends ot{constructor(){super({id:"editor.action.formatDocument",label:b("formatDocument.label","Format Document"),alias:"Format Document",precondition:Je.and($.notInCompositeEditor,$.writable,$.hasDocumentFormattingProvider),kbOpts:{kbExpr:$.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return $V(this,void 0,void 0,function*(){if(t.hasModel()){const i=e.get(Zt);yield e.get(ip).showWhile(i.invokeFunction(JPe,t,1,T_.None,ri.None),250)}})}}class b9e extends ot{constructor(){super({id:"editor.action.formatSelection",label:b("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:Je.and($.writable,$.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2084),weight:100},contextMenuOpts:{when:$.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return $V(this,void 0,void 0,function*(){if(!t.hasModel())return;const i=e.get(Zt),n=t.getModel(),o=t.getSelections().map(a=>a.isEmpty()?new M(a.startLineNumber,1,a.startLineNumber,n.getLineMaxColumn(a.startLineNumber)):a);yield e.get(ip).showWhile(i.invokeFunction(ene,t,o,1,T_.None,ri.None),250)})}}Ei(VS.ID,VS);Ei(WS.ID,WS);We(v9e);We(b9e);Li.registerCommand("editor.action.format",s=>$V(void 0,void 0,void 0,function*(){const e=s.get(Vi).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=s.get(fs);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));var C9e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},OF=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},w9e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class Pb{remove(){var e;(e=this.parent)===null||e===void 0||e.children.delete(this.id)}static findId(e,t){let i;typeof e=="string"?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,t.children.get(i)!==void 0&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let n=i;for(let o=0;t.children.get(n)!==void 0;o++)n=`${i}_${o}`;return n}static empty(e){return e.children.size===0}}class QI extends Pb{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class y9e extends Pb{constructor(e,t,i,n){super(),this.id=e,this.parent=t,this.label=i,this.order=n,this.children=new Map}}class Sh extends Pb{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t,i){const n=new _o(i),o=new Sh(t.uri),r=e.ordered(t),a=r.map((c,d)=>{var f;const g=Pb.findId(`provider_${d}`,o),m=new y9e(g,o,(f=c.displayName)!==null&&f!==void 0?f:"Unknown Outline Provider",d);return Promise.resolve(c.provideDocumentSymbols(t,n.token)).then(_=>{for(const C of _||[])Sh._makeOutlineElement(C,m);return m},_=>(Ys(_),m)).then(_=>{Pb.empty(_)?_.remove():o._groups.set(g,_)})}),l=e.onDidChange(()=>{const c=e.ordered(t);$a(c,r)||n.cancel()});return Promise.all(a).then(()=>n.token.isCancellationRequested&&!i.isCancellationRequested?Sh.create(e,t,i):o._compact()).finally(()=>{l.dispose()})}static _makeOutlineElement(e,t){const i=Pb.findId(e,t),n=new QI(i,t,e);if(e.children)for(const o of e.children)Sh._makeOutlineElement(o,n);t.children.set(n.id,n)}_compact(){let e=0;for(const[t,i]of this._groups)i.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=fi.first(this._groups.values());for(const[,i]of t.children)i.parent=this,this.children.set(i.id,i)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof QI?e.push(t.symbol):e.push(...fi.map(t.children.values(),i=>i.symbol));return e.sort((t,i)=>M.compareRangesUsingStarts(t.range,i.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Sh._flattenDocumentSymbols(t,e,""),t.sort((i,n)=>se.compare(M.getStartPosition(i.range),M.getStartPosition(n.range))||se.compare(M.getEndPosition(n.range),M.getEndPosition(i.range)))}static _flattenDocumentSymbols(e,t,i){for(const n of t)e.push({kind:n.kind,tags:n.tags,name:n.name,detail:n.detail,containerName:n.containerName||i,range:n.range,selectionRange:n.selectionRange,children:void 0}),n.children&&Sh._flattenDocumentSymbols(e,n.children,n.name)}}const GR=bi("IOutlineModelService");let K9=class{constructor(e,t,i){this._languageFeaturesService=e,this._disposables=new Ae,this._cache=new tp(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved(n=>{this._cache.delete(n.id)}))}dispose(){this._disposables.dispose()}getOrCreate(e,t){return w9e(this,void 0,void 0,function*(){const i=this._languageFeaturesService.documentSymbolProvider,n=i.ordered(e);let o=this._cache.get(e.id);if(!o||o.versionId!==e.getVersionId()||!$a(o.provider,n)){const a=new _o;o={versionId:e.getVersionId(),provider:n,promiseCnt:0,source:a,promise:Sh.create(i,e,a.token),model:void 0},this._cache.set(e.id,o);const l=Date.now();o.promise.then(c=>{o.model=c,this._debounceInformation.update(e,Date.now()-l)}).catch(c=>{this._cache.delete(e.id)})}if(o.model)return o.model;o.promiseCnt+=1;const r=t.onCancellationRequested(()=>{--o.promiseCnt===0&&(o.source.cancel(),this._cache.delete(e.id))});try{return yield o.promise}finally{r.dispose()}})}};K9=C9e([OF(0,ct),OF(1,Pl),OF(2,Hn)],K9);ki(GR,K9,!0);var S9e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};Li.registerCommand("_executeDocumentSymbolProvider",function(s,...e){return S9e(this,void 0,void 0,function*(){const[t]=e;Qi(yt.isUri(t));const i=s.get(GR),o=yield s.get(Yr).createModelReference(t);try{return(yield i.getOrCreate(o.object.textEditorModel,ri.None)).getTopLevelSymbols()}finally{o.dispose()}})});const XI="editor.action.inlineSuggest.commit";function L9e(s,e){return{object:s,dispose:()=>e==null?void 0:e.dispose()}}function x9e(s,e){const t=new D9e(s),i=e.map(n=>{const o=M.lift(n.range);return{startOffset:t.getOffset(o.getStartPosition()),endOffset:t.getOffset(o.getEndPosition()),text:n.text}});i.sort((n,o)=>o.startOffset-n.startOffset);for(const n of i)s=s.substring(0,n.startOffset)+n.text+s.substring(n.endOffset);return s}class D9e{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}const k9e=[];function E9e(){return k9e}class roe{constructor(e,t,i=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=i}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1);return x9e(i,this.parts.map(o=>({range:{startLineNumber:1,endLineNumber:1,startColumn:o.column,endColumn:o.column},text:o.lines.join(`
`)}))).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}}class q9{constructor(e,t,i){this.column=e,this.lines=t,this.preview=i}}class aoe{constructor(e,t,i,n,o=0){this.lineNumber=e,this.columnStart=t,this.length=i,this.newLines=n,this.additionalReservedLineCount=o,this.parts=[new q9(this.columnStart+this.length,this.newLines,!1)]}renderForScreenReader(e){return this.newLines.join(`
`)}}class loe extends ge{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new J,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(108)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}function JI(s,e){if(!e)return e;const t=s.getValueInRange(e.range),i=Fm(t,e.insertText),n=s.getOffsetAt(e.range.getStartPosition())+i,o=s.getPositionAt(n),r=t.substr(i),a=Fy(r,e.insertText),l=s.getPositionAt(Math.max(n,s.getOffsetAt(e.range.getEndPosition())-a));return{range:M.fromPositions(o,l),insertText:e.insertText.substr(i,e.insertText.length-i-a),snippetInfo:e.snippetInfo,filterText:e.filterText,additionalTextEdits:e.additionalTextEdits}}function T9e(s,e){return s===e?!0:!s||!e?!1:s.range.equalsRange(e.range)&&s.insertText===e.insertText&&s.command===e.command}function coe(s,e,t,i,n=0){if(s.range.startLineNumber!==s.range.endLineNumber)return;const o=e.getLineContent(s.range.startLineNumber),r=on(o).length;if(s.range.startColumn-1<=r){const m=on(s.insertText).length,_=o.substring(s.range.startColumn-1,r),C=M.fromPositions(s.range.getStartPosition().delta(0,_.length),s.range.getEndPosition()),S=s.insertText.startsWith(_)?s.insertText.substring(_.length):s.insertText.substring(m);s={range:C,insertText:S,command:s.command,snippetInfo:void 0,filterText:s.filterText,additionalTextEdits:s.additionalTextEdits}}const l=e.getValueInRange(s.range),c=I9e(l,s.insertText);if(!c)return;const d=s.range.startLineNumber,f=new Array;if(t==="prefix"){const m=c.filter(_=>_.originalLength===0);if(m.length>1||m.length===1&&m[0].originalStart!==l.length)return}const g=s.insertText.length-n;for(const m of c){const _=s.range.startColumn+m.originalStart+m.originalLength;if(t==="subwordSmart"&&i&&i.lineNumber===s.range.startLineNumber&&_<i.column||m.originalLength>0)return;if(m.modifiedLength===0)continue;const C=m.modifiedStart+m.modifiedLength,S=Math.max(m.modifiedStart,Math.min(C,g)),x=s.insertText.substring(m.modifiedStart,S),L=s.insertText.substring(S,Math.max(m.modifiedStart,C));if(x.length>0){const k=md(x);f.push(new q9(_,k,!1))}if(L.length>0){const k=md(L);f.push(new q9(_,k,!0))}}return new roe(d,f,0)}let Vu;function I9e(s,e){if((Vu==null?void 0:Vu.originalValue)===s&&(Vu==null?void 0:Vu.newValue)===e)return Vu==null?void 0:Vu.changes;{let t=$Z(s,e,!0);if(t){const i=UZ(t);if(i>0){const n=$Z(s,e,!1);n&&UZ(n)<i&&(t=n)}}return Vu={originalValue:s,newValue:e,changes:t},t}}function UZ(s){let e=0;for(const t of s)e+=Math.max(t.originalLength-t.modifiedLength,0);return e}function $Z(s,e,t){if(s.length>5e3||e.length>5e3)return;function i(c){let d=0;for(let f=0,g=c.length;f<g;f++){const m=c.charCodeAt(f);m>d&&(d=m)}return d}const n=Math.max(i(s),i(e));function o(c){if(c<0)throw new Error("unexpected");return n+c+1}function r(c){let d=0,f=0;const g=new Int32Array(c.length);for(let m=0,_=c.length;m<_;m++)if(t&&c[m]==="("){const C=f*100+d;g[m]=o(2*C),d++}else if(t&&c[m]===")"){d=Math.max(d-1,0);const C=f*100+d;g[m]=o(2*C+1),d===0&&f++}else g[m]=c.charCodeAt(m);return g}const a=r(s),l=r(e);return new Qu({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}function N9e(s,e){const t=new Gee,i=new Zee(t,c=>e.getLanguageConfiguration(c)),n=new Yee(new R9e([s]),i),o=j3(n,[],void 0,!0);let r="";const a=s.getLineContent();function l(c,d){if(c.kind===2)if(l(c.openingBracket,d),d=Zn(d,c.openingBracket.length),c.child&&(l(c.child,d),d=Zn(d,c.child.length)),c.closingBracket)l(c.closingBracket,d),d=Zn(d,c.closingBracket.length);else{const g=i.getSingleLanguageBracketTokens(c.openingBracket.languageId).findClosingTokenText(c.openingBracket.bracketIds);r+=g}else if(c.kind!==3){if(c.kind===0||c.kind===1)r+=a.substring(d,Zn(d,c.length));else if(c.kind===4)for(const f of c.children)l(f,d),d=Zn(d,f.length)}}return l(o,rc),r}class R9e{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}var A9e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Lw=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},Lh=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let G9=class extends ge{constructor(e,t,i,n,o,r,a){super(),this.editor=e,this.cache=t,this.commandService=i,this.languageConfigurationService=n,this.languageFeaturesService=o,this.debounceService=r,this.onDidChangeEmitter=new J,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new tr),this.active=!1,this.disposed=!1,this.debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._register(i.onDidExecuteCommand(l=>{new Set([Yb.Tab.id,Yb.DeleteLeft.id,Yb.DeleteRight.id,XI,"acceptSelectedSuggestion"]).has(l.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(l=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(l=>{(l.reason===3||this.session&&!this.session.isValid)&&this.hide()})),this._register(ni(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{a.getValue("editor.inlineSuggest.hideOnBlur")||this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){!this.editor.getOption(57).enabled||this.session&&this.session.isValid||this.trigger(pl.Automatic)}trigger(e){if(this.completionSession.value){e===pl.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new M9e(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e,this.languageConfigurationService,this.languageFeaturesService.inlineCompletionsProvider,this.debounceValue),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return Lh(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};G9=A9e([Lw(2,fs),Lw(3,os),Lw(4,ct),Lw(5,Pl),Lw(6,Ai)],G9);class M9e extends loe{constructor(e,t,i,n,o,r,a,l,c){super(e),this.triggerPosition=t,this.shouldUpdate=i,this.commandService=n,this.cache=o,this.initialTriggerKind=r,this.languageConfigurationService=a,this.registry=l,this.debounce=c,this.minReservedLineCount=0,this.updateOperation=this._register(new tr),this.updateSoon=this._register(new Xi(()=>{const f=this.initialTriggerKind;return this.initialTriggerKind=pl.Automatic,this.update(f)},50)),this.filteredCompletions=[],this.currentlySelectedCompletionId=void 0;let d;this._register(this.onDidChange(()=>{var f;const g=this.currentCompletion;if(g&&g.sourceInlineCompletion!==d){d=g.sourceInlineCompletion;const m=g.sourceProvider;(f=m.handleItemDidShow)===null||f===void 0||f.call(m,g.sourceInlineCompletions,d)}})),this._register(ni(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(f=>{var g;f.reason!==3&&((g=this.cache.value)===null||g===void 0||g.updateRanges(),this.cache.value&&(this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire()))})),this._register(this.editor.onDidChangeModelContent(f=>{var g;(g=this.cache.value)===null||g===void 0||g.updateRanges(),this.updateFilteredInlineCompletions(),this.scheduleAutomaticUpdate()})),this._register(this.registry.onDidChange(()=>{this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))})),this.scheduleAutomaticUpdate()}updateFilteredInlineCompletions(){if(!this.cache.value){this.filteredCompletions=[];return}const e=this.editor.getModel(),t=e.validatePosition(this.editor.getPosition());this.filteredCompletions=this.cache.value.completions.filter(i=>{const n=e.getValueInRange(i.synchronizedRange).toLowerCase(),o=i.inlineCompletion.filterText.toLowerCase(),r=e.getLineIndentColumn(i.synchronizedRange.startLineNumber),a=Math.max(0,t.column-i.synchronizedRange.startColumn);let l=o.substring(0,a),c=o.substring(a),d=n.substring(0,a),f=n.substring(a);return i.synchronizedRange.startColumn<=r&&(d=d.trimStart(),d.length===0&&(f=f.trimStart()),l=l.trimStart(),l.length===0&&(c=c.trimStart())),l.startsWith(d)&&vte(f,c)})}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.filteredCompletions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(!!this.cache.value)return this.filteredCompletions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){return Lh(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const e=this.filteredCompletions||[];if(e.length>0){const t=(this.fixAndGetIndexOfCurrentSelection()+1)%e.length;this.currentlySelectedCompletionId=e[t].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){return Lh(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const e=this.filteredCompletions||[];if(e.length>0){const t=(this.fixAndGetIndexOfCurrentSelection()+e.length-1)%e.length;this.currentlySelectedCompletionId=e[t].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return Lh(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===pl.Explicit?yield this.updateOperation.value.promise:yield this.update(pl.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==pl.Explicit&&(yield this.update(pl.Explicit))})}hasMultipleInlineCompletions(){var e;return Lh(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion;if(!e)return;const t=this.editor.getPosition();if(e.range.getEndPosition().isBefore(t))return;const i=this.editor.getOptions().get(57).mode,n=coe(e,this.editor.getModel(),i,t);return n?n.isEmpty()?void 0:n:new aoe(e.range.startLineNumber,e.range.startColumn,e.range.endColumn-e.range.startColumn,e.insertText.split(`
`),0)}get currentCompletion(){const e=this.currentCachedCompletion;if(!!e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))}update(e){return Lh(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),i=new Date,n=qs(r=>Lh(this,void 0,void 0,function*(){let a;try{a=yield doe(this.registry,t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},r,this.languageConfigurationService);const l=new Date;this.debounce.update(this.editor.getModel(),l.getTime()-i.getTime())}catch(l){Yt(l);return}r.isCancellationRequested||(this.cache.setValue(this.editor,a,e),this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire())})),o=new uoe(n,e);this.updateOperation.value=o,yield n,this.updateOperation.value===o&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const t=this.currentCompletion;t&&this.commit(t)}commit(e){var t;const i=this.cache.clearAndLeak();e.snippetInfo?(this.editor.executeEdits("inlineSuggestion.accept",[Nn.replaceMove(e.range,""),...e.additionalTextEdits]),this.editor.setPosition(e.snippetInfo.range.getStartPosition()),(t=Gs.get(this.editor))===null||t===void 0||t.insert(e.snippetInfo.snippet)):this.editor.executeEdits("inlineSuggestion.accept",[Nn.replaceMove(e.range,e.insertText),...e.additionalTextEdits]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{i==null||i.dispose()}).then(void 0,Ys):i==null||i.dispose(),this.onDidChangeEmitter.fire()}get commands(){var e;return[...new Set(((e=this.cache.value)===null||e===void 0?void 0:e.completions.map(i=>i.inlineCompletion.sourceInlineCompletions))||[])].flatMap(i=>i.commands||[])}}class uoe{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class O9e extends ge{constructor(e,t,i,n){super(),this.editor=t,this.onChange=i,this.triggerKind=n,this.isDisposing=!1;const o=t.changeDecorations(r=>r.deltaDecorations([],e.items.map(a=>({range:a.range,options:{description:"inline-completion-tracking-range"}}))));this._register(ni(()=>{this.isDisposing=!0,t.removeDecorations(o)})),this.completions=e.items.map((r,a)=>new P9e(r,o[a])),this._register(t.onDidChangeModelContent(()=>{this.updateRanges()})),this._register(e)}updateRanges(){if(this.isDisposing)return;let e=!1;const t=this.editor.getModel();for(const i of this.completions){const n=t.getDecorationRange(i.decorationId);if(!n){Yt(new Error("Decoration has no range"));continue}i.synchronizedRange.equalsRange(n)||(e=!0,i.synchronizedRange=n)}e&&this.onChange()}}class P9e{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.insertText,abbreviation:this.inlineCompletion.filterText,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{insertText:this.inlineCompletion.insertText,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion,snippetInfo:this.inlineCompletion.snippetInfo,filterText:this.inlineCompletion.filterText,additionalTextEdits:this.inlineCompletion.additionalTextEdits}}}function doe(s,e,t,i,n=ri.None,o){return Lh(this,void 0,void 0,function*(){const r=F9e(e,t),a=s.all(t),l=yield Promise.all(a.map(d=>Lh(this,void 0,void 0,function*(){const f=yield Promise.resolve(d.provideInlineCompletions(t,e,i,n)).catch(Ys);return{completions:f,provider:d,dispose:()=>{f&&d.freeInlineCompletions(f)}}}))),c=new Map;for(const d of l){const f=d.completions;if(!!f)for(const g of f.items){let m=g.range?M.lift(g.range):r;if(m.startLineNumber!==m.endLineNumber)continue;let _,C;if(typeof g.insertText=="string"){if(_=g.insertText,o&&g.completeBracketPairs){_=B9e(_,m.getStartPosition(),t,o);const x=_.length-g.insertText.length;x!==0&&(m=new M(m.startLineNumber,m.startColumn,m.endLineNumber,m.endColumn+x))}C=void 0}else"snippet"in g.insertText?(_=new Kg().parse(g.insertText.snippet).toString(),C={snippet:g.insertText.snippet,range:m}):gN(g.insertText);const S={insertText:_,snippetInfo:C,range:m,command:g.command,sourceProvider:d.provider,sourceInlineCompletions:f,sourceInlineCompletion:g,filterText:g.filterText||_,additionalTextEdits:g.additionalTextEdits||E9e()};c.set(JSON.stringify({insertText:_,range:g.range}),S)}}return{items:[...c.values()],dispose:()=>{for(const d of l)d.dispose()}}})}function F9e(s,e){const t=e.getWordAtPosition(s),i=e.getLineMaxColumn(s.lineNumber);return t?new M(s.lineNumber,t.startColumn,s.lineNumber,i):M.fromPositions(s,s.with(void 0,i))}function B9e(s,e,t,i){const o=t.getLineContent(e.lineNumber).substring(0,e.column-1)+s,r=t.tokenization.tokenizeLineWithEdit(e,o.length-(e.column-1),s),a=r==null?void 0:r.sliceAndInflate(e.column-1,o.length,0);return a?N9e(a,i):s}var V9e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},jZ=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};class jV{constructor(e){this.name=e}select(e,t,i){if(i.length===0)return 0;const n=i[0].score[0];for(let o=0;o<i.length;o++){const{score:r,completion:a}=i[o];if(r[0]!==n)break;if(a.preselect)return o}return 0}}class hoe extends jV{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}}class W9e extends jV{constructor(){super("recentlyUsed"),this._cache=new tp(300,.66),this._seq=0}memorize(e,t,i){const n=`${e.getLanguageId()}/${i.textLabel}`;this._cache.set(n,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(i.length===0)return 0;const n=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(n))return super.select(e,t,i);const o=i[0].score[0];let r=-1,a=-1,l=-1;for(let c=0;c<i.length&&i[c].score[0]===o;c++){const d=`${e.getLanguageId()}/${i[c].textLabel}`,f=this._cache.peek(d);if(f&&f.touch>l&&f.type===i[c].completion.kind&&f.insertText===i[c].completion.insertText&&(l=f.touch,a=c),i[c].completion.preselect&&r===-1)return r=c}return a!==-1?a:r!==-1?r:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[i,n]of e)n.touch=t,n.type=typeof n.type=="number"?n.type:My.fromString(n.type),this._cache.set(i,n);this._seq=this._cache.size}}class H9e extends jV{constructor(){super("recentlyUsedByPrefix"),this._trie=Jb.forStrings(),this._seq=0}memorize(e,t,i){const{word:n}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${n}`;this._trie.set(o,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){const{word:n}=e.getWordUntilPosition(t);if(!n)return super.select(e,t,i);const o=`${e.getLanguageId()}/${n}`;let r=this._trie.get(o);if(r||(r=this._trie.findSubstr(o)),r)for(let a=0;a<i.length;a++){const{kind:l,insertText:c}=i[a].completion;if(l===r.type&&c===r.insertText)return a}return super.select(e,t,i)}toJSON(){const e=[];return this._trie.forEach((t,i)=>e.push([i,t])),e.sort((t,i)=>-(t[1].touch-i[1].touch)).forEach((t,i)=>t[1].touch=i),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,i]of e)i.type=typeof i.type=="number"?i.type:My.fromString(i.type),this._trie.set(t,i)}}}let HS=class eT{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new Ae,this._persistSoon=new Xi(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(i=>{i.reason===OI.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(e,t){var i;const n=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((i=this._strategy)===null||i===void 0?void 0:i.name)!==n){this._saveState();const o=eT._strategyCtors.get(n)||hoe;this._strategy=new o;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${eT._storagePrefix}/${n}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${eT._storagePrefix}/${this._strategy.name}`,i,t,1)}}};HS._strategyCtors=new Map([["recentlyUsedByPrefix",H9e],["recentlyUsed",W9e],["first",hoe]]);HS._storagePrefix="suggest/memories";HS=V9e([jZ(0,mc),jZ(1,Ai)],HS);const YR=bi("ISuggestMemories");ki(YR,HS,!0);var z9e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},U9e=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let zS=class foe{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=foe.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(i=>i.hasChanged(113)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(113)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const i=this._editor.getModel(),n=this._editor.getSelection(),o=i.getWordAtPosition(n.getStartPosition());if(!o){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(o.endColumn===n.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};zS.AtEnd=new st("atEndOfWord",!1);zS=z9e([U9e(1,jt)],zS);var $9e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},j9e=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let c_=class tT{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=tT.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},i){if(e.items.length===0){this.reset();return}if(tT._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=i,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,i){let n=i;for(;n=(n+t.items.length+(e?1:-1))%t.items.length,!(n===i||!t.items[n].completion.additionalTextEdits););return n}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(!!this._model)try{this._ignore=!0,this._index=tT._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};c_.OtherSuggestions=new st("hasOtherSuggestions",!1);c_=$9e([j9e(1,jt)],c_);class K9e{constructor(e,t,i){this._disposables=new Ae,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(n=>{if(this._active&&!t.isFrozen()){const o=n.charCodeAt(n.length-1);this._active.acceptCharacters.has(o)&&e.getOption(0)&&i(this._active.item)}}))}_onItem(e){if(!e||!Po(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new vb;for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var q9e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class Oa{provideSelectionRanges(e,t){return q9e(this,void 0,void 0,function*(){const i=[];for(const n of t){const o=[];i.push(o);const r=new Map;yield new Promise(a=>Oa._bracketsRightYield(a,0,e,n,r)),yield new Promise(a=>Oa._bracketsLeftYield(a,0,e,n,r,o))}return i})}static _bracketsRightYield(e,t,i,n,o){const r=new Map,a=Date.now();for(;;){if(t>=Oa._maxRounds){e();break}if(!n){e();break}const l=i.bracketPairs.findNextBracket(n);if(!l){e();break}if(Date.now()-a>Oa._maxDuration){setTimeout(()=>Oa._bracketsRightYield(e,t+1,i,n,o));break}if(l.bracketInfo.isOpeningBracket){const d=l.bracketInfo.bracketText,f=r.has(d)?r.get(d):0;r.set(d,f+1)}else{const d=l.bracketInfo.getClosedBrackets()[0].bracketText;let f=r.has(d)?r.get(d):0;if(f-=1,r.set(d,Math.max(0,f)),f<0){let g=o.get(d);g||(g=new Sr,o.set(d,g)),g.push(l.range)}}n=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,n,o,r){const a=new Map,l=Date.now();for(;;){if(t>=Oa._maxRounds&&o.size===0){e();break}if(!n){e();break}const c=i.bracketPairs.findPrevBracket(n);if(!c){e();break}if(Date.now()-l>Oa._maxDuration){setTimeout(()=>Oa._bracketsLeftYield(e,t+1,i,n,o,r));break}if(c.bracketInfo.isOpeningBracket){const f=c.bracketInfo.bracketText;let g=a.has(f)?a.get(f):0;if(g-=1,a.set(f,Math.max(0,g)),g<0){const m=o.get(f);if(m){const _=m.shift();m.size===0&&o.delete(f);const C=M.fromPositions(c.range.getEndPosition(),_.getStartPosition()),S=M.fromPositions(c.range.getStartPosition(),_.getEndPosition());r.push({range:C}),r.push({range:S}),Oa._addBracketLeading(i,S,r)}}}else{const f=c.bracketInfo.getClosedBrackets()[0].bracketText,g=a.has(f)?a.get(f):0;a.set(f,g+1)}n=c.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;const n=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(n);o!==0&&o!==t.startColumn&&(i.push({range:M.fromPositions(new se(n,o),t.getEndPosition())}),i.push({range:M.fromPositions(new se(n,1),t.getEndPosition())}));const r=n-1;if(r>0){const a=e.getLineFirstNonWhitespaceColumn(r);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(r)&&(i.push({range:M.fromPositions(new se(r,a),t.getEndPosition())}),i.push({range:M.fromPositions(new se(r,1),t.getEndPosition())}))}}}Oa._maxDuration=30;Oa._maxRounds=2;var G9e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class qc{static create(e,t){return G9e(this,void 0,void 0,function*(){if(!t.getOption(108).localityBonus||!t.hasModel())return qc.None;const i=t.getModel(),n=t.getPosition();if(!e.canComputeWordRanges(i.uri))return qc.None;const[o]=yield new Oa().provideSelectionRanges(i,[n]);if(o.length===0)return qc.None;const r=yield e.computeWordRanges(i.uri,o[0].range);if(!r)return qc.None;const a=i.getWordUntilPosition(n);return delete r[a.word],new class extends qc{distance(l,c){if(!n.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;const d=typeof c.label=="string"?c.label:c.label.label,f=r[d];if(xX(f))return 2<<20;const g=U8(f,M.fromPositions(l),M.compareRangesUsingStarts),m=g>=0?f[g]:f[Math.max(0,~g-1)];let _=o.length;for(const C of o){if(!M.containsRange(C.range,m))break;_-=1}return _}}})}}qc.None=new class extends qc{distance(){return 0}};class KZ{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}}class ng{constructor(e,t,i,n,o,r,a=D6.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=ng._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=n,this._options=o,this._refilterKind=1,this._lineContext=i,this._fuzzyScoreOptions=a,r==="top"?this._snippetCompareFn=ng._compareCompletionItemsSnippetsUp:r==="bottom"&&(this._snippetCompareFn=ng._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(const[t,i]of this._providerInfo)i&&e.add(t);return e}adopt(e){const t=[];for(let i=0;i<this._items.length;)e.has(this._items[i].provider)?i++:(t.push(this._items[i]),this._items[i]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext;let n="",o="";const r=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||r.length>2e3?E0:WNe;for(let c=0;c<r.length;c++){const d=r[c];if(d.isInvalid)continue;this._providerInfo.set(d.provider,Boolean(d.container.incomplete));const f=d.position.column-d.editStart.column,g=f+i-(d.position.column-this._column);if(n.length!==g&&(n=g===0?"":t.slice(-g),o=n.toLowerCase()),d.word=n,g===0)d.score=ou.Default;else{let m=0;for(;m<f;){const _=n.charCodeAt(m);if(_===32||_===9)m+=1;else break}if(m>=g)d.score=ou.Default;else if(typeof d.completion.filterText=="string"){const _=l(n,o,m,d.completion.filterText,d.filterTextLow,0,this._fuzzyScoreOptions);if(!_)continue;l3(d.completion.filterText,d.textLabel)===0?d.score=_:(d.score=PNe(n,o,m,d.textLabel,d.labelLow,0),d.score[0]=_[0])}else{const _=l(n,o,m,d.textLabel,d.labelLow,0,this._fuzzyScoreOptions);if(!_)continue;d.score=_}}d.idx=c,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?g5(e.length-.85,e,(c,d)=>c-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return ng._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return ng._compareCompletionItems(e,t)}}var Y9e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Kp=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},Z9e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class eb{constructor(e,t,i,n,o){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=i,this.shy=n,this.noSelect=o}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),i=e.getPosition();t.tokenization.tokenizeIfCheap(i.lineNumber);const n=t.getWordAtPosition(i);return!(!n||n.endColumn!==i.column||!isNaN(Number(n.word)))}}function Q9e(s,e,t){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;const i=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return i!==void 0?Boolean(i):!1}function X9e(s,e,t){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;const i=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return i!==void 0?Boolean(i):!1}let Y9=class goe{constructor(e,t,i,n,o,r,a,l){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=n,this._logService=o,this._contextKeyService=r,this._configurationService=a,this._languageFeaturesService=l,this._toDispose=new Ae,this._triggerCharacterListener=new Ae,this._triggerQuickSuggest=new Za,this._state=0,this._completionDisposables=new Ae,this._onDidCancel=new J,this._onDidTrigger=new J,this._onDidSuggest=new J,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new et(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let c=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{c=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{c=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(d=>{c||this._onCursorChange(d)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{c||this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){Ni(this._triggerCharacterListener),Ni([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(83)||!this._editor.hasModel()||!this._editor.getOption(111))return;const e=new Map;for(const i of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const n of i.triggerCharacters||[]){let o=e.get(n);o||(o=new Set,o.add(U5e()),e.set(n,o)),o.add(i)}const t=i=>{if(!X9e(this._editor,this._contextKeyService,this._configurationService)||eb.shouldAutoTrigger(this._editor))return;if(!i){const r=this._editor.getPosition();i=this._editor.getModel().getLineContent(r.lineNumber).substr(0,r.column-1)}let n="";Bm(i.charCodeAt(i.length-1))?Ms(i.charCodeAt(i.length-2))&&(n=i.substr(i.length-2)):n=i.charAt(i.length-1);const o=e.get(n);if(o){const r=this._completionModel?{items:this._completionModel.adopt(o),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,noSelect:!1,triggerCharacter:n},Boolean(this._completionModel),o,r)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1,noSelect:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;Ob.isAllOff(this._editor.getOption(81))||this._editor.getOption(108).snippetsPreventQuickSuggestions&&((e=Gs.get(this._editor))===null||e===void 0?void 0:e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!eb.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),i=this._editor.getPosition(),n=this._editor.getOption(81);if(!Ob.isAllOff(n)){if(!Ob.isAllOn(n)){t.tokenization.tokenizeIfCheap(i.lineNumber);const o=t.tokenization.getLineTokens(i.lineNumber),r=o.getStandardTokenType(o.findTokenIndexAtOffset(Math.max(i.column-1-1,0)));if(Ob.valueFor(n,r)!=="on")return}!Q9e(this._editor,this._contextKeyService,this._configurationService)||!this._languageFeaturesService.completionProvider.has(t)||this.trigger({auto:!0,shy:!1,noSelect:!1})}},this._editor.getOption(82)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),i=new eb(e,t,this._state===2,!1,!1);this._onNewContext(i)})}trigger(e,t=!1,i,n,o){var r;if(!this._editor.hasModel())return;const a=this._editor.getModel(),l=e.auto,c=new eb(a,this._editor.getPosition(),l,e.shy,e.noSelect);this.cancel(t),this._state=l?2:1,this._onDidTrigger.fire({auto:l,shy:e.shy,position:this._editor.getPosition()}),this._context=c;let d={triggerKind:(r=e.triggerKind)!==null&&r!==void 0?r:0};e.triggerCharacter&&(d={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new _o;const f=this._editor.getOption(103);let g=1;switch(f){case"top":g=0;break;case"bottom":g=2;break}const{itemKind:m,showDeprecated:_}=goe._createSuggestFilter(this._editor),C=new PS(g,o?new Set:m,i,_),S=qc.create(this._editorWorkerService,this._editor),x=AV(this._languageFeaturesService.completionProvider,a,this._editor.getPosition(),C,d,this._requestToken.token);Promise.all([x,S]).then(([L,k])=>Z9e(this,void 0,void 0,function*(){var T;if((T=this._requestToken)===null||T===void 0||T.dispose(),!this._editor.hasModel())return;let A=n==null?void 0:n.clipboardText;if(!A&&L.needsClipboard&&(A=yield this._clipboardService.readText()),this._state===0)return;const O=this._editor.getModel();let I=L.items;if(n){const B=Nse(g);I=I.concat(n.items).sort(B)}const R=new eb(O,this._editor.getPosition(),l,e.shy,e.noSelect);this._completionModel=new ng(I,this._context.column,{leadingLineContent:R.leadingLineContent,characterCountDelta:R.column-this._context.column},k,this._editor.getOption(108),this._editor.getOption(103),void 0,A),this._completionDisposables.add(L.disposable),this._onNewContext(R),this._reportDurationsTelemetry(L.durations)})).catch(Yt)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(103)==="none"&&t.add(27);const n=e.getOption(108);return n.showMethods||t.add(0),n.showFunctions||t.add(1),n.showConstructors||t.add(2),n.showFields||t.add(3),n.showVariables||t.add(4),n.showClasses||t.add(5),n.showStructs||t.add(6),n.showInterfaces||t.add(7),n.showModules||t.add(8),n.showProperties||t.add(9),n.showEvents||t.add(10),n.showOperators||t.add(11),n.showUnits||t.add(12),n.showValues||t.add(13),n.showConstants||t.add(14),n.showEnums||t.add(15),n.showEnumMembers||t.add(16),n.showKeywords||t.add(17),n.showWords||t.add(18),n.showColors||t.add(19),n.showFiles||t.add(20),n.showReferences||t.add(21),n.showColors||t.add(22),n.showFolders||t.add(23),n.showTypeParameters||t.add(24),n.showSnippets||t.add(27),n.showUsers||t.add(25),n.showIssues||t.add(26),{itemKind:t,showDeprecated:n.showDeprecated}}_onNewContext(e){if(!!this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(on(e.leadingLineContent)!==on(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0):this.cancel();return}if(!!this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));for(const n of this._completionModel.allProvider)t.delete(n);const i=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0,t,{items:i,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,i=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,noSelect:!1,triggerKind:2},!0,t,{items:i,clipboardText:this._completionModel.clipboardText})}else{const t=this._completionModel.lineContext;let i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(eb.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,i=this._completionModel.items.length>0,i&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,noSelect:this._context.noSelect,isFrozen:i})}}}}};Y9=Y9e([Kp(1,Ml),Kp(2,of),Kp(3,gu),Kp(4,fc),Kp(5,jt),Kp(6,Ai),Kp(7,ct)],Y9);class ZR{constructor(e,t){this._disposables=new Ae,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const i=e.getSelections(),n=i.length;let o=!1;for(let a=0;a<n;a++)if(!i[a].isEmpty()){o=!0;break}if(!o)return;this._lastOvertyped=[];const r=e.getModel();for(let a=0;a<n;a++){const l=i[a];if(r.getValueLengthInRange(l)>ZR._maxSelectionLength)return;this._lastOvertyped[a]={value:r.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(i=>{!this._empty&&!i.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}ZR._maxSelectionLength=51200;var J9e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},PF=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};class KV extends V0{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=b("ddd","{0} ({1})",this._action.label,KV.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"\u23CE")}}let Z9=class{constructor(e,t,i,n){this._menuService=i,this._contextKeyService=n,this._menuDisposables=new Ae,this.element=Se(e,Pe(".suggest-status-bar"));const o=r=>r instanceof Pg?t.createInstance(KV,r,void 0):void 0;this._leftActions=new Cd(this.element,{actionViewItemProvider:o}),this._rightActions=new Cd(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(xg,this._contextKeyService),t=()=>{const i=[],n=[];for(const[o,r]of e.getActions())o==="left"?i.push(...r):n.push(...r);this._leftActions.clear(),this._leftActions.push(i),this._rightActions.clear(),this._rightActions.push(n)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};Z9=J9e([PF(1,Zt),PF(2,L_),PF(3,jt)],Z9);const e8e=j("symbolIcon.arrayForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),t8e=j("symbolIcon.booleanForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),i8e=j("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},b("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),n8e=j("symbolIcon.colorForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),s8e=j("symbolIcon.constantForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),o8e=j("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},b("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),r8e=j("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},b("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),a8e=j("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},b("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),l8e=j("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},b("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),c8e=j("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},b("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),u8e=j("symbolIcon.fileForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),d8e=j("symbolIcon.folderForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),h8e=j("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},b("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),f8e=j("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},b("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),g8e=j("symbolIcon.keyForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),p8e=j("symbolIcon.keywordForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),m8e=j("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},b("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_8e=j("symbolIcon.moduleForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),v8e=j("symbolIcon.namespaceForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),b8e=j("symbolIcon.nullForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),C8e=j("symbolIcon.numberForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),w8e=j("symbolIcon.objectForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),y8e=j("symbolIcon.operatorForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),S8e=j("symbolIcon.packageForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),L8e=j("symbolIcon.propertyForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),x8e=j("symbolIcon.referenceForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),D8e=j("symbolIcon.snippetForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),k8e=j("symbolIcon.stringForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),E8e=j("symbolIcon.structForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),T8e=j("symbolIcon.textForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),I8e=j("symbolIcon.typeParameterForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),N8e=j("symbolIcon.unitForeground",{dark:Oe,light:Oe,hcDark:Oe,hcLight:Oe},b("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),R8e=j("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},b("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));Cn((s,e)=>{const t=s.getColor(e8e);t&&e.addRule(`${w.symbolArray.cssSelector} { color: ${t}; }`);const i=s.getColor(t8e);i&&e.addRule(`${w.symbolBoolean.cssSelector} { color: ${i}; }`);const n=s.getColor(i8e);n&&e.addRule(`${w.symbolClass.cssSelector} { color: ${n}; }`);const o=s.getColor(m8e);o&&e.addRule(`${w.symbolMethod.cssSelector} { color: ${o}; }`);const r=s.getColor(n8e);r&&e.addRule(`${w.symbolColor.cssSelector} { color: ${r}; }`);const a=s.getColor(s8e);a&&e.addRule(`${w.symbolConstant.cssSelector} { color: ${a}; }`);const l=s.getColor(o8e);l&&e.addRule(`${w.symbolConstructor.cssSelector} { color: ${l}; }`);const c=s.getColor(r8e);c&&e.addRule(`
			${w.symbolValue.cssSelector},${w.symbolEnum.cssSelector} { color: ${c}; }`);const d=s.getColor(a8e);d&&e.addRule(`${w.symbolEnumMember.cssSelector} { color: ${d}; }`);const f=s.getColor(l8e);f&&e.addRule(`${w.symbolEvent.cssSelector} { color: ${f}; }`);const g=s.getColor(c8e);g&&e.addRule(`${w.symbolField.cssSelector} { color: ${g}; }`);const m=s.getColor(u8e);m&&e.addRule(`${w.symbolFile.cssSelector} { color: ${m}; }`);const _=s.getColor(d8e);_&&e.addRule(`${w.symbolFolder.cssSelector} { color: ${_}; }`);const C=s.getColor(h8e);C&&e.addRule(`${w.symbolFunction.cssSelector} { color: ${C}; }`);const S=s.getColor(f8e);S&&e.addRule(`${w.symbolInterface.cssSelector} { color: ${S}; }`);const x=s.getColor(g8e);x&&e.addRule(`${w.symbolKey.cssSelector} { color: ${x}; }`);const L=s.getColor(p8e);L&&e.addRule(`${w.symbolKeyword.cssSelector} { color: ${L}; }`);const k=s.getColor(_8e);k&&e.addRule(`${w.symbolModule.cssSelector} { color: ${k}; }`);const T=s.getColor(v8e);T&&e.addRule(`${w.symbolNamespace.cssSelector} { color: ${T}; }`);const A=s.getColor(b8e);A&&e.addRule(`${w.symbolNull.cssSelector} { color: ${A}; }`);const O=s.getColor(C8e);O&&e.addRule(`${w.symbolNumber.cssSelector} { color: ${O}; }`);const I=s.getColor(w8e);I&&e.addRule(`${w.symbolObject.cssSelector} { color: ${I}; }`);const R=s.getColor(y8e);R&&e.addRule(`${w.symbolOperator.cssSelector} { color: ${R}; }`);const B=s.getColor(S8e);B&&e.addRule(`${w.symbolPackage.cssSelector} { color: ${B}; }`);const z=s.getColor(L8e);z&&e.addRule(`${w.symbolProperty.cssSelector} { color: ${z}; }`);const q=s.getColor(x8e);q&&e.addRule(`${w.symbolReference.cssSelector} { color: ${q}; }`);const te=s.getColor(D8e);te&&e.addRule(`${w.symbolSnippet.cssSelector} { color: ${te}; }`);const U=s.getColor(k8e);U&&e.addRule(`${w.symbolString.cssSelector} { color: ${U}; }`);const X=s.getColor(E8e);X&&e.addRule(`${w.symbolStruct.cssSelector} { color: ${X}; }`);const le=s.getColor(T8e);le&&e.addRule(`${w.symbolText.cssSelector} { color: ${le}; }`);const be=s.getColor(I8e);be&&e.addRule(`${w.symbolTypeParameter.cssSelector} { color: ${be}; }`);const pe=s.getColor(N8e);pe&&e.addRule(`${w.symbolUnit.cssSelector} { color: ${pe}; }`);const ke=s.getColor(R8e);ke&&e.addRule(`${w.symbolVariable.cssSelector} { color: ${ke}; }`)});class poe{constructor(){this._onDidWillResize=new J,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new J,this.onDidResize=this._onDidResize.event,this._sashListener=new Ae,this._size=new ln(0,0),this._minSize=new ln(0,0),this._maxSize=new ln(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Ro(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Ro(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Ro(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:uI.North}),this._southSash=new Ro(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:uI.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,i=0;this._sashListener.add(gt.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,i=0)})),this._sashListener.add(gt.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,i=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(n=>{e&&(i=n.currentX-n.startX,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(n=>{e&&(i=-(n.currentX-n.startX),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(n=>{e&&(t=-(n.currentY-n.startY),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(n=>{e&&(t=n.currentY-n.startY,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(gt.any(this._eastSash.onDidReset,this._westSash.onDidReset)(n=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(gt.any(this._northSash.onDidReset,this._southSash.onDidReset)(n=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,i,n){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=i?3:0,this._westSash.state=n?3:0}layout(e=this.size.height,t=this.size.width){const{height:i,width:n}=this._minSize,{height:o,width:r}=this._maxSize;e=Math.max(i,Math.min(o,e)),t=Math.max(n,Math.min(r,t));const a=new ln(t,e);ln.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}var A8e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},M8e=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};function qV(s){return!!s&&Boolean(s.completion.documentation||s.completion.detail&&s.completion.detail!==s.completion.label)}let Q9=class{constructor(e,t){this._editor=e,this._onDidClose=new J,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new J,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new Ae,this._renderDisposeable=new Ae,this._borderWidth=1,this._size=new ln(330,0),this.domNode=Pe(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(ef,{editor:e}),this._body=Pe(".body"),this._scrollbar=new vL(this._body,{alwaysConsumeMouseWheel:!0}),Se(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=Se(this._body,Pe(".header")),this._close=Se(this._header,Pe("span"+w.close.cssSelector)),this._close.title=b("details.close","Close"),this._type=Se(this._header,Pe("p.type")),this._docs=Se(this._body,Pe("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(46)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(46),i=t.getMassagedFontFamily(),n=e.get(109)||t.fontSize,o=e.get(110)||t.lineHeight,r=t.fontWeight,a=`${n}px`,l=`${o}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${o/n}`,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(110)||this._editor.getOption(46).lineHeight,t=this._borderWidth,i=t*2;return{lineHeight:e,borderWidth:t,borderHeight:i,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=b("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var i,n;this._renderDisposeable.clear();let{detail:o,documentation:r}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(i=e.word)!==null&&i!==void 0?i:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(n=e.completion.commitCharacters)===null||n===void 0?void 0:n.join("")}
`,r=new Wr().appendCodeblock("empty",a),o=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!qV(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),o){const a=o.length>1e5?`${o.substr(0,1e5)}\u2026`:o;this._type.textContent=a,this._type.title=a,Wa(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else Ts(this._type),this._type.title="",Vr(this._type),this.domNode.classList.add("no-type");if(Ts(this._docs),typeof r=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=r;else if(r){this._docs.classList.add("markdown-docs"),Ts(this._docs);const a=this._markdownRenderer.render(r);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const i=new ln(e,t);ln.equals(i,this._size)||(this._size=i,dLe(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};Q9=A8e([M8e(1,Zt)],Q9);class O8e{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new Ae,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new poe,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let i,n,o=0,r=0;this._disposables.add(this._resizable.onDidWillResize(()=>{i=this._topLeft,n=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(i&&n){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(r=n.width-a.dimension.width,l=!0),a.north&&(o=n.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:i.top+o,left:i.left+r})}a.done&&(i=void 0,n=void 0,o=0,r=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var i;const n=e.getBoundingClientRect();this._anchorBox=n,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(i=this._userSize)!==null&&i!==void 0?i:this.widget.size,t)}_placeAtAnchor(e,t,i){var n;const o=RN(document.body),r=this.widget.getLayoutInfo(),a=new ln(220,2*r.lineHeight),l=e.top,c=function(){const k=o.width-(e.left+e.width+r.borderWidth+r.horizontalPadding),T=-r.borderWidth+e.left+e.width,A=new ln(k,o.height-e.top-r.borderHeight-r.verticalPadding),O=A.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:l,left:T,fit:k-t.width,maxSizeTop:A,maxSizeBottom:O,minSize:a.with(Math.min(k,a.width))}}(),d=function(){const k=e.left-r.borderWidth-r.horizontalPadding,T=Math.max(r.horizontalPadding,e.left-t.width-r.borderWidth),A=new ln(k,o.height-e.top-r.borderHeight-r.verticalPadding),O=A.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:l,left:T,fit:k-t.width,maxSizeTop:A,maxSizeBottom:O,minSize:a.with(Math.min(k,a.width))}}(),f=function(){const k=e.left,T=-r.borderWidth+e.top+e.height,A=new ln(e.width-r.borderHeight,o.height-e.top-e.height-r.verticalPadding);return{top:T,left:k,fit:A.height-t.height,maxSizeBottom:A,maxSizeTop:A,minSize:a.with(A.width)}}(),g=[c,d,f],m=(n=g.find(k=>k.fit>=0))!==null&&n!==void 0?n:g.sort((k,T)=>T.fit-k.fit)[0],_=e.top+e.height-r.borderHeight;let C,S=t.height;const x=Math.max(m.maxSizeTop.height,m.maxSizeBottom.height);S>x&&(S=x);let L;i?S<=m.maxSizeTop.height?(C=!0,L=m.maxSizeTop):(C=!1,L=m.maxSizeBottom):S<=m.maxSizeBottom.height?(C=!1,L=m.maxSizeBottom):(C=!0,L=m.maxSizeTop),this._applyTopLeft({left:m.left,top:C?m.top:_-S}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!C,m===c,C,m!==c),this._resizable.minSize=m.minSize,this._resizable.maxSize=L,this._resizable.layout(S,Math.min(L.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var Hh;(function(s){s[s.FILE=0]="FILE",s[s.FOLDER=1]="FOLDER",s[s.ROOT_FOLDER=2]="ROOT_FOLDER"})(Hh||(Hh={}));const P8e=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function bE(s,e,t,i){const n=i===Hh.ROOT_FOLDER?["rootfolder-icon"]:i===Hh.FOLDER?["folder-icon"]:["file-icon"];if(t){let o;if(t.scheme===Xt.data)o=Bg.parseMetaData(t).get(Bg.META_DATA_LABEL);else{const r=t.path.match(P8e);r?(o=CE(r[2].toLowerCase()),r[1]&&n.push(`${CE(r[1].toLowerCase())}-name-dir-icon`)):o=CE(t.authority.toLowerCase())}if(i===Hh.FOLDER)n.push(`${o}-name-folder-icon`);else{if(o){if(n.push(`${o}-name-file-icon`),n.push("name-file-icon"),o.length<=255){const a=o.split(".");for(let l=1;l<a.length;l++)n.push(`${a.slice(l).join(".")}-ext-file-icon`)}n.push("ext-file-icon")}const r=F8e(s,e,t);r&&n.push(`${CE(r)}-lang-file-icon`)}}return n}function F8e(s,e,t){if(!t)return null;let i=null;if(t.scheme===Xt.data){const o=Bg.parseMetaData(t).get(Bg.META_DATA_MIME);o&&(i=e.getLanguageIdByMimeType(o))}else{const n=s.getModel(t);n&&(i=n.getLanguageId())}return i&&i!==xl?i:e.guessLanguageIdByFilepathOrFirstLine(t)}function CE(s){return s.replace(/[\11\12\14\15\40]/g,"/")}var B8e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},FF=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},xw;function moe(s){return`suggest-aria-id:${s}`}const V8e=Ls("suggest-more-info",w.chevronRight,b("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),W8e=new(xw=class iT{extract(e,t){if(e.textLabel.match(iT._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(iT._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const i=iT._regexRelaxed.exec(e.completion.documentation);if(i&&(i.index===0||i.index+i[0].length===e.completion.documentation.length))return t[0]=i[0],!0}return!1}},xw._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,xw._regexStrict=new RegExp(`^${xw._regexRelaxed.source}$`,"i"),xw);let X9=class{constructor(e,t,i,n){this._editor=e,this._modelService=t,this._languageService=i,this._themeService=n,this._onDidToggleDetails=new J,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new Ae,t.root=e,t.root.classList.add("show-file-icons"),t.icon=Se(e,Pe(".icon")),t.colorspan=Se(t.icon,Pe("span.colorspan"));const i=Se(e,Pe(".contents")),n=Se(i,Pe(".main"));t.iconContainer=Se(n,Pe(".icon-label.codicon")),t.left=Se(n,Pe("span.left")),t.right=Se(n,Pe("span.right")),t.iconLabel=new II(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=Se(t.left,Pe("span.signature-label")),t.qualifierLabel=Se(t.left,Pe("span.qualifier-label")),t.detailsLabel=Se(t.right,Pe("span.details-label")),t.readMore=Se(t.right,Pe("span.readMore"+Pi.asCSSSelector(V8e))),t.readMore.title=b("readMore","Read More");const o=()=>{const r=this._editor.getOptions(),a=r.get(46),l=a.getMassagedFontFamily(),c=a.fontFeatureSettings,d=r.get(109)||a.fontSize,f=r.get(110)||a.lineHeight,g=a.fontWeight,m=a.letterSpacing,_=`${d}px`,C=`${f}px`,S=`${m}px`;t.root.style.fontSize=_,t.root.style.fontWeight=g,t.root.style.letterSpacing=S,n.style.fontFamily=l,n.style.fontFeatureSettings=c,n.style.lineHeight=C,t.icon.style.height=C,t.icon.style.width=C,t.readMore.style.height=C,t.readMore.style.width=C};return o(),t.disposables.add(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(46)||r.hasChanged(109)||r.hasChanged(110))&&o()})),t}renderElement(e,t,i){const{completion:n}=e;i.root.id=moe(t),i.colorspan.style.backgroundColor="";const o={labelEscapeNewLines:!0,matches:lR(e.score)},r=[];if(n.kind===19&&W8e.extract(e,r))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=r[0];else if(n.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";const a=bE(this._modelService,this._languageService,yt.from({scheme:"fake",path:e.textLabel}),Hh.FILE),l=bE(this._modelService,this._languageService,yt.from({scheme:"fake",path:n.detail}),Hh.FILE);o.extraClasses=a.length>l.length?a:l}else n.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",o.extraClasses=[bE(this._modelService,this._languageService,yt.from({scheme:"fake",path:e.textLabel}),Hh.FOLDER),bE(this._modelService,this._languageService,yt.from({scheme:"fake",path:n.detail}),Hh.FOLDER)].flat()):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...yr.asClassNameArray(My.toIcon(n.kind))));n.tags&&n.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,o),typeof n.label=="string"?(i.parametersLabel.textContent="",i.detailsLabel.textContent=BF(n.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=BF(n.label.detail||""),i.detailsLabel.textContent=BF(n.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(108).showInlineDetails?Wa(i.detailsLabel):Vr(i.detailsLabel),qV(e)?(i.right.classList.add("can-expand-details"),Wa(i.readMore),i.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},i.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),Vr(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};X9=B8e([FF(1,Hn),FF(2,Vn),FF(3,cn)],X9);function BF(s){return s.replace(/\r\n|\r|\n/g,"")}var H8e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},wE=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},z8e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};j("editorSuggestWidget.background",{dark:hs,light:hs,hcDark:hs,hcLight:hs},b("editorSuggestWidgetBackground","Background color of the suggest widget."));j("editorSuggestWidget.border",{dark:Ah,light:Ah,hcDark:Ah,hcLight:Ah},b("editorSuggestWidgetBorder","Border color of the suggest widget."));const yE=j("editorSuggestWidget.foreground",{dark:za,light:za,hcDark:za,hcLight:za},b("editorSuggestWidgetForeground","Foreground color of the suggest widget."));j("editorSuggestWidget.selectedForeground",{dark:Fw,light:Fw,hcDark:Fw,hcLight:Fw},b("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));j("editorSuggestWidget.selectedIconForeground",{dark:Bw,light:Bw,hcDark:Bw,hcLight:Bw},b("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const U8e=j("editorSuggestWidget.selectedBackground",{dark:Vw,light:Vw,hcDark:Vw,hcLight:Vw},b("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));j("editorSuggestWidget.highlightForeground",{dark:sc,light:sc,hcDark:sc,hcLight:sc},b("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));j("editorSuggestWidget.focusHighlightForeground",{dark:yk,light:yk,hcDark:yk,hcLight:yk},b("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));j("editorSuggestWidgetStatus.foreground",{dark:pt(yE,.5),light:pt(yE,.5),hcDark:pt(yE,.5),hcLight:pt(yE,.5)},b("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class $8e{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof s_}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const i=JSON.parse(t);if(ln.is(i))return ln.lift(i)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let US=class J9{constructor(e,t,i,n,o){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Za,this._disposables=new Ae,this._onDidSelect=new J,this._onDidFocus=new J,this._onDidHide=new J,this._onDidShow=new J,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new J,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new poe,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new j8e(this,e),this._persistedSize=new $8e(t,e);class r{constructor(m,_,C=!1,S=!1){this.persistedSize=m,this.currentSize=_,this.persistHeight=C,this.persistWidth=S}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new r(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(g=>{var m,_,C,S;if(this._resize(g.dimension.width,g.dimension.height),a&&(a.persistHeight=a.persistHeight||!!g.north||!!g.south,a.persistWidth=a.persistWidth||!!g.east||!!g.west),!!g.done){if(a){const{itemHeight:x,defaultSize:L}=this.getLayoutInfo(),k=Math.round(x/2);let{width:T,height:A}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-A)<=k)&&(A=(_=(m=a.persistedSize)===null||m===void 0?void 0:m.height)!==null&&_!==void 0?_:L.height),(!a.persistWidth||Math.abs(a.currentSize.width-T)<=k)&&(T=(S=(C=a.persistedSize)===null||C===void 0?void 0:C.width)!==null&&S!==void 0?S:L.width),this._persistedSize.store(new ln(T,A))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=Se(this.element.domNode,Pe(".message")),this._listElement=Se(this.element.domNode,Pe(".tree"));const l=o.createInstance(Q9,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new O8e(l,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(108).showIcons);c();const d=o.createInstance(X9,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new mu("SuggestWidget",this._listElement,{getHeight:g=>this.getLayoutInfo().itemHeight,getTemplateId:g=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>b("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:g=>{let m=g.textLabel;if(typeof g.completion.label!="string"){const{detail:x,description:L}=g.completion.label;x&&L?m=b("label.full","{0}{1}, {2}",m,x,L):x?m=b("label.detail","{0}{1}",m,x):L&&(m=b("label.desc","{0}, {1}",m,L))}if(!g.isResolved||!this._isDetailsVisible())return m;const{documentation:_,detail:C}=g.completion,S=bl("{0}{1}",C||"",_?typeof _=="string"?_:_.value:"");return b("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",m,S)}}}),this._status=o.createInstance(Z9,this.element.domNode);const f=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(108).showStatusBar);f(),this._disposables.add(Zm(this._list,n,{listInactiveFocusBackground:U8e,listInactiveFocusOutline:En})),this._disposables.add(n.onDidColorThemeChange(g=>this._onThemeChange(g))),this._onThemeChange(n.getColorTheme()),this._disposables.add(this._list.onMouseDown(g=>this._onListMouseDownOrTap(g))),this._disposables.add(this._list.onTap(g=>this._onListMouseDownOrTap(g))),this._disposables.add(this._list.onDidChangeSelection(g=>this._onListSelection(g))),this._disposables.add(this._list.onDidChangeFocus(g=>this._onListFocus(g))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(g=>{g.hasChanged(108)&&(f(),c())})),this._ctxSuggestWidgetVisible=gi.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=gi.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=gi.MultipleSuggestions.bindTo(i),this._ctxSuggestWidgetHasFocusedSuggestion=gi.HasFocusedSuggestion.bindTo(i),this._disposables.add(Ps(this._details.widget.domNode,"keydown",g=>{this._onDetailsKeydown.fire(g)})),this._disposables.add(this.editor.onMouseDown(g=>this._onEditorMouseDown(g)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=Vo(e.type)?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const i=e.elements[0],n=e.indexes[0];i!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=i,this._list.reveal(n),this._currentSuggestionDetails=qs(o=>z8e(this,void 0,void 0,function*(){const r=Vm(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=o.onCancellationRequested(()=>r.dispose()),l=yield i.resolve(o);return r.dispose(),a.dispose(),l})),this._currentSuggestionDetails.then(()=>{n>=this._list.length||i!==this._list.element(n)||(this._ignoreFocusEvents=!0,this._list.splice(n,1,[i]),this._list.setFocus([n]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:moe(n)}))}).catch(Yt)),this._onDidFocus.fire({item:i,index:n,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Vr(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=J9.LOADING_MESSAGE,Vr(this._listElement,this._status.element),Wa(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=J9.NO_SUGGESTIONS_MESSAGE,Vr(this._listElement,this._status.element),Wa(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:Vr(this._messageElement),Wa(this._listElement,this._status.element),this._show();break;case 4:Vr(this._messageElement),Wa(this._listElement,this._status.element),this._show();break;case 5:Vr(this._messageElement),Wa(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=Vm(()=>this._setState(1),t)))}showSuggestions(e,t,i,n){var o,r;if(this._contentWidget.setPosition(this.editor.getPosition()),(o=this._loadingTimeout)===null||o===void 0||o.dispose(),(r=this._currentSuggestionDetails)===null||r===void 0||r.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,l=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),l){this._setState(n?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),t>=0&&(this._list.reveal(t,0),this._list.setFocus([t])),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(qV(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),i=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<i&&this._persistedSize.store(t.with(void 0,i))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,i,n;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const o=RN(document.body),r=this.getLayoutInfo();e||(e=r.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.lineHeight=`${r.itemHeight}px`,this._state===2||this._state===1)a=r.itemHeight+r.borderHeight,l=r.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new ln(l,a),this._contentWidget.setPreference(2);else{const c=o.width-r.borderHeight-2*r.horizontalPadding;l>c&&(l=c);const d=this._completionModel?this._completionModel.stats.pLabelLen*r.typicalHalfwidthCharacterWidth:l,f=r.statusBarHeight+this._list.contentHeight+r.borderHeight,g=r.itemHeight+r.statusBarHeight,m=Oo(this.editor.getDomNode()),_=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),C=m.top+_.top+_.height,S=Math.min(o.height-C-r.verticalPadding,f),x=m.top+_.top-r.verticalPadding,L=Math.min(x,f);let k=Math.min(Math.max(L,S)+r.borderHeight,f);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<g&&(a=g),a>k&&(a=k);const T=150;a>S||this._forceRenderingAbove&&x>T?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),k=L):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),k=S),this.element.preferredSize=new ln(d,r.defaultSize.height),this.element.maxSize=new ln(c,k),this.element.minSize=new ln(220,g),this._cappedHeight=a===f?{wanted:(n=(i=this._cappedHeight)===null||i===void 0?void 0:i.wanted)!==null&&n!==void 0?n:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:i,height:n}=this.element.maxSize;e=Math.min(i,e),t=Math.min(n,t);const{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=`${t-o}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(46),t=ca(this.editor.getOption(110)||e.lineHeight,8,1e3),i=!this.editor.getOption(108).showStatusBar||this._state===2||this._state===1?0:t,n=this._details.widget.borderWidth,o=2*n;return{itemHeight:t,statusBarHeight:i,borderWidth:n,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new ln(430,i+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};US.LOADING_MESSAGE=b("suggestWidget.loading","Loading...");US.NO_SUGGESTIONS_MESSAGE=b("suggestWidget.noSuggestions","No suggestions.");US=H8e([wE(1,mc),wE(2,jt),wE(3,cn),wE(4,Zt)],US);class j8e{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:n}=this._widget.getLayoutInfo();return new ln(t+2*i+n,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var K8e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},tb=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};class q8e{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const n=e.getOffsetAt(t),o=e.getPositionAt(n+1);this._marker=e.deltaDecorations([],[{range:M.fromPositions(t,o),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let ac=class _oe{constructor(e,t,i,n,o,r,a){this._memoryService=t,this._commandService=i,this._contextKeyService=n,this._instantiationService=o,this._logService=r,this._telemetryService=a,this._lineSuffix=new tr,this._toDispose=new Ae,this._selectors=new G8e(f=>f.priority),this._telemetryGate=0,this.editor=e,this.model=o.createInstance(Y9,this.editor);const l=gi.InsertMode.bindTo(n);l.set(e.getOption(108).insertMode),this.model.onDidTrigger(()=>l.set(e.getOption(108).insertMode)),this.widget=this._toDispose.add(new vg(()=>{const f=this._instantiationService.createInstance(US,this.editor);this._toDispose.add(f),this._toDispose.add(f.onDidSelect(S=>this._insertSuggestion(S,0),this));const g=new K9e(this.editor,f,S=>this._insertSuggestion(S,2));this._toDispose.add(g),this._toDispose.add(this.model.onDidSuggest(S=>{S.completionModel.items.length===0&&g.reset()}));const m=gi.MakesTextEdit.bindTo(this._contextKeyService),_=gi.HasInsertAndReplaceRange.bindTo(this._contextKeyService),C=gi.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(ni(()=>{m.reset(),_.reset(),C.reset()})),this._toDispose.add(f.onDidFocus(({item:S})=>{const x=this.editor.getPosition(),L=S.editStart.column,k=x.column;let T=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!S.completion.additionalTextEdits&&!(S.completion.insertTextRules&4)&&k-L===S.completion.insertText.length&&(T=this.editor.getModel().getValueInRange({startLineNumber:x.lineNumber,startColumn:L,endLineNumber:x.lineNumber,endColumn:k})!==S.completion.insertText),m.set(T),_.set(!se.equals(S.editInsertEnd,S.editReplaceEnd)),C.set(Boolean(S.provider.resolveCompletionItem)||Boolean(S.completion.documentation)||S.completion.detail!==S.completion.label)})),this._toDispose.add(f.onDetailsKeyDown(S=>{if(S.toKeybinding().equals(new Wm(!0,!1,!1,!1,33))||mi&&S.toKeybinding().equals(new Wm(!1,!1,!1,!0,33))){S.stopPropagation();return}S.toKeybinding().isModifierKey()||this.editor.focus()})),f})),this._overtypingCapturer=this._toDispose.add(new vg(()=>this._toDispose.add(new ZR(this.editor,this.model)))),this._alternatives=this._toDispose.add(new vg(()=>this._toDispose.add(new c_(this.editor,this._contextKeyService)))),this._toDispose.add(o.createInstance(zS,e)),this._toDispose.add(this.model.onDidTrigger(f=>{this.widget.value.showTriggered(f.auto,f.shy?250:50),this._lineSuffix.value=new q8e(this.editor.getModel(),f.position)})),this._toDispose.add(this.model.onDidSuggest(f=>{if(f.shy)return;let g=-1;if(!f.noSelect){for(const m of this._selectors.itemsOrderedByPriorityDesc)if(g=m.select(this.editor.getModel(),this.editor.getPosition(),f.completionModel.items),g!==-1)break;g===-1&&(g=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),f.completionModel.items))}this.widget.value.showSuggestions(f.completionModel,g,f.isFrozen,f.auto)})),this._toDispose.add(this.model.onDidCancel(f=>{f.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));const c=gi.AcceptSuggestionsOnEnter.bindTo(n),d=()=>{const f=this.editor.getOption(1);c.set(f==="on"||f==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>d())),d()}static get(e){return e.getContribution(_oe.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const i=Gs.get(this.editor);if(!i)return;const n=this.editor.getModel(),o=n.getAlternativeVersionId(),{item:r}=e,a=[],l=new _o;t&1||this.editor.pushUndoStop();const c=this.getOverwriteInfo(r,Boolean(t&8));if(this._memoryService.memorize(n,this.editor.getPosition(),r),Array.isArray(r.completion.additionalTextEdits)){const f=Wg.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(g=>Nn.replaceMove(M.lift(g.range),g.text))),f.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!r.isResolved){const f=new qr(!0);let g;const m=n.onDidChangeContent(x=>{if(x.isFlush){l.cancel(),m.dispose();return}for(const L of x.changes){const k=M.getEndPosition(L.range);(!g||se.isBefore(k,g))&&(g=k)}}),_=t;t|=2;let C=!1;const S=this.editor.onWillType(()=>{S.dispose(),C=!0,_&2||this.editor.pushUndoStop()});a.push(r.resolve(l.token).then(()=>{if(!r.completion.additionalTextEdits||l.token.isCancellationRequested||g&&r.completion.additionalTextEdits.some(L=>se.isBefore(g,M.getStartPosition(L.range))))return!1;C&&this.editor.pushUndoStop();const x=Wg.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(L=>Nn.replaceMove(M.lift(L.range),L.text))),x.restoreRelativeVerticalPositionOfCursor(this.editor),(C||!(_&2))&&this.editor.pushUndoStop(),!0}).then(x=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",f.elapsed(),x),m.dispose(),S.dispose()}))}let{insertText:d}=r.completion;r.completion.insertTextRules&4||(d=Kg.escape(d)),i.insert(d,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command?r.completion.command.id===WL.id?this.model.trigger({auto:!0,shy:!1,noSelect:!1},!0):(a.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(Yt)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,f=>{for(l.cancel();n.canUndo();){o!==n.getAlternativeVersionId()&&n.undo(),this._insertSuggestion(f,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(r,n,e),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,i){var n;if(this._telemetryGate++%100!==0)return;const o=e.extensionId?e.extensionId.value:((n=i.item.provider._debugDisplayName)!==null&&n!==void 0?n:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:o,kind:e.completion.kind,basenameHash:_B(Rl(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:KTe(t.uri)})}getOverwriteInfo(e,t){Qi(this.editor.hasModel());let i=this.editor.getOption(108).insertMode==="replace";t&&(i=!i);const n=e.position.column-e.editStart.column,o=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,r=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:n+r,overwriteAfter:o+a}}_alertCompletionItem(e){if(Po(e.completion.additionalTextEdits)){const t=b("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);go(t)}}triggerSuggest(e,t,i,n){this.editor.hasModel()&&(this.model.trigger({auto:t!=null?t:!1,shy:!1,noSelect:n!=null?n:!1},!1,e,void 0,i),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},n=o=>{if(o.completion.insertTextRules&4||o.completion.additionalTextEdits)return!0;const r=this.editor.getPosition(),a=o.editStart.column,l=r.column;return l-a!==o.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:r.lineNumber,startColumn:a,endLineNumber:r.lineNumber,endColumn:l})!==o.completion.insertText};gt.once(this.model.onDidTrigger)(o=>{const r=[];gt.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{Ni(r),i()},void 0,r),this.model.onDidSuggest(({completionModel:a})=>{if(Ni(r),a.items.length===0){i();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!n(c)){i();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,r)}),this.model.trigger({auto:!1,shy:!0,noSelect:!1}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let n=0;e&&(n|=4),t&&(n|=8),this._insertSuggestion(i,n)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){!this.widget.isInitialized||this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};ac.ID="editor.contrib.suggestController";ac=K8e([tb(1,YR),tb(2,fs),tb(3,jt),tb(4,Zt),tb(5,fc),tb(6,gu)],ac);class G8e{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,i)=>this.prioritySelector(i)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class WL extends ot{constructor(){super({id:WL.id,label:b("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:Je.and($.writable,$.hasCompletionItemProvider),kbOpts:{kbExpr:$.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,i){const n=ac.get(t);if(!n)return;let o,r;i&&typeof i=="object"&&(i.auto===!0&&(o=!0),i.noSelection===!0&&(r=!0)),n.triggerSuggest(void 0,o,void 0,r)}}WL.id="editor.action.triggerSuggest";Ei(ac.ID,ac);We(WL);const Al=100+90,Sa=Fs.bindToContribution(ac.get);Be(new Sa({id:"acceptSelectedSuggestion",precondition:Je.and(gi.Visible,gi.HasFocusedSuggestion),handler(s){s.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:Je.and(gi.Visible,$.textInputFocus),weight:Al},{primary:3,kbExpr:Je.and(gi.Visible,$.textInputFocus,gi.AcceptSuggestionsOnEnter,gi.MakesTextEdit),weight:Al}],menuOpts:[{menuId:xg,title:b("accept.insert","Insert"),group:"left",order:1,when:gi.HasInsertAndReplaceRange.toNegated()},{menuId:xg,title:b("accept.insert","Insert"),group:"left",order:1,when:Je.and(gi.HasInsertAndReplaceRange,gi.InsertMode.isEqualTo("insert"))},{menuId:xg,title:b("accept.replace","Replace"),group:"left",order:1,when:Je.and(gi.HasInsertAndReplaceRange,gi.InsertMode.isEqualTo("replace"))}]}));Be(new Sa({id:"acceptAlternativeSelectedSuggestion",precondition:Je.and(gi.Visible,$.textInputFocus,gi.HasFocusedSuggestion),kbOpts:{weight:Al,kbExpr:$.textInputFocus,primary:1027,secondary:[1026]},handler(s){s.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:xg,group:"left",order:2,when:Je.and(gi.HasInsertAndReplaceRange,gi.InsertMode.isEqualTo("insert")),title:b("accept.replace","Replace")},{menuId:xg,group:"left",order:2,when:Je.and(gi.HasInsertAndReplaceRange,gi.InsertMode.isEqualTo("replace")),title:b("accept.insert","Insert")}]}));Li.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");Be(new Sa({id:"hideSuggestWidget",precondition:gi.Visible,handler:s=>s.cancelSuggestWidget(),kbOpts:{weight:Al,kbExpr:$.textInputFocus,primary:9,secondary:[1033]}}));Be(new Sa({id:"selectNextSuggestion",precondition:Je.and(gi.Visible,gi.MultipleSuggestions),handler:s=>s.selectNextSuggestion(),kbOpts:{weight:Al,kbExpr:$.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));Be(new Sa({id:"selectNextPageSuggestion",precondition:Je.and(gi.Visible,gi.MultipleSuggestions),handler:s=>s.selectNextPageSuggestion(),kbOpts:{weight:Al,kbExpr:$.textInputFocus,primary:12,secondary:[2060]}}));Be(new Sa({id:"selectLastSuggestion",precondition:Je.and(gi.Visible,gi.MultipleSuggestions),handler:s=>s.selectLastSuggestion()}));Be(new Sa({id:"selectPrevSuggestion",precondition:Je.and(gi.Visible,gi.MultipleSuggestions),handler:s=>s.selectPrevSuggestion(),kbOpts:{weight:Al,kbExpr:$.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));Be(new Sa({id:"selectPrevPageSuggestion",precondition:Je.and(gi.Visible,gi.MultipleSuggestions),handler:s=>s.selectPrevPageSuggestion(),kbOpts:{weight:Al,kbExpr:$.textInputFocus,primary:11,secondary:[2059]}}));Be(new Sa({id:"selectFirstSuggestion",precondition:Je.and(gi.Visible,gi.MultipleSuggestions),handler:s=>s.selectFirstSuggestion()}));Be(new Sa({id:"toggleSuggestionDetails",precondition:gi.Visible,handler:s=>s.toggleSuggestionDetails(),kbOpts:{weight:Al,kbExpr:$.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:xg,group:"right",order:1,when:Je.and(gi.DetailsVisible,gi.CanResolve),title:b("detail.more","show less")},{menuId:xg,group:"right",order:1,when:Je.and(gi.DetailsVisible.toNegated(),gi.CanResolve),title:b("detail.less","show more")}]}));Be(new Sa({id:"toggleExplainMode",precondition:gi.Visible,handler:s=>s.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));Be(new Sa({id:"toggleSuggestionFocus",precondition:gi.Visible,handler:s=>s.toggleSuggestionFocus(),kbOpts:{weight:Al,kbExpr:$.textInputFocus,primary:2570,mac:{primary:778}}}));Be(new Sa({id:"insertBestCompletion",precondition:Je.and($.textInputFocus,Je.equals("config.editor.tabCompletion","on"),zS.AtEnd,gi.Visible.toNegated(),c_.OtherSuggestions.toNegated(),Gs.InSnippetMode.toNegated()),handler:(s,e)=>{s.triggerSuggestAndAcceptBest($r(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:Al,primary:2}}));Be(new Sa({id:"insertNextSuggestion",precondition:Je.and($.textInputFocus,Je.equals("config.editor.tabCompletion","on"),c_.OtherSuggestions,gi.Visible.toNegated(),Gs.InSnippetMode.toNegated()),handler:s=>s.acceptNextSuggestion(),kbOpts:{weight:Al,kbExpr:$.textInputFocus,primary:2}}));Be(new Sa({id:"insertPrevSuggestion",precondition:Je.and($.textInputFocus,Je.equals("config.editor.tabCompletion","on"),c_.OtherSuggestions,gi.Visible.toNegated(),Gs.InSnippetMode.toNegated()),handler:s=>s.acceptPrevSuggestion(),kbOpts:{weight:Al,kbExpr:$.textInputFocus,primary:1026}}));We(class extends ot{constructor(){super({id:"editor.action.resetSuggestSize",label:b("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(s,e){var t;(t=ac.get(e))===null||t===void 0||t.resetWidgetSize()}});class Y8e extends ge{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new J,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new Xi(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(n=>{n.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(n=>{n.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const i=ac.get(this.editor);if(i){this._register(i.registerSelector({priority:100,select:(r,a,l)=>{const c=this.editor.getModel(),d=JI(c,this.suggestControllerPreselector());if(!d)return-1;const f=se.lift(a),g=l.map((_,C)=>{const S=qZ(i,f,_,this.isShiftKeyPressed),x=JI(c,S==null?void 0:S.normalizedInlineCompletion);if(!x)return;const L=Z8e(d.range,x.range)&&d.insertText.startsWith(x.insertText);return{index:C,valid:L,prefixLength:x.insertText.length,suggestItem:_}}).filter(_=>_&&_.valid),m=EX(g,ty(_=>_.prefixLength,pCe));return m?m.index:-1}}));let n=!1;const o=()=>{n||(n=!0,this._register(i.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(i.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(i.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(gt.once(i.model.onDidTrigger)(r=>{o()}))}this.update(this._isActive)}get state(){if(!!this._isActive)return{selectedItem:this._currentSuggestItemInfo}}update(e){const t=this.getSuggestItemInfo();let i=!1;Q8e(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,i=!0),this._isActive!==e&&(this._isActive=e,i=!0),i&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const e=ac.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(!!t)return qZ(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=ac.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=ac.get(this.editor);e&&e.forceRenderingAbove()}}function Z8e(s,e){return e.startLineNumber===s.startLineNumber&&e.startColumn===s.startColumn&&(e.endLineNumber<s.endLineNumber||e.endLineNumber===s.endLineNumber&&e.endColumn<=s.endColumn)}function Q8e(s,e){return s===e?!0:!s||!e?!1:s.completionItemKind===e.completionItemKind&&s.isSnippetText===e.isSnippetText&&T9e(s.normalizedInlineCompletion,e.normalizedInlineCompletion)}function qZ(s,e,t,i){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{completionItemKind:t.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:M.fromPositions(e,e),insertText:"",filterText:"",snippetInfo:void 0,additionalTextEdits:[]}};let{insertText:n}=t.completion,o=!1;if(t.completion.insertTextRules&4){const a=new Kg().parse(n),l=s.editor.getModel();if(a.children.length>100)return;YI.adjustWhitespace(l,e,a,!0,!0),n=a.toString(),o=!0}const r=s.getOverwriteInfo(t,i);return{isSnippetText:o,completionItemKind:t.completion.kind,normalizedInlineCompletion:{insertText:n,filterText:n,range:M.fromPositions(e.delta(0,-r.overwriteBefore),e.delta(0,Math.max(r.overwriteAfter,0))),snippetInfo:void 0,additionalTextEdits:[]}}}var X8e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},J8e=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},GZ=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let e8=class extends loe{constructor(e,t,i){super(e),this.cache=t,this.languageFeaturesService=i,this.suggestionInlineCompletionSource=this._register(new Y8e(this.editor,()=>{var n,o;return(o=(n=this.cache.value)===null||n===void 0?void 0:n.completions[0])===null||o===void 0?void 0:o.toLiveInlineCompletion()})),this.updateOperation=this._register(new tr),this.updateCacheSoon=this._register(new Xi(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{if(!this.editor.hasModel())return;this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const o=this.ghostText;o&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,eBe(o.parts.map(r=>r.lines.length-1)))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(n=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()})),this._register(ni(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(108).preview}updateCache(){return GZ(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItem)return;const t={text:e.selectedItem.normalizedInlineCompletion.insertText,range:e.selectedItem.normalizedInlineCompletion.range,isSnippetText:e.selectedItem.isSnippetText,completionKind:e.selectedItem.completionItemKind},i=this.editor.getPosition();if(e.selectedItem.isSnippetText||e.selectedItem.completionItemKind===27||e.selectedItem.completionItemKind===20||e.selectedItem.completionItemKind===23){this.cache.clear();return}const n=qs(r=>GZ(this,void 0,void 0,function*(){let a;try{a=yield doe(this.languageFeaturesService.inlineCompletionsProvider,i,this.editor.getModel(),{triggerKind:pl.Automatic,selectedSuggestionInfo:t},r)}catch(l){Yt(l);return}if(r.isCancellationRequested){a.dispose();return}this.cache.setValue(this.editor,a,pl.Automatic),this.onDidChangeEmitter.fire()})),o=new uoe(n,pl.Automatic);this.updateOperation.value=o,yield n,this.updateOperation.value===o&&this.updateOperation.clear()})}get ghostText(){var e,t,i;const n=this.isSuggestionPreviewEnabled(),o=this.editor.getModel(),r=JI(o,(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),a=this.suggestionInlineCompletionSource.state,l=JI(o,(i=a==null?void 0:a.selectedItem)===null||i===void 0?void 0:i.normalizedInlineCompletion),c=r&&l&&r.insertText.startsWith(l.insertText)&&r.range.equalsRange(l.range);if(!n&&!c)return;const d=c?r:l||r,f=c?d.insertText.length-l.insertText.length:0;return this.toGhostText(d,f)}toGhostText(e,t){const i=this.editor.getOptions().get(108).previewMode;return e?coe(e,this.editor.getModel(),i,this.editor.getPosition(),t)||new roe(e.range.endLineNumber,[],this.minReservedLineCount):void 0}};e8=X8e([J8e(2,ct)],e8);function eBe(s){return s.reduce((e,t)=>e+t,0)}var tBe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},iBe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},nBe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class sBe extends ge{constructor(){super(...arguments),this.onDidChangeEmitter=new J,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new tr)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?L9e(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let t8=class extends sBe{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.sharedCache=this._register(new oBe),this.suggestWidgetAdapterModel=this._register(this.instantiationService.createInstance(e8,this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(this.instantiationService.createInstance(G9,this.editor,this.sharedCache)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const i=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return i?i.parts.some(n=>e.containsPosition(new se(i.lineNumber,n.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(pl.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return nBe(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};t8=tBe([iBe(1,Zt)],t8);class oBe extends ge{constructor(){super(...arguments),this.onDidChangeEmitter=new J,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new tr)}get value(){return this.cache.value}setValue(e,t,i){this.cache.value=new O9e(t,e,()=>this.onDidChangeEmitter.fire(),i)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var rBe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},YZ=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},VF;const ZZ=(VF=window.trustedTypes)===null||VF===void 0?void 0:VF.createPolicy("editorGhostText",{createHTML:s=>s});let i8=class extends ge{constructor(e,t,i,n){super(),this.editor=e,this.model=t,this.instantiationService=i,this.languageService=n,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(lBe,this.editor)),this.additionalLinesWidget=this._register(new cBe(this.editor,this.languageService.languageIdCodec)),this.viewMoreContentWidget=void 0,this.replacementDecoration=this._register(new aBe(this.editor)),this._register(this.editor.onDidChangeConfiguration(o=>{(o.hasChanged(29)||o.hasChanged(107)||o.hasChanged(90)||o.hasChanged(85)||o.hasChanged(47)||o.hasChanged(46)||o.hasChanged(61))&&this.update()})),this._register(ni(()=>{var o;this.disposed=!0,this.update(),(o=this.viewMoreContentWidget)===null||o===void 0||o.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear(),this.replacementDecoration.clear();return}const i=new Array,n=new Array;function o(c,d){if(n.length>0){const f=n[n.length-1];d&&f.decorations.push(new pa(f.content.length+1,f.content.length+1+c[0].length,d,0)),f.content+=c[0],c=c.slice(1)}for(const f of c)n.push({content:f,decorations:d?[new pa(1,f.length+1,d,0)]:[]})}t instanceof aoe?this.replacementDecoration.setDecorations([{range:new M(t.lineNumber,t.columnStart,t.lineNumber,t.columnStart+t.length),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}]):this.replacementDecoration.setDecorations([]);const r=this.editor.getModel().getLineContent(t.lineNumber);let a,l=0;for(const c of t.parts){let d=c.lines;a===void 0?(i.push({column:c.column,text:d[0],preview:c.preview}),d=d.slice(1)):o([r.substring(l,c.column-1)],void 0),d.length>0&&(o(d,"ghost-text"),a===void 0&&c.column<=r.length&&(a=c.column)),l=c.column-1}a!==void 0&&o([r.substring(l)],void 0),this.partsWidget.setParts(t.lineNumber,i,a!==void 0?{column:a,length:r.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,n,t.additionalReservedLineCount),(e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0}renderViewMoreLines(e,t,i){const n=this.editor.getOption(46),o=document.createElement("div");o.className="suggest-preview-additional-widget",Fo(o,n);const r=document.createElement("span");r.className="content-spacer",r.append(t),o.append(r);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("\u23CE  "),o.append(a);const l=new Ae,c=document.createElement("div");return c.className="button suggest-preview-text",c.append(`+${i} lines\u2026`),l.add(Ps(c,"mousedown",d=>{var f;(f=this.model)===null||f===void 0||f.setExpanded(!0),d.preventDefault(),this.editor.focus()})),o.append(c),new dBe(this.editor,e,o,l)}};i8=rBe([YZ(2,Zt),YZ(3,Vn)],i8);class aBe{constructor(e){this.editor=e,this.decorationIds=[]}setDecorations(e){this.editor.changeDecorations(t=>{this.decorationIds=t.deltaDecorations(this.decorationIds,e)})}clear(){this.setDecorations([])}dispose(){this.clear()}}class lBe{constructor(e){this.editor=e,this.decorationIds=[]}dispose(){this.clear()}clear(){this.editor.changeDecorations(e=>{this.decorationIds=e.deltaDecorations(this.decorationIds,[])})}setParts(e,t,i){if(!this.editor.getModel())return;const o=new Array;i&&o.push({range:M.fromPositions(new se(e,i.column),new se(e,i.column+i.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.editor.changeDecorations(r=>{this.decorationIds=r.deltaDecorations(this.decorationIds,t.map(a=>({range:M.fromPositions(new se(e,a.column)),options:{description:"ghost-text",after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:Yc.Left},showIfCollapsed:!0}})).concat(o))})}}class cBe{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,i){const n=this.editor.getModel();if(!n)return;const{tabSize:o}=n.getOptions();this.editor.changeViewZones(r=>{this._viewZoneId&&(r.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,i);if(a>0){const l=document.createElement("div");uBe(l,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}}function uBe(s,e,t,i,n){const o=i.get(29),r=i.get(107),a="none",l=i.get(85),c=i.get(47),d=i.get(46),f=i.get(61),g=Rg(1e4);g.appendASCIIString('<div class="suggest-preview-text">');for(let C=0,S=t.length;C<S;C++){const x=t[C],L=x.content;g.appendASCIIString('<div class="view-line'),g.appendASCIIString('" style="top:'),g.appendASCIIString(String(C*f)),g.appendASCIIString('px;width:1000000px;">');const k=bN(L),T=h0(L),A=Os.createEmpty(L,n);uL(new ep(d.isMonospace&&!o,d.canUseHalfwidthRightwardsArrow,L,!1,k,T,0,A,x.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,r,a,l,c!==Va.OFF,null),g),g.appendASCIIString("</div>")}g.appendASCIIString("</div>"),Fo(s,d);const m=g.build(),_=ZZ?ZZ.createHTML(m):m;s.innerHTML=_}class dBe extends ge{constructor(e,t,i,n){super(),this.editor=e,this.position=t,this.domNode=i,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(n),this._register(ni(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}Cn((s,e)=>{const t=s.getColor(oke);t&&(e.addRule(`.monaco-editor .ghost-text-decoration { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${t.toString()} !important; }`));const i=s.getColor(rke);i&&(e.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${i.toString()}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${i.toString()}; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${i.toString()}; }`));const n=s.getColor(ske);n&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${n}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${n}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${n}; }`))});var voe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},n8=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},QR=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let Ks=class boe extends ge{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new tr),this.activeModelDidChangeEmitter=this._register(new J),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(i=>{i.hasChanged(108)&&this.updateModelController(),i.hasChanged(57)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(boe.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(108),t=this.editor.getOption(57);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(s8,this.editor):void 0,this.activeModelDidChangeEmitter.fire()}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,i;return((i=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||i===void 0?void 0:i.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return QR(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};Ks.inlineSuggestionVisible=new st("inlineSuggestionVisible",!1,b("inlineSuggestionVisible","Whether an inline suggestion is visible"));Ks.inlineSuggestionHasIndentation=new st("inlineSuggestionHasIndentation",!1,b("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));Ks.inlineSuggestionHasIndentationLessThanTabSize=new st("inlineSuggestionHasIndentationLessThanTabSize",!0,b("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));Ks.ID="editor.contrib.ghostTextController";Ks=voe([n8(1,Zt)],Ks);class hBe{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=Ks.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=Ks.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=Ks.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let s8=class extends ge{constructor(e,t,i){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.contextKeys=new hBe(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(t8,this.editor)),this.widget=this._register(this.instantiationService.createInstance(i8,this.editor,this.model)),this._register(ni(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,i=!0;const n=this.model.inlineCompletionsModel.ghostText;if(!!this.model.activeInlineCompletionsModel&&n&&n.parts.length>0){const{column:o,lines:r}=n.parts[0],a=r[0],l=this.editor.getModel().getLineIndentColumn(n.lineNumber);if(o<=l){let d=Lr(a);d===-1&&(d=a.length-1),t=d>0;const f=this.editor.getModel().getOptions().tabSize;i=ks.visibleColumnFromColumn(a,d+1,f)<f}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(i)}};s8=voe([n8(1,Zt),n8(2,jt)],s8);class $0 extends ot{constructor(){super({id:$0.ID,label:b("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:Je.and($.writable,Ks.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return QR(this,void 0,void 0,function*(){const i=Ks.get(t);i&&(i.showNextInlineCompletion(),t.focus())})}}$0.ID="editor.action.inlineSuggest.showNext";class j0 extends ot{constructor(){super({id:j0.ID,label:b("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:Je.and($.writable,Ks.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return QR(this,void 0,void 0,function*(){const i=Ks.get(t);i&&(i.showPreviousInlineCompletion(),t.focus())})}}j0.ID="editor.action.inlineSuggest.showPrevious";class fBe extends ot{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:b("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:$.writable})}run(e,t){return QR(this,void 0,void 0,function*(){const i=Ks.get(t);i&&i.trigger()})}}var gBe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ib=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};class pBe{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}get commands(){var e,t,i;return((i=(t=(e=this.controller.activeModel)===null||e===void 0?void 0:e.activeInlineCompletionsModel)===null||t===void 0?void 0:t.completionSession.value)===null||i===void 0?void 0:i.commands)||[]}}let o8=class{constructor(e,t,i,n,o,r,a){this._editor=e,this._commandService=t,this._menuService=i,this._contextKeyService=n,this._languageService=o,this._openerService=r,this.accessibilityService=a,this.hoverOrdinal=3}suggestHoverAnchor(e){const t=Ks.get(this._editor);if(!t)return null;const i=e.target;if(i.type===8){const n=i.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new ZE(1e3,this,M.fromPositions(n.positionBefore||n.position,n.positionBefore||n.position))}return i.type===7&&t.shouldShowHoverAt(i.range)?new ZE(1e3,this,i.range):i.type===6&&i.detail.mightBeForeignElement&&t.shouldShowHoverAt(i.range)?new ZE(1e3,this,i.range):null}computeSync(e,t){const i=Ks.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new pBe(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new Ae,n=t[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(e,n,i);const o=i.add(this._menuService.createMenu(G.InlineCompletionsActions,this._contextKeyService)),r=e.statusBar.addAction({label:b("showNextInlineSuggestion","Next"),commandId:$0.ID,run:()=>this._commandService.executeCommand($0.ID)}),a=e.statusBar.addAction({label:b("showPreviousInlineSuggestion","Previous"),commandId:j0.ID,run:()=>this._commandService.executeCommand(j0.ID)});e.statusBar.addAction({label:b("acceptInlineSuggestion","Accept"),commandId:XI,run:()=>this._commandService.executeCommand(XI)});const l=[r,a];for(const c of l)c.setEnabled(!1);n.hasMultipleSuggestions().then(c=>{for(const d of l)d.setEnabled(c)});for(const c of n.commands)e.statusBar.addAction({label:c.title,commandId:c.id,run:()=>this._commandService.executeCommand(c.id,...c.arguments||[])});for(const[c,d]of o.getActions())for(const f of d)f instanceof Pg&&e.statusBar.addAction({label:f.label,commandId:f.item.id,run:()=>this._commandService.executeCommand(f.item.id)});return i}renderScreenReaderText(e,t,i){var n,o;const r=Pe,a=r("div.hover-row.markdown-hover"),l=Se(a,r("div.hover-contents")),c=i.add(new ef({editor:this._editor},this._languageService,this._openerService)),d=g=>{i.add(c.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",e.onContentsChanged()}));const m=b("inlineSuggestionFollows","Suggestion:"),_=i.add(c.render(new Wr().appendText(m).appendCodeblock("text",g)));l.replaceChildren(_.element)},f=(o=(n=t.controller.activeModel)===null||n===void 0?void 0:n.inlineCompletionsModel)===null||o===void 0?void 0:o.ghostText;if(f){const g=this._editor.getModel().getLineContent(f.lineNumber);d(f.renderForScreenReader(g))}e.fragment.appendChild(a)}};o8=gBe([ib(1,fs),ib(2,L_),ib(3,jt),ib(4,Vn),ib(5,Ol),ib(6,nf)],o8);Ei(Ks.ID,Ks);We(fBe);We($0);We(j0);P_.register(o8);const Coe=Fs.bindToContribution(Ks.get),r8=new Coe({id:XI,precondition:Ks.inlineSuggestionVisible,handler(s){s.commit(),s.editor.focus()}});Be(r8);ya.registerKeybindingRule({primary:2,weight:200,id:r8.id,when:Je.and(r8.precondition,$.tabMovesFocus.toNegated(),Ks.inlineSuggestionHasIndentationLessThanTabSize)});Be(new Coe({id:"editor.action.inlineSuggest.hide",precondition:Ks.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(s){s.hide()}}));function la(s,e){let t=0;for(let i=0;i<s.length;i++)s.charAt(i)==="	"?t+=e:t++;return t}function ky(s,e,t){s=s<0?0:s;let i="";if(!t){const n=Math.floor(s/e);s=s%e;for(let o=0;o<n;o++)i+="	"}for(let n=0;n<s;n++)i+=" ";return i}var mBe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},_Be=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};function woe(s,e,t,i,n){if(s.getLineCount()===1&&s.getLineMaxColumn(1)===1)return[];const o=e.getLanguageConfiguration(s.getLanguageId()).indentationRules;if(!o)return[];for(i=Math.min(i,s.getLineCount());t<=i&&o.unIndentedLinePattern;){const S=s.getLineContent(t);if(!o.unIndentedLinePattern.test(S))break;t++}if(t>i-1)return[];const{tabSize:r,indentSize:a,insertSpaces:l}=s.getOptions(),c=(S,x)=>(x=x||1,_l.shiftIndent(S,S.length+x,r,a,l)),d=(S,x)=>(x=x||1,_l.unshiftIndent(S,S.length+x,r,a,l)),f=[];let g;const m=s.getLineContent(t);let _=m;if(n!=null){g=n;const S=on(m);_=g+m.substring(S.length),o.decreaseIndentPattern&&o.decreaseIndentPattern.test(_)&&(g=d(g),_=g+m.substring(S.length)),m!==_&&f.push(Nn.replaceMove(new et(t,1,t,S.length+1),YT(g,a,l)))}else g=on(m);let C=g;o.increaseIndentPattern&&o.increaseIndentPattern.test(_)?(C=c(C),g=c(g)):o.indentNextLinePattern&&o.indentNextLinePattern.test(_)&&(C=c(C)),t++;for(let S=t;S<=i;S++){const x=s.getLineContent(S),L=on(x),k=C+x.substring(L.length);o.decreaseIndentPattern&&o.decreaseIndentPattern.test(k)&&(C=d(C),g=d(g)),L!==C&&f.push(Nn.replaceMove(new et(S,1,S,L.length+1),YT(C,a,l))),!(o.unIndentedLinePattern&&o.unIndentedLinePattern.test(x))&&(o.increaseIndentPattern&&o.increaseIndentPattern.test(k)?(g=c(g),C=g):o.indentNextLinePattern&&o.indentNextLinePattern.test(k)?C=c(C):C=g)}return f}class XR extends ot{constructor(){super({id:XR.ID,label:b("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:$.writable})}run(e,t){const i=t.getModel();if(!i)return;const n=i.getOptions(),o=t.getSelection();if(!o)return;const r=new wBe(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}}XR.ID="editor.action.indentationToSpaces";class JR extends ot{constructor(){super({id:JR.ID,label:b("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:$.writable})}run(e,t){const i=t.getModel();if(!i)return;const n=i.getOptions(),o=t.getSelection();if(!o)return;const r=new yBe(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}}JR.ID="editor.action.indentationToTabs";class yoe extends ot{constructor(e,t){super(t),this.insertSpaces=e}run(e,t){const i=e.get(rf),n=e.get(Hn),o=t.getModel();if(!o)return;const r=n.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),a=[1,2,3,4,5,6,7,8].map(c=>({id:c.toString(),label:c.toString(),description:c===r.tabSize?b("configuredTabSize","Configured Tab Size"):void 0})),l=Math.min(o.getOptions().tabSize-1,7);setTimeout(()=>{i.pick(a,{placeHolder:b({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[l]}).then(c=>{c&&o&&!o.isDisposed()&&o.updateOptions({tabSize:parseInt(c.label,10),insertSpaces:this.insertSpaces})})},50)}}class e2 extends yoe{constructor(){super(!1,{id:e2.ID,label:b("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}e2.ID="editor.action.indentUsingTabs";class t2 extends yoe{constructor(){super(!0,{id:t2.ID,label:b("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}t2.ID="editor.action.indentUsingSpaces";class i2 extends ot{constructor(){super({id:i2.ID,label:b("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const i=e.get(Hn),n=t.getModel();if(!n)return;const o=i.getCreationOptions(n.getLanguageId(),n.uri,n.isForSimpleWidget);n.detectIndentation(o.insertSpaces,o.tabSize)}}i2.ID="editor.action.detectIndentation";class vBe extends ot{constructor(){super({id:"editor.action.reindentlines",label:b("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:$.writable})}run(e,t){const i=e.get(os),n=t.getModel();if(!n)return;const o=woe(n,i,1,n.getLineCount());o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class bBe extends ot{constructor(){super({id:"editor.action.reindentselectedlines",label:b("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:$.writable})}run(e,t){const i=e.get(os),n=t.getModel();if(!n)return;const o=t.getSelections();if(o===null)return;const r=[];for(const a of o){let l=a.startLineNumber,c=a.endLineNumber;if(l!==c&&a.endColumn===1&&c--,l===1){if(l===c)continue}else l--;const d=woe(n,i,l,c);r.push(...d)}r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}class CBe{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const i of e)i.range&&typeof i.text=="string"&&this._edits.push(i)}getEditOperations(e,t){for(const n of this._edits)t.addEditOperation(M.lift(n.range),n.text);let i=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}let $S=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new Ae,this.callOnModel=new Ae,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(9)<4||this.editor.getOption(50))&&(!this.editor.hasModel()||this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)})))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const i=this.editor.getModel();if(!i||!i.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const n=this.editor.getOption(9),{tabSize:o,indentSize:r,insertSpaces:a}=i.getOptions(),l=[],c={shiftIndent:m=>_l.shiftIndent(m,m.length+1,o,r,a),unshiftIndent:m=>_l.unshiftIndent(m,m.length+1,o,r,a)};let d=e.startLineNumber;for(;d<=e.endLineNumber;){if(this.shouldIgnoreLine(i,d)){d++;continue}break}if(d>e.endLineNumber)return;let f=i.getLineContent(d);if(!/\S/.test(f.substring(0,e.startColumn-1))){const m=ay(n,i,i.getLanguageId(),d,c,this._languageConfigurationService);if(m!==null){const _=on(f),C=la(m,o),S=la(_,o);if(C!==S){const x=ky(C,o,a);l.push({range:new M(d,1,d,_.length+1),text:x}),f=x+f.substr(_.length)}else{const x=Oee(i,d,this._languageConfigurationService);if(x===0||x===8)return}}}const g=d;for(;d<e.endLineNumber;){if(!/\S/.test(i.getLineContent(d+1))){d++;continue}break}if(d!==e.endLineNumber){const _=ay(n,{tokenization:{getLineTokens:C=>i.tokenization.getLineTokens(C),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(C,S)=>i.getLanguageIdAtPosition(C,S)},getLineContent:C=>C===g?f:i.getLineContent(C)},i.getLanguageId(),d+1,c,this._languageConfigurationService);if(_!==null){const C=la(_,o),S=la(on(i.getLineContent(d+1)),o);if(C!==S){const x=C-S;for(let L=d+1;L<=e.endLineNumber;L++){const k=i.getLineContent(L),T=on(k),O=la(T,o)+x,I=ky(O,o,a);I!==T&&l.push({range:new M(L,1,L,T.length+1),text:I})}}}}if(l.length>0){this.editor.pushUndoStop();const m=new CBe(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",m),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const i=e.getLineFirstNonWhitespaceColumn(t);if(i===0)return!0;const n=e.tokenization.getLineTokens(t);if(n.getCount()>0){const o=n.findTokenIndexAtOffset(i);if(o>=0&&n.getStandardTokenType(o)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};$S.ID="editor.contrib.autoIndentOnPaste";$S=mBe([_Be(1,os)],$S);function Soe(s,e,t,i){if(s.getLineCount()===1&&s.getLineMaxColumn(1)===1)return;let n="";for(let r=0;r<t;r++)n+=" ";const o=new RegExp(n,"gi");for(let r=1,a=s.getLineCount();r<=a;r++){let l=s.getLineFirstNonWhitespaceColumn(r);if(l===0&&(l=s.getLineMaxColumn(r)),l===1)continue;const c=new M(r,1,r,l),d=s.getValueInRange(c),f=i?d.replace(/\t/ig,n):d.replace(o,"	");e.addEditOperation(c,f)}}class wBe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Soe(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class yBe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Soe(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}Ei($S.ID,$S);We(XR);We(JR);We(e2);We(t2);We(i2);We(vBe);We(bBe);var eN=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class Loe{constructor(e,t){this.range=e,this.direction=t}}class GV{constructor(e,t,i){this.hint=e,this.anchor=t,this.provider=i,this._isResolved=!1}with(e){const t=new GV(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}resolve(e){return eN(this,void 0,void 0,function*(){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return yield this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),yield this._currentResolve}})}_doResolve(e){var t,i;return eN(this,void 0,void 0,function*(){try{const n=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t=n==null?void 0:n.tooltip)!==null&&t!==void 0?t:this.hint.tooltip,this.hint.label=(i=n==null?void 0:n.label)!==null&&i!==void 0?i:this.hint.label,this._isResolved=!0}catch(n){Ys(n),this._isResolved=!1}})}}class jS{constructor(e,t,i){this._disposables=new Ae,this.ranges=e,this.provider=new Set;const n=[];for(const[o,r]of t){this._disposables.add(o),this.provider.add(r);for(const a of o.hints){const l=i.validatePosition(a.position);let c="before";const d=jS._getRangeAtPosition(i,l);let f;d.getStartPosition().isBefore(l)?(f=M.fromPositions(d.getStartPosition(),l),c="after"):(f=M.fromPositions(l,d.getEndPosition()),c="before"),n.push(new GV(a,new Loe(f,c),r))}}this.items=n.sort((o,r)=>se.compare(o.hint.position,r.hint.position))}static create(e,t,i,n){return eN(this,void 0,void 0,function*(){const o=[],r=e.ordered(t).reverse().map(a=>i.map(l=>eN(this,void 0,void 0,function*(){try{const c=yield a.provideInlayHints(t,l,n);c!=null&&c.hints.length&&o.push([c,a])}catch(c){Ys(c)}})));if(yield Promise.all(r.flat()),n.isCancellationRequested||t.isDisposed())throw new Jg;return new jS(i,o,t)})}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const i=t.lineNumber,n=e.getWordAtPosition(t);if(n)return new M(i,n.startColumn,i,n.endColumn);e.tokenization.tokenizeIfCheap(i);const o=e.tokenization.getLineTokens(i),r=t.column-1,a=o.findTokenIndexAtOffset(r);let l=o.getStartOffset(a),c=o.getEndOffset(a);return c-l===1&&(l===r&&a>1?(l=o.getStartOffset(a-1),c=o.getEndOffset(a-1)):c===r&&a<o.getCount()-1&&(l=o.getStartOffset(a+1),c=o.getEndOffset(a+1))),new M(i,l+1,i,c+1)}}function SBe(s){return yt.from({scheme:Xt.command,path:s.id,query:s.arguments&&encodeURIComponent(JSON.stringify(s.arguments))}).toString()}var Ey=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};function LBe(s,e,t,i){var n;return Ey(this,void 0,void 0,function*(){const o=s.get(Yr),r=s.get(sf),a=s.get(fs),l=s.get(Zt),c=s.get(gs);if(yield i.item.resolve(ri.None),!i.part.location)return;const d=i.part.location,f=[],g=new Set(Dl.getMenuItems(G.EditorContext).map(_=>wb(_)?_.command.id:""));for(const _ of Sm.getEditorActions())_ instanceof cc&&g.has(_.id)&&f.push(new _a(_.id,_.label,void 0,!0,()=>Ey(this,void 0,void 0,function*(){const C=yield o.createModelReference(d.uri);try{yield l.invokeFunction(_.run.bind(_),e,new MS(C.object.textEditorModel,M.getStartPosition(d.range)))}finally{C.dispose()}})));if(i.part.command){const{command:_}=i.part;f.push(new Bo),f.push(new _a(_.id,_.title,void 0,!0,()=>Ey(this,void 0,void 0,function*(){var C;try{yield a.executeCommand(_.id,...(C=_.arguments)!==null&&C!==void 0?C:[])}catch(S){c.notify({severity:gte.Error,source:i.item.provider.displayName,message:S})}})))}const m=e.getOption(117);r.showContextMenu({domForShadowRoot:m&&(n=e.getDomNode())!==null&&n!==void 0?n:void 0,getAnchor:()=>{const _=Oo(t);return{x:_.left,y:_.top+_.height+8}},getActions:()=>f,onHide:()=>{e.focus()},autoSelectFirstItem:!0})})}function xBe(s,e,t,i){return Ey(this,void 0,void 0,function*(){const o=yield s.get(Yr).createModelReference(i.uri);yield t.invokeWithinContext(r=>Ey(this,void 0,void 0,function*(){const a=e.hasSideBySideModifier,l=r.get(jt),c=Gr.inPeekEditor.getValue(l),d=!a&&t.getOption(80)&&!c;return new FL({openToSide:a,openInPeek:d,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(r,t,{model:o.object.textEditorModel,position:M.getStartPosition(i.range)})})),o.dispose()})}var DBe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},nb=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},hb=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class tN{constructor(){this._entries=new tp(50)}get(e){const t=tN._key(e);return this._entries.get(t)}set(e,t){const i=tN._key(e);this._entries.set(i,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const xoe=bi("IInlayHintsCache");ki(xoe,tN,!0);class a8{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}class kBe{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}let u_=class l8{constructor(e,t,i,n,o,r,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=n,this._commandService=o,this._notificationService=r,this._instaService=a,this._disposables=new Ae,this._sessionDisposables=new Ae,this._decorationsMetadata=new Map,this._ruleFactory=new fL(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(129)&&this._update()})),this._update()}static get(e){var t;return(t=e.getContribution(l8.ID))!==null&&t!==void 0?t:void 0}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(129);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;const i=this._inlayHintsCache.get(t);i&&this._updateHintsDecorators([t.getFullModelRange()],i),this._sessionDisposables.add(ni(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let n;const o=new Set,r=new Xi(()=>hb(this,void 0,void 0,function*(){const a=Date.now();n==null||n.dispose(!0),n=new _o;const l=t.onWillDispose(()=>n==null?void 0:n.cancel());try{const c=n.token,d=yield jS.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),c);if(r.delay=this._debounceInfo.update(t,Date.now()-a),c.isCancellationRequested){d.dispose();return}for(const f of d.provider)typeof f.onDidChangeInlayHints=="function"&&!o.has(f)&&(o.add(f),this._sessionDisposables.add(f.onDidChangeInlayHints(()=>{r.isScheduled()||r.schedule()})));this._sessionDisposables.add(d),this._updateHintsDecorators(d.ranges,d.items),this._cacheHintsForFastRestore(t)}catch(c){Yt(c)}finally{n.dispose(),l.dispose()}}),this._debounceInfo.get(t));if(this._sessionDisposables.add(r),this._sessionDisposables.add(ni(()=>n==null?void 0:n.dispose(!0))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!r.isScheduled())&&r.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{const l=Math.max(r.delay,1250);r.schedule(l)})),e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(ag.getInstance().event(c=>{if(!this._editor.hasModel())return;const d=c.altKey&&c.ctrlKey?l:a;if(d!==this._activeRenderMode){this._activeRenderMode=d;const f=this._editor.getModel(),g=this._copyInlayHintsWithCurrentAnchor(f);this._updateHintsDecorators([f.getFullModelRange()],g),r.schedule(0)}}))}this._sessionDisposables.add(this._installDblClickGesture(()=>r.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new Ae,t=e.add(new xV(this._editor)),i=new Ae;return e.add(i),e.add(t.onMouseMoveOrRelevantKeyDown(n=>{const[o]=n,r=this._getInlayHintLabelPart(o),a=this._editor.getModel();if(!r||!a){i.clear();return}const l=new _o;i.add(ni(()=>l.dispose(!0))),r.item.resolve(l.token),this._activeInlayHintPart=r.part.command||r.part.location?new kBe(r,o.hasTriggerModifier):void 0;const c=r.item.hint.position.lineNumber,d=new M(c,1,c,a.getLineMaxColumn(c)),f=this._getInlineHintsForRange(d);this._updateHintsDecorators([d],f),i.add(ni(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([d],f)}))})),e.add(t.onCancel(()=>i.clear())),e.add(t.onExecute(n=>hb(this,void 0,void 0,function*(){const o=this._getInlayHintLabelPart(n);if(o){const r=o.part;r.location?this._instaService.invokeFunction(xBe,n,this._editor,r.location):L5.is(r.command)&&(yield this._invokeCommand(r.command,o.item))}}))),e}_getInlineHintsForRange(e){const t=new Set;for(const i of this._decorationsMetadata.values())e.containsRange(i.item.anchor.range)&&t.add(i.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(t=>hb(this,void 0,void 0,function*(){if(t.event.detail!==2)return;const i=this._getInlayHintLabelPart(t);if(!!i&&(t.event.preventDefault(),yield i.item.resolve(ri.None),Po(i.item.hint.textEdits))){const n=i.item.hint.textEdits.map(o=>Nn.replace(M.lift(o.range),o.text));this._editor.executeEdits("inlayHint.default",n),e()}}))}_installContextMenu(){return this._editor.onContextMenu(e=>hb(this,void 0,void 0,function*(){if(!(e.event.target instanceof HTMLElement))return;const t=this._getInlayHintLabelPart(e);t&&(yield this._instaService.invokeFunction(LBe,this._editor,e.event.target,t))}))}_getInlayHintLabelPart(e){var t;if(e.target.type!==6)return;const i=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;if(i instanceof Ym&&(i==null?void 0:i.attachedData)instanceof a8)return i.attachedData}_invokeCommand(e,t){var i;return hb(this,void 0,void 0,function*(){try{yield this._commandService.executeCommand(e.id,...(i=e.arguments)!==null&&i!==void 0?i:[])}catch(n){this._notificationService.notify({severity:gte.Error,source:t.provider.displayName,message:n})}})}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[i,n]of this._decorationsMetadata){if(t.has(n.item))continue;const o=e.getDecorationRange(i);if(o){const r=new Loe(o,n.item.anchor.direction),a=n.item.with({anchor:r});t.set(n.item,a)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),i=this._editor.getVisibleRangesPlusViewportAboveBelow(),n=[];for(const o of i.sort(M.compareRangesUsingStarts)){const r=t.validateRange(new M(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));n.length===0||!M.areIntersectingOrTouching(n[n.length-1],r)?n.push(r):n[n.length-1]=M.plusRange(n[n.length-1],r)}return n}_updateHintsDecorators(e,t){var i,n;const o=[],r=(_,C,S,x,L)=>{const k={content:S,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:C.className,cursorStops:x,attachedData:L};o.push({item:_,classNameRef:C,decoration:{range:_.anchor.range,options:{description:"InlayHint",showIfCollapsed:_.anchor.range.isEmpty(),collapseOnReplaceEdit:!_.anchor.range.isEmpty(),stickiness:0,[_.anchor.direction]:this._activeRenderMode===0?k:void 0}}})},a=(_,C)=>{const S=this._ruleFactory.createClassNameRef({width:`${l/3|0}px`,display:"inline-block"});r(_,S,"\u200A",C?Yc.Right:Yc.None)},{fontSize:l,fontFamily:c,padding:d,isUniform:f}=this._getLayoutInfo(),g="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(g,c);for(const _ of t){_.hint.paddingLeft&&a(_,!1);const C=typeof _.hint.label=="string"?[{label:_.hint.label}]:_.hint.label;for(let S=0;S<C.length;S++){const x=C[S],L=S===0,k=S===C.length-1,T={fontSize:`${l}px`,fontFamily:`var(${g}), ${ma.fontFamily}`,verticalAlign:f?"baseline":"middle"};Po(_.hint.textEdits)&&(T.cursor="default"),this._fillInColors(T,_.hint),(x.command||x.location)&&((i=this._activeInlayHintPart)===null||i===void 0?void 0:i.part.item)===_&&this._activeInlayHintPart.part.index===S&&(T.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(T.color=Yn($B),T.cursor="pointer")),d&&(L&&k?(T.padding=`1px ${Math.max(1,l/4)|0}px`,T.borderRadius=`${l/4|0}px`):L?(T.padding=`1px 0 1px ${Math.max(1,l/4)|0}px`,T.borderRadius=`${l/4|0}px 0 0 ${l/4|0}px`):k?(T.padding=`1px ${Math.max(1,l/4)|0}px 1px 0`,T.borderRadius=`0 ${l/4|0}px ${l/4|0}px 0`):T.padding="1px 0 1px 0"),r(_,this._ruleFactory.createClassNameRef(T),EBe(x.label),k&&!_.hint.paddingRight?Yc.Right:Yc.None,new a8(_,S))}if(_.hint.paddingRight&&a(_,!0),o.length>l8._MAX_DECORATORS)break}const m=[];for(const _ of e)for(const{id:C}of(n=this._editor.getDecorationsInRange(_))!==null&&n!==void 0?n:[]){const S=this._decorationsMetadata.get(C);S&&(m.push(C),S.classNameRef.dispose(),this._decorationsMetadata.delete(C))}this._editor.changeDecorations(_=>{const C=_.deltaDecorations(m,o.map(S=>S.decoration));for(let S=0;S<C.length;S++){const x=o[S];this._decorationsMetadata.set(C[S],x)}})}_fillInColors(e,t){t.kind===xT.Parameter?(e.backgroundColor=Yn(yxe),e.color=Yn(wxe)):t.kind===xT.Type?(e.backgroundColor=Yn(Cxe),e.color=Yn(bxe)):(e.backgroundColor=Yn(Fh),e.color=Yn(Ph))}_getLayoutInfo(){const e=this._editor.getOption(129),t=e.padding,i=this._editor.getOption(48),n=this._editor.getOption(45);let o=e.fontSize;(!o||o<5||o>i)&&(o=i);const r=e.fontFamily||n;return{fontSize:o,fontFamily:r,padding:t,isUniform:!t&&r===n&&o===i}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}};u_.ID="editor.contrib.InlayHints";u_._MAX_DECORATORS=1500;u_=DBe([nb(1,ct),nb(2,Pl),nb(3,xoe),nb(4,fs),nb(5,gs),nb(6,Zt)],u_);function EBe(s){const e="\xA0";return s.replace(/[ \t]/g,e)}Li.registerCommand("_executeInlayHintProvider",(s,...e)=>hb(void 0,void 0,void 0,function*(){const[t,i]=e;Qi(yt.isUri(t)),Qi(M.isIRange(i));const{inlayHintsProvider:n}=s.get(ct),o=yield s.get(Yr).createModelReference(t);try{const r=yield jS.create(n,o.object.textEditorModel,[M.lift(i)],ri.None),a=r.items.map(l=>l.hint);return setTimeout(()=>r.dispose(),0),a}finally{o.dispose()}}));var TBe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Dw=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},QZ=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})},IBe=globalThis&&globalThis.__asyncValues||function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],t;return e?e.call(s):(s=typeof __values=="function"?__values(s):s[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=s[o]&&function(r){return new Promise(function(a,l){r=s[o](r),n(a,l,r.done,r.value)})}}function n(o,r,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},r)}};class XZ extends ZE{constructor(e,t){super(10,t,e.item.anchor.range),this.part=e}}let c8=class extends jI{constructor(e,t,i,n,o,r){super(e,t,i,n,r),this._resolverService=o,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;if(!u_.get(this._editor)||e.target.type!==6)return null;const n=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;return n instanceof Ym&&n.attachedData instanceof a8?new XZ(n.attachedData,this):null}computeSync(){return[]}computeAsync(e,t,i){return e instanceof XZ?new us(n=>QZ(this,void 0,void 0,function*(){var o,r;const{part:a}=e;if(yield a.item.resolve(i),i.isCancellationRequested)return;let l;typeof a.item.hint.tooltip=="string"?l=new Wr().appendText(a.item.hint.tooltip):a.item.hint.tooltip&&(l=a.item.hint.tooltip),l&&n.emitOne(new td(this,e.range,[l],0)),Po(a.item.hint.textEdits)&&n.emitOne(new td(this,e.range,[new Wr().appendText(b("hint.dbl","Double click to insert"))],10001));let c;if(typeof a.part.tooltip=="string"?c=new Wr().appendText(a.part.tooltip):a.part.tooltip&&(c=a.part.tooltip),c&&n.emitOne(new td(this,e.range,[c],1)),a.part.location||a.part.command){let m;const C=this._editor.getOption(72)==="altKey"?mi?b("links.navigate.kb.meta.mac","cmd + click"):b("links.navigate.kb.meta","ctrl + click"):mi?b("links.navigate.kb.alt.mac","option + click"):b("links.navigate.kb.alt","alt + click");a.part.location&&a.part.command?m=new Wr().appendText(b("hint.defAndCommand","Go to Definition ({0}), right click for more",C)):a.part.location?m=new Wr().appendText(b("hint.def","Go to Definition ({0})",C)):a.part.command&&(m=new Wr(`[${b("hint.cmd","Execute Command")}](${SBe(a.part.command)} "${a.part.command.title}") (${C})`,{isTrusted:!0})),m&&n.emitOne(new td(this,e.range,[m],1e4))}const d=yield this._resolveInlayHintLabelPartHover(a,i);try{for(var f=IBe(d),g;g=yield f.next(),!g.done;){const m=g.value;n.emitOne(m)}}catch(m){o={error:m}}finally{try{g&&!g.done&&(r=f.return)&&(yield r.call(f))}finally{if(o)throw o.error}}})):us.EMPTY}_resolveInlayHintLabelPartHover(e,t){return QZ(this,void 0,void 0,function*(){if(!e.part.location)return us.EMPTY;const{uri:i,range:n}=e.part.location,o=yield this._resolverService.createModelReference(i);try{const r=o.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(r)?PV(this._languageFeaturesService.hoverProvider,r,new se(n.startLineNumber,n.startColumn),t).filter(a=>!T0(a.hover.contents)).map(a=>new td(this,e.item.anchor.range,a.hover.contents,2+a.ordinal)):us.EMPTY}finally{o.dispose()}})}};c8=TBe([Dw(1,Vn),Dw(2,Ol),Dw(3,Ai),Dw(4,Yr),Dw(5,ct)],c8);Ei(u_.ID,u_);P_.register(c8);class NBe{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new et(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new et(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}}var RBe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ABe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let Yg=class u8{constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}static get(e){return e.getContribution(u8.ID)}dispose(){}run(e,t){this.currentRequest&&this.currentRequest.cancel();const i=this.editor.getSelection(),n=this.editor.getModel();if(!n||!i)return;let o=i;if(o.startLineNumber!==o.endLineNumber)return;const r=new TS(this.editor,5),a=n.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=qs(l=>this.editorWorkerService.navigateValueSet(a,o,t)),this.currentRequest.then(l=>{if(!l||!l.range||!l.value||!r.validate(this.editor))return;const c=M.lift(l.range);let d=l.range;const f=l.value.length-(o.endColumn-o.startColumn);d={startLineNumber:d.startLineNumber,startColumn:d.startColumn,endLineNumber:d.endLineNumber,endColumn:d.startColumn+l.value.length},f>1&&(o=new et(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn+f-1));const g=new NBe(c,o,l.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,g),this.editor.pushUndoStop(),this.decorations.set([{range:d,options:u8.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=Ag(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(Yt)}).catch(Yt)):Promise.resolve(void 0)}};Yg.ID="editor.contrib.inPlaceReplaceController";Yg.DECORATION=Gt.register({description:"in-place-replace",className:"valueSetReplacement"});Yg=RBe([ABe(1,Ml)],Yg);class MBe extends ot{constructor(){super({id:"editor.action.inPlaceReplace.up",label:b("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:3154,weight:100}})}run(e,t){const i=Yg.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}}class OBe extends ot{constructor(){super({id:"editor.action.inPlaceReplace.down",label:b("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:3156,weight:100}})}run(e,t){const i=Yg.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}}Ei(Yg.ID,Yg);We(MBe);We(OBe);Cn((s,e)=>{const t=s.getColor(Eee);t&&e.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${t}; }`)});class PBe extends ot{constructor(){super({id:"expandLineSelection",label:b("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:$.textInputFocus,primary:2090}})}run(e,t,i){if(i=i||{},!t.hasModel())return;const n=t._getViewModel();n.model.pushStackElement(),n.setCursorStates(i.source,3,Js.expandLineSelection(n,n.getCursorStates())),n.revealPrimaryCursor(i.source,!0)}}We(PBe);class FBe{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){const i=BBe(e,this._cursors);for(let n=0,o=i.length;n<o;n++){const r=i[n];t.addEditOperation(r.range,r.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function BBe(s,e){e.sort((r,a)=>r.lineNumber===a.lineNumber?r.column-a.column:r.lineNumber-a.lineNumber);for(let r=e.length-2;r>=0;r--)e[r].lineNumber===e[r+1].lineNumber&&e.splice(r,1);const t=[];let i=0,n=0;const o=e.length;for(let r=1,a=s.getLineCount();r<=a;r++){const l=s.getLineContent(r),c=l.length+1;let d=0;if(n<o&&e[n].lineNumber===r&&(d=e[n].column,n++,d===c)||l.length===0)continue;const f=dd(l);let g=0;if(f===-1)g=1;else if(f!==l.length-1)g=f+2;else continue;g=Math.max(d,g),t[i++]=Nn.delete(new M(r,g,r,c))}return t}class Doe{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const n=[];for(let r=i.startLineNumber;r<=i.endLineNumber;r++)n.push(e.getLineContent(r));const o=n.join(`
`);o===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new M(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new M(i.startLineNumber,1,i.startLineNumber,1),o+`
`):t.addEditOperation(new M(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+o),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let n=i.startLineNumber,o=i.startColumn,r=i.endLineNumber,a=i.endColumn;this._startLineNumberDelta!==0&&(n=n+this._startLineNumberDelta,o=1),this._endLineNumberDelta!==0&&(r=r+this._endLineNumberDelta,a=1),i=et.createWithDirection(n,o,r,a,this._selectionDirection)}return i}}var VBe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},WBe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let d8=class{constructor(e,t,i,n){this._languageConfigurationService=n,this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const i=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===i){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let n=this._selection;n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const{tabSize:o,indentSize:r,insertSpaces:a}=e.getOptions(),l=this.buildIndentConverter(o,r,a),c={tokenization:{getLineTokens:d=>e.tokenization.getLineTokens(d),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(d,f)=>e.getLanguageIdAtPosition(d,f)},getLineContent:null};if(n.startLineNumber===n.endLineNumber&&e.getLineMaxColumn(n.startLineNumber)===1){const d=n.startLineNumber,f=this._isMovingDown?d+1:d-1;e.getLineMaxColumn(f)===1?t.addEditOperation(new M(1,1,1,1),null):(t.addEditOperation(new M(d,1,d,1),e.getLineContent(f)),t.addEditOperation(new M(f,1,f,e.getLineMaxColumn(f)),null)),n=new et(f,1,f,1)}else{let d,f;if(this._isMovingDown){d=n.endLineNumber+1,f=e.getLineContent(d),t.addEditOperation(new M(d-1,e.getLineMaxColumn(d-1),d,e.getLineMaxColumn(d)),null);let g=f;if(this.shouldAutoIndent(e,n)){const m=this.matchEnterRule(e,l,o,d,n.startLineNumber-1);if(m!==null){const C=on(e.getLineContent(d)),S=m+la(C,o);g=ky(S,o,a)+this.trimLeft(f)}else{c.getLineContent=S=>S===n.startLineNumber?e.getLineContent(d):e.getLineContent(S);const C=ay(this._autoIndent,c,e.getLanguageIdAtPosition(d,1),n.startLineNumber,l,this._languageConfigurationService);if(C!==null){const S=on(e.getLineContent(d)),x=la(C,o),L=la(S,o);x!==L&&(g=ky(x,o,a)+this.trimLeft(f))}}t.addEditOperation(new M(n.startLineNumber,1,n.startLineNumber,1),g+`
`);const _=this.matchEnterRuleMovingDown(e,l,o,n.startLineNumber,d,g);if(_!==null)_!==0&&this.getIndentEditsOfMovingBlock(e,t,n,o,a,_);else{c.getLineContent=S=>S===n.startLineNumber?g:S>=n.startLineNumber+1&&S<=n.endLineNumber+1?e.getLineContent(S-1):e.getLineContent(S);const C=ay(this._autoIndent,c,e.getLanguageIdAtPosition(d,1),n.startLineNumber+1,l,this._languageConfigurationService);if(C!==null){const S=on(e.getLineContent(n.startLineNumber)),x=la(C,o),L=la(S,o);if(x!==L){const k=x-L;this.getIndentEditsOfMovingBlock(e,t,n,o,a,k)}}}}else t.addEditOperation(new M(n.startLineNumber,1,n.startLineNumber,1),g+`
`)}else if(d=n.startLineNumber-1,f=e.getLineContent(d),t.addEditOperation(new M(d,1,d+1,1),null),t.addEditOperation(new M(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+f),this.shouldAutoIndent(e,n)){c.getLineContent=m=>m===d?e.getLineContent(n.startLineNumber):e.getLineContent(m);const g=this.matchEnterRule(e,l,o,n.startLineNumber,n.startLineNumber-2);if(g!==null)g!==0&&this.getIndentEditsOfMovingBlock(e,t,n,o,a,g);else{const m=ay(this._autoIndent,c,e.getLanguageIdAtPosition(n.startLineNumber,1),d,l,this._languageConfigurationService);if(m!==null){const _=on(e.getLineContent(n.startLineNumber)),C=la(m,o),S=la(_,o);if(C!==S){const x=C-S;this.getIndentEditsOfMovingBlock(e,t,n,o,a,x)}}}}}this._selectionId=t.trackSelection(n)}buildIndentConverter(e,t,i){return{shiftIndent:n=>_l.shiftIndent(n,n.length+1,e,t,i),unshiftIndent:n=>_l.unshiftIndent(n,n.length+1,e,t,i)}}parseEnterResult(e,t,i,n,o){if(o){let r=o.indentation;o.indentAction===ds.None||o.indentAction===ds.Indent?r=o.indentation+o.appendText:o.indentAction===ds.IndentOutdent?r=o.indentation:o.indentAction===ds.Outdent&&(r=t.unshiftIndent(o.indentation)+o.appendText);const a=e.getLineContent(n);if(this.trimLeft(a).indexOf(this.trimLeft(r))>=0){const l=on(e.getLineContent(n));let c=on(r);const d=Oee(e,n,this._languageConfigurationService);d!==null&&d&2&&(c=t.unshiftIndent(c));const f=la(c,i),g=la(l,i);return f-g}}return null}matchEnterRuleMovingDown(e,t,i,n,o,r){if(dd(r)>=0){const a=e.getLineMaxColumn(o),l=Gb(this._autoIndent,e,new M(o,a,o,a),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,l)}else{let a=n-1;for(;a>=1;){const d=e.getLineContent(a);if(dd(d)>=0)break;a--}if(a<1||n>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=Gb(this._autoIndent,e,new M(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,c)}}matchEnterRule(e,t,i,n,o,r){let a=o;for(;a>=1;){let d;if(a===o&&r!==void 0?d=r:d=e.getLineContent(a),dd(d)>=0)break;a--}if(a<1||n>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=Gb(this._autoIndent,e,new M(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,c)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const i=e.getLanguageIdAtPosition(t.startLineNumber,1),n=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(i!==n||this._languageConfigurationService.getLanguageConfiguration(i).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,i,n,o,r){for(let a=i.startLineNumber;a<=i.endLineNumber;a++){const l=e.getLineContent(a),c=on(l),f=la(c,n)+r,g=ky(f,n,o);g!==c&&(t.addEditOperation(new M(a,1,a,c.length+1),g),a===i.endLineNumber&&i.endColumn<=c.length+1&&g===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}};d8=VBe([WBe(3,os)],d8);class kg{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return kg._COLLATOR||(kg._COLLATOR=new Intl.Collator),kg._COLLATOR}getEditOperations(e,t){const i=HBe(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(e===null)return!1;const n=koe(e,t,i);if(!n)return!1;for(let o=0,r=n.before.length;o<r;o++)if(n.before[o]!==n.after[o])return!0;return!1}}kg._COLLATOR=null;function koe(s,e,t){const i=e.startLineNumber;let n=e.endLineNumber;if(e.endColumn===1&&n--,i>=n)return null;const o=[];for(let a=i;a<=n;a++)o.push(s.getLineContent(a));let r=o.slice(0);return r.sort(kg.getCollator().compare),t===!0&&(r=r.reverse()),{startLineNumber:i,endLineNumber:n,before:o,after:r}}function HBe(s,e,t){const i=koe(s,e,t);return i?Nn.replace(new M(i.startLineNumber,1,i.endLineNumber,s.getLineMaxColumn(i.endLineNumber)),i.after.join(`
`)):null}class Eoe extends ot{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const i=t.getSelections().map((r,a)=>({selection:r,index:a,ignore:!1}));i.sort((r,a)=>M.compareRangesUsingStarts(r.selection,a.selection));let n=i[0];for(let r=1;r<i.length;r++){const a=i[r];n.selection.endLineNumber===a.selection.startLineNumber&&(n.index<a.index?a.ignore=!0:(n.ignore=!0,n=a))}const o=[];for(const r of i)o.push(new Doe(r.selection,this.down,r.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class zBe extends Eoe{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:b("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:G.MenubarSelectionMenu,group:"2_line",title:b({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class UBe extends Eoe{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:b("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:G.MenubarSelectionMenu,group:"2_line",title:b({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class $Be extends ot{constructor(){super({id:"editor.action.duplicateSelection",label:b("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:$.writable,menuOpts:{menuId:G.MenubarSelectionMenu,group:"2_line",title:b({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;const n=[],o=t.getSelections(),r=t.getModel();for(const a of o)if(a.isEmpty())n.push(new Doe(a,!0));else{const l=new et(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);n.push(new Ake(l,r.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class Toe extends ot{constructor(e,t){super(t),this.down=e}run(e,t){const i=e.get(os),n=[],o=t.getSelections()||[],r=t.getOption(9);for(const a of o)n.push(new d8(a,this.down,r,i));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class jBe extends Toe{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:b("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:G.MenubarSelectionMenu,group:"2_line",title:b({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class KBe extends Toe{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:b("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:G.MenubarSelectionMenu,group:"2_line",title:b({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class Ioe extends ot{constructor(e,t){super(t),this.descending=e}run(e,t){const i=t.getSelections()||[];for(const o of i)if(!kg.canRun(t.getModel(),o,this.descending))return;const n=[];for(let o=0,r=i.length;o<r;o++)n[o]=new kg(i[o],this.descending);t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class qBe extends Ioe{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:b("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:$.writable})}}class GBe extends Ioe{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:b("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:$.writable})}}class YBe extends ot{constructor(){super({id:"editor.action.removeDuplicateLines",label:b("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:$.writable})}run(e,t){if(!t.hasModel())return;const i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;const n=[],o=[];let r=0;for(const a of t.getSelections()){const l=new Set,c=[];for(let m=a.startLineNumber;m<=a.endLineNumber;m++){const _=i.getLineContent(m);l.has(_)||(c.push(_),l.add(_))}const d=new et(a.startLineNumber,1,a.endLineNumber,i.getLineMaxColumn(a.endLineNumber)),f=a.startLineNumber-r,g=new et(f,1,f+c.length-1,c[c.length-1].length);n.push(Nn.replace(d,c.join(`
`))),o.push(g),r+=a.endLineNumber-a.startLineNumber+1-c.length}t.pushUndoStop(),t.executeEdits(this.id,n,o),t.pushUndoStop()}}class n2 extends ot{constructor(){super({id:n2.ID,label:b("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:Is(2089,2102),weight:100}})}run(e,t,i){let n=[];i.reason==="auto-save"&&(n=(t.getSelections()||[]).map(a=>new se(a.positionLineNumber,a.positionColumn)));const o=t.getSelection();if(o===null)return;const r=new FBe(o,n);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop()}}n2.ID="editor.action.trimTrailingWhitespace";class ZBe extends ot{constructor(){super({id:"editor.action.deleteLines",label:b("lines.delete","Delete Line"),alias:"Delete Line",precondition:$.writable,kbOpts:{kbExpr:$.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const i=this._getLinesToRemove(t),n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let o=0;const r=[],a=[];for(let l=0,c=i.length;l<c;l++){const d=i[l];let f=d.startLineNumber,g=d.endLineNumber,m=1,_=n.getLineMaxColumn(g);g<n.getLineCount()?(g+=1,_=1):f>1&&(f-=1,m=n.getLineMaxColumn(f)),r.push(Nn.replace(new et(f,m,g,_),"")),a.push(new et(f-o,d.positionColumn,f-o,d.positionColumn)),o+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,a),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(o=>{let r=o.endLineNumber;return o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(r-=1),{startLineNumber:o.startLineNumber,selectionStartColumn:o.selectionStartColumn,endLineNumber:r,positionColumn:o.positionColumn}});t.sort((o,r)=>o.startLineNumber===r.startLineNumber?o.endLineNumber-r.endLineNumber:o.startLineNumber-r.startLineNumber);const i=[];let n=t[0];for(let o=1;o<t.length;o++)n.endLineNumber+1>=t[o].startLineNumber?n.endLineNumber=t[o].endLineNumber:(i.push(n),n=t[o]);return i.push(n),i}}class QBe extends ot{constructor(){super({id:"editor.action.indentLines",label:b("lines.indent","Indent Line"),alias:"Indent Line",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:2137,weight:100}})}run(e,t){const i=t._getViewModel();!i||(t.pushUndoStop(),t.executeCommands(this.id,In.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class XBe extends ot{constructor(){super({id:"editor.action.outdentLines",label:b("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:2135,weight:100}})}run(e,t){Yb.Outdent.runEditorCommand(e,t,null)}}class JBe extends ot{constructor(){super({id:"editor.action.insertLineBefore",label:b("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:3075,weight:100}})}run(e,t){const i=t._getViewModel();!i||(t.pushUndoStop(),t.executeCommands(this.id,In.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}}class e6e extends ot{constructor(){super({id:"editor.action.insertLineAfter",label:b("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:2051,weight:100}})}run(e,t){const i=t._getViewModel();!i||(t.pushUndoStop(),t.executeCommands(this.id,In.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}}class Noe extends ot{run(e,t){if(!t.hasModel())return;const i=t.getSelection(),n=this._getRangesToDelete(t),o=[];for(let l=0,c=n.length-1;l<c;l++){const d=n[l],f=n[l+1];M.intersectRanges(d,f)===null?o.push(d):n[l+1]=M.plusRange(d,f)}o.push(n[n.length-1]);const r=this._getEndCursorState(i,o),a=o.map(l=>Nn.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,r),t.pushUndoStop()}}class t6e extends Noe{constructor(){super({id:"deleteAllLeft",label:b("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:$.writable,kbOpts:{kbExpr:$.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null;const n=[];let o=0;return t.forEach(r=>{let a;if(r.endColumn===1&&o>0){const l=r.startLineNumber-o;a=new et(l,r.startColumn,l,r.startColumn)}else a=new et(r.startLineNumber,r.startColumn,r.startLineNumber,r.startColumn);o+=r.endLineNumber-r.startLineNumber,r.intersectRanges(e)?i=a:n.push(a)}),i&&n.unshift(i),n}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let i=t;const n=e.getModel();return n===null?[]:(i.sort(M.compareRangesUsingStarts),i=i.map(o=>{if(o.isEmpty())if(o.startColumn===1){const r=Math.max(1,o.startLineNumber-1),a=o.startLineNumber===1?1:n.getLineContent(r).length+1;return new M(r,a,o.startLineNumber,1)}else return new M(o.startLineNumber,1,o.startLineNumber,o.startColumn);else return new M(o.startLineNumber,1,o.endLineNumber,o.endColumn)}),i)}}class i6e extends Noe{constructor(){super({id:"deleteAllRight",label:b("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:$.writable,kbOpts:{kbExpr:$.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null;const n=[];for(let o=0,r=t.length,a=0;o<r;o++){const l=t[o],c=new et(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?i=c:n.push(c)}return i&&n.unshift(i),n}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const i=e.getSelections();if(i===null)return[];const n=i.map(o=>{if(o.isEmpty()){const r=t.getLineMaxColumn(o.startLineNumber);return o.startColumn===r?new M(o.startLineNumber,o.startColumn,o.startLineNumber+1,1):new M(o.startLineNumber,o.startColumn,o.startLineNumber,r)}return o});return n.sort(M.compareRangesUsingStarts),n}}class n6e extends ot{constructor(){super({id:"editor.action.joinLines",label:b("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:$.writable,kbOpts:{kbExpr:$.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const i=t.getSelections();if(i===null)return;let n=t.getSelection();if(n===null)return;i.sort(M.compareRangesUsingStarts);const o=[],r=i.reduce((g,m)=>g.isEmpty()?g.endLineNumber===m.startLineNumber?(n.equalsSelection(g)&&(n=m),m):m.startLineNumber>g.endLineNumber+1?(o.push(g),m):new et(g.startLineNumber,g.startColumn,m.endLineNumber,m.endColumn):m.startLineNumber>g.endLineNumber?(o.push(g),m):new et(g.startLineNumber,g.startColumn,m.endLineNumber,m.endColumn));o.push(r);const a=t.getModel();if(a===null)return;const l=[],c=[];let d=n,f=0;for(let g=0,m=o.length;g<m;g++){const _=o[g],C=_.startLineNumber,S=1;let x=0,L,k;const T=a.getLineContent(_.endLineNumber).length-_.endColumn;if(_.isEmpty()||_.startLineNumber===_.endLineNumber){const I=_.getStartPosition();I.lineNumber<a.getLineCount()?(L=C+1,k=a.getLineMaxColumn(L)):(L=I.lineNumber,k=a.getLineMaxColumn(I.lineNumber))}else L=_.endLineNumber,k=a.getLineMaxColumn(L);let A=a.getLineContent(C);for(let I=C+1;I<=L;I++){const R=a.getLineContent(I),B=a.getLineFirstNonWhitespaceColumn(I);if(B>=1){let z=!0;A===""&&(z=!1),z&&(A.charAt(A.length-1)===" "||A.charAt(A.length-1)==="	")&&(z=!1,A=A.replace(/[\s\uFEFF\xA0]+$/g," "));const q=R.substr(B-1);A+=(z?" ":"")+q,z?x=q.length+1:x=q.length}else x=0}const O=new M(C,S,L,k);if(!O.isEmpty()){let I;_.isEmpty()?(l.push(Nn.replace(O,A)),I=new et(O.startLineNumber-f,A.length-x+1,C-f,A.length-x+1)):_.startLineNumber===_.endLineNumber?(l.push(Nn.replace(O,A)),I=new et(_.startLineNumber-f,_.startColumn,_.endLineNumber-f,_.endColumn)):(l.push(Nn.replace(O,A)),I=new et(_.startLineNumber-f,_.startColumn,_.startLineNumber-f,A.length-T)),M.intersectRanges(O,n)!==null?d=I:c.push(I)}f+=O.endLineNumber-O.startLineNumber}c.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}}class s6e extends ot{constructor(){super({id:"editor.action.transpose",label:b("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:$.writable})}run(e,t){const i=t.getSelections();if(i===null)return;const n=t.getModel();if(n===null)return;const o=[];for(let r=0,a=i.length;r<a;r++){const l=i[r];if(!l.isEmpty())continue;const c=l.getStartPosition(),d=n.getLineMaxColumn(c.lineNumber);if(c.column>=d){if(c.lineNumber===n.getLineCount())continue;const f=new M(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),g=n.getValueInRange(f).split("").reverse().join("");o.push(new ro(new et(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),g))}else{const f=new M(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),g=n.getValueInRange(f).split("").reverse().join("");o.push(new YB(f,g,new et(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class HL extends ot{run(e,t){const i=t.getSelections();if(i===null)return;const n=t.getModel();if(n===null)return;const o=t.getOption(119),r=[];for(const a of i)if(a.isEmpty()){const l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;const d=new M(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),f=n.getValueInRange(d);r.push(Nn.replace(d,this._modifyText(f,o)))}else{const l=n.getValueInRange(a);r.push(Nn.replace(a,this._modifyText(l,o)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}}class o6e extends HL{constructor(){super({id:"editor.action.transformToUppercase",label:b("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:$.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class r6e extends HL{constructor(){super({id:"editor.action.transformToLowercase",label:b("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:$.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class vC{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}class KS extends HL{constructor(){super({id:"editor.action.transformToTitlecase",label:b("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:$.writable})}_modifyText(e,t){const i=KS.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,n=>n.toLocaleUpperCase()):e}}KS.titleBoundary=new vC("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class Eg extends HL{constructor(){super({id:"editor.action.transformToSnakecase",label:b("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:$.writable})}_modifyText(e,t){const i=Eg.caseBoundary.get(),n=Eg.singleLetters.get();return!i||!n?e:e.replace(i,"$1_$2").replace(n,"$1_$2$3").toLocaleLowerCase()}}Eg.caseBoundary=new vC("(\\p{Ll})(\\p{Lu})","gmu");Eg.singleLetters=new vC("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");class jh extends HL{constructor(){super({id:"editor.action.transformToKebabcase",label:b("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:$.writable})}static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}_modifyText(e,t){const i=jh.caseBoundary.get(),n=jh.singleLetters.get(),o=jh.underscoreBoundary.get();return!i||!n||!o?e:e.replace(o,"$1-$3").replace(i,"$1-$2").replace(n,"$1-$2").toLocaleLowerCase()}}jh.caseBoundary=new vC("(\\p{Ll})(\\p{Lu})","gmu");jh.singleLetters=new vC("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu");jh.underscoreBoundary=new vC("(\\S)(_)(\\S)","gm");We(zBe);We(UBe);We($Be);We(jBe);We(KBe);We(qBe);We(GBe);We(YBe);We(n2);We(ZBe);We(QBe);We(XBe);We(JBe);We(e6e);We(t6e);We(i6e);We(n6e);We(s6e);We(o6e);We(r6e);Eg.caseBoundary.isSupported()&&Eg.singleLetters.isSupported()&&We(Eg);KS.titleBoundary.isSupported()&&We(KS);jh.isSupported()&&We(jh);var a6e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},SE=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},h8=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const Roe=new st("LinkedEditingInputVisible",!1),Aoe="linked-editing-decoration";let Zg=class f8 extends ge{constructor(e,t,i,n,o){super(),this.languageConfigurationService=n,this._syncRangesToken=0,this._localToDispose=this._register(new Ae),this._editor=e,this._providers=i.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=Roe.bindTo(t),this._debounceInformation=o.for(this._providers,"Linked Editing",{min:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new Ae),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(64)||r.hasChanged(84))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(e){return e.getContribution(f8.ID)}reinitialize(e){const t=this._editor.getModel(),i=t!==null&&(this._editor.getOption(64)||this._editor.getOption(84))&&this._providers.has(t);if(i===this._enabled&&!e||(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||t===null))return;this._localToDispose.add(gt.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const n=new _d(this._debounceInformation.get(t)),o=()=>{var l;this._rangeUpdateTriggerPromise=n.trigger(()=>this.updateRanges(),(l=this._debounceDuration)!==null&&l!==void 0?l:this._debounceInformation.get(t))},r=new _d(0),a=l=>{this._rangeSyncTriggerPromise=r.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{o()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const c=this._currentDecorations.getRange(0);if(c&&l.changes.every(d=>c.intersectRanges(d.range))){a(this._syncRangesToken);return}}o()})),this._localToDispose.add({dispose:()=>{n.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),i=this._currentDecorations.getRange(0);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const n=t.getValueInRange(i);if(this._currentWordPattern){const r=n.match(this._currentWordPattern);if((r?r[0].length:0)!==n.length)return this.clearRanges()}const o=[];for(let r=1,a=this._currentDecorations.length;r<a;r++){const l=this._currentDecorations.getRange(r);if(!!l)if(l.startLineNumber!==l.endLineNumber)o.push({range:l,text:n});else{let c=t.getValueInRange(l),d=n,f=l.startColumn,g=l.endColumn;const m=Fm(c,d);f+=m,c=c.substr(m),d=d.substr(m);const _=Fy(c,d);g-=_,c=c.substr(0,c.length-_),d=d.substr(0,d.length-_),(f!==g||d.length!==0)&&o.push({range:new M(l.startLineNumber,f,l.endLineNumber,g),text:d})}}if(o.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const r=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(r)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return h8(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const i=this._editor.getModel(),n=i.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===n){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const r=this._currentDecorations.getRange(0);if(r&&r.containsPosition(t))return}}this._currentRequestPosition=t,this._currentRequestModelVersion=n;const o=qs(r=>h8(this,void 0,void 0,function*(){try{const a=new qr(!1),l=yield Moe(this._providers,i,t,r);if(this._debounceInformation.update(i,a.elapsed()),o!==this._currentRequest||(this._currentRequest=null,n!==i.getVersionId()))return;let c=[];l!=null&&l.ranges&&(c=l.ranges),this._currentWordPattern=(l==null?void 0:l.wordPattern)||this._languageWordPattern;let d=!1;for(let g=0,m=c.length;g<m;g++)if(M.containsPosition(c[g],t)){if(d=!0,g!==0){const _=c[g];c.splice(g,1),c.unshift(_)}break}if(!d){this.clearRanges();return}const f=c.map(g=>({range:g,options:f8.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(f),this._syncRangesToken++}catch(a){Dd(a)||Yt(a),(this._currentRequest===o||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=o,o})}};Zg.ID="editor.contrib.linkedEditing";Zg.DECORATION=Gt.register({description:"linked-editing",stickiness:0,className:Aoe});Zg=a6e([SE(1,jt),SE(2,ct),SE(3,os),SE(4,Pl)],Zg);class l6e extends ot{constructor(){super({id:"editor.action.linkedEditing",label:b("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:Je.and($.writable,$.hasRenameProvider),kbOpts:{kbExpr:$.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const i=e.get(Vi),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return yt.isUri(n)&&se.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then(r=>{!r||(r.setPosition(o),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},Yt):super.runCommand(e,t)}run(e,t){const i=Zg.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}}const c6e=Fs.bindToContribution(Zg.get);Be(new c6e({id:"cancelLinkedEditingInput",precondition:Roe,handler:s=>s.clearRanges(),kbOpts:{kbExpr:$.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function Moe(s,e,t,i){const n=s.ordered(e);return wJ(n.map(o=>()=>h8(this,void 0,void 0,function*(){try{return yield o.provideLinkedEditingRanges(e,t,i)}catch(r){Ys(r);return}})),o=>!!o&&Po(o==null?void 0:o.ranges))}const u6e=j("editor.linkedEditingBackground",{dark:oe.fromHex("#f00").transparent(.3),light:oe.fromHex("#f00").transparent(.3),hcDark:oe.fromHex("#f00").transparent(.3),hcLight:oe.white},b("editorLinkedEditingBackground","Background color when the editor auto renames on type."));Cn((s,e)=>{const t=s.getColor(u6e);t&&e.addRule(`.monaco-editor .${Aoe} { background: ${t}; border-left-color: ${t}; }`)});Ed("_executeLinkedEditingProvider",(s,e,t)=>{const{linkedEditingRangeProvider:i}=s.get(ct);return Moe(i,e,t,ri.None)});Ei(Zg.ID,Zg);We(l6e);var Ooe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class d6e{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return Ooe(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}}class iN{constructor(e){this._disposables=new Ae;let t=[];for(const[i,n]of e){const o=i.links.map(r=>new d6e(r,n));t=iN._union(t,o),q8(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const i=[];let n,o,r,a;for(n=0,r=0,o=e.length,a=t.length;n<o&&r<a;){const l=e[n],c=t[r];if(M.areIntersectingOrTouching(l.range,c.range)){n++;continue}M.compareRangesUsingStarts(l.range,c.range)<0?(i.push(l),n++):(i.push(c),r++)}for(;n<o;n++)i.push(e[n]);for(;r<a;r++)i.push(t[r]);return i}}function Poe(s,e,t){const i=[],n=s.ordered(e).reverse().map((o,r)=>Promise.resolve(o.provideLinks(e,t)).then(a=>{a&&(i[r]=[a,o])},Ys));return Promise.all(n).then(()=>{const o=new iN(oL(i));return t.isCancellationRequested?(o.dispose(),new iN([])):o})}Li.registerCommand("_executeLinkProvider",(s,...e)=>Ooe(void 0,void 0,void 0,function*(){let[t,i]=e;Qi(t instanceof yt),typeof i!="number"&&(i=0);const{linkProvider:n}=s.get(ct),o=s.get(Hn).getModel(t);if(!o)return[];const r=yield Poe(n,o,ri.None);if(!r)return[];for(let l=0;l<Math.min(i,r.links.length);l++)yield r.links[l].resolve(ri.None);const a=r.links.slice(0);return r.dispose(),a}));var h6e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},LE=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},f6e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let K0=class Foe extends ge{constructor(e,t,i,n,o){super(),this.editor=e,this.openerService=t,this.notificationService=i,this.languageFeaturesService=n,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=o.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new Xi(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const r=this._register(new xV(e));this._register(r.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(r.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(r.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{!a.hasChanged(65)||(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{!this.editor.hasModel()||this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}static get(e){return e.getContribution(Foe.ID)}computeLinksNow(){return f6e(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.editor.getOption(65))return;const e=this.editor.getModel();if(!!this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=qs(t=>Poe(this.providers,e,t));try{const t=new qr(!1);if(this.activeLinksList=yield this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){Yt(t)}finally{this.computePromise=null}}})}updateDecorations(e){const t=this.editor.getOption(72)==="altKey",i=[],n=Object.keys(this.currentOccurrences);for(const r of n){const a=this.currentOccurrences[r];i.push(a.decorationId)}const o=[];if(e)for(const r of e)o.push(r0.decoration(r,t));this.editor.changeDecorations(r=>{const a=r.deltaDecorations(i,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){const d=new r0(e[l],a[l]);this.currentOccurrences[d.decorationId]=d}})}_onEditorMouseMove(e,t){const i=this.editor.getOption(72)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const n=this.getLinkOccurrence(e.target.position);n&&this.editor.changeDecorations(o=>{n.activate(o,i),this.activeLinkDecorationId=n.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(72)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(i=>{t.deactivate(i,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);!t||this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;const{link:n}=e;n.resolve(ri.None).then(o=>{if(typeof o=="string"&&this.editor.hasModel()){const r=this.editor.getModel().uri;if(r.scheme===Xt.file&&o.startsWith(`${Xt.file}:`)){const a=yt.parse(o);if(a.scheme===Xt.file){const l=Hu(a);let c=null;l.startsWith("/./")?c=`.${l.substr(1)}`:l.startsWith("//./")&&(c=`.${l.substr(2)}`),c&&(o=qTe(r,c))}}}return this.openerService.open(o,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},o=>{const r=o instanceof Error?o.message:o;r==="invalid"?this.notificationService.warn(b("invalid.url","Failed to open this link because it is not well-formed: {0}",n.url.toString())):r==="missing"?this.notificationService.warn(b("missing.url","Failed to open this link because its target is missing.")):Yt(o)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const i of t){const n=this.currentOccurrences[i.id];if(n)return n}return null}isEnabled(e,t){return Boolean(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};K0.ID="editor.linkDetector";K0=h6e([LE(1,Ol),LE(2,gs),LE(3,ct),LE(4,Pl)],K0);const JZ={general:Gt.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Gt.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class r0{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:r0._getOptions(e,t,!1)}}static _getOptions(e,t,i){const n=Object.assign({},i?JZ.active:JZ.general);return n.hoverMessage=g6e(e,t),n}activate(e,t){e.changeDecorationOptions(this.decorationId,r0._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,r0._getOptions(this.link,t,!1))}}function g6e(s,e){const t=s.url&&/^command:/i.test(s.url.toString()),i=s.tooltip?s.tooltip:t?b("links.navigate.executeCmd","Execute command"):b("links.navigate.follow","Follow link"),n=e?mi?b("links.navigate.kb.meta.mac","cmd + click"):b("links.navigate.kb.meta","ctrl + click"):mi?b("links.navigate.kb.alt.mac","option + click"):b("links.navigate.kb.alt","alt + click");if(s.url){let o="";if(/^command:/i.test(s.url.toString())){const a=s.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];o=b("tooltip.explanation","Execute command {0}",l)}}return new Wr("",!0).appendLink(s.url.toString(!0).replace(/ /g,"%20"),i,o).appendMarkdown(` (${n})`)}else return new Wr().appendText(`${i} (${n})`)}class p6e extends ot{constructor(){super({id:"editor.action.openLink",label:b("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const i=K0.get(t);if(!i||!t.hasModel())return;const n=t.getSelections();for(const o of n){const r=i.getLinkOccurrence(o.getEndPosition());r&&i.openLinkOccurrence(r,!1)}}}Ei(K0.ID,K0);We(p6e);Cn((s,e)=>{const t=s.getColor($B);t&&e.addRule(`.monaco-editor .detected-link-active { color: ${t} !important; }`)});var m6e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},_6e=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};function rp(s,e){const t=e.filter(i=>!s.find(n=>n.equals(i)));if(t.length>=1){const i=t.map(o=>`line ${o.viewState.position.lineNumber} column ${o.viewState.position.column}`).join(", "),n=t.length===1?b("cursorAdded","Cursor added: {0}",i):b("cursorsAdded","Cursors added: {0}",i);FT(n)}}class v6e extends ot{constructor(){super({id:"editor.action.insertCursorAbove",label:b("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:$.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:G.MenubarSelectionMenu,group:"3_multi",title:b({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&i.logicalLine===!1&&(n=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const r=o.getCursorStates();o.setCursorStates(i.source,3,Js.addCursorUp(o,r,n)),o.revealTopMostCursor(i.source),rp(r,o.getCursorStates())}}class b6e extends ot{constructor(){super({id:"editor.action.insertCursorBelow",label:b("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:$.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:G.MenubarSelectionMenu,group:"3_multi",title:b({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&i.logicalLine===!1&&(n=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const r=o.getCursorStates();o.setCursorStates(i.source,3,Js.addCursorDown(o,r,n)),o.revealBottomMostCursor(i.source),rp(r,o.getCursorStates())}}class C6e extends ot{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:b("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:$.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:G.MenubarSelectionMenu,group:"3_multi",title:b({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let n=e.startLineNumber;n<e.endLineNumber;n++){const o=t.getLineMaxColumn(n);i.push(new et(n,o,n,o))}e.endColumn>1&&i.push(new et(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),n=t.getSelections(),o=t._getViewModel(),r=o.getCursorStates(),a=[];n.forEach(l=>this.getCursorsForSelection(l,i,a)),a.length>0&&t.setSelections(a),rp(r,o.getCursorStates())}}class w6e extends ot{constructor(){super({id:"editor.action.addCursorsToBottom",label:b("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=t.getModel().getLineCount(),o=[];for(let l=i[0].startLineNumber;l<=n;l++)o.push(new et(l,i[0].startColumn,l,i[0].endColumn));const r=t._getViewModel(),a=r.getCursorStates();o.length>0&&t.setSelections(o),rp(a,r.getCursorStates())}}class y6e extends ot{constructor(){super({id:"editor.action.addCursorsToTop",label:b("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=[];for(let a=i[0].startLineNumber;a>=1;a--)n.push(new et(a,i[0].startColumn,a,i[0].endColumn));const o=t._getViewModel(),r=o.getCursorStates();n.length>0&&t.setSelections(n),rp(r,o.getCursorStates())}}class xE{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class qS{constructor(e,t,i,n,o,r,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=n,this.wholeWord=o,this.matchCase=r,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new qS(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let n=!1,o,r;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(n=!0,o=!0,r=!0):(o=i.wholeWord,r=i.matchCase);const l=e.getSelection();let c,d=null;if(l.isEmpty()){const f=e.getConfiguredWordAtPosition(l.getStartPosition());if(!f)return null;c=f.word,d=new et(l.startLineNumber,f.startColumn,l.startLineNumber,f.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new qS(e,t,n,c,o,r,d)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new xE(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new xE(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const n=this.currentMatch;return this.currentMatch=null,n}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1);return i?new et(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new xE(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new xE(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const n=this.currentMatch;return this.currentMatch=null,n}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1);return i?new et(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1,1073741824)}}class d_ extends ge{constructor(e){super(),this._sessionDispose=this._register(new Ae),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(d_.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=qS.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(n=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(n=>{(n.matchCase||n.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new et(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){!e||(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(!!this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const n=e.getState().matchCase;if(!Boe(this._editor.getModel(),t,n)){const r=this._editor.getModel(),a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(r,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){const n=this._editor.getModel();i.searchScope?t=n.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(119):null,!1,1073741824):t=n.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(119):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){const n=this._editor.getSelection();for(let o=0,r=t.length;o<r;o++){const a=t[o];if(a.range.intersectRanges(n)){t[o]=t[0],t[0]=a;break}}this._setSelections(t.map(o=>new et(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)))}}}d_.ID="editor.contrib.multiCursorController";class bC extends ot{run(e,t){const i=d_.get(t);if(!i)return;const n=wa.get(t);if(!n)return;const o=t._getViewModel();if(o){const r=o.getCursorStates();this._run(i,n),rp(r,o.getCursorStates())}}}class S6e extends bC{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:b("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:$.focus,primary:2082,weight:100},menuOpts:{menuId:G.MenubarSelectionMenu,group:"3_multi",title:b({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class L6e extends bC{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:b("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:G.MenubarSelectionMenu,group:"3_multi",title:b({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class x6e extends bC{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:b("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:$.focus,primary:Is(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class D6e extends bC{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:b("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class k6e extends bC{constructor(){super({id:"editor.action.selectHighlights",label:b("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:$.focus,primary:3114,weight:100},menuOpts:{menuId:G.MenubarSelectionMenu,group:"3_multi",title:b({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class E6e extends bC{constructor(){super({id:"editor.action.changeAll",label:b("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:Je.and($.writable,$.editorTextFocus),kbOpts:{kbExpr:$.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class T6e{constructor(e,t,i,n,o){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=n,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(M.compareRangesUsingStarts)),this._cachedFindMatches}}let h_=class nT extends ge{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(99),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new Xi(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(n=>{this._isEnabled=e.getOption(99)})),this._register(e.onDidChangeCursorSelection(n=>{!this._isEnabled||(n.selection.isEmpty()?n.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(n=>{this._setState(null)})),this._register(e.onDidChangeModelContent(n=>{this._isEnabled&&this.updateSoon.schedule()}));const i=wa.get(e);i&&this._register(i.getState().onFindReplaceStateChange(n=>{this._update()}))}_update(){this._setState(nT._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t||!i.hasModel())return null;const n=i.getSelection();if(n.startLineNumber!==n.endLineNumber)return null;const o=d_.get(i);if(!o)return null;const r=wa.get(i);if(!r)return null;let a=o.getSession(r);if(!a){const d=i.getSelections();if(d.length>1){const g=r.getState().matchCase;if(!Boe(i.getModel(),d,g))return null}a=qS.create(i,r)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=r.getState(),c=l.matchCase;if(l.isRevealed){let d=l.searchString;c||(d=d.toLowerCase());let f=a.searchText;if(c||(f=f.toLowerCase()),d===f&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new T6e(i.getModel(),a.searchText,a.matchCase,a.wholeWord?i.getOption(119):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=this.state.findMatches(),n=this.editor.getSelections();n.sort(M.compareRangesUsingStarts);const o=[];for(let l=0,c=0,d=i.length,f=n.length;l<d;){const g=i[l];if(c>=f)o.push(g),l++;else{const m=M.compareRangesUsingStarts(g,n[c]);m<0?((n[c].isEmpty()||!M.areIntersecting(g,n[c]))&&o.push(g),l++):(m>0||l++,c++)}}const r=this._languageFeaturesService.documentHighlightProvider.has(t)&&this.editor.getOption(74),a=o.map(l=>({range:l,options:r?nT._SELECTION_HIGHLIGHT:nT._SELECTION_HIGHLIGHT_OVERVIEW}));this._decorations.set(a)}dispose(){this._setState(null),super.dispose()}};h_.ID="editor.contrib.selectionHighlighter";h_._SELECTION_HIGHLIGHT_OVERVIEW=Gt.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:Yn(YN),position:Ll.Inline},overviewRuler:{color:Yn(_ee),position:El.Center}});h_._SELECTION_HIGHLIGHT=Gt.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});h_=m6e([_6e(1,ct)],h_);function Boe(s,e,t){const i=eQ(s,e[0],!t);for(let n=1,o=e.length;n<o;n++){const r=e[n];if(r.isEmpty())return!1;const a=eQ(s,r,!t);if(i!==a)return!1}return!0}function eQ(s,e,t){const i=s.getValueInRange(e);return t?i.toLowerCase():i}class I6e extends ot{constructor(){super({id:"editor.action.focusNextCursor",label:b("mutlicursor.focusNextCursor","Focus Next Cursor"),description:{description:b("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const o=Array.from(n.getCursorStates()),r=o.shift();!r||(o.push(r),n.setCursorStates(i.source,3,o),n.revealPrimaryCursor(i.source,!0),rp(o,n.getCursorStates()))}}class N6e extends ot{constructor(){super({id:"editor.action.focusPreviousCursor",label:b("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),description:{description:b("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const o=Array.from(n.getCursorStates()),r=o.pop();!r||(o.unshift(r),n.setCursorStates(i.source,3,o),n.revealPrimaryCursor(i.source,!0),rp(o,n.getCursorStates()))}}Ei(d_.ID,d_);Ei(h_.ID,h_);We(v6e);We(b6e);We(C6e);We(S6e);We(L6e);We(x6e);We(D6e);We(k6e);We(E6e);We(w6e);We(y6e);We(I6e);We(N6e);var Voe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const f_={Visible:new st("parameterHintsVisible",!1),MultipleSignatures:new st("parameterHintsMultipleSignatures",!1)};function Woe(s,e,t,i,n){return Voe(this,void 0,void 0,function*(){const o=s.ordered(e);for(const r of o)try{const a=yield r.provideSignatureHelp(e,t,n,i);if(a)return a}catch(a){Ys(a)}})}Li.registerCommand("_executeSignatureHelpProvider",(s,...e)=>Voe(void 0,void 0,void 0,function*(){const[t,i,n]=e;Qi(yt.isUri(t)),Qi(se.isIPosition(i)),Qi(typeof n=="string"||!n);const o=s.get(ct),r=yield s.get(Yr).createModelReference(t);try{const a=yield Woe(o.signatureHelpProvider,r.object.textEditorModel,se.lift(i),{triggerKind:ud.Invoke,isRetrigger:!1,triggerCharacter:n},ri.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{r.dispose()}}));var R6e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})},Xf;(function(s){s.Default={type:0};class e{constructor(n,o){this.request=n,this.previouslyActiveHints=o,this.type=2}}s.Pending=e;class t{constructor(n){this.hints=n,this.type=1}}s.Active=t})(Xf||(Xf={}));class s2 extends ge{constructor(e,t,i=s2.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new J),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=Xf.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new tr),this.triggerChars=new vb,this.retriggerChars=new vb,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new _d(i),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(n=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(n=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(n=>this.onCursorChange(n))),this._register(this.editor.onDidChangeModelContent(n=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(n=>this.onDidType(n))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=Xf.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const i=this.editor.getModel();if(!i||!this.providers.has(i))return;const n=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(n),t).catch(Yt)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e===e-1,n=this.editor.getOption(78).cycle;if((e<2||i)&&!n){this.cancel();return}this.updateActiveSignature(i&&n?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t===0,n=this.editor.getOption(78).cycle;if((e<2||i)&&!n){this.cancel();return}this.updateActiveSignature(i&&n?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new Xf.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return R6e(this,void 0,void 0,function*(){const t=this.state.type===1||this.state.type===2,i=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const n=this._pendingTriggers.reduce(A6e);this._pendingTriggers=[];const o={triggerKind:n.triggerKind,triggerCharacter:n.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;const r=this.editor.getModel(),a=this.editor.getPosition();this.state=new Xf.Pending(qs(l=>Woe(this.providers,r,a,o,l)),i);try{const l=yield this.state.request;return e!==this.triggerId?(l==null||l.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l==null||l.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new Xf.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=Xf.Default),Yt(l),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new vb,this.retriggerChars=new vb;const e=this.editor.getModel();if(!!e)for(const t of this.providers.ordered(e)){for(const i of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(i.charCodeAt(0)),this.retriggerChars.add(i.charCodeAt(0));for(const i of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(i.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:ud.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:ud.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:ud.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(78).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}s2.DEFAULT_DELAY=120;function A6e(s,e){switch(e.triggerKind){case ud.Invoke:return e;case ud.ContentChange:return s;case ud.TriggerCharacter:default:return e}}var M6e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},DE=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const Ra=Pe,O6e=Ls("parameter-hints-next",w.chevronDown,b("parameterHintsNextIcon","Icon for show next parameter hint.")),P6e=Ls("parameter-hints-previous",w.chevronUp,b("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let nN=class Hoe extends ge{constructor(e,t,i,n,o){super(),this.editor=e,this.renderDisposeables=this._register(new Ae),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new ef({editor:e},n,i)),this.model=this._register(new s2(e,o.signatureHelpProvider)),this.keyVisible=f_.Visible.bindTo(t),this.keyMultipleSignatures=f_.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints(r=>{r?(this.show(),this.render(r)):this.hide()}))}createParameterHintDOMNodes(){const e=Ra(".editor-widget.parameter-hints-widget"),t=Se(e,Ra(".phwrapper"));t.tabIndex=-1;const i=Se(t,Ra(".controls")),n=Se(i,Ra(".button"+Pi.asCSSSelector(P6e))),o=Se(i,Ra(".overloads")),r=Se(i,Ra(".button"+Pi.asCSSSelector(O6e)));this._register(Le(n,"click",g=>{qi.stop(g),this.previous()})),this._register(Le(r,"click",g=>{qi.stop(g),this.next()}));const a=Ra(".body"),l=new vL(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());const c=Se(a,Ra(".signature")),d=Se(a,Ra(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:o,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(g=>{this.visible&&this.editor.layoutContentWidget(this)}));const f=()=>{if(!this.domNodes)return;const g=this.editor.getOption(46);this.domNodes.element.style.fontSize=`${g.fontSize}px`,this.domNodes.element.style.lineHeight=`${g.lineHeight/g.fontSize}`};f(),this._register(gt.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(g=>g.hasChanged(46)).on(f,null)),this._register(this.editor.onDidLayoutChange(g=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)===null||e===void 0||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)===null||e===void 0||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const i=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",i),this.keyMultipleSignatures.set(i),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const n=e.signatures[e.activeSignature];if(!n)return;const o=Se(this.domNodes.signature,Ra(".code")),r=this.editor.getOption(46);o.style.fontSize=`${r.fontSize}px`,o.style.fontFamily=r.fontFamily;const a=n.parameters.length>0,l=(t=n.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(o,n,l);else{const f=Se(o,Ra("span"));f.textContent=n.label}const c=n.parameters[l];if(c!=null&&c.documentation){const f=Ra("span.documentation");if(typeof c.documentation=="string")f.textContent=c.documentation;else{const g=this.renderMarkdownDocs(c.documentation);f.appendChild(g.element)}Se(this.domNodes.docs,Ra("p",{},f))}if(n.documentation!==void 0)if(typeof n.documentation=="string")Se(this.domNodes.docs,Ra("p",{},n.documentation));else{const f=this.renderMarkdownDocs(n.documentation);Se(this.domNodes.docs,f.element)}const d=this.hasDocs(n,c);if(this.domNodes.signature.classList.toggle("has-docs",d),this.domNodes.docs.classList.toggle("empty",!d),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,c){let f="";const g=n.parameters[l];Array.isArray(g.label)?f=n.label.substring(g.label[0],g.label[1]):f=g.label,g.documentation&&(f+=typeof g.documentation=="string"?`, ${g.documentation}`:`, ${g.documentation.value}`),n.documentation&&(f+=typeof n.documentation=="string"?`, ${n.documentation}`:`, ${n.documentation.value}`),this.announcedLabel!==f&&(go(b("hint","{0}, hint",f)),this.announcedLabel=f)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var i;(i=this.domNodes)===null||i===void 0||i.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&hk(t.documentation).length>0||t&&typeof t.documentation=="object"&&hk(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&hk(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&hk(e.documentation.value).length>0)}renderParameters(e,t,i){const[n,o]=this.getParameterLabelOffsets(t,i),r=document.createElement("span");r.textContent=t.label.substring(0,n);const a=document.createElement("span");a.textContent=t.label.substring(n,o),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(o),Se(e,r,a,l)}getParameterLabelOffsets(e,t){const i=e.parameters[t];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){const n=new RegExp(`(\\W|^)${ja(i.label)}(?=\\W|$)`,"g");n.test(e.label);const o=n.lastIndex-i.label.length;return o>=0?[o,n.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return Hoe.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const i=this.domNodes.element.getElementsByClassName("phwrapper");i.length&&(i[0].style.maxHeight=t)}};nN.ID="editor.widget.parameterHintsWidget";nN=M6e([DE(1,jt),DE(2,Ol),DE(3,Vn),DE(4,ct)],nN);const F6e=j("editorHoverWidget.highlightForeground",{dark:sc,light:sc,hcDark:sc,hcLight:sc},b("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));Cn((s,e)=>{const t=s.getColor(UB);if(t){const c=Vo(s.type)?2:1;e.addRule(`.monaco-editor .parameter-hints-widget { border: ${c}px solid ${t}; }`),e.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${t.transparent(.5)}; }`)}const i=s.getColor(jm);i&&e.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${i}; }`);const n=s.getColor($N);n&&e.addRule(`.monaco-editor .parameter-hints-widget a { color: ${n}; }`);const o=s.getColor(jN);o&&e.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${o}; }`);const r=s.getColor(zB);r&&e.addRule(`.monaco-editor .parameter-hints-widget { color: ${r}; }`);const a=s.getColor(hee);a&&e.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`);const l=s.getColor(F6e);l&&e.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${l}}`)});var B6e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},V6e=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let g_=class zoe extends ge{constructor(e,t){super(),this.editor=e,this.widget=this._register(t.createInstance(nN,this.editor))}static get(e){return e.getContribution(zoe.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}};g_.ID="editor.controller.parameterHints";g_=B6e([V6e(1,Zt)],g_);class W6e extends ot{constructor(){super({id:"editor.action.triggerParameterHints",label:b("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:$.hasSignatureHelpProvider,kbOpts:{kbExpr:$.editorTextFocus,primary:3082,weight:100}})}run(e,t){const i=g_.get(t);i&&i.trigger({triggerKind:ud.Invoke})}}Ei(g_.ID,g_);We(W6e);const YV=100+75,ZV=Fs.bindToContribution(g_.get);Be(new ZV({id:"closeParameterHints",precondition:f_.Visible,handler:s=>s.cancel(),kbOpts:{weight:YV,kbExpr:$.focus,primary:9,secondary:[1033]}}));Be(new ZV({id:"showPrevParameterHint",precondition:Je.and(f_.Visible,f_.MultipleSignatures),handler:s=>s.previous(),kbOpts:{weight:YV,kbExpr:$.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));Be(new ZV({id:"showNextParameterHint",precondition:Je.and(f_.Visible,f_.MultipleSignatures),handler:s=>s.next(),kbOpts:{weight:YV,kbExpr:$.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var H6e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},WF=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const o2=new st("renameInputVisible",!1,b("renameInputVisible","Whether the rename input widget is visible"));let g8=class{constructor(e,t,i,n,o){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=n,this._disposables=new Ae,this.allowEditorOverflow=!0,this._visibleContextKey=o2.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(46)&&this._updateFont()})),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",b("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=()=>{var t,i;const[n,o]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(n),this._label.innerText=b({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(t=this._keybindingService.lookupKeybinding(n))===null||t===void 0?void 0:t.getLabel(),(i=this._keybindingService.lookupKeybinding(o))===null||i===void 0?void 0:i.getLabel())};e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,i,n,o;if(!this._input||!this._domNode)return;const r=e.getColor(Qc);this._domNode.style.backgroundColor=String((t=e.getColor(hs))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=r?` 0 0 8px 2px ${r}`:"",this._domNode.style.color=String((i=e.getColor(qN))!==null&&i!==void 0?i:""),this._input.style.backgroundColor=String((n=e.getColor(KN))!==null&&n!==void 0?n:"");const a=e.getColor(GN);this._input.style.borderWidth=a?"1px":"0px",this._input.style.borderStyle=a?"solid":"none",this._input.style.borderColor=(o=a==null?void 0:a.toString())!==null&&o!==void 0?o:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(46);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){var t;(t=this._currentAcceptInput)===null||t===void 0||t.call(this,e)}cancelInput(e){var t;(t=this._currentCancelInput)===null||t===void 0||t.call(this,e)}getInput(e,t,i,n,o,r){this._domNode.classList.toggle("preview",o),this._position=new se(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",i.toString()),this._input.setAttribute("selectionEnd",n.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);const a=new Ae;return new Promise(l=>{this._currentCancelInput=c=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l(c),!0),this._currentAcceptInput=c=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l({newName:this._input.value,wantsPreview:o&&c})},a.add(r.onCancellationRequested(()=>this.cancelInput(!0))),a.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!1))),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};g8=H6e([WF(2,cn),WF(3,xs),WF(4,jt)],g8);var z6e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},qp=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},Om=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class QV{constructor(e,t,i){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=i.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return Om(this,void 0,void 0,function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const n=this._providers[this._providerRenameIdx];if(!n.resolveRenameLocation)break;const o=yield n.resolveRenameLocation(this.model,this.position,e);if(!!o){if(o.rejectReason){t.push(o.rejectReason);continue}return o}}const i=this.model.getWordAtPosition(this.position);return i?{range:new M(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:M.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return Om(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,i,n){return Om(this,void 0,void 0,function*(){const o=this._providers[t];if(!o)return{edits:[],rejectReason:i.join(`
`)};const r=yield o.provideRenameEdits(this.model,this.position,e,n);if(r){if(r.rejectReason)return this._provideRenameEdits(e,t+1,i.concat(r.rejectReason),n)}else return this._provideRenameEdits(e,t+1,i.concat(b("no result","No result.")),n);return r})}}function U6e(s,e,t,i){return Om(this,void 0,void 0,function*(){const n=new QV(e,t,s),o=yield n.resolveRenameLocation(ri.None);return o!=null&&o.rejectReason?{edits:[],rejectReason:o.rejectReason}:n.provideRenameEdits(i,ri.None)})}let p_=class Uoe{constructor(e,t,i,n,o,r,a,l){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=n,this._progressService=o,this._logService=r,this._configService=a,this._languageFeaturesService=l,this._disposableStore=new Ae,this._cts=new _o,this._renameInputField=this._disposableStore.add(new vg(()=>this._disposableStore.add(this._instaService.createInstance(g8,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))))}static get(e){return e.getContribution(Uoe.ID)}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}run(){var e,t;return Om(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const i=this.editor.getPosition(),n=new QV(this.editor.getModel(),i,this._languageFeaturesService.renameProvider);if(!n.hasProvider())return;this._cts=new e_(this.editor,5);let o;try{const g=n.resolveRenameLocation(this._cts.token);this._progressService.showWhile(g,250),o=yield g}catch(g){(e=Ca.get(this.editor))===null||e===void 0||e.showMessage(g||b("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),i);return}if(!o)return;if(o.rejectReason){(t=Ca.get(this.editor))===null||t===void 0||t.showMessage(o.rejectReason,i);return}if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new e_(this.editor,5,o.range);const r=this.editor.getSelection();let a=0,l=o.text.length;!M.isEmpty(r)&&!M.spansMultipleLines(r)&&M.containsRange(o.range,r)&&(a=Math.max(0,r.startColumn-o.range.startColumn),l=Math.min(o.range.endColumn,r.endColumn)-o.range.startColumn);const c=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),d=yield this._renameInputField.value.getInput(o.range,o.text,a,l,c,this._cts.token);if(typeof d=="boolean"){d&&this.editor.focus();return}this.editor.focus();const f=pB(n.provideRenameEdits(d.newName,this._cts.token),this._cts.token).then(g=>Om(this,void 0,void 0,function*(){if(!(!g||!this.editor.hasModel())){if(g.rejectReason){this._notificationService.info(g.rejectReason);return}this.editor.setSelection(M.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(dC.convert(g),{editor:this.editor,showPreview:d.wantsPreview,label:b("label","Renaming '{0}' to '{1}'",o==null?void 0:o.text,d.newName),code:"undoredo.rename",quotableLabel:b("quotableLabel","Renaming {0} to {1}",o==null?void 0:o.text,d.newName),respectAutoSaveConfig:!0}).then(m=>{m.ariaSummary&&go(b("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",o.text,d.newName,m.ariaSummary))}).catch(m=>{this._notificationService.error(b("rename.failedApply","Rename failed to apply edits")),this._logService.error(m)})}}),g=>{this._notificationService.error(b("rename.failed","Rename failed to compute edits")),this._logService.error(g)});return this._progressService.showWhile(f,250),f})}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};p_.ID="editor.contrib.renameController";p_=z6e([qp(1,Zt),qp(2,gs),qp(3,yL),qp(4,ip),qp(5,fc),qp(6,wB),qp(7,ct)],p_);class $6e extends ot{constructor(){super({id:"editor.action.rename",label:b("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:Je.and($.writable,$.hasRenameProvider),kbOpts:{kbExpr:$.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const i=e.get(Vi),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return yt.isUri(n)&&se.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then(r=>{!r||(r.setPosition(o),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},Yt):super.runCommand(e,t)}run(e,t){const i=p_.get(t);return i?i.run():Promise.resolve()}}Ei(p_.ID,p_);We($6e);const XV=Fs.bindToContribution(p_.get);Be(new XV({id:"acceptRenameInput",precondition:o2,handler:s=>s.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:$.focus,primary:3}}));Be(new XV({id:"acceptRenameInputWithPreview",precondition:Je.and(o2,Je.has("config.editor.rename.enablePreview")),handler:s=>s.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:$.focus,primary:1024+3}}));Be(new XV({id:"cancelRenameInput",precondition:o2,handler:s=>s.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:$.focus,primary:9,secondary:[1033]}}));Ed("_executeDocumentRenameProvider",function(s,e,t,...i){const[n]=i;Qi(typeof n=="string");const{renameProvider:o}=s.get(ct);return U6e(o,e,t,n)});Ed("_executePrepareRename",function(s,e,t){return Om(this,void 0,void 0,function*(){const{renameProvider:i}=s.get(ct),o=yield new QV(e,t,i).resolveRenameLocation(ri.None);if(o!=null&&o.rejectReason)throw new Error(o.rejectReason);return o})});Wn.as(tf.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:b("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var j6e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},K6e=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},tQ=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})},HF;let GS=class extends ge{constructor(e,t){super(),this._sessionStore=new Ae,this._ranges=[],this._rangesVersionId=0,this._editor=e,this._languageFeaturesService=t,this.stickyScrollWidget=new q6e(this._editor),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(34)&&this.onConfigurationChange()})),this._updateSoon=this._register(new Xi(()=>this._update(!0),50)),this.onConfigurationChange()}onConfigurationChange(){if(this._editor.getOption(34).stickyScroll.enabled===!1){this.stickyScrollWidget.emptyRootNode(),this._editor.removeOverlayWidget(this.stickyScrollWidget),this._sessionStore.clear();return}else this._editor.addOverlayWidget(this.stickyScrollWidget),this._sessionStore.add(this._editor.onDidChangeModel(()=>this._update(!0))),this._sessionStore.add(this._editor.onDidScrollChange(()=>this._update(!1))),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this._update(!0))),this._sessionStore.add(this._editor.onDidChangeModelTokens(t=>this._onTokensChange(t))),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this._update(!0))),this._update(!0)}_needsUpdate(e){const t=this.stickyScrollWidget.getCurrentLines();for(const i of t)for(const n of e.ranges)if(i>=n.fromLineNumber&&i<=n.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._update(!1)}_update(e=!1){var t,i;return tQ(this,void 0,void 0,function*(){e&&((t=this._cts)===null||t===void 0||t.dispose(!0),this._cts=new _o,yield this._updateOutlineModel(this._cts.token));const n=(i=this._editor._getViewModel())===null||i===void 0?void 0:i.getHiddenAreas();if(n)for(const o of n)this._ranges=this._ranges.filter(r=>!(r[0]>=o.startLineNumber&&r[1]<=o.endLineNumber+1));this._renderStickyScroll()})}_findLineRanges(e,t){if(e!=null&&e.children.size){let i=!1;for(const n of e==null?void 0:e.children.values()){const o=n.symbol.kind;(o===4||o===8||o===11||o===10||o===5||o===1)&&(i=!0,this._findLineRanges(n,t+1))}i||this._addOutlineRanges(e,t)}else this._addOutlineRanges(e,t)}_addOutlineRanges(e,t){let i=0,n=0;for(;e;){const o=e.symbol.kind;if((o===4||o===8||o===11||o===10||o===5||o===1)&&(i=e==null?void 0:e.symbol.range.startLineNumber,n=e==null?void 0:e.symbol.range.endLineNumber,this._ranges.push([i,n,t]),t--),e.parent instanceof QI)e=e.parent;else break}}_updateOutlineModel(e){return tQ(this,void 0,void 0,function*(){if(this._editor.hasModel()){const t=this._editor.getModel(),i=t.getVersionId(),n=yield Sh.create(this._languageFeaturesService.documentSymbolProvider,t,e);if(e.isCancellationRequested)return;this._ranges=[],this._rangesVersionId=i;for(const o of n.children.values()){if(o instanceof QI){const a=o.symbol.kind;a===4||a===8||a===11||a===10||a===5||a===1?this._findLineRanges(o,1):this._findLineRanges(o,0)}this._ranges=this._ranges.sort(function(a,l){return a[0]!==l[0]?a[0]-l[0]:a[1]!==l[1]?l[1]-a[1]:a[2]-l[2]});let r=[];for(const[a,l]of this._ranges.entries()){const[c,d,f]=l;r[0]===c&&r[1]===d?this._ranges.splice(a,1):r=l}}}})}_renderStickyScroll(){if(!this._editor.hasModel())return;const e=this._editor.getOption(61),t=this._editor.getModel();if(this._rangesVersionId!==t.getVersionId())return;const i=this._editor.getScrollTop();this.stickyScrollWidget.emptyRootNode();const n=new Set;for(const[o,r]of this._ranges.entries()){const[a,l,c]=r;if(l-a>0&&t.getLineContent(a)!==""){const d=(c-1)*e,f=c*e,g=this._editor.getBottomForLineNumber(a)-i,m=this._editor.getTopForLineNumber(l)-i,_=this._editor.getBottomForLineNumber(l)-i;if(n.has(a))this._ranges.splice(o,1);else if(d>=m-1&&d<_-2){n.add(a),this.stickyScrollWidget.pushCodeLine(new nQ(a,c,this._editor,-1,_-f));break}else f>g&&f<_-1&&(n.add(a),this.stickyScrollWidget.pushCodeLine(new nQ(a,c,this._editor,0,0)))}}this.stickyScrollWidget.updateRootNode()}dispose(){super.dispose(),this._sessionStore.dispose()}};GS.ID="store.contrib.stickyScrollController";GS=j6e([K6e(1,ct)],GS);const iQ=(HF=window.trustedTypes)===null||HF===void 0?void 0:HF.createPolicy("stickyScrollViewLayer",{createHTML:s=>s});class nQ{constructor(e,t,i,n,o){this._lineNumber=e,this._depth=t,this._editor=i,this._zIndex=n,this._relativePosition=o,this.effectiveLineHeight=0,this.effectiveLineHeight=this._editor.getOption(61)+this._relativePosition}get lineNumber(){return this._lineNumber}getDomNode(){const e=document.createElement("div"),t=this._editor._getViewModel(),i=t.coordinatesConverter.convertModelPositionToViewPosition(new se(this._lineNumber,1)).lineNumber,n=t.getViewLineRenderingData(i);let o;try{o=pa.filter(n.inlineDecorations,i,n.minColumn,n.maxColumn)}catch{o=[]}const r=new ep(!0,!0,n.content,n.continuesWithWrappedLine,n.isBasicASCII,n.containsRTL,0,n.tokens,o,n.tabSize,n.startVisibleColumn,1,1,1,100,"none",!0,!0,null),a=Rg(400);uL(r,a);let l;iQ?l=iQ.createHTML(a.build()):l=a.build();const c=document.createElement("span");c.style.backgroundColor="var(--vscode-editorStickyScroll-background)",c.style.overflow="hidden",c.style.whiteSpace="nowrap",c.style.display="inline-block",c.style.lineHeight=this._editor.getOption(61).toString()+"px",c.innerHTML=l;const d=document.createElement("span");d.style.width=this._editor.getLayoutInfo().contentLeft.toString()+"px",d.style.backgroundColor="var(--vscode-editorStickyScroll-background)",d.style.color="var(--vscode-editorLineNumber-foreground)",d.style.display="inline-block",d.style.lineHeight=this._editor.getOption(61).toString()+"px";const f=document.createElement("span");return f.innerText=this._lineNumber.toString(),f.style.paddingLeft=this._editor.getLayoutInfo().lineNumbersLeft.toString()+"px",f.style.width=this._editor.getLayoutInfo().lineNumbersWidth.toString()+"px",f.style.backgroundColor="var(--vscode-editorStickyScroll-background)",f.style.textAlign="right",f.style.float="left",f.style.lineHeight=this._editor.getOption(61).toString()+"px",d.appendChild(f),e.onclick=g=>{g.stopPropagation(),g.preventDefault(),this._editor.revealPosition({lineNumber:this._lineNumber-this._depth+1,column:1})},e.onmouseover=g=>{f.style.background="var(--vscode-editorStickyScrollHover-background)",c.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",d.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",e.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",f.style.cursor="pointer",c.style.cursor="pointer",e.style.cursor="pointer",d.style.cursor="pointer"},e.onmouseleave=g=>{f.style.background="var(--vscode-editorStickyScroll-background)",c.style.backgroundColor="var(--vscode-editorStickyScroll-background)",d.style.backgroundColor="var(--vscode-editorStickyScroll-background)",e.style.backgroundColor="var(--vscode-editorStickyScroll-background)"},this._editor.applyFontInfo(c),this._editor.applyFontInfo(f),e.appendChild(d),e.appendChild(c),e.style.zIndex=this._zIndex.toString(),e.style.backgroundColor="var(--vscode-editorStickyScroll-background)",e.style.overflow="hidden",e.style.whiteSpace="nowrap",e.style.width="100%",e.style.lineHeight=this._editor.getOption(61).toString()+"px",e.style.height=this._editor.getOption(61).toString()+"px",this._relativePosition&&(e.style.position="relative",e.style.top=this._relativePosition+"px",e.style.width="100%"),e}}class q6e{constructor(e){this._editor=e,this.arrayOfCodeLines=[],this.rootDomNode=document.createElement("div"),this.rootDomNode=document.createElement("div"),this.rootDomNode.style.width="100%",this.rootDomNode.style.boxShadow="var(--vscode-scrollbar-shadow) 0 6px 6px -6px"}getCurrentLines(){const e=[];for(const t of this.arrayOfCodeLines)e.push(t.lineNumber);return e}pushCodeLine(e){this.arrayOfCodeLines.push(e)}updateRootNode(){let e=0;for(const t of this.arrayOfCodeLines)e+=t.effectiveLineHeight,this.rootDomNode.appendChild(t.getDomNode());this.rootDomNode.style.height=e.toString()+"px"}emptyRootNode(){this.arrayOfCodeLines.length=0,Ts(this.rootDomNode)}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this.rootDomNode.style.zIndex="2",this.rootDomNode.style.backgroundColor="var(--vscode-editorStickyScroll-background)",this.rootDomNode}getPosition(){return{preference:null}}}Ei(GS.ID,GS);class G6e{provideSelectionRanges(e,t){const i=[];for(const n of t){const o=[];i.push(o),this._addInWordRanges(o,e,n),this._addWordRanges(o,e,n),this._addWhitespaceLine(o,e,n),o.push({range:e.getFullModelRange()})}return i}_addInWordRanges(e,t,i){const n=t.getWordAtPosition(i);if(!n)return;const{word:o,startColumn:r}=n,a=i.column-r;let l=a,c=a,d=0;for(;l>=0;l--){const f=o.charCodeAt(l);if(l!==a&&(f===95||f===45))break;if(og(f)&&Ku(d))break;d=f}for(l+=1;c<o.length;c++){const f=o.charCodeAt(c);if(Ku(f)&&og(d))break;if(f===95||f===45)break;d=f}l<c&&e.push({range:new M(i.lineNumber,r+l,i.lineNumber,r+c)})}_addWordRanges(e,t,i){const n=t.getWordAtPosition(i);n&&e.push({range:new M(i.lineNumber,n.startColumn,i.lineNumber,n.endColumn)})}_addWhitespaceLine(e,t,i){t.getLineLength(i.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(i.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(i.lineNumber)===0&&e.push({range:new M(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}}var Y6e=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Z6e=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},r2=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class JV{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const i=new JV(t,this.ranges);return i.ranges[t].equalsRange(this.ranges[this.index])?i.mov(e):i}}let q0=class $oe{constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}static get(e){return e.getContribution($oe.ID)}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return r2(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),i=this._editor.getModel();if(this._state||(yield Koe(this._languageFeaturesService.selectionRangeProvider,i,t.map(o=>o.getPosition()),this._editor.getOption(104),ri.None).then(o=>{var r;if(!(!Po(o)||o.length!==t.length)&&!(!this._editor.hasModel()||!$a(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<o.length;a++)o[a]=o[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),o[a].unshift(t[a]);this._state=o.map(a=>new JV(0,a)),(r=this._selectionListener)===null||r===void 0||r.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state)return;this._state=this._state.map(o=>o.mov(e));const n=this._state.map(o=>et.fromPositions(o.ranges[o.index].getStartPosition(),o.ranges[o.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(n)}finally{this._ignoreSelection=!1}})}};q0.ID="editor.contrib.smartSelectController";q0=Y6e([Z6e(1,ct)],q0);class joe extends ot{constructor(e,t){super(t),this._forward=e}run(e,t){return r2(this,void 0,void 0,function*(){const i=q0.get(t);i&&(yield i.run(this._forward))})}}class Q6e extends joe{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:b("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:$.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:G.MenubarSelectionMenu,group:"1_basic",title:b({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}Li.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class X6e extends joe{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:b("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:$.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:G.MenubarSelectionMenu,group:"1_basic",title:b({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}Ei(q0.ID,q0);We(Q6e);We(X6e);function Koe(s,e,t,i,n){return r2(this,void 0,void 0,function*(){const o=s.all(e).concat(new G6e);o.length===1&&o.unshift(new Oa);const r=[],a=[];for(const l of o)r.push(Promise.resolve(l.provideSelectionRanges(e,t,n)).then(c=>{if(Po(c)&&c.length===t.length)for(let d=0;d<t.length;d++){a[d]||(a[d]=[]);for(const f of c[d])M.isIRange(f.range)&&M.containsPosition(f.range,t[d])&&a[d].push(M.lift(f.range))}},Ys));return yield Promise.all(r),a.map(l=>{if(l.length===0)return[];l.sort((g,m)=>se.isBefore(g.getStartPosition(),m.getStartPosition())?1:se.isBefore(m.getStartPosition(),g.getStartPosition())||se.isBefore(g.getEndPosition(),m.getEndPosition())?-1:se.isBefore(m.getEndPosition(),g.getEndPosition())?1:0);const c=[];let d;for(const g of l)(!d||M.containsRange(g,d)&&!M.equalsRange(g,d))&&(c.push(g),d=g);if(!i.selectLeadingAndTrailingWhitespace)return c;const f=[c[0]];for(let g=1;g<c.length;g++){const m=c[g-1],_=c[g];if(_.startLineNumber!==m.startLineNumber||_.endLineNumber!==m.endLineNumber){const C=new M(m.startLineNumber,e.getLineFirstNonWhitespaceColumn(m.startLineNumber),m.endLineNumber,e.getLineLastNonWhitespaceColumn(m.endLineNumber));C.containsRange(m)&&!C.equalsRange(m)&&_.containsRange(C)&&!_.equalsRange(C)&&f.push(C);const S=new M(m.startLineNumber,1,m.endLineNumber,e.getLineMaxColumn(m.endLineNumber));S.containsRange(m)&&!S.equalsRange(C)&&_.containsRange(S)&&!_.equalsRange(S)&&f.push(S)}f.push(_)}return f})})}Li.registerCommand("_executeSelectionRangeProvider",function(s,...e){return r2(this,void 0,void 0,function*(){const[t,i]=e;Qi(yt.isUri(t));const n=s.get(ct).selectionRangeProvider,o=yield s.get(Yr).createModelReference(t);try{return Koe(n,o.object.textEditorModel,i,{selectLeadingAndTrailingWhitespace:!0},ri.None)}finally{o.dispose()}})});var eW=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Pm=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},J6e=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};class eVe{constructor(e,t,i,n,o,r){this.range=e,this.insertText=t,this.filterText=i,this.additionalTextEdits=n,this.command=o,this.completion=r}}let p8=class extends h1e{constructor(e,t,i,n,o,r){super(o.disposable),this.model=e,this.line=t,this.word=i,this.completionModel=n,this._suggestMemoryService=r}canBeReused(e,t,i){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&this.completionModel.incomplete.size===0}get items(){var e;const t=[],{items:i}=this.completionModel,n=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},i),o=fi.slice(i,n),r=fi.slice(i,0,n);let a=5;for(const l of fi.concat(o,r)){if(l.score===ou.Default)continue;const c=new M(l.editStart.lineNumber,l.editStart.column,l.editInsertEnd.lineNumber,l.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),d=l.completion.insertTextRules&&l.completion.insertTextRules&DT.InsertAsSnippet?{snippet:l.completion.insertText}:l.completion.insertText;t.push(new eVe(c,d,(e=l.filterTextLow)!==null&&e!==void 0?e:l.labelLow,l.completion.additionalTextEdits,l.completion.command,l)),a-->=0&&l.resolve(ri.None)}return t}};p8=eW([Pm(5,YR)],p8);let m8=class{constructor(e,t,i,n){this._getEditorOption=e,this._languageFeatureService=t,this._clipboardService=i,this._suggestMemoryService=n}provideInlineCompletions(e,t,i,n){var o;return J6e(this,void 0,void 0,function*(){if(i.selectedSuggestionInfo)return;const r=this._getEditorOption(81,e);if(Ob.isAllOff(r))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const a=e.tokenization.getLineTokens(t.lineNumber),l=a.getStandardTokenType(a.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(Ob.valueFor(r,l)!=="inline")return;let c=e.getWordAtPosition(t),d;if(c!=null&&c.word||(d=this._getTriggerCharacterInfo(e,t)),!(c!=null&&c.word)&&!d||(c||(c=e.getWordUntilPosition(t)),c.endColumn!==t.column))return;let f;const g=e.getValueInRange(new M(t.lineNumber,1,t.lineNumber,t.column));if(!d&&((o=this._lastResult)===null||o===void 0?void 0:o.canBeReused(e,t.lineNumber,c))){const m=new KZ(g,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=m,this._lastResult.acquire(),f=this._lastResult}else{const m=yield AV(this._languageFeatureService.completionProvider,e,t,new PS(void 0,void 0,d==null?void 0:d.providers),d&&{triggerKind:1,triggerCharacter:d.ch},n);let _;m.needsClipboard&&(_=yield this._clipboardService.readText());const C=new ng(m.items,t.column,new KZ(g,0),qc.None,this._getEditorOption(108,e),this._getEditorOption(103,e),{boostFullMatch:!1,firstMatchCanBeWeak:!1},_);f=new p8(e,t.lineNumber,c,C,m,this._suggestMemoryService)}return this._lastResult=f,f})}handleItemDidShow(e,t){t.completion.resolve(ri.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var i;const n=e.getValueInRange(M.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),o=new Set;for(const r of this._languageFeatureService.completionProvider.all(e))!((i=r.triggerCharacters)===null||i===void 0)&&i.includes(n)&&o.add(r);if(o.size!==0)return{providers:o,ch:n}}};m8=eW([Pm(1,ct),Pm(2,of),Pm(3,YR)],m8);let sN=class fb{constructor(e,t,i,n){if(++fb._counter===1){const o=n.createInstance(m8,(r,a)=>{var l;return((l=i.listCodeEditors().find(d=>d.getModel()===a))!==null&&l!==void 0?l:e).getOption(r)});fb._disposable=t.inlineCompletionsProvider.register("*",o)}}dispose(){var e;--fb._counter===0&&((e=fb._disposable)===null||e===void 0||e.dispose(),fb._disposable=void 0)}};sN._counter=0;sN=eW([Pm(1,ct),Pm(2,Vi),Pm(3,Zt)],sN);Ei("suggest.inlineCompletionsProvider",sN);class tVe extends ot{constructor(){super({id:"editor.action.forceRetokenize",label:b("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getModel();i.tokenization.resetTokenization();const n=new qr(!0);i.tokenization.forceTokenization(i.getLineCount()),n.stop(),console.log(`tokenization took ${n.elapsed()}`)}}We(tVe);class G0 extends ot{constructor(){super({id:G0.ID,label:b({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}run(e,t){const n=!UT.getTabFocusMode();UT.setTabFocusMode(n),go(n?b("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):b("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}G0.ID="editor.action.toggleTabFocusMode";We(G0);var iVe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},nVe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let _8=class extends ge{constructor(e,t,i={},n){var o;super(),this._link=t,this._enabled=!0,this.el=Se(e,Pe("a.monaco-link",{tabIndex:(o=t.tabIndex)!==null&&o!==void 0?o:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");const r=this._register(new an(this.el,"click")),a=this._register(new an(this.el,"keypress")),l=gt.chain(a.event).map(f=>new kn(f)).filter(f=>f.keyCode===3).event,c=this._register(new an(this.el,vn.Tap)).event;this._register(Zi.addTarget(this.el));const d=gt.any(r.event,l,c);this._register(d(f=>{!this.enabled||(qi.stop(f,!0),i!=null&&i.opener?i.opener(this._link.href):n.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}};_8=iVe([nVe(3,Ol)],_8);Cn((s,e)=>{const t=s.getColor($N);t&&e.addRule(`.monaco-link { color: ${t}; }`);const i=s.getColor(jN);i&&e.addRule(`.monaco-link:hover { color: ${i}; }`)});var qoe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Goe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const sVe=26;let v8=class extends ge{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(b8))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{var t;this.hide(),(t=e.onClose)===null||t===void 0||t.call(e)}})),this._editor.setBanner(this.banner.element,sVe)}};v8=qoe([Goe(1,Zt)],v8);let b8=class extends ge{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(ef,{}),this.element=Pe("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=Pe("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){Ts(this.element)}show(e){Ts(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const i=Se(this.element,Pe("div.icon-container"));i.setAttribute("aria-hidden","true"),e.icon&&i.appendChild(Pe(`div${Pi.asCSSSelector(e.icon)}`));const n=Se(this.element,Pe("div.message-container"));if(n.setAttribute("aria-hidden","true"),n.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=Se(this.element,Pe("div.message-actions-container")),e.actions)for(const r of e.actions)this._register(this.instantiationService.createInstance(_8,this.messageActionsContainer,Object.assign(Object.assign({},r),{tabIndex:-1}),{}));const o=Se(this.element,Pe("div.action-container"));this.actionBar=this._register(new Cd(o)),this.actionBar.push(this._register(new _a("banner.close","Close Banner",Pi.asClassName(Rte),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};b8=qoe([Goe(0,Zt)],b8);var tW=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},a0=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},Ao=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const oVe=Ls("extensions-warning-message",w.warning,b("warningIcon","Icon shown with a warning message in the extensions editor."));let Y0=class extends ge{constructor(e,t,i,n){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=i,this._highlighter=null,this._bannerClosed=!1,this._updateState=o=>{if(o&&o.hasMore){if(this._bannerClosed)return;const r=Math.max(o.ambiguousCharacterCount,o.nonBasicAsciiCharacterCount,o.invisibleCharacterCount);let a;if(o.nonBasicAsciiCharacterCount>=r)a={message:b("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new wC};else if(o.ambiguousCharacterCount>=r)a={message:b("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new ap};else if(o.invisibleCharacterCount>=r)a={message:b("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new CC};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:oVe,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(n.createInstance(v8,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(115),this._register(i.onDidChangeTrust(o=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(o=>{o.hasChanged(115)&&(this._options=e.getOption(115),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=rVe(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(i=>i===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(i=>i.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(i=>i==="_os"?new Intl.NumberFormat().resolvedOptions().locale:i==="_vscode"?nCe:i)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new C8(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new aVe(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};Y0.ID="editor.contrib.unicodeHighlighter";Y0=tW([a0(1,Ml),a0(2,Gte),a0(3,Zt)],Y0);function rVe(s,e){return{nonBasicASCII:e.nonBasicASCII===Ma?!s:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===Ma?!s:e.includeComments,includeStrings:e.includeStrings===Ma?!s:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}let C8=class extends ge{constructor(e,t,i,n){super(),this._editor=e,this._options=t,this._updateState=i,this._editorWorkerService=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new Xi(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const i=[];if(!t.hasMore)for(const n of t.ranges)i.push({range:n,options:oN.instance.getDecorationFromOptions(this._options)});this._decorations.set(i)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!f6(t,e))return null;const i=t.getValueInRange(e.range);return{reason:Yoe(i,this._options),inComment:g6(t,e),inString:p6(t,e)}}};C8=tW([a0(3,Ml)],C8);class aVe extends ge{constructor(e,t,i){super(),this._editor=e,this._options=t,this._updateState=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new Xi(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],i={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const n of e){const o=CB.computeUnicodeHighlights(this._model,this._options,n);for(const r of o.ranges)i.ranges.push(r);i.ambiguousCharacterCount+=i.ambiguousCharacterCount,i.invisibleCharacterCount+=i.invisibleCharacterCount,i.nonBasicAsciiCharacterCount+=i.nonBasicAsciiCharacterCount,i.hasMore=i.hasMore||o.hasMore}if(!i.hasMore)for(const n of i.ranges)t.push({range:n,options:oN.instance.getDecorationFromOptions(this._options)});this._updateState(i),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),i=t.getValueInRange(e.range);return f6(t,e)?{reason:Yoe(i,this._options),inComment:g6(t,e),inString:p6(t,e)}:null}}let w8=class{constructor(e,t,i){this._editor=e,this._languageService=t,this._openerService=i,this.hoverOrdinal=4}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),n=this._editor.getContribution(Y0.ID);if(!n)return[];const o=[];let r=300;for(const a of t){const l=n.getDecorationInfo(a);if(!l)continue;const d=i.getValueInRange(a.range).codePointAt(0),f=sQ(d);let g;switch(l.reason.kind){case 0:g=b("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",f,sQ(l.reason.confusableWith.codePointAt(0)));break;case 1:g=b("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",f);break;case 2:g=b("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",f);break}const m={codePoint:d,reason:l.reason,inComment:l.inComment,inString:l.inString},_=b("unicodeHighlight.adjustSettings","Adjust settings"),C=`command:${zL.ID}?${encodeURIComponent(JSON.stringify(m))}`,S=new Wr("",!0).appendMarkdown(g).appendText(" ").appendLink(C,_);o.push(new td(this,a.range,[S],r++))}return o}renderHoverParts(e,t){return Ose(e,t,this._editor,this._languageService,this._openerService)}};w8=tW([a0(1,Vn),a0(2,Ol)],w8);function y8(s){return`U+${s.toString(16).padStart(4,"0")}`}function sQ(s){let e=`\`${y8(s)}\``;return hd.isInvisibleCharacter(s)||(e+=` "${`${lVe(s)}`}"`),e}function lVe(s){return s===96?"`` ` ``":"`"+String.fromCodePoint(s)+"`"}function Yoe(s,e){return CB.computeUnicodeHighlightReason(s,e)}class oN{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const i=`${e}${t}`;let n=this.map.get(i);return n||(n=Gt.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(i,n)),n}}oN.instance=new oN;class cVe extends ot{constructor(){super({id:ap.ID,label:b("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=b("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}run(e,t,i){return Ao(this,void 0,void 0,function*(){const n=e==null?void 0:e.get(Ai);n&&this.runAction(n)})}runAction(e){return Ao(this,void 0,void 0,function*(){yield e.updateValue(Br.includeComments,!1,2)})}}class uVe extends ot{constructor(){super({id:ap.ID,label:b("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=b("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}run(e,t,i){return Ao(this,void 0,void 0,function*(){const n=e==null?void 0:e.get(Ai);n&&this.runAction(n)})}runAction(e){return Ao(this,void 0,void 0,function*(){yield e.updateValue(Br.includeStrings,!1,2)})}}class ap extends ot{constructor(){super({id:ap.ID,label:b("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=b("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,i){return Ao(this,void 0,void 0,function*(){const n=e==null?void 0:e.get(Ai);n&&this.runAction(n)})}runAction(e){return Ao(this,void 0,void 0,function*(){yield e.updateValue(Br.ambiguousCharacters,!1,2)})}}ap.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class CC extends ot{constructor(){super({id:CC.ID,label:b("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=b("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,i){return Ao(this,void 0,void 0,function*(){const n=e==null?void 0:e.get(Ai);n&&this.runAction(n)})}runAction(e){return Ao(this,void 0,void 0,function*(){yield e.updateValue(Br.invisibleCharacters,!1,2)})}}CC.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class wC extends ot{constructor(){super({id:wC.ID,label:b("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=b("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,i){return Ao(this,void 0,void 0,function*(){const n=e==null?void 0:e.get(Ai);n&&this.runAction(n)})}runAction(e){return Ao(this,void 0,void 0,function*(){yield e.updateValue(Br.nonBasicASCII,!1,2)})}}wC.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class zL extends ot{constructor(){super({id:zL.ID,label:b("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,i){return Ao(this,void 0,void 0,function*(){const{codePoint:n,reason:o,inString:r,inComment:a}=i,l=String.fromCodePoint(n),c=e.get(rf),d=e.get(Ai);function f(_){return hd.isInvisibleCharacter(_)?b("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",y8(_)):b("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${y8(_)} "${l}"`)}const g=[];if(o.kind===0)for(const _ of o.notAmbiguousInLocales)g.push({label:b("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',_),run:()=>Ao(this,void 0,void 0,function*(){hVe(d,[_])})});if(g.push({label:f(n),run:()=>dVe(d,[n])}),a){const _=new cVe;g.push({label:_.label,run:()=>Ao(this,void 0,void 0,function*(){return _.runAction(d)})})}else if(r){const _=new uVe;g.push({label:_.label,run:()=>Ao(this,void 0,void 0,function*(){return _.runAction(d)})})}if(o.kind===0){const _=new ap;g.push({label:_.label,run:()=>Ao(this,void 0,void 0,function*(){return _.runAction(d)})})}else if(o.kind===1){const _=new CC;g.push({label:_.label,run:()=>Ao(this,void 0,void 0,function*(){return _.runAction(d)})})}else if(o.kind===2){const _=new wC;g.push({label:_.label,run:()=>Ao(this,void 0,void 0,function*(){return _.runAction(d)})})}else fVe(o);const m=yield c.pick(g,{title:b("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});m&&(yield m.run())})}}zL.ID="editor.action.unicodeHighlight.showExcludeOptions";function dVe(s,e){return Ao(this,void 0,void 0,function*(){const t=s.getValue(Br.allowedCharacters);let i;typeof t=="object"&&t?i=t:i={};for(const n of e)i[String.fromCodePoint(n)]=!0;yield s.updateValue(Br.allowedCharacters,i,2)})}function hVe(s,e){var t;return Ao(this,void 0,void 0,function*(){const i=(t=s.inspect(Br.allowedLocales).user)===null||t===void 0?void 0:t.value;let n;typeof i=="object"&&i?n=Object.assign({},i):n={};for(const o of e)n[o]=!0;yield s.updateValue(Br.allowedLocales,n,2)})}function fVe(s){throw new Error(`Unexpected value: ${s}`)}We(ap);We(CC);We(wC);We(zL);Ei(Y0.ID,Y0);P_.register(w8);var gVe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},oQ=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},pVe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};const Zoe="ignoreUnusualLineTerminators";function mVe(s,e,t){s.setModelProperty(e.uri,Zoe,t)}function _Ve(s,e){return s.getModelProperty(e.uri,Zoe)}let YS=class extends ge{constructor(e,t,i){super(),this._editor=e,this._dialogService=t,this._codeEditorService=i,this._config=this._editor.getOption(116),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(116)&&(this._config=this._editor.getOption(116),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(n=>{n.isUndoing||this._checkForUnusualLineTerminators()}))}_checkForUnusualLineTerminators(){return pVe(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||_Ve(this._codeEditorService,e)===!0||this._editor.getOption(83))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(!(yield this._dialogService.confirm({title:b("unusualLineTerminators.title","Unusual Line Terminators"),message:b("unusualLineTerminators.message","Detected unusual line terminators"),detail:b("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",Rl(e.uri)),primaryButton:b("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:b("unusualLineTerminators.ignore","Ignore")})).confirmed){mVe(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}};YS.ID="editor.contrib.unusualLineTerminatorsDetector";YS=gVe([oQ(1,wL),oQ(2,Vi)],YS);Ei(YS.ID,YS);var vVe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},kw=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let ZS=class extends ge{constructor(e,t,i,n,o,r){super(),this._modelService=t,this._themeService=i,this._configurationService=n,this._editor=e,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=o.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new Xi(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(B6)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()}))}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,i=this._outstandingRequests.length;t<i;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!k7(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!P2e(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(i=>this._requestRange(e,i)))}_requestRange(e,t){const i=e.getVersionId(),n=qs(r=>Promise.resolve(P6(this._provider,e,t,r))),o=new qr(!1);return n.then(r=>{if(this._debounceInformation.update(e,o.elapsed()),!r||!r.tokens||e.isDisposed()||e.getVersionId()!==i)return;const{provider:a,tokens:l}=r,c=this._modelService.getSemanticTokensProviderStyling(a);e.tokenization.setPartialSemanticTokens(t,Jte(l,c,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(n),()=>this._removeOutstandingRequest(n)),n}};ZS.ID="editor.contrib.viewportSemanticTokens";ZS=vVe([kw(1,Hn),kw(2,cn),kw(3,Ai),kw(4,Pl),kw(5,ct)],ZS);Ei(ZS.ID,ZS);var bVe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},rQ=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const CVe=j("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},b("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),wVe=j("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},b("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),yVe=j("editor.wordHighlightBorder",{light:null,dark:null,hcDark:En,hcLight:En},b("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),SVe=j("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:En,hcLight:En},b("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),LVe=j("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},b("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),xVe=j("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},b("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),a2=new st("hasWordHighlights",!1);function Qoe(s,e,t,i){const n=s.ordered(e);return wJ(n.map(o=>()=>Promise.resolve(o.provideDocumentHighlights(e,t,i)).then(void 0,Ys)),Po)}class Xoe{constructor(e,t,i){this._model=e,this._selection=t,this._wordSeparators=i,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=qs(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const i=e.getWordAtPosition(t.getPosition());return i?new M(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):null}isValid(e,t,i){const n=t.startLineNumber,o=t.startColumn,r=t.endColumn,a=this._getCurrentWordRange(e,t);let l=Boolean(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,d=i.length;!l&&c<d;c++){const f=i.getRange(c);f&&f.startLineNumber===n&&f.startColumn<=o&&f.endColumn>=r&&(l=!0)}return l}cancel(){this.result.cancel()}}class DVe extends Xoe{constructor(e,t,i,n){super(e,t,i),this._providers=n}_compute(e,t,i,n){return Qoe(this._providers,e,t.getPosition(),n).then(o=>o||[])}}class kVe extends Xoe{constructor(e,t,i){super(e,t,i),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,i,n){return Ag(250,n).then(()=>{if(!t.isEmpty())return[];const o=e.getWordAtPosition(t.getPosition());return!o||o.word.length>1e3?[]:e.findMatches(o.word,!0,!1,!0,i,!1).map(a=>({range:a.range,kind:Oy.Text}))})}isValid(e,t,i){const n=t.isEmpty();return this._selectionIsEmpty!==n?!1:super.isValid(e,t,i)}}function EVe(s,e,t,i){return s.has(e)?new DVe(e,t,i,s):new kVe(e,t,i)}Ed("_executeDocumentHighlights",(s,e,t)=>{const i=s.get(ct);return Qoe(i.documentHighlightProvider,e,t,ri.None)});class yC{constructor(e,t,i){this.toUnhook=new Ae,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=t,this._hasWordHighlights=a2.bindTo(i),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(74),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(n=>{this._ignorePositionChangeEvent||!this.occurrencesHighlight||this._onPositionChanged(n)})),this.toUnhook.add(e.onDidChangeModelContent(n=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(n=>{const o=this.editor.getOption(74);this.occurrencesHighlight!==o&&(this.occurrencesHighlight=o,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this.decorations.length>0}restore(){!this.occurrencesHighlight||this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(M.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),i=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))+1)%e.length,n=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);const o=this._getWord();if(o){const r=this.editor.getModel().getLineContent(n.startLineNumber);go(`${r}, ${i+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),i=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,n=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);const o=this._getWord();if(o){const r=this.editor.getModel().getLineContent(n.startLineNumber);go(`${r}, ${i+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,i=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:i})}_run(){const e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}const t=e.startColumn,i=e.endColumn,n=this._getWord();if(!n||n.startColumn>t||n.endColumn<i){this._stopAll();return}const o=this.workerRequest&&this.workerRequest.isValid(this.model,e,this.decorations);if(this.lastCursorPositionChangeTime=new Date().getTime(),o)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();const r=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=EVe(this.providers,this.model,this.editor.getSelection(),this.editor.getOption(119)),this.workerRequest.result.then(a=>{r===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},Yt)}}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;const e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:yC._getDecorationOptions(t.kind)});this.decorations.set(e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===Oy.Write?this._WRITE_OPTIONS:e===Oy.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}yC._WRITE_OPTIONS=Gt.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Yn(xVe),position:El.Center},minimap:{color:Yn(YN),position:Ll.Inline}});yC._TEXT_OPTIONS=Gt.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Yn(_ee),position:El.Center},minimap:{color:Yn(YN),position:Ll.Inline}});yC._REGULAR_OPTIONS=Gt.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Yn(LVe),position:El.Center},minimap:{color:Yn(YN),position:Ll.Inline}});let m_=class Joe extends ge{constructor(e,t,i){super(),this.wordHighlighter=null;const n=()=>{e.hasModel()&&(this.wordHighlighter=new yC(e,i.documentHighlightProvider,t))};this._register(e.onDidChangeModel(o=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),n()})),n()}static get(e){return e.getContribution(Joe.ID)}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};m_.ID="editor.contrib.wordHighlighter";m_=bVe([rQ(1,jt),rQ(2,ct)],m_);class ere extends ot{constructor(e,t){super(t),this._isNext=e}run(e,t){const i=m_.get(t);!i||(this._isNext?i.moveNext():i.moveBack())}}class TVe extends ere{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:b("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:a2,kbOpts:{kbExpr:$.editorTextFocus,primary:65,weight:100}})}}class IVe extends ere{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:b("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:a2,kbOpts:{kbExpr:$.editorTextFocus,primary:1089,weight:100}})}}class NVe extends ot{constructor(){super({id:"editor.action.wordHighlight.trigger",label:b("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:a2.toNegated(),kbOpts:{kbExpr:$.editorTextFocus,primary:0,weight:100}})}run(e,t,i){const n=m_.get(t);!n||n.restoreViewState(!0)}}Ei(m_.ID,m_);We(TVe);We(IVe);We(NVe);Cn((s,e)=>{const t=s.getColor(HB);t&&(e.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${t}; }`),e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`));const i=s.getColor(CVe);i&&e.addRule(`.monaco-editor .wordHighlight { background-color: ${i}; }`);const n=s.getColor(wVe);n&&e.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${n}; }`);const o=s.getColor(hxe);o&&e.addRule(`.monaco-editor .selectionHighlight { border: 1px ${Vo(s.type)?"dotted":"solid"} ${o}; box-sizing: border-box; }`);const r=s.getColor(yVe);r&&e.addRule(`.monaco-editor .wordHighlight { border: 1px ${Vo(s.type)?"dashed":"solid"} ${r}; box-sizing: border-box; }`);const a=s.getColor(SVe);a&&e.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${Vo(s.type)?"dashed":"solid"} ${a}; box-sizing: border-box; }`)});class l2 extends Fs{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){if(!t.hasModel())return;const n=Tl(t.getOption(119)),o=t.getModel(),a=t.getSelections().map(l=>{const c=new se(l.positionLineNumber,l.positionColumn),d=this._move(n,o,c,this._wordNavigationType);return this._moveTo(l,d,this._inSelectionMode)});if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(l=>ui.fromModelSelection(l))),a.length===1){const l=new se(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(l,0)}}_moveTo(e,t,i){return i?new et(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new et(t.lineNumber,t.column,t.lineNumber,t.column)}}class lp extends l2{_move(e,t,i,n){return Ii.moveWordLeft(e,t,i,n)}}class cp extends l2{_move(e,t,i,n){return Ii.moveWordRight(e,t,i,n)}}class RVe extends lp{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class AVe extends lp{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class MVe extends lp{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:Je.and($.textInputFocus,(e=Je.and(hL,_R))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class OVe extends lp{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class PVe extends lp{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class FVe extends lp{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:Je.and($.textInputFocus,(e=Je.and(hL,_R))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class BVe extends lp{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,i,n){return super._move(Tl(fu.wordSeparators.defaultValue),t,i,n)}}class VVe extends lp{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,i,n){return super._move(Tl(fu.wordSeparators.defaultValue),t,i,n)}}class WVe extends cp{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class HVe extends cp{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:Je.and($.textInputFocus,(e=Je.and(hL,_R))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class zVe extends cp{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class UVe extends cp{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class $Ve extends cp{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:Je.and($.textInputFocus,(e=Je.and(hL,_R))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class jVe extends cp{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class KVe extends cp{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,i,n){return super._move(Tl(fu.wordSeparators.defaultValue),t,i,n)}}class qVe extends cp{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,i,n){return super._move(Tl(fu.wordSeparators.defaultValue),t,i,n)}}class c2 extends Fs{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){const n=e.get(os);if(!t.hasModel())return;const o=Tl(t.getOption(119)),r=t.getModel(),a=t.getSelections(),l=t.getOption(5),c=t.getOption(8),d=n.getLanguageConfiguration(r.getLanguageId()).getAutoClosingPairs(),f=t._getViewModel(),g=a.map(m=>{const _=this._delete({wordSeparators:o,model:r,selection:m,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:l,autoClosingQuotes:c,autoClosingPairs:d,autoClosedCharacters:f.getCursorAutoClosedCharacters()},this._wordNavigationType);return new ro(_,"")});t.pushUndoStop(),t.executeCommands(this.id,g),t.pushUndoStop()}}class iW extends c2{_delete(e,t){const i=Ii.deleteWordLeft(e,t);return i||new M(1,1,1,1)}}class nW extends c2{_delete(e,t){const i=Ii.deleteWordRight(e,t);if(i)return i;const n=e.model.getLineCount(),o=e.model.getLineMaxColumn(n);return new M(n,o,n,o)}}class GVe extends iW{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:$.writable})}}class YVe extends iW{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:$.writable})}}class ZVe extends iW{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:$.writable,kbOpts:{kbExpr:$.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class QVe extends nW{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:$.writable})}}class XVe extends nW{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:$.writable})}}class JVe extends nW{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:$.writable,kbOpts:{kbExpr:$.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class eWe extends ot{constructor(){super({id:"deleteInsideWord",precondition:$.writable,label:b("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,i){if(!t.hasModel())return;const n=Tl(t.getOption(119)),o=t.getModel(),a=t.getSelections().map(l=>{const c=Ii.deleteInsideWord(n,o,l);return new ro(c,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}Be(new RVe);Be(new AVe);Be(new MVe);Be(new OVe);Be(new PVe);Be(new FVe);Be(new WVe);Be(new HVe);Be(new zVe);Be(new UVe);Be(new $Ve);Be(new jVe);Be(new BVe);Be(new VVe);Be(new KVe);Be(new qVe);Be(new GVe);Be(new YVe);Be(new ZVe);Be(new QVe);Be(new XVe);Be(new JVe);We(eWe);class tWe extends c2{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:$.writable,kbOpts:{kbExpr:$.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const i=XN.deleteWordPartLeft(e);return i||new M(1,1,1,1)}}class iWe extends c2{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:$.writable,kbOpts:{kbExpr:$.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const i=XN.deleteWordPartRight(e);if(i)return i;const n=e.model.getLineCount(),o=e.model.getLineMaxColumn(n);return new M(n,o,n,o)}}class tre extends l2{_move(e,t,i,n){return XN.moveWordPartLeft(e,t,i)}}class nWe extends tre{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:$.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}Li.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class sWe extends tre{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:$.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}Li.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class ire extends l2{_move(e,t,i,n){return XN.moveWordPartRight(e,t,i)}}class oWe extends ire{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:$.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class rWe extends ire{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:$.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}Be(new tWe);Be(new iWe);Be(new nWe);Be(new sWe);Be(new oWe);Be(new rWe);class S8 extends ge{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=Ca.get(this.editor);e&&this.editor.hasModel()&&(this.editor.isSimpleWidget?e.showMessage(b("editor.simple.readonly","Cannot edit in read-only input"),this.editor.getPosition()):e.showMessage(b("editor.readonly","Cannot edit in read-only editor"),this.editor.getPosition()))}}S8.ID="editor.contrib.readOnlyMessageController";Ei(S8.ID,S8);var nre=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},sT=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};const sre=new st("accessibilityHelpWidgetVisible",!1);let __=class ore extends ge{constructor(e,t){super(),this._editor=e,this._widget=this._register(t.createInstance(Z0,this._editor))}static get(e){return e.getContribution(ore.ID)}show(){this._widget.show()}hide(){this._widget.hide()}};__.ID="editor.contrib.accessibilityHelpController";__=nre([sT(1,Zt)],__);function aWe(s,e){return!s||s.length===0?bs.noSelection:s.length===1?e?bl(bs.singleSelectionRange,s[0].positionLineNumber,s[0].positionColumn,e):bl(bs.singleSelection,s[0].positionLineNumber,s[0].positionColumn):e?bl(bs.multiSelectionRange,s.length,e):s.length>0?bl(bs.multiSelection,s.length):""}let Z0=class oT extends gc{constructor(e,t,i,n){super(),this._contextKeyService=t,this._keybindingService=i,this._openerService=n,this._editor=e,this._isVisibleKey=sre.bindTo(this._contextKeyService),this._domNode=Di(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=Di(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register(Ps(this._contentDomNode.domNode,"keydown",o=>{if(!!this._isVisible&&(o.equals(2083)&&(go(bs.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),Ts(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),o.preventDefault(),o.stopPropagation()),o.equals(2086))){go(bs.openingDocs);let r=this._editor.getRawOptions().accessibilityHelpUrl;typeof r>"u"&&(r="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(yt.parse(r)),o.preventDefault(),o.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return oT.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,t,i){const n=this._keybindingService.lookupKeybinding(e);return n?bl(t,n.getAriaLabel()):bl(i,e)}_buildContent(){const e=this._editor.getOptions(),t=this._editor.getSelections();let i=0;if(t){const a=this._editor.getModel();a&&t.forEach(l=>{i+=a.getValueLengthInRange(l)})}let n=aWe(t,i);e.get(56)?e.get(83)?n+=bs.readonlyDiffEditor:n+=bs.editableDiffEditor:e.get(83)?n+=bs.readonlyEditor:n+=bs.editableEditor;const o=mi?bs.changeConfigToOnMac:bs.changeConfigToOnWinLinux;switch(e.get(2)){case 0:n+=`

 - `+o;break;case 2:n+=`

 - `+bs.auto_on;break;case 1:n+=`

 - `+bs.auto_off,n+=" "+o;break}e.get(132)?n+=`

 - `+this._descriptionForCommand(G0.ID,bs.tabFocusModeOnMsg,bs.tabFocusModeOnMsgNoKb):n+=`

 - `+this._descriptionForCommand(G0.ID,bs.tabFocusModeOffMsg,bs.tabFocusModeOffMsgNoKb);const r=mi?bs.openDocMac:bs.openDocWinLinux;n+=`

 - `+r,n+=`

`+bs.outroMsg,this._contentDomNode.domNode.appendChild(rie(n)),this._contentDomNode.domNode.setAttribute("aria-label",n)}hide(){!this._isVisible||(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,Ts(this._contentDomNode.domNode),this._editor.focus())}_layout(){const e=this._editor.getLayoutInfo(),t=Math.max(5,Math.min(oT.WIDTH,e.width-40)),i=Math.max(5,Math.min(oT.HEIGHT,e.height-40));this._domNode.setWidth(t),this._domNode.setHeight(i);const n=Math.round((e.height-i)/2);this._domNode.setTop(n);const o=Math.round((e.width-t)/2);this._domNode.setLeft(o)}};Z0.ID="editor.contrib.accessibilityHelpWidget";Z0.WIDTH=500;Z0.HEIGHT=300;Z0=nre([sT(1,jt),sT(2,xs),sT(3,Ol)],Z0);class lWe extends ot{constructor(){super({id:"editor.action.showAccessibilityHelp",label:bs.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(e,t){const i=__.get(t);i&&i.show()}}Ei(__.ID,__);We(lWe);const cWe=Fs.bindToContribution(__.get);Be(new cWe({id:"closeAccessibilityHelp",precondition:sre,handler:s=>s.hide(),kbOpts:{weight:100+100,kbExpr:$.focus,primary:9,secondary:[1033]}}));Cn((s,e)=>{const t=s.getColor(hs);t&&e.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${t}; }`);const i=s.getColor(Xc);i&&e.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${i}; }`);const n=s.getColor(Qc);n&&e.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${n}; }`);const o=s.getColor(si);o&&e.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${o}; }`)});class L8 extends ge{constructor(e){super(),this.editor=e,this.widget=null,gd&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(83);!this.widget&&e?this.widget=new u2(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}L8.ID="editor.contrib.iPadShowKeyboard";class u2 extends ge{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(Le(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(Le(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return u2.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}u2.ID="editor.contrib.ShowKeyboardWidget";Ei(L8.ID,L8);var uWe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},aQ=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let Q0=class rre extends ge{constructor(e,t,i){super(),this._editor=e,this._languageService=i,this._widget=null,this._register(this._editor.onDidChangeModel(n=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(n=>this.stop())),this._register(Fn.onDidChange(n=>this.stop())),this._register(this._editor.onKeyUp(n=>n.keyCode===9&&this.stop()))}static get(e){return e.getContribution(rre.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||!this._editor.hasModel()||(this._widget=new d2(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};Q0.ID="editor.contrib.inspectTokens";Q0=uWe([aQ(1,Xa),aQ(2,Vn)],Q0);class dWe extends ot{constructor(){super({id:"editor.action.inspectTokens",label:f7.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const i=Q0.get(t);i&&i.launch()}}function hWe(s){let e="";for(let t=0,i=s.length;t<i;t++){const n=s.charCodeAt(t);switch(n){case 9:e+="\u2192";break;case 32:e+="\xB7";break;default:e+=String.fromCharCode(n)}}return e}function fWe(s,e){const t=Fn.get(e);if(t)return t;const i=s.encodeLanguageId(e);return{getInitialState:()=>p0,tokenize:(n,o,r)=>gB(e,r),tokenizeEncoded:(n,o,r)=>DN(i,r)}}class d2 extends ge{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=fWe(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(i=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return d2._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let i=0;for(let l=t.tokens1.length-1;l>=0;l--){const c=t.tokens1[l];if(e.column-1>=c.offset){i=l;break}}let n=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){n=l;break}const o=this._model.getLineContent(e.lineNumber);let r="";if(i<t.tokens1.length){const l=t.tokens1[i].offset,c=i+1<t.tokens1.length?t.tokens1[i+1].offset:o.length;r=o.substring(l,c)}Mg(this._domNode,Pe("h2.tm-token",void 0,hWe(r),Pe("span.tm-token-length",void 0,`${r.length} ${r.length===1?"char":"chars"}`))),Se(this._domNode,Pe("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(n<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(n<<1)+1]):null;Se(this._domNode,Pe("table.tm-metadata-table",void 0,Pe("tbody",void 0,Pe("tr",void 0,Pe("td.tm-metadata-key",void 0,"language"),Pe("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),Pe("tr",void 0,Pe("td.tm-metadata-key",void 0,"token type"),Pe("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),Pe("tr",void 0,Pe("td.tm-metadata-key",void 0,"font style"),Pe("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),Pe("tr",void 0,Pe("td.tm-metadata-key",void 0,"foreground"),Pe("td.tm-metadata-value",void 0,`${a?oe.Format.CSS.formatHex(a.foreground):"-?-"}`)),Pe("tr",void 0,Pe("td.tm-metadata-key",void 0,"background"),Pe("td.tm-metadata-value",void 0,`${a?oe.Format.CSS.formatHex(a.background):"-?-"}`))))),Se(this._domNode,Pe("hr.tokens-inspect-separator")),i<t.tokens1.length&&Se(this._domNode,Pe("span.tm-token-type",void 0,t.tokens1[i].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=Fn.getColorMap(),i=fo.getLanguageId(e),n=fo.getTokenType(e),o=fo.getFontStyle(e),r=fo.getForeground(e),a=fo.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(i),tokenType:n,fontStyle:o,foreground:t[r],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),i=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),n=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:i.tokens,tokens2:n.tokens,endState:i.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let i=1;i<e;i++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(i),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}d2._ID="editor.contrib.inspectTokensWidget";Ei(Q0.ID,Q0);We(dWe);Cn((s,e)=>{const t=s.getColor(UB);if(t){const o=Vo(s.type)?2:1;e.addRule(`.monaco-editor .tokens-inspect-widget { border: ${o}px solid ${t}; }`),e.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${t}; }`)}const i=s.getColor(jm);i&&e.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${i}; }`);const n=s.getColor(zB);n&&e.addRule(`.monaco-editor .tokens-inspect-widget { color: ${n}; }`)});var gWe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},lQ=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let rN=class rT{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=Wn.as(R_.Quickaccess)}provide(e){const t=new Ae;return t.add(e.onDidAccept(()=>{const[i]=e.selectedItems;i&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(i=>{const n=this.registry.getQuickAccessProvider(i.substr(rT.PREFIX.length));n&&n.prefix&&n.prefix!==rT.PREFIX&&this.quickInputService.quickAccess.show(n.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders(),t}getQuickAccessProviders(){const e=[];for(const t of this.registry.getQuickAccessProviders().sort((i,n)=>i.prefix.localeCompare(n.prefix)))if(t.prefix!==rT.PREFIX)for(const i of t.helpEntries){const n=i.prefix||t.prefix,o=n||"\u2026";e.push({prefix:n,label:o,keybinding:i.commandId?this.keybindingService.lookupKeybinding(i.commandId):void 0,ariaLabel:b("helpPickAriaLabel","{0}, {1}",o,i.description),description:i.description})}return e}};rN.PREFIX="?";rN=gWe([lQ(0,rf),lQ(1,xs)],rN);Wn.as(R_.Quickaccess).registerQuickAccessProvider({ctor:rN,prefix:"",helpEntries:[{description:g7.helpQuickAccessActionLabel}]});class are{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var i;const n=new Ae;e.canAcceptInBackground=!!(!((i=this.options)===null||i===void 0)&&i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const o=n.add(new tr);return o.value=this.doProvide(e,t),n.add(this.onDidActiveTextEditorControlChange(()=>{o.value=void 0,o.value=this.doProvide(e,t)})),n}doProvide(e,t){const i=new Ae,n=this.activeTextEditorControl;if(n&&this.canProvideWithTextEditor(n)){const o={editor:n},r=Xie(n);if(r){let a=zr(n.saveViewState());i.add(r.onDidChangeCursorPosition(()=>{a=zr(n.saveViewState())})),o.restoreViewState=()=>{a&&n===this.activeTextEditorControl&&n.restoreViewState(a)},i.add(qh(t.onCancellationRequested)(()=>{var l;return(l=o.restoreViewState)===null||l===void 0?void 0:l.call(o)}))}i.add(ni(()=>this.clearDecorations(n))),i.add(this.provideWithTextEditor(o,e,t))}else i.add(this.provideWithoutTextEditor(e,t));return i}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return Qie(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(i=>{const n=[];this.rangeHighlightDecorationId&&(n.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),n.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const o=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Yn(ake),position:El.Full}}}],[r,a]=i.deltaDecorations(n,o);this.rangeHighlightDecorationId={rangeHighlightId:r,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(i=>{i.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}class h2 extends are{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=b("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,ge.None}provideWithTextEditor(e,t,i){const n=e.editor,o=new Ae;o.add(t.onDidAccept(l=>{const[c]=t.selectedItems;if(c){if(!this.isValidLineNumber(n,c.lineNumber))return;this.gotoLocation(e,{range:this.toRange(c.lineNumber,c.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const r=()=>{const l=this.parsePosition(n,t.value.trim().substr(h2.PREFIX.length)),c=this.getPickLabel(n,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:c}],t.ariaLabel=c,!this.isValidLineNumber(n,l.lineNumber)){this.clearDecorations(n);return}const d=this.toRange(l.lineNumber,l.column);n.revealRangeInCenter(d,0),this.addDecorations(n,d)};r(),o.add(t.onDidChangeValue(()=>r()));const a=Xie(n);return a&&a.getOptions().get(62).renderType===2&&(a.updateOptions({lineNumbers:"on"}),o.add(ni(()=>a.updateOptions({lineNumbers:"relative"})))),o}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const i=t.split(/,|:|#/).map(o=>parseInt(o,10)).filter(o=>!isNaN(o)),n=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:n+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?b("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):b("gotoLineLabel","Go to line {0}.",t);const n=e.getPosition()||{lineNumber:1,column:1},o=this.lineCount(e);return o>1?b("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",n.lineNumber,n.column,o):b("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",n.lineNumber,n.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,i){if(!i||typeof i!="number")return!1;const n=this.getModel(e);if(!n)return!1;const o={lineNumber:t,column:i};return n.validatePosition(o).equals(o)}lineCount(e){var t,i;return(i=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&i!==void 0?i:0}}h2.PREFIX=":";var pWe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},mWe=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let QS=class extends h2{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=gt.None}get activeTextEditorControl(){return zr(this.editorService.getFocusedCodeEditor())}};QS=pWe([mWe(0,Vi)],QS);class UL extends ot{constructor(){super({id:UL.ID,label:CI.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:$.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(rf).quickAccess.show(QS.PREFIX)}}UL.ID="editor.action.gotoLine";We(UL);Wn.as(R_.Quickaccess).registerQuickAccessProvider({ctor:QS,prefix:QS.PREFIX,helpEntries:[{description:CI.gotoLineActionLabel,commandId:UL.ID}]});const lre=[void 0,[]];function zF(s,e,t=0,i=0){const n=e;return n.values&&n.values.length>1?_We(s,n.values,t,i):cre(s,e,t,i)}function _We(s,e,t,i){let n=0;const o=[];for(const r of e){const[a,l]=cre(s,r,t,i);if(typeof a!="number")return lre;n+=a,o.push(...l)}return[n,vWe(o)]}function cre(s,e,t,i){const n=E0(e.original,e.originalLowercase,t,s,s.toLowerCase(),i,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return n?[n[0],lR(n)]:lre}Object.freeze({score:0});function vWe(s){const e=s.sort((n,o)=>n.start-o.start),t=[];let i;for(const n of e)!i||!bWe(i,n)?(i=n,t.push(n)):(i.start=Math.min(i.start,n.start),i.end=Math.max(i.end,n.end));return t}function bWe(s,e){return!(s.end<e.start||e.end<s.start)}function cQ(s){return s.startsWith('"')&&s.endsWith('"')}const ure=" ";function x8(s){typeof s!="string"&&(s="");const e=s.toLowerCase(),{pathNormalized:t,normalized:i,normalizedLowercase:n}=uQ(s),o=t.indexOf(cd)>=0,r=cQ(s);let a;const l=s.split(ure);if(l.length>1)for(const c of l){const d=cQ(c),{pathNormalized:f,normalized:g,normalizedLowercase:m}=uQ(c);g&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:f,normalized:g,normalizedLowercase:m,expectContiguousMatch:d}))}return{original:s,originalLowercase:e,pathNormalized:t,normalized:i,normalizedLowercase:n,values:a,containsPathSeparator:o,expectContiguousMatch:r}}function uQ(s){let e;mo?e=s.replace(/\//g,cd):e=s.replace(/\\/g,cd);const t=K1e(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function dQ(s){return Array.isArray(s)?x8(s.map(e=>e.original).join(ure)):x8(s.original)}var CWe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},hQ=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},Ew=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let uc=class D8 extends are{constructor(e,t,i=Object.create(null)){super(i),this._languageFeaturesService=e,this._outlineModelService=t,this.options=i,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,b("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),ge.None}provideWithTextEditor(e,t,i){const n=e.editor,o=this.getModel(n);return o?this._languageFeaturesService.documentSymbolProvider.has(o)?this.doProvideWithEditorSymbols(e,o,t,i):this.doProvideWithoutEditorSymbols(e,o,t,i):ge.None}doProvideWithoutEditorSymbols(e,t,i,n){const o=new Ae;return this.provideLabelPick(i,b("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),Ew(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,o))||n.isCancellationRequested||o.add(this.doProvideWithEditorSymbols(e,t,i,n))}),o}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return Ew(this,void 0,void 0,function*(){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const i=new mB,n=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(n.dispose(),i.complete(!0))}));return t.add(ni(()=>i.complete(!1))),i.p})}doProvideWithEditorSymbols(e,t,i,n){var o;const r=e.editor,a=new Ae;a.add(i.onDidAccept(g=>{const[m]=i.selectedItems;m&&m.range&&(this.gotoLocation(e,{range:m.range.selection,keyMods:i.keyMods,preserveFocus:g.inBackground}),g.inBackground||i.hide())})),a.add(i.onDidTriggerItemButton(({item:g})=>{g&&g.range&&(this.gotoLocation(e,{range:g.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())}));const l=this.getDocumentSymbols(t,n);let c;const d=g=>Ew(this,void 0,void 0,function*(){c==null||c.dispose(!0),i.busy=!1,c=new _o(n),i.busy=!0;try{const m=x8(i.value.substr(D8.PREFIX.length).trim()),_=yield this.doGetSymbolPicks(l,m,void 0,c.token);if(n.isCancellationRequested)return;if(_.length>0){if(i.items=_,g&&m.original.length===0){const C=vT(_,S=>Boolean(S.type!=="separator"&&S.range&&M.containsPosition(S.range.decoration,g)));C&&(i.activeItems=[C])}}else m.original.length>0?this.provideLabelPick(i,b("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,b("noSymbolResults","No editor symbols"))}finally{n.isCancellationRequested||(i.busy=!1)}});a.add(i.onDidChangeValue(()=>d(void 0))),d((o=r.getSelection())===null||o===void 0?void 0:o.getPosition());let f=2;return a.add(i.onDidChangeActive(()=>{const[g]=i.activeItems;if(g&&g.range){if(f-- >0)return;r.revealRangeInCenter(g.range.selection,0),this.addDecorations(r,g.range.decoration)}})),a}doGetSymbolPicks(e,t,i,n){return Ew(this,void 0,void 0,function*(){const o=yield e;if(n.isCancellationRequested)return[];const r=t.original.indexOf(D8.SCOPE_PREFIX)===0,a=r?1:0;let l,c;t.values&&t.values.length>1?(l=dQ(t.values[0]),c=dQ(t.values.slice(1))):l=t;const d=[];for(let m=0;m<o.length;m++){const _=o[m],C=$1e(_.name),S=`$(${S5.toIcon(_.kind).id}) ${C}`,x=S.length-C.length;let L=_.containerName;i!=null&&i.extraContainerLabel&&(L?L=`${i.extraContainerLabel} \u2022 ${L}`:L=i.extraContainerLabel);let k,T,A,O;if(t.original.length>a){let R=!1;if(l!==t&&([k,T]=zF(S,Object.assign(Object.assign({},t),{values:void 0}),a,x),typeof k=="number"&&(R=!0)),typeof k!="number"&&([k,T]=zF(S,l,a,x),typeof k!="number"))continue;if(!R&&c){if(L&&c.original.length>0&&([A,O]=zF(L,c)),typeof A!="number")continue;typeof k=="number"&&(k+=A)}}const I=_.tags&&_.tags.indexOf(1)>=0;d.push({index:m,kind:_.kind,score:k,label:S,ariaLabel:C,description:L,highlights:I?void 0:{label:T,description:O},range:{selection:M.collapseToStart(_.selectionRange),decoration:_.range},strikethrough:I,buttons:(()=>{var R,B;const z=!((R=this.options)===null||R===void 0)&&R.openSideBySideDirection?(B=this.options)===null||B===void 0?void 0:B.openSideBySideDirection():void 0;if(!!z)return[{iconClass:z==="right"?w.splitHorizontal.classNames:w.splitVertical.classNames,tooltip:z==="right"?b("openToSide","Open to the Side"):b("openToBottom","Open to the Bottom")}]})()})}const f=d.sort((m,_)=>r?this.compareByKindAndScore(m,_):this.compareByScore(m,_));let g=[];if(r){let S=function(){_&&typeof m=="number"&&C>0&&(_.label=bl($F[m]||UF,C))},m,_,C=0;for(const x of f)m!==x.kind?(S(),m=x.kind,C=1,_={type:"separator"},g.push(_)):C++,g.push(x);S()}else f.length>0&&(g=[{label:b("symbols","symbols ({0})",d.length),type:"separator"},...f]);return g})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const i=$F[e.kind]||UF,n=$F[t.kind]||UF,o=i.localeCompare(n);return o===0?this.compareByScore(e,t):o}getDocumentSymbols(e,t){return Ew(this,void 0,void 0,function*(){const i=yield this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()})}};uc.PREFIX="@";uc.SCOPE_PREFIX=":";uc.PREFIX_BY_CATEGORY=`${uc.PREFIX}${uc.SCOPE_PREFIX}`;uc=CWe([hQ(0,ct),hQ(1,GR)],uc);const UF=b("property","properties ({0})"),$F={[5]:b("method","methods ({0})"),[11]:b("function","functions ({0})"),[8]:b("_constructor","constructors ({0})"),[12]:b("variable","variables ({0})"),[4]:b("class","classes ({0})"),[22]:b("struct","structs ({0})"),[23]:b("event","events ({0})"),[24]:b("operator","operators ({0})"),[10]:b("interface","interfaces ({0})"),[2]:b("namespace","namespaces ({0})"),[3]:b("package","packages ({0})"),[25]:b("typeParameter","type parameters ({0})"),[1]:b("modules","modules ({0})"),[6]:b("property","properties ({0})"),[9]:b("enum","enumerations ({0})"),[21]:b("enumMember","enumeration members ({0})"),[14]:b("string","strings ({0})"),[0]:b("file","files ({0})"),[17]:b("array","arrays ({0})"),[15]:b("number","numbers ({0})"),[16]:b("boolean","booleans ({0})"),[18]:b("object","objects ({0})"),[19]:b("key","keys ({0})"),[7]:b("field","fields ({0})"),[13]:b("constant","constants ({0})")};var wWe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},jF=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let k8=class extends uc{constructor(e,t,i){super(t,i),this.editorService=e,this.onDidActiveTextEditorControlChange=gt.None}get activeTextEditorControl(){return zr(this.editorService.getFocusedCodeEditor())}};k8=wWe([jF(0,Vi),jF(1,ct),jF(2,GR)],k8);class $L extends ot{constructor(){super({id:$L.ID,label:mS.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:$.hasDocumentSymbolProvider,kbOpts:{kbExpr:$.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(rf).quickAccess.show(uc.PREFIX)}}$L.ID="editor.action.quickOutline";We($L);Wn.as(R_.Quickaccess).registerQuickAccessProvider({ctor:k8,prefix:uc.PREFIX,helpEntries:[{description:mS.quickOutlineActionLabel,prefix:uc.PREFIX,commandId:$L.ID},{description:mS.quickOutlineByCategoryActionLabel,prefix:uc.PREFIX_BY_CATEGORY}]});function KF(s,e){return e&&(s.stack||s.stacktrace)?b("stackTrace.format","{0}: {1}",gQ(s),fQ(s.stack)||fQ(s.stacktrace)):gQ(s)}function fQ(s){return Array.isArray(s)?s.join(`
`):s}function gQ(s){return typeof s.code=="string"&&typeof s.errno=="number"&&typeof s.syscall=="string"?b("nodeExceptionMessage","A system error occurred ({0})",s.message):s.message||b("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function dre(s=null,e=!1){if(!s)return b("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(s)){const t=oL(s),i=dre(t[0],e);return t.length>1?b("error.moreErrors","{0} ({1} errors in total)",i,t.length):i}if(Kr(s))return s;if(s.detail){const t=s.detail;if(t.error)return KF(t.error,e);if(t.exception)return KF(t.exception,e)}return s.stack?KF(s,e):s.message?s.message:b("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var kE=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})},Fb;(function(s){s[s.NO_ACTION=0]="NO_ACTION",s[s.CLOSE_PICKER=1]="CLOSE_PICKER",s[s.REFRESH_PICKER=2]="REFRESH_PICKER",s[s.REMOVE_ITEM=3]="REMOVE_ITEM"})(Fb||(Fb={}));function qF(s){const e=s;return Array.isArray(e.items)}function yWe(s){const e=s;return!!e.picks&&e.additionalPicks instanceof Promise}class f2 extends ge{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t){var i;const n=new Ae;e.canAcceptInBackground=!!(!((i=this.options)===null||i===void 0)&&i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let o;const r=n.add(new tr),a=()=>kE(this,void 0,void 0,function*(){const l=r.value=new Ae;o==null||o.dispose(!0),e.busy=!1,o=new _o(t);const c=o.token,d=e.value.substr(this.prefix.length).trim(),f=this._getPicks(d,l,c),g=(m,_)=>{var C;let S,x;if(qF(m)?(S=m.items,x=m.active):S=m,S.length===0){if(_)return!1;d.length>0&&((C=this.options)===null||C===void 0?void 0:C.noResultsPick)&&(S=[this.options.noResultsPick])}return e.items=S,x&&(e.activeItems=[x]),!0};if(f!==null)if(yWe(f)){let m=!1,_=!1;yield Promise.all([(()=>kE(this,void 0,void 0,function*(){yield Ag(f2.FAST_PICKS_RACE_DELAY),!c.isCancellationRequested&&(_||(m=g(f.picks,!0)))}))(),(()=>kE(this,void 0,void 0,function*(){e.busy=!0;try{const C=yield f.additionalPicks;if(c.isCancellationRequested)return;let S,x;qF(f.picks)?(S=f.picks.items,x=f.picks.active):S=f.picks;let L,k;if(qF(C)?(L=C.items,k=C.active):L=C,L.length>0||!m){let T;if(!x&&!k){const A=e.activeItems[0];A&&S.indexOf(A)!==-1&&(T=A)}g({items:[...S,...L],active:x||k||T})}}finally{c.isCancellationRequested||(e.busy=!1),_=!0}}))()])}else if(!(f instanceof Promise))g(f);else{e.busy=!0;try{const m=yield f;if(c.isCancellationRequested)return;g(m)}finally{c.isCancellationRequested||(e.busy=!1)}}});return n.add(e.onDidChangeValue(()=>a())),a(),n.add(e.onDidAccept(l=>{const[c]=e.selectedItems;typeof(c==null?void 0:c.accept)=="function"&&(l.inBackground||e.hide(),c.accept(e.keyMods,l))})),n.add(e.onDidTriggerItemButton(({button:l,item:c})=>kE(this,void 0,void 0,function*(){var d,f;if(typeof c.trigger=="function"){const g=(f=(d=c.buttons)===null||d===void 0?void 0:d.indexOf(l))!==null&&f!==void 0?f:-1;if(g>=0){const m=c.trigger(g,e.keyMods),_=typeof m=="number"?m:yield m;if(t.isCancellationRequested)return;switch(_){case Fb.NO_ACTION:break;case Fb.CLOSE_PICKER:e.hide();break;case Fb.REFRESH_PICKER:a();break;case Fb.REMOVE_ITEM:{const C=e.items.indexOf(c);if(C!==-1){const S=e.items.slice(),x=S.splice(C,1),L=e.activeItems.filter(T=>T!==x[0]),k=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=S,L&&(e.activeItems=L),e.keepScrollPosition=k}break}}}}}))),n}}f2.FAST_PICKS_RACE_DELAY=200;var hre=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},lm=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},pQ=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let XS=class aT extends f2{constructor(e,t,i,n,o,r){super(aT.PREFIX,e),this.instantiationService=t,this.keybindingService=i,this.commandService=n,this.telemetryService=o,this.dialogService=r,this.commandsHistory=this._register(this.instantiationService.createInstance(v_)),this.options=e}_getPicks(e,t,i){return pQ(this,void 0,void 0,function*(){const n=yield this.getCommandPicks(t,i);if(i.isCancellationRequested)return[];const o=[];for(const c of n){const d=zr(aT.WORD_FILTER(e,c.label)),f=c.commandAlias?zr(aT.WORD_FILTER(e,c.commandAlias)):void 0;d||f?(c.highlights={label:d,detail:this.options.showAlias?f:void 0},o.push(c)):e===c.commandId&&o.push(c)}const r=new Map;for(const c of o){const d=r.get(c.label);d?(c.description=c.commandId,d.description=d.commandId):r.set(c.label,c)}o.sort((c,d)=>{const f=this.commandsHistory.peek(c.commandId),g=this.commandsHistory.peek(d.commandId);return f&&g?f>g?-1:1:f?-1:g?1:c.label.localeCompare(d.label)});const a=[];let l=!1;for(let c=0;c<o.length;c++){const d=o[c],f=this.keybindingService.lookupKeybinding(d.commandId),g=f?b("commandPickAriaLabelWithKeybinding","{0}, {1}",d.label,f.getAriaLabel()):d.label;c===0&&this.commandsHistory.peek(d.commandId)&&(a.push({type:"separator",label:b("recentlyUsed","recently used")}),l=!0),c!==0&&l&&!this.commandsHistory.peek(d.commandId)&&(a.push({type:"separator",label:b("morecCommands","other commands")}),l=!1),a.push(Object.assign(Object.assign({},d),{ariaLabel:g,detail:this.options.showAlias&&d.commandAlias!==d.label?d.commandAlias:void 0,keybinding:f,accept:()=>pQ(this,void 0,void 0,function*(){this.commandsHistory.push(d.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"quick open"});try{yield this.commandService.executeCommand(d.commandId)}catch(m){Dd(m)||this.dialogService.show(Pn.Error,b("canNotRun","Command '{0}' resulted in an error ({1})",d.label,dre(m)))}})}))}return a})}};XS.PREFIX=">";XS.WORD_FILTER=w6(rR,ANe,_te);XS=hre([lm(1,Zt),lm(2,xs),lm(3,fs),lm(4,gu),lm(5,wL)],XS);let v_=class Hs extends ge{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(()=>this.updateConfiguration()))}updateConfiguration(){this.configuredCommandsHistoryLength=Hs.getConfiguredCommandHistoryLength(this.configurationService),Hs.cache&&Hs.cache.limit!==this.configuredCommandsHistoryLength&&(Hs.cache.limit=this.configuredCommandsHistoryLength,Hs.saveState(this.storageService))}load(){const e=this.storageService.get(Hs.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch{}const i=Hs.cache=new tp(this.configuredCommandsHistoryLength,1);if(t){let n;t.usesLRU?n=t.entries:n=t.entries.sort((o,r)=>o.value-r.value),n.forEach(o=>i.set(o.key,o.value))}Hs.counter=this.storageService.getNumber(Hs.PREF_KEY_COUNTER,0,Hs.counter)}push(e){!Hs.cache||(Hs.cache.set(e,Hs.counter++),Hs.saveState(this.storageService))}peek(e){var t;return(t=Hs.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!Hs.cache)return;const t={usesLRU:!0,entries:[]};Hs.cache.forEach((i,n)=>t.entries.push({key:n,value:i})),e.store(Hs.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(Hs.PREF_KEY_COUNTER,Hs.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,i;const o=(i=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||i===void 0?void 0:i.history;return typeof o=="number"?o:Hs.DEFAULT_COMMANDS_HISTORY_LENGTH}};v_.DEFAULT_COMMANDS_HISTORY_LENGTH=50;v_.PREF_KEY_CACHE="commandPalette.mru.cache";v_.PREF_KEY_COUNTER="commandPalette.mru.counter";v_.counter=1;v_=hre([lm(0,mc),lm(1,Ai)],v_);class SWe extends XS{constructor(e,t,i,n,o,r){super(e,t,i,n,o,r)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const i of e.getSupportedActions())t.push({commandId:i.id,commandAlias:i.alias,label:E6(i.label)||i.id});return t}}var LWe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},sb=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}},xWe=globalThis&&globalThis.__awaiter||function(s,e,t,i){function n(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(f){r(f)}}function l(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(s,e||[])).next())})};let JS=class extends SWe{constructor(e,t,i,n,o,r){super({showAlias:!1},e,i,n,o,r),this.codeEditorService=t}get activeTextEditorControl(){return zr(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return xWe(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}};JS=LWe([sb(0,Zt),sb(1,Vi),sb(2,xs),sb(3,fs),sb(4,gu),sb(5,wL)],JS);class jL extends ot{constructor(){super({id:jL.ID,label:wI.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:$.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(rf).quickAccess.show(JS.PREFIX)}}jL.ID="editor.action.quickCommand";We(jL);Wn.as(R_.Quickaccess).registerQuickAccessProvider({ctor:JS,prefix:JS.PREFIX,helpEntries:[{description:wI.quickCommandHelp,commandId:jL.ID}]});var DWe=globalThis&&globalThis.__decorate||function(s,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ob=globalThis&&globalThis.__param||function(s,e){return function(t,i){e(t,i,s)}};let E8=class extends jg{constructor(e,t,i,n,o,r,a){super(!0,e,t,i,n,o,r,a)}};E8=DWe([ob(1,jt),ob(2,Vi),ob(3,gs),ob(4,Zt),ob(5,mc),ob(6,Ai)],E8);Ei(jg.ID,E8);class kWe extends ot{constructor(){super({id:"editor.action.toggleHighContrast",label:p7.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const i=e.get(Xa),n=i.getColorTheme();Vo(n.type)?(i.setTheme(this._originalThemeName||(Zy(n.type)?i0:Eh)),this._originalThemeName=null):(i.setTheme(Zy(n.type)?Tm:Im),this._originalThemeName=n.themeName)}}We(kWe);const EWe=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:ine,Emitter:nne,KeyCode:sne,KeyMod:one,Position:rne,Range:ane,Selection:lne,SelectionDirection:cne,MarkerSeverity:une,MarkerTag:dne,Uri:hne,Token:fne,editor:gne,languages:pne},Symbol.toStringTag,{value:"Module"}));function TWe(){return new Worker("/examples/assets/editor.worker.b9a77fdc.js")}function IWe(){return new Worker("/examples/assets/json.worker.5a945e9b.js")}function NWe(){return new Worker("/examples/assets/css.worker.91dbdef6.js")}function RWe(){return new Worker("/examples/assets/html.worker.f42a22f4.js")}function AWe(){return new Worker("/examples/assets/ts.worker.1009fac7.js")}var Oc="F:\\GitHub\\tgis-3d-vite\\examples\\src\\components\\Source\\index.tsx";self.MonacoEnvironment={getWorker(s,e){return e==="json"?new IWe:e==="css"||e==="scss"||e==="less"?new NWe:e==="html"||e==="handlebars"||e==="razor"?new RWe:e==="typescript"||e==="javascript"?new AWe:new TWe}};B8.config({monaco:EWe});const MWe=({onRun:s,onReset:e,code:t},i)=>{const n=ye.exports.useRef(null),o=ye.exports.useCallback((l,c)=>{n.current=l},[]),r=e&&ye.exports.useCallback(e,[t]),a=ye.exports.useCallback(()=>s==null?void 0:s(n.current.getValue()),[]);return ye.exports.useImperativeHandle(i,()=>({setCode:l=>{var c;return(c=n==null?void 0:n.current)==null?void 0:c.setValue(l)}})),ut(Z0e,{className:"source-wrap",children:[ut("div",{className:"source-header",children:[ut("div",{className:"sign",children:ut("div",{className:"javascript",children:"JS"},void 0,!1,{fileName:Oc,lineNumber:59,columnNumber:21},void 0)},void 0,!1,{fileName:Oc,lineNumber:58,columnNumber:17},void 0),ut("span",{className:"file-tip",children:"JS\u4EE3\u7801"},void 0,!1,{fileName:Oc,lineNumber:61,columnNumber:17},void 0),ut("div",{className:"actions",children:[ut("div",{className:"action",onClick:r,children:[ut("span",{className:"iconfont icon-exchangerate"},void 0,!1,{fileName:Oc,lineNumber:64,columnNumber:25},void 0),"\u91CD\u7F6E"]},void 0,!0,{fileName:Oc,lineNumber:63,columnNumber:21},void 0),ut("div",{className:"action",onClick:a,children:[ut("span",{className:"iconfont icon-play"},void 0,!1,{fileName:Oc,lineNumber:68,columnNumber:25},void 0),"\u8FD0\u884C"]},void 0,!0,{fileName:Oc,lineNumber:67,columnNumber:21},void 0)]},void 0,!0,{fileName:Oc,lineNumber:62,columnNumber:17},void 0)]},void 0,!0,{fileName:Oc,lineNumber:57,columnNumber:13},void 0),ut(Y0e,{height:"100%",defaultLanguage:"javascript",value:t,theme:"vs-dark",options:{fontSize:16},onMount:o},void 0,!1,{fileName:Oc,lineNumber:73,columnNumber:13},void 0)]},void 0,!0,{fileName:Oc,lineNumber:56,columnNumber:9},void 0)},OWe=ye.exports.memo(ye.exports.forwardRef(MWe)),PWe=Ya.div`
    box-sizing: border-box;
    height: 100%;
    iframe {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        border: none;
    }
`;var mQ="F:\\GitHub\\tgis-3d-vite\\examples\\src\\components\\Stage\\index.tsx";const FWe=(s,e)=>{const t=ye.exports.useRef(null),i=n=>{if(t.current){const o=t.current.contentDocument;o==null||o.open(),o==null||o.write(`
                <head>
                    <meta charset="UTF-8" />
                    <script src="./Sandcastle-header.js"><\/script>
                    <link rel="stylesheet" href="./Sandcastle-header.css" />
                    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@7.1.0/ol.css" /> -->
                    <!-- <script src="https://cdn.jsdelivr.net/npm/ol@7.1.0/dist/ol.js"><\/script> -->

                    <link rel="stylesheet" href="./openlayers/v7.1.0/ol.css" />
                    <script src="./openlayers/v7.1.0/ol.js"><\/script>

                    <script src="./map2d.iife.js"><\/script>
                    <style>
                        *, html, body {
                            padding: 0;
                            margin: 0;
                        }
                        #map {
                            position: fixed;
                            left: 0px;
                            right: 0px;
                            bottom: 0px;
                            top: 0px;
                            background: #ececec;
                        }
                        #toolbar {
                            margin: 5px;
                            padding: 2px 5px;
                            position: absolute;
                        }
                        .cesium-button input, .cesium-button label {
                            display: flex;
                            align-items: center;
                        }
                        .cesium-button input, .cesium-button label input {
                            margin-right: 4px;
                        }
                    </style>
                </head>
                <body onload="onload()">
                    <div id="map"></div>
                    <div id="toolbar"></div>
                    <script>
                        function onload(){
                            ${n}
                        }
                    <\/script>
                </body>
            `),o==null||o.close()}};return ye.exports.useImperativeHandle(e,()=>({writeIframe:i})),ut(PWe,{children:ut("iframe",{ref:t},void 0,!1,{fileName:mQ,lineNumber:73,columnNumber:13},void 0)},void 0,!1,{fileName:mQ,lineNumber:72,columnNumber:9},void 0)},BWe=ye.exports.memo(ye.exports.forwardRef(FWe));var Tw="F:\\GitHub\\tgis-3d-vite\\examples\\src\\pages\\Sandcastle\\index.tsx";const VWe=ye.exports.memo(()=>{const[s,e]=ye.exports.useState(""),[t]=l_e(),i=Fr.useRef(null),n=ye.exports.useRef(null),o=ye.exports.useCallback(()=>{const l=t.get("r");return new Promise((c,d)=>{l?fetch(l).then(f=>f.text()).then(f=>c(f)).catch(f=>d(f)):d(new Error("url is not defined"))})},[s]),r=ye.exports.useCallback(l=>{var c;l=l.replace('import * as Map2d from "map2d"',""),(c=i.current)==null||c.writeIframe(l)},[]),a=ye.exports.useCallback(()=>{o().then(l=>{var c;e(l),(c=n.current)==null||c.setCode(l),r(l)})},[]);return ye.exports.useEffect(()=>{a()},[location]),ut(MP,{defaultSizes:[80,200],children:[ut(MP.Pane,{children:ut(OWe,{ref:n,code:s,onRun:r,onReset:a},void 0,!1,{fileName:Tw,lineNumber:54,columnNumber:17},void 0)},void 0,!1,{fileName:Tw,lineNumber:53,columnNumber:13},void 0),ut(MP.Pane,{visible:!0,children:ut(BWe,{ref:i},void 0,!1,{fileName:Tw,lineNumber:62,columnNumber:17},void 0)},void 0,!1,{fileName:Tw,lineNumber:61,columnNumber:13},void 0)]},void 0,!0,{fileName:Tw,lineNumber:52,columnNumber:9},void 0)});var GF="F:\\GitHub\\tgis-3d-vite\\examples\\src\\Router.tsx";const WWe=i_e([{path:"",element:ut(ave,{},void 0,!1,{fileName:GF,lineNumber:12,columnNumber:18},void 0),children:[{path:"/",element:ut(ibe,{},void 0,!1,{fileName:GF,lineNumber:16,columnNumber:26},void 0)},{path:"/editor",element:ut(VWe,{},void 0,!1,{fileName:GF,lineNumber:20,columnNumber:26},void 0)}]}]);var _Q="F:\\GitHub\\tgis-3d-vite\\examples\\src\\main.tsx";ZF.createRoot(document.getElementById("root")).render(ut(Fr.StrictMode,{children:ut(Hme,{router:WWe},void 0,!1,{fileName:_Q,lineNumber:10,columnNumber:5},globalThis)},void 0,!1,{fileName:_Q,lineNumber:9,columnNumber:3},globalThis));export{EL as m,Nne as t};
